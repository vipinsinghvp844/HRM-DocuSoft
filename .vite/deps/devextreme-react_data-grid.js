"use client";
import {
  ACTIVE_EVENT_NAME,
  Action,
  CLICK_EVENT_NAME,
  ChildDefaultTemplate,
  DRAG_END_EVENT,
  DRAG_ENTER_EVENT,
  DRAG_EVENT,
  DRAG_LEAVE_EVENT,
  DRAG_START_EVENT,
  DataSource,
  Deferred,
  EVENT_NAME,
  EmptyTemplate,
  EventsStrategy,
  FunctionTemplate,
  HOVEREND,
  HOVERSTART,
  OverlayPositionController,
  TemplateBase,
  abstract_store_default,
  addNamespace,
  addOffsetToMaxHeight,
  addOffsetToMinHeight,
  adjust,
  aggregators,
  applyBatch,
  applyServerDecimalSeparator,
  array_store_default,
  asyncNoop,
  attachInstanceToElement,
  browser_default,
  callbacks_default,
  camelize,
  cancelAnimationFrame,
  captionize,
  class_default,
  cleanDataRecursive,
  click,
  clipboardText,
  closestCommonParent,
  compare,
  compileGetter,
  compileSetter,
  component_registrator_default,
  config_default,
  contains,
  convertRulesToOptions,
  create,
  createDefaultOptionRules,
  createEvent,
  createObjectWithChanges,
  createTextElementHiddenCopy,
  current,
  custom_store_default,
  dasherize,
  data,
  date_default,
  date_default2,
  deepExtendArraySafe,
  defaultScreenFactorFunc,
  default_date_names_default,
  deferRender,
  deferRenderer,
  deferUpdate,
  deferUpdater,
  dependency_injector_default,
  devices_default,
  dom_adapter_default,
  dom_component_default,
  dxClick,
  each,
  emitter_default,
  emitter_gesture_default,
  emitter_registrator_default,
  encodeHtml,
  ensureDefined,
  equalByValue,
  errors,
  errors_default,
  escapeRegExp,
  eventData,
  eventDelta,
  event_registrator_default,
  events_engine_default,
  executeAsync,
  extend,
  filtering_default,
  findTemplates,
  fireEvent,
  fitIntoRange,
  focus,
  focusable,
  focused,
  format,
  format_helper_default,
  fromPromise,
  fx_default,
  getBoundingRect,
  getChar,
  getCurrentScreenFactor,
  getDefaultAlignment,
  getFormat,
  getFormat2,
  getFormatter,
  getHeight,
  getInnerHeight,
  getInnerWidth,
  getInstanceByElement,
  getKeyHash,
  getName,
  getOffset,
  getOuterHeight,
  getOuterWidth,
  getPathParts,
  getPatternSetters,
  getPublicElement,
  getRegExpInfo,
  getSessionStorage,
  getUniqueValues,
  getVerticalOffsets,
  getVisibleHeight,
  getWidth,
  getWindow,
  grep,
  guid_default,
  hasWindow,
  inRange,
  indexByKey,
  inputType,
  insert,
  isBoolean,
  isCommandKeyPressed,
  isCompact,
  isDate,
  isDeferred,
  isDefined,
  isDxMouseWheelEvent,
  isElementInDom,
  isEmpty,
  isEmptyObject,
  isFluent,
  isFunction,
  isGeneric,
  isLastZIndexInStack,
  isMaterial,
  isMaterialBased,
  isMouseEvent,
  isNumeric,
  isObject,
  isPlainObject,
  isPrimitive,
  isPromise,
  isRenderer,
  isString,
  isTouchEvent,
  isWindow,
  keyboard,
  keyboard_processor_default,
  keysEqual,
  load_indicator_default,
  load_panel_default,
  locate,
  lock,
  logger,
  m_utils_default,
  map,
  message_default,
  move,
  nativeScrolling,
  needSkipEvent,
  noop,
  normalizeDataSourceOptions,
  normalizeIndexes,
  normalizeKeyName,
  normalizeLoadResult,
  normalizeSortingInfo,
  normalizeStyleProp,
  number_default,
  orderEach,
  originalViewPort,
  pairToObject,
  pointer_default,
  position_default,
  quadToObject,
  query_default,
  ready_callbacks_default,
  remove,
  removeDuplicates,
  removeEvent,
  renderer_default,
  replaceWith,
  requestAnimationFrame,
  resetActiveElement,
  resetPosition,
  resize,
  resize_callbacks_default,
  setHeight,
  setHeight2,
  setOuterHeight,
  setOuterWidth,
  setStyle,
  setWidth,
  setWidth2,
  sign,
  splitPair,
  store_helper_default,
  styleProp,
  stylePropPrefix,
  swatch_container_default,
  titleize,
  toComparable,
  touch,
  triggerResizeEvent,
  triggerShownEvent,
  type,
  ui_errors_default,
  ui_overlay_default,
  ui_widget_default,
  update,
  value,
  variable_wrapper_default,
  visibility,
  waitWebFont,
  when
} from "./chunk-AF2BKCCC.js";
import {
  require_prop_types
} from "./chunk-WQISAHG2.js";
import {
  _extends,
  _objectWithoutPropertiesLoose
} from "./chunk-H3QGJKSP.js";
import "./chunk-L55ZGYC7.js";
import {
  require_react_dom
} from "./chunk-NPU5F6LQ.js";
import {
  require_react
} from "./chunk-7JZAKNLV.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/devextreme/esm/ui/shared/accessibility.js
var FOCUS_STATE_CLASS = "dx-state-focused";
var FOCUS_DISABLED_CLASS = "dx-cell-focus-disabled";
var FOCUSED_ROW_SELECTOR = ".dx-row-focused";
var GRID_ROW_SELECTOR = ".dx-datagrid-rowsview .dx-row";
var GRID_CELL_SELECTOR = "".concat(GRID_ROW_SELECTOR, " > td");
var TREELIST_ROW_SELECTOR = ".dx-treelist-rowsview .dx-row";
var TREELIST_CELL_SELECTOR = "".concat(TREELIST_ROW_SELECTOR, " > td");
var viewItemSelectorMap = {
  groupPanel: [".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],
  columnHeaders: [".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action", ".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],
  filterRow: [".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input", ".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],
  rowsView: ["".concat(FOCUSED_ROW_SELECTOR), "".concat(GRID_ROW_SELECTOR, "[tabindex]"), "".concat(GRID_CELL_SELECTOR, "[tabindex]"), "".concat(GRID_CELL_SELECTOR), "".concat(TREELIST_ROW_SELECTOR, "[tabindex]"), "".concat(TREELIST_CELL_SELECTOR, "[tabindex]"), "".concat(TREELIST_CELL_SELECTOR)],
  footer: [".dx-datagrid-total-footer .dx-datagrid-summary-item", ".dx-treelist-total-footer .dx-treelist-summary-item"],
  filterPanel: [".dx-datagrid-filter-panel .dx-icon-filter", ".dx-treelist-filter-panel .dx-icon-filter"],
  pager: [".dx-datagrid-pager [tabindex]", ".dx-treelist-pager [tabindex]"]
};
var isMouseDown = false;
var isHiddenFocusing = false;
var focusedElementInfo = null;
function processKeyDown(viewName2, instance, event, action, $mainElement, executeKeyDown) {
  var isHandled = fireKeyDownEvent(instance, event.originalEvent, executeKeyDown);
  if (isHandled) {
    return;
  }
  var keyName = normalizeKeyName(event);
  if ("enter" === keyName || "space" === keyName) {
    saveFocusedElementInfo(event.target, instance);
    action && action({
      event
    });
  } else if ("tab" === keyName) {
    $mainElement.addClass(FOCUS_STATE_CLASS);
  } else {
    selectView(viewName2, instance, event);
  }
}
function saveFocusedElementInfo(target, instance) {
  var $target = renderer_default(target);
  var ariaLabel = $target.attr("aria-label");
  var $activeElements = getActiveAccessibleElements(ariaLabel, instance.element());
  var targetIndex = $activeElements.index($target);
  focusedElementInfo = extend({}, {
    ariaLabel,
    index: targetIndex
  }, {
    viewInstance: instance
  });
}
function getActiveAccessibleElements(ariaLabel, viewElement) {
  var $viewElement = renderer_default(viewElement);
  var $activeElements;
  if (ariaLabel) {
    var escapedAriaLabel = null === ariaLabel || void 0 === ariaLabel ? void 0 : ariaLabel.replace(/\\/g, "\\\\").replace(/"/g, '\\"');
    $activeElements = $viewElement.find('[aria-label="'.concat(escapedAriaLabel, '"][tabindex]'));
  } else {
    $activeElements = $viewElement.find("[tabindex]");
  }
  return $activeElements;
}
function findFocusedViewElement(viewSelectors, element) {
  var root = (null === element || void 0 === element ? void 0 : element.getRootNode()) || dom_adapter_default.getDocument();
  for (var index in viewSelectors) {
    var selector = viewSelectors[index];
    var $focusViewElement = renderer_default(root).find(selector).first();
    if ($focusViewElement.length) {
      return $focusViewElement;
    }
  }
}
function fireKeyDownEvent(instance, event, executeAction) {
  var args = {
    event,
    handled: false
  };
  if (executeAction) {
    executeAction(args);
  } else {
    instance._createActionByOption("onKeyDown")(args);
  }
  return args.handled;
}
function onDocumentVisibilityChange() {
  isHiddenFocusing = "visible" === dom_adapter_default.getDocument().visibilityState;
}
function subscribeVisibilityChange() {
  events_engine_default.on(dom_adapter_default.getDocument(), "visibilitychange", onDocumentVisibilityChange);
}
function unsubscribeVisibilityChange() {
  events_engine_default.off(dom_adapter_default.getDocument(), "visibilitychange", onDocumentVisibilityChange);
}
function hiddenFocus(element, preventScroll) {
  isHiddenFocusing = true;
  element.focus({
    preventScroll
  });
  isHiddenFocusing = false;
}
function registerKeyboardAction(viewName2, instance, $element, selector, action, executeKeyDown) {
  if (instance.option("useLegacyKeyboardNavigation")) {
    return noop;
  }
  var getMainElement = () => renderer_default(instance.element());
  var keyDownHandler = (e) => processKeyDown(viewName2, instance, e, action, getMainElement(), executeKeyDown);
  var mouseDownHandler = () => {
    isMouseDown = true;
    getMainElement().removeClass(FOCUS_STATE_CLASS);
  };
  var focusinHandler = () => {
    var needShowOverlay = !isMouseDown && !isHiddenFocusing;
    if (needShowOverlay) {
      getMainElement().addClass(FOCUS_STATE_CLASS);
    }
    isMouseDown = false;
  };
  events_engine_default.on($element, "keydown", selector, keyDownHandler);
  events_engine_default.on($element, "mousedown", selector, mouseDownHandler);
  events_engine_default.on($element, "focusin", selector, focusinHandler);
  return () => {
    events_engine_default.off($element, "keydown", selector, keyDownHandler);
    events_engine_default.off($element, "mousedown", selector, mouseDownHandler);
    events_engine_default.off($element, "focusin", selector, focusinHandler);
  };
}
function restoreFocus(instance) {
  if (!instance.option("useLegacyKeyboardNavigation") && focusedElementInfo) {
    var viewInstance = focusedElementInfo.viewInstance;
    if (viewInstance) {
      var $activeElements = getActiveAccessibleElements(focusedElementInfo.ariaLabel, viewInstance.element());
      var $targetElement = $activeElements.eq(focusedElementInfo.index);
      focusedElementInfo = null;
      events_engine_default.trigger($targetElement, "focus");
    }
  }
}
function selectView(viewName2, instance, event) {
  var keyName = normalizeKeyName(event);
  if (event.ctrlKey && ("upArrow" === keyName || "downArrow" === keyName)) {
    var viewNames = Object.keys(viewItemSelectorMap);
    var viewItemIndex = viewNames.indexOf(viewName2);
    while (viewItemIndex >= 0 && viewItemIndex < viewNames.length) {
      viewItemIndex = "upArrow" === keyName ? --viewItemIndex : ++viewItemIndex;
      var _viewName = viewNames[viewItemIndex];
      var viewSelectors = viewItemSelectorMap[_viewName];
      var $focusViewElement = findFocusedViewElement(viewSelectors, event.target);
      if ($focusViewElement && $focusViewElement.length) {
        $focusViewElement.attr("tabindex", instance.option("tabindex") || 0);
        events_engine_default.trigger($focusViewElement, "focus");
        $focusViewElement.removeClass(FOCUS_DISABLED_CLASS);
        break;
      }
    }
  }
}
function setTabIndex(instance, $element) {
  if (!instance.option("useLegacyKeyboardnavigation")) {
    $element.attr("tabindex", instance.option("tabindex") || 0);
  }
}

// node_modules/devextreme/esm/__internal/grids/grid_core/m_accessibility.js
var registerKeyboardAction2 = function(viewName2, instance, $element, selector, action) {
  var keyboardController = instance.getController("keyboardNavigation");
  if (instance.option("useLegacyKeyboardNavigation") || keyboardController && !keyboardController.isKeyboardEnabled()) {
    return;
  }
  instance.createAction("onKeyDown");
  registerKeyboardAction(viewName2, instance, $element, selector, action, (args) => {
    instance.executeAction("onKeyDown", args);
  });
};

// node_modules/devextreme/esm/__internal/events/dblclick.js
var DBLCLICK_EVENT_NAME = "dxdblclick";
var DBLCLICK_NAMESPACE = "dxDblClick";
var NAMESPACED_CLICK_EVENT = addNamespace(CLICK_EVENT_NAME, DBLCLICK_NAMESPACE);
var DBLCLICK_TIMEOUT = 300;
var DblClick = class_default.inherit({
  ctor() {
    this._handlerCount = 0;
    this._forgetLastClick();
  },
  _forgetLastClick() {
    this._firstClickTarget = null;
    this._lastClickTimeStamp = -DBLCLICK_TIMEOUT;
  },
  add() {
    if (this._handlerCount <= 0) {
      events_engine_default.on(dom_adapter_default.getDocument(), NAMESPACED_CLICK_EVENT, this._clickHandler.bind(this));
    }
    this._handlerCount += 1;
  },
  _clickHandler(e) {
    var timeStamp = e.timeStamp || Date.now();
    var timeBetweenClicks = timeStamp - this._lastClickTimeStamp;
    var isSimulated = timeBetweenClicks < 0;
    var isDouble = !isSimulated && timeBetweenClicks < DBLCLICK_TIMEOUT;
    if (isDouble) {
      fireEvent({
        type: DBLCLICK_EVENT_NAME,
        target: closestCommonParent(this._firstClickTarget, e.target),
        originalEvent: e
      });
      this._forgetLastClick();
    } else {
      this._firstClickTarget = e.target;
      this._lastClickTimeStamp = timeStamp;
      clearTimeout(this._lastClickClearTimeout);
      this._lastClickClearTimeout = setTimeout(() => {
        this._forgetLastClick();
      }, 2 * DBLCLICK_TIMEOUT);
    }
  },
  remove() {
    this._handlerCount -= 1;
    if (this._handlerCount <= 0) {
      this._forgetLastClick();
      events_engine_default.off(dom_adapter_default.getDocument(), NAMESPACED_CLICK_EVENT, void 0);
      clearTimeout(this._lastClickClearTimeout);
      this._handlerCount = 0;
    }
  }
});
var dblClick = new DblClick();

// node_modules/devextreme/esm/events/double_click.js
event_registrator_default(DBLCLICK_EVENT_NAME, dblClick);

// node_modules/devextreme/esm/__internal/grids/grid_core/column_state_mixin/m_column_state_mixin.js
var COLUMN_INDICATORS_CLASS = "dx-column-indicators";
var GROUP_PANEL_ITEM_CLASS = "dx-group-panel-item";
var ColumnStateMixin = (Base) => class extends Base {
  _applyColumnState(options2) {
    var _a;
    var rtlEnabled = this.option("rtlEnabled");
    var columnAlignment = this._getColumnAlignment(options2.column.alignment, rtlEnabled);
    var parameters = extend(true, {
      columnAlignment
    }, options2);
    var isGroupPanelItem = parameters.rootElement.hasClass(GROUP_PANEL_ITEM_CLASS);
    var $indicatorsContainer = this._createIndicatorContainer(parameters, isGroupPanelItem);
    var $span = renderer_default("<span>").addClass(this._getIndicatorClassName(options2.name));
    var columnsController = null === (_a = this.component) || void 0 === _a ? void 0 : _a.getController("columns");
    var indicatorAlignment = (null === columnsController || void 0 === columnsController ? void 0 : columnsController.getHeaderContentAlignment(columnAlignment)) || columnAlignment;
    parameters.container = $indicatorsContainer;
    parameters.indicator = $span;
    this._renderIndicator(parameters);
    $indicatorsContainer[(isGroupPanelItem || !options2.showColumnLines) && "left" === indicatorAlignment ? "appendTo" : "prependTo"](options2.rootElement);
    return $span;
  }
  _getIndicatorClassName(name2) {
  }
  _getColumnAlignment(alignment, rtlEnabled) {
    rtlEnabled = rtlEnabled || this.option("rtlEnabled");
    return alignment && "center" !== alignment ? alignment : getDefaultAlignment(rtlEnabled);
  }
  _createIndicatorContainer(options2, ignoreIndicatorAlignment) {
    var $indicatorsContainer = this._getIndicatorContainer(options2.rootElement);
    var indicatorAlignment = "left" === options2.columnAlignment ? "right" : "left";
    if (!$indicatorsContainer.length) {
      $indicatorsContainer = renderer_default("<div>").addClass(COLUMN_INDICATORS_CLASS);
    }
    this.setAria("role", "presentation", $indicatorsContainer);
    return $indicatorsContainer.css("float", options2.showColumnLines && !ignoreIndicatorAlignment ? indicatorAlignment : null);
  }
  _getIndicatorContainer($cell) {
    return $cell && $cell.find(".".concat(COLUMN_INDICATORS_CLASS));
  }
  _getIndicatorElements($cell) {
    var $indicatorContainer = this._getIndicatorContainer($cell);
    return $indicatorContainer && $indicatorContainer.children();
  }
  _renderIndicator(options2) {
    var $container = options2.container;
    var $indicator = options2.indicator;
    $container && $indicator && $container.append($indicator);
  }
  _updateIndicators(indicatorName) {
    var columns7 = this.getColumns();
    var $cells = this.getColumnElements();
    var $cell;
    if (!$cells || columns7.length !== $cells.length) {
      return;
    }
    for (var i = 0; i < columns7.length; i++) {
      $cell = $cells.eq(i);
      this._updateIndicator($cell, columns7[i], indicatorName);
      var rowOptions = $cell.parent().data("options");
      if (rowOptions && rowOptions.cells) {
        rowOptions.cells[$cell.index()].column = columns7[i];
      }
    }
  }
  _updateIndicator($cell, column, indicatorName) {
    if (!column.command) {
      return this._applyColumnState({
        name: indicatorName,
        rootElement: $cell,
        column,
        showColumnLines: this.option("showColumnLines")
      });
    }
    return;
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/views/utils/update_views_borders.js
var __rest = function(s, e) {
  var t = {};
  for (var p2 in s) {
    if (Object.prototype.hasOwnProperty.call(s, p2) && e.indexOf(p2) < 0) {
      t[p2] = s[p2];
    }
  }
  if (null != s && "function" === typeof Object.getOwnPropertySymbols) {
    var i = 0;
    for (p2 = Object.getOwnPropertySymbols(s); i < p2.length; i++) {
      if (e.indexOf(p2[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p2[i])) {
        t[p2[i]] = s[p2[i]];
      }
    }
  }
  return t;
};
var CLASSES = {
  borderedTop: "dx-bordered-top-view",
  borderedBottom: "dx-bordered-bottom-view"
};
var getFirstVisibleViewElement = (_ref) => {
  var {
    columnHeadersView: columnHeadersView8,
    rowsView: rowsView17
  } = _ref;
  if (null === columnHeadersView8 || void 0 === columnHeadersView8 ? void 0 : columnHeadersView8.isVisible()) {
    return columnHeadersView8.element();
  }
  return rowsView17.element();
};
var getLastVisibleViewElement = (_ref2) => {
  var {
    filterPanelView,
    footerView: footerView2,
    rowsView: rowsView17
  } = _ref2;
  if (null === filterPanelView || void 0 === filterPanelView ? void 0 : filterPanelView.isVisible()) {
    return filterPanelView.element();
  }
  if (null === footerView2 || void 0 === footerView2 ? void 0 : footerView2.isVisible()) {
    return footerView2.element();
  }
  return rowsView17.element();
};
var getViewElementWithClass = (viewsWithBorder, className) => {
  var _a;
  var borderedView = Object.values(viewsWithBorder).find((view) => {
    var _a2;
    return null === (_a2 = null === view || void 0 === view ? void 0 : view.element()) || void 0 === _a2 ? void 0 : _a2.hasClass(className);
  });
  return null !== (_a = null === borderedView || void 0 === borderedView ? void 0 : borderedView.element()) && void 0 !== _a ? _a : null;
};
var shouldUpdateBorders = (viewName2, viewsWithBorder) => {
  var _a;
  if (!Object.keys(viewsWithBorder).includes(viewName2)) {
    return false;
  }
  var {
    rowsView: rowsView17
  } = viewsWithBorder, otherViews = __rest(viewsWithBorder, ["rowsView"]);
  if (!isDefined(null === (_a = null === rowsView17 || void 0 === rowsView17 ? void 0 : rowsView17.element) || void 0 === _a ? void 0 : _a.call(rowsView17))) {
    return false;
  }
  return Object.values(otherViews).filter((view) => {
    var _a2;
    return null === (_a2 = null === view || void 0 === view ? void 0 : view.isVisible) || void 0 === _a2 ? void 0 : _a2.call(view);
  }).every((view) => isDefined(null === view || void 0 === view ? void 0 : view.element()));
};
var updateViewsBorders = (viewName2, viewsWithBorder) => {
  if (!shouldUpdateBorders(viewName2, viewsWithBorder)) {
    return;
  }
  var $oldFirst = getViewElementWithClass(viewsWithBorder, CLASSES.borderedTop);
  var $oldLast = getViewElementWithClass(viewsWithBorder, CLASSES.borderedBottom);
  var $newFirst = getFirstVisibleViewElement(viewsWithBorder);
  var $newLast = getLastVisibleViewElement(viewsWithBorder);
  if ($oldFirst && !$oldFirst.is($newFirst)) {
    $oldFirst.removeClass(CLASSES.borderedTop);
  }
  if ($oldLast && !$oldLast.is($newLast)) {
    $oldLast.removeClass(CLASSES.borderedBottom);
  }
  if (!$newFirst.hasClass(CLASSES.borderedTop)) {
    $newFirst.addClass(CLASSES.borderedTop);
  }
  if (!$newLast.hasClass(CLASSES.borderedBottom)) {
    $newLast.addClass(CLASSES.borderedBottom);
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/m_modules.js
var WIDGET_WITH_LEGACY_CONTAINER_NAME = "dxDataGrid";
var ModuleItem = class {
  constructor(component) {
    var that = this;
    that._updateLockCount = 0;
    that.component = component;
    that._actions = {};
    that._actionConfigs = {};
    each(this.callbackNames() || [], function(index, name2) {
      var flags = that.callbackFlags(name2) || {};
      flags.unique = true;
      flags.syncStrategy = true;
      that[this] = callbacks_default(flags);
    });
  }
  _endUpdateCore() {
  }
  init() {
  }
  callbackNames() {
    return;
  }
  callbackFlags(name2) {
  }
  publicMethods() {
    return [];
  }
  beginUpdate() {
    this._updateLockCount++;
  }
  endUpdate() {
    if (this._updateLockCount > 0) {
      this._updateLockCount--;
      if (!this._updateLockCount) {
        this._endUpdateCore();
      }
    }
  }
  option(name2) {
    var {
      component
    } = this;
    var optionCache = component._optionCache;
    if (1 === arguments.length && optionCache) {
      if (!(name2 in optionCache)) {
        optionCache[name2] = component.option(name2);
      }
      return optionCache[name2];
    }
    return component.option.apply(component, arguments);
  }
  _silentOption(name2, value2) {
    var {
      component
    } = this;
    var optionCache = component._optionCache;
    if (optionCache) {
      optionCache[name2] = value2;
    }
    return component._setOptionWithoutOptionChange(name2, value2);
  }
  localize(name2) {
    var optionCache = this.component._optionCache;
    if (optionCache) {
      if (!(name2 in optionCache)) {
        optionCache[name2] = message_default.format(name2);
      }
      return optionCache[name2];
    }
    return message_default.format(name2);
  }
  on(event, callback) {
    return this.component.on.apply(this.component, arguments);
  }
  off() {
    return this.component.off.apply(this.component, arguments);
  }
  optionChanged(args) {
    if (args.name in this._actions) {
      this.createAction(args.name, this._actionConfigs[args.name]);
      args.handled = true;
    }
  }
  getAction(actionName) {
    return this._actions[actionName];
  }
  setAria(name2, value2, $target) {
    var target = $target.get(0);
    var prefix = "role" !== name2 && "id" !== name2 ? "aria-" : "";
    if (target.setAttribute) {
      target.setAttribute(prefix + name2, value2);
    } else {
      $target.attr(prefix + name2, value2);
    }
  }
  _createComponent($container, component, options2) {
    return this.component._createComponent($container, component, options2);
  }
  getController(name2) {
    return this.component._controllers[name2];
  }
  createAction(actionName, config2) {
    if (isFunction(actionName)) {
      var action = this.component._createAction(actionName.bind(this), config2);
      return function(e) {
        action({
          event: e
        });
      };
    }
    this._actions[actionName] = this.component._createActionByOption(actionName, config2);
    this._actionConfigs[actionName] = config2;
    return;
  }
  executeAction(actionName, options2) {
    var action = this._actions[actionName];
    return action && action(options2);
  }
  dispose() {
    var that = this;
    each(that.callbackNames() || [], function() {
      that[this].empty();
    });
  }
  addWidgetPrefix(className) {
    var componentName = this.component.NAME;
    return "dx-".concat(componentName.slice(2).toLowerCase()).concat(className ? "-".concat(className) : "");
  }
  getWidgetContainerClass() {
    var containerName = this.component.NAME === WIDGET_WITH_LEGACY_CONTAINER_NAME ? null : "container";
    return this.addWidgetPrefix(containerName);
  }
  elementIsInsideGrid($element) {
    var $gridElement = $element.closest(".".concat(this.getWidgetContainerClass())).parent();
    return $gridElement.is(this.component.$element());
  }
};
var Controller = class extends ModuleItem {
};
var ViewController = class extends Controller {
  getView(name2) {
    return this.component._views[name2];
  }
  getViews() {
    return this.component._views;
  }
};
var View = class extends ModuleItem {
  constructor(component) {
    super(component);
    this.renderCompleted = callbacks_default();
    this.resizeCompleted = callbacks_default();
  }
  _isReady() {
    return this.component.isReady();
  }
  _endUpdateCore() {
    super._endUpdateCore();
    if (!this._isReady() && this._requireReady) {
      this._requireRender = false;
      this.component._requireResize = false;
    }
    if (this._requireRender) {
      this._requireRender = false;
      this.render(this._$parent);
    }
  }
  _invalidate(requireResize, requireReady) {
    this._requireRender = true;
    this.component._requireResize = hasWindow() && (this.component._requireResize || requireResize);
    this._requireReady = this._requireReady || requireReady;
  }
  _renderCore(options2) {
  }
  _resizeCore() {
  }
  _parentElement() {
    return this._$parent;
  }
  element() {
    return this._$element;
  }
  getElementHeight() {
    var $element = this.element();
    if (!$element) {
      return 0;
    }
    var marginTop = parseFloat($element.css("marginTop")) || 0;
    var marginBottom = parseFloat($element.css("marginBottom")) || 0;
    var {
      offsetHeight
    } = $element.get(0);
    return offsetHeight + marginTop + marginBottom;
  }
  isVisible() {
    return true;
  }
  getTemplate(name2) {
    return this.component._getTemplate(name2);
  }
  getView(name2) {
    return this.component._views[name2];
  }
  _getBorderedViews() {
    return {
      columnHeadersView: this.component._views.columnHeadersView,
      rowsView: this.component._views.rowsView,
      filterPanelView: this.component._views.filterPanelView,
      footerView: this.component._views.footerView
    };
  }
  render($parent, options2) {
    var $element = this._$element;
    var isVisible = this.isVisible();
    if (!$element && !$parent) {
      return;
    }
    this._requireReady = false;
    if (!$element) {
      $element = this._$element = renderer_default("<div>").appendTo($parent);
      this._$parent = $parent;
    }
    $element.toggleClass("dx-hidden", !isVisible);
    if (this.component._views) {
      updateViewsBorders(this.name, this._getBorderedViews());
    }
    if (isVisible) {
      this.component._optionCache = {};
      var deferred = this._renderCore(options2);
      this.component._optionCache = void 0;
      if (deferred) {
        deferred.done(() => {
          this.renderCompleted.fire(options2);
        });
      } else {
        this.renderCompleted.fire(options2);
      }
    }
  }
  resize() {
    this.isResizing = true;
    this._resizeCore();
    this.resizeCompleted.fire();
    this.isResizing = false;
  }
  focus(preventScroll) {
    this.element().get(0).focus({
      preventScroll
    });
  }
};
var MODULES_ORDER_MAX_INDEX = 1e6;
function getExtendedTypes(types) {
  var moduleExtenders = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
  var extendTypes = {};
  Object.entries(moduleExtenders).forEach((_ref) => {
    var [name2, extender] = _ref;
    var currentType = types[name2];
    if (currentType) {
      if (isFunction(extender)) {
        extendTypes[name2] = extender(currentType);
      } else {
        var classType = currentType;
        extendTypes[name2] = classType.inherit(extender);
      }
    }
  });
  return extendTypes;
}
function registerPublicMethods(componentInstance, name2, moduleItem) {
  var publicMethods = moduleItem.publicMethods();
  if (publicMethods) {
    each(publicMethods, (_, methodName) => {
      if (moduleItem[methodName]) {
        if (!componentInstance[methodName]) {
          componentInstance[methodName] = function() {
            return moduleItem[methodName](...arguments);
          };
        } else {
          throw ui_errors_default.Error("E1005", methodName);
        }
      } else {
        throw ui_errors_default.Error("E1006", name2, methodName);
      }
    });
  }
}
function processModules(componentInstance, componentClass) {
  var {
    modules
  } = componentClass;
  var {
    modulesOrder
  } = componentClass;
  function createModuleItems(moduleTypes) {
    var moduleItems = {};
    each(moduleTypes, (name2, moduleType) => {
      var moduleItem = new moduleType(componentInstance);
      moduleItem.name = name2;
      registerPublicMethods(componentInstance, name2, moduleItem);
      moduleItems[name2] = moduleItem;
    });
    return moduleItems;
  }
  if (modulesOrder) {
    modules.sort((module1, module2) => {
      var orderIndex1 = modulesOrder.indexOf(module1.name);
      var orderIndex2 = modulesOrder.indexOf(module2.name);
      if (orderIndex1 < 0) {
        orderIndex1 = MODULES_ORDER_MAX_INDEX;
      }
      if (orderIndex2 < 0) {
        orderIndex2 = MODULES_ORDER_MAX_INDEX;
      }
      return orderIndex1 - orderIndex2;
    });
  }
  var rootControllerTypes = {};
  var rootViewTypes = {};
  modules.forEach((_ref2) => {
    var {
      name: moduleName,
      controllers = {},
      views = {}
    } = _ref2;
    Object.entries(controllers).forEach((_ref3) => {
      var [name2, type2] = _ref3;
      if (rootControllerTypes[name2]) {
        throw ui_errors_default.Error("E1001", moduleName, name2);
      } else if (!((null === type2 || void 0 === type2 ? void 0 : type2.prototype) instanceof Controller)) {
        throw ui_errors_default.Error("E1002", moduleName, name2);
      }
      rootControllerTypes[name2] = type2;
    });
    Object.entries(views).forEach((_ref4) => {
      var [name2, type2] = _ref4;
      if (rootViewTypes[name2]) {
        throw ui_errors_default.Error("E1003", moduleName, name2);
      } else if (!((null === type2 || void 0 === type2 ? void 0 : type2.prototype) instanceof View)) {
        throw ui_errors_default.Error("E1004", moduleName, name2);
      }
      rootViewTypes[name2] = type2;
    });
  });
  var moduleExtenders = modules.filter((_ref5) => {
    var {
      extenders
    } = _ref5;
    return !!extenders;
  });
  var controllerTypes = moduleExtenders.reduce((types, _ref6) => {
    var {
      extenders
    } = _ref6;
    return _extends(_extends({}, types), getExtendedTypes(types, null === extenders || void 0 === extenders ? void 0 : extenders.controllers));
  }, rootControllerTypes);
  var viewTypes = moduleExtenders.reduce((types, _ref7) => {
    var {
      extenders
    } = _ref7;
    return _extends(_extends({}, types), getExtendedTypes(types, null === extenders || void 0 === extenders ? void 0 : extenders.views));
  }, rootViewTypes);
  componentInstance._controllers = createModuleItems(controllerTypes);
  componentInstance._views = createModuleItems(viewTypes);
}
var callModuleItemsMethod = function(that, methodName, args) {
  args = args || [];
  if (that._controllers) {
    each(that._controllers, function() {
      this[methodName] && this[methodName].apply(this, args);
    });
  }
  if (that._views) {
    each(that._views, function() {
      this[methodName] && this[methodName].apply(this, args);
    });
  }
};
var m_modules_default = {
  modules: [],
  View,
  ViewController,
  Controller,
  registerModule(name2, module) {
    var {
      modules
    } = this;
    for (var i = 0; i < modules.length; i++) {
      if (modules[i].name === name2) {
        return;
      }
    }
    module.name = name2;
    modules.push(module);
  },
  registerModulesOrder(moduleNames) {
    this.modulesOrder = moduleNames;
  },
  unregisterModule(name2) {
    this.modules = grep(this.modules, (module) => module.name !== name2);
  },
  processModules,
  callModuleItemsMethod
};

// node_modules/devextreme/esm/__internal/grids/grid_core/views/m_columns_view.js
var SCROLL_CONTAINER_CLASS = "scroll-container";
var SCROLLABLE_SIMULATED_CLASS = "scrollable-simulated";
var GROUP_SPACE_CLASS = "group-space";
var CONTENT_CLASS = "content";
var TABLE_CLASS = "table";
var TABLE_FIXED_CLASS = "table-fixed";
var CONTENT_FIXED_CLASS = "content-fixed";
var ROW_CLASS = "dx-row";
var GROUP_ROW_CLASS = "dx-group-row";
var GROUP_CELL_CLASS = "dx-group-cell";
var DETAIL_ROW_CLASS = "dx-master-detail-row";
var FILTER_ROW_CLASS = "filter-row";
var ERROR_ROW_CLASS = "dx-error-row";
var CELL_UPDATED_ANIMATION_CLASS = "cell-updated-animation";
var HIDDEN_COLUMNS_WIDTH = "0.0001px";
var CELL_HINT_VISIBLE = "dxCellHintVisible";
var FORM_FIELD_ITEM_CONTENT_CLASS = "dx-field-item-content";
var appendElementTemplate = {
  render(options2) {
    options2.container.append(options2.content);
  }
};
var subscribeToRowEvents = function(that, $table) {
  var touchTarget;
  var touchCurrentTarget;
  var timeoutId;
  function clearTouchTargets(timeout) {
    return setTimeout(() => {
      touchTarget = touchCurrentTarget = null;
    }, timeout);
  }
  events_engine_default.on($table, "touchstart touchend", ".dx-row", (e) => {
    clearTimeout(timeoutId);
    if ("touchstart" === e.type) {
      touchTarget = e.target;
      touchCurrentTarget = e.currentTarget;
      timeoutId = clearTouchTargets(1e3);
    } else {
      timeoutId = clearTouchTargets();
    }
  });
  events_engine_default.on($table, [CLICK_EVENT_NAME, DBLCLICK_EVENT_NAME, pointer_default.down].join(" "), ".dx-row", that.createAction((e) => {
    var {
      event
    } = e;
    if (touchTarget) {
      event.target = touchTarget;
      event.currentTarget = touchCurrentTarget;
    }
    if (!renderer_default(event.target).closest("a").length) {
      e.rowIndex = that.getRowIndex(event.currentTarget);
      if (e.rowIndex >= 0) {
        e.rowElement = getPublicElement(renderer_default(event.currentTarget));
        e.columns = that.getColumns();
        if (event.type === pointer_default.down) {
          that._rowPointerDown(e);
        } else if (event.type === CLICK_EVENT_NAME) {
          that._rowClick(e);
        } else {
          that._rowDblClick(e);
        }
      }
    }
  }));
};
var getWidthStyle = function(width) {
  if ("auto" === width) {
    return "";
  }
  return isNumeric(width) ? "".concat(width, "px") : width;
};
var setCellWidth = function(cell, column, width) {
  cell.style.width = cell.style.maxWidth = "auto" === column.width ? "" : width;
};
var copyAttributes = function(element, newElement) {
  if (!element || !newElement) {
    return;
  }
  var oldAttributes = element.attributes;
  var newAttributes = newElement.attributes;
  var i;
  for (i = 0; i < oldAttributes.length; i++) {
    var name2 = oldAttributes[i].nodeName;
    if (!newElement.hasAttribute(name2)) {
      element.removeAttribute(name2);
    }
  }
  for (i = 0; i < newAttributes.length; i++) {
    element.setAttribute(newAttributes[i].nodeName, newAttributes[i].nodeValue);
  }
};
var removeHandler = function(templateDeferred) {
  templateDeferred.resolve();
};
var normalizeWidth = (width) => {
  if ("number" === typeof width) {
    return "".concat(width.toFixed(3), "px");
  }
  if ("adaptiveHidden" === width) {
    return HIDDEN_COLUMNS_WIDTH;
  }
  return width;
};
var ColumnsView = class extends ColumnStateMixin(m_modules_default.View) {
  init() {
    this._scrollLeft = -1;
    this._columnsController = this.getController("columns");
    this._dataController = this.getController("data");
    this._adaptiveColumnsController = this.getController("adaptiveColumns");
    this._columnChooserController = this.getController("columnChooser");
    this._editorFactoryController = this.getController("editorFactory");
    this._selectionController = this.getController("selection");
    this._columnChooserView = this.getView("columnChooserView");
    this._delayedTemplates = [];
    this._templateDeferreds = /* @__PURE__ */ new Set();
    this._templatesCache = {};
    this._templateTimeouts = /* @__PURE__ */ new Set();
    this.createAction("onCellClick");
    this.createAction("onRowClick");
    this.createAction("onCellDblClick");
    this.createAction("onRowDblClick");
    this.createAction("onCellHoverChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
    this.createAction("onCellPrepared", {
      excludeValidators: ["disabled", "readOnly"],
      category: "rendering"
    });
    this.createAction("onRowPrepared", {
      excludeValidators: ["disabled", "readOnly"],
      category: "rendering",
      afterExecute: (e) => {
        this._afterRowPrepared(e);
      }
    });
    this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this));
    this._dataController && this._dataController.changed.add(this._handleDataChanged.bind(this));
  }
  dispose() {
    var _a, _b;
    if (hasWindow()) {
      var window15 = getWindow();
      null === (_a = this._templateTimeouts) || void 0 === _a ? void 0 : _a.forEach((templateTimeout) => window15.clearTimeout(templateTimeout));
      null === (_b = this._templateTimeouts) || void 0 === _b ? void 0 : _b.clear();
    }
  }
  optionChanged(args) {
    super.optionChanged(args);
    switch (args.name) {
      case "cellHintEnabled":
      case "onCellPrepared":
      case "onRowPrepared":
      case "onCellHoverChanged":
        this._invalidate(true, true);
        args.handled = true;
        break;
      case "keyboardNavigation":
        if ("keyboardNavigation.enabled" === args.fullName) {
          this._invalidate(true, true);
        }
        args.handled = true;
    }
  }
  _createScrollableOptions() {
    var scrollingOptions = this.option("scrolling");
    var useNativeScrolling = this.option("scrolling.useNative");
    var options2 = extend({}, scrollingOptions, {
      direction: "both",
      bounceEnabled: false,
      useKeyboard: false
    });
    if (void 0 === useNativeScrolling) {
      useNativeScrolling = true;
    }
    if ("auto" === useNativeScrolling) {
      delete options2.useNative;
      delete options2.useSimulatedScrollbar;
    } else {
      options2.useNative = !!useNativeScrolling;
      options2.useSimulatedScrollbar = !useNativeScrolling;
    }
    return options2;
  }
  _updateCell($cell, parameters) {
    if (parameters.rowType) {
      this._cellPrepared($cell, parameters);
    }
  }
  _needToSetCellWidths() {
    return this.option("columnAutoWidth");
  }
  _createCell(options2) {
    var {
      column
    } = options2;
    var alignment = column.alignment || getDefaultAlignment(this.option("rtlEnabled"));
    var needToSetCellWidths = this._needToSetCellWidths();
    var cell = dom_adapter_default.createElement("td");
    cell.style.textAlign = alignment;
    var $cell = renderer_default(cell);
    if ("data" === options2.rowType && column.headerId && !column.type) {
      if (this.component.option("showColumnHeaders")) {
        this.setAria("describedby", column.headerId, $cell);
      }
    }
    if (column.cssClass) {
      $cell.addClass(column.cssClass);
    }
    if (Array.isArray(column.elementAttr)) {
      column.elementAttr.forEach((_ref) => {
        var {
          name: name2,
          value: value2
        } = _ref;
        $cell.attr(name2, value2);
      });
    }
    if ("expand" === column.command) {
      $cell.addClass(column.cssClass);
      $cell.addClass(this.addWidgetPrefix(GROUP_SPACE_CLASS));
    }
    if (column.colspan > 1) {
      $cell.attr("colSpan", column.colspan);
    } else if (!column.isBand && "auto" !== column.visibleWidth && needToSetCellWidths) {
      if (column.width || column.minWidth) {
        cell.style.minWidth = getWidthStyle(column.minWidth || column.width);
      }
      if (column.width) {
        setCellWidth(cell, column, getWidthStyle(column.width));
      }
    }
    return $cell;
  }
  _createRow(rowObject, tagName) {
    tagName = tagName || "tr";
    var $element = renderer_default("<".concat(tagName, ">")).addClass(ROW_CLASS);
    if ("tr" === tagName) {
      this.setAria("role", "row", $element);
    }
    return $element;
  }
  _isAltRow(row) {
    return row && row.dataIndex % 2 === 1;
  }
  _createTable(columns7, isAppend) {
    var $table = renderer_default("<table>").addClass(this.addWidgetPrefix(TABLE_CLASS)).addClass(this.addWidgetPrefix(TABLE_FIXED_CLASS));
    if (columns7 && !isAppend) {
      $table.attr("id", "dx-".concat(new guid_default())).append(this._createColGroup(columns7));
      if (browser_default.safari) {
        $table.append(renderer_default("<thead>").append("<tr>"));
      }
      this.setAria("role", "presentation", $table);
    } else {
      this.setAria("hidden", true, $table);
    }
    this.setAria("role", "presentation", renderer_default("<tbody>").appendTo($table));
    if (isAppend) {
      return $table;
    }
    if (browser_default.mozilla) {
      events_engine_default.on($table, "mousedown", "td", (e) => {
        if (e.ctrlKey) {
          e.preventDefault();
        }
      });
    }
    if (this.option("cellHintEnabled")) {
      events_engine_default.on($table, "mousemove", ".dx-row > td", this.createAction((args) => {
        var e = args.event;
        var $element = renderer_default(e.target);
        var $cell = renderer_default(e.currentTarget);
        var $row = $cell.parent();
        var visibleColumns = this._columnsController.getVisibleColumns();
        var rowOptions = $row.data("options");
        var columnIndex = $cell.index();
        var cellOptions = rowOptions && rowOptions.cells && rowOptions.cells[columnIndex];
        var column = cellOptions ? cellOptions.column : visibleColumns[columnIndex];
        var isHeaderRow = $row.hasClass("dx-header-row");
        var isDataRow2 = $row.hasClass("dx-data-row");
        var isMasterDetailRow = $row.hasClass(DETAIL_ROW_CLASS);
        var isGroupRow3 = $row.hasClass(GROUP_ROW_CLASS);
        var isFilterRow = $row.hasClass(this.addWidgetPrefix(FILTER_ROW_CLASS));
        var isDataRowWithTemplate = isDataRow2 && (!column || column.cellTemplate);
        var isEditorShown = isDataRow2 && cellOptions && (rowOptions.isEditing || cellOptions.isEditing || (null === column || void 0 === column ? void 0 : column.showEditorAlways));
        var isHeaderRowWithTemplate = isHeaderRow && (!column || column.headerCellTemplate);
        var isGroupCellWithTemplate = isGroupRow3 && (!column || column.groupIndex && column.groupCellTemplate);
        var shouldShowHint = !isMasterDetailRow && !isFilterRow && !isEditorShown && !isDataRowWithTemplate && !isHeaderRowWithTemplate && !isGroupCellWithTemplate;
        if (shouldShowHint) {
          if ($element.data(CELL_HINT_VISIBLE)) {
            $element.removeAttr("title");
            $element.data(CELL_HINT_VISIBLE, false);
          }
          var difference = $element[0].scrollWidth - $element[0].clientWidth;
          if (difference > 0 && !isDefined($element.attr("title"))) {
            $element.attr("title", $element.text());
            $element.data(CELL_HINT_VISIBLE, true);
          }
        }
      }));
    }
    var getOptions = (event) => {
      var $cell = renderer_default(event.currentTarget);
      var $fieldItemContent = renderer_default(event.target).closest(".".concat(FORM_FIELD_ITEM_CONTENT_CLASS));
      var $row = $cell.parent();
      var rowOptions = $row.data("options");
      var options2 = rowOptions && rowOptions.cells && rowOptions.cells[$cell.index()];
      if (!$cell.closest("table").is(event.delegateTarget)) {
        return;
      }
      var resultOptions = extend({}, options2, {
        cellElement: getPublicElement($cell),
        event,
        eventType: event.type
      });
      resultOptions.rowIndex = this.getRowIndex($row);
      if ($fieldItemContent.length) {
        var formItemOptions = $fieldItemContent.data("dx-form-item");
        if (formItemOptions.column) {
          resultOptions.column = formItemOptions.column;
          resultOptions.columnIndex = this._columnsController.getVisibleIndex(resultOptions.column.index);
        }
      }
      return resultOptions;
    };
    events_engine_default.on($table, "mouseover", ".dx-row > td", (e) => {
      var options2 = getOptions(e);
      options2 && this.executeAction("onCellHoverChanged", options2);
    });
    events_engine_default.on($table, "mouseout", ".dx-row > td", (e) => {
      var options2 = getOptions(e);
      options2 && this.executeAction("onCellHoverChanged", options2);
    });
    events_engine_default.on($table, CLICK_EVENT_NAME, ".dx-row > td", (e) => {
      var options2 = getOptions(e);
      options2 && this.executeAction("onCellClick", options2);
    });
    events_engine_default.on($table, DBLCLICK_EVENT_NAME, ".dx-row > td", (e) => {
      var options2 = getOptions(e);
      options2 && this.executeAction("onCellDblClick", options2);
    });
    subscribeToRowEvents(this, $table);
    return $table;
  }
  _rowPointerDown(e) {
  }
  _rowClick() {
  }
  _rowDblClick() {
  }
  _createColGroup(columns7) {
    var colgroupElement = renderer_default("<colgroup>");
    for (var i = 0; i < columns7.length; i++) {
      var colspan = columns7[i].colspan || 1;
      for (var j = 0; j < colspan; j++) {
        colgroupElement.append(this._createCol(columns7[i]));
      }
    }
    return colgroupElement;
  }
  _createCol(column) {
    var width = column.visibleWidth || column.width;
    if ("adaptiveHidden" === width) {
      width = HIDDEN_COLUMNS_WIDTH;
    }
    var col = renderer_default("<col>");
    setWidth(col, width);
    return col;
  }
  renderDelayedTemplates(change) {
    var delayedTemplates = this._delayedTemplates;
    var syncTemplates = delayedTemplates.filter((template) => !template.async);
    var asyncTemplates = delayedTemplates.filter((template) => template.async);
    this._delayedTemplates = [];
    this._renderDelayedTemplatesCore(syncTemplates, false, change);
    this._renderDelayedTemplatesCoreAsync(asyncTemplates);
  }
  _renderDelayedTemplatesCoreAsync(templates) {
    if (templates.length) {
      var templateTimeout = getWindow().setTimeout(() => {
        this._templateTimeouts.delete(templateTimeout);
        this._renderDelayedTemplatesCore(templates, true);
      });
      this._templateTimeouts.add(templateTimeout);
    }
  }
  _renderDelayedTemplatesCore(templates, isAsync, change) {
    var date = /* @__PURE__ */ new Date();
    while (templates.length) {
      var templateParameters = templates.shift();
      var {
        options: options2
      } = templateParameters;
      var doc = dom_adapter_default.getRootNode(renderer_default(options2.container).get(0));
      var needWaitAsyncTemplates = this.needWaitAsyncTemplates();
      if (!isAsync || renderer_default(options2.container).closest(doc).length || needWaitAsyncTemplates) {
        if (change) {
          options2.change = change;
        }
        templateParameters.template.render(options2);
      }
      if (isAsync && /* @__PURE__ */ new Date() - date > 30) {
        this._renderDelayedTemplatesCoreAsync(templates);
        break;
      }
    }
    if (!templates.length && this._delayedTemplates.length) {
      this.renderDelayedTemplates();
    }
  }
  _processTemplate(template, options2) {
    var renderingTemplate;
    if (template && template.render && !isRenderer(template)) {
      renderingTemplate = {
        allowRenderToDetachedContainer: template.allowRenderToDetachedContainer,
        render(options3) {
          template.render(options3.container, options3.model, options3.change);
          options3.deferred && options3.deferred.resolve();
        }
      };
    } else if (isFunction(template)) {
      renderingTemplate = {
        render(options3) {
          var renderedTemplate = template(getPublicElement(options3.container), options3.model, options3.change);
          if (renderedTemplate && (renderedTemplate.nodeType || isRenderer(renderedTemplate))) {
            options3.container.append(renderedTemplate);
          }
          options3.deferred && options3.deferred.resolve();
        }
      };
    } else {
      var templateID = isString(template) ? template : renderer_default(template).attr("id");
      if (!templateID) {
        renderingTemplate = this.getTemplate(template);
      } else {
        if (!this._templatesCache[templateID]) {
          this._templatesCache[templateID] = this.getTemplate(template);
        }
        renderingTemplate = this._templatesCache[templateID];
      }
    }
    return renderingTemplate;
  }
  renderTemplate(container, template, options2, allowRenderToDetachedContainer, change) {
    var _a;
    var renderingTemplate = this._processTemplate(template, options2);
    var {
      column
    } = options2;
    var isDataRow2 = "data" === options2.rowType;
    var templateDeferred = new Deferred();
    var templateOptions = {
      container,
      model: options2,
      deferred: templateDeferred,
      onRendered: () => {
        if (this.isDisposed()) {
          templateDeferred.reject();
        } else {
          templateDeferred.resolve();
        }
      }
    };
    if (renderingTemplate) {
      options2.component = this.component;
      var columnAsync = column && (column.renderAsync && isDataRow2 || this.option("renderAsync") && (false !== column.renderAsync && (column.command || column.showEditorAlways) && isDataRow2 || "filter" === options2.rowType));
      var async = null !== (_a = options2.renderAsync) && void 0 !== _a ? _a : columnAsync;
      if ((renderingTemplate.allowRenderToDetachedContainer || allowRenderToDetachedContainer) && !async) {
        renderingTemplate.render(templateOptions);
      } else {
        this._delayedTemplates.push({
          template: renderingTemplate,
          options: templateOptions,
          async
        });
      }
      this._templateDeferreds.add(templateDeferred);
      events_engine_default.on(container, removeEvent, removeHandler.bind(null, templateDeferred));
    } else {
      templateDeferred.reject();
    }
    return templateDeferred.promise().always(() => {
      this._templateDeferreds.delete(templateDeferred);
    });
  }
  _getBodies(tableElement) {
    return renderer_default(tableElement).children("tbody").not(".dx-header").not(".dx-footer");
  }
  _needWrapRow($tableElement) {
    var _a;
    var hasRowTemplate = !!this.option().rowTemplate;
    return hasRowTemplate && !!(null === (_a = this._getBodies($tableElement)) || void 0 === _a ? void 0 : _a.filter(".".concat(ROW_CLASS)).length);
  }
  _wrapRowIfNeed($table, $row, isRefreshing) {
    var $tableElement = isRefreshing ? $table || this._tableElement : this._tableElement || $table;
    var needWrapRow = this._needWrapRow($tableElement);
    if (needWrapRow) {
      var $tbody = renderer_default("<tbody>").addClass($row.attr("class"));
      this.setAria("role", "presentation", $tbody);
      return $tbody.append($row);
    }
    return $row;
  }
  _appendRow($table, $row, appendTemplate) {
    appendTemplate = appendTemplate || appendElementTemplate;
    appendTemplate.render({
      content: $row,
      container: $table
    });
  }
  _resizeCore() {
    var scrollLeft = this._scrollLeft;
    if (scrollLeft >= 0) {
      this._scrollLeft = 0;
      this.scrollTo({
        left: scrollLeft
      });
    }
  }
  _renderCore(e) {
    var $root = this.element().parent();
    if (!$root || $root.parent().length) {
      this.renderDelayedTemplates(e);
    }
  }
  _renderTable(options2) {
    options2 = options2 || {};
    options2.columns = this._columnsController.getVisibleColumns();
    var changeType = options2.change && options2.change.changeType;
    var $table = this._createTable(options2.columns, "append" === changeType || "prepend" === changeType || "update" === changeType);
    this._renderRows($table, options2);
    return $table;
  }
  _renderRows($table, options2) {
    var rows = this._getRows(options2.change);
    var columnIndices = options2.change && options2.change.columnIndices || [];
    var changeTypes = options2.change && options2.change.changeTypes || [];
    for (var i = 0; i < rows.length; i++) {
      this._renderRow($table, extend({
        row: rows[i],
        columnIndices: columnIndices[i],
        changeType: changeTypes[i]
      }, options2));
    }
  }
  _renderRow($table, options2) {
    if (!options2.columnIndices) {
      options2.row.cells = [];
    }
    var $row = this._createRow(options2.row);
    var $wrappedRow = this._wrapRowIfNeed($table, $row);
    if ("remove" !== options2.changeType) {
      this._renderCells($row, options2);
    }
    this._appendRow($table, $wrappedRow);
    var rowOptions = extend({
      columns: options2.columns
    }, options2.row);
    this._addWatchMethod(rowOptions, options2.row);
    this._rowPrepared($wrappedRow, rowOptions, options2.row);
  }
  _needRenderCell(columnIndex, columnIndices) {
    return !columnIndices || columnIndices.indexOf(columnIndex) >= 0;
  }
  _renderCells($row, options2) {
    var columnIndex = 0;
    var {
      row
    } = options2;
    var {
      columns: columns7
    } = options2;
    for (var i = 0; i < columns7.length; i++) {
      if (this._needRenderCell(i, options2.columnIndices)) {
        this._renderCell($row, extend({
          column: columns7[i],
          columnIndex,
          value: row.values && row.values[columnIndex],
          oldValue: row.oldValues && row.oldValues[columnIndex]
        }, options2));
      }
      if (columns7[i].colspan > 1) {
        columnIndex += columns7[i].colspan;
      } else {
        columnIndex++;
      }
    }
  }
  _updateCells($rowElement, $newRowElement, columnIndices) {
    var $cells = $rowElement.children();
    var $newCells = $newRowElement.children();
    var highlightChanges = this.option("highlightChanges");
    var cellUpdatedClass = this.addWidgetPrefix(CELL_UPDATED_ANIMATION_CLASS);
    columnIndices.forEach((columnIndex, index) => {
      var $cell = $cells.eq(columnIndex);
      var $newCell = $newCells.eq(index);
      $cell.replaceWith($newCell);
      if (highlightChanges && !$newCell.hasClass("dx-command-expand")) {
        $newCell.addClass(cellUpdatedClass);
      }
    });
    copyAttributes($rowElement.get(0), $newRowElement.get(0));
  }
  _setCellAriaAttributes($cell, cellOptions) {
    if ("freeSpace" !== cellOptions.rowType) {
      this.setAria("role", "gridcell", $cell);
      var columnIndexOffset = this._columnsController.getColumnIndexOffset();
      var ariaColIndex = cellOptions.columnIndex + columnIndexOffset + 1;
      this.setAria("colindex", ariaColIndex, $cell);
    }
  }
  _renderCell($row, options2) {
    var cellOptions = this._getCellOptions(options2);
    if (options2.columnIndices) {
      if (options2.row.cells) {
        var cellIndex = options2.row.cells.findIndex((cell) => cell.columnIndex === cellOptions.columnIndex);
        options2.row.cells[cellIndex] = cellOptions;
      }
    } else {
      options2.row.cells.push(cellOptions);
    }
    var $cell = this._createCell(cellOptions);
    this._setCellAriaAttributes($cell, cellOptions);
    this._renderCellContent($cell, cellOptions, options2);
    $row.get(0).appendChild($cell.get(0));
    return $cell;
  }
  _renderCellContent($cell, options2, renderOptions) {
    var template = this._getCellTemplate(options2);
    when(!template || this.renderTemplate($cell, template, options2, void 0, renderOptions.change)).done(() => {
      this._updateCell($cell, options2);
    });
  }
  _getCellTemplate(options2) {
  }
  _getRows(change) {
    return [];
  }
  _getCellOptions(options2) {
    var cellOptions = {
      column: options2.column,
      columnIndex: options2.columnIndex,
      rowType: options2.row.rowType,
      isAltRow: this._isAltRow(options2.row)
    };
    this._addWatchMethod(cellOptions);
    return cellOptions;
  }
  _addWatchMethod(options2, source) {
    if (!this.option("repaintChangesOnly")) {
      return;
    }
    var watchers = [];
    source = source || options2;
    source.watch = source.watch || function(getter, updateValueFunc, updateRowFunc) {
      var oldValue = getter(source.data);
      var watcher = function(row) {
        if (row && updateRowFunc) {
          updateRowFunc(row);
        }
        var newValue = getter(source.data);
        if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {
          if (row) {
            updateValueFunc(newValue);
          }
          oldValue = newValue;
        }
      };
      watchers.push(watcher);
      return function() {
        var index = watchers.indexOf(watcher);
        if (index >= 0) {
          watchers.splice(index, 1);
        }
      };
    };
    source.update = source.update || function(row, keepRow) {
      if (row) {
        this.data = options2.data = row.data;
        this.rowIndex = options2.rowIndex = row.rowIndex;
        this.dataIndex = options2.dataIndex = row.dataIndex;
        this.isExpanded = options2.isExpanded = row.isExpanded;
        if (options2.row && !keepRow) {
          options2.row = row;
        }
      }
      watchers.forEach((watcher) => {
        watcher(row);
      });
    };
    if (source !== options2) {
      options2.watch = source.watch.bind(source);
    }
    return options2;
  }
  _cellPrepared(cell, options2) {
    options2.cellElement = getPublicElement(renderer_default(cell));
    this.executeAction("onCellPrepared", options2);
  }
  _rowPrepared($row, options2, row) {
    data($row.get(0), "options", options2);
    options2.rowElement = getPublicElement($row);
    this.executeAction("onRowPrepared", options2);
  }
  _columnOptionChanged(e) {
    var {
      optionNames
    } = e;
    if (m_utils_default.checkChanges(optionNames, ["width", "visibleWidth"])) {
      var visibleColumns = this._columnsController.getVisibleColumns();
      var widths = visibleColumns.map((column) => column.visibleWidth || column.width);
      this.setColumnWidths({
        widths,
        optionNames
      });
      return;
    }
    if (!this._requireReady) {
      this.render();
    }
  }
  getCellIndex($cell, rowIndex) {
    var cellIndex = $cell.length ? $cell[0].cellIndex : -1;
    return cellIndex;
  }
  getTableElements() {
    return this._tableElement || renderer_default();
  }
  getTableElement(isFixedTableRendering) {
    return this._tableElement;
  }
  setTableElement(tableElement, isFixedTableRendering) {
    this._tableElement = tableElement;
  }
  _afterRowPrepared(e) {
  }
  _handleDataChanged(e) {
  }
  callbackNames() {
    return ["scrollChanged"];
  }
  _updateScrollLeftPosition() {
    var scrollLeft = this._scrollLeft;
    if (scrollLeft >= 0) {
      this._scrollLeft = 0;
      this.scrollTo({
        left: scrollLeft
      });
    }
  }
  scrollTo(pos) {
    var $element = this.element();
    var $scrollContainer = $element && $element.children(".".concat(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS))).not(".".concat(this.addWidgetPrefix(CONTENT_FIXED_CLASS)));
    if (isDefined(pos) && isDefined(pos.left) && this._scrollLeft !== pos.left) {
      this._scrollLeft = pos.left;
      $scrollContainer && $scrollContainer.scrollLeft(pos.left);
    }
  }
  _getContent(isFixedTableRendering) {
    var _a;
    return null === (_a = this._tableElement) || void 0 === _a ? void 0 : _a.parent();
  }
  _removeContent(isFixedTableRendering) {
    var $scrollContainer = this._getContent(isFixedTableRendering);
    if (null === $scrollContainer || void 0 === $scrollContainer ? void 0 : $scrollContainer.length) {
      $scrollContainer.remove();
    }
  }
  _wrapTableInScrollContainer($table, isFixedTableRendering) {
    var $scrollContainer = renderer_default("<div>");
    var useNative = this.option("scrolling.useNative");
    if (false === useNative || "auto" === useNative && !nativeScrolling) {
      $scrollContainer.addClass(this.addWidgetPrefix(SCROLLABLE_SIMULATED_CLASS));
    }
    events_engine_default.on($scrollContainer, "scroll", () => {
      var scrollLeft = $scrollContainer.scrollLeft();
      if (scrollLeft !== this._scrollLeft) {
        this.scrollChanged.fire({
          left: scrollLeft
        }, this.name);
      }
    });
    $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_CLASS)).addClass(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).append($table).appendTo(this.element());
    this.setAria("role", "presentation", $scrollContainer);
    return $scrollContainer;
  }
  needWaitAsyncTemplates() {
    return this.option("templatesRenderAsynchronously") && false === this.option("renderAsync");
  }
  waitAsyncTemplates() {
    var forceWaiting = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : false;
    var result2 = new Deferred();
    var needWaitAsyncTemplates = forceWaiting || this.needWaitAsyncTemplates();
    if (!needWaitAsyncTemplates) {
      return result2.resolve();
    }
    var waitTemplatesRecursion = () => when.apply(this, Array.from(this._templateDeferreds)).done(() => {
      if (this.isDisposed()) {
        result2.reject();
      } else if (this._templateDeferreds.size > 0) {
        waitTemplatesRecursion();
      } else {
        result2.resolve();
      }
    }).fail(result2.reject);
    waitTemplatesRecursion();
    return result2.promise();
  }
  _updateContent($newTableElement, change, isFixedTableRendering) {
    return this.waitAsyncTemplates().done(() => {
      this._removeContent(isFixedTableRendering);
      this.setTableElement($newTableElement, isFixedTableRendering);
      this._wrapTableInScrollContainer($newTableElement, isFixedTableRendering);
    });
  }
  _findContentElement(isFixedTableRendering) {
  }
  _getWidths($cellElements) {
    if (!$cellElements) {
      return [];
    }
    var result2 = [];
    var cellElements = $cellElements.toArray();
    cellElements.forEach((cell) => {
      var width = cell.offsetWidth;
      if (cell.getBoundingClientRect) {
        var rect = getBoundingRect(cell);
        if (rect.width > cell.offsetWidth - 1) {
          width = rect.width;
        }
      }
      result2.push(width);
    });
    return result2;
  }
  getColumnWidths($tableElement) {
    (this.option("forceApplyBindings") || noop)();
    $tableElement = null !== $tableElement && void 0 !== $tableElement ? $tableElement : this.getTableElement();
    if ($tableElement) {
      var $rows = $tableElement.children("tbody:not(.dx-header)").children();
      for (var i = 0; i < $rows.length; i++) {
        var $row = $rows.eq(i);
        var isGroupRow3 = $row.hasClass(GROUP_ROW_CLASS);
        var isDetailRow2 = $row.hasClass(DETAIL_ROW_CLASS);
        var isErrorRow = $row.hasClass(ERROR_ROW_CLASS);
        var isRowVisible = "none" !== $row.get(0).style.display && !$row.hasClass("dx-state-invisible");
        var isRelevantRow = !isGroupRow3 && !isDetailRow2 && !isErrorRow;
        if (isRowVisible && isRelevantRow) {
          var $cells = $row.children("td");
          var result2 = this._getWidths($cells);
          return result2;
        }
      }
    }
    return [];
  }
  getVisibleColumnIndex(columnIndex, rowIndex) {
    return columnIndex;
  }
  setColumnWidths(_ref2) {
    var {
      widths,
      optionNames
    } = _ref2;
    var $tableElement = this.getTableElement();
    if (!(null === $tableElement || void 0 === $tableElement ? void 0 : $tableElement.length) || !widths) {
      return;
    }
    var columns7 = this.getColumns();
    var needToSetCellWidths = this._needToSetCellWidths();
    var $cols = $tableElement.children("colgroup").children("col");
    $cols.toArray().forEach((col) => col.removeAttribute("style"));
    columns7.forEach((column, columnIndex) => {
      if (needToSetCellWidths && column.width && !column.command) {
        var width = getWidthStyle(column.visibleWidth || column.width);
        var minWidth = getWidthStyle(column.minWidth || width);
        var $rows = $tableElement.children().children(".dx-row").not(".".concat(DETAIL_ROW_CLASS));
        for (var rowIndex = 0; rowIndex < $rows.length; rowIndex++) {
          var visibleIndex = this.getVisibleColumnIndex(columnIndex, rowIndex);
          if (visibleIndex >= 0) {
            var $row = $rows.eq(rowIndex);
            var $cell = $row.hasClass(GROUP_ROW_CLASS) ? $row.find("td[aria-colindex='".concat(visibleIndex + 1, "']:not(.").concat(GROUP_CELL_CLASS, ")")) : $row.find("td").eq(visibleIndex);
            if ($cell.length) {
              var cell = $cell.get(0);
              setCellWidth(cell, column, width);
              cell.style.minWidth = minWidth;
            }
          }
        }
      }
      var colWidth = normalizeWidth(widths[columnIndex]);
      if (isDefined(colWidth)) {
        setWidth($cols.eq(columnIndex), colWidth);
      }
    });
  }
  getCellElements(rowIndex) {
    return this._getCellElementsCore(rowIndex);
  }
  _getCellElementsCore(rowIndex) {
    if (rowIndex < 0) {
      return;
    }
    var $row = this._getRowElements().eq(rowIndex);
    return $row.children();
  }
  _getCellElement(rowIndex, columnIdentifier) {
    var $cells = this.getCellElements(rowIndex);
    var columnVisibleIndex = this._getVisibleColumnIndex($cells, rowIndex, columnIdentifier);
    if (!(null === $cells || void 0 === $cells ? void 0 : $cells.length) || columnVisibleIndex < 0) {
      return;
    }
    var $cell = $cells.eq(columnVisibleIndex);
    return $cell.length > 0 ? $cell : void 0;
  }
  _getRowElement(rowIndex) {
    var that = this;
    var $rowElement = renderer_default();
    var $tableElements = that.getTableElements();
    each($tableElements, (_, tableElement) => {
      $rowElement = $rowElement.add(that._getRowElements(renderer_default(tableElement)).eq(rowIndex));
    });
    if ($rowElement.length) {
      return $rowElement;
    }
    return;
  }
  getCellElement(rowIndex, columnIdentifier) {
    var $cell = this._getCellElement(rowIndex, columnIdentifier);
    if ($cell) {
      return getPublicElement($cell);
    }
    return;
  }
  getRowElement(rowIndex) {
    var $rows = this._getRowElement(rowIndex);
    var elements = [];
    if ($rows && !getPublicElement($rows).get) {
      for (var i = 0; i < $rows.length; i++) {
        elements.push($rows[i]);
      }
    } else {
      elements = $rows;
    }
    return elements;
  }
  _getVisibleColumnIndex($cells, rowIndex, columnIdentifier) {
    if (isString(columnIdentifier)) {
      var columnIndex = this._columnsController.columnOption(columnIdentifier, "index");
      return this._columnsController.getVisibleIndex(columnIndex);
    }
    return columnIdentifier;
  }
  getColumnElements() {
  }
  getColumns(rowIndex, $tableElement) {
    return this._columnsController.getVisibleColumns(rowIndex);
  }
  getCell(cellPosition, rows, cells) {
    var $rows = rows || this._getRowElements();
    var $cells;
    if ($rows.length > 0 && cellPosition.rowIndex >= 0) {
      if ("virtual" !== this.option("scrolling.mode") && "virtual" !== this.option("scrolling.rowRenderingMode")) {
        cellPosition.rowIndex = cellPosition.rowIndex < $rows.length ? cellPosition.rowIndex : $rows.length - 1;
      }
      $cells = cells || this.getCellElements(cellPosition.rowIndex);
      if ((null === $cells || void 0 === $cells ? void 0 : $cells.length) > 0) {
        return $cells.eq($cells.length > cellPosition.columnIndex ? cellPosition.columnIndex : $cells.length - 1);
      }
    }
  }
  getRowsCount() {
    var tableElement = this.getTableElement();
    if (tableElement && 1 === tableElement.length) {
      return tableElement[0].rows.length;
    }
    return 0;
  }
  _getRowElementsCore(tableElement) {
    tableElement = tableElement || this.getTableElement();
    if (tableElement) {
      var hasRowTemplate = this.option().rowTemplate || this.option("dataRowTemplate");
      var tBodies = hasRowTemplate && tableElement.find("> tbody.".concat(ROW_CLASS));
      return tBodies && tBodies.length ? tBodies : tableElement.find("> tbody > " + ".".concat(ROW_CLASS, ", > .").concat(ROW_CLASS));
    }
    return renderer_default();
  }
  _getRowElements(tableElement) {
    return this._getRowElementsCore(tableElement);
  }
  getRowIndex($row) {
    return this._getRowElements().index($row);
  }
  getBoundingRect() {
  }
  getName() {
  }
  setScrollerSpacing(width) {
    var $element = this.element();
    var rtlEnabled = this.option("rtlEnabled");
    $element && $element.css({
      paddingLeft: rtlEnabled ? width : "",
      paddingRight: !rtlEnabled ? width : ""
    });
  }
  isScrollbarVisible(isHorizontal) {
    var $element = this.element();
    var $tableElement = this._tableElement;
    if ($element && $tableElement) {
      return isHorizontal ? getOuterWidth($tableElement) - getWidth($element) > 0 : getOuterHeight($tableElement) - getHeight($element) > 0;
    }
    return false;
  }
  isDisposed() {
    var _a;
    return null === (_a = this.component) || void 0 === _a ? void 0 : _a._disposed;
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/column_headers/m_column_headers.js
var CELL_CONTENT_CLASS = "text-content";
var HEADERS_CLASS = "headers";
var NOWRAP_CLASS = "nowrap";
var ROW_CLASS_SELECTOR = ".dx-row";
var HEADER_ROW_CLASS = "dx-header-row";
var COLUMN_LINES_CLASS = "dx-column-lines";
var CONTEXT_MENU_SORT_ASC_ICON = "context-menu-sort-asc";
var CONTEXT_MENU_SORT_DESC_ICON = "context-menu-sort-desc";
var CONTEXT_MENU_SORT_NONE_ICON = "context-menu-sort-none";
var CELL_FOCUS_DISABLED_CLASS = "dx-cell-focus-disabled";
var VISIBILITY_HIDDEN_CLASS = "dx-visibility-hidden";
var TEXT_CONTENT_ALIGNMENT_CLASS_PREFIX = "dx-text-content-alignment-";
var SORT_INDICATOR_CLASS = "dx-sort-indicator";
var SORT_INDEX_INDICATOR_CLASS = "dx-sort-index-indicator";
var HEADER_FILTER_CLASS_SELECTOR = ".dx-header-filter";
var HEADER_FILTER_INDICATOR_CLASS = "dx-header-filter-indicator";
var MULTI_ROW_HEADER_CLASS = "dx-header-multi-row";
var LINK = "dx-link";
var createCellContent = function(that, $cell, options2) {
  var $cellContent = renderer_default("<div>").addClass(that.addWidgetPrefix(CELL_CONTENT_CLASS));
  that.setAria("role", "presentation", $cellContent);
  addCssClassesToCellContent(that, $cell, options2.column, $cellContent);
  var showColumnLines = that.option("showColumnLines");
  var contentAlignment = that.getController("columns").getHeaderContentAlignment(options2.column.alignment);
  return $cellContent[showColumnLines || "right" === contentAlignment ? "appendTo" : "prependTo"]($cell);
};
function addCssClassesToCellContent(that, $cell, column, $cellContent) {
  var $indicatorElements = that._getIndicatorElements($cell, true);
  var $visibleIndicatorElements = that._getIndicatorElements($cell);
  var indicatorCount = $indicatorElements && $indicatorElements.length;
  var columnAlignment = that._getColumnAlignment(column.alignment);
  var sortIndicatorClassName = ".".concat(that._getIndicatorClassName("sort"));
  var sortIndexIndicatorClassName = ".".concat(that._getIndicatorClassName("sortIndex"));
  var $sortIndicator = $visibleIndicatorElements.filter(sortIndicatorClassName);
  var $sortIndexIndicator = $visibleIndicatorElements.children().filter(sortIndexIndicatorClassName);
  $cellContent = $cellContent || $cell.children(".".concat(that.addWidgetPrefix(CELL_CONTENT_CLASS)));
  $cellContent.toggleClass(TEXT_CONTENT_ALIGNMENT_CLASS_PREFIX + columnAlignment, indicatorCount > 0).toggleClass(TEXT_CONTENT_ALIGNMENT_CLASS_PREFIX + ("left" === columnAlignment ? "right" : "left"), indicatorCount > 0 && "center" === column.alignment).toggleClass(SORT_INDICATOR_CLASS, !!$sortIndicator.length).toggleClass(SORT_INDEX_INDICATOR_CLASS, !!$sortIndexIndicator.length).toggleClass(HEADER_FILTER_INDICATOR_CLASS, !!$visibleIndicatorElements.filter(".".concat(that._getIndicatorClassName("headerFilter"))).length);
}
var ColumnHeadersView = class extends ColumnsView {
  init() {
    super.init();
    this._headerPanelView = this.getView("headerPanel");
    this._headerFilterController = this.getController("headerFilter");
    this._dataController = this.getController("data");
  }
  _createTable() {
    var $table = super._createTable.apply(this, arguments);
    events_engine_default.on($table, "mousedown selectstart", this.createAction((e) => {
      var {
        event
      } = e;
      if (event.shiftKey) {
        event.preventDefault();
      }
    }));
    return $table;
  }
  _isLegacyKeyboardNavigation() {
    return this.option("useLegacyKeyboardNavigation");
  }
  _getDefaultTemplate(column) {
    var that = this;
    return function($container, options2) {
      var {
        caption
      } = column;
      var needCellContent = !column.command || caption && "expand" !== column.command;
      if ("empty" === column.command) {
        that._renderEmptyMessage($container, options2);
      } else if (needCellContent) {
        var $content = createCellContent(that, $container, options2);
        $content.text(caption);
      } else if (column.command) {
        $container.html("&nbsp;");
      }
    };
  }
  _renderEmptyMessage($container, options2) {
    var textEmpty = this._getEmptyHeaderText();
    if (!textEmpty) {
      $container.html("&nbsp;");
      return;
    }
    var $cellContent = createCellContent(this, $container, options2);
    var needSplit = textEmpty.includes("{0}");
    if (needSplit) {
      var [leftPart, rightPart] = textEmpty.split("{0}");
      var columnChooserTitle = message_default.format("dxDataGrid-emptyHeaderColumnChooserText");
      var columnChooserView = this._columnChooserView;
      var $link = renderer_default("<a>").text(columnChooserTitle).addClass(LINK);
      events_engine_default.on($link, "click", this.createAction(() => columnChooserView.showColumnChooser()));
      $cellContent.append(dom_adapter_default.createTextNode(leftPart)).append($link).append(dom_adapter_default.createTextNode(rightPart));
    } else {
      $cellContent.text(textEmpty);
    }
  }
  _getEmptyHeaderText() {
    var hasHiddenColumns = !!this._columnChooserView.hasHiddenColumns();
    var hasGroupedColumns = !!this._headerPanelView.hasGroupedColumns();
    switch (true) {
      case (hasHiddenColumns && hasGroupedColumns):
        return message_default.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");
      case hasGroupedColumns:
        return message_default.format("dxDataGrid-emptyHeaderWithGroupPanelText");
      case hasHiddenColumns:
        return message_default.format("dxDataGrid-emptyHeaderWithColumnChooserText");
      default:
        return "";
    }
  }
  _getHeaderTemplate(column) {
    return column.headerCellTemplate || {
      allowRenderToDetachedContainer: true,
      render: this._getDefaultTemplate(column)
    };
  }
  _processTemplate(template, options2) {
    var that = this;
    var resultTemplate;
    var {
      column
    } = options2;
    var renderingTemplate = super._processTemplate(template);
    if ("header" === options2.rowType && renderingTemplate && column.headerCellTemplate && !column.command) {
      resultTemplate = {
        render(options3) {
          var $content = createCellContent(that, options3.container, options3.model);
          renderingTemplate.render(extend({}, options3, {
            container: $content
          }));
        }
      };
    } else {
      resultTemplate = renderingTemplate;
    }
    return resultTemplate;
  }
  _handleDataChanged(e) {
    if ("refresh" !== e.changeType) {
      return;
    }
    if (this._isGroupingChanged || this._requireReady) {
      this._isGroupingChanged = false;
      this.render();
    }
  }
  _renderCell($row, options2) {
    var $cell = super._renderCell($row, options2);
    if ("header" === options2.row.rowType) {
      $cell.addClass(CELL_FOCUS_DISABLED_CLASS);
      if (!this._isLegacyKeyboardNavigation()) {
        if (options2.column && !options2.column.type) {
          $cell.attr("tabindex", this.option("tabindex") || 0);
        }
      }
    }
    return $cell;
  }
  _setCellAriaAttributes($cell, cellOptions) {
    super._setCellAriaAttributes($cell, cellOptions);
    if ("header" === cellOptions.rowType) {
      if (!cellOptions.column.type) {
        this.setAria("role", "columnheader", $cell);
      }
      if (cellOptions.column && !cellOptions.column.command && !cellOptions.column.isBand) {
        $cell.attr("id", cellOptions.column.headerId);
        this.setAria("label", "".concat(message_default.format("dxDataGrid-ariaColumn"), " ").concat(cellOptions.column.caption), $cell);
      }
    }
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    $row.toggleClass(COLUMN_LINES_CLASS, this.option("showColumnLines"));
    if ("header" === row.rowType) {
      $row.addClass(HEADER_ROW_CLASS);
      if (!this._isLegacyKeyboardNavigation()) {
        registerKeyboardAction2("columnHeaders", this, $row, "td", this._handleActionKeyDown.bind(this));
      }
    }
    return $row;
  }
  _processHeaderAction(event, $row) {
  }
  _handleActionKeyDown(args) {
    var {
      event
    } = args;
    var $target = renderer_default(event.target);
    this._lastActionElement = event.target;
    if ($target.is(HEADER_FILTER_CLASS_SELECTOR)) {
      var headerFilterController = this._headerFilterController;
      var $column = $target.closest("td");
      var columnIndex = this.getColumnIndexByElement($column);
      if (columnIndex >= 0) {
        headerFilterController.showHeaderFilterMenu(columnIndex, false);
      }
    } else {
      var $row = $target.closest(ROW_CLASS_SELECTOR);
      this._processHeaderAction(event, $row);
    }
    event.preventDefault();
  }
  _renderCore() {
    var $container = this.element();
    var change = {};
    if (this._tableElement && !this._dataController.isLoaded() && !this._hasRowElements) {
      return;
    }
    $container.addClass(this.addWidgetPrefix(HEADERS_CLASS)).toggleClass(this.addWidgetPrefix(NOWRAP_CLASS), !this.option("wordWrapEnabled")).empty();
    this.setAria("role", "presentation", $container);
    var deferred = this._updateContent(this._renderTable({
      change
    }), change);
    if (this.getRowCount() > 1) {
      $container.addClass(MULTI_ROW_HEADER_CLASS);
    }
    super._renderCore.apply(this, arguments);
    return deferred;
  }
  _renderRows() {
    if (this._dataController.isLoaded() || this._hasRowElements) {
      super._renderRows.apply(this, arguments);
      this._hasRowElements = true;
    }
  }
  _renderRow($table, options2) {
    var rowIndex = 1 === this.getRowCount() ? null : options2.row.rowIndex;
    options2.columns = this.getColumns(rowIndex);
    super._renderRow($table, options2);
  }
  _createCell(options2) {
    var {
      column
    } = options2;
    var $cellElement = super._createCell.apply(this, arguments);
    column.rowspan > 1 && "header" === options2.rowType && $cellElement.attr("rowSpan", column.rowspan);
    return $cellElement;
  }
  _getRows() {
    var result2 = [];
    var rowCount = this.getRowCount();
    if (this.option("showColumnHeaders")) {
      for (var i = 0; i < rowCount; i++) {
        result2.push({
          rowType: "header",
          rowIndex: i
        });
      }
    }
    return result2;
  }
  _getCellTemplate(options2) {
    if ("header" === options2.rowType) {
      return this._getHeaderTemplate(options2.column);
    }
  }
  _columnOptionChanged(e) {
    var {
      changeTypes
    } = e;
    var {
      optionNames
    } = e;
    if (changeTypes.grouping || changeTypes.groupExpanding) {
      if (changeTypes.grouping) {
        this._isGroupingChanged = true;
      }
      return;
    }
    super._columnOptionChanged(e);
    if (optionNames.width || optionNames.visible) {
      this.resizeCompleted.fire();
    }
  }
  _isElementVisible(elementOptions) {
    return elementOptions && elementOptions.visible;
  }
  _alignCaptionByCenter($cell) {
    var $indicatorsContainer = this._getIndicatorContainer($cell, true);
    if ($indicatorsContainer && $indicatorsContainer.length) {
      $indicatorsContainer.filter(".".concat(VISIBILITY_HIDDEN_CLASS)).remove();
      $indicatorsContainer = this._getIndicatorContainer($cell);
      $indicatorsContainer.clone().addClass(VISIBILITY_HIDDEN_CLASS).css("float", "").insertBefore($cell.children(".".concat(this.addWidgetPrefix(CELL_CONTENT_CLASS))));
    }
  }
  _updateCell($cell, options2) {
    if ("header" === options2.rowType && "center" === options2.column.alignment) {
      this._alignCaptionByCenter($cell);
    }
    super._updateCell.apply(this, arguments);
  }
  _updateIndicator($cell, column, indicatorName) {
    var $indicatorElement = super._updateIndicator.apply(this, arguments);
    if ("center" === column.alignment) {
      this._alignCaptionByCenter($cell);
    }
    addCssClassesToCellContent(this, $cell, column);
    return $indicatorElement;
  }
  _getIndicatorContainer($cell, returnAll) {
    var $indicatorsContainer = super._getIndicatorContainer($cell);
    return returnAll ? $indicatorsContainer : $indicatorsContainer.filter(":not(.".concat(VISIBILITY_HIDDEN_CLASS, ")"));
  }
  _isSortableElement($target) {
    return true;
  }
  getHeadersRowHeight() {
    var $tableElement = this.getTableElement();
    var $headerRows = $tableElement && $tableElement.find(".".concat(HEADER_ROW_CLASS));
    return $headerRows && $headerRows.toArray().reduce((sum, headerRow) => sum + getHeight(headerRow), 0) || 0;
  }
  getHeaderElement(index) {
    var columnElements = this.getColumnElements();
    return columnElements && columnElements.eq(index);
  }
  getColumnElements(index, bandColumnIndex) {
    var that = this;
    var $cellElement;
    var columnsController = that._columnsController;
    var rowCount = that.getRowCount();
    if (that.option("showColumnHeaders")) {
      if (rowCount > 1 && (!isDefined(index) || isDefined(bandColumnIndex))) {
        var result2 = [];
        var visibleColumns = isDefined(bandColumnIndex) ? columnsController.getChildrenByBandColumn(bandColumnIndex, true) : columnsController.getVisibleColumns();
        each(visibleColumns, (_, column) => {
          var rowIndex = isDefined(index) ? index : columnsController.getRowIndex(column.index);
          $cellElement = that._getCellElement(rowIndex, columnsController.getVisibleIndex(column.index, rowIndex));
          $cellElement && result2.push($cellElement.get(0));
        });
        return renderer_default(result2);
      }
      if (!index || index < rowCount) {
        return that.getCellElements(index || 0);
      }
    }
    return;
  }
  getColumnIndexByElement($cell) {
    var cellIndex = this.getCellIndex($cell);
    var $row = $cell.closest(".dx-row");
    var {
      rowIndex
    } = $row[0];
    var column = this.getColumns(rowIndex)[cellIndex];
    return column ? column.index : -1;
  }
  getVisibleColumnIndex(columnIndex, rowIndex) {
    var column = this.getColumns()[columnIndex];
    return column ? this._columnsController.getVisibleIndex(column.index, rowIndex) : -1;
  }
  getColumnWidths() {
    var $columnElements = this.getColumnElements();
    if ($columnElements && $columnElements.length) {
      return this._getWidths($columnElements);
    }
    return super.getColumnWidths.apply(this, arguments);
  }
  allowDragging(column) {
    var _a;
    var rowIndex = column && this._columnsController.getRowIndex(column.index);
    var columns7 = this.getColumns(rowIndex);
    var isReorderingEnabled = null !== (_a = this.option("allowColumnReordering")) && void 0 !== _a ? _a : this._columnsController.isColumnOptionUsed("allowReordering");
    return isReorderingEnabled && column.allowReordering && columns7.length > 1;
  }
  getBoundingRect() {
    var $columnElements = this.getColumnElements();
    if ($columnElements && $columnElements.length) {
      var offset = this.getTableElement().offset();
      return {
        top: offset.top
      };
    }
    return null;
  }
  getName() {
    return "headers";
  }
  getColumnCount() {
    var $columnElements = this.getColumnElements();
    return $columnElements ? $columnElements.length : 0;
  }
  isVisible() {
    return this.option("showColumnHeaders");
  }
  optionChanged(args) {
    switch (args.name) {
      case "showColumnHeaders":
      case "wordWrapEnabled":
      case "showColumnLines":
        this._invalidate(true, true);
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  getHeight() {
    return this.getElementHeight();
  }
  getContextMenuItems(options2) {
    var that = this;
    var {
      column
    } = options2;
    if (options2.row && ("header" === options2.row.rowType || "detailAdaptive" === options2.row.rowType)) {
      var sortingOptions = that.option("sorting");
      if (sortingOptions && "none" !== sortingOptions.mode && column && column.allowSorting) {
        var onItemClick = function(params) {
          setTimeout(() => {
            that._columnsController.changeSortOrder(column.index, params.itemData.value);
          });
        };
        return [{
          text: sortingOptions.ascendingText,
          value: "asc",
          disabled: "asc" === column.sortOrder,
          icon: CONTEXT_MENU_SORT_ASC_ICON,
          onItemClick
        }, {
          text: sortingOptions.descendingText,
          value: "desc",
          disabled: "desc" === column.sortOrder,
          icon: CONTEXT_MENU_SORT_DESC_ICON,
          onItemClick
        }, {
          text: sortingOptions.clearText,
          value: "none",
          disabled: !column.sortOrder,
          icon: CONTEXT_MENU_SORT_NONE_ICON,
          onItemClick
        }];
      }
    }
    return;
  }
  getRowCount() {
    return this._columnsController && this._columnsController.getRowCount();
  }
  setRowsOpacity(columnIndex, value2, rowIndex) {
    var i;
    var columnElements;
    var rowCount = this.getRowCount();
    var columns7 = this._columnsController.getColumns();
    var column = columns7 && columns7[columnIndex];
    var columnID = column && column.isBand && column.index;
    var setColumnOpacity = (column2, index) => {
      if (column2.ownerBand === columnID) {
        columnElements.eq(index).css({
          opacity: value2
        });
        if (column2.isBand) {
          this.setRowsOpacity(column2.index, value2, i + 1);
        }
      }
    };
    if (isDefined(columnID)) {
      rowIndex = rowIndex || 0;
      for (i = rowIndex; i < rowCount; i++) {
        columnElements = this.getCellElements(i);
        if (columnElements) {
          var rowColumns = this.getColumns(i);
          rowColumns.forEach(setColumnOpacity);
        }
      }
    }
  }
};
var columnHeadersModule = {
  defaultOptions: () => ({
    showColumnHeaders: true,
    cellHintEnabled: true
  }),
  views: {
    columnHeadersView: ColumnHeadersView
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/m_core.js
var m_core_default = _extends(_extends(_extends({}, m_modules_default), m_utils_default), {
  modules: []
});

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/column_headers.js
var ColumnHeadersView2 = columnHeadersModule.views.columnHeadersView;
m_core_default.registerModule("columnHeaders", columnHeadersModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/columns_controller/const.js
var USER_STATE_FIELD_NAMES_15_1 = ["filterValues", "filterType", "fixed", "fixedPosition"];
var USER_STATE_FIELD_NAMES = ["visibleIndex", "dataField", "name", "dataType", "width", "visible", "sortOrder", "lastSortOrder", "sortIndex", "groupIndex", "filterValue", "bufferedFilterValue", "selectedFilterOperation", "bufferedSelectedFilterOperation", "added"].concat(USER_STATE_FIELD_NAMES_15_1);
var IGNORE_COLUMN_OPTION_NAMES = {
  visibleWidth: true,
  bestFitWidth: true,
  bufferedFilterValue: true
};
var COMMAND_EXPAND_CLASS = "dx-command-expand";
var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;
var GROUP_COMMAND_COLUMN_NAME = "groupExpand";
var DETAIL_COMMAND_COLUMN_NAME = "detailExpand";
var COLUMN_OPTION_REGEXP = /columns\[(\d+)\]\.?/gi;
var DEFAULT_COLUMN_OPTIONS = {
  visible: true,
  showInColumnChooser: true
};
var DATATYPE_OPERATIONS = {
  number: ["=", "<>", "<", ">", "<=", ">=", "between"],
  string: ["contains", "notcontains", "startswith", "endswith", "=", "<>"],
  date: ["=", "<>", "<", ">", "<=", ">=", "between"],
  datetime: ["=", "<>", "<", ">", "<=", ">=", "between"]
};
var COLUMN_INDEX_OPTIONS = {
  visibleIndex: true,
  groupIndex: true,
  grouped: true,
  sortIndex: true,
  sortOrder: true
};
var GROUP_LOCATION = "group";
var COLUMN_CHOOSER_LOCATION = "columnChooser";

// node_modules/devextreme/esm/core/utils/date_serialization.js
var NUMBER_SERIALIZATION_FORMAT = "number";
var DATE_SERIALIZATION_FORMAT = "yyyy/MM/dd";
var DATETIME_SERIALIZATION_FORMAT = "yyyy/MM/dd HH:mm:ss";
var ISO8601_PATTERN = /^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/;
var ISO8601_TIME_PATTERN = /^(\d{2}):(\d{2})(:(\d{2}))?$/;
var ISO8601_PATTERN_PARTS = ["", "yyyy", "", "MM", "", "dd", "THH", "", "mm", "", "ss", ".SSS"];
var DATE_SERIALIZATION_PATTERN = /^(\d{4})\/(\d{2})\/(\d{2})$/;
var MILLISECOND_LENGHT = 3;
var dateParser = function(text, skipISO8601Parsing) {
  var result2;
  if (isString(text) && !skipISO8601Parsing) {
    result2 = parseISO8601String(text);
  }
  return result2 || parseDate(text);
};
function getTimePart(part) {
  return +part || 0;
}
function parseDate(text) {
  var isDefaultSerializationFormat = getDateSerializationFormat(text) === DATE_SERIALIZATION_FORMAT;
  var parsedValue = !isDate(text) && Date.parse(text);
  if (!parsedValue && isDefaultSerializationFormat) {
    var parts = text.match(DATE_SERIALIZATION_PATTERN);
    if (parts) {
      var newDate = new Date(getTimePart(parts[1]), getTimePart(parts[2]), getTimePart(parts[3]));
      newDate.setFullYear(getTimePart(parts[1]));
      newDate.setMonth(getTimePart(parts[2]) - 1);
      newDate.setDate(getTimePart(parts[3]));
      return newDate;
    }
  }
  return isNumeric(parsedValue) ? new Date(parsedValue) : text;
}
function parseISO8601String(text) {
  var parts = text.match(ISO8601_PATTERN);
  if (!parts) {
    parts = text.match(ISO8601_TIME_PATTERN);
    if (parts) {
      return new Date(0, 0, 0, getTimePart(parts[1]), getTimePart(parts[2]), getTimePart(parts[4]));
    }
    return;
  }
  var year = getTimePart(parts[1]);
  var month = --parts[3];
  var day = parts[5];
  var timeZoneHour = 0;
  var timeZoneMinute = 0;
  var correctYear = (d) => {
    year < 100 && d.setFullYear(year);
    return d;
  };
  timeZoneHour = getTimePart(parts[14]);
  timeZoneMinute = getTimePart(parts[16]);
  if ("-" === parts[13]) {
    timeZoneHour = -timeZoneHour;
    timeZoneMinute = -timeZoneMinute;
  }
  var hour = getTimePart(parts[6]) - timeZoneHour;
  var minute = getTimePart(parts[8]) - timeZoneMinute;
  var second = getTimePart(parts[10]);
  var millisecond = function(part) {
    part = part || "";
    return getTimePart(part) * Math.pow(10, MILLISECOND_LENGHT - part.length);
  }(parts[11]);
  if (parts[12]) {
    return correctYear(new Date(Date.UTC(year, month, day, hour, minute, second, millisecond)));
  }
  return correctYear(new Date(year, month, day, hour, minute, second, millisecond));
}
var getIso8601Format = function(text, useUtc) {
  var parts = text.match(ISO8601_PATTERN);
  var result2 = "";
  if (!parts) {
    parts = text.match(ISO8601_TIME_PATTERN);
    if (parts) {
      return parts[3] ? "HH:mm:ss" : "HH:mm";
    }
    return;
  }
  for (var i = 1; i < ISO8601_PATTERN_PARTS.length; i++) {
    if (parts[i]) {
      result2 += ISO8601_PATTERN_PARTS[i] || parts[i];
    }
  }
  if ("Z" === parts[12]) {
    result2 += "'Z'";
  }
  if (parts[14]) {
    if (parts[15]) {
      result2 += "xxx";
    } else if (parts[16]) {
      result2 += "xx";
    } else {
      result2 += "x";
    }
  }
  return result2;
};
var deserializeDate = function(value2) {
  if ("number" === typeof value2) {
    return new Date(value2);
  }
  return dateParser(value2, !config_default().forceIsoDateParsing);
};
var serializeDate = function(value2, serializationFormat) {
  if (!serializationFormat) {
    return value2;
  }
  if (!isDate(value2)) {
    return null;
  }
  if (serializationFormat === NUMBER_SERIALIZATION_FORMAT) {
    return value2 && value2.valueOf ? value2.valueOf() : null;
  }
  return getFormatter(serializationFormat, default_date_names_default)(value2);
};
var getDateSerializationFormat = function(value2) {
  if ("number" === typeof value2) {
    return NUMBER_SERIALIZATION_FORMAT;
  } else if (isString(value2)) {
    var format2;
    if (config_default().forceIsoDateParsing) {
      format2 = getIso8601Format(value2);
    }
    if (format2) {
      return format2;
    } else if (value2.indexOf(":") >= 0) {
      return DATETIME_SERIALIZATION_FORMAT;
    } else {
      return DATE_SERIALIZATION_FORMAT;
    }
  } else if (value2) {
    return null;
  }
};
var date_serialization_default = {
  dateParser,
  deserializeDate,
  serializeDate,
  getDateSerializationFormat
};

// node_modules/devextreme/esm/__internal/grids/grid_core/columns_controller/m_columns_controller_utils.js
var setFilterOperationsAsDefaultValues = function(column) {
  column.filterOperations = column.defaultFilterOperations;
};
var globalColumnId = 1;
var createColumn = function(that, columnOptions, userStateColumnOptions, bandColumn) {
  var commonColumnOptions = {};
  if (columnOptions) {
    if (isString(columnOptions)) {
      columnOptions = {
        dataField: columnOptions
      };
    }
    that.setName(columnOptions);
    var result2 = {};
    if (columnOptions.command) {
      result2 = deepExtendArraySafe(commonColumnOptions, columnOptions);
    } else {
      commonColumnOptions = that.getCommonSettings(columnOptions);
      if (userStateColumnOptions && userStateColumnOptions.name && userStateColumnOptions.dataField) {
        columnOptions = extend({}, columnOptions, {
          dataField: userStateColumnOptions.dataField
        });
      }
      var calculatedColumnOptions = that._createCalculatedColumnOptions(columnOptions, bandColumn);
      if (!columnOptions.type) {
        result2 = {
          headerId: "dx-col-".concat(globalColumnId++)
        };
      }
      result2 = deepExtendArraySafe(result2, DEFAULT_COLUMN_OPTIONS);
      deepExtendArraySafe(result2, commonColumnOptions);
      deepExtendArraySafe(result2, calculatedColumnOptions);
      deepExtendArraySafe(result2, columnOptions);
      deepExtendArraySafe(result2, {
        selector: null
      });
    }
    if (columnOptions.filterOperations === columnOptions.defaultFilterOperations) {
      setFilterOperationsAsDefaultValues(result2);
    }
    return result2;
  }
};
var createColumnsFromOptions = function createColumnsFromOptions2(that, columnsOptions, bandColumn, createdColumnCount) {
  var result2 = [];
  if (columnsOptions) {
    each(columnsOptions, (index, columnOptions) => {
      var currentIndex = (null !== createdColumnCount && void 0 !== createdColumnCount ? createdColumnCount : 0) + result2.length;
      var userStateColumnOptions = that._columnsUserState && checkUserStateColumn(columnOptions, that._columnsUserState[currentIndex]) && that._columnsUserState[currentIndex];
      var column = createColumn(that, columnOptions, userStateColumnOptions, bandColumn);
      if (column) {
        if (bandColumn) {
          column.ownerBand = bandColumn;
        }
        result2.push(column);
        if (column.columns) {
          result2 = result2.concat(createColumnsFromOptions2(that, column.columns, column, result2.length));
          delete column.columns;
          column.hasColumns = true;
        }
      }
    });
  }
  return result2;
};
var getParentBandColumns = function(columnIndex, columnParentByIndex) {
  var result2 = [];
  var parent = columnParentByIndex[columnIndex];
  while (parent) {
    result2.unshift(parent);
    columnIndex = parent.index;
    parent = columnParentByIndex[columnIndex];
  }
  return result2;
};
var getChildrenByBandColumn = function getChildrenByBandColumn2(columnIndex, columnChildrenByIndex, recursive) {
  var result2 = [];
  var children = columnChildrenByIndex[columnIndex];
  if (children) {
    for (var i = 0; i < children.length; i++) {
      var column = children[i];
      if (!isDefined(column.groupIndex) || column.showWhenGrouped) {
        result2.push(column);
        if (recursive && column.isBand) {
          result2 = result2.concat(getChildrenByBandColumn2(column.index, columnChildrenByIndex, recursive));
        }
      }
    }
  }
  return result2;
};
var getColumnByIndexes = function(that, columnIndexes) {
  var result2;
  var columns7;
  var bandColumnsCache = that.getBandColumnsCache();
  var callbackFilter = function(column) {
    var ownerBand = result2 ? result2.index : void 0;
    return column.ownerBand === ownerBand;
  };
  if (bandColumnsCache.isPlain) {
    result2 = that._columns[columnIndexes[0]];
  } else {
    columns7 = that._columns.filter(callbackFilter);
    for (var i = 0; i < columnIndexes.length; i++) {
      result2 = columns7[columnIndexes[i]];
      if (result2) {
        columns7 = that._columns.filter(callbackFilter);
      }
    }
  }
  return result2;
};
var getColumnFullPath = function(that, column) {
  var result2 = [];
  var columns7;
  var bandColumnsCache = that.getBandColumnsCache();
  var callbackFilter = function(item) {
    return item.ownerBand === column.ownerBand;
  };
  if (bandColumnsCache.isPlain) {
    var columnIndex = that._columns.indexOf(column);
    if (columnIndex >= 0) {
      result2 = ["columns[".concat(columnIndex, "]")];
    }
  } else {
    columns7 = that._columns.filter(callbackFilter);
    while (columns7.length && -1 !== columns7.indexOf(column)) {
      result2.unshift("columns[".concat(columns7.indexOf(column), "]"));
      column = bandColumnsCache.columnParentByIndex[column.index];
      columns7 = column ? that._columns.filter(callbackFilter) : [];
    }
  }
  return result2.join(".");
};
var calculateColspan = function calculateColspan2(that, columnID) {
  var colspan = 0;
  var columns7 = that.getChildrenByBandColumn(columnID, true);
  each(columns7, (_, column) => {
    if (column.isBand) {
      column.colspan = column.colspan || calculateColspan2(that, column.index);
      colspan += column.colspan || 1;
    } else {
      colspan += 1;
    }
  });
  return colspan;
};
var processBandColumns = function(that, columns7, bandColumnsCache) {
  var rowspan;
  for (var i = 0; i < columns7.length; i++) {
    var column = columns7[i];
    if (column.visible || column.command) {
      if (column.isBand) {
        column.colspan = column.colspan || calculateColspan(that, column.index);
      }
      if (!column.isBand || !column.colspan) {
        rowspan = that.getRowCount();
        if (!column.command && (!isDefined(column.groupIndex) || column.showWhenGrouped)) {
          rowspan -= getParentBandColumns(column.index, bandColumnsCache.columnParentByIndex).length;
        }
        if (rowspan > 1) {
          column.rowspan = rowspan;
        }
      }
    }
  }
};
var getValueDataType = function(value2) {
  var dataType = type(value2);
  if ("string" !== dataType && "boolean" !== dataType && "number" !== dataType && "date" !== dataType && "object" !== dataType) {
    dataType = void 0;
  }
  return dataType;
};
var getSerializationFormat = function(dataType, value2) {
  switch (dataType) {
    case "date":
    case "datetime":
      return date_serialization_default.getDateSerializationFormat(value2);
    case "number":
      if (isString(value2)) {
        return "string";
      }
      if (isNumeric(value2)) {
        return null;
      }
  }
};
var updateSerializers = function(options2, dataType) {
  if (!options2.deserializeValue) {
    if (m_utils_default.isDateType(dataType)) {
      options2.deserializeValue = function(value2) {
        return date_serialization_default.deserializeDate(value2);
      };
      options2.serializeValue = function(value2) {
        return isString(value2) ? value2 : date_serialization_default.serializeDate(value2, this.serializationFormat);
      };
    }
    if ("number" === dataType) {
      options2.deserializeValue = function(value2) {
        var parsedValue = parseFloat(value2);
        return isNaN(parsedValue) ? value2 : parsedValue;
      };
      options2.serializeValue = function(value2, target) {
        if ("filter" === target) {
          return value2;
        }
        return isDefined(value2) && "string" === this.serializationFormat ? value2.toString() : value2;
      };
    }
  }
};
var getAlignmentByDataType = function(dataType, isRTL) {
  switch (dataType) {
    case "number":
      return "right";
    case "boolean":
      return "center";
    default:
      return getDefaultAlignment(isRTL);
  }
};
var customizeTextForBooleanDataType = function(e) {
  if (true === e.value) {
    return this.trueText || "true";
  }
  if (false === e.value) {
    return this.falseText || "false";
  }
  return e.valueText || "";
};
var getCustomizeTextByDataType = function(dataType) {
  if ("boolean" === dataType) {
    return customizeTextForBooleanDataType;
  }
};
var createColumnsFromDataSource = function(that, dataSource) {
  var firstItems = that._getFirstItems(dataSource);
  var fieldName;
  var processedFields = {};
  var result2 = [];
  for (var i = 0; i < firstItems.length; i++) {
    if (firstItems[i]) {
      for (fieldName in firstItems[i]) {
        if (!isFunction(firstItems[i][fieldName]) || variable_wrapper_default.isWrapped(firstItems[i][fieldName])) {
          processedFields[fieldName] = true;
        }
      }
    }
  }
  for (fieldName in processedFields) {
    if (0 !== fieldName.indexOf("__")) {
      var column = createColumn(that, fieldName);
      result2.push(column);
    }
  }
  return result2;
};
var updateColumnIndexes = function(that) {
  each(that._columns, (index, column) => {
    column.index = index;
  });
  each(that._columns, (index, column) => {
    if (isObject(column.ownerBand)) {
      column.ownerBand = column.ownerBand.index;
    }
  });
  each(that._commandColumns, (index, column) => {
    column.index = -(index + 1);
  });
};
var updateColumnGroupIndexes = function(that, currentColumn) {
  normalizeIndexes(that._columns, "groupIndex", currentColumn, (column) => {
    var {
      grouped
    } = column;
    delete column.grouped;
    return grouped;
  });
};
var updateColumnSortIndexes = function(that, currentColumn) {
  each(that._columns, (index, column) => {
    if (isDefined(column.sortIndex) && !isSortOrderValid(column.sortOrder)) {
      delete column.sortIndex;
    }
  });
  normalizeIndexes(that._columns, "sortIndex", currentColumn, (column) => !isDefined(column.groupIndex) && isSortOrderValid(column.sortOrder));
};
var updateColumnVisibleIndexes = function(that, currentColumn) {
  var column;
  var result2 = [];
  var bandColumnsCache = that.getBandColumnsCache();
  var bandedColumns = [];
  var columns7 = that._columns.filter((column2) => !column2.command);
  for (var i = 0; i < columns7.length; i++) {
    column = columns7[i];
    var parentBandColumns = getParentBandColumns(i, bandColumnsCache.columnParentByIndex);
    if (parentBandColumns.length) {
      bandedColumns.push(column);
    } else {
      result2.push(column);
    }
  }
  normalizeIndexes(bandedColumns, "visibleIndex", currentColumn);
  normalizeIndexes(result2, "visibleIndex", currentColumn);
};
var getColumnIndexByVisibleIndex = function(that, visibleIndex, location) {
  var rowIndex = isObject(visibleIndex) ? visibleIndex.rowIndex : null;
  var columns7 = location === GROUP_LOCATION ? that.getGroupColumns() : location === COLUMN_CHOOSER_LOCATION ? that.getChooserColumns() : that.getVisibleColumns(rowIndex);
  var column;
  visibleIndex = isObject(visibleIndex) ? visibleIndex.columnIndex : visibleIndex;
  column = columns7[visibleIndex];
  if (column && column.type === GROUP_COMMAND_COLUMN_NAME) {
    column = that._columns.filter((col) => column.type === col.type)[0] || column;
  }
  return column && isDefined(column.index) ? column.index : -1;
};
var moveColumnToGroup = function(that, column, groupIndex) {
  var groupColumns = that.getGroupColumns();
  var i;
  if (groupIndex >= 0) {
    for (i = 0; i < groupColumns.length; i++) {
      if (groupColumns[i].groupIndex >= groupIndex) {
        groupColumns[i].groupIndex++;
      }
    }
  } else {
    groupIndex = 0;
    for (i = 0; i < groupColumns.length; i++) {
      groupIndex = Math.max(groupIndex, groupColumns[i].groupIndex + 1);
    }
  }
  return groupIndex;
};
function checkUserStateColumn(column, userStateColumn) {
  return column && userStateColumn && userStateColumn.name === (column.name || column.dataField) && (userStateColumn.dataField === column.dataField || column.name);
}
var applyUserState = function(that) {
  var columnsUserState = that._columnsUserState;
  var ignoreColumnOptionNames = that._ignoreColumnOptionNames || [];
  var columns7 = that._columns;
  var columnCountById = {};
  var resultColumns = [];
  var allColumnsHaveState = true;
  var userStateColumnIndexes = [];
  var column;
  var userStateColumnIndex;
  var i;
  function applyFieldsState(column2, userStateColumn) {
    if (!userStateColumn) {
      return;
    }
    for (var index = 0; index < USER_STATE_FIELD_NAMES.length; index++) {
      var fieldName = USER_STATE_FIELD_NAMES[index];
      if (ignoreColumnOptionNames.includes(fieldName)) {
        continue;
      }
      if ("dataType" === fieldName) {
        column2[fieldName] = column2[fieldName] || userStateColumn[fieldName];
      } else if (USER_STATE_FIELD_NAMES_15_1.includes(fieldName)) {
        if (fieldName in userStateColumn) {
          column2[fieldName] = userStateColumn[fieldName];
        }
      } else {
        if ("selectedFilterOperation" === fieldName && userStateColumn[fieldName]) {
          column2.defaultSelectedFilterOperation = column2[fieldName] || null;
        }
        column2[fieldName] = userStateColumn[fieldName];
      }
    }
  }
  function findUserStateColumn(columnsUserState2, column2) {
    var id = column2.name || column2.dataField;
    var count = columnCountById[id] || 0;
    for (var j = 0; j < columnsUserState2.length; j++) {
      if (checkUserStateColumn(column2, columnsUserState2[j])) {
        if (count) {
          count--;
        } else {
          columnCountById[id] = columnCountById[id] || 0;
          columnCountById[id]++;
          return j;
        }
      }
    }
    return -1;
  }
  if (columnsUserState) {
    for (i = 0; i < columns7.length; i++) {
      userStateColumnIndex = findUserStateColumn(columnsUserState, columns7[i]);
      allColumnsHaveState = allColumnsHaveState && userStateColumnIndex >= 0;
      userStateColumnIndexes.push(userStateColumnIndex);
    }
    for (i = 0; i < columns7.length; i++) {
      column = columns7[i];
      userStateColumnIndex = userStateColumnIndexes[i];
      if (that._hasUserState || allColumnsHaveState) {
        applyFieldsState(column, columnsUserState[userStateColumnIndex]);
      }
      if (userStateColumnIndex >= 0 && isDefined(columnsUserState[userStateColumnIndex].initialIndex)) {
        resultColumns[userStateColumnIndex] = column;
      } else {
        resultColumns.push(column);
      }
    }
    var hasAddedBands = false;
    for (i = 0; i < columnsUserState.length; i++) {
      var columnUserState = columnsUserState[i];
      if (columnUserState.added && findUserStateColumn(columns7, columnUserState) < 0) {
        column = createColumn(that, columnUserState.added);
        applyFieldsState(column, columnUserState);
        resultColumns.push(column);
        if (columnUserState.added.columns) {
          hasAddedBands = true;
        }
      }
    }
    if (hasAddedBands) {
      updateColumnIndexes(that);
      resultColumns = createColumnsFromOptions(that, resultColumns);
    }
    assignColumns(that, resultColumns);
  }
};
var updateIndexes = function(that, column) {
  updateColumnIndexes(that);
  updateColumnGroupIndexes(that, column);
  updateColumnSortIndexes(that, column);
  resetBandColumnsCache(that);
  updateColumnVisibleIndexes(that, column);
};
var resetColumnsCache = function(that) {
  that.resetColumnsCache();
};
function assignColumns(that, columns7) {
  that._previousColumns = that._columns;
  that._columns = columns7;
  resetColumnsCache(that);
  that.updateColumnDataTypes();
}
var updateColumnChanges = function(that, changeType, optionName, columnIndex) {
  var _a;
  var columnChanges = that._columnChanges || {
    optionNames: {
      length: 0
    },
    changeTypes: {
      length: 0
    },
    columnIndex
  };
  optionName = optionName || "all";
  optionName = optionName.split(".")[0];
  var {
    changeTypes
  } = columnChanges;
  if (changeType && !changeTypes[changeType]) {
    changeTypes[changeType] = true;
    changeTypes.length++;
  }
  var {
    optionNames
  } = columnChanges;
  if (optionName && !optionNames[optionName]) {
    optionNames[optionName] = true;
    optionNames.length++;
  }
  if (void 0 === columnIndex || columnIndex !== columnChanges.columnIndex) {
    if (isDefined(columnIndex)) {
      null !== (_a = columnChanges.columnIndices) && void 0 !== _a ? _a : columnChanges.columnIndices = [];
      if (isDefined(columnChanges.columnIndex)) {
        columnChanges.columnIndices.push(columnChanges.columnIndex);
      }
      columnChanges.columnIndices.push(columnIndex);
    }
    delete columnChanges.columnIndex;
  }
  that._columnChanges = columnChanges;
  resetColumnsCache(that);
};
var fireColumnsChanged = function(that) {
  var onColumnsChanging = that.option("onColumnsChanging");
  var columnChanges = that._columnChanges;
  var reinitOptionNames = ["dataField", "lookup", "dataType", "columns"];
  if (that.isInitialized() && !that._updateLockCount && columnChanges) {
    if (onColumnsChanging) {
      that._updateLockCount++;
      onColumnsChanging(extend({
        component: that.component
      }, columnChanges));
      that._updateLockCount--;
    }
    that._columnChanges = void 0;
    if (options2 = columnChanges.optionNames, options2 && reinitOptionNames.some((name2) => options2[name2])) {
      that._reinitAfterLookupChanges = null === columnChanges || void 0 === columnChanges ? void 0 : columnChanges.optionNames.lookup;
      that.reinit();
      that._reinitAfterLookupChanges = void 0;
    } else {
      that.columnsChanged.fire(columnChanges);
    }
  }
  var options2;
};
var updateSortOrderWhenGrouping = function(that, column, groupIndex, prevGroupIndex) {
  var columnWasGrouped = prevGroupIndex >= 0;
  if (groupIndex >= 0) {
    if (!columnWasGrouped) {
      column.lastSortOrder = column.sortOrder;
    }
  } else {
    var sortMode = that.option("sorting.mode");
    var sortOrder = column.lastSortOrder;
    if ("single" === sortMode) {
      var sortedByAnotherColumn = that._columns.some((col) => col !== column && isDefined(col.sortIndex));
      if (sortedByAnotherColumn) {
        sortOrder = void 0;
      }
    }
    column.sortOrder = sortOrder;
  }
};
var fireOptionChanged = function(that, options2) {
  var {
    value: value2
  } = options2;
  var {
    optionName
  } = options2;
  var {
    prevValue
  } = options2;
  var {
    fullOptionName
  } = options2;
  var fullOptionPath = "".concat(fullOptionName, ".").concat(optionName);
  if (!IGNORE_COLUMN_OPTION_NAMES[optionName] && that._skipProcessingColumnsChange !== fullOptionPath) {
    that._skipProcessingColumnsChange = fullOptionPath;
    that.component._notifyOptionChanged(fullOptionPath, value2, prevValue);
    that._skipProcessingColumnsChange = false;
  }
};
var columnOptionCore = function(that, column, optionName, value2, notFireEvent) {
  var optionGetter = compileGetter(optionName);
  var columnIndex = column.index;
  var columns7;
  var changeType;
  var initialColumn;
  if (3 === arguments.length) {
    return optionGetter(column, {
      functionsAsIs: true
    });
  }
  var prevValue = optionGetter(column, {
    functionsAsIs: true
  });
  if (!equalByValue(prevValue, value2, {
    maxDepth: 5
  })) {
    if ("groupIndex" === optionName || "calculateGroupValue" === optionName) {
      changeType = "grouping";
      updateSortOrderWhenGrouping(that, column, value2, prevValue);
    } else if ("sortIndex" === optionName || "sortOrder" === optionName || "calculateSortValue" === optionName) {
      changeType = "sorting";
    } else {
      changeType = "columns";
    }
    var optionSetter = compileSetter(optionName);
    optionSetter(column, value2, {
      functionsAsIs: true
    });
    var fullOptionName = getColumnFullPath(that, column);
    if (COLUMN_INDEX_OPTIONS[optionName]) {
      updateIndexes(that, column);
      value2 = optionGetter(column);
    }
    if ("name" === optionName || "allowEditing" === optionName) {
      that._checkColumns();
    }
    if (!isDefined(prevValue) && !isDefined(value2) && 0 !== optionName.indexOf("buffer")) {
      notFireEvent = true;
    }
    if (!notFireEvent) {
      if (!USER_STATE_FIELD_NAMES.includes(optionName) && "visibleWidth" !== optionName) {
        columns7 = that.option("columns");
        initialColumn = that.getColumnByPath(fullOptionName, columns7);
        if (isString(initialColumn)) {
          initialColumn = columns7[columnIndex] = {
            dataField: initialColumn
          };
        }
        if (initialColumn && checkUserStateColumn(initialColumn, column)) {
          optionSetter(initialColumn, value2, {
            functionsAsIs: true
          });
        }
      }
      updateColumnChanges(that, changeType, optionName, columnIndex);
    } else {
      resetColumnsCache(that);
    }
    fullOptionName && fireOptionChanged(that, {
      fullOptionName,
      optionName,
      value: value2,
      prevValue
    });
  }
};
function isSortOrderValid(sortOrder) {
  return "asc" === sortOrder || "desc" === sortOrder;
}
var addExpandColumn = function(that) {
  var options2 = that._getExpandColumnOptions();
  that.addCommandColumn(options2);
};
var defaultSetCellValue = function(data17, value2) {
  if (!this.dataField) {
    return;
  }
  var path = this.dataField.split(".");
  var dotCount = path.length - 1;
  if (this.serializeValue) {
    value2 = this.serializeValue(value2);
  }
  for (var i = 0; i < dotCount; i++) {
    var name2 = path[i];
    data17 = data17[name2] = data17[name2] || {};
  }
  data17[path[dotCount]] = value2;
};
var getDataColumns = function getDataColumns2(columns7, rowIndex, bandColumnID) {
  var result2 = [];
  rowIndex = rowIndex || 0;
  columns7[rowIndex] && each(columns7[rowIndex], (_, column) => {
    if (column.ownerBand === bandColumnID || column.type === GROUP_COMMAND_COLUMN_NAME) {
      if (!column.isBand || !column.colspan) {
        if (!column.command || rowIndex < 1) {
          result2.push(column);
        }
      } else {
        result2.push.apply(result2, getDataColumns2(columns7, rowIndex + 1, column.index));
      }
    }
  });
  return result2;
};
var getRowCount = function(that) {
  var rowCount = 1;
  var bandColumnsCache = that.getBandColumnsCache();
  var {
    columnParentByIndex
  } = bandColumnsCache;
  that._columns.forEach((column) => {
    var parents = getParentBandColumns(column.index, columnParentByIndex);
    var invisibleParents = parents.filter((column2) => !column2.visible);
    if (column.visible && !invisibleParents.length) {
      rowCount = Math.max(rowCount, parents.length + 1);
    }
  });
  return rowCount;
};
var isCustomCommandColumn = (that, commandColumn) => {
  var customCommandColumns = that._columns.filter((column) => column.type === commandColumn.type);
  return !!customCommandColumns.length;
};
var getFixedPosition = function(that, column) {
  var rtlEnabled = that.option("rtlEnabled");
  if (column.command && !isCustomCommandColumn(that, column) || !column.fixedPosition) {
    return rtlEnabled ? "right" : "left";
  }
  return column.fixedPosition;
};
var processExpandColumns = function(columns7, expandColumns, type2, columnIndex) {
  var customColumnIndex;
  var rowCount = this.getRowCount();
  var rowspan = columns7[columnIndex] && columns7[columnIndex].rowspan;
  var expandColumnsByType = expandColumns.filter((column) => column.type === type2);
  columns7.forEach((column, index) => {
    if (column.type === type2) {
      customColumnIndex = index;
      rowspan = columns7[index + 1] ? columns7[index + 1].rowspan : rowCount;
    }
  });
  if (rowspan > 1) {
    expandColumnsByType = map(expandColumnsByType, (expandColumn) => extend({}, expandColumn, {
      rowspan
    }));
  }
  expandColumnsByType.unshift.apply(expandColumnsByType, isDefined(customColumnIndex) ? [customColumnIndex, 1] : [columnIndex, 0]);
  columns7.splice.apply(columns7, expandColumnsByType);
  return rowspan || 1;
};
var digitsCount = function(number2) {
  var i;
  for (i = 0; number2 > 1; i++) {
    number2 /= 10;
  }
  return i;
};
var numberToString = function(number2, digitsCount2) {
  var str = number2 ? number2.toString() : "0";
  while (str.length < digitsCount2) {
    str = "0".concat(str);
  }
  return str;
};
var mergeColumns = (that, columns7, commandColumns, needToExtend) => {
  var column;
  var commandColumnIndex;
  var result2 = columns7.slice().map((column2) => extend({}, column2));
  var isColumnFixing = that._isColumnFixing();
  var defaultCommandColumns = commandColumns.slice().map((column2) => extend({
    fixed: isColumnFixing
  }, column2));
  var getCommandColumnIndex = (column2) => commandColumns.reduce((result3, commandColumn, index) => {
    var columnType = needToExtend && column2.type === GROUP_COMMAND_COLUMN_NAME ? "expand" : column2.type;
    return commandColumn.type === columnType || commandColumn.command === column2.command ? index : result3;
  }, -1);
  var callbackFilter = (commandColumn) => commandColumn.command !== commandColumns[commandColumnIndex].command;
  for (var i = 0; i < columns7.length; i++) {
    column = columns7[i];
    commandColumnIndex = column && (column.type || column.command) ? getCommandColumnIndex(column) : -1;
    if (commandColumnIndex >= 0) {
      if (needToExtend) {
        result2[i] = extend({
          fixed: isColumnFixing
        }, commandColumns[commandColumnIndex], column);
        if (column.type !== GROUP_COMMAND_COLUMN_NAME) {
          defaultCommandColumns = defaultCommandColumns.filter(callbackFilter);
        }
      } else {
        var columnOptions = {
          visibleIndex: column.visibleIndex,
          index: column.index,
          headerId: column.headerId,
          allowFixing: 0 === column.groupIndex,
          allowReordering: 0 === column.groupIndex,
          groupIndex: column.groupIndex
        };
        result2[i] = extend({}, column, commandColumns[commandColumnIndex], column.type === GROUP_COMMAND_COLUMN_NAME && columnOptions);
      }
    }
  }
  if (columns7.length && needToExtend && defaultCommandColumns.length) {
    result2 = result2.concat(defaultCommandColumns);
  }
  return result2;
};
var isColumnFixed = (that, column) => isDefined(column.fixed) || !column.type ? column.fixed : that._isColumnFixing();
var convertOwnerBandToColumnReference = (columns7) => {
  columns7.forEach((column) => {
    if (isDefined(column.ownerBand)) {
      column.ownerBand = columns7[column.ownerBand];
    }
  });
};
var resetBandColumnsCache = (that) => {
  that._bandColumnsCache = void 0;
};
var findColumn = (columns7, identifier) => {
  var identifierOptionName = isString(identifier) && identifier.substr(0, identifier.indexOf(":"));
  var column;
  if (void 0 === identifier) {
    return;
  }
  if (identifierOptionName) {
    identifier = identifier.substr(identifierOptionName.length + 1);
  }
  if (identifierOptionName) {
    column = columns7.filter((column2) => "".concat(column2[identifierOptionName]) === identifier)[0];
  } else {
    ["index", "name", "dataField", "caption"].some((optionName) => {
      column = columns7.filter((column2) => column2[optionName] === identifier)[0];
      return !!column;
    });
  }
  return column;
};
var sortColumns = (columns7, sortOrder) => {
  if ("asc" !== sortOrder && "desc" !== sortOrder) {
    return columns7;
  }
  var sign2 = "asc" === sortOrder ? 1 : -1;
  columns7.sort((column1, column2) => {
    var caption1 = column1.caption || "";
    var caption2 = column2.caption || "";
    return sign2 * caption1.localeCompare(caption2);
  });
  return columns7;
};
var strictParseNumber = function(text, format2) {
  var parsedValue = number_default.parse(text);
  if (isNumeric(parsedValue)) {
    var formattedValue = number_default.format(parsedValue, format2);
    var formattedValueWithDefaultFormat = number_default.format(parsedValue, "decimal");
    if (formattedValue === text || formattedValueWithDefaultFormat === text) {
      return parsedValue;
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/columns_controller/m_columns_controller.js
var ColumnsController = class extends m_modules_default.Controller {
  init(isApplyingUserState) {
    this._dataController = this.getController("data");
    this._focusController = this.getController("focus");
    this._stateStoringController = this.getController("stateStoring");
    var columns7 = this.option("columns");
    this._commandColumns = this._commandColumns || [];
    this._columns = this._columns || [];
    this._isColumnsFromOptions = !!columns7;
    if (this._isColumnsFromOptions) {
      assignColumns(this, columns7 ? createColumnsFromOptions(this, columns7) : []);
      applyUserState(this);
    } else {
      assignColumns(this, this._columnsUserState ? createColumnsFromOptions(this, this._columnsUserState) : this._columns);
    }
    addExpandColumn(this);
    if (this._dataSourceApplied) {
      this.applyDataSource(this._dataSource, true, isApplyingUserState);
    } else {
      updateIndexes(this);
    }
    this._checkColumns();
  }
  _getExpandColumnOptions() {
    return {
      type: "expand",
      command: "expand",
      width: "auto",
      cssClass: COMMAND_EXPAND_CLASS,
      allowEditing: false,
      allowGrouping: false,
      allowSorting: false,
      allowResizing: false,
      allowReordering: false,
      allowHiding: false
    };
  }
  _getFirstItems(dataSource) {
    var groupsCount;
    var items = [];
    if (dataSource && dataSource.items().length > 0) {
      groupsCount = m_utils_default.normalizeSortingInfo(dataSource.group()).length;
      items = function getFirstItemsCore(items2, groupsCount2) {
        if (!items2 || !groupsCount2) {
          return items2;
        }
        for (var i = 0; i < items2.length; i++) {
          var childItems = getFirstItemsCore(items2[i].items || items2[i].collapsedItems, groupsCount2 - 1);
          if (childItems && childItems.length) {
            return childItems;
          }
        }
      }(dataSource.items(), groupsCount) || [];
    }
    return items;
  }
  _endUpdateCore() {
    !this._skipProcessingColumnsChange && fireColumnsChanged(this);
  }
  callbackNames() {
    return ["columnsChanged"];
  }
  getColumnByPath(path, columns7) {
    var column;
    var columnIndexes = [];
    path.replace(COLUMN_OPTION_REGEXP, (_, columnIndex) => {
      columnIndexes.push(parseInt(columnIndex));
      return "";
    });
    if (columnIndexes.length) {
      if (columns7) {
        column = columnIndexes.reduce((column2, index) => column2 && column2.columns && column2.columns[index], {
          columns: columns7
        });
      } else {
        column = getColumnByIndexes(this, columnIndexes);
      }
    }
    return column;
  }
  optionChanged(args) {
    var needUpdateRequireResize;
    switch (args.name) {
      case "adaptColumnWidthByRatio":
        args.handled = true;
        break;
      case "dataSource":
        if (args.value !== args.previousValue && !this.option("columns") && (!Array.isArray(args.value) || !Array.isArray(args.previousValue))) {
          this._columns = [];
        }
        break;
      case "columns":
        needUpdateRequireResize = this._skipProcessingColumnsChange;
        args.handled = true;
        if (!this._skipProcessingColumnsChange) {
          if (args.name === args.fullName) {
            this._columnsUserState = null;
            this._ignoreColumnOptionNames = null;
            this.init();
          } else {
            this._columnOptionChanged(args);
            needUpdateRequireResize = true;
          }
        }
        if (needUpdateRequireResize) {
          this._updateRequireResize(args);
        }
        break;
      case "commonColumnSettings":
      case "columnAutoWidth":
      case "allowColumnResizing":
      case "allowColumnReordering":
      case "columnFixing":
      case "grouping":
      case "groupPanel":
      case "regenerateColumnsByVisibleItems":
      case "customizeColumns":
      case "columnHidingEnabled":
      case "dateSerializationFormat":
      case "columnResizingMode":
      case "columnMinWidth":
      case "columnWidth":
        args.handled = true;
        var ignoreColumnOptionNames = "columnWidth" === args.fullName && ["width"];
        this.reinit(ignoreColumnOptionNames);
        break;
      case "rtlEnabled":
        this.reinit();
        break;
      default:
        super.optionChanged(args);
    }
  }
  _columnOptionChanged(args) {
    var columnOptionValue = {};
    var column = this.getColumnByPath(args.fullName);
    var columnOptionName = args.fullName.replace(COLUMN_OPTION_REGEXP, "");
    if (column) {
      if (columnOptionName) {
        columnOptionValue[columnOptionName] = args.value;
      } else {
        columnOptionValue = args.value;
      }
      this._skipProcessingColumnsChange = args.fullName;
      this.columnOption(column.index, columnOptionValue);
      this._skipProcessingColumnsChange = false;
    }
  }
  _updateRequireResize(args) {
    var {
      component
    } = this;
    if ("width" === args.fullName.replace(COLUMN_OPTION_REGEXP, "") && component._updateLockCount) {
      component._requireResize = true;
    }
  }
  publicMethods() {
    return ["addColumn", "deleteColumn", "columnOption", "columnCount", "clearSorting", "clearGrouping", "getVisibleColumns", "getVisibleColumnIndex"];
  }
  applyDataSource(dataSource, forceApplying, isApplyingUserState) {
    var isDataSourceLoaded = dataSource && dataSource.isLoaded();
    this._dataSource = dataSource;
    if (!this._dataSourceApplied || 0 === this._dataSourceColumnsCount || forceApplying || this.option("regenerateColumnsByVisibleItems")) {
      if (isDataSourceLoaded) {
        if (!this._isColumnsFromOptions) {
          var columnsFromDataSource = createColumnsFromDataSource(this, dataSource);
          if (columnsFromDataSource.length) {
            assignColumns(this, columnsFromDataSource);
            this._dataSourceColumnsCount = this._columns.length;
            applyUserState(this);
          }
        }
        return this.updateColumns(dataSource, forceApplying, isApplyingUserState);
      }
      this._dataSourceApplied = false;
      updateIndexes(this);
    } else if (isDataSourceLoaded && !this.isAllDataTypesDefined(true) && this.updateColumnDataTypes(dataSource)) {
      updateColumnChanges(this, "columns");
      fireColumnsChanged(this);
      return new Deferred().reject().promise();
    }
  }
  reset() {
    this._dataSource = null;
    this._dataSourceApplied = false;
    this._dataSourceColumnsCount = void 0;
    this.reinit();
  }
  resetColumnsCache() {
    this._visibleColumns = void 0;
    this._fixedColumns = void 0;
    this._rowCount = void 0;
    resetBandColumnsCache(this);
  }
  reinit(ignoreColumnOptionNames) {
    this._columnsUserState = this.getUserState();
    this._ignoreColumnOptionNames = ignoreColumnOptionNames || null;
    this.init();
    if (ignoreColumnOptionNames) {
      this._ignoreColumnOptionNames = null;
    }
  }
  isInitialized() {
    return !!this._columns.length || !!this.option("columns");
  }
  isDataSourceApplied() {
    return this._dataSourceApplied;
  }
  getCommonSettings(column) {
    var _a, _b;
    var commonColumnSettings = (!column || !column.type) && this.option("commonColumnSettings") || {};
    var groupingOptions = null !== (_a = this.option("grouping")) && void 0 !== _a ? _a : {};
    var groupPanelOptions = null !== (_b = this.option("groupPanel")) && void 0 !== _b ? _b : {};
    return extend({
      allowFixing: this.option("columnFixing.enabled"),
      allowResizing: this.option("allowColumnResizing") || void 0,
      allowReordering: this.option("allowColumnReordering"),
      minWidth: this.option("columnMinWidth"),
      width: this.option("columnWidth"),
      autoExpandGroup: groupingOptions.autoExpandAll,
      allowCollapsing: groupingOptions.allowCollapsing,
      allowGrouping: groupPanelOptions.allowColumnDragging && groupPanelOptions.visible || groupingOptions.contextMenuEnabled
    }, commonColumnSettings);
  }
  isColumnOptionUsed(optionName) {
    for (var i = 0; i < this._columns.length; i++) {
      if (this._columns[i][optionName]) {
        return true;
      }
    }
  }
  isAllDataTypesDefined(checkSerializers) {
    var columns7 = this._columns;
    if (!columns7.length) {
      return false;
    }
    for (var i = 0; i < columns7.length; i++) {
      if (!columns7[i].dataField && columns7[i].calculateCellValue === columns7[i].defaultCalculateCellValue) {
        continue;
      }
      if (!columns7[i].dataType || checkSerializers && columns7[i].deserializeValue && void 0 === columns7[i].serializationFormat) {
        return false;
      }
    }
    return true;
  }
  getColumns() {
    return this._columns;
  }
  isBandColumnsUsed() {
    return this.getColumns().some((column) => column.isBand);
  }
  getGroupColumns() {
    var result2 = [];
    each(this._columns, function() {
      if (isDefined(this.groupIndex)) {
        result2[this.groupIndex] = this;
      }
    });
    return result2;
  }
  _shouldReturnVisibleColumns() {
    return true;
  }
  _compileVisibleColumns(rowIndex) {
    this._visibleColumns = this._visibleColumns || this._compileVisibleColumnsCore();
    rowIndex = isDefined(rowIndex) ? rowIndex : this._visibleColumns.length - 1;
    return this._visibleColumns[rowIndex] || [];
  }
  getVisibleColumns(rowIndex, isBase) {
    if (!this._shouldReturnVisibleColumns()) {
      return [];
    }
    return this._compileVisibleColumns.apply(this, arguments);
  }
  getFixedColumns(rowIndex) {
    this._fixedColumns = this._fixedColumns || this._getFixedColumnsCore();
    rowIndex = isDefined(rowIndex) ? rowIndex : this._fixedColumns.length - 1;
    return this._fixedColumns[rowIndex] || [];
  }
  getFilteringColumns() {
    return this.getColumns().filter((item) => (item.dataField || item.name) && (item.allowFiltering || item.allowHeaderFiltering)).map((item) => {
      var field = extend(true, {}, item);
      if (!isDefined(field.dataField)) {
        field.dataField = field.name;
      }
      field.filterOperations = item.filterOperations !== item.defaultFilterOperations ? field.filterOperations : null;
      return field;
    });
  }
  getColumnIndexOffset() {
    return 0;
  }
  _getFixedColumnsCore() {
    var result2 = [];
    var rowCount = this.getRowCount();
    var isColumnFixing = this._isColumnFixing();
    var transparentColumn = {
      command: "transparent"
    };
    var transparentColspan = 0;
    var notFixedColumnCount;
    var transparentColumnIndex;
    var lastFixedPosition;
    if (isColumnFixing) {
      for (var i = 0; i <= rowCount; i++) {
        notFixedColumnCount = 0;
        lastFixedPosition = null;
        transparentColumnIndex = null;
        var visibleColumns = this.getVisibleColumns(i, true);
        for (var j = 0; j < visibleColumns.length; j++) {
          var prevColumn = visibleColumns[j - 1];
          var column = visibleColumns[j];
          if (!column.fixed) {
            if (0 === i) {
              if (column.isBand && column.colspan) {
                transparentColspan += column.colspan;
              } else {
                transparentColspan++;
              }
            }
            notFixedColumnCount++;
            if (!isDefined(transparentColumnIndex)) {
              transparentColumnIndex = j;
            }
          } else if (prevColumn && prevColumn.fixed && getFixedPosition(this, prevColumn) !== getFixedPosition(this, column)) {
            if (!isDefined(transparentColumnIndex)) {
              transparentColumnIndex = j;
            }
          } else {
            lastFixedPosition = column.fixedPosition;
          }
        }
        if (0 === i && (0 === notFixedColumnCount || notFixedColumnCount >= visibleColumns.length)) {
          return [];
        }
        if (!isDefined(transparentColumnIndex)) {
          transparentColumnIndex = "right" === lastFixedPosition ? 0 : visibleColumns.length;
        }
        result2[i] = visibleColumns.slice(0);
        if (!transparentColumn.colspan) {
          transparentColumn.colspan = transparentColspan;
        }
        result2[i].splice(transparentColumnIndex, notFixedColumnCount, transparentColumn);
      }
    }
    return result2.map((columns7) => columns7.map((column2) => {
      var newColumn = _extends({}, column2);
      if (newColumn.headerId) {
        newColumn.headerId += "-fixed";
      }
      return newColumn;
    }));
  }
  _isColumnFixing() {
    var isColumnFixing = this.option("columnFixing.enabled");
    !isColumnFixing && each(this._columns, (_, column) => {
      if (column.fixed) {
        isColumnFixing = true;
        return false;
      }
    });
    return isColumnFixing;
  }
  _getExpandColumnsCore() {
    return this.getGroupColumns();
  }
  getExpandColumns() {
    var expandColumns = this._getExpandColumnsCore();
    var expandColumn;
    var firstGroupColumn = expandColumns.filter((column) => 0 === column.groupIndex)[0];
    var isFixedFirstGroupColumn = firstGroupColumn && firstGroupColumn.fixed;
    var isColumnFixing = this._isColumnFixing();
    var rtlEnabled = this.option("rtlEnabled");
    if (expandColumns.length) {
      expandColumn = this.columnOption("command:expand");
    }
    expandColumns = map(expandColumns, (column) => extend({}, column, {
      visibleWidth: null,
      minWidth: null,
      cellTemplate: !isDefined(column.groupIndex) ? column.cellTemplate : null,
      headerCellTemplate: null,
      fixed: !isDefined(column.groupIndex) || !isFixedFirstGroupColumn ? isColumnFixing : true,
      fixedPosition: rtlEnabled ? "right" : "left"
    }, expandColumn, {
      index: column.index,
      type: column.type || GROUP_COMMAND_COLUMN_NAME
    }));
    return expandColumns;
  }
  getBandColumnsCache() {
    if (!this._bandColumnsCache) {
      var columns7 = this._columns;
      var columnChildrenByIndex = {};
      var columnParentByIndex = {};
      var isPlain = true;
      columns7.forEach((column) => {
        var {
          ownerBand
        } = column;
        var parentIndex = isObject(ownerBand) ? ownerBand.index : ownerBand;
        var parent = columns7[parentIndex];
        if (column.hasColumns) {
          isPlain = false;
        }
        if (column.colspan) {
          column.colspan = void 0;
        }
        if (column.rowspan) {
          column.rowspan = void 0;
        }
        if (parent) {
          columnParentByIndex[column.index] = parent;
        } else {
          parentIndex = -1;
        }
        columnChildrenByIndex[parentIndex] = columnChildrenByIndex[parentIndex] || [];
        columnChildrenByIndex[parentIndex].push(column);
      });
      this._bandColumnsCache = {
        isPlain,
        columnChildrenByIndex,
        columnParentByIndex
      };
    }
    return this._bandColumnsCache;
  }
  _isColumnVisible(column) {
    return column.visible && this.isParentColumnVisible(column.index);
  }
  _isColumnInGroupPanel(column) {
    return isDefined(column.groupIndex) && !column.showWhenGrouped;
  }
  hasVisibleDataColumns() {
    var columns7 = this._columns;
    return columns7.some((column) => {
      var isVisible = this._isColumnVisible(column);
      var isInGroupPanel = this._isColumnInGroupPanel(column);
      var isCommand = !!column.command;
      return isVisible && !isInGroupPanel && !isCommand;
    });
  }
  _compileVisibleColumnsCore() {
    var bandColumnsCache = this.getBandColumnsCache();
    var columns7 = mergeColumns(this, this._columns, this._commandColumns, true);
    processBandColumns(this, columns7, bandColumnsCache);
    var indexedColumns = this._getIndexedColumns(columns7);
    var visibleColumns = this._getVisibleColumnsFromIndexed(indexedColumns);
    var isDataColumnsInvisible = !this.hasVisibleDataColumns();
    if (isDataColumnsInvisible && this._columns.length) {
      visibleColumns[visibleColumns.length - 1].push({
        command: "empty"
      });
    }
    return visibleColumns;
  }
  _getIndexedColumns(columns7) {
    var rtlEnabled = this.option("rtlEnabled");
    var rowCount = this.getRowCount();
    var columnDigitsCount = digitsCount(columns7.length);
    var bandColumnsCache = this.getBandColumnsCache();
    var positiveIndexedColumns = [];
    var negativeIndexedColumns = [];
    for (var i = 0; i < rowCount; i += 1) {
      negativeIndexedColumns[i] = [{}];
      positiveIndexedColumns[i] = [{}, {}, {}];
    }
    columns7.forEach((column) => {
      var _a, _b, _c, _d;
      var {
        visibleIndex
      } = column;
      var indexedColumns;
      var parentBandColumns = getParentBandColumns(column.index, bandColumnsCache.columnParentByIndex);
      var isVisible = this._isColumnVisible(column);
      var isInGroupPanel = this._isColumnInGroupPanel(column);
      if (isVisible && !isInGroupPanel) {
        var rowIndex = parentBandColumns.length;
        if (visibleIndex < 0) {
          visibleIndex = -visibleIndex;
          indexedColumns = negativeIndexedColumns[rowIndex];
        } else {
          column.fixed = null !== (_b = null === (_a = parentBandColumns[0]) || void 0 === _a ? void 0 : _a.fixed) && void 0 !== _b ? _b : column.fixed;
          column.fixedPosition = null !== (_d = null === (_c = parentBandColumns[0]) || void 0 === _c ? void 0 : _c.fixedPosition) && void 0 !== _d ? _d : column.fixedPosition;
          if (column.fixed) {
            var isDefaultCommandColumn = !!column.command && !isCustomCommandColumn(this, column);
            var isFixedToEnd = "right" === column.fixedPosition;
            if (rtlEnabled && !isDefaultCommandColumn) {
              isFixedToEnd = !isFixedToEnd;
            }
            indexedColumns = isFixedToEnd ? positiveIndexedColumns[rowIndex][2] : positiveIndexedColumns[rowIndex][0];
          } else {
            indexedColumns = positiveIndexedColumns[rowIndex][1];
          }
        }
        if (parentBandColumns.length) {
          visibleIndex = numberToString(visibleIndex, columnDigitsCount);
          for (var _i = parentBandColumns.length - 1; _i >= 0; _i -= 1) {
            visibleIndex = numberToString(parentBandColumns[_i].visibleIndex, columnDigitsCount) + visibleIndex;
          }
        }
        indexedColumns[visibleIndex] = indexedColumns[visibleIndex] || [];
        indexedColumns[visibleIndex].push(column);
      }
    });
    return {
      positiveIndexedColumns,
      negativeIndexedColumns
    };
  }
  _getVisibleColumnsFromIndexed(_ref) {
    var _this = this;
    var {
      positiveIndexedColumns,
      negativeIndexedColumns
    } = _ref;
    var result2 = [];
    var rowCount = this.getRowCount();
    var expandColumns = mergeColumns(this, this.getExpandColumns(), this._columns);
    var rowspanGroupColumns = 0;
    var rowspanExpandColumns = 0;
    var _loop = function(rowIndex2) {
      result2.push([]);
      orderEach(negativeIndexedColumns[rowIndex2], (_, columns7) => {
        result2[rowIndex2].unshift.apply(result2[rowIndex2], columns7);
      });
      var firstPositiveIndexColumn = result2[rowIndex2].length;
      var positiveIndexedRowColumns = positiveIndexedColumns[rowIndex2];
      positiveIndexedRowColumns.forEach((columnsByFixing) => {
        orderEach(columnsByFixing, (_, columnsByVisibleIndex) => {
          result2[rowIndex2].push.apply(result2[rowIndex2], columnsByVisibleIndex);
        });
      });
      if (rowspanExpandColumns <= rowIndex2) {
        rowspanExpandColumns += processExpandColumns.call(_this, result2[rowIndex2], expandColumns, DETAIL_COMMAND_COLUMN_NAME, firstPositiveIndexColumn);
      }
      if (rowspanGroupColumns <= rowIndex2) {
        rowspanGroupColumns += processExpandColumns.call(_this, result2[rowIndex2], expandColumns, GROUP_COMMAND_COLUMN_NAME, firstPositiveIndexColumn);
      }
    };
    for (var rowIndex = 0; rowIndex < rowCount; rowIndex += 1) {
      _loop(rowIndex);
    }
    result2.push(getDataColumns(result2));
    return result2;
  }
  getInvisibleColumns(columns7, bandColumnIndex) {
    var that = this;
    var result2 = [];
    var hiddenColumnsByBand;
    columns7 = columns7 || that._columns;
    each(columns7, (_, column) => {
      if (column.ownerBand !== bandColumnIndex) {
        return;
      }
      if (column.isBand) {
        if (!column.visible) {
          hiddenColumnsByBand = that.getChildrenByBandColumn(column.index);
        } else {
          hiddenColumnsByBand = that.getInvisibleColumns(that.getChildrenByBandColumn(column.index), column.index);
        }
        if (hiddenColumnsByBand.length) {
          result2.push(column);
          result2 = result2.concat(hiddenColumnsByBand);
        }
        return;
      }
      if (!column.visible) {
        result2.push(column);
      }
    });
    return result2;
  }
  getChooserColumns(getAllColumns) {
    var columns7 = getAllColumns ? this.getColumns() : this.getInvisibleColumns();
    var columnChooserColumns = columns7.filter((column) => column.showInColumnChooser);
    var sortOrder = this.option("columnChooser.sortOrder");
    return sortColumns(columnChooserColumns, sortOrder);
  }
  allowMoveColumn(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation) {
    var columnIndex = getColumnIndexByVisibleIndex(this, fromVisibleIndex, sourceLocation);
    var sourceColumn = this._columns[columnIndex];
    if (sourceColumn && (sourceColumn.allowReordering || sourceColumn.allowGrouping || sourceColumn.allowHiding)) {
      if (sourceLocation === targetLocation) {
        if (sourceLocation === COLUMN_CHOOSER_LOCATION) {
          return false;
        }
        fromVisibleIndex = isObject(fromVisibleIndex) ? fromVisibleIndex.columnIndex : fromVisibleIndex;
        toVisibleIndex = isObject(toVisibleIndex) ? toVisibleIndex.columnIndex : toVisibleIndex;
        return fromVisibleIndex !== toVisibleIndex && fromVisibleIndex + 1 !== toVisibleIndex;
      }
      if (sourceLocation === GROUP_LOCATION && targetLocation !== COLUMN_CHOOSER_LOCATION || targetLocation === GROUP_LOCATION) {
        return sourceColumn && sourceColumn.allowGrouping;
      }
      if (sourceLocation === COLUMN_CHOOSER_LOCATION || targetLocation === COLUMN_CHOOSER_LOCATION) {
        return sourceColumn && sourceColumn.allowHiding;
      }
      return true;
    }
    return false;
  }
  moveColumn(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation) {
    var options2 = {};
    var prevGroupIndex;
    var fromIndex = getColumnIndexByVisibleIndex(this, fromVisibleIndex, sourceLocation);
    var toIndex = getColumnIndexByVisibleIndex(this, toVisibleIndex, targetLocation);
    var targetGroupIndex;
    if (fromIndex >= 0) {
      var column = this._columns[fromIndex];
      toVisibleIndex = isObject(toVisibleIndex) ? toVisibleIndex.columnIndex : toVisibleIndex;
      targetGroupIndex = toIndex >= 0 ? this._columns[toIndex].groupIndex : -1;
      if (isDefined(column.groupIndex) && sourceLocation === GROUP_LOCATION) {
        if (targetGroupIndex > column.groupIndex) {
          targetGroupIndex--;
        }
        if (targetLocation !== GROUP_LOCATION) {
          options2.groupIndex = void 0;
        } else {
          prevGroupIndex = column.groupIndex;
          delete column.groupIndex;
          updateColumnGroupIndexes(this);
        }
      }
      if (targetLocation === GROUP_LOCATION) {
        options2.groupIndex = moveColumnToGroup(this, column, targetGroupIndex);
        column.groupIndex = prevGroupIndex;
      } else if (toVisibleIndex >= 0) {
        var targetColumn = this._columns[toIndex];
        if (!targetColumn || column.ownerBand !== targetColumn.ownerBand) {
          options2.visibleIndex = MAX_SAFE_INTEGER;
        } else if (isColumnFixed(this, column) ^ isColumnFixed(this, targetColumn)) {
          options2.visibleIndex = MAX_SAFE_INTEGER;
        } else {
          options2.visibleIndex = targetColumn.visibleIndex;
        }
      }
      var isVisible = targetLocation !== COLUMN_CHOOSER_LOCATION;
      if (column.visible !== isVisible) {
        options2.visible = isVisible;
      }
      this.columnOption(column.index, options2);
    }
  }
  changeSortOrder(columnIndex, sortOrder) {
    var options2 = {};
    var sortingOptions = this.option("sorting");
    var sortingMode = sortingOptions && sortingOptions.mode;
    var needResetSorting = "single" === sortingMode || !sortOrder;
    var allowSorting = "single" === sortingMode || "multiple" === sortingMode;
    var column = this._columns[columnIndex];
    if (allowSorting && column && column.allowSorting) {
      if (needResetSorting && !isDefined(column.groupIndex)) {
        each(this._columns, function(index) {
          if (index !== columnIndex && this.sortOrder) {
            if (!isDefined(this.groupIndex)) {
              delete this.sortOrder;
            }
            delete this.sortIndex;
          }
        });
      }
      if (isSortOrderValid(sortOrder)) {
        if (column.sortOrder !== sortOrder) {
          options2.sortOrder = sortOrder;
        }
      } else if ("none" === sortOrder) {
        if (column.sortOrder) {
          options2.sortIndex = void 0;
          options2.sortOrder = void 0;
        }
      } else {
        !function(column2) {
          if ("ctrl" === sortOrder) {
            if (!("sortOrder" in column2 && "sortIndex" in column2)) {
              return false;
            }
            options2.sortOrder = void 0;
            options2.sortIndex = void 0;
          } else if (isDefined(column2.groupIndex) || isDefined(column2.sortIndex)) {
            options2.sortOrder = "desc" === column2.sortOrder ? "asc" : "desc";
          } else {
            options2.sortOrder = "asc";
          }
          return true;
        }(column);
      }
    }
    this.columnOption(column.index, options2);
  }
  getSortDataSourceParameters(useLocalSelector) {
    var sortColumns2 = [];
    var sort = [];
    each(this._columns, function() {
      if ((this.dataField || this.selector || this.calculateCellValue) && isDefined(this.sortIndex) && !isDefined(this.groupIndex)) {
        sortColumns2[this.sortIndex] = this;
      }
    });
    each(sortColumns2, function() {
      var sortOrder = this && this.sortOrder;
      if (isSortOrderValid(sortOrder)) {
        var sortItem = {
          selector: this.calculateSortValue || this.displayField || this.calculateDisplayValue || useLocalSelector && this.selector || this.dataField || this.calculateCellValue,
          desc: "desc" === this.sortOrder
        };
        if (this.sortingMethod) {
          sortItem.compare = this.sortingMethod.bind(this);
        }
        sort.push(sortItem);
      }
    });
    return sort.length > 0 ? sort : null;
  }
  getGroupDataSourceParameters(useLocalSelector) {
    var group = [];
    each(this.getGroupColumns(), function() {
      var selector = this.calculateGroupValue || this.displayField || this.calculateDisplayValue || useLocalSelector && this.selector || this.dataField || this.calculateCellValue;
      if (selector) {
        var groupItem = {
          selector,
          desc: "desc" === this.sortOrder,
          isExpanded: !!this.autoExpandGroup
        };
        if (this.sortingMethod) {
          groupItem.compare = this.sortingMethod.bind(this);
        }
        group.push(groupItem);
      }
    });
    return group.length > 0 ? group : null;
  }
  refresh(updateNewLookupsOnly) {
    var deferreds = [];
    each(this._columns, function() {
      var {
        lookup
      } = this;
      if (lookup && !this.calculateDisplayValue) {
        if (updateNewLookupsOnly && lookup.valueMap) {
          return;
        }
        if (lookup.update) {
          deferreds.push(lookup.update());
        }
      }
    });
    return when.apply(renderer_default, deferreds).done(resetColumnsCache.bind(null, this));
  }
  _updateColumnOptions(column, columnIndex) {
    var _a, _b, _c, _d;
    var shouldTakeOriginalCallbackFromPrevious = this._reinitAfterLookupChanges && (null === (_a = this._previousColumns) || void 0 === _a ? void 0 : _a[columnIndex]);
    column.selector = null !== (_b = column.selector) && void 0 !== _b ? _b : (data17) => column.calculateCellValue(data17);
    column.selector.columnIndex = columnIndex;
    column.selector.originalCallback = shouldTakeOriginalCallbackFromPrevious ? null !== (_d = null === (_c = this._previousColumns[columnIndex].selector) || void 0 === _c ? void 0 : _c.originalCallback) && void 0 !== _d ? _d : column.selector : column.selector;
    each(["calculateSortValue", "calculateGroupValue", "calculateDisplayValue"], (_, calculateCallbackName) => {
      var calculateCallback = column[calculateCallbackName];
      if (isFunction(calculateCallback)) {
        if (!calculateCallback.originalCallback) {
          var context = {
            column
          };
          column[calculateCallbackName] = function(data17) {
            return calculateCallback.call(context.column, data17);
          };
          column[calculateCallbackName].originalCallback = calculateCallback;
          column[calculateCallbackName].columnIndex = columnIndex;
          column[calculateCallbackName].context = context;
        } else {
          column[calculateCallbackName].context.column = column;
        }
      }
    });
    if (isString(column.calculateDisplayValue)) {
      column.displayField = column.calculateDisplayValue;
      column.calculateDisplayValue = compileGetter(column.displayField);
    }
    if (column.calculateDisplayValue) {
      column.displayValueMap = column.displayValueMap || {};
    }
    updateSerializers(column, column.dataType);
    var {
      lookup
    } = column;
    if (lookup) {
      updateSerializers(lookup, lookup.dataType);
    }
    var dataType = lookup ? lookup.dataType : column.dataType;
    if (dataType) {
      column.alignment = column.alignment || getAlignmentByDataType(dataType, this.option("rtlEnabled"));
      column.format = column.format || m_utils_default.getFormatByDataType(dataType);
      column.customizeText = column.customizeText || getCustomizeTextByDataType(dataType);
      column.defaultFilterOperations = column.defaultFilterOperations || !lookup && DATATYPE_OPERATIONS[dataType] || [];
      if (!isDefined(column.filterOperations)) {
        setFilterOperationsAsDefaultValues(column);
      }
      column.defaultFilterOperation = column.filterOperations && column.filterOperations[0] || "=";
      column.showEditorAlways = isDefined(column.showEditorAlways) ? column.showEditorAlways : "boolean" === dataType && !column.cellTemplate && !column.lookup;
    }
  }
  updateColumnDataTypes(dataSource) {
    var that = this;
    var dateSerializationFormat = that.option("dateSerializationFormat");
    var firstItems = that._getFirstItems(dataSource);
    var isColumnDataTypesUpdated = false;
    each(that._columns, (index, column) => {
      var i;
      var value2;
      var dataType;
      var lookupDataType;
      var valueDataType;
      var {
        lookup
      } = column;
      if (m_utils_default.isDateType(column.dataType) && void 0 === column.serializationFormat) {
        column.serializationFormat = dateSerializationFormat;
      }
      if (lookup && m_utils_default.isDateType(lookup.dataType) && void 0 === column.serializationFormat) {
        lookup.serializationFormat = dateSerializationFormat;
      }
      if (column.calculateCellValue && firstItems.length) {
        if (!column.dataType || lookup && !lookup.dataType) {
          for (i = 0; i < firstItems.length; i++) {
            value2 = column.calculateCellValue(firstItems[i]);
            if (!column.dataType) {
              valueDataType = getValueDataType(value2);
              dataType = dataType || valueDataType;
              if (dataType && valueDataType && dataType !== valueDataType) {
                dataType = "string";
              }
            }
            if (lookup && !lookup.dataType) {
              valueDataType = getValueDataType(m_utils_default.getDisplayValue(column, value2, firstItems[i]));
              lookupDataType = lookupDataType || valueDataType;
              if (lookupDataType && valueDataType && lookupDataType !== valueDataType) {
                lookupDataType = "string";
              }
            }
          }
          if (dataType || lookupDataType) {
            if (dataType) {
              column.dataType = dataType;
            }
            if (lookup && lookupDataType) {
              lookup.dataType = lookupDataType;
            }
            isColumnDataTypesUpdated = true;
          }
        }
        if (void 0 === column.serializationFormat || lookup && void 0 === lookup.serializationFormat) {
          for (i = 0; i < firstItems.length; i++) {
            value2 = column.calculateCellValue(firstItems[i], true);
            if (void 0 === column.serializationFormat) {
              column.serializationFormat = getSerializationFormat(column.dataType, value2);
            }
            if (lookup && void 0 === lookup.serializationFormat) {
              lookup.serializationFormat = getSerializationFormat(lookup.dataType, lookup.calculateCellValue(value2, true));
            }
          }
        }
      }
      that._updateColumnOptions(column, index);
    });
    return isColumnDataTypesUpdated;
  }
  _customizeColumns(columns7) {
    var customizeColumns = this.option("customizeColumns");
    if (customizeColumns) {
      var hasOwnerBand = columns7.some((column) => isObject(column.ownerBand));
      if (hasOwnerBand) {
        updateIndexes(this);
      }
      customizeColumns(columns7);
      assignColumns(this, createColumnsFromOptions(this, columns7));
    }
  }
  updateColumns(dataSource, forceApplying, isApplyingUserState) {
    if (!forceApplying) {
      this.updateSortingGrouping(dataSource);
    }
    if (!dataSource || dataSource.isLoaded()) {
      var sortParameters = dataSource ? dataSource.sort() || [] : this.getSortDataSourceParameters();
      var groupParameters = dataSource ? dataSource.group() || [] : this.getGroupDataSourceParameters();
      var filterParameters = null === dataSource || void 0 === dataSource ? void 0 : dataSource.lastLoadOptions().filter;
      if (!isApplyingUserState) {
        this._customizeColumns(this._columns);
      }
      updateIndexes(this);
      var columns7 = this._columns;
      return when(this.refresh(true)).always(() => {
        if (this._columns !== columns7) {
          return;
        }
        this._updateChanges(dataSource, {
          sorting: sortParameters,
          grouping: groupParameters,
          filtering: filterParameters
        });
        fireColumnsChanged(this);
      });
    }
  }
  _updateChanges(dataSource, parameters) {
    if (dataSource) {
      this.updateColumnDataTypes(dataSource);
      this._dataSourceApplied = true;
    }
    if (!m_utils_default.equalSortParameters(parameters.sorting, this.getSortDataSourceParameters())) {
      updateColumnChanges(this, "sorting");
    }
    if (!m_utils_default.equalSortParameters(parameters.grouping, this.getGroupDataSourceParameters())) {
      updateColumnChanges(this, "grouping");
    }
    if (this._dataController && !m_utils_default.equalFilterParameters(parameters.filtering, this._dataController.getCombinedFilter())) {
      updateColumnChanges(this, "filtering");
    }
    updateColumnChanges(this, "columns");
  }
  updateSortingGrouping(dataSource, fromDataSource) {
    var _a;
    var that = this;
    var isColumnsChanged;
    var updateSortGroupParameterIndexes = function(columns7, sortParameters2, indexParameterName) {
      each(columns7, (index, column) => {
        delete column[indexParameterName];
        if (sortParameters2) {
          for (var i = 0; i < sortParameters2.length; i++) {
            var {
              selector
            } = sortParameters2[i];
            var {
              isExpanded
            } = sortParameters2[i];
            if (selector === column.dataField || selector === column.name || selector === column.displayField || selector === column.selector || selector === column.calculateCellValue || selector === column.calculateGroupValue || selector === column.calculateDisplayValue) {
              if (fromDataSource) {
                column.sortOrder = "sortOrder" in column ? column.sortOrder : sortParameters2[i].desc ? "desc" : "asc";
              } else {
                column.sortOrder = column.sortOrder || (sortParameters2[i].desc ? "desc" : "asc");
              }
              if (void 0 !== isExpanded) {
                column.autoExpandGroup = isExpanded;
              }
              column[indexParameterName] = i;
              break;
            }
          }
        }
      });
    };
    if (dataSource) {
      var sortParameters = m_utils_default.normalizeSortingInfo(dataSource.sort());
      var groupParameters = m_utils_default.normalizeSortingInfo(dataSource.group());
      var columnsGroupParameters = that.getGroupDataSourceParameters();
      var columnsSortParameters = that.getSortDataSourceParameters();
      var changeTypes = null === (_a = this._columnChanges) || void 0 === _a ? void 0 : _a.changeTypes;
      var sortingChanged = !m_utils_default.equalSortParameters(sortParameters, columnsSortParameters);
      var needToApplySortingFromDataSource = fromDataSource && !(null === changeTypes || void 0 === changeTypes ? void 0 : changeTypes.sorting);
      var needToApplyGroupingFromDataSource = fromDataSource && !(null === changeTypes || void 0 === changeTypes ? void 0 : changeTypes.grouping);
      var groupingChanged = !m_utils_default.equalSortParameters(groupParameters, columnsGroupParameters, true);
      var groupExpandingChanged = !groupingChanged && !m_utils_default.equalSortParameters(groupParameters, columnsGroupParameters);
      if (!that._columns.length) {
        each(groupParameters, (index, group) => {
          that._columns.push(group.selector);
        });
        each(sortParameters, (index, sort) => {
          if (!isFunction(sort.selector)) {
            that._columns.push(sort.selector);
          }
        });
        assignColumns(that, createColumnsFromOptions(that, that._columns));
      }
      if ((needToApplyGroupingFromDataSource || !columnsGroupParameters && !that._hasUserState) && (groupingChanged || groupExpandingChanged)) {
        updateSortGroupParameterIndexes(that._columns, groupParameters, "groupIndex");
        if (fromDataSource) {
          groupingChanged && updateColumnChanges(that, "grouping");
          groupExpandingChanged && updateColumnChanges(that, "groupExpanding");
          isColumnsChanged = true;
        }
      }
      if ((needToApplySortingFromDataSource || !columnsSortParameters && !that._hasUserState) && sortingChanged) {
        updateSortGroupParameterIndexes(that._columns, sortParameters, "sortIndex");
        if (fromDataSource) {
          updateColumnChanges(that, "sorting");
          isColumnsChanged = true;
        }
      }
      if (isColumnsChanged) {
        fireColumnsChanged(that);
      }
    }
  }
  updateFilter(filter, remoteFiltering, columnIndex, filterValue) {
    if (!Array.isArray(filter)) {
      return filter;
    }
    filter = extend([], filter);
    columnIndex = void 0 !== filter.columnIndex ? filter.columnIndex : columnIndex;
    filterValue = void 0 !== filter.filterValue ? filter.filterValue : filterValue;
    if (isString(filter[0]) && "!" !== filter[0]) {
      var column = this.columnOption(filter[0]);
      if (remoteFiltering) {
        if (config_default().forceIsoDateParsing && column && column.serializeValue && filter.length > 1) {
          filter[filter.length - 1] = column.serializeValue(filter[filter.length - 1], "filter");
        }
      } else if (column && column.selector) {
        filter[0] = column.selector;
        filter[0].columnIndex = column.index;
      }
    } else if (isFunction(filter[0])) {
      filter[0].columnIndex = columnIndex;
      filter[0].filterValue = filterValue;
      filter[0].selectedFilterOperation = filter.selectedFilterOperation;
    }
    for (var i = 0; i < filter.length; i++) {
      filter[i] = this.updateFilter(filter[i], remoteFiltering, columnIndex, filterValue);
    }
    return filter;
  }
  columnCount() {
    return this._columns ? this._columns.length : 0;
  }
  columnOption(identifier, option, value2, notFireEvent) {
    var that = this;
    var columns7 = that._columns.concat(that._commandColumns);
    var column = findColumn(columns7, identifier);
    if (column) {
      if (1 === arguments.length) {
        return extend({}, column);
      }
      if (isString(option)) {
        if (2 === arguments.length) {
          return columnOptionCore(that, column, option);
        }
        columnOptionCore(that, column, option, value2, notFireEvent);
      } else if (isObject(option)) {
        each(option, (optionName, value3) => {
          columnOptionCore(that, column, optionName, value3, notFireEvent);
        });
      }
      fireColumnsChanged(that);
    }
  }
  clearSorting() {
    var columnCount = this.columnCount();
    this.beginUpdate();
    for (var i = 0; i < columnCount; i++) {
      this.columnOption(i, "sortOrder", void 0);
      delete findColumn(this._columns, i).sortOrder;
    }
    this.endUpdate();
  }
  clearGrouping() {
    var columnCount = this.columnCount();
    this.beginUpdate();
    for (var i = 0; i < columnCount; i++) {
      this.columnOption(i, "groupIndex", void 0);
    }
    this.endUpdate();
  }
  getVisibleIndex(index, rowIndex) {
    var columns7 = this.getVisibleColumns(rowIndex);
    for (var i = columns7.length - 1; i >= 0; i--) {
      if (columns7[i].index === index) {
        return i;
      }
    }
    return -1;
  }
  getVisibleIndexByColumn(column, rowIndex) {
    var visibleColumns = this.getVisibleColumns(rowIndex);
    var visibleColumn = visibleColumns.filter((col) => col.index === column.index && col.command === column.command)[0];
    return visibleColumns.indexOf(visibleColumn);
  }
  getVisibleColumnIndex(id, rowIndex) {
    var index = this.columnOption(id, "index");
    return this.getVisibleIndex(index, rowIndex);
  }
  addColumn(options2) {
    var column = createColumn(this, options2);
    var index = this._columns.length;
    this._columns.push(column);
    if (column.isBand) {
      this._columns = createColumnsFromOptions(this, this._columns);
      column = this._columns[index];
    }
    column.added = options2;
    updateIndexes(this, column);
    this.updateColumns(this._dataSource);
    this._checkColumns();
  }
  deleteColumn(id) {
    var column = this.columnOption(id);
    if (column && column.index >= 0) {
      convertOwnerBandToColumnReference(this._columns);
      this._columns.splice(column.index, 1);
      if (column.isBand) {
        var childIndexes = this.getChildrenByBandColumn(column.index).map((column2) => column2.index);
        this._columns = this._columns.filter((column2) => childIndexes.indexOf(column2.index) < 0);
      }
      updateIndexes(this);
      this.updateColumns(this._dataSource);
    }
  }
  addCommandColumn(options2) {
    var commandColumn = this._commandColumns.filter((column) => column.command === options2.command)[0];
    if (!commandColumn) {
      commandColumn = options2;
      this._commandColumns.push(commandColumn);
    }
  }
  getUserState() {
    var columns7 = this._columns;
    var result2 = [];
    var i;
    function handleStateField(index, value2) {
      if (void 0 !== columns7[i][value2]) {
        result2[i][value2] = columns7[i][value2];
      }
    }
    for (i = 0; i < columns7.length; i++) {
      result2[i] = {};
      each(USER_STATE_FIELD_NAMES, handleStateField);
    }
    return result2;
  }
  setName(column) {
    column.name = column.name || column.dataField || column.type;
  }
  setUserState(state) {
    var dataSource = this._dataSource;
    var ignoreColumnOptionNames = this.option("stateStoring.ignoreColumnOptionNames");
    null === state || void 0 === state ? void 0 : state.forEach(this.setName);
    if (!ignoreColumnOptionNames) {
      ignoreColumnOptionNames = [];
      var commonColumnSettings = this.getCommonSettings();
      if (!this.option("columnChooser.enabled")) {
        ignoreColumnOptionNames.push("visible");
      }
      if ("none" === this.option("sorting.mode")) {
        ignoreColumnOptionNames.push("sortIndex", "sortOrder");
      }
      if (!commonColumnSettings.allowGrouping) {
        ignoreColumnOptionNames.push("groupIndex");
      }
      if (!commonColumnSettings.allowFixing) {
        ignoreColumnOptionNames.push("fixed", "fixedPosition");
      }
      if (!commonColumnSettings.allowResizing) {
        ignoreColumnOptionNames.push("width", "visibleWidth");
      }
      var isFilterPanelHidden = !this.option("filterPanel.visible");
      if (!this.option("filterRow.visible") && isFilterPanelHidden) {
        ignoreColumnOptionNames.push("filterValue", "selectedFilterOperation");
      }
      if (!this.option("headerFilter.visible") && isFilterPanelHidden) {
        ignoreColumnOptionNames.push("filterValues", "filterType");
      }
    }
    this._columnsUserState = state;
    this._ignoreColumnOptionNames = ignoreColumnOptionNames;
    this._hasUserState = !!state;
    updateColumnChanges(this, "filtering");
    this.init(true);
    if (dataSource) {
      dataSource.sort(this.getSortDataSourceParameters());
      dataSource.group(this.getGroupDataSourceParameters());
    }
  }
  _checkColumns() {
    var usedNames = {};
    var hasEditableColumnWithoutName = false;
    var duplicatedNames = [];
    this._columns.forEach((column) => {
      var _a;
      var {
        name: name2
      } = column;
      var isBand = null === (_a = column.columns) || void 0 === _a ? void 0 : _a.length;
      var isEditable2 = column.allowEditing && (column.dataField || column.setCellValue) && !isBand;
      if (name2) {
        if (usedNames[name2]) {
          duplicatedNames.push('"'.concat(name2, '"'));
        }
        usedNames[name2] = true;
      } else if (isEditable2) {
        hasEditableColumnWithoutName = true;
      }
    });
    if (duplicatedNames.length) {
      ui_errors_default.log("E1059", duplicatedNames.join(", "));
    }
    if (hasEditableColumnWithoutName) {
      ui_errors_default.log("E1060");
    }
  }
  _createCalculatedColumnOptions(columnOptions, bandColumn) {
    var calculatedColumnOptions = {};
    var {
      dataField
    } = columnOptions;
    if (Array.isArray(columnOptions.columns) && columnOptions.columns.length || columnOptions.isBand) {
      calculatedColumnOptions.isBand = true;
      dataField = null;
    }
    if (dataField) {
      if (isString(dataField)) {
        var getter = compileGetter(dataField);
        calculatedColumnOptions = {
          caption: captionize(dataField),
          calculateCellValue(data17, skipDeserialization) {
            var value2 = getter(data17);
            return this.deserializeValue && !skipDeserialization ? this.deserializeValue(value2) : value2;
          },
          setCellValue: defaultSetCellValue,
          parseValue(text) {
            var result2;
            var parsedValue;
            if ("number" === this.dataType) {
              if (isString(text) && this.format) {
                result2 = strictParseNumber(text.trim(), this.format);
              } else if (isDefined(text) && isNumeric(text)) {
                result2 = Number(text);
              }
            } else if ("boolean" === this.dataType) {
              if (text === this.trueText) {
                result2 = true;
              } else if (text === this.falseText) {
                result2 = false;
              }
            } else if (m_utils_default.isDateType(this.dataType)) {
              parsedValue = date_default.parse(text, this.format);
              if (parsedValue) {
                result2 = parsedValue;
              }
            } else {
              result2 = text;
            }
            return result2;
          }
        };
      }
      calculatedColumnOptions.allowFiltering = true;
    } else {
      calculatedColumnOptions.allowFiltering = !!columnOptions.calculateFilterExpression;
    }
    calculatedColumnOptions.calculateFilterExpression = function() {
      return filtering_default.defaultCalculateFilterExpression.apply(this, arguments);
    };
    calculatedColumnOptions.defaultFilterOperation = "=";
    calculatedColumnOptions.createFilterExpression = function(filterValue, selectedFilterOperation) {
      var result2;
      if (this.calculateFilterExpression) {
        result2 = this.calculateFilterExpression.apply(this, arguments);
      }
      if (isFunction(result2)) {
        result2 = [result2, "=", true];
      }
      if (result2) {
        result2.columnIndex = this.index;
        result2.filterValue = filterValue;
        result2.selectedFilterOperation = selectedFilterOperation;
      }
      return result2;
    };
    if (!dataField || !isString(dataField)) {
      extend(true, calculatedColumnOptions, {
        allowSorting: false,
        allowGrouping: false,
        calculateCellValue: () => null
      });
    }
    if (bandColumn) {
      calculatedColumnOptions.allowFixing = false;
    }
    if (columnOptions.dataType) {
      calculatedColumnOptions.userDataType = columnOptions.dataType;
    }
    if (columnOptions.selectedFilterOperation && !("defaultSelectedFilterOperation" in calculatedColumnOptions)) {
      calculatedColumnOptions.defaultSelectedFilterOperation = columnOptions.selectedFilterOperation;
    }
    if (columnOptions.lookup) {
      calculatedColumnOptions.lookup = {
        calculateCellValue(value2, skipDeserialization) {
          if (this.valueExpr) {
            value2 = this.valueMap && this.valueMap[value2];
          }
          return this.deserializeValue && !skipDeserialization ? this.deserializeValue(value2) : value2;
        },
        updateValueMap() {
          this.valueMap = {};
          if (this.items) {
            var calculateValue = compileGetter(this.valueExpr);
            var calculateDisplayValue = compileGetter(this.displayExpr);
            for (var i = 0; i < this.items.length; i++) {
              var item = this.items[i];
              var displayValue = calculateDisplayValue(item);
              this.valueMap[calculateValue(item)] = displayValue;
              this.dataType = this.dataType || getValueDataType(displayValue);
            }
          }
        },
        update() {
          var that = this;
          var {
            dataSource
          } = that;
          if (dataSource) {
            if (isFunction(dataSource) && !variable_wrapper_default.isWrapped(dataSource)) {
              dataSource = dataSource({});
            }
            if (isPlainObject(dataSource) || dataSource instanceof abstract_store_default || Array.isArray(dataSource)) {
              if (that.valueExpr) {
                var dataSourceOptions = normalizeDataSourceOptions(dataSource);
                dataSourceOptions.paginate = false;
                dataSource = new DataSource(dataSourceOptions);
                return dataSource.load().done((data17) => {
                  that.items = data17;
                  that.updateValueMap && that.updateValueMap();
                });
              }
            } else {
              ui_errors_default.log("E1016");
            }
          } else {
            that.updateValueMap && that.updateValueMap();
          }
        }
      };
    }
    calculatedColumnOptions.resizedCallbacks = callbacks_default();
    if (columnOptions.resized) {
      calculatedColumnOptions.resizedCallbacks.add(columnOptions.resized.bind(columnOptions));
    }
    each(calculatedColumnOptions, (optionName) => {
      if (isFunction(calculatedColumnOptions[optionName]) && 0 !== optionName.indexOf("default")) {
        var defaultOptionName = "default".concat(optionName.charAt(0).toUpperCase()).concat(optionName.substr(1));
        calculatedColumnOptions[defaultOptionName] = calculatedColumnOptions[optionName];
      }
    });
    return calculatedColumnOptions;
  }
  getRowCount() {
    this._rowCount = this._rowCount || getRowCount(this);
    return this._rowCount;
  }
  getRowIndex(columnIndex, alwaysGetRowIndex) {
    var column = this._columns[columnIndex];
    var bandColumnsCache = this.getBandColumnsCache();
    return column && (alwaysGetRowIndex || column.visible && !(column.command || isDefined(column.groupIndex))) ? getParentBandColumns(columnIndex, bandColumnsCache.columnParentByIndex).length : 0;
  }
  getChildrenByBandColumn(bandColumnIndex, onlyVisibleDirectChildren) {
    var bandColumnsCache = this.getBandColumnsCache();
    var result2 = getChildrenByBandColumn(bandColumnIndex, bandColumnsCache.columnChildrenByIndex, !onlyVisibleDirectChildren);
    if (onlyVisibleDirectChildren) {
      return result2.filter((column) => column.visible && !column.command).sort((column1, column2) => column1.visibleIndex - column2.visibleIndex);
    }
    return result2;
  }
  isParentBandColumn(columnIndex, bandColumnIndex) {
    var result2 = false;
    var column = this._columns[columnIndex];
    var bandColumnsCache = this.getBandColumnsCache();
    var parentBandColumns = column && getParentBandColumns(columnIndex, bandColumnsCache.columnParentByIndex);
    if (parentBandColumns) {
      each(parentBandColumns, (_, bandColumn) => {
        if (bandColumn.index === bandColumnIndex) {
          result2 = true;
          return false;
        }
      });
    }
    return result2;
  }
  isParentColumnVisible(columnIndex) {
    var result2 = true;
    var bandColumnsCache = this.getBandColumnsCache();
    var bandColumns = columnIndex >= 0 && getParentBandColumns(columnIndex, bandColumnsCache.columnParentByIndex);
    bandColumns && each(bandColumns, (_, bandColumn) => {
      result2 = result2 && bandColumn.visible;
      return result2;
    });
    return result2;
  }
  getColumnId(column) {
    if (column.command && column.type === GROUP_COMMAND_COLUMN_NAME) {
      if (isCustomCommandColumn(this, column)) {
        return "type:".concat(column.type);
      }
      return "command:".concat(column.command);
    }
    return column.index;
  }
  getCustomizeTextByDataType(dataType) {
    return getCustomizeTextByDataType(dataType);
  }
  getHeaderContentAlignment(columnAlignment) {
    var rtlEnabled = this.option("rtlEnabled");
    if (rtlEnabled) {
      return "left" === columnAlignment ? "right" : "left";
    }
    return columnAlignment;
  }
};
var columnsControllerModule = {
  defaultOptions: () => ({
    commonColumnSettings: {
      allowFiltering: true,
      allowHiding: true,
      allowSorting: true,
      allowEditing: true,
      encodeHtml: true,
      trueText: message_default.format("dxDataGrid-trueText"),
      falseText: message_default.format("dxDataGrid-falseText")
    },
    allowColumnReordering: false,
    allowColumnResizing: false,
    columnResizingMode: "nextColumn",
    columnMinWidth: void 0,
    columnWidth: void 0,
    adaptColumnWidthByRatio: true,
    columns: void 0,
    regenerateColumnsByVisibleItems: false,
    customizeColumns: null,
    dateSerializationFormat: void 0
  }),
  controllers: {
    columns: ColumnsController
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/m_columns_controller.js
m_core_default.registerModule("columns", {
  defaultOptions: () => extend(true, {}, columnsControllerModule.defaultOptions(), {
    commonColumnSettings: {
      allowExporting: true
    }
  }),
  controllers: columnsControllerModule.controllers
});

// node_modules/devextreme/esm/core/utils/array_compare.js
var getKeyWrapper = function(item, getKey) {
  var key = getKey(item);
  if (isObject(key)) {
    try {
      return JSON.stringify(key);
    } catch (e) {
      return key;
    }
  }
  return key;
};
var getSameNewByOld = function(oldItem, newItems, newIndexByKey, getKey) {
  var key = getKeyWrapper(oldItem, getKey);
  return newItems[newIndexByKey[key]];
};
var isKeysEqual = function(oldKeys, newKeys) {
  if (oldKeys.length !== newKeys.length) {
    return false;
  }
  for (var i = 0; i < newKeys.length; i++) {
    if (oldKeys[i] !== newKeys[i]) {
      return false;
    }
  }
  return true;
};
var findChanges = function(oldItems, newItems, getKey, isItemEquals) {
  var oldIndexByKey = {};
  var newIndexByKey = {};
  var addedCount = 0;
  var removeCount = 0;
  var result2 = [];
  oldItems.forEach(function(item, index2) {
    var key2 = getKeyWrapper(item, getKey);
    oldIndexByKey[key2] = index2;
  });
  newItems.forEach(function(item, index2) {
    var key2 = getKeyWrapper(item, getKey);
    newIndexByKey[key2] = index2;
  });
  var itemCount = Math.max(oldItems.length, newItems.length);
  for (var index = 0; index < itemCount + addedCount; index++) {
    var newItem = newItems[index];
    var oldNextIndex = index - addedCount + removeCount;
    var nextOldItem = oldItems[oldNextIndex];
    var isRemoved = !newItem || nextOldItem && !getSameNewByOld(nextOldItem, newItems, newIndexByKey, getKey);
    if (isRemoved) {
      if (nextOldItem) {
        result2.push({
          type: "remove",
          key: getKey(nextOldItem),
          index,
          oldItem: nextOldItem
        });
        removeCount++;
        index--;
      }
    } else {
      var key = getKeyWrapper(newItem, getKey);
      var oldIndex = oldIndexByKey[key];
      var oldItem = oldItems[oldIndex];
      if (!oldItem) {
        addedCount++;
        result2.push({
          type: "insert",
          data: newItem,
          index
        });
      } else if (oldIndex === oldNextIndex) {
        if (!isItemEquals(oldItem, newItem)) {
          result2.push({
            type: "update",
            data: newItem,
            key: getKey(newItem),
            index,
            oldItem
          });
        }
      } else {
        return;
      }
    }
  }
  return result2;
};

// node_modules/devextreme/esm/__internal/ui/collection/m_data_controller.js
var DataControllerMock = {
  load: () => Deferred().reject(),
  loadSingle: () => Deferred().reject(),
  loadFromStore: () => Deferred().reject(),
  loadNextPage: () => Deferred().reject(),
  loadOptions: noop,
  userData: noop,
  cancel: noop,
  cancelAll: noop,
  filter: noop,
  addSearchFilter: noop,
  group: noop,
  paginate: noop,
  pageSize: noop,
  pageIndex: noop,
  resetDataSourcePageIndex: noop,
  totalCount: noop,
  isLastPage: noop,
  isLoading: noop,
  isLoaded: noop,
  searchValue: noop,
  searchOperation: noop,
  searchExpr: noop,
  select: noop,
  key: noop,
  keyOf: noop,
  store: noop,
  items: noop,
  applyMapFunction: noop,
  getDataSource: noop,
  reload: noop,
  on: noop,
  off: noop
};
var DataController = class {
  constructor(dataSource) {
    if (!dataSource) {
      return DataControllerMock;
    }
    this._dataSource = dataSource;
  }
  load() {
    return this._dataSource.load();
  }
  loadSingle(propName, propValue) {
    if (arguments.length < 2) {
      propValue = propName;
      propName = this.key();
    }
    return this._dataSource.loadSingle(propName, propValue);
  }
  loadFromStore(loadOptions) {
    return this.store().load(loadOptions);
  }
  loadNextPage() {
    this.pageIndex(1 + this.pageIndex());
    return this.load();
  }
  loadOptions() {
    return this._dataSource.loadOptions();
  }
  userData() {
    return this._dataSource._userData;
  }
  cancel(operationId) {
    this._dataSource.cancel(operationId);
  }
  cancelAll() {
    this._dataSource.cancelAll();
  }
  filter(filter) {
    return this._dataSource.filter(filter);
  }
  addSearchFilter(storeLoadOptions) {
    this._dataSource._addSearchFilter(storeLoadOptions);
  }
  group(group) {
    return this._dataSource.group(group);
  }
  paginate() {
    return this._dataSource.paginate();
  }
  pageSize() {
    return this._dataSource._pageSize;
  }
  pageIndex(pageIndex) {
    return this._dataSource.pageIndex(pageIndex);
  }
  resetDataSourcePageIndex() {
    if (this.pageIndex()) {
      this.pageIndex(0);
      this.load();
    }
  }
  totalCount() {
    return this._dataSource.totalCount();
  }
  isLastPage() {
    return this._dataSource.isLastPage() || !this._dataSource._pageSize;
  }
  isLoading() {
    return this._dataSource.isLoading();
  }
  isLoaded() {
    return this._dataSource.isLoaded();
  }
  searchValue(value2) {
    if (!arguments.length) {
      return this._dataSource.searchValue();
    }
    return this._dataSource.searchValue(value2);
  }
  searchOperation(operation) {
    return this._dataSource.searchOperation(operation);
  }
  searchExpr(expr) {
    if (!arguments.length) {
      return this._dataSource.searchExpr();
    }
    return this._dataSource.searchExpr(expr);
  }
  select() {
    return this._dataSource.select(...arguments);
  }
  key() {
    return this._dataSource.key();
  }
  keyOf(item) {
    return this.store().keyOf(item);
  }
  store() {
    return this._dataSource.store();
  }
  items() {
    return this._dataSource.items();
  }
  applyMapFunction(data17) {
    return this._dataSource._applyMapFunction(data17);
  }
  getDataSource() {
    return this._dataSource || null;
  }
  reload() {
    return this._dataSource.reload();
  }
  on(event, handler) {
    this._dataSource.on(event, handler);
  }
  off(event, handler) {
    this._dataSource.off(event, handler);
  }
};
var m_data_controller_default = DataController;

// node_modules/devextreme/esm/__internal/grids/grid_core/data_controller/m_data_helper_mixin.js
var DATA_SOURCE_OPTIONS_METHOD = "_dataSourceOptions";
var DATA_SOURCE_CHANGED_METHOD = "_dataSourceChangedHandler";
var DATA_SOURCE_LOAD_ERROR_METHOD = "_dataSourceLoadErrorHandler";
var DATA_SOURCE_LOADING_CHANGED_METHOD = "_dataSourceLoadingChangedHandler";
var DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD = "_dataSourceFromUrlLoadMode";
var SPECIFIC_DATA_SOURCE_OPTION = "_getSpecificDataSourceOption";
var NORMALIZE_DATA_SOURCE = "_normalizeDataSource";
var DataHelperMixin = (Base) => class extends Base {
  postCtor() {
    this.on("disposing", () => {
      this._disposeDataSource();
    });
  }
  _refreshDataSource() {
    this._initDataSource();
    this._loadDataSource();
  }
  _initDataSource() {
    var dataSourceOptions = SPECIFIC_DATA_SOURCE_OPTION in this ? this[SPECIFIC_DATA_SOURCE_OPTION]() : this.option("dataSource");
    var widgetDataSourceOptions;
    var dataSourceType;
    this._disposeDataSource();
    if (dataSourceOptions) {
      if (dataSourceOptions instanceof DataSource) {
        this._isSharedDataSource = true;
        this._dataSource = dataSourceOptions;
      } else {
        widgetDataSourceOptions = DATA_SOURCE_OPTIONS_METHOD in this ? this[DATA_SOURCE_OPTIONS_METHOD]() : {};
        dataSourceType = this._dataSourceType ? this._dataSourceType() : DataSource;
        dataSourceOptions = normalizeDataSourceOptions(dataSourceOptions, {
          fromUrlLoadMode: DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD in this && this[DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD]()
        });
        this._dataSource = new dataSourceType(extend(true, {}, widgetDataSourceOptions, dataSourceOptions));
      }
      if (NORMALIZE_DATA_SOURCE in this) {
        this._dataSource = this[NORMALIZE_DATA_SOURCE](this._dataSource);
      }
      this._addDataSourceHandlers();
      this._initDataController();
    }
  }
  _initDataController() {
    var _a;
    var dataController2 = null === (_a = this.option) || void 0 === _a ? void 0 : _a.call(this, "_dataController");
    var dataSource = this._dataSource;
    if (dataController2) {
      this._dataController = dataController2;
    } else {
      this._dataController = new m_data_controller_default(dataSource);
    }
  }
  _addDataSourceHandlers() {
    if (DATA_SOURCE_CHANGED_METHOD in this) {
      this._addDataSourceChangeHandler();
    }
    if (DATA_SOURCE_LOAD_ERROR_METHOD in this) {
      this._addDataSourceLoadErrorHandler();
    }
    if (DATA_SOURCE_LOADING_CHANGED_METHOD in this) {
      this._addDataSourceLoadingChangedHandler();
    }
    this._addReadyWatcher();
  }
  _addReadyWatcher() {
    this.readyWatcher = (function(isLoading) {
      this._ready && this._ready(!isLoading);
    }).bind(this);
    this._dataSource.on("loadingChanged", this.readyWatcher);
  }
  _addDataSourceChangeHandler() {
    var dataSource = this._dataSource;
    this._proxiedDataSourceChangedHandler = (function(e) {
      this[DATA_SOURCE_CHANGED_METHOD](dataSource.items(), e);
    }).bind(this);
    dataSource.on("changed", this._proxiedDataSourceChangedHandler);
  }
  _addDataSourceLoadErrorHandler() {
    this._proxiedDataSourceLoadErrorHandler = this[DATA_SOURCE_LOAD_ERROR_METHOD].bind(this);
    this._dataSource.on("loadError", this._proxiedDataSourceLoadErrorHandler);
  }
  _addDataSourceLoadingChangedHandler() {
    this._proxiedDataSourceLoadingChangedHandler = this[DATA_SOURCE_LOADING_CHANGED_METHOD].bind(this);
    this._dataSource.on("loadingChanged", this._proxiedDataSourceLoadingChangedHandler);
  }
  _loadDataSource() {
    var dataSource = this._dataSource;
    if (dataSource) {
      if (dataSource.isLoaded()) {
        this._proxiedDataSourceChangedHandler && this._proxiedDataSourceChangedHandler();
      } else {
        dataSource.load();
      }
    }
  }
  _loadSingle(key, value2) {
    key = "this" === key ? this._dataSource.key() || "this" : key;
    return this._dataSource.loadSingle(key, value2);
  }
  _isLastPage() {
    return !this._dataSource || this._dataSource.isLastPage() || !this._dataSource._pageSize;
  }
  _isDataSourceLoading() {
    return this._dataSource && this._dataSource.isLoading();
  }
  _disposeDataSource() {
    if (this._dataSource) {
      if (this._isSharedDataSource) {
        delete this._isSharedDataSource;
        this._proxiedDataSourceChangedHandler && this._dataSource.off("changed", this._proxiedDataSourceChangedHandler);
        this._proxiedDataSourceLoadErrorHandler && this._dataSource.off("loadError", this._proxiedDataSourceLoadErrorHandler);
        this._proxiedDataSourceLoadingChangedHandler && this._dataSource.off("loadingChanged", this._proxiedDataSourceLoadingChangedHandler);
        if (this._dataSource._eventsStrategy) {
          this._dataSource._eventsStrategy.off("loadingChanged", this.readyWatcher);
        }
      } else {
        this._dataSource.dispose();
      }
      delete this._dataSource;
      delete this._proxiedDataSourceChangedHandler;
      delete this._proxiedDataSourceLoadErrorHandler;
      delete this._proxiedDataSourceLoadingChangedHandler;
    }
  }
  getDataSource() {
    return this._dataSource || null;
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/data_controller/m_data_controller.js
var changePaging = function(that, optionName, value2) {
  var dataSource = that._dataSource;
  if (dataSource) {
    if (void 0 !== value2) {
      var oldValue = that._getPagingOptionValue(optionName);
      if (oldValue !== value2) {
        if ("pageSize" === optionName) {
          dataSource.pageIndex(0);
        }
        dataSource[optionName](value2);
        that._skipProcessingPagingChange = true;
        that.option("paging.".concat(optionName), value2);
        that._skipProcessingPagingChange = false;
        var pageIndex = dataSource.pageIndex();
        that._isPaging = "pageIndex" === optionName;
        return dataSource["pageIndex" === optionName ? "load" : "reload"]().done(() => {
          that._isPaging = false;
          that.pageChanged.fire(pageIndex);
        });
      }
      return Deferred().resolve().promise();
    }
    return dataSource[optionName]();
  }
  if ("pageIndex" === optionName && void 0 !== value2) {
    return Deferred().resolve().promise();
  }
  return 0;
};
var DataController2 = class extends DataHelperMixin(m_modules_default.Controller) {
  init() {
    this._items = [];
    this._cachedProcessedItems = null;
    this._columnsController = this.getController("columns");
    this._adaptiveColumnsController = this.getController("adaptiveColumns");
    this._editingController = this.getController("editing");
    this._editorFactoryController = this.getController("editorFactory");
    this._errorHandlingController = this.getController("errorHandling");
    this._filterSyncController = this.getController("filterSync");
    this._applyFilterController = this.getController("applyFilter");
    this._keyboardNavigationController = this.getController("keyboardNavigation");
    this._focusController = this.getController("focus");
    this._headerFilterController = this.getController("headerFilter");
    this._selectionController = this.getController("selection");
    this._stateStoringController = this.getController("stateStoring");
    this._validatingController = this.getController("validating");
    this._adaptiveExpandedKey = void 0;
    this._isPaging = false;
    this._currentOperationTypes = null;
    this._dataChangedHandler = (e) => {
      this._currentOperationTypes = this._dataSource.operationTypes();
      this._handleDataChanged(e);
      this._currentOperationTypes = null;
    };
    this._columnsChangedHandler = this._handleColumnsChanged.bind(this);
    this._loadingChangedHandler = this._handleLoadingChanged.bind(this);
    this._loadErrorHandler = this._handleLoadError.bind(this);
    this._customizeStoreLoadOptionsHandler = this._handleCustomizeStoreLoadOptions.bind(this);
    this._changingHandler = this._handleChanging.bind(this);
    this._dataPushedHandler = this._handleDataPushed.bind(this);
    this._columnsController.columnsChanged.add(this._columnsChangedHandler);
    this._isLoading = false;
    this._isCustomLoading = false;
    this._repaintChangesOnly = void 0;
    this._changes = [];
    this.createAction("onDataErrorOccurred");
    this.dataErrorOccurred.add((error) => this.executeAction("onDataErrorOccurred", {
      error
    }));
    this._refreshDataSource();
    this.postCtor();
  }
  _getPagingOptionValue(optionName) {
    return this._dataSource[optionName]();
  }
  callbackNames() {
    return ["changed", "loadingChanged", "dataErrorOccurred", "pageChanged", "dataSourceChanged", "pushed"];
  }
  callbackFlags(name2) {
    if ("dataErrorOccurred" === name2) {
      return {
        stopOnFalse: true
      };
    }
    return;
  }
  publicMethods() {
    return ["_disposeDataSource", "beginCustomLoading", "byKey", "clearFilter", "endCustomLoading", "filter", "getCombinedFilter", "getDataByKeys", "getDataSource", "getKeyByRowIndex", "getRowIndexByKey", "getVisibleRows", "keyOf", "pageCount", "pageIndex", "pageSize", "refresh", "repaintRows", "totalCount"];
  }
  reset() {
    this._columnsController.reset();
    this._items = [];
    this._refreshDataSource();
  }
  _handleDataSourceChange(args) {
    if (args.value === args.previousValue || this.option("columns") && Array.isArray(args.value) && Array.isArray(args.previousValue)) {
      var isValueChanged = args.value !== args.previousValue;
      if (isValueChanged) {
        var store = this.store();
        if (store) {
          store._array = args.value;
        }
      }
      if (this.needToRefreshOnDataSourceChange(args)) {
        this.refresh(this.option("repaintChangesOnly"));
      }
      return true;
    }
    return false;
  }
  needToRefreshOnDataSourceChange(args) {
    return true;
  }
  optionChanged(args) {
    var that = this;
    var dataSource;
    var changedPagingOptions;
    function handled() {
      args.handled = true;
    }
    if ("dataSource" === args.name && args.name === args.fullName && this._handleDataSourceChange(args)) {
      handled();
      return;
    }
    switch (args.name) {
      case "cacheEnabled":
      case "repaintChangesOnly":
      case "highlightChanges":
      case "loadingTimeout":
        handled();
        break;
      case "remoteOperations":
      case "keyExpr":
      case "dataSource":
      case "scrolling":
        handled();
        that.reset();
        break;
      case "paging":
        dataSource = that.dataSource();
        if (dataSource) {
          changedPagingOptions = that._setPagingOptions(dataSource);
          if (changedPagingOptions) {
            var pageIndex = dataSource.pageIndex();
            this._isPaging = changedPagingOptions.isPageIndexChanged;
            dataSource.load().done(() => {
              this._isPaging = false;
              that.pageChanged.fire(pageIndex);
            });
          }
        }
        handled();
        break;
      case "rtlEnabled":
        that.reset();
        break;
      case "columns":
        dataSource = that.dataSource();
        if (dataSource && dataSource.isLoading() && args.name === args.fullName) {
          this._useSortingGroupingFromColumns = true;
          dataSource.load();
        }
        break;
      default:
        super.optionChanged(args);
    }
  }
  isReady() {
    return !this._isLoading;
  }
  getDataSource() {
    return this._dataSource && this._dataSource._dataSource;
  }
  getCombinedFilter(returnDataField) {
    return this.combinedFilter(void 0, returnDataField);
  }
  combinedFilter(filter, returnDataField) {
    if (!this._dataSource) {
      return filter;
    }
    var combined = null !== filter && void 0 !== filter ? filter : this._dataSource.filter();
    var isColumnsTypesDefined = this._columnsController.isDataSourceApplied() || this._columnsController.isAllDataTypesDefined();
    if (isColumnsTypesDefined) {
      var additionalFilter = this._calculateAdditionalFilter();
      combined = additionalFilter ? m_utils_default.combineFilters([additionalFilter, combined]) : combined;
    }
    var isRemoteFiltering = this._dataSource.remoteOperations().filtering || returnDataField;
    combined = this._columnsController.updateFilter(combined, isRemoteFiltering);
    return combined;
  }
  waitReady() {
    if (this._updateLockCount) {
      this._readyDeferred = new Deferred();
      return this._readyDeferred;
    }
    return when();
  }
  _endUpdateCore() {
    var changes = this._changes;
    if (changes.length) {
      this._changes = [];
      var repaintChangesOnly = changes.every((change) => change.repaintChangesOnly);
      this.updateItems(1 === changes.length ? changes[0] : {
        repaintChangesOnly
      });
    }
    if (this._readyDeferred) {
      this._readyDeferred.resolve();
      this._readyDeferred = null;
    }
  }
  _handleCustomizeStoreLoadOptions(e) {
    var _a;
    var columnsController = this._columnsController;
    var dataSource = this._dataSource;
    var {
      storeLoadOptions
    } = e;
    if (e.isCustomLoading && !storeLoadOptions.isLoadingAll) {
      return;
    }
    storeLoadOptions.filter = this.combinedFilter(storeLoadOptions.filter);
    if (1 === (null === (_a = storeLoadOptions.filter) || void 0 === _a ? void 0 : _a.length) && "!" === storeLoadOptions.filter[0]) {
      e.data = [];
      e.extra = e.extra || {};
      e.extra.totalCount = 0;
    }
    if (!columnsController.isDataSourceApplied()) {
      columnsController.updateColumnDataTypes(dataSource);
    }
    this._columnsUpdating = true;
    columnsController.updateSortingGrouping(dataSource, !this._useSortingGroupingFromColumns);
    this._columnsUpdating = false;
    storeLoadOptions.sort = columnsController.getSortDataSourceParameters();
    storeLoadOptions.group = columnsController.getGroupDataSourceParameters();
    dataSource.sort(storeLoadOptions.sort);
    dataSource.group(storeLoadOptions.group);
    storeLoadOptions.sort = columnsController.getSortDataSourceParameters(!dataSource.remoteOperations().sorting);
    e.group = columnsController.getGroupDataSourceParameters(!dataSource.remoteOperations().grouping);
  }
  _handleColumnsChanged(e) {
    var that = this;
    var {
      changeTypes
    } = e;
    var {
      optionNames
    } = e;
    var filterValue;
    var filterValues;
    var filterApplied;
    if (changeTypes.sorting || changeTypes.grouping) {
      if (that._dataSource && !that._columnsUpdating) {
        that._dataSource.group(that._columnsController.getGroupDataSourceParameters());
        that._dataSource.sort(that._columnsController.getSortDataSourceParameters());
        that.reload();
      }
    } else if (changeTypes.columns) {
      filterValues = that._columnsController.columnOption(e.columnIndex, "filterValues");
      if (optionNames.filterValues || optionNames.filterType && Array.isArray(filterValues) || optionNames.filterValue || optionNames.selectedFilterOperation || optionNames.allowFiltering) {
        filterValue = that._columnsController.columnOption(e.columnIndex, "filterValue");
        if (Array.isArray(filterValues) || void 0 === e.columnIndex || isDefined(filterValue) || !optionNames.selectedFilterOperation || optionNames.filterValue) {
          that._applyFilter();
          filterApplied = true;
        }
      }
      if (!that._needApplyFilter && !m_utils_default.checkChanges(optionNames, ["width", "visibleWidth", "filterValue", "bufferedFilterValue", "selectedFilterOperation", "filterValues", "filterType"])) {
        that._columnsController.columnsChanged.add(function updateItemsHandler(change) {
          var _a;
          that._columnsController.columnsChanged.remove(updateItemsHandler);
          that.updateItems({
            repaintChangesOnly: false,
            virtualColumnsScrolling: null === (_a = null === change || void 0 === change ? void 0 : change.changeTypes) || void 0 === _a ? void 0 : _a.virtualColumnsScrolling
          });
        });
      }
      if (isDefined(optionNames.visible)) {
        var column = that._columnsController.columnOption(e.columnIndex);
        if (column && (isDefined(column.filterValue) || isDefined(column.filterValues))) {
          that._applyFilter();
          filterApplied = true;
        }
      }
    }
    if (!filterApplied && changeTypes.filtering && !this._needApplyFilter) {
      that.reload();
    }
  }
  _handleDataChanged(e) {
    var that = this;
    var dataSource = that._dataSource;
    var columnsController = that._columnsController;
    var isAsyncDataSourceApplying = false;
    this._useSortingGroupingFromColumns = false;
    if (dataSource && !that._isDataSourceApplying) {
      that._isDataSourceApplying = true;
      when(that._columnsController.applyDataSource(dataSource)).done(() => {
        if (that._isLoading) {
          that._handleLoadingChanged(false);
        }
        if (isAsyncDataSourceApplying && e && e.isDelayed) {
          e.isDelayed = false;
        }
        that._isDataSourceApplying = false;
        var needApplyFilter = that._needApplyFilter;
        that._needApplyFilter = false;
        if (needApplyFilter && !that._isAllDataTypesDefined && (additionalFilter = that._calculateAdditionalFilter(), additionalFilter && additionalFilter.length)) {
          ui_errors_default.log("W1005", that.component.NAME);
          that._applyFilter();
        } else {
          that.updateItems(e, true);
        }
        var additionalFilter;
      }).fail(() => {
        that._isDataSourceApplying = false;
      });
      if (that._isDataSourceApplying) {
        isAsyncDataSourceApplying = true;
        that._handleLoadingChanged(true);
      }
      that._needApplyFilter = !that._columnsController.isDataSourceApplied();
      that._isAllDataTypesDefined = columnsController.isAllDataTypesDefined();
    }
  }
  _handleLoadingChanged(isLoading) {
    this._isLoading = isLoading;
    this._fireLoadingChanged();
  }
  _handleLoadError(e) {
    this.dataErrorOccurred.fire(e);
  }
  _handleDataPushed(changes) {
    this.pushed.fire(changes);
  }
  fireError() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    this.dataErrorOccurred.fire(ui_errors_default.Error.apply(ui_errors_default, args));
  }
  _setPagingOptions(dataSource) {
    var pageIndex = this.option("paging.pageIndex");
    var pageSize = this.option("paging.pageSize");
    var pagingEnabled = this.option("paging.enabled");
    var scrollingMode = this.option("scrolling.mode");
    var appendMode = "infinite" === scrollingMode;
    var virtualMode = "virtual" === scrollingMode;
    var paginate = pagingEnabled || virtualMode || appendMode;
    var isPaginateChanged = false;
    var isPageSizeChanged = false;
    var isPageIndexChanged = false;
    dataSource.requireTotalCount(!appendMode);
    if (void 0 !== pagingEnabled && dataSource.paginate() !== paginate) {
      dataSource.paginate(paginate);
      isPaginateChanged = true;
    }
    if (void 0 !== pageSize && dataSource.pageSize() !== pageSize) {
      dataSource.pageSize(pageSize);
      isPageSizeChanged = true;
    }
    if (void 0 !== pageIndex && dataSource.pageIndex() !== pageIndex) {
      dataSource.pageIndex(pageIndex);
      isPageIndexChanged = true;
    }
    if (isPaginateChanged || isPageSizeChanged || isPageIndexChanged) {
      return {
        isPaginateChanged,
        isPageSizeChanged,
        isPageIndexChanged
      };
    }
    return false;
  }
  _getSpecificDataSourceOption() {
    var dataSource = this.option("dataSource");
    if (Array.isArray(dataSource)) {
      return {
        store: {
          type: "array",
          data: dataSource,
          key: this.option("keyExpr")
        }
      };
    }
    return dataSource;
  }
  _initDataSource() {
    var oldDataSource = this._dataSource;
    super._initDataSource();
    var dataSource = this._dataSource;
    this._useSortingGroupingFromColumns = true;
    this._cachedProcessedItems = null;
    if (dataSource) {
      var changedPagingOptions = this._setPagingOptions(dataSource);
      this._isPaging = null === changedPagingOptions || void 0 === changedPagingOptions ? void 0 : changedPagingOptions.isPageIndexChanged;
      this.setDataSource(dataSource);
    } else if (oldDataSource) {
      this.updateItems();
    }
  }
  _loadDataSource() {
    var that = this;
    var dataSource = that._dataSource;
    var result2 = new Deferred();
    when(this._columnsController.refresh(true)).always(() => {
      if (dataSource) {
        dataSource.load().done(function() {
          that._isPaging = false;
          result2.resolve.apply(result2, arguments);
        }).fail(result2.reject);
      } else {
        result2.resolve();
      }
    });
    return result2.promise();
  }
  _beforeProcessItems(items) {
    return items.slice(0);
  }
  getRowIndexDelta() {
    return 0;
  }
  getDataIndex(change) {
    var visibleItems = this._items;
    var lastVisibleItem = "append" === change.changeType && visibleItems.length > 0 ? visibleItems[visibleItems.length - 1] : null;
    return isDefined(null === lastVisibleItem || void 0 === lastVisibleItem ? void 0 : lastVisibleItem.dataIndex) ? lastVisibleItem.dataIndex + 1 : 0;
  }
  _processItems(items, change) {
    var that = this;
    var rowIndexDelta = that.getRowIndexDelta();
    var {
      changeType
    } = change;
    var visibleColumns = that._columnsController.getVisibleColumns(null, "loadingAll" === changeType);
    var dataIndex = this.getDataIndex(change);
    var options2 = {
      visibleColumns,
      dataIndex
    };
    var result2 = [];
    each(items, (index, item) => {
      if (isDefined(item)) {
        options2.rowIndex = index - rowIndexDelta;
        item = that._processItem(item, options2);
        result2.push(item);
      }
    });
    return result2;
  }
  _processItem(item, options2) {
    item = this._generateDataItem(item, options2);
    item = this._processDataItem(item, options2);
    item.dataIndex = options2.dataIndex++;
    return item;
  }
  _generateDataItem(data17, options2) {
    return {
      rowType: "data",
      data: data17,
      key: this.keyOf(data17)
    };
  }
  _processDataItem(dataItem, options2) {
    dataItem.values = this.generateDataValues(dataItem.data, options2.visibleColumns);
    return dataItem;
  }
  generateDataValues(data17, columns7, isModified) {
    var values = [];
    var value2;
    for (var i = 0; i < columns7.length; i++) {
      var column = columns7[i];
      value2 = isModified ? void 0 : null;
      if (!column.command) {
        if (column.calculateCellValue) {
          value2 = column.calculateCellValue(data17);
        } else if (column.dataField) {
          value2 = data17[column.dataField];
        }
      }
      values.push(value2);
    }
    return values;
  }
  _applyChange(change) {
    if ("update" === change.changeType) {
      this._applyChangeUpdate(change);
    } else if (this.items().length && change.repaintChangesOnly && "refresh" === change.changeType) {
      this._applyChangesOnly(change);
    } else if ("refresh" === change.changeType) {
      this._applyChangeFull(change);
    }
  }
  _applyChangeFull(change) {
    this._items = change.items.slice(0);
  }
  _getRowIndices(change) {
    var rowIndices = change.rowIndices.slice(0);
    var rowIndexDelta = this.getRowIndexDelta();
    rowIndices.sort((a, b) => a - b);
    for (var i = 0; i < rowIndices.length; i++) {
      var correctedRowIndex = rowIndices[i];
      if (change.allowInvisibleRowIndices) {
        correctedRowIndex += rowIndexDelta;
      }
      if (correctedRowIndex < 0) {
        rowIndices.splice(i, 1);
        i--;
      }
    }
    return rowIndices;
  }
  _applyChangeUpdate(change) {
    var that = this;
    var {
      items
    } = change;
    var rowIndices = that._getRowIndices(change);
    var rowIndexDelta = that.getRowIndexDelta();
    var repaintChangesOnly = that.option("repaintChangesOnly");
    var prevIndex = -1;
    var rowIndexCorrection = 0;
    var changeType;
    change.items = [];
    change.rowIndices = [];
    change.columnIndices = [];
    change.changeTypes = [];
    var equalItems = function(item1, item2, strict) {
      var result2 = item1 && item2 && equalByValue(item1.key, item2.key);
      if (result2 && strict) {
        result2 = item1.rowType === item2.rowType && ("detail" !== item2.rowType || item1.isEditing === item2.isEditing);
      }
      return result2;
    };
    each(rowIndices, (index, rowIndex) => {
      var columnIndices;
      rowIndex += rowIndexCorrection + rowIndexDelta;
      if (prevIndex === rowIndex) {
        return;
      }
      prevIndex = rowIndex;
      var oldItem = that._items[rowIndex];
      var oldNextItem = that._items[rowIndex + 1];
      var newItem = items[rowIndex];
      var newNextItem = items[rowIndex + 1];
      var strict = equalItems(oldItem, oldNextItem) || equalItems(newItem, newNextItem);
      if (newItem) {
        newItem.rowIndex = rowIndex;
        change.items.push(newItem);
      }
      if (oldItem && newItem && equalItems(oldItem, newItem, strict)) {
        changeType = "update";
        that._items[rowIndex] = newItem;
        if (oldItem.visible !== newItem.visible) {
          change.items.splice(-1, 1, {
            visible: newItem.visible
          });
        } else if (repaintChangesOnly && !change.isFullUpdate) {
          columnIndices = that._partialUpdateRow(oldItem, newItem, rowIndex - rowIndexDelta);
        }
      } else if (newItem && !oldItem || newNextItem && equalItems(oldItem, newNextItem, strict)) {
        changeType = "insert";
        that._items.splice(rowIndex, 0, newItem);
        rowIndexCorrection++;
      } else if (oldItem && !newItem || oldNextItem && equalItems(newItem, oldNextItem, strict)) {
        changeType = "remove";
        that._items.splice(rowIndex, 1);
        rowIndexCorrection--;
        prevIndex = -1;
      } else if (newItem) {
        changeType = "update";
        that._items[rowIndex] = newItem;
      } else {
        return;
      }
      change.rowIndices.push(rowIndex - rowIndexDelta);
      change.changeTypes.push(changeType);
      change.columnIndices.push(columnIndices);
    });
  }
  _isCellChanged(oldRow, newRow, visibleRowIndex, columnIndex, isLiveUpdate) {
    if (JSON.stringify(oldRow.values[columnIndex]) !== JSON.stringify(newRow.values[columnIndex])) {
      return true;
    }
    function isCellModified(row, columnIndex2) {
      return row.modifiedValues ? void 0 !== row.modifiedValues[columnIndex2] : false;
    }
    if (isCellModified(oldRow, columnIndex) !== isCellModified(newRow, columnIndex)) {
      return true;
    }
    return false;
  }
  _getChangedColumnIndices(oldItem, newItem, visibleRowIndex, isLiveUpdate) {
    var columnIndices;
    if (oldItem.rowType === newItem.rowType) {
      if ("group" !== newItem.rowType && "groupFooter" !== newItem.rowType) {
        columnIndices = [];
        if ("detail" !== newItem.rowType) {
          for (var columnIndex = 0; columnIndex < oldItem.values.length; columnIndex++) {
            if (this._isCellChanged(oldItem, newItem, visibleRowIndex, columnIndex, isLiveUpdate)) {
              columnIndices.push(columnIndex);
            }
          }
        }
      }
      if ("group" === newItem.rowType && oldItem.cells) {
        var isRowStateEquals = newItem.isExpanded === oldItem.isExpanded && newItem.data.isContinuation === oldItem.data.isContinuation && newItem.data.isContinuationOnNextPage === oldItem.data.isContinuationOnNextPage;
        if (isRowStateEquals) {
          columnIndices = oldItem.cells.map((cell, index) => {
            var _a;
            return "groupExpand" !== (null === (_a = cell.column) || void 0 === _a ? void 0 : _a.type) ? index : -1;
          }).filter((index) => index >= 0);
        }
      }
    }
    return columnIndices;
  }
  _partialUpdateRow(oldItem, newItem, visibleRowIndex, isLiveUpdate) {
    var changedColumnIndices = this._getChangedColumnIndices(oldItem, newItem, visibleRowIndex, isLiveUpdate);
    if ((null === changedColumnIndices || void 0 === changedColumnIndices ? void 0 : changedColumnIndices.length) && this.option("dataRowTemplate")) {
      changedColumnIndices = void 0;
    }
    if (changedColumnIndices) {
      oldItem.cells && oldItem.cells.forEach((cell, columnIndex) => {
        var isCellChanged = changedColumnIndices.indexOf(columnIndex) >= 0;
        if (!isCellChanged && cell && cell.update) {
          cell.update(newItem);
        }
      });
      newItem.update = oldItem.update;
      newItem.watch = oldItem.watch;
      newItem.cells = oldItem.cells;
      if (isLiveUpdate) {
        newItem.oldValues = oldItem.values;
      }
      oldItem.update && oldItem.update(newItem);
    }
    return changedColumnIndices;
  }
  _isItemEquals(item1, item2) {
    var _a, _b, _c, _d;
    if (JSON.stringify(item1.values) !== JSON.stringify(item2.values)) {
      return false;
    }
    if (["modified", "isNewRow", "removed", "isEditing"].some((field) => item1[field] !== item2[field])) {
      return false;
    }
    if ("group" === item1.rowType || "groupFooter" === item1.rowType) {
      var expandedMatch = item1.isExpanded === item2.isExpanded;
      var summaryCellsMatch = JSON.stringify(item1.summaryCells) === JSON.stringify(item2.summaryCells);
      var continuationMatch = (null === (_a = item1.data) || void 0 === _a ? void 0 : _a.isContinuation) === (null === (_b = item2.data) || void 0 === _b ? void 0 : _b.isContinuation) && (null === (_c = item1.data) || void 0 === _c ? void 0 : _c.isContinuationOnNextPage) === (null === (_d = item2.data) || void 0 === _d ? void 0 : _d.isContinuationOnNextPage);
      if (!expandedMatch || !summaryCellsMatch || !continuationMatch) {
        return false;
      }
    }
    return true;
  }
  _applyChangesOnly(change) {
    var _a;
    var rowIndices = [];
    var columnIndices = [];
    var changeTypes = [];
    var items = [];
    var newIndexByKey = {};
    var isLiveUpdate = null !== (_a = null === change || void 0 === change ? void 0 : change.isLiveUpdate) && void 0 !== _a ? _a : true;
    function getRowKey(row) {
      if (row) {
        return "".concat(row.rowType, ",").concat(JSON.stringify(row.key));
      }
      return;
    }
    var currentItems = this._items;
    var oldItems = currentItems.slice();
    change.items.forEach((item, index) => {
      var key = getRowKey(item);
      newIndexByKey[key] = index;
      item.rowIndex = index;
    });
    var result2 = findChanges(oldItems, change.items, getRowKey, (item1, item2) => {
      if (!this._isItemEquals(item1, item2)) {
        return false;
      }
      if (item1.cells) {
        item1.update && item1.update(item2);
        item1.cells.forEach((cell) => {
          if (cell && cell.update) {
            cell.update(item2, true);
          }
        });
      }
      return true;
    });
    if (!result2) {
      this._applyChangeFull(change);
      return;
    }
    result2.forEach((change2) => {
      switch (change2.type) {
        case "update":
          var {
            index
          } = change2;
          var newItem = change2.data;
          var {
            oldItem
          } = change2;
          var changedColumnIndices = this._partialUpdateRow(oldItem, newItem, index, isLiveUpdate);
          rowIndices.push(index);
          changeTypes.push("update");
          items.push(newItem);
          currentItems[index] = newItem;
          columnIndices.push(changedColumnIndices);
          break;
        case "insert":
          rowIndices.push(change2.index);
          changeTypes.push("insert");
          items.push(change2.data);
          columnIndices.push(void 0);
          currentItems.splice(change2.index, 0, change2.data);
          break;
        case "remove":
          rowIndices.push(change2.index);
          changeTypes.push("remove");
          currentItems.splice(change2.index, 1);
          items.push(change2.oldItem);
          columnIndices.push(void 0);
      }
    });
    change.repaintChangesOnly = true;
    change.changeType = "update";
    change.rowIndices = rowIndices;
    change.columnIndices = columnIndices;
    change.changeTypes = changeTypes;
    change.items = items;
    if (oldItems.length) {
      change.isLiveUpdate = true;
    }
    this._correctRowIndices((rowIndex) => {
      var oldRowIndexOffset = this._rowIndexOffset || 0;
      var rowIndexOffset = this.getRowIndexOffset();
      var oldItem = oldItems[rowIndex - oldRowIndexOffset];
      var key = getRowKey(oldItem);
      var newVisibleRowIndex = newIndexByKey[key];
      return newVisibleRowIndex >= 0 ? newVisibleRowIndex + rowIndexOffset - rowIndex : 0;
    });
  }
  _correctRowIndices(rowIndex) {
  }
  _afterProcessItems(items, change) {
    return items;
  }
  _updateItemsCore(change) {
    var items;
    var dataSource = this._dataSource;
    var changeType = change.changeType || "refresh";
    change.changeType = changeType;
    if (dataSource) {
      var cachedProcessedItems = this._cachedProcessedItems;
      if (change.useProcessedItemsCache && cachedProcessedItems) {
        items = cachedProcessedItems;
      } else {
        items = change.items || dataSource.items();
        items = this._beforeProcessItems(items);
        items = this._processItems(items, change);
        this._cachedProcessedItems = items;
      }
      items = this._afterProcessItems(items, change);
      change.items = items;
      var oldItems = this._items.length === items.length && this._items;
      this._applyChange(change);
      var rowIndexDelta = this.getRowIndexDelta();
      each(this._items, (index, item) => {
        var _a;
        item.rowIndex = index - rowIndexDelta;
        if (oldItems) {
          item.cells = null !== (_a = oldItems[index].cells) && void 0 !== _a ? _a : [];
        }
        var newItem = items[index];
        if (newItem) {
          item.loadIndex = newItem.loadIndex;
        }
      });
      this._rowIndexOffset = this.getRowIndexOffset();
    } else {
      this._items = [];
    }
  }
  _handleChanging(e) {
    var rows = this.getVisibleRows();
    var dataSource = this.dataSource();
    if (dataSource) {
      e.changes.forEach((change) => {
        if ("insert" === change.type && change.index >= 0) {
          var dataIndex = 0;
          for (var i = 0; i < change.index; i++) {
            var row = rows[i];
            if (row && ("data" === row.rowType || "group" === row.rowType)) {
              dataIndex++;
            }
          }
          change.index = dataIndex;
        }
      });
    }
  }
  updateItems(change, isDataChanged) {
    var _a;
    change = change || {};
    if (void 0 !== this._repaintChangesOnly) {
      change.repaintChangesOnly = null !== (_a = change.repaintChangesOnly) && void 0 !== _a ? _a : this._repaintChangesOnly;
      change.needUpdateDimensions = change.needUpdateDimensions || this._needUpdateDimensions;
    } else if (change.changes) {
      change.repaintChangesOnly = this.option("repaintChangesOnly");
    } else if (isDataChanged) {
      var operationTypes = this.dataSource().operationTypes();
      change.repaintChangesOnly = operationTypes && !operationTypes.grouping && !operationTypes.filtering && this.option("repaintChangesOnly");
      change.isDataChanged = true;
      if (operationTypes && (operationTypes.reload || operationTypes.paging || operationTypes.groupExpanding)) {
        change.needUpdateDimensions = true;
      }
    }
    if (this._updateLockCount && !change.cancel) {
      this._changes.push(change);
      return;
    }
    this._updateItemsCore(change);
    if (change.cancel) {
      return;
    }
    this._fireChanged(change);
  }
  loadingOperationTypes() {
    var dataSource = this.dataSource();
    return dataSource && dataSource.loadingOperationTypes() || {};
  }
  _fireChanged(change) {
    if (this._currentOperationTypes) {
      change.operationTypes = this._currentOperationTypes;
      this._currentOperationTypes = null;
    }
    deferRender(() => {
      this.changed.fire(change);
    });
  }
  isLoading() {
    return this._isLoading || this._isCustomLoading;
  }
  _fireLoadingChanged() {
    this.loadingChanged.fire(this.isLoading(), this._loadingText);
  }
  _calculateAdditionalFilter() {
    return null;
  }
  _applyFilter() {
    var dataSource = this._dataSource;
    if (dataSource) {
      dataSource.pageIndex(0);
      this._isFilterApplying = true;
      return this.reload().done(() => {
        if (this._isFilterApplying) {
          this.pageChanged.fire();
        }
      });
    }
    return new Deferred().resolve();
  }
  resetFilterApplying() {
    this._isFilterApplying = false;
  }
  filter(filterExpr) {
    var dataSource = this._dataSource;
    var filter = dataSource && dataSource.filter();
    if (0 === arguments.length) {
      return filter;
    }
    filterExpr = arguments.length > 1 ? Array.prototype.slice.call(arguments, 0) : filterExpr;
    if (m_utils_default.equalFilterParameters(filter, filterExpr)) {
      return;
    }
    if (dataSource) {
      dataSource.filter(filterExpr);
    }
    this._applyFilter();
  }
  clearFilter(filterName) {
    var columnsController = this._columnsController;
    var clearColumnOption = function(optionName) {
      var columnCount = columnsController.columnCount();
      for (var index = 0; index < columnCount; index++) {
        columnsController.columnOption(index, optionName, void 0);
      }
    };
    this.component.beginUpdate();
    if (arguments.length > 0) {
      switch (filterName) {
        case "dataSource":
          this.filter(null);
          break;
        case "search":
          this.searchByText("");
          break;
        case "header":
          clearColumnOption("filterValues");
          break;
        case "row":
          clearColumnOption("filterValue");
      }
    } else {
      this.filter(null);
      this.searchByText("");
      clearColumnOption("filterValue");
      clearColumnOption("bufferedFilterValue");
      clearColumnOption("filterValues");
    }
    this.component.endUpdate();
  }
  _fireDataSourceChanged() {
    var that = this;
    that.changed.add(function changedHandler() {
      that.changed.remove(changedHandler);
      that.dataSourceChanged.fire();
    });
  }
  _getDataSourceAdapter() {
  }
  _createDataSourceAdapterCore(dataSource, remoteOperations) {
    var dataSourceAdapterProvider = this._getDataSourceAdapter();
    var dataSourceAdapter = dataSourceAdapterProvider.create(this.component);
    dataSourceAdapter.init(dataSource, remoteOperations);
    return dataSourceAdapter;
  }
  isLocalStore() {
    var store = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.store();
    return store instanceof array_store_default;
  }
  isCustomStore(store) {
    store = store || this.store();
    return store instanceof custom_store_default;
  }
  _createDataSourceAdapter(dataSource) {
    var remoteOperations = this.option("remoteOperations");
    var store = dataSource.store();
    var enabledRemoteOperations = {
      filtering: true,
      sorting: true,
      paging: true,
      grouping: true,
      summary: true
    };
    if (isObject(remoteOperations) && remoteOperations.groupPaging) {
      remoteOperations = extend({}, enabledRemoteOperations, remoteOperations);
    }
    if ("auto" === remoteOperations) {
      remoteOperations = this.isLocalStore(store) || this.isCustomStore(store) ? {} : {
        filtering: true,
        sorting: true,
        paging: true
      };
    }
    if (true === remoteOperations) {
      remoteOperations = enabledRemoteOperations;
    }
    return this._createDataSourceAdapterCore(dataSource, remoteOperations);
  }
  setDataSource(dataSource) {
    var oldDataSource = this._dataSource;
    if (!dataSource && oldDataSource) {
      oldDataSource.cancelAll();
      oldDataSource.changed.remove(this._dataChangedHandler);
      oldDataSource.loadingChanged.remove(this._loadingChangedHandler);
      oldDataSource.loadError.remove(this._loadErrorHandler);
      oldDataSource.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler);
      oldDataSource.changing.remove(this._changingHandler);
      oldDataSource.pushed.remove(this._dataPushedHandler);
      oldDataSource.dispose(this._isSharedDataSource);
    }
    if (dataSource) {
      dataSource = this._createDataSourceAdapter(dataSource);
    }
    this._dataSource = dataSource;
    if (dataSource) {
      this._fireDataSourceChanged();
      this._isLoading = !dataSource.isLoaded();
      this._needApplyFilter = true;
      this._isAllDataTypesDefined = this._columnsController.isAllDataTypesDefined();
      dataSource.changed.add(this._dataChangedHandler);
      dataSource.loadingChanged.add(this._loadingChangedHandler);
      dataSource.loadError.add(this._loadErrorHandler);
      dataSource.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler);
      dataSource.changing.add(this._changingHandler);
      dataSource.pushed.add(this._dataPushedHandler);
    }
  }
  items(byLoaded) {
    return this._items;
  }
  isEmpty() {
    return !this.items().length;
  }
  pageCount() {
    return this._dataSource ? this._dataSource.pageCount() : 1;
  }
  dataSource() {
    return this._dataSource;
  }
  store() {
    var dataSource = this._dataSource;
    return dataSource && dataSource.store();
  }
  loadAll(data17) {
    var skipFilter = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false;
    var that = this;
    var d = new Deferred();
    var dataSource = that._dataSource;
    if (dataSource) {
      if (data17) {
        var options2 = {
          data: data17,
          isCustomLoading: true,
          storeLoadOptions: {
            isLoadingAll: true
          },
          loadOptions: {
            filter: skipFilter ? null : that.getCombinedFilter(),
            group: dataSource.group(),
            sort: dataSource.sort()
          }
        };
        dataSource._handleDataLoaded(options2);
        when(options2.data).done((data18) => {
          var _a;
          data18 = that._beforeProcessItems(data18);
          d.resolve(that._processItems(data18, {
            changeType: "loadingAll"
          }), null === (_a = options2.extra) || void 0 === _a ? void 0 : _a.summary);
        }).fail(d.reject);
      } else if (!dataSource.isLoading()) {
        var loadOptions = extend({}, dataSource.loadOptions(), {
          isLoadingAll: true,
          requireTotalCount: false
        });
        dataSource.load(loadOptions).done((items, extra) => {
          items = that._beforeProcessItems(items);
          items = that._processItems(items, {
            changeType: "loadingAll"
          });
          d.resolve(items, extra && extra.summary);
        }).fail(d.reject);
      } else {
        d.reject();
      }
    } else {
      d.resolve([]);
    }
    return d;
  }
  getKeyByRowIndex(rowIndex, byLoaded) {
    var item = this.items(byLoaded)[rowIndex];
    if (item) {
      return item.key;
    }
  }
  getRowIndexByKey(key, byLoaded) {
    return m_utils_default.getIndexByKey(key, this.items(byLoaded));
  }
  keyOf(data17) {
    var store = this.store();
    if (store) {
      return store.keyOf(data17);
    }
  }
  byKey(key) {
    var store = this.store();
    var rowIndex = this.getRowIndexByKey(key);
    var result2;
    if (!store) {
      return;
    }
    if (rowIndex >= 0) {
      result2 = new Deferred().resolve(this.items()[rowIndex].data);
    }
    return result2 || store.byKey(key);
  }
  key() {
    var store = this.store();
    if (store) {
      return store.key();
    }
  }
  getRowIndexOffset(byLoadedRows) {
    return 0;
  }
  getDataByKeys(rowKeys) {
    var that = this;
    var result2 = new Deferred();
    var deferreds = [];
    var data17 = [];
    each(rowKeys, (index, key) => {
      deferreds.push(that.byKey(key).done((keyData) => {
        data17[index] = keyData;
      }));
    });
    when.apply(renderer_default, deferreds).always(() => {
      result2.resolve(data17);
    });
    return result2;
  }
  pageIndex(value2) {
    return changePaging(this, "pageIndex", value2);
  }
  pageSize(value2) {
    return changePaging(this, "pageSize", value2);
  }
  beginCustomLoading(messageText) {
    this._isCustomLoading = true;
    this._loadingText = messageText || "";
    this._fireLoadingChanged();
  }
  endCustomLoading() {
    this._isCustomLoading = false;
    this._loadingText = void 0;
    this._fireLoadingChanged();
  }
  refresh(options2) {
    if (true === options2) {
      options2 = {
        reload: true,
        changesOnly: true
      };
    } else if (!options2) {
      options2 = {
        lookup: true,
        selection: true,
        reload: true
      };
    }
    var that = this;
    var dataSource = that.getDataSource();
    var {
      changesOnly
    } = options2;
    var d = new Deferred();
    var customizeLoadResult = function() {
      that._repaintChangesOnly = !!changesOnly;
    };
    when(!options2.lookup || that._columnsController.refresh()).always(() => {
      if (options2.load || options2.reload) {
        dataSource && dataSource.on("customizeLoadResult", customizeLoadResult);
        when(that.reload(options2.reload, changesOnly)).always(() => {
          dataSource && dataSource.off("customizeLoadResult", customizeLoadResult);
          that._repaintChangesOnly = void 0;
        }).done(d.resolve).fail(d.reject);
      } else {
        that.updateItems({
          repaintChangesOnly: options2.changesOnly
        });
        d.resolve();
      }
    });
    return d.promise();
  }
  getVisibleRows() {
    return this.items();
  }
  _disposeDataSource() {
    if (this._dataSource && this._dataSource._eventsStrategy) {
      this._dataSource._eventsStrategy.off("loadingChanged", this.readyWatcher);
    }
    this.setDataSource(null);
  }
  dispose() {
    this._disposeDataSource();
    super.dispose();
  }
  repaintRows(rowIndexes, changesOnly) {
    rowIndexes = Array.isArray(rowIndexes) ? rowIndexes : [rowIndexes];
    if (rowIndexes.length > 1 || isDefined(rowIndexes[0])) {
      this.updateItems({
        changeType: "update",
        rowIndices: rowIndexes,
        isFullUpdate: !changesOnly
      });
    }
  }
  skipProcessingPagingChange(fullName) {
    return this._skipProcessingPagingChange && ("paging.pageIndex" === fullName || "paging.pageSize" === fullName);
  }
  getUserState() {
    return {
      searchText: this.option("searchPanel.text"),
      pageIndex: this.pageIndex(),
      pageSize: this.pageSize()
    };
  }
  getCachedStoreData() {
    return this._dataSource && this._dataSource.getCachedStoreData();
  }
  isLastPageLoaded() {
    var pageIndex = this.pageIndex();
    var pageCount = this.pageCount();
    return pageIndex === pageCount - 1;
  }
  load() {
    var _a;
    return null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.load();
  }
  reload(reload, changesOnly) {
    var _a;
    return null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.reload(reload, changesOnly);
  }
  push() {
    var _a;
    return null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.push(...arguments);
  }
  itemsCount() {
    var _a;
    return this._dataSource ? null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.itemsCount() : 0;
  }
  totalItemsCount() {
    var _a;
    return this._dataSource ? null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.totalItemsCount() : 0;
  }
  hasKnownLastPage() {
    var _a;
    return this._dataSource ? null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.hasKnownLastPage() : true;
  }
  isLoaded() {
    var _a;
    return this._dataSource ? null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.isLoaded() : true;
  }
  totalCount() {
    var _a;
    return this._dataSource ? null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.totalCount() : 0;
  }
  hasLoadOperation() {
    var _a, _b;
    var operationTypes = null !== (_b = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.operationTypes()) && void 0 !== _b ? _b : {};
    return Object.keys(operationTypes).some((type2) => operationTypes[type2]);
  }
};
var dataControllerModule = {
  defaultOptions: () => ({
    loadingTimeout: 0,
    dataSource: null,
    cacheEnabled: true,
    repaintChangesOnly: false,
    highlightChanges: false,
    onDataErrorOccurred: null,
    remoteOperations: "auto",
    paging: {
      enabled: true,
      pageSize: void 0,
      pageIndex: void 0
    }
  }),
  controllers: {
    data: DataController2
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/data_source_adapter/m_data_source_adapter_utils.js
var cloneItems = function cloneItems2(items, groupCount) {
  if (items) {
    items = items.slice(0);
    if (groupCount) {
      for (var i = 0; i < items.length; i++) {
        items[i] = extend({
          key: items[i].key
        }, items[i]);
        items[i].items = cloneItems2(items[i].items, groupCount - 1);
      }
    }
  }
  return items;
};
var calculateOperationTypes = function(loadOptions, lastLoadOptions, isFullReload) {
  var operationTypes = {
    reload: true,
    fullReload: true
  };
  if (lastLoadOptions) {
    operationTypes = {
      sorting: !m_utils_default.equalSortParameters(loadOptions.sort, lastLoadOptions.sort),
      grouping: !m_utils_default.equalSortParameters(loadOptions.group, lastLoadOptions.group, true),
      groupExpanding: !m_utils_default.equalSortParameters(loadOptions.group, lastLoadOptions.group) || lastLoadOptions.groupExpand,
      filtering: !m_utils_default.equalFilterParameters(loadOptions.filter, lastLoadOptions.filter),
      pageIndex: loadOptions.pageIndex !== lastLoadOptions.pageIndex,
      skip: loadOptions.skip !== lastLoadOptions.skip,
      take: loadOptions.take !== lastLoadOptions.take,
      pageSize: loadOptions.pageSize !== lastLoadOptions.pageSize,
      fullReload: isFullReload,
      reload: false,
      paging: false
    };
    operationTypes.reload = isFullReload || operationTypes.sorting || operationTypes.grouping || operationTypes.filtering;
    operationTypes.paging = operationTypes.pageIndex || operationTypes.pageSize || operationTypes.take;
  }
  return operationTypes;
};
var executeTask = function(action, timeout) {
  if (isDefined(timeout)) {
    executeAsync(action, timeout);
  } else {
    action();
  }
};
var createEmptyCachedData = function() {
  return {
    items: {}
  };
};
var getPageDataFromCache = function(options2, updatePaging) {
  var groupCount = m_utils_default.normalizeSortingInfo(options2.group || options2.storeLoadOptions.group || options2.loadOptions.group).length;
  var items = [];
  if (fillItemsFromCache(items, options2, groupCount)) {
    return items;
  }
  if (updatePaging) {
    updatePagingOptionsByCache(items, options2, groupCount);
  }
};
var fillItemsFromCache = function(items, options2, groupCount, fromEnd) {
  var _a, _b, _c, _d, _e;
  var {
    storeLoadOptions
  } = options2;
  var take = null !== (_b = null !== (_a = options2.take) && void 0 !== _a ? _a : storeLoadOptions.take) && void 0 !== _b ? _b : 0;
  var cachedItems = null === (_c = options2.cachedData) || void 0 === _c ? void 0 : _c.items;
  if (take && cachedItems) {
    var skip = null !== (_e = null !== (_d = options2.skip) && void 0 !== _d ? _d : storeLoadOptions.skip) && void 0 !== _e ? _e : 0;
    for (var i = 0; i < take; i += 1) {
      var localIndex = fromEnd ? take - 1 - i : i;
      var cacheItemIndex = localIndex + skip;
      var cacheItem = cachedItems[cacheItemIndex];
      if (void 0 === cacheItem && cacheItemIndex in cachedItems) {
        return true;
      }
      var item = getItemFromCache(options2, cacheItem, groupCount, localIndex, take);
      if (item) {
        items.push(item);
      } else {
        return false;
      }
    }
    return true;
  }
  return false;
};
var getItemFromCache = function(options2, cacheItem, groupCount, index, take) {
  if (groupCount && cacheItem) {
    var skips = 0 === index && options2.skips || [];
    var takes = index === take - 1 && options2.takes || [];
    return getGroupItemFromCache(cacheItem, groupCount, skips, takes);
  }
  return cacheItem;
};
var getGroupItemFromCache = function getGroupItemFromCache2(cacheItem, groupCount, skips, takes) {
  if (groupCount && cacheItem) {
    var result2 = _extends({}, cacheItem);
    var skip = skips[0] || 0;
    var take = takes[0];
    var {
      items
    } = cacheItem;
    if (items) {
      if (void 0 === take && !items[skip]) {
        return;
      }
      result2.items = [];
      if (skips.length) {
        result2.isContinuation = true;
      }
      if (take) {
        result2.isContinuationOnNextPage = cacheItem.count > take;
      }
      for (var i = 0; void 0 === take ? items[i + skip] : i < take; i += 1) {
        var childCacheItem = items[i + skip];
        var isLast = i + 1 === take;
        var item = getGroupItemFromCache2(childCacheItem, groupCount - 1, 0 === i ? skips.slice(1) : [], isLast ? takes.slice(1) : []);
        if (void 0 !== item) {
          result2.items.push(item);
        } else {
          return;
        }
      }
    }
    return result2;
  }
  return cacheItem;
};
var updatePagingOptionsByCache = function(cacheItemsFromBegin, options2, groupCount) {
  var _a, _b;
  var cacheItemBeginCount = cacheItemsFromBegin.length;
  var {
    storeLoadOptions
  } = options2;
  if (void 0 !== storeLoadOptions.skip && storeLoadOptions.take && !groupCount) {
    var cacheItemsFromEnd = [];
    fillItemsFromCache(cacheItemsFromEnd, options2, groupCount, true);
    var cacheItemEndCount = cacheItemsFromEnd.length;
    if (cacheItemBeginCount || cacheItemEndCount) {
      options2.skip = null !== (_a = options2.skip) && void 0 !== _a ? _a : storeLoadOptions.skip;
      options2.take = null !== (_b = options2.take) && void 0 !== _b ? _b : storeLoadOptions.take;
    }
    if (cacheItemBeginCount) {
      storeLoadOptions.skip += cacheItemBeginCount;
      storeLoadOptions.take -= cacheItemBeginCount;
      options2.cachedDataPartBegin = cacheItemsFromBegin;
    }
    if (cacheItemEndCount) {
      storeLoadOptions.take -= cacheItemEndCount;
      options2.cachedDataPartEnd = cacheItemsFromEnd.reverse();
    }
  }
};
var setPageDataToCache = function(options2, data17, groupCount) {
  var _a, _b, _c, _d;
  var {
    storeLoadOptions
  } = options2;
  var skip = null !== (_b = null !== (_a = options2.skip) && void 0 !== _a ? _a : storeLoadOptions.skip) && void 0 !== _b ? _b : 0;
  var take = null !== (_d = null !== (_c = options2.take) && void 0 !== _c ? _c : storeLoadOptions.take) && void 0 !== _d ? _d : 0;
  for (var i = 0; i < take; i += 1) {
    var globalIndex = i + skip;
    var cacheItems = options2.cachedData.items;
    var skips = 0 === i && options2.skips || [];
    cacheItems[globalIndex] = getCacheItem(cacheItems[globalIndex], data17[i], groupCount, skips);
  }
};
var getCacheItem = function getCacheItem2(cacheItem, loadedItem, groupCount, skips) {
  if (groupCount && loadedItem) {
    var result2 = _extends({}, loadedItem);
    delete result2.isContinuation;
    delete result2.isContinuationOnNextPage;
    var skip = skips[0] || 0;
    if (loadedItem.items) {
      result2.items = (null === cacheItem || void 0 === cacheItem ? void 0 : cacheItem.items) || {};
      loadedItem.items.forEach((item, index) => {
        var globalIndex = index + skip;
        var childSkips = 0 === index ? skips.slice(1) : [];
        result2.items[globalIndex] = getCacheItem2(result2.items[globalIndex], item, groupCount - 1, childSkips);
      });
    }
    return result2;
  }
  return loadedItem;
};

// node_modules/devextreme/esm/__internal/grids/grid_core/data_source_adapter/m_data_source_adapter.js
var DataSourceAdapter = class extends m_modules_default.Controller {
  init(dataSource, remoteOperations) {
    var that = this;
    that._dataSource = dataSource;
    that._remoteOperations = remoteOperations || {};
    that._isLastPage = !dataSource.isLastPage();
    that._hasLastPage = false;
    that._currentTotalCount = 0;
    that._cachedData = createEmptyCachedData();
    that._lastOperationTypes = {};
    that._eventsStrategy = dataSource._eventsStrategy;
    that._totalCountCorrection = 0;
    that._isLoadingAll = false;
    that.changed = callbacks_default();
    that.loadingChanged = callbacks_default();
    that.loadError = callbacks_default();
    that.customizeStoreLoadOptions = callbacks_default();
    that.changing = callbacks_default();
    that.pushed = callbacks_default();
    that._dataChangedHandler = that._handleDataChanged.bind(that);
    that._customizeStoreLoadOptionsHandler = that._handleCustomizeStoreLoadOptions.bind(that);
    that._dataLoadedHandler = that._handleDataLoaded.bind(that);
    that._loadingChangedHandler = that._handleLoadingChanged.bind(that);
    that._loadErrorHandler = that._handleLoadError.bind(that);
    that._pushHandler = that._handlePush.bind(that);
    that._changingHandler = that._handleChanging.bind(that);
    dataSource.on("changed", that._dataChangedHandler);
    dataSource.on("customizeStoreLoadOptions", that._customizeStoreLoadOptionsHandler);
    dataSource.on("customizeLoadResult", that._dataLoadedHandler);
    dataSource.on("loadingChanged", that._loadingChangedHandler);
    dataSource.on("loadError", that._loadErrorHandler);
    dataSource.on("changing", that._changingHandler);
    dataSource.store().on("beforePush", that._pushHandler);
    each(dataSource, (memberName, member) => {
      if (!that[memberName] && isFunction(member)) {
        that[memberName] = function() {
          return this._dataSource[memberName].apply(this._dataSource, arguments);
        };
      }
    });
  }
  dispose(isSharedDataSource) {
    var dataSource = this._dataSource;
    var store = dataSource.store();
    dataSource.off("changed", this._dataChangedHandler);
    dataSource.off("customizeStoreLoadOptions", this._customizeStoreLoadOptionsHandler);
    dataSource.off("customizeLoadResult", this._dataLoadedHandler);
    dataSource.off("loadingChanged", this._loadingChangedHandler);
    dataSource.off("loadError", this._loadErrorHandler);
    dataSource.off("changing", this._changingHandler);
    store && store.off("beforePush", this._pushHandler);
    if (!isSharedDataSource) {
      dataSource.dispose();
    }
  }
  remoteOperations() {
    return this._remoteOperations;
  }
  refresh(options2, operationTypes) {
    var dataSource = this._dataSource;
    if (operationTypes.reload) {
      this.resetCurrentTotalCount();
      this._isLastPage = !dataSource.paginate();
      this._hasLastPage = this._isLastPage;
    }
  }
  resetCurrentTotalCount() {
    this._currentTotalCount = 0;
    this._totalCountCorrection = 0;
  }
  resetCache() {
    this._cachedStoreData = void 0;
    this._cachedPagingData = void 0;
  }
  resetPagesCache(isLiveUpdate) {
    this._cachedData = createEmptyCachedData();
  }
  _needClearStoreDataCache() {
    var remoteOperations = this.remoteOperations();
    var operationTypes = calculateOperationTypes(this._lastLoadOptions || {}, {});
    var isLocalOperations = Object.keys(remoteOperations).every((operationName) => !operationTypes[operationName] || !remoteOperations[operationName]);
    return !isLocalOperations;
  }
  push(changes, fromStore) {
    var store = this.store();
    if (this._needClearStoreDataCache()) {
      this._cachedStoreData = void 0;
    }
    this._cachedPagingData = void 0;
    this.resetPagesCache(true);
    if (this._cachedStoreData) {
      applyBatch({
        keyInfo: store,
        data: this._cachedStoreData,
        changes
      });
    }
    if (!fromStore) {
      this._applyBatch(changes);
    }
    this.pushed.fire(changes);
  }
  getDataIndexGetter() {
    if (!this._dataIndexGetter) {
      var indexByKey2;
      var storeData;
      var store = this.store();
      this._dataIndexGetter = (data17) => {
        var isCacheUpdated = storeData && storeData !== this._cachedStoreData;
        if (!indexByKey2 || isCacheUpdated) {
          storeData = this._cachedStoreData || [];
          indexByKey2 = {};
          for (var i = 0; i < storeData.length; i++) {
            indexByKey2[getKeyHash(store.keyOf(storeData[i]))] = i;
          }
        }
        return indexByKey2[getKeyHash(store.keyOf(data17))];
      };
    }
    return this._dataIndexGetter;
  }
  _getKeyInfo() {
    return this.store();
  }
  _needToCopyDataObject() {
    return true;
  }
  _applyBatch(changes, fromStore) {
    var keyInfo = this._getKeyInfo();
    var dataSource = this._dataSource;
    var groupCount = m_utils_default.normalizeSortingInfo(this.group()).length;
    var isReshapeMode = "reshape" === this.option("editing.refreshMode");
    var isVirtualMode3 = "virtual" === this.option("scrolling.mode");
    changes = changes.filter((change) => !dataSource.paginate() || "insert" !== change.type || void 0 !== change.index);
    var getItemCount = () => groupCount ? this.itemsCount() : this.items().length;
    var oldItemCount = getItemCount();
    applyBatch({
      keyInfo,
      data: this._items,
      changes,
      groupCount,
      useInsertIndex: true,
      skipCopying: !this._needToCopyDataObject()
    });
    applyBatch({
      keyInfo,
      data: dataSource.items(),
      changes,
      groupCount,
      useInsertIndex: true,
      skipCopying: !this._needToCopyDataObject()
    });
    var needUpdateTotalCountCorrection = this._currentTotalCount > 0 || (fromStore || !isReshapeMode) && isVirtualMode3;
    if (needUpdateTotalCountCorrection) {
      this._totalCountCorrection += getItemCount() - oldItemCount;
    }
    changes.splice(0, changes.length);
  }
  _handlePush(_ref) {
    var {
      changes
    } = _ref;
    this.push(changes, true);
  }
  _handleChanging(e) {
    this.changing.fire(e);
    this._applyBatch(e.changes, true);
  }
  _needCleanCacheByOperation(operationType, remoteOperations) {
    var operationTypesByOrder = ["filtering", "sorting", "paging"];
    var operationTypeIndex = operationTypesByOrder.indexOf(operationType);
    var currentOperationTypes = operationTypeIndex >= 0 ? operationTypesByOrder.slice(operationTypeIndex) : [operationType];
    return currentOperationTypes.some((operationType2) => remoteOperations[operationType2]);
  }
  _customizeRemoteOperations(options2, operationTypes) {
    var cachedStoreData = this._cachedStoreData;
    var cachedPagingData = this._cachedPagingData;
    var cachedData = this._cachedData;
    if (options2.storeLoadOptions.filter && !options2.remoteOperations.filtering || options2.storeLoadOptions.sort && !options2.remoteOperations.sorting) {
      options2.remoteOperations = {
        filtering: options2.remoteOperations.filtering,
        summary: options2.remoteOperations.summary
      };
    }
    if (operationTypes.fullReload) {
      cachedStoreData = void 0;
      cachedPagingData = void 0;
      cachedData = createEmptyCachedData();
    } else {
      if (operationTypes.reload) {
        cachedPagingData = void 0;
        cachedData = createEmptyCachedData();
      } else if (operationTypes.groupExpanding) {
        cachedData = createEmptyCachedData();
      }
      each(operationTypes, (operationType, value2) => {
        if (value2 && this._needCleanCacheByOperation(operationType, options2.remoteOperations)) {
          cachedStoreData = void 0;
          cachedPagingData = void 0;
        }
      });
    }
    if (cachedPagingData) {
      options2.remoteOperations.paging = false;
    }
    options2.cachedStoreData = cachedStoreData;
    options2.cachedPagingData = cachedPagingData;
    options2.cachedData = cachedData;
    if (!options2.isCustomLoading) {
      this._cachedStoreData = cachedStoreData;
      this._cachedPagingData = cachedPagingData;
      this._cachedData = cachedData;
    }
  }
  _handleCustomizeStoreLoadOptions(options2) {
    var _a;
    this._handleDataLoading(options2);
    if (!(0 === (null === (_a = options2.data) || void 0 === _a ? void 0 : _a.length))) {
      options2.data = getPageDataFromCache(options2, true) || options2.cachedStoreData;
    }
  }
  _handleDataLoading(options2) {
    var dataSource = this._dataSource;
    var lastLoadOptions = this._lastLoadOptions;
    this.customizeStoreLoadOptions.fire(options2);
    options2.delay = this.option("loadingTimeout");
    options2.originalStoreLoadOptions = options2.storeLoadOptions;
    options2.remoteOperations = extend({}, this.remoteOperations());
    var isFullReload = !this.isLoaded() && !this._isRefreshing;
    if (this.option("integrationOptions.renderedOnServer") && !this.isLoaded()) {
      options2.delay = void 0;
    }
    var loadOptions = extend({
      pageIndex: this.pageIndex(),
      pageSize: this.pageSize()
    }, options2.storeLoadOptions);
    var operationTypes = calculateOperationTypes(loadOptions, lastLoadOptions, isFullReload);
    this._customizeRemoteOperations(options2, operationTypes);
    if (!options2.isCustomLoading) {
      var isRefreshing = this._isRefreshing;
      options2.pageIndex = dataSource.pageIndex();
      options2.lastLoadOptions = loadOptions;
      options2.operationTypes = operationTypes;
      this._loadingOperationTypes = operationTypes;
      this._isRefreshing = true;
      when(isRefreshing || this._isRefreshed || this.refresh(options2, operationTypes)).done(() => {
        if (this._lastOperationId === options2.operationId) {
          this._isRefreshed = true;
          this.load().always(() => {
            this._isRefreshed = false;
          });
        }
      }).fail(() => {
        dataSource.cancel(options2.operationId);
      }).always(() => {
        this._isRefreshing = false;
      });
      dataSource.cancel(this._lastOperationId);
      this._lastOperationId = options2.operationId;
      if (this._isRefreshing) {
        dataSource.cancel(this._lastOperationId);
      }
    }
    this._handleDataLoadingCore(options2);
  }
  _handleDataLoadingCore(options2) {
    var {
      remoteOperations
    } = options2;
    options2.loadOptions = {};
    var cachedExtra = options2.cachedData.extra;
    var localLoadOptionNames = {
      filter: !remoteOperations.filtering,
      sort: !remoteOperations.sorting,
      group: !remoteOperations.grouping,
      summary: !remoteOperations.summary,
      skip: !remoteOperations.paging,
      take: !remoteOperations.paging,
      requireTotalCount: cachedExtra && "totalCount" in cachedExtra || !remoteOperations.paging,
      langParams: !remoteOperations.filtering || !remoteOperations.sorting
    };
    each(options2.storeLoadOptions, (optionName, optionValue) => {
      if (localLoadOptionNames[optionName]) {
        options2.loadOptions[optionName] = optionValue;
        delete options2.storeLoadOptions[optionName];
      }
    });
    if (cachedExtra) {
      options2.extra = cachedExtra;
    }
  }
  _handleDataLoaded(options2) {
    var _a, _b;
    var {
      loadOptions
    } = options2;
    var localPaging = options2.remoteOperations && !options2.remoteOperations.paging;
    var {
      cachedData
    } = options2;
    var {
      storeLoadOptions
    } = options2;
    var needCache = false !== this.option("cacheEnabled") && storeLoadOptions;
    var needPageCache = needCache && !options2.isCustomLoading && cachedData && (!localPaging || storeLoadOptions.group);
    var needPagingCache = needCache && localPaging;
    var needStoreCache = needPagingCache && !options2.isCustomLoading;
    if (!loadOptions) {
      this._dataSource.cancel(options2.operationId);
      return;
    }
    if (localPaging) {
      options2.skip = loadOptions.skip;
      options2.take = loadOptions.take;
      delete loadOptions.skip;
      delete loadOptions.take;
    }
    if (loadOptions.group) {
      loadOptions.group = options2.group || loadOptions.group;
    }
    var groupCount = m_utils_default.normalizeSortingInfo(options2.group || storeLoadOptions.group || loadOptions.group).length;
    if (options2.cachedDataPartBegin) {
      options2.data = options2.cachedDataPartBegin.concat(options2.data);
    }
    if (options2.cachedDataPartEnd) {
      options2.data = options2.data.concat(options2.cachedDataPartEnd);
    }
    if (!needPageCache || !getPageDataFromCache(options2)) {
      if (needPagingCache && options2.cachedPagingData) {
        options2.data = cloneItems(options2.cachedPagingData, groupCount);
      } else {
        if (needStoreCache) {
          if (!this._cachedStoreData) {
            this._cachedStoreData = cloneItems(options2.data, m_utils_default.normalizeSortingInfo(storeLoadOptions.group).length);
          } else if (options2.mergeStoreLoadData) {
            options2.data = this._cachedStoreData = this._cachedStoreData.concat(options2.data);
          }
        }
        new array_store_default(options2.data).load(loadOptions).done((data17) => {
          options2.data = data17;
          if (needStoreCache) {
            this._cachedPagingData = cloneItems(options2.data, groupCount);
          }
        }).fail((error) => {
          options2.data = new Deferred().reject(error);
        });
      }
      if (loadOptions.requireTotalCount && localPaging) {
        options2.extra = isPlainObject(options2.extra) ? options2.extra : {};
        options2.extra.totalCount = options2.data.length;
      }
      if (options2.extra && options2.extra.totalCount >= 0 && (false === storeLoadOptions.requireTotalCount || false === loadOptions.requireTotalCount)) {
        options2.extra.totalCount = -1;
      }
      if (!loadOptions.data && (storeLoadOptions.requireTotalCount || (null !== (_b = null === (_a = options2.extra) || void 0 === _a ? void 0 : _a.totalCount) && void 0 !== _b ? _b : -1) >= 0)) {
        this._totalCountCorrection = 0;
      }
      this._handleDataLoadedCore(options2);
      if (needPageCache) {
        cachedData.extra = cachedData.extra || extend({}, options2.extra);
        when(options2.data).done((data17) => {
          setPageDataToCache(options2, data17, groupCount);
        });
      }
    }
    when(options2.data).done(() => {
      if (options2.lastLoadOptions) {
        this._lastLoadOptions = options2.lastLoadOptions;
        Object.keys(options2.operationTypes).forEach((operationType) => {
          this._lastOperationTypes[operationType] = this._lastOperationTypes[operationType] || options2.operationTypes[operationType];
        });
      }
    });
    options2.storeLoadOptions = options2.originalStoreLoadOptions;
  }
  _handleDataLoadedCore(options2) {
    if (options2.remoteOperations && !options2.remoteOperations.paging && Array.isArray(options2.data)) {
      if (void 0 !== options2.skip) {
        options2.data = options2.data.slice(options2.skip);
      }
      if (void 0 !== options2.take) {
        options2.data = options2.data.slice(0, options2.take);
      }
    }
  }
  _handleLoadingChanged(isLoading) {
    this.loadingChanged.fire(isLoading);
  }
  _handleLoadError(error) {
    this.loadError.fire(error);
    this.changed.fire({
      changeType: "loadError",
      error
    });
  }
  _loadPageSize() {
    return this.pageSize();
  }
  _handleDataChanged(args) {
    var currentTotalCount;
    var dataSource = this._dataSource;
    var isLoading = false;
    var isDataLoading = !args || isDefined(args.changeType);
    var itemsCount = this.itemsCount();
    if (isDataLoading) {
      this._isLastPage = !itemsCount || !this._loadPageSize() || itemsCount < this._loadPageSize();
      if (this._isLastPage) {
        this._hasLastPage = true;
      }
    }
    if (dataSource.totalCount() >= 0) {
      if (dataSource.pageIndex() >= this.pageCount()) {
        dataSource.pageIndex(this.pageCount() - 1);
        this.pageIndex(dataSource.pageIndex());
        this.resetPagesCache();
        dataSource.load();
        isLoading = true;
      }
    } else if (isDataLoading) {
      currentTotalCount = dataSource.pageIndex() * this.pageSize() + itemsCount;
      if (currentTotalCount > this._currentTotalCount) {
        this._currentTotalCount = currentTotalCount;
        if (0 === dataSource.pageIndex() || !this.option("scrolling.legacyMode")) {
          this._totalCountCorrection = 0;
        }
      }
      if (0 === itemsCount && dataSource.pageIndex() >= this.pageCount()) {
        dataSource.pageIndex(this.pageCount() - 1);
        if ("infinite" !== this.option("scrolling.mode")) {
          dataSource.load();
          isLoading = true;
        }
      }
    }
    if (!isLoading) {
      this._operationTypes = this._lastOperationTypes;
      this._lastOperationTypes = {};
      this.component._optionCache = {};
      this.changed.fire(args);
      this.component._optionCache = void 0;
    }
  }
  _scheduleCustomLoadCallbacks(deferred) {
    var that = this;
    that._isCustomLoading = true;
    deferred.always(() => {
      that._isCustomLoading = false;
    });
  }
  loadingOperationTypes() {
    return this._loadingOperationTypes;
  }
  operationTypes() {
    return this._operationTypes;
  }
  lastLoadOptions() {
    return this._lastLoadOptions || {};
  }
  isLastPage() {
    return this._isLastPage;
  }
  _dataSourceTotalCount() {
    return this._dataSource.totalCount();
  }
  _changeRowExpandCore(path) {
  }
  changeRowExpand(path) {
  }
  totalCount() {
    return parseInt((this._currentTotalCount || this._dataSourceTotalCount()) + this._totalCountCorrection);
  }
  totalCountCorrection() {
    return this._totalCountCorrection;
  }
  items() {
  }
  itemsCount() {
    return this._dataSource.items().length;
  }
  totalItemsCount() {
    return this.totalCount();
  }
  pageSize() {
    var dataSource = this._dataSource;
    if (!arguments.length && !dataSource.paginate()) {
      return 0;
    }
    return dataSource.pageSize.apply(dataSource, arguments);
  }
  pageCount() {
    var count = this.totalItemsCount() - this._totalCountCorrection;
    var pageSize = this.pageSize();
    if (pageSize && count > 0) {
      return Math.max(1, Math.ceil(count / pageSize));
    }
    return 1;
  }
  hasKnownLastPage() {
    return this._hasLastPage || this._dataSource.totalCount() >= 0;
  }
  loadFromStore(loadOptions, store) {
    var dataSource = this._dataSource;
    var d = new Deferred();
    if (!dataSource) {
      return;
    }
    store = store || dataSource.store();
    store.load(loadOptions).done((data17, extra) => {
      if (data17 && !Array.isArray(data17) && Array.isArray(data17.data)) {
        extra = data17;
        data17 = data17.data;
      }
      d.resolve(data17, extra);
    }).fail(d.reject);
    return d;
  }
  isCustomLoading() {
    return !!this._isCustomLoading;
  }
  load(options2) {
    var that = this;
    var dataSource = that._dataSource;
    var d = new Deferred();
    if (options2) {
      var store = dataSource.store();
      var dataSourceLoadOptions = dataSource.loadOptions();
      var loadResult = {
        storeLoadOptions: extend({}, options2, {
          langParams: null === dataSourceLoadOptions || void 0 === dataSourceLoadOptions ? void 0 : dataSourceLoadOptions.langParams
        }),
        isCustomLoading: true
      };
      each(store._customLoadOptions() || [], (_, optionName) => {
        if (!(optionName in loadResult.storeLoadOptions)) {
          loadResult.storeLoadOptions[optionName] = dataSourceLoadOptions[optionName];
        }
      });
      this._isLoadingAll = options2.isLoadingAll;
      that._scheduleCustomLoadCallbacks(d);
      dataSource._scheduleLoadCallbacks(d);
      that._handleCustomizeStoreLoadOptions(loadResult);
      executeTask(() => {
        if (!dataSource.store()) {
          return d.reject("canceled");
        }
        when(loadResult.data || that.loadFromStore(loadResult.storeLoadOptions)).done((data17, extra) => {
          loadResult.data = data17;
          loadResult.extra = extra || {};
          that._handleDataLoaded(loadResult);
          if (options2.requireTotalCount && void 0 === loadResult.extra.totalCount) {
            loadResult.extra.totalCount = store.totalCount(loadResult.storeLoadOptions);
          }
          when(loadResult.data, loadResult.extra.totalCount).done((data18, totalCount) => {
            loadResult.extra.totalCount = totalCount;
            d.resolve(data18, loadResult.extra);
          }).fail(d.reject);
        }).fail(d.reject);
      }, that.option("loadingTimeout"));
      return d.fail(function() {
        that._eventsStrategy.fireEvent("loadError", arguments);
      }).always(() => {
        this._isLoadingAll = false;
      }).promise();
    }
    return dataSource.load();
  }
  reload(full) {
    return full ? this._dataSource.reload() : this._dataSource.load();
  }
  getCachedStoreData() {
    return this._cachedStoreData;
  }
  isLoaded() {
  }
  pageIndex(pageIndex) {
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/m_data_source_adapter.js
var DataSourceAdapterType = DataSourceAdapter;
var m_data_source_adapter_default = {
  extend(extender) {
    DataSourceAdapterType = extender(DataSourceAdapterType);
  },
  create: (component) => new DataSourceAdapterType(component)
};

// node_modules/devextreme/esm/__internal/grids/data_grid/m_data_controller.js
var DataGridDataController = class extends DataController2 {
  _getDataSourceAdapter() {
    return m_data_source_adapter_default;
  }
  _getSpecificDataSourceOption() {
    var dataSource = this.option("dataSource");
    if (dataSource && !Array.isArray(dataSource) && this.option("keyExpr")) {
      ui_errors_default.log("W1011");
    }
    return super._getSpecificDataSourceOption();
  }
};
m_core_default.registerModule("data", {
  defaultOptions: dataControllerModule.defaultOptions,
  controllers: {
    data: DataGridDataController
  }
});

// node_modules/devextreme/esm/__internal/grids/grid_core/sorting/m_sorting_mixin.js
var SORT_CLASS = "dx-sort";
var SORT_NONE_CLASS = "dx-sort-none";
var SORTUP_CLASS = "dx-sort-up";
var SORTDOWN_CLASS = "dx-sort-down";
var SORT_INDEX_CLASS = "dx-sort-index";
var SORT_INDEX_ICON_CLASS = "dx-sort-index-icon";
var HEADERS_ACTION_CLASS = "action";
var sortingMixin = (Base) => class extends Base {
  _applyColumnState(options2) {
    var ariaSortState;
    var $sortIndicator;
    var sortingMode = this.option("sorting.mode");
    var {
      rootElement
    } = options2;
    var {
      column
    } = options2;
    var $indicatorsContainer = this._getIndicatorContainer(rootElement);
    if ("sort" === options2.name) {
      rootElement.find(".".concat(SORT_CLASS)).remove();
      !$indicatorsContainer.children().length && $indicatorsContainer.remove();
      var isSortingAllowed = "none" !== sortingMode && column.allowSorting;
      var hasSeveralSortIndexes = this.getController && !!this.getController("columns").columnOption("sortIndex:1");
      if (!isDefined(column.groupIndex) && (isSortingAllowed || isDefined(column.sortOrder))) {
        ariaSortState = "asc" === column.sortOrder ? "ascending" : "descending";
        $sortIndicator = super._applyColumnState(options2).toggleClass(SORTUP_CLASS, "asc" === column.sortOrder).toggleClass(SORTDOWN_CLASS, "desc" === column.sortOrder);
        if (hasSeveralSortIndexes && this.option("sorting.showSortIndexes") && column.sortIndex >= 0) {
          renderer_default("<span>").addClass(SORT_INDEX_ICON_CLASS).text(column.sortIndex + 1).appendTo($sortIndicator);
          $sortIndicator.addClass(SORT_INDEX_CLASS);
        }
        if (isSortingAllowed) {
          options2.rootElement.addClass(this.addWidgetPrefix(HEADERS_ACTION_CLASS));
        }
      }
      this._setAriaSortAttribute(column, ariaSortState, rootElement, hasSeveralSortIndexes);
      return $sortIndicator;
    }
    return super._applyColumnState(options2);
  }
  _setAriaSortAttribute(column, ariaSortState, $rootElement, hasSeveralSortIndexes) {
    $rootElement.removeAttr("aria-roledescription");
    if (column.isGrouped) {
      var description = this.localize("dxDataGrid-ariaNotSortedColumn");
      if (isDefined(column.sortOrder)) {
        description = "asc" === column.sortOrder ? this.localize("dxDataGrid-ariaSortedAscendingColumn") : this.localize("dxDataGrid-ariaSortedDescendingColumn");
      }
      this.setAria("roledescription", description, $rootElement);
    } else if (!isDefined(column.sortOrder)) {
      this.setAria("sort", "none", $rootElement);
    } else {
      this.setAria("sort", ariaSortState, $rootElement);
      if (hasSeveralSortIndexes && column.sortIndex >= 0) {
        var ariaColumnHeader = message_default.format("dxDataGrid-ariaColumnHeader");
        var ariaSortIndex = message_default.format("dxDataGrid-ariaSortIndex", column.sortIndex + 1);
        var _description = "".concat(ariaColumnHeader, ", ").concat(ariaSortIndex);
        this.setAria("roledescription", _description, $rootElement);
      }
    }
  }
  _getIndicatorClassName(name2) {
    if ("sort" === name2) {
      return SORT_CLASS;
    }
    if ("sortIndex" === name2) {
      return SORT_INDEX_ICON_CLASS;
    }
    return super._getIndicatorClassName(name2);
  }
  _renderIndicator(options2) {
    var {
      column
    } = options2;
    var $container = options2.container;
    var $indicator = options2.indicator;
    if ("sort" === options2.name) {
      var rtlEnabled = this.option("rtlEnabled");
      if (!isDefined(column.sortOrder)) {
        $indicator && $indicator.addClass(SORT_NONE_CLASS);
      }
      if ($container.children().length && (!rtlEnabled && "left" === options2.columnAlignment || rtlEnabled && "right" === options2.columnAlignment)) {
        $container.prepend($indicator);
        return;
      }
    }
    super._renderIndicator(options2);
  }
  _updateIndicator($cell, column, indicatorName) {
    if ("sort" === indicatorName && isDefined(column.groupIndex)) {
      return;
    }
    return super._updateIndicator.apply(this, arguments);
  }
  _getIndicatorElements($cell, returnAll) {
    var $indicatorElements = super._getIndicatorElements($cell);
    return returnAll ? $indicatorElements : $indicatorElements && $indicatorElements.not(".".concat(SORT_NONE_CLASS));
  }
};
var m_sorting_mixin_default = sortingMixin;

// node_modules/devextreme/esm/__internal/grids/grid_core/sorting/m_sorting.js
var COLUMN_HEADERS_VIEW_NAMESPACE = "dxDataGridColumnHeadersView";
var columnHeadersView = (Base) => class extends m_sorting_mixin_default(Base) {
  optionChanged(args) {
    switch (args.name) {
      case "sorting":
        this._invalidate();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _createRow(row) {
    var $row = super._createRow(row);
    if ("header" === row.rowType) {
      events_engine_default.on($row, addNamespace(CLICK_EVENT_NAME, COLUMN_HEADERS_VIEW_NAMESPACE), "td", this.createAction((e) => {
        this._processHeaderAction(e.event, $row);
      }));
    }
    return $row;
  }
  _processHeaderAction(event, $row) {
    if (renderer_default(event.currentTarget).parent().get(0) !== $row.get(0)) {
      return;
    }
    var that = this;
    var keyName = null;
    var $cellElementFromEvent = renderer_default(event.currentTarget);
    var rowIndex = $cellElementFromEvent.parent().index();
    var columnIndex = -1;
    [].slice.call(that.getCellElements(rowIndex)).some(($cellElement, index) => {
      if ($cellElement === $cellElementFromEvent.get(0)) {
        columnIndex = index;
        return true;
      }
      return;
    });
    var visibleColumns = that._columnsController.getVisibleColumns(rowIndex);
    var column = visibleColumns[columnIndex];
    var editingController = that.getController("editing");
    var editingMode = that.option("editing.mode");
    var isCellEditing = editingController && editingController.isEditing() && ("batch" === editingMode || "cell" === editingMode);
    if (isCellEditing || !that._isSortableElement(renderer_default(event.target))) {
      return;
    }
    if (column && !isDefined(column.groupIndex) && !column.command) {
      if (event.shiftKey) {
        keyName = "shift";
      } else if (isCommandKeyPressed(event)) {
        keyName = "ctrl";
      }
      setTimeout(() => {
        that._columnsController.changeSortOrder(column.index, keyName);
      });
    }
  }
  _renderCellContent($cell, options2) {
    var {
      column
    } = options2;
    if (!column.command && "header" === options2.rowType) {
      this._applyColumnState({
        name: "sort",
        rootElement: $cell,
        column,
        showColumnLines: this.option("showColumnLines")
      });
    }
    super._renderCellContent.apply(this, arguments);
  }
  _columnOptionChanged(e) {
    var {
      changeTypes
    } = e;
    if (1 === changeTypes.length && changeTypes.sorting) {
      this._updateIndicators("sort");
      return;
    }
    super._columnOptionChanged(e);
  }
};
var headerPanel = (Base) => class extends m_sorting_mixin_default(Base) {
  optionChanged(args) {
    switch (args.name) {
      case "sorting":
        this._invalidate();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _createGroupPanelItem($rootElement, groupColumn) {
    var that = this;
    var $item = super._createGroupPanelItem(...arguments);
    events_engine_default.on($item, addNamespace(CLICK_EVENT_NAME, "dxDataGridHeaderPanel"), that.createAction(() => {
      that._processGroupItemAction(groupColumn.index);
    }));
    that._applyColumnState({
      name: "sort",
      rootElement: $item,
      column: {
        alignment: that.option("rtlEnabled") ? "right" : "left",
        allowSorting: groupColumn.allowSorting,
        sortOrder: "desc" === groupColumn.sortOrder ? "desc" : "asc",
        isGrouped: true
      },
      showColumnLines: true
    });
    return $item;
  }
  _processGroupItemAction(groupColumnIndex) {
    setTimeout(() => this.getController("columns").changeSortOrder(groupColumnIndex));
  }
};
var sortingModule = {
  defaultOptions: () => ({
    sorting: {
      mode: "single",
      ascendingText: message_default.format("dxDataGrid-sortingAscendingText"),
      descendingText: message_default.format("dxDataGrid-sortingDescendingText"),
      clearText: message_default.format("dxDataGrid-sortingClearText"),
      showSortIndexes: true
    }
  }),
  extenders: {
    views: {
      columnHeadersView,
      headerPanel
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/sorting.js
m_core_default.registerModule("sorting", sortingModule);

// node_modules/devextreme/esm/events/gesture/emitter.gesture.scroll.js
var abstract = class_default.abstract;
var realDevice = devices_default.real();
var SCROLL_EVENT = "scroll";
var SCROLL_INIT_EVENT = "dxscrollinit";
var SCROLL_START_EVENT = "dxscrollstart";
var SCROLL_MOVE_EVENT = "dxscroll";
var SCROLL_END_EVENT = "dxscrollend";
var SCROLL_STOP_EVENT = "dxscrollstop";
var SCROLL_CANCEL_EVENT = "dxscrollcancel";
var Locker = class_default.inherit(function() {
  var NAMESPACED_SCROLL_EVENT = addNamespace(SCROLL_EVENT, "dxScrollEmitter");
  return {
    ctor: function(element) {
      this._element = element;
      this._locked = false;
      this._proxiedScroll = (e) => {
        if (!this._disposed) {
          this._scroll(e);
        }
      };
      events_engine_default.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);
    },
    _scroll: abstract,
    check: function(e, callback) {
      if (this._locked) {
        callback();
      }
    },
    dispose: function() {
      this._disposed = true;
      events_engine_default.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);
    }
  };
}());
var TimeoutLocker = Locker.inherit({
  ctor: function(element, timeout) {
    this.callBase(element);
    this._timeout = timeout;
  },
  _scroll: function() {
    this._prepare();
    this._forget();
  },
  _prepare: function() {
    if (this._timer) {
      this._clearTimer();
    }
    this._locked = true;
  },
  _clearTimer: function() {
    clearTimeout(this._timer);
    this._locked = false;
    this._timer = null;
  },
  _forget: function() {
    var that = this;
    this._timer = setTimeout(function() {
      that._clearTimer();
    }, this._timeout);
  },
  dispose: function() {
    this.callBase();
    this._clearTimer();
  }
});
var WheelLocker = TimeoutLocker.inherit({
  ctor: function(element) {
    this.callBase(element, 400);
    this._lastWheelDirection = null;
  },
  check: function(e, callback) {
    this._checkDirectionChanged(e);
    this.callBase(e, callback);
  },
  _checkDirectionChanged: function(e) {
    if (!isDxMouseWheelEvent(e)) {
      this._lastWheelDirection = null;
      return;
    }
    var direction = e.shiftKey || false;
    var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;
    this._lastWheelDirection = direction;
    this._locked = this._locked && !directionChange;
  }
});
var PointerLocker = TimeoutLocker.inherit({
  ctor: function(element) {
    this.callBase(element, 400);
  }
});
!function() {
  var {
    ios: isIos,
    android: isAndroid
  } = realDevice;
  if (!(isIos || isAndroid)) {
    return;
  }
  PointerLocker = Locker.inherit({
    _scroll: function() {
      this._locked = true;
      var that = this;
      cancelAnimationFrame(this._scrollFrame);
      this._scrollFrame = requestAnimationFrame(function() {
        that._locked = false;
      });
    },
    check: function(e, callback) {
      cancelAnimationFrame(this._scrollFrame);
      cancelAnimationFrame(this._checkFrame);
      var that = this;
      var callBase = this.callBase;
      this._checkFrame = requestAnimationFrame(function() {
        callBase.call(that, e, callback);
        that._locked = false;
      });
    },
    dispose: function() {
      this.callBase();
      cancelAnimationFrame(this._scrollFrame);
      cancelAnimationFrame(this._checkFrame);
    }
  });
}();
var ScrollEmitter = emitter_gesture_default.inherit(function() {
  var FRAME_DURATION2 = Math.round(1e3 / 60);
  return {
    ctor: function(element) {
      this.callBase.apply(this, arguments);
      this.direction = "both";
      this._pointerLocker = new PointerLocker(element);
      this._wheelLocker = new WheelLocker(element);
    },
    validate: function() {
      return true;
    },
    configure: function(data17) {
      if (data17.scrollTarget) {
        this._pointerLocker.dispose();
        this._wheelLocker.dispose();
        this._pointerLocker = new PointerLocker(data17.scrollTarget);
        this._wheelLocker = new WheelLocker(data17.scrollTarget);
      }
      this.callBase(data17);
    },
    _init: function(e) {
      this._wheelLocker.check(e, (function() {
        if (isDxMouseWheelEvent(e)) {
          this._accept(e);
        }
      }).bind(this));
      this._pointerLocker.check(e, (function() {
        var skipCheck = this.isNative && isMouseEvent(e);
        if (!isDxMouseWheelEvent(e) && !skipCheck) {
          this._accept(e);
        }
      }).bind(this));
      this._fireEvent(SCROLL_INIT_EVENT, e);
      this._prevEventData = eventData(e);
    },
    move: function(e) {
      this.callBase.apply(this, arguments);
      e.isScrollingEvent = this.isNative || e.isScrollingEvent;
    },
    _start: function(e) {
      this._savedEventData = eventData(e);
      this._fireEvent(SCROLL_START_EVENT, e);
      this._prevEventData = eventData(e);
    },
    _move: function(e) {
      var currentEventData = eventData(e);
      this._fireEvent(SCROLL_MOVE_EVENT, e, {
        delta: eventDelta(this._prevEventData, currentEventData)
      });
      var delta = eventDelta(this._savedEventData, currentEventData);
      if (delta.time > 200) {
        this._savedEventData = this._prevEventData;
      }
      this._prevEventData = eventData(e);
    },
    _end: function(e) {
      var endEventDelta = eventDelta(this._prevEventData, eventData(e));
      var velocity = {
        x: 0,
        y: 0
      };
      if (!isDxMouseWheelEvent(e) && endEventDelta.time < 100) {
        var delta = eventDelta(this._savedEventData, this._prevEventData);
        var velocityMultiplier = FRAME_DURATION2 / delta.time;
        velocity = {
          x: delta.x * velocityMultiplier,
          y: delta.y * velocityMultiplier
        };
      }
      this._fireEvent(SCROLL_END_EVENT, e, {
        velocity
      });
    },
    _stop: function(e) {
      this._fireEvent(SCROLL_STOP_EVENT, e);
    },
    cancel: function(e) {
      this.callBase.apply(this, arguments);
      this._fireEvent(SCROLL_CANCEL_EVENT, e);
    },
    dispose: function() {
      this.callBase.apply(this, arguments);
      this._pointerLocker.dispose();
      this._wheelLocker.dispose();
    },
    _clearSelection: function() {
      if (this.isNative) {
        return;
      }
      return this.callBase.apply(this, arguments);
    },
    _toggleGestureCover: function() {
      if (this.isNative) {
        return;
      }
      return this.callBase.apply(this, arguments);
    }
  };
}());
emitter_registrator_default({
  emitter: ScrollEmitter,
  events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]
});
var emitter_gesture_scroll_default = {
  init: SCROLL_INIT_EVENT,
  start: SCROLL_START_EVENT,
  move: SCROLL_MOVE_EVENT,
  end: SCROLL_END_EVENT,
  stop: SCROLL_STOP_EVENT,
  cancel: SCROLL_CANCEL_EVENT,
  scroll: SCROLL_EVENT
};

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_relative_offset.js
function getRelativeOffset(targetElementClass, sourceElement) {
  var offset = {
    left: 0,
    top: 0
  };
  var element = sourceElement;
  while (null !== (_element = element) && void 0 !== _element && _element.offsetParent && !element.classList.contains(targetElementClass)) {
    var _element;
    var parentElement = element.offsetParent;
    var elementRect = element.getBoundingClientRect();
    var parentElementRect = parentElement.getBoundingClientRect();
    offset.left += elementRect.left - parentElementRect.left;
    offset.top += elementRect.top - parentElementRect.top;
    element = element.offsetParent;
  }
  return offset;
}

// node_modules/devextreme/esm/renovation/ui/scroll_view/common/consts.js
var DIRECTION_VERTICAL = "vertical";
var DIRECTION_HORIZONTAL = "horizontal";
var DIRECTION_BOTH = "both";
var SCROLLABLE_CONTENT_CLASS = "dx-scrollable-content";

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_element_location_internal.js
function getElementLocationInternal(targetElement, direction, containerElement, scrollOffset, offset) {
  var additionalOffset = _extends({
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  }, offset);
  var isVertical = direction === DIRECTION_VERTICAL;
  var prop = isVertical ? "top" : "left";
  var inverseProp = isVertical ? "bottom" : "right";
  var dimension = isVertical ? "height" : "width";
  var containerOffsetSize = containerElement["offset".concat(titleize(dimension))];
  var containerClientSize = containerElement["client".concat(titleize(dimension))];
  var containerSize = containerElement.getBoundingClientRect()[dimension];
  var elementSize = targetElement.getBoundingClientRect()[dimension];
  var scale = 1;
  if (Math.abs(containerSize - containerOffsetSize) > 1) {
    scale = containerSize / containerOffsetSize;
  }
  var relativeElementOffset = getRelativeOffset(SCROLLABLE_CONTENT_CLASS, targetElement)[prop] / scale;
  var containerScrollOffset = scrollOffset[prop];
  var relativeStartOffset = containerScrollOffset - relativeElementOffset + additionalOffset[prop];
  var relativeEndOffset = containerScrollOffset - relativeElementOffset - elementSize / scale + containerClientSize - additionalOffset[inverseProp];
  if (relativeStartOffset <= 0 && relativeEndOffset >= 0) {
    return containerScrollOffset;
  }
  return containerScrollOffset - (Math.abs(relativeStartOffset) > Math.abs(relativeEndOffset) ? relativeEndOffset : relativeStartOffset);
}

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scrollable.device.js
var deviceDependentOptions = function() {
  return [{
    device: () => !nativeScrolling,
    options: {
      useNative: false
    }
  }, {
    device: (device) => !devices_default.isSimulator() && "desktop" === devices_default.real().deviceType && "generic" === device.platform,
    options: {
      bounceEnabled: false,
      scrollByThumb: true,
      scrollByContent: touch,
      showScrollbar: "onHover"
    }
  }];
};

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scrollbar.js
var SCROLLBAR = "dxScrollbar";
var SCROLLABLE_SCROLLBAR_CLASS = "dx-scrollable-scrollbar";
var SCROLLABLE_SCROLLBAR_ACTIVE_CLASS = "".concat(SCROLLABLE_SCROLLBAR_CLASS, "-active");
var SCROLLABLE_SCROLL_CLASS = "dx-scrollable-scroll";
var SCROLLABLE_SCROLL_CONTENT_CLASS = "dx-scrollable-scroll-content";
var HOVER_ENABLED_STATE = "dx-scrollbar-hoverable";
var HORIZONTAL = "horizontal";
var THUMB_MIN_SIZE = 15;
var SCROLLBAR_VISIBLE = {
  onScroll: "onScroll",
  onHover: "onHover",
  always: "always",
  never: "never"
};
var activeScrollbar = null;
var Scrollbar = ui_widget_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      direction: null,
      visible: false,
      activeStateEnabled: false,
      visibilityMode: SCROLLBAR_VISIBLE.onScroll,
      containerSize: 0,
      contentSize: 0,
      expandable: true,
      scaleRatio: 1
    });
  },
  _init() {
    this.callBase();
    this._isHovered = false;
  },
  _initMarkup() {
    this._renderThumb();
    this.callBase();
  },
  _render() {
    this.callBase();
    this._renderDirection();
    this._update();
    this._attachPointerDownHandler();
    this.option("hoverStateEnabled", this._isHoverMode());
    this.$element().toggleClass(HOVER_ENABLED_STATE, this.option("hoverStateEnabled"));
  },
  _renderThumb() {
    this._$thumb = renderer_default("<div>").addClass(SCROLLABLE_SCROLL_CLASS);
    renderer_default("<div>").addClass(SCROLLABLE_SCROLL_CONTENT_CLASS).appendTo(this._$thumb);
    this.$element().addClass(SCROLLABLE_SCROLLBAR_CLASS).append(this._$thumb);
  },
  isThumb($element) {
    return !!this.$element().find($element).length;
  },
  _isHoverMode() {
    var visibilityMode = this.option("visibilityMode");
    return (visibilityMode === SCROLLBAR_VISIBLE.onHover || visibilityMode === SCROLLBAR_VISIBLE.always) && this.option("expandable");
  },
  _renderDirection() {
    var direction = this.option("direction");
    this.$element().addClass("dx-scrollbar-".concat(direction));
    this._dimension = direction === HORIZONTAL ? "width" : "height";
    this._prop = direction === HORIZONTAL ? "left" : "top";
  },
  _attachPointerDownHandler() {
    events_engine_default.on(this._$thumb, addNamespace(pointer_default.down, SCROLLBAR), this.feedbackOn.bind(this));
  },
  feedbackOn(e) {
    null === e || void 0 === e ? void 0 : e.preventDefault();
    this.$element().addClass(SCROLLABLE_SCROLLBAR_ACTIVE_CLASS);
    activeScrollbar = this;
  },
  feedbackOff() {
    this.$element().removeClass(SCROLLABLE_SCROLLBAR_ACTIVE_CLASS);
    activeScrollbar = null;
  },
  cursorEnter() {
    this._isHovered = true;
    if (this._needScrollbar()) {
      this.option("visible", true);
    }
  },
  cursorLeave() {
    this._isHovered = false;
    this.option("visible", false);
  },
  _renderDimensions() {
    this._$thumb.css({
      width: this.option("width"),
      height: this.option("height")
    });
  },
  _toggleVisibility(visible) {
    if (this.option("visibilityMode") === SCROLLBAR_VISIBLE.onScroll) {
      this._$thumb.css("opacity");
    }
    visible = this._adjustVisibility(visible);
    this.option().visible = visible;
    this._$thumb.toggleClass("dx-state-invisible", !visible);
  },
  _adjustVisibility(visible) {
    if (this._baseContainerToContentRatio && !this._needScrollbar()) {
      return false;
    }
    switch (this.option("visibilityMode")) {
      case SCROLLBAR_VISIBLE.onScroll:
        break;
      case SCROLLBAR_VISIBLE.onHover:
        visible = visible || !!this._isHovered;
        break;
      case SCROLLBAR_VISIBLE.never:
        visible = false;
        break;
      case SCROLLBAR_VISIBLE.always:
        visible = true;
    }
    return visible;
  },
  moveTo(location) {
    if (this._isHidden()) {
      return;
    }
    if (isPlainObject(location)) {
      location = location[this._prop] || 0;
    }
    var scrollBarLocation = {};
    scrollBarLocation[this._prop] = this._calculateScrollBarPosition(location);
    move(this._$thumb, scrollBarLocation);
  },
  _calculateScrollBarPosition(location) {
    return -location * this._thumbRatio;
  },
  _update() {
    var containerSize = Math.round(this.option("containerSize"));
    var contentSize = Math.round(this.option("contentSize"));
    var baseContainerSize = Math.round(this.option("baseContainerSize"));
    var baseContentSize = Math.round(this.option("baseContentSize"));
    if (isNaN(baseContainerSize)) {
      baseContainerSize = containerSize;
      baseContentSize = contentSize;
    }
    this._baseContainerToContentRatio = baseContentSize ? baseContainerSize / baseContentSize : baseContainerSize;
    this._realContainerToContentRatio = contentSize ? containerSize / contentSize : containerSize;
    var thumbSize = Math.round(Math.max(Math.round(containerSize * this._realContainerToContentRatio), THUMB_MIN_SIZE));
    this._thumbRatio = (containerSize - thumbSize) / (this.option("scaleRatio") * (contentSize - containerSize));
    this.option(this._dimension, thumbSize / this.option("scaleRatio"));
    this.$element().css("display", this._needScrollbar() ? "" : "none");
  },
  _isHidden() {
    return this.option("visibilityMode") === SCROLLBAR_VISIBLE.never;
  },
  _needScrollbar() {
    return !this._isHidden() && this._baseContainerToContentRatio < 1;
  },
  containerToContentRatio() {
    return this._realContainerToContentRatio;
  },
  _normalizeSize(size) {
    return isPlainObject(size) ? size[this._dimension] || 0 : size;
  },
  _clean() {
    this.callBase();
    if (this === activeScrollbar) {
      activeScrollbar = null;
    }
    events_engine_default.off(this._$thumb, ".".concat(SCROLLBAR));
  },
  _optionChanged(args) {
    if (this._isHidden()) {
      return;
    }
    switch (args.name) {
      case "containerSize":
      case "contentSize":
        this.option()[args.name] = this._normalizeSize(args.value);
        this._update();
        break;
      case "baseContentSize":
      case "baseContainerSize":
        this._update();
        break;
      case "visibilityMode":
      case "direction":
        this._invalidate();
        break;
      case "scaleRatio":
        this._update();
        break;
      default:
        this.callBase.apply(this, arguments);
    }
  },
  update: deferRenderer(function() {
    this._adjustVisibility() && this.option("visible", true);
  })
});
ready_callbacks_default.add(() => {
  events_engine_default.subscribeGlobal(dom_adapter_default.getDocument(), addNamespace(pointer_default.up, SCROLLBAR), () => {
    if (activeScrollbar) {
      activeScrollbar.feedbackOff();
    }
  });
});
var m_scrollbar_default = Scrollbar;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scrollable.native.js
var SCROLLABLE_NATIVE = "dxNativeScrollable";
var SCROLLABLE_NATIVE_CLASS = "dx-scrollable-native";
var SCROLLABLE_SCROLLBAR_SIMULATED = "dx-scrollable-scrollbar-simulated";
var SCROLLABLE_SCROLLBARS_HIDDEN = "dx-scrollable-scrollbars-hidden";
var VERTICAL = "vertical";
var HORIZONTAL2 = "horizontal";
var HIDE_SCROLLBAR_TIMEOUT = 500;
var NativeStrategy = class_default.inherit({
  ctor(scrollable) {
    this._init(scrollable);
  },
  _init(scrollable) {
    this._component = scrollable;
    this._$element = scrollable.$element();
    this._$container = renderer_default(scrollable.container());
    this._$content = scrollable.$content();
    this._direction = scrollable.option("direction");
    this._useSimulatedScrollbar = scrollable.option("useSimulatedScrollbar");
    this.option = scrollable.option.bind(scrollable);
    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);
    this._isLocked = scrollable._isLocked.bind(scrollable);
    this._isDirection = scrollable._isDirection.bind(scrollable);
    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);
    this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable);
    this._isRtlNativeStrategy = scrollable._isRtlNativeStrategy.bind(scrollable);
  },
  render() {
    var device = devices_default.real();
    var deviceType = device.platform;
    this._$element.addClass(SCROLLABLE_NATIVE_CLASS).addClass("".concat(SCROLLABLE_NATIVE_CLASS, "-").concat(deviceType)).toggleClass(SCROLLABLE_SCROLLBARS_HIDDEN, !this._isScrollbarVisible());
    if (this._isScrollbarVisible() && this._useSimulatedScrollbar) {
      this._renderScrollbars();
    }
  },
  updateRtlPosition(isFirstRender) {
    if (isFirstRender && this.option("rtlEnabled")) {
      if (this._isScrollbarVisible() && this._useSimulatedScrollbar) {
        this._moveScrollbars();
      }
    }
  },
  _renderScrollbars() {
    this._scrollbars = {};
    this._hideScrollbarTimeout = 0;
    this._$element.addClass(SCROLLABLE_SCROLLBAR_SIMULATED);
    this._renderScrollbar(VERTICAL);
    this._renderScrollbar(HORIZONTAL2);
  },
  _renderScrollbar(direction) {
    if (!this._isDirection(direction)) {
      return;
    }
    this._scrollbars[direction] = new m_scrollbar_default(renderer_default("<div>").appendTo(this._$element), {
      direction,
      expandable: this._component.option("scrollByThumb")
    });
  },
  handleInit: noop,
  handleStart: noop,
  handleMove(e) {
    if (this._isLocked()) {
      e.cancel = true;
      return;
    }
    if (this._allowedDirection()) {
      e.originalEvent.isScrollingEvent = true;
    }
  },
  handleEnd: noop,
  handleCancel: noop,
  handleStop: noop,
  _eachScrollbar(callback) {
    callback = callback.bind(this);
    each(this._scrollbars || {}, (direction, scrollbar) => {
      callback(scrollbar, direction);
    });
  },
  createActions() {
    this._scrollAction = this._createActionByOption("onScroll");
    this._updateAction = this._createActionByOption("onUpdated");
  },
  _createActionArgs() {
    var {
      left,
      top
    } = this.location();
    return {
      event: this._eventForUserAction,
      scrollOffset: this._getScrollOffset(),
      reachedLeft: this._isRtlNativeStrategy() ? this._isReachedRight(-left) : this._isReachedLeft(left),
      reachedRight: this._isRtlNativeStrategy() ? this._isReachedLeft(-Math.abs(left)) : this._isReachedRight(left),
      reachedTop: this._isDirection(VERTICAL) ? Math.round(top) >= 0 : void 0,
      reachedBottom: this._isDirection(VERTICAL) ? Math.round(Math.abs(top) - this._getMaxOffset().top) >= 0 : void 0
    };
  },
  _getScrollOffset() {
    var {
      top,
      left
    } = this.location();
    return {
      top: -top,
      left: this._normalizeOffsetLeft(-left)
    };
  },
  _normalizeOffsetLeft(scrollLeft) {
    if (this._isRtlNativeStrategy()) {
      return this._getMaxOffset().left + scrollLeft;
    }
    return scrollLeft;
  },
  _isReachedLeft(left) {
    return this._isDirection(HORIZONTAL2) ? Math.round(left) >= 0 : void 0;
  },
  _isReachedRight(left) {
    return this._isDirection(HORIZONTAL2) ? Math.round(Math.abs(left) - this._getMaxOffset().left) >= 0 : void 0;
  },
  _isScrollbarVisible() {
    var {
      showScrollbar
    } = this.option();
    return "never" !== showScrollbar && false !== showScrollbar;
  },
  handleScroll(e) {
    this._eventForUserAction = e;
    this._moveScrollbars();
    this._scrollAction(this._createActionArgs());
  },
  _moveScrollbars() {
    var {
      top,
      left
    } = this._getScrollOffset();
    this._eachScrollbar((scrollbar) => {
      scrollbar.moveTo({
        top: -top,
        left: -left
      });
      scrollbar.option("visible", true);
    });
    this._hideScrollbars();
  },
  _hideScrollbars() {
    clearTimeout(this._hideScrollbarTimeout);
    this._hideScrollbarTimeout = setTimeout(() => {
      this._eachScrollbar((scrollbar) => {
        scrollbar.option("visible", false);
      });
    }, HIDE_SCROLLBAR_TIMEOUT);
  },
  location() {
    return {
      left: -this._$container.scrollLeft(),
      top: -this._$container.scrollTop()
    };
  },
  disabledChanged: noop,
  update() {
    this._update();
    this._updateAction(this._createActionArgs());
  },
  _update() {
    this._updateDimensions();
    this._updateScrollbars();
  },
  _updateDimensions() {
    this._containerSize = {
      height: getHeight(this._$container),
      width: getWidth(this._$container)
    };
    this._componentContentSize = {
      height: getHeight(this._component.$content()),
      width: getWidth(this._component.$content())
    };
    this._contentSize = {
      height: getHeight(this._$content),
      width: getWidth(this._$content)
    };
  },
  _updateScrollbars() {
    this._eachScrollbar(function(scrollbar, direction) {
      var dimension = direction === VERTICAL ? "height" : "width";
      scrollbar.option({
        containerSize: this._containerSize[dimension],
        contentSize: this._componentContentSize[dimension]
      });
      scrollbar.update();
    });
  },
  _allowedDirections() {
    return {
      vertical: this._isDirection(VERTICAL) && this._contentSize.height > this._containerSize.height,
      horizontal: this._isDirection(HORIZONTAL2) && this._contentSize.width > this._containerSize.width
    };
  },
  dispose() {
    var {
      className
    } = this._$element.get(0);
    var scrollableNativeRegexp = new RegExp("".concat(SCROLLABLE_NATIVE_CLASS, "\\S*"), "g");
    if (scrollableNativeRegexp.test(className)) {
      this._$element.removeClass(className.match(scrollableNativeRegexp).join(" "));
    }
    events_engine_default.off(this._$element, ".".concat(SCROLLABLE_NATIVE));
    events_engine_default.off(this._$container, ".".concat(SCROLLABLE_NATIVE));
    this._removeScrollbars();
    clearTimeout(this._hideScrollbarTimeout);
  },
  _removeScrollbars() {
    this._eachScrollbar((scrollbar) => {
      scrollbar.$element().remove();
    });
  },
  scrollBy(distance) {
    var location = this.location();
    this._$container.scrollTop(Math.round(-location.top - distance.top));
    this._$container.scrollLeft(Math.round(-location.left - distance.left));
  },
  validate(e) {
    if (this.option("disabled")) {
      return false;
    }
    if (isDxMouseWheelEvent(e) && this._isScrolledInMaxDirection(e)) {
      return false;
    }
    return !!this._allowedDirection();
  },
  _isScrolledInMaxDirection(e) {
    var container = this._$container.get(0);
    var result2;
    if (e.delta > 0) {
      result2 = e.shiftKey ? !container.scrollLeft : !container.scrollTop;
    } else if (e.shiftKey) {
      result2 = container.scrollLeft >= this._getMaxOffset().left;
    } else {
      result2 = container.scrollTop >= this._getMaxOffset().top;
    }
    return result2;
  },
  getDirection() {
    return this._allowedDirection();
  }
});
var m_scrollable_native_default = NativeStrategy;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_animator.js
var {
  abstract: abstract2
} = class_default;
var Animator = class_default.inherit({
  ctor() {
    this._finished = true;
    this._stopped = false;
    this._proxiedStepCore = this._stepCore.bind(this);
  },
  start() {
    this._stopped = false;
    this._finished = false;
    this._stepCore();
  },
  stop() {
    this._stopped = true;
    cancelAnimationFrame(this._stepAnimationFrame);
  },
  _stepCore() {
    if (this._isStopped()) {
      this._stop();
      return;
    }
    if (this._isFinished()) {
      this._finished = true;
      this._complete();
      return;
    }
    this._step();
    this._stepAnimationFrame = requestAnimationFrame(this._proxiedStepCore);
  },
  _step: abstract2,
  _isFinished: noop,
  _stop: noop,
  _complete: noop,
  _isStopped() {
    return this._stopped;
  },
  inProgress() {
    return !(this._stopped || this._finished);
  }
});
var m_animator_default = Animator;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scrollable.simulated.js
var SCROLLABLE_SIMULATED = "dxSimulatedScrollable";
var SCROLLABLE_STRATEGY = "dxScrollableStrategy";
var SCROLLABLE_SIMULATED_CURSOR = "".concat(SCROLLABLE_SIMULATED, "Cursor");
var SCROLLABLE_SIMULATED_KEYBOARD = "".concat(SCROLLABLE_SIMULATED, "Keyboard");
var SCROLLABLE_SIMULATED_CLASS2 = "dx-scrollable-simulated";
var SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = "dx-scrollable-scrollbars-alwaysvisible";
var SCROLLABLE_SCROLLBAR_CLASS2 = "dx-scrollable-scrollbar";
var VERTICAL2 = "vertical";
var HORIZONTAL3 = "horizontal";
var ACCELERATION = 0.92;
var OUT_BOUNDS_ACCELERATION = 0.5;
var MIN_VELOCITY_LIMIT = 1;
var FRAME_DURATION = Math.round(1e3 / 60);
var SCROLL_LINE_HEIGHT = 40;
var VALIDATE_WHEEL_TIMEOUT = 500;
var BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;
var BOUNCE_DURATION = 400;
var BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;
var BOUNCE_ACCELERATION_SUM = (1 - ACCELERATION ** BOUNCE_FRAMES) / (1 - ACCELERATION);
var KEY_CODES = {
  PAGE_UP: "pageUp",
  PAGE_DOWN: "pageDown",
  END: "end",
  HOME: "home",
  LEFT: "leftArrow",
  UP: "upArrow",
  RIGHT: "rightArrow",
  DOWN: "downArrow",
  TAB: "tab"
};
var InertiaAnimator = m_animator_default.inherit({
  ctor(scroller) {
    this.callBase();
    this.scroller = scroller;
  },
  VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,
  _isFinished() {
    return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT;
  },
  _step() {
    this.scroller._scrollStep(this.scroller._velocity);
    this.scroller._velocity *= this._acceleration();
  },
  _acceleration() {
    return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION;
  },
  _complete() {
    this.scroller._scrollComplete();
  }
});
var BounceAnimator = InertiaAnimator.inherit({
  VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,
  _isFinished() {
    return this.scroller._crossBoundOnNextStep() || this.callBase();
  },
  _acceleration: () => ACCELERATION,
  _complete() {
    this.scroller._move(this.scroller._bounceLocation);
    this.callBase();
  }
});
var Scroller = class_default.inherit({
  ctor(options2) {
    this._initOptions(options2);
    this._initAnimators();
    this._initScrollbar();
  },
  _initOptions(options2) {
    this._location = 0;
    this._topReached = false;
    this._bottomReached = false;
    this._axis = options2.direction === HORIZONTAL3 ? "x" : "y";
    this._prop = options2.direction === HORIZONTAL3 ? "left" : "top";
    this._dimension = options2.direction === HORIZONTAL3 ? "width" : "height";
    this._scrollProp = options2.direction === HORIZONTAL3 ? "scrollLeft" : "scrollTop";
    each(options2, (optionName, optionValue) => {
      this["_".concat(optionName)] = optionValue;
    });
  },
  _initAnimators() {
    this._inertiaAnimator = new InertiaAnimator(this);
    this._bounceAnimator = new BounceAnimator(this);
  },
  _initScrollbar() {
    this._scrollbar = new m_scrollbar_default(renderer_default("<div>").appendTo(this._$container), {
      direction: this._direction,
      visible: this._scrollByThumb,
      visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),
      expandable: this._scrollByThumb
    });
    this._$scrollbar = this._scrollbar.$element();
  },
  _visibilityModeNormalize: (mode) => true === mode ? "onScroll" : false === mode ? "never" : mode,
  _scrollStep(delta) {
    var prevLocation = this._location;
    this._location += delta;
    this._suppressBounce();
    this._move();
    if (Math.abs(prevLocation - this._location) < 1) {
      return;
    }
    events_engine_default.triggerHandler(this._$container, {
      type: "scroll"
    });
  },
  _suppressBounce() {
    if (this._bounceEnabled || this._inBounds(this._location)) {
      return;
    }
    this._velocity = 0;
    this._location = this._boundLocation();
  },
  _boundLocation(location) {
    location = void 0 !== location ? location : this._location;
    return Math.max(Math.min(location, this._maxOffset), this._minOffset);
  },
  _move(location) {
    this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;
    this._moveContent();
    this._moveScrollbar();
  },
  _moveContent() {
    var location = this._location;
    this._$container[this._scrollProp](-location / this._getScaleRatio());
    this._moveContentByTranslator(location);
  },
  _getScaleRatio() {
    if (hasWindow() && !this._scaleRatio) {
      var element = this._$element.get(0);
      var realDimension = this._getRealDimension(element, this._dimension);
      var baseDimension = this._getBaseDimension(element, this._dimension);
      this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100;
    }
    return this._scaleRatio || 1;
  },
  _getRealDimension: (element, dimension) => Math.round(getBoundingRect(element)[dimension]),
  _getBaseDimension(element, dimension) {
    var dimensionName = "offset".concat(titleize(dimension));
    return element[dimensionName];
  },
  _moveContentByTranslator(location) {
    var translateOffset;
    var minOffset = -this._maxScrollPropValue;
    if (location > 0) {
      translateOffset = location;
    }
    if (location <= minOffset) {
      translateOffset = location - minOffset;
    }
    if (this._translateOffset === translateOffset) {
      return;
    }
    var targetLocation = {};
    targetLocation[this._prop] = translateOffset;
    this._translateOffset = translateOffset;
    if (!translateOffset) {
      resetPosition(this._$content);
      return;
    }
    move(this._$content, targetLocation);
  },
  _moveScrollbar() {
    this._scrollbar.moveTo(this._location);
  },
  _scrollComplete() {
    if (this._inBounds()) {
      this._hideScrollbar();
      if (this._completeDeferred) {
        this._completeDeferred.resolve();
      }
    }
    this._scrollToBounds();
  },
  _scrollToBounds() {
    if (this._inBounds()) {
      return;
    }
    this._bounceAction();
    this._setupBounce();
    this._bounceAnimator.start();
  },
  _setupBounce() {
    var boundLocation = this._bounceLocation = this._boundLocation();
    var bounceDistance = boundLocation - this._location;
    this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM;
  },
  _inBounds(location) {
    location = void 0 !== location ? location : this._location;
    return this._boundLocation(location) === location;
  },
  _crossBoundOnNextStep() {
    var location = this._location;
    var nextLocation = location + this._velocity;
    return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset;
  },
  _initHandler(e) {
    this._stopScrolling();
    this._prepareThumbScrolling(e);
  },
  _stopScrolling: deferRenderer(function() {
    this._hideScrollbar();
    this._inertiaAnimator.stop();
    this._bounceAnimator.stop();
  }),
  _prepareThumbScrolling(e) {
    if (isDxMouseWheelEvent(e.originalEvent)) {
      return;
    }
    var $target = renderer_default(e.originalEvent.target);
    var scrollbarClicked = this._isScrollbar($target);
    if (scrollbarClicked) {
      this._moveToMouseLocation(e);
    }
    this._thumbScrolling = scrollbarClicked || this._isThumb($target);
    this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);
    if (this._thumbScrolling) {
      this._scrollbar.feedbackOn();
    }
  },
  _isThumbScrollingHandler($target) {
    return this._isThumb($target);
  },
  _moveToMouseLocation(e) {
    var mouseLocation = e["page".concat(this._axis.toUpperCase())] - this._$element.offset()[this._prop];
    var location = this._location + mouseLocation / this._containerToContentRatio() - getHeight(this._$container) / 2;
    this._scrollStep(-Math.round(location));
  },
  _startHandler() {
    this._showScrollbar();
  },
  _moveHandler(delta) {
    if (this._crossThumbScrolling) {
      return;
    }
    if (this._thumbScrolling) {
      delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio());
    }
    this._scrollBy(delta);
  },
  _scrollBy(delta) {
    delta = delta[this._axis];
    if (!this._inBounds()) {
      delta *= OUT_BOUNDS_ACCELERATION;
    }
    this._scrollStep(delta);
  },
  _scrollByHandler(delta) {
    this._scrollBy(delta);
    this._scrollComplete();
  },
  _containerToContentRatio() {
    return this._scrollbar.containerToContentRatio();
  },
  _endHandler(velocity) {
    this._completeDeferred = Deferred();
    this._velocity = velocity[this._axis];
    this._inertiaHandler();
    this._resetThumbScrolling();
    return this._completeDeferred.promise();
  },
  _inertiaHandler() {
    this._suppressInertia();
    this._inertiaAnimator.start();
  },
  _suppressInertia() {
    if (!this._inertiaEnabled || this._thumbScrolling) {
      this._velocity = 0;
    }
  },
  _resetThumbScrolling() {
    this._thumbScrolling = false;
    this._crossThumbScrolling = false;
  },
  _stopHandler() {
    if (this._thumbScrolling) {
      this._scrollComplete();
    }
    this._resetThumbScrolling();
    this._scrollToBounds();
  },
  _disposeHandler() {
    this._stopScrolling();
    this._$scrollbar.remove();
  },
  _updateHandler() {
    this._update();
    this._moveToBounds();
  },
  _update() {
    this._stopScrolling();
    return deferUpdate(() => {
      this._resetScaleRatio();
      this._updateLocation();
      this._updateBounds();
      this._updateScrollbar();
      deferRender(() => {
        this._moveScrollbar();
        this._scrollbar.update();
      });
    });
  },
  _resetScaleRatio() {
    this._scaleRatio = null;
  },
  _updateLocation() {
    this._location = (locate(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio();
  },
  _updateBounds() {
    this._maxOffset = this._getMaxOffset();
    this._minOffset = this._getMinOffset();
  },
  _getMaxOffset: () => 0,
  _getMinOffset() {
    this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);
    return -this._maxScrollPropValue;
  },
  _updateScrollbar: deferUpdater(function() {
    var containerSize = this._containerSize();
    var contentSize = this._contentSize();
    var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);
    var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);
    deferRender(() => {
      this._scrollbar.option({
        containerSize,
        contentSize,
        baseContainerSize,
        baseContentSize,
        scaleRatio: this._getScaleRatio()
      });
    });
  }),
  _moveToBounds: deferRenderer(deferUpdater(deferRenderer(function() {
    var location = this._boundLocation();
    var locationChanged = location !== this._location;
    this._location = location;
    this._move();
    if (locationChanged) {
      this._scrollAction();
    }
  }))),
  _createActionsHandler(actions) {
    this._scrollAction = actions.scroll;
    this._bounceAction = actions.bounce;
  },
  _showScrollbar() {
    this._scrollbar.option("visible", true);
  },
  _hideScrollbar() {
    this._scrollbar.option("visible", false);
  },
  _containerSize() {
    return this._getRealDimension(this._$container.get(0), this._dimension);
  },
  _contentSize() {
    var isOverflowHidden = "hidden" === this._$content.css("overflow".concat(this._axis.toUpperCase()));
    var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);
    if (!isOverflowHidden) {
      var containerScrollSize = this._$content[0]["scroll".concat(titleize(this._dimension))] * this._getScaleRatio();
      contentSize = Math.max(containerScrollSize, contentSize);
    }
    return contentSize;
  },
  _validateEvent(e) {
    var $target = renderer_default(e.originalEvent.target);
    return this._isThumb($target) || this._isScrollbar($target);
  },
  _isThumb($element) {
    return this._scrollByThumb && this._scrollbar.isThumb($element);
  },
  _isScrollbar($element) {
    return this._scrollByThumb && $element && $element.is(this._$scrollbar);
  },
  _reachedMin() {
    return Math.round(this._location - this._minOffset) <= 0;
  },
  _reachedMax() {
    return Math.round(this._location - this._maxOffset) >= 0;
  },
  _cursorEnterHandler() {
    this._resetScaleRatio();
    this._updateScrollbar();
    this._scrollbar.cursorEnter();
  },
  _cursorLeaveHandler() {
    this._scrollbar.cursorLeave();
  },
  dispose: noop
});
var hoveredScrollable;
var activeScrollable;
var SimulatedStrategy = class_default.inherit({
  ctor(scrollable) {
    this._init(scrollable);
  },
  _init(scrollable) {
    this._component = scrollable;
    this._$element = scrollable.$element();
    this._$container = renderer_default(scrollable.container());
    this._$wrapper = scrollable._$wrapper;
    this._$content = scrollable.$content();
    this.option = scrollable.option.bind(scrollable);
    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);
    this._isLocked = scrollable._isLocked.bind(scrollable);
    this._isDirection = scrollable._isDirection.bind(scrollable);
    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);
    this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable);
  },
  render() {
    this._$element.addClass(SCROLLABLE_SIMULATED_CLASS2);
    this._createScrollers();
    if (this.option("useKeyboard")) {
      this._$container.prop("tabIndex", 0);
    }
    this._attachKeyboardHandler();
    this._attachCursorHandlers();
  },
  _createScrollers() {
    this._scrollers = {};
    if (this._isDirection(HORIZONTAL3)) {
      this._createScroller(HORIZONTAL3);
    }
    if (this._isDirection(VERTICAL2)) {
      this._createScroller(VERTICAL2);
    }
    this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, "always" === this.option("showScrollbar"));
  },
  _createScroller(direction) {
    this._scrollers[direction] = new Scroller(this._scrollerOptions(direction));
  },
  _scrollerOptions(direction) {
    return {
      direction,
      $content: this._$content,
      $container: this._$container,
      $wrapper: this._$wrapper,
      $element: this._$element,
      scrollByThumb: this.option("scrollByThumb"),
      scrollbarVisible: this.option("showScrollbar"),
      bounceEnabled: this.option("bounceEnabled"),
      inertiaEnabled: this.option("inertiaEnabled"),
      isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)
    };
  },
  _applyScaleRatio(targetLocation) {
    for (var direction in this._scrollers) {
      var prop = this._getPropByDirection(direction);
      if (isDefined(targetLocation[prop])) {
        var scroller = this._scrollers[direction];
        targetLocation[prop] *= scroller._getScaleRatio();
      }
    }
    return targetLocation;
  },
  _isAnyThumbScrolling($target) {
    var result2 = false;
    this._eventHandler("isThumbScrolling", $target).done((isThumbScrollingVertical, isThumbScrollingHorizontal) => {
      result2 = isThumbScrollingVertical || isThumbScrollingHorizontal;
    });
    return result2;
  },
  handleInit(e) {
    this._suppressDirections(e);
    this._eventForUserAction = e;
    this._eventHandler("init", e);
  },
  _suppressDirections(e) {
    if (isDxMouseWheelEvent(e.originalEvent)) {
      this._prepareDirections(true);
      return;
    }
    this._prepareDirections();
    this._eachScroller(function(scroller, direction) {
      var $target = renderer_default(e.originalEvent.target);
      var isValid = scroller._validateEvent(e) || this.option("scrollByContent") && this._isContent($target);
      this._validDirections[direction] = isValid;
    });
  },
  _isContent($element) {
    return !!$element.closest(this._$element).length;
  },
  _prepareDirections(value2) {
    value2 = value2 || false;
    this._validDirections = {};
    this._validDirections[HORIZONTAL3] = value2;
    this._validDirections[VERTICAL2] = value2;
  },
  _eachScroller(callback) {
    callback = callback.bind(this);
    each(this._scrollers, (direction, scroller) => {
      callback(scroller, direction);
    });
  },
  handleStart(e) {
    this._eventForUserAction = e;
    this._eventHandler("start").done(this._startAction);
  },
  _saveActive() {
    activeScrollable = this;
  },
  _resetActive() {
    if (activeScrollable === this) {
      activeScrollable = null;
    }
  },
  handleMove(e) {
    if (this._isLocked()) {
      e.cancel = true;
      this._resetActive();
      return;
    }
    this._saveActive();
    e.preventDefault && e.preventDefault();
    this._adjustDistance(e, e.delta);
    this._eventForUserAction = e;
    this._eventHandler("move", e.delta);
  },
  _adjustDistance(e, distance) {
    distance.x *= this._validDirections[HORIZONTAL3];
    distance.y *= this._validDirections[VERTICAL2];
    var devicePixelRatio = this._tryGetDevicePixelRatio();
    if (devicePixelRatio && isDxMouseWheelEvent(e.originalEvent)) {
      distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;
      distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100;
    }
  },
  _tryGetDevicePixelRatio() {
    if (hasWindow()) {
      return getWindow().devicePixelRatio;
    }
  },
  handleEnd(e) {
    this._resetActive();
    this._refreshCursorState(e.originalEvent && e.originalEvent.target);
    this._adjustDistance(e, e.velocity);
    this._eventForUserAction = e;
    return this._eventHandler("end", e.velocity).done(this._endAction);
  },
  handleCancel(e) {
    this._resetActive();
    this._eventForUserAction = e;
    return this._eventHandler("end", {
      x: 0,
      y: 0
    });
  },
  handleStop() {
    this._resetActive();
    this._eventHandler("stop");
  },
  handleScroll() {
    this._updateRtlConfig();
    this._scrollAction();
  },
  _attachKeyboardHandler() {
    events_engine_default.off(this._$element, ".".concat(SCROLLABLE_SIMULATED_KEYBOARD));
    if (!this.option("disabled") && this.option("useKeyboard")) {
      events_engine_default.on(this._$element, addNamespace("keydown", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this));
    }
  },
  _keyDownHandler(e) {
    clearTimeout(this._updateHandlerTimeout);
    this._updateHandlerTimeout = setTimeout(() => {
      if (normalizeKeyName(e) === KEY_CODES.TAB) {
        this._eachScroller((scroller) => {
          scroller._updateHandler();
        });
      }
    });
    if (!this._$container.is(dom_adapter_default.getActiveElement(this._$container.get(0)))) {
      return;
    }
    var handled = true;
    switch (normalizeKeyName(e)) {
      case KEY_CODES.DOWN:
        this._scrollByLine({
          y: 1
        });
        break;
      case KEY_CODES.UP:
        this._scrollByLine({
          y: -1
        });
        break;
      case KEY_CODES.RIGHT:
        this._scrollByLine({
          x: 1
        });
        break;
      case KEY_CODES.LEFT:
        this._scrollByLine({
          x: -1
        });
        break;
      case KEY_CODES.PAGE_DOWN:
        this._scrollByPage(1);
        break;
      case KEY_CODES.PAGE_UP:
        this._scrollByPage(-1);
        break;
      case KEY_CODES.HOME:
        this._scrollToHome();
        break;
      case KEY_CODES.END:
        this._scrollToEnd();
        break;
      default:
        handled = false;
    }
    if (handled) {
      e.stopPropagation();
      e.preventDefault();
    }
  },
  _scrollByLine(lines) {
    var devicePixelRatio = this._tryGetDevicePixelRatio();
    var scrollOffset = SCROLL_LINE_HEIGHT;
    if (devicePixelRatio) {
      scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100;
    }
    this.scrollBy({
      top: (lines.y || 0) * -scrollOffset,
      left: (lines.x || 0) * -scrollOffset
    });
  },
  _scrollByPage(page) {
    var prop = this._wheelProp();
    var dimension = this._dimensionByProp(prop);
    var distance = {};
    var getter = "width" === dimension ? getWidth : getHeight;
    distance[prop] = page * -getter(this._$container);
    this.scrollBy(distance);
  },
  _dimensionByProp: (prop) => "left" === prop ? "width" : "height",
  _getPropByDirection: (direction) => direction === HORIZONTAL3 ? "left" : "top",
  _scrollToHome() {
    var prop = this._wheelProp();
    var distance = {};
    distance[prop] = 0;
    this._component.scrollTo(distance);
  },
  _scrollToEnd() {
    var prop = this._wheelProp();
    var dimension = this._dimensionByProp(prop);
    var distance = {};
    var getter = "width" === dimension ? getWidth : getHeight;
    distance[prop] = getter(this._$content) - getter(this._$container);
    this._component.scrollTo(distance);
  },
  createActions() {
    this._startAction = this._createActionHandler("onStart");
    this._endAction = this._createActionHandler("onEnd");
    this._updateAction = this._createActionHandler("onUpdated");
    this._createScrollerActions();
  },
  _createScrollerActions() {
    this._scrollAction = this._createActionHandler("onScroll");
    this._bounceAction = this._createActionHandler("onBounce");
    this._eventHandler("createActions", {
      scroll: this._scrollAction,
      bounce: this._bounceAction
    });
  },
  _createActionHandler(optionName) {
    var actionHandler = this._createActionByOption(optionName);
    return () => {
      actionHandler(extend(this._createActionArgs(), arguments));
    };
  },
  _createActionArgs() {
    var {
      horizontal: scrollerX,
      vertical: scrollerY
    } = this._scrollers;
    var offset = this._getScrollOffset();
    this._scrollOffset = {
      top: scrollerY && offset.top,
      left: scrollerX && offset.left
    };
    return {
      event: this._eventForUserAction,
      scrollOffset: this._scrollOffset,
      reachedLeft: scrollerX && scrollerX._reachedMax(),
      reachedRight: scrollerX && scrollerX._reachedMin(),
      reachedTop: scrollerY && scrollerY._reachedMax(),
      reachedBottom: scrollerY && scrollerY._reachedMin()
    };
  },
  _getScrollOffset() {
    return {
      top: -this.location().top,
      left: -this.location().left
    };
  },
  _eventHandler(eventName) {
    var args = [].slice.call(arguments).slice(1);
    var deferreds = map(this._scrollers, (scroller) => scroller["_".concat(eventName, "Handler")].apply(scroller, args));
    return when.apply(renderer_default, deferreds).promise();
  },
  location() {
    var location = locate(this._$content);
    location.top -= this._$container.scrollTop();
    location.left -= this._$container.scrollLeft();
    return location;
  },
  disabledChanged() {
    this._attachCursorHandlers();
  },
  _attachCursorHandlers() {
    events_engine_default.off(this._$element, ".".concat(SCROLLABLE_SIMULATED_CURSOR));
    if (!this.option("disabled") && this._isHoverMode()) {
      events_engine_default.on(this._$element, addNamespace("mouseenter", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));
      events_engine_default.on(this._$element, addNamespace("mouseleave", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this));
    }
  },
  _isHoverMode() {
    return "onHover" === this.option("showScrollbar");
  },
  _cursorEnterHandler(e) {
    e = e || {};
    e.originalEvent = e.originalEvent || {};
    if (activeScrollable || e.originalEvent._hoverHandled) {
      return;
    }
    if (hoveredScrollable) {
      hoveredScrollable._cursorLeaveHandler();
    }
    hoveredScrollable = this;
    this._eventHandler("cursorEnter");
    e.originalEvent._hoverHandled = true;
  },
  _cursorLeaveHandler(e) {
    if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {
      return;
    }
    this._eventHandler("cursorLeave");
    hoveredScrollable = null;
    this._refreshCursorState(e && e.relatedTarget);
  },
  _refreshCursorState(target) {
    if (!this._isHoverMode() && (!target || activeScrollable)) {
      return;
    }
    var $target = renderer_default(target);
    var $scrollable = $target.closest(".".concat(SCROLLABLE_SIMULATED_CLASS2, ":not(.dx-state-disabled)"));
    var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);
    if (hoveredScrollable && hoveredScrollable !== targetScrollable) {
      hoveredScrollable._cursorLeaveHandler();
    }
    if (targetScrollable) {
      targetScrollable._cursorEnterHandler();
    }
  },
  update() {
    var result2 = this._eventHandler("update").done(this._updateAction);
    return when(result2, deferUpdate(() => {
      var allowedDirections = this._allowedDirections();
      deferRender(() => {
        var touchDirection = allowedDirections.vertical ? "pan-x" : "";
        touchDirection = allowedDirections.horizontal ? "pan-y" : touchDirection;
        touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? "none" : touchDirection;
        this._$container.css("touchAction", touchDirection);
      });
      return when().promise();
    }));
  },
  _allowedDirections() {
    var bounceEnabled = this.option("bounceEnabled");
    var verticalScroller = this._scrollers[VERTICAL2];
    var horizontalScroller = this._scrollers[HORIZONTAL3];
    return {
      vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),
      horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)
    };
  },
  _updateBounds() {
    this._scrollers[HORIZONTAL3] && this._scrollers[HORIZONTAL3]._updateBounds();
  },
  _isHorizontalAndRtlEnabled() {
    return this.option("rtlEnabled") && this.option("direction") !== VERTICAL2;
  },
  updateRtlPosition(needInitializeRtlConfig) {
    if (needInitializeRtlConfig) {
      this._rtlConfig = {
        scrollRight: 0,
        clientWidth: this._$container.get(0).clientWidth,
        windowPixelRatio: this._getWindowDevicePixelRatio()
      };
    }
    this._updateBounds();
    if (this._isHorizontalAndRtlEnabled()) {
      var scrollLeft = this._getMaxOffset().left - this._rtlConfig.scrollRight;
      if (scrollLeft <= 0) {
        scrollLeft = 0;
        this._rtlConfig.scrollRight = this._getMaxOffset().left;
      }
      if (this._getScrollOffset().left !== scrollLeft) {
        this._rtlConfig.skipUpdating = true;
        this._component.scrollTo({
          left: scrollLeft
        });
        this._rtlConfig.skipUpdating = false;
      }
    }
  },
  _updateRtlConfig() {
    if (this._isHorizontalAndRtlEnabled() && !this._rtlConfig.skipUpdating) {
      var {
        clientWidth,
        scrollLeft
      } = this._$container.get(0);
      var windowPixelRatio = this._getWindowDevicePixelRatio();
      if (this._rtlConfig.windowPixelRatio === windowPixelRatio && this._rtlConfig.clientWidth === clientWidth) {
        this._rtlConfig.scrollRight = this._getMaxOffset().left - scrollLeft;
      }
      this._rtlConfig.clientWidth = clientWidth;
      this._rtlConfig.windowPixelRatio = windowPixelRatio;
    }
  },
  _getWindowDevicePixelRatio: () => hasWindow() ? getWindow().devicePixelRatio : 1,
  scrollBy(distance) {
    var verticalScroller = this._scrollers[VERTICAL2];
    var horizontalScroller = this._scrollers[HORIZONTAL3];
    if (verticalScroller) {
      distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location;
    }
    if (horizontalScroller) {
      distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location;
    }
    this._prepareDirections(true);
    this._startAction();
    this._eventHandler("scrollBy", {
      x: distance.left,
      y: distance.top
    });
    this._endAction();
    this._updateRtlConfig();
  },
  validate(e) {
    if (isDxMouseWheelEvent(e) && isCommandKeyPressed(e)) {
      return false;
    }
    if (this.option("disabled")) {
      return false;
    }
    if (this.option("bounceEnabled")) {
      return true;
    }
    return isDxMouseWheelEvent(e) ? this._validateWheel(e) : this._validateMove(e);
  },
  _validateWheel(e) {
    var scroller = this._scrollers[this._wheelDirection(e)];
    var reachedMin = scroller._reachedMin();
    var reachedMax = scroller._reachedMax();
    var contentGreaterThanContainer = !reachedMin || !reachedMax;
    var locatedNotAtBound = !reachedMin && !reachedMax;
    var scrollFromMin = reachedMin && e.delta > 0;
    var scrollFromMax = reachedMax && e.delta < 0;
    var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);
    validated = validated || void 0 !== this._validateWheelTimer;
    if (validated) {
      clearTimeout(this._validateWheelTimer);
      this._validateWheelTimer = setTimeout(() => {
        this._validateWheelTimer = void 0;
      }, VALIDATE_WHEEL_TIMEOUT);
    }
    return validated;
  },
  _validateMove(e) {
    if (!this.option("scrollByContent") && !renderer_default(e.target).closest(".".concat(SCROLLABLE_SCROLLBAR_CLASS2)).length) {
      return false;
    }
    return this._allowedDirection();
  },
  getDirection(e) {
    return isDxMouseWheelEvent(e) ? this._wheelDirection(e) : this._allowedDirection();
  },
  _wheelProp() {
    return this._wheelDirection() === HORIZONTAL3 ? "left" : "top";
  },
  _wheelDirection(e) {
    switch (this.option("direction")) {
      case HORIZONTAL3:
        return HORIZONTAL3;
      case VERTICAL2:
        return VERTICAL2;
      default:
        return e && e.shiftKey ? HORIZONTAL3 : VERTICAL2;
    }
  },
  dispose() {
    this._resetActive();
    if (hoveredScrollable === this) {
      hoveredScrollable = null;
    }
    this._eventHandler("dispose");
    this._detachEventHandlers();
    this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS2);
    this._eventForUserAction = null;
    clearTimeout(this._validateWheelTimer);
    clearTimeout(this._updateHandlerTimeout);
  },
  _detachEventHandlers() {
    events_engine_default.off(this._$element, ".".concat(SCROLLABLE_SIMULATED_CURSOR));
    events_engine_default.off(this._$container, ".".concat(SCROLLABLE_SIMULATED_KEYBOARD));
  }
});

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scrollable.js
var SCROLLABLE = "dxScrollable";
var SCROLLABLE_STRATEGY2 = "dxScrollableStrategy";
var SCROLLABLE_CLASS = "dx-scrollable";
var SCROLLABLE_DISABLED_CLASS = "dx-scrollable-disabled";
var SCROLLABLE_CONTAINER_CLASS = "dx-scrollable-container";
var SCROLLABLE_WRAPPER_CLASS = "dx-scrollable-wrapper";
var SCROLLABLE_CONTENT_CLASS2 = "dx-scrollable-content";
var VERTICAL3 = "vertical";
var HORIZONTAL4 = "horizontal";
var BOTH = "both";
var Scrollable = dom_component_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      disabled: false,
      onScroll: null,
      direction: VERTICAL3,
      showScrollbar: "onScroll",
      useNative: true,
      bounceEnabled: true,
      scrollByContent: true,
      scrollByThumb: false,
      onUpdated: null,
      onStart: null,
      onEnd: null,
      onBounce: null,
      useSimulatedScrollbar: false,
      useKeyboard: true,
      inertiaEnabled: true,
      updateManually: false,
      _onVisibilityChanged: noop
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat(deviceDependentOptions(), [{
      device: () => nativeScrolling && "android" === devices_default.real().platform && !browser_default.mozilla,
      options: {
        useSimulatedScrollbar: true
      }
    }]);
  },
  _initOptions(options2) {
    this.callBase(options2);
    if (!("useSimulatedScrollbar" in options2)) {
      this._setUseSimulatedScrollbar();
    }
  },
  _setUseSimulatedScrollbar() {
    if (!this.initialOption("useSimulatedScrollbar")) {
      this.option("useSimulatedScrollbar", !this.option("useNative"));
    }
  },
  _init() {
    this.callBase();
    this._initScrollableMarkup();
    this._locked = false;
  },
  _visibilityChanged(visible) {
    if (visible) {
      this.update();
      this._updateRtlPosition();
      this._savedScrollOffset && this.scrollTo(this._savedScrollOffset);
      delete this._savedScrollOffset;
      this.option("_onVisibilityChanged")(this);
    } else {
      this._savedScrollOffset = this.scrollOffset();
    }
  },
  _initScrollableMarkup() {
    var $element = this.$element().addClass(SCROLLABLE_CLASS);
    var $container = this._$container = renderer_default("<div>").addClass(SCROLLABLE_CONTAINER_CLASS);
    var $wrapper = this._$wrapper = renderer_default("<div>").addClass(SCROLLABLE_WRAPPER_CLASS);
    var $content = this._$content = renderer_default("<div>").addClass(SCROLLABLE_CONTENT_CLASS2);
    $content.append($element.contents()).appendTo($container);
    $container.appendTo($wrapper);
    $wrapper.appendTo($element);
  },
  _dimensionChanged() {
    this.update();
    this._updateRtlPosition();
  },
  _initMarkup() {
    this.callBase();
    this._renderDirection();
  },
  _render() {
    this._renderStrategy();
    this._attachEventHandlers();
    this._renderDisabledState();
    this._createActions();
    this.update();
    this.callBase();
    this._updateRtlPosition(true);
  },
  _updateRtlPosition(needInitializeRtlConfig) {
    this._strategy.updateRtlPosition(needInitializeRtlConfig);
  },
  _getMaxOffset() {
    var {
      scrollWidth,
      clientWidth,
      scrollHeight,
      clientHeight
    } = renderer_default(this.container()).get(0);
    return {
      left: scrollWidth - clientWidth,
      top: scrollHeight - clientHeight
    };
  },
  _attachEventHandlers() {
    var strategy = this._strategy;
    var initEventData = {
      getDirection: strategy.getDirection.bind(strategy),
      validate: this._validate.bind(this),
      isNative: this.option("useNative"),
      scrollTarget: this._$container
    };
    events_engine_default.off(this._$wrapper, ".".concat(SCROLLABLE));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.init, SCROLLABLE), initEventData, this._initHandler.bind(this));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.start, SCROLLABLE), strategy.handleStart.bind(strategy));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.move, SCROLLABLE), strategy.handleMove.bind(strategy));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.end, SCROLLABLE), strategy.handleEnd.bind(strategy));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.cancel, SCROLLABLE), strategy.handleCancel.bind(strategy));
    events_engine_default.on(this._$wrapper, addNamespace(emitter_gesture_scroll_default.stop, SCROLLABLE), strategy.handleStop.bind(strategy));
    events_engine_default.off(this._$container, ".".concat(SCROLLABLE));
    events_engine_default.on(this._$container, addNamespace("scroll", SCROLLABLE), strategy.handleScroll.bind(strategy));
  },
  _validate(e) {
    if (this._isLocked()) {
      return false;
    }
    this._updateIfNeed();
    return this._moveIsAllowed(e);
  },
  _moveIsAllowed(e) {
    return this._strategy.validate(e);
  },
  handleMove(e) {
    this._strategy.handleMove(e);
  },
  _prepareDirections(value2) {
    this._strategy._prepareDirections(value2);
  },
  _initHandler() {
    var strategy = this._strategy;
    strategy.handleInit.apply(strategy, arguments);
  },
  _renderDisabledState() {
    this.$element().toggleClass(SCROLLABLE_DISABLED_CLASS, this.option("disabled"));
    if (this.option("disabled")) {
      this._lock();
    } else {
      this._unlock();
    }
  },
  _renderDirection() {
    this.$element().removeClass("dx-scrollable-".concat(HORIZONTAL4)).removeClass("dx-scrollable-".concat(VERTICAL3)).removeClass("dx-scrollable-".concat(BOTH)).addClass("dx-scrollable-".concat(this.option("direction")));
  },
  _renderStrategy() {
    this._createStrategy();
    this._strategy.render();
    this.$element().data(SCROLLABLE_STRATEGY2, this._strategy);
  },
  _createStrategy() {
    this._strategy = this.option("useNative") ? new m_scrollable_native_default(this) : new SimulatedStrategy(this);
  },
  _createActions() {
    this._strategy && this._strategy.createActions();
  },
  _clean() {
    this._strategy && this._strategy.dispose();
  },
  _optionChanged(args) {
    switch (args.name) {
      case "onStart":
      case "onEnd":
      case "onUpdated":
      case "onScroll":
      case "onBounce":
        this._createActions();
        break;
      case "direction":
        this._resetInactiveDirection();
        this._invalidate();
        break;
      case "useNative":
        this._setUseSimulatedScrollbar();
        this._invalidate();
        break;
      case "inertiaEnabled":
      case "scrollByThumb":
      case "bounceEnabled":
      case "useKeyboard":
      case "showScrollbar":
      case "useSimulatedScrollbar":
        this._invalidate();
        break;
      case "disabled":
        this._renderDisabledState();
        this._strategy && this._strategy.disabledChanged();
        break;
      case "updateManually":
      case "scrollByContent":
      case "_onVisibilityChanged":
        break;
      case "width":
        this.callBase(args);
        this._updateRtlPosition();
        break;
      default:
        this.callBase(args);
    }
  },
  _resetInactiveDirection() {
    var inactiveProp = this._getInactiveProp();
    if (!inactiveProp || !hasWindow()) {
      return;
    }
    var scrollOffset = this.scrollOffset();
    scrollOffset[inactiveProp] = 0;
    this.scrollTo(scrollOffset);
  },
  _getInactiveProp() {
    var direction = this.option("direction");
    if (direction === VERTICAL3) {
      return "left";
    }
    if (direction === HORIZONTAL4) {
      return "top";
    }
  },
  _location() {
    return this._strategy.location();
  },
  _normalizeLocation(location) {
    if (isPlainObject(location)) {
      var left = ensureDefined(location.left, location.x);
      var top = ensureDefined(location.top, location.y);
      return {
        left: isDefined(left) ? -left : void 0,
        top: isDefined(top) ? -top : void 0
      };
    }
    var direction = this.option("direction");
    return {
      left: direction !== VERTICAL3 ? -location : void 0,
      top: direction !== HORIZONTAL4 ? -location : void 0
    };
  },
  _isLocked() {
    return this._locked;
  },
  _lock() {
    this._locked = true;
  },
  _unlock() {
    if (!this.option("disabled")) {
      this._locked = false;
    }
  },
  _isDirection(direction) {
    var current2 = this.option("direction");
    if (direction === VERTICAL3) {
      return current2 !== HORIZONTAL4;
    }
    if (direction === HORIZONTAL4) {
      return current2 !== VERTICAL3;
    }
    return current2 === direction;
  },
  _updateAllowedDirection() {
    var allowedDirections = this._strategy._allowedDirections();
    if (this._isDirection(BOTH) && allowedDirections.vertical && allowedDirections.horizontal) {
      this._allowedDirectionValue = BOTH;
    } else if (this._isDirection(HORIZONTAL4) && allowedDirections.horizontal) {
      this._allowedDirectionValue = HORIZONTAL4;
    } else if (this._isDirection(VERTICAL3) && allowedDirections.vertical) {
      this._allowedDirectionValue = VERTICAL3;
    } else {
      this._allowedDirectionValue = null;
    }
  },
  _allowedDirection() {
    return this._allowedDirectionValue;
  },
  $content() {
    return this._$content;
  },
  content() {
    return getPublicElement(this._$content);
  },
  container() {
    return getPublicElement(this._$container);
  },
  scrollOffset() {
    return this._strategy._getScrollOffset();
  },
  _isRtlNativeStrategy() {
    var {
      useNative,
      rtlEnabled
    } = this.option();
    return useNative && rtlEnabled;
  },
  scrollTop() {
    return this.scrollOffset().top;
  },
  scrollLeft() {
    return this.scrollOffset().left;
  },
  clientHeight() {
    return getHeight(this._$container);
  },
  scrollHeight() {
    return getOuterHeight(this.$content());
  },
  clientWidth() {
    return getWidth(this._$container);
  },
  scrollWidth() {
    return getOuterWidth(this.$content());
  },
  update() {
    if (!this._strategy) {
      return;
    }
    return when(this._strategy.update()).done(() => {
      this._updateAllowedDirection();
    });
  },
  scrollBy(distance) {
    distance = this._normalizeLocation(distance);
    if (!distance.top && !distance.left) {
      return;
    }
    this._updateIfNeed();
    this._strategy.scrollBy(distance);
  },
  scrollTo(targetLocation) {
    targetLocation = this._normalizeLocation(targetLocation);
    this._updateIfNeed();
    var location = this._location();
    if (!this.option("useNative")) {
      targetLocation = this._strategy._applyScaleRatio(targetLocation);
      location = this._strategy._applyScaleRatio(location);
    }
    if (this._isRtlNativeStrategy()) {
      location.left -= this._getMaxOffset().left;
    }
    var distance = this._normalizeLocation({
      left: location.left - ensureDefined(targetLocation.left, location.left),
      top: location.top - ensureDefined(targetLocation.top, location.top)
    });
    if (!distance.top && !distance.left) {
      return;
    }
    this._strategy.scrollBy(distance);
  },
  scrollToElement(element, offset) {
    var $element = renderer_default(element);
    var elementInsideContent = this.$content().find(element).length;
    var elementIsInsideContent = $element.parents(".".concat(SCROLLABLE_CLASS)).length - $element.parents(".".concat(SCROLLABLE_CONTENT_CLASS2)).length === 0;
    if (!elementInsideContent || !elementIsInsideContent) {
      return;
    }
    var scrollPosition = {
      top: 0,
      left: 0
    };
    var direction = this.option("direction");
    if (direction !== VERTICAL3) {
      scrollPosition.left = this.getScrollElementPosition($element, HORIZONTAL4, offset);
    }
    if (direction !== HORIZONTAL4) {
      scrollPosition.top = this.getScrollElementPosition($element, VERTICAL3, offset);
    }
    this.scrollTo(scrollPosition);
  },
  getScrollElementPosition($element, direction, offset) {
    var scrollOffset = this.scrollOffset();
    return getElementLocationInternal($element.get(0), direction, renderer_default(this.container()).get(0), scrollOffset, offset);
  },
  _updateIfNeed() {
    if (!this.option("updateManually")) {
      this.update();
    }
  },
  _useTemplates: () => false,
  isRenovated: () => !!Scrollable.IS_RENOVATED_WIDGET
});
component_registrator_default(SCROLLABLE, Scrollable);
var m_scrollable_default = Scrollable;

// node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.js
var ui_scrollable_default = m_scrollable_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/views/m_rows_view.js
var ROWS_VIEW_CLASS = "rowsview";
var CONTENT_CLASS2 = "content";
var NOWRAP_CLASS2 = "nowrap";
var GROUP_ROW_CLASS2 = "dx-group-row";
var GROUP_CELL_CLASS2 = "dx-group-cell";
var DATA_ROW_CLASS = "dx-data-row";
var FREE_SPACE_CLASS = "dx-freespace-row";
var ROW_LINES_CLASS = "dx-row-lines";
var COLUMN_LINES_CLASS2 = "dx-column-lines";
var ROW_ALTERNATION_CLASS = "dx-row-alt";
var LAST_ROW_BORDER = "dx-last-row-border";
var EMPTY_CLASS = "dx-empty";
var ROW_INSERTED_ANIMATION_CLASS = "row-inserted-animation";
var CONTENT_FIXED_CLASS2 = "content-fixed";
var LOADPANEL_HIDE_TIMEOUT = 200;
function getMaxHorizontalScrollOffset(scrollable) {
  return scrollable ? Math.round(scrollable.scrollWidth() - scrollable.clientWidth()) : 0;
}
function isGroupRow(_ref) {
  var {
    rowType,
    column
  } = _ref;
  return "group" === rowType && isDefined(column.groupIndex) && !column.showWhenGrouped && !column.command;
}
function setWatcher(_ref2) {
  var {
    element,
    watch,
    getter,
    callBack
  } = _ref2;
  if (watch) {
    var dispose = watch(getter, callBack);
    events_engine_default.on(element, removeEvent, dispose);
  }
}
var defaultCellTemplate = function($container, options2) {
  var isDataTextEmpty = isEmpty(options2.text) && "data" === options2.rowType;
  var {
    text
  } = options2;
  var container = $container.get(0);
  if (isDataTextEmpty) {
    m_utils_default.setEmptyText($container);
  } else if (options2.column.encodeHtml) {
    container.textContent = text;
  } else {
    container.innerHTML = text;
  }
};
var getScrollableBottomPadding = function(that) {
  var scrollable = that.getScrollable();
  return scrollable ? Math.ceil(parseFloat(renderer_default(scrollable.content()).css("paddingBottom"))) : 0;
};
var RowsView = class extends ColumnsView {
  init() {
    super.init();
    this._editingController = this.getController("editing");
    this._resizingController = this.getController("resizing");
    this._columnsResizerController = this.getController("columnsResizer");
    this._focusController = this.getController("focus");
    this._keyboardNavigationController = this.getController("keyboardNavigation");
    this._validatingController = this.getController("validating");
    this._errorHandlingController = this.getController("errorHandling");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._rowHeight = 0;
    this._scrollTop = 0;
    this._scrollLeft = -1;
    this._scrollRight = 0;
    this._hasHeight = void 0;
    this._contentChanges = [];
    this._dataController.loadingChanged.add((isLoading, messageText) => {
      this.setLoading(isLoading, messageText);
    });
    this._dataController.dataSourceChanged.add(() => {
      if (this._scrollLeft >= 0 && !this._dataController.isLoading()) {
        this._handleScroll({
          component: this.getScrollable(),
          forceUpdateScrollPosition: true,
          scrollOffset: {
            top: this._scrollTop,
            left: this._scrollLeft
          }
        });
      }
    });
  }
  _getDefaultTemplate(column) {
    switch (column.command) {
      case "empty":
        return function(container) {
          container.html("&nbsp;");
        };
      default:
        return defaultCellTemplate;
    }
  }
  renderFocusState(params) {
  }
  _getDefaultGroupTemplate(column) {
    var summaryTexts = this.option("summary.texts");
    return function($container, options2) {
      var {
        data: data17
      } = options2;
      var text = "".concat(options2.column.caption, ": ").concat(options2.text);
      var container = $container.get(0);
      if (options2.summaryItems && options2.summaryItems.length) {
        text += " ".concat(m_utils_default.getGroupRowSummaryText(options2.summaryItems, summaryTexts));
      }
      if (data17) {
        if (options2.groupContinuedMessage && options2.groupContinuesMessage) {
          text += " (".concat(options2.groupContinuedMessage, ". ").concat(options2.groupContinuesMessage, ")");
        } else if (options2.groupContinuesMessage) {
          text += " (".concat(options2.groupContinuesMessage, ")");
        } else if (options2.groupContinuedMessage) {
          text += " (".concat(options2.groupContinuedMessage, ")");
        }
      }
      if (column.encodeHtml) {
        container.textContent = text;
      } else {
        container.innerHTML = text;
      }
    };
  }
  _update(change) {
  }
  _updateCell($cell, options2) {
    if (isGroupRow(options2)) {
      $cell.addClass(GROUP_CELL_CLASS2);
    }
    super._updateCell.apply(this, arguments);
  }
  _getCellTemplate(options2) {
    var {
      column
    } = options2;
    var template;
    if (isGroupRow(options2)) {
      template = column.groupCellTemplate || {
        allowRenderToDetachedContainer: true,
        render: this._getDefaultGroupTemplate(column)
      };
    } else if (("data" === options2.rowType || column.command) && column.cellTemplate) {
      template = column.cellTemplate;
    } else {
      template = {
        allowRenderToDetachedContainer: true,
        render: this._getDefaultTemplate(column)
      };
    }
    return template;
  }
  _createRow(row, tag) {
    var $row = super._createRow.apply(this, arguments);
    if (row) {
      var isGroup2 = "group" === row.rowType;
      var isDataRow2 = "data" === row.rowType;
      isDataRow2 && $row.addClass(DATA_ROW_CLASS);
      isDataRow2 && this.option("showRowLines") && $row.addClass(ROW_LINES_CLASS);
      this.option("showColumnLines") && $row.addClass(COLUMN_LINES_CLASS2);
      if (false === row.visible) {
        $row.hide();
      }
      if (isGroup2) {
        $row.addClass(GROUP_ROW_CLASS2);
        this.setAriaExpandedAttribute($row, row);
      }
    }
    return $row;
  }
  _rowPrepared($row, rowOptions, row) {
    if ("data" === rowOptions.rowType) {
      if (this.option("rowAlternationEnabled")) {
        this._isAltRow(row) && $row.addClass(ROW_ALTERNATION_CLASS);
        setWatcher({
          element: $row.get(0),
          watch: rowOptions.watch,
          getter: () => this._isAltRow(row),
          callBack: (value2) => {
            $row.toggleClass(ROW_ALTERNATION_CLASS, value2);
          }
        });
      }
      this._setAriaRowIndex(rowOptions, $row);
      setWatcher({
        element: $row.get(0),
        watch: rowOptions.watch,
        getter: () => rowOptions.rowIndex,
        callBack: () => this._setAriaRowIndex(rowOptions, $row)
      });
    }
    super._rowPrepared.apply(this, arguments);
  }
  _setAriaRowIndex(row, $row) {
    if (!$row.is("tr")) {
      return;
    }
    var {
      component
    } = this;
    var isPagerMode = "standard" === component.option("scrolling.mode") && !m_utils_default.isVirtualRowRendering(component);
    var rowIndex = row.rowIndex + 1;
    if (isPagerMode) {
      rowIndex = component.pageIndex() * component.pageSize() + rowIndex;
    } else {
      rowIndex += this._dataController.getRowIndexOffset();
    }
    this.setAria("rowindex", rowIndex, $row);
  }
  setAriaExpandedAttribute($row, row) {
    var description = row.isExpanded ? this.localize("dxDataGrid-ariaExpandedRow") : this.localize("dxDataGrid-ariaCollapsedRow");
    this.setAria("roledescription", description, $row);
  }
  _afterRowPrepared(e) {
    var arg = e.args[0];
    var dataController2 = this._dataController;
    var row = dataController2.getVisibleRows()[arg.rowIndex];
    var watch = this.option("integrationOptions.watchMethod");
    if (!arg.data || "data" !== arg.rowType || arg.isNewRow || !this.option("twoWayBindingEnabled") || !watch || !row) {
      return;
    }
    var dispose = watch(() => dataController2.generateDataValues(arg.data, arg.columns), () => {
      dataController2.repaintRows([row.rowIndex], this.option("repaintChangesOnly"));
    }, {
      deep: true,
      skipImmediate: true
    });
    events_engine_default.on(arg.rowElement, removeEvent, dispose);
  }
  _renderScrollable(force) {
    var $element = this.element();
    if (!$element.children().length) {
      $element.append("<div>");
    }
    if (force || !this._loadPanel) {
      this._renderLoadPanel($element, $element.parent(), this._dataController.isLocalStore());
    }
    if ((force || !this.getScrollable()) && this._dataController.isLoaded()) {
      var columns7 = this.getColumns();
      var allColumnsHasWidth = true;
      for (var i = 0; i < columns7.length; i++) {
        if (!columns7[i].width && !columns7[i].minWidth) {
          allColumnsHasWidth = false;
          break;
        }
      }
      if (this.option("columnAutoWidth") || this._hasHeight || allColumnsHasWidth || this._columnsController._isColumnFixing()) {
        this._renderScrollableCore($element);
      }
    }
  }
  _handleScroll(e) {
    var rtlEnabled = this.option("rtlEnabled");
    var isNativeScrolling = e.component.option("useNative");
    this._scrollTop = e.scrollOffset.top;
    this._scrollLeft = e.scrollOffset.left;
    var scrollLeft = e.scrollOffset.left;
    if (rtlEnabled) {
      this._scrollRight = getMaxHorizontalScrollOffset(e.component) - this._scrollLeft;
      if (isNativeScrolling) {
        scrollLeft = -this._scrollRight;
      }
      if (!this.isScrollbarVisible(true)) {
        this._scrollLeft = -1;
      }
    }
    this.scrollChanged.fire(_extends(_extends({}, e.scrollOffset), {
      left: scrollLeft
    }), this.name);
  }
  _renderScrollableCore($element) {
    var dxScrollableOptions = this._createScrollableOptions();
    var scrollHandler = this._handleScroll.bind(this);
    dxScrollableOptions.onScroll = scrollHandler;
    this._scrollable = this._createComponent($element, ui_scrollable_default, dxScrollableOptions);
    this._scrollableContainer = this._scrollable && renderer_default(this._scrollable.container());
  }
  _renderLoadPanel() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return m_utils_default.renderLoadPanel.apply(this, arguments);
  }
  _renderContent(contentElement, tableElement, isFixedTableRendering) {
    contentElement.empty().append(tableElement);
    return this._findContentElement();
  }
  _updateContent(newTableElement, change, isFixedTableRendering) {
    this._contentChanges.push({
      newTableElement,
      change,
      isFixedTableRendering
    });
    return this.waitAsyncTemplates().done(() => {
      var contentChanges = this._contentChanges;
      this._contentChanges = [];
      contentChanges.forEach((_ref3) => {
        var {
          newTableElement: newTableElement2,
          change: change2,
          isFixedTableRendering: isFixedTableRendering2
        } = _ref3;
        var tableElement = this.getTableElement(isFixedTableRendering2);
        var contentElement = this._findContentElement(isFixedTableRendering2);
        var changeType = null === change2 || void 0 === change2 ? void 0 : change2.changeType;
        var executors = [];
        var highlightChanges = this.option("highlightChanges");
        var rowInsertedClass = this.addWidgetPrefix(ROW_INSERTED_ANIMATION_CLASS);
        switch (changeType) {
          case "update":
            each(change2.rowIndices, (index, rowIndex) => {
              var _a;
              var $newRowElement = this._getRowElements(newTableElement2).eq(index);
              var dataChangeType = null === (_a = change2.changeTypes) || void 0 === _a ? void 0 : _a[index];
              var item = change2.items && change2.items[index];
              executors.push(() => {
                var _a2;
                var $rowElements = this._getRowElements(tableElement);
                var $rowElement = $rowElements.eq(rowIndex);
                switch (dataChangeType) {
                  case "update":
                    if (item) {
                      var columnIndices = null === (_a2 = change2.columnIndices) || void 0 === _a2 ? void 0 : _a2[index];
                      if (isDefined(item.visible) && item.visible !== $rowElement.is(":visible")) {
                        $rowElement.toggle(item.visible);
                      } else if (columnIndices) {
                        this._updateCells($rowElement, $newRowElement, columnIndices);
                      } else {
                        $rowElement.replaceWith($newRowElement);
                      }
                    }
                    break;
                  case "insert":
                    if (!$rowElements.length) {
                      if (tableElement) {
                        var target = $newRowElement.is("tbody") ? tableElement : tableElement.children("tbody");
                        $newRowElement.prependTo(target);
                      }
                    } else if ($rowElement.length) {
                      $newRowElement.insertBefore($rowElement);
                    } else {
                      $newRowElement.insertAfter($rowElements.last());
                    }
                    if (highlightChanges && change2.isLiveUpdate) {
                      $newRowElement.addClass(rowInsertedClass);
                    }
                    break;
                  case "remove":
                    $rowElement.remove();
                }
              });
            });
            each(executors, function() {
              this();
            });
            newTableElement2.remove();
            break;
          default:
            this.setTableElement(newTableElement2, isFixedTableRendering2);
            contentElement.addClass(this.addWidgetPrefix(CONTENT_CLASS2));
            this._setGridRole(contentElement);
            this._renderContent(contentElement, newTableElement2, isFixedTableRendering2);
        }
      });
    }).fail(() => {
      this._contentChanges = [];
    });
  }
  _getGridRoleName() {
    return "grid";
  }
  _setGridRole($element) {
    var _a;
    var hasData = !(null === (_a = this._dataController) || void 0 === _a ? void 0 : _a.isEmpty());
    var gridRoleName = this._getGridRoleName();
    if ((null === $element || void 0 === $element ? void 0 : $element.length) && hasData) {
      this.setAria("role", gridRoleName, $element);
    }
  }
  _createEmptyRow(className, isFixed, height) {
    var $cell;
    var $row = this._createRow();
    var columns7 = isFixed ? this.getFixedColumns() : this.getColumns();
    $row.addClass(className).toggleClass(COLUMN_LINES_CLASS2, this.option("showColumnLines"));
    for (var i = 0; i < columns7.length; i++) {
      $cell = this._createCell({
        column: columns7[i],
        rowType: "freeSpace",
        columnIndex: i,
        columns: columns7
      });
      isNumeric(height) && $cell.css("height", height);
      $row.append($cell);
    }
    this.setAria("role", "presentation", $row);
    return $row;
  }
  getFixedColumns() {
    throw new Error("Method not implemented.");
  }
  _appendEmptyRow($table, $emptyRow, location) {
    var $tBodies = this._getBodies($table);
    var isTableContainer = !$tBodies.length || $emptyRow.is("tbody");
    var $container = isTableContainer ? $table : $tBodies;
    if ("top" === location) {
      $container.first().prepend($emptyRow);
      if (isTableContainer) {
        var $colgroup = $container.children("colgroup");
        $container.prepend($colgroup);
      }
    } else {
      $container.last().append($emptyRow);
    }
  }
  _renderFreeSpaceRow($tableElement, change) {
    var $freeSpaceRowElement = this._createEmptyRow(FREE_SPACE_CLASS);
    $freeSpaceRowElement = this._wrapRowIfNeed($tableElement, $freeSpaceRowElement, "refresh" === (null === change || void 0 === change ? void 0 : change.changeType));
    this._appendEmptyRow($tableElement, $freeSpaceRowElement);
  }
  _checkRowKeys(options2) {
    var that = this;
    var rows = that._getRows(options2);
    var keyExpr = that._dataController.store() && that._dataController.store().key();
    keyExpr && rows.some((row) => {
      if ("data" === row.rowType && void 0 === row.key) {
        that._dataController.fireError("E1046", keyExpr);
        return true;
      }
      return;
    });
  }
  _needUpdateRowHeight(itemsCount) {
    return itemsCount > 0 && !this._rowHeight;
  }
  _getRowsHeight($tableElement) {
    $tableElement = $tableElement || this._tableElement;
    var $rowElements = $tableElement.children("tbody").children().not(".dx-virtual-row").not(".".concat(FREE_SPACE_CLASS));
    return $rowElements.toArray().reduce((sum, row) => sum + getBoundingRect(row).height, 0);
  }
  _updateRowHeight() {
    var $tableElement = this.getTableElement();
    var itemsCount = this._dataController.items().length;
    if ($tableElement && this._needUpdateRowHeight(itemsCount)) {
      var rowsHeight = this._getRowsHeight($tableElement);
      this._rowHeight = rowsHeight / itemsCount;
    }
  }
  _findContentElement(isFixedTableRendering) {
    var $content = this.element();
    var scrollable = this.getScrollable();
    if ($content) {
      if (scrollable) {
        $content = renderer_default(scrollable.content());
      }
      return $content.children().first();
    }
  }
  _getRowElements(tableElement) {
    var $rows = super._getRowElements(tableElement);
    return $rows && $rows.not(".".concat(FREE_SPACE_CLASS));
  }
  _getFreeSpaceRowElements($table) {
    var tableElements = $table || this.getTableElements();
    return tableElements && tableElements.children("tbody").children(".".concat(FREE_SPACE_CLASS));
  }
  _getNoDataText() {
    return this.option("noDataText");
  }
  _rowClick(e) {
    var item = this._dataController.items()[e.rowIndex] || {};
    this.executeAction("onRowClick", extend({
      evaluate(expr) {
        var getter = compileGetter(expr);
        return getter(item.data);
      }
    }, e, item));
  }
  _rowDblClick(e) {
    var item = this._dataController.items()[e.rowIndex] || {};
    this.executeAction("onRowDblClick", extend({}, e, item));
  }
  _getColumnsCountBeforeGroups(columns7) {
    for (var i = 0; i < columns7.length; i++) {
      if ("groupExpand" === columns7[i].type) {
        return i;
      }
    }
    return 0;
  }
  _getGroupCellOptions(options2) {
    var columnsCountBeforeGroups = this._getColumnsCountBeforeGroups(options2.columns);
    var columnIndex = (options2.row.groupIndex || 0) + columnsCountBeforeGroups;
    return {
      columnIndex,
      colspan: options2.columns.length - columnIndex - 1
    };
  }
  _needWrapRow() {
    return super._needWrapRow.apply(this, arguments) || !!this.option("dataRowTemplate");
  }
  _renderCells($row, options2) {
    if ("group" === options2.row.rowType) {
      this._renderGroupedCells($row, options2);
    } else if (options2.row.values) {
      super._renderCells($row, options2);
    }
  }
  _renderGroupedCells($row, options2) {
    var {
      row
    } = options2;
    var expandColumn;
    var {
      columns: columns7
    } = options2;
    var {
      rowIndex
    } = row;
    var isExpanded;
    var groupCellOptions = this._getGroupCellOptions(options2);
    for (var i = 0; i <= groupCellOptions.columnIndex; i++) {
      if (i === groupCellOptions.columnIndex && columns7[i].allowCollapsing && "infinite" !== options2.scrollingMode) {
        isExpanded = !!row.isExpanded;
        expandColumn = columns7[i];
      } else {
        isExpanded = null;
        expandColumn = {
          command: "expand",
          cssClass: columns7[i].cssClass
        };
      }
      if (this._needRenderCell(i, options2.columnIndices)) {
        this._renderCell($row, {
          value: isExpanded,
          row,
          rowIndex,
          column: expandColumn,
          columnIndex: i,
          columnIndices: options2.columnIndices,
          change: options2.change
        });
      }
    }
    var groupColumnAlignment = getDefaultAlignment(this.option("rtlEnabled"));
    var groupColumn = extend({}, columns7[groupCellOptions.columnIndex], {
      command: null,
      type: null,
      cssClass: null,
      width: null,
      showWhenGrouped: false,
      alignment: groupColumnAlignment
    });
    if (groupCellOptions.colspan > 1) {
      groupColumn.colspan = groupCellOptions.colspan;
    }
    if (this._needRenderCell(groupCellOptions.columnIndex + 1, options2.columnIndices)) {
      this._renderCell($row, {
        value: row.values[row.groupIndex],
        row,
        rowIndex,
        column: groupColumn,
        columnIndex: groupCellOptions.columnIndex + 1,
        columnIndices: options2.columnIndices,
        change: options2.change
      });
    }
  }
  _renderRows($table, options2) {
    var scrollingMode = this.option("scrolling.mode");
    super._renderRows($table, extend({
      scrollingMode
    }, options2));
    this._checkRowKeys(options2.change);
    this._renderFreeSpaceRow($table, options2.change);
    if (!this._hasHeight) {
      this.updateFreeSpaceRowHeight($table);
    }
  }
  _renderDataRowByTemplate($table, options2, dataRowTemplate) {
    var {
      row
    } = options2;
    var rowOptions = extend({
      columns: options2.columns
    }, row);
    var $tbody = this._createRow(row, "tbody");
    $tbody.appendTo($table);
    this.renderTemplate($tbody, dataRowTemplate, rowOptions, true, options2.change);
    this._rowPrepared($tbody, rowOptions, options2.row);
  }
  _renderRow($table, options2) {
    var {
      row
    } = options2;
    var {
      rowTemplate
    } = this.option();
    var dataRowTemplate = this.option("dataRowTemplate");
    if ("data" === row.rowType && dataRowTemplate) {
      this._renderDataRowByTemplate($table, options2, dataRowTemplate);
    } else if (("data" === row.rowType || "group" === row.rowType) && !isDefined(row.groupIndex) && rowTemplate) {
      this.renderTemplate($table, rowTemplate, extend({
        columns: options2.columns
      }, row), true);
    } else {
      super._renderRow($table, options2);
    }
  }
  _renderTable(options2) {
    var that = this;
    var $table = super._renderTable(options2);
    if (!isDefined(that.getTableElement())) {
      that.setTableElement($table);
      that._renderScrollable(true);
      that.resizeCompleted.add(function resizeCompletedHandler() {
        var scrollableInstance = that.getScrollable();
        if (scrollableInstance && that.element().closest(getWindow().document).length) {
          that.resizeCompleted.remove(resizeCompletedHandler);
          scrollableInstance._visibilityChanged(true);
        }
      });
    } else {
      that._renderScrollable();
    }
    return $table;
  }
  _createTable() {
    var $table = super._createTable.apply(this, arguments);
    if (this.option().rowTemplate || this.option().dataRowTemplate) {
      $table.appendTo(this.component.$element());
    }
    return $table;
  }
  _renderCore(change) {
    var $element = this.element();
    $element.addClass(this.addWidgetPrefix(ROWS_VIEW_CLASS)).toggleClass(this.addWidgetPrefix(NOWRAP_CLASS2), !this.option("wordWrapEnabled"));
    $element.toggleClass(EMPTY_CLASS, this._dataController.isEmpty());
    this.setAria("role", "presentation", $element);
    var $table = this._renderTable({
      change
    });
    var deferred = this._updateContent($table, change);
    super._renderCore(change);
    this._lastColumnWidths = null;
    return deferred;
  }
  _getRows(change) {
    return change && change.items || this._dataController.items();
  }
  _getCellOptions(options2) {
    var {
      column
    } = options2;
    var {
      row
    } = options2;
    var {
      data: data17
    } = row;
    var summaryCells = row && row.summaryCells;
    var {
      value: value2
    } = options2;
    var displayValue = m_utils_default.getDisplayValue(column, value2, data17, row.rowType);
    var parameters = super._getCellOptions(options2);
    parameters.value = value2;
    parameters.oldValue = options2.oldValue;
    parameters.displayValue = displayValue;
    parameters.row = row;
    parameters.key = row.key;
    parameters.data = data17;
    parameters.rowType = row.rowType;
    parameters.values = row.values;
    parameters.text = !column.command ? m_utils_default.formatValue(displayValue, column) : "";
    parameters.rowIndex = row.rowIndex;
    parameters.summaryItems = summaryCells && summaryCells[options2.columnIndex];
    parameters.resized = column.resizedCallbacks;
    if (isDefined(column.groupIndex) && !column.command) {
      var groupingTextsOptions = this.option("grouping.texts");
      var scrollingMode = this.option("scrolling.mode");
      if ("virtual" !== scrollingMode && "infinite" !== scrollingMode) {
        parameters.groupContinuesMessage = data17 && data17.isContinuationOnNextPage && groupingTextsOptions && groupingTextsOptions.groupContinuesMessage;
        parameters.groupContinuedMessage = data17 && data17.isContinuation && groupingTextsOptions && groupingTextsOptions.groupContinuedMessage;
      }
    }
    return parameters;
  }
  _setRowsOpacityCore($rows, visibleColumns, columnIndex, value2) {
    var columnsController = this._columnsController;
    var columns7 = columnsController.getColumns();
    var column = columns7 && columns7[columnIndex];
    var columnID = column && column.isBand && column.index;
    each($rows, (rowIndex, row) => {
      if (!renderer_default(row).hasClass(GROUP_ROW_CLASS2)) {
        for (var i = 0; i < visibleColumns.length; i++) {
          if (isNumeric(columnID) && columnsController.isParentBandColumn(visibleColumns[i].index, columnID) || visibleColumns[i].index === columnIndex) {
            $rows.eq(rowIndex).children().eq(i).css({
              opacity: value2
            });
            if (!isNumeric(columnID)) {
              break;
            }
          }
        }
      }
    });
  }
  _getDevicePixelRatio() {
    return getWindow().devicePixelRatio;
  }
  renderNoDataText() {
    return m_utils_default.renderNoDataText.apply(this, arguments);
  }
  getCellOptions(rowIndex, columnIdentifier) {
    var rowOptions = this._dataController.items()[rowIndex];
    var cellOptions;
    var column;
    if (rowOptions) {
      if (isString(columnIdentifier)) {
        column = this._columnsController.columnOption(columnIdentifier);
      } else {
        column = this._columnsController.getVisibleColumns()[columnIdentifier];
      }
      if (column) {
        cellOptions = this._getCellOptions({
          value: column.calculateCellValue(rowOptions.data),
          rowIndex: rowOptions.rowIndex,
          row: rowOptions,
          column
        });
      }
    }
    return cellOptions;
  }
  getRow(index) {
    if (index >= 0) {
      var rows = this._getRowElements();
      if (rows.length > index) {
        return renderer_default(rows[index]);
      }
    }
    return;
  }
  updateFreeSpaceRowHeight($table) {
    var dataController2 = this._dataController;
    var itemCount = dataController2.items(true).length;
    var contentElement = this._findContentElement();
    var freeSpaceRowElements = this._getFreeSpaceRowElements($table);
    if (freeSpaceRowElements && contentElement && dataController2.totalCount() >= 0) {
      var isFreeSpaceRowVisible = false;
      if (itemCount > 0) {
        if (!this._hasHeight) {
          var freeSpaceRowCount = dataController2.pageSize() - itemCount;
          var scrollingMode = this.option("scrolling.mode");
          if (freeSpaceRowCount > 0 && dataController2.pageCount() > 1 && "virtual" !== scrollingMode && "infinite" !== scrollingMode) {
            setHeight(freeSpaceRowElements, freeSpaceRowCount * this._rowHeight);
            isFreeSpaceRowVisible = true;
          }
          if (!isFreeSpaceRowVisible && $table) {
            setHeight(freeSpaceRowElements, 0);
          } else {
            freeSpaceRowElements.toggle(isFreeSpaceRowVisible);
          }
          this._updateLastRowBorder(isFreeSpaceRowVisible);
        } else {
          freeSpaceRowElements.hide();
          deferUpdate(() => {
            var scrollbarWidth = this.getScrollbarWidth(true);
            var elementHeightWithoutScrollbar = getHeight(this.element()) - scrollbarWidth;
            var contentHeight = getOuterHeight(contentElement);
            var showFreeSpaceRow = elementHeightWithoutScrollbar - contentHeight > 0;
            var rowsHeight = this._getRowsHeight(contentElement.children().first());
            var $tableElement = $table || this.getTableElements();
            var borderTopWidth = Math.ceil(parseFloat($tableElement.css("borderTopWidth")));
            var heightCorrection = this._getHeightCorrection();
            var resultHeight = elementHeightWithoutScrollbar - rowsHeight - borderTopWidth - heightCorrection;
            if (showFreeSpaceRow) {
              deferRender(() => {
                freeSpaceRowElements.css("height", resultHeight);
                isFreeSpaceRowVisible = true;
                freeSpaceRowElements.show();
              });
            }
            deferRender(() => this._updateLastRowBorder(isFreeSpaceRowVisible));
          });
        }
      } else {
        freeSpaceRowElements.css("height", 0);
        freeSpaceRowElements.show();
        this._updateLastRowBorder(true);
      }
    }
  }
  _getHeightCorrection() {
    var isZoomedWebkit = browser_default.webkit && this._getDevicePixelRatio() >= 2;
    var isChromeLatest = browser_default.chrome && browser_default.version >= 91;
    var hasExtraBorderTop = browser_default.mozilla && browser_default.version >= 70 && !this.option("showRowLines");
    return isZoomedWebkit || hasExtraBorderTop || isChromeLatest ? 1 : 0;
  }
  _columnOptionChanged(e) {
    var {
      optionNames
    } = e;
    if (e.changeTypes.grouping) {
      return;
    }
    if (optionNames.width || optionNames.visibleWidth) {
      super._columnOptionChanged(e);
      this._fireColumnResizedCallbacks();
    }
  }
  getScrollable() {
    return this._scrollable;
  }
  _handleDataChanged(change) {
    switch (change.changeType) {
      case "refresh":
      case "prepend":
      case "append":
      case "update":
        this.render(null, change);
        break;
      default:
        this._update(change);
    }
  }
  publicMethods() {
    return ["isScrollbarVisible", "getTopVisibleRowData", "getScrollbarWidth", "getCellElement", "getRowElement", "getScrollable"];
  }
  contentWidth() {
    return getWidth(this.element()) - this.getScrollbarWidth();
  }
  getScrollbarWidth(isHorizontal) {
    var scrollableContainer = this._scrollableContainer && this._scrollableContainer.get(0);
    var scrollbarWidth = 0;
    if (scrollableContainer) {
      if (!isHorizontal) {
        scrollbarWidth = scrollableContainer.clientWidth ? scrollableContainer.offsetWidth - scrollableContainer.clientWidth : 0;
      } else {
        scrollbarWidth = scrollableContainer.clientHeight ? scrollableContainer.offsetHeight - scrollableContainer.clientHeight : 0;
        scrollbarWidth += getScrollableBottomPadding(this);
      }
    }
    return scrollbarWidth > 0 ? scrollbarWidth : 0;
  }
  _fireColumnResizedCallbacks() {
    var lastColumnWidths = this._lastColumnWidths || [];
    var columnWidths = [];
    var columns7 = this.getColumns();
    for (var i = 0; i < columns7.length; i++) {
      columnWidths[i] = columns7[i].visibleWidth;
      if (columns7[i].resizedCallbacks && !isDefined(columns7[i].groupIndex) && lastColumnWidths[i] !== columnWidths[i]) {
        columns7[i].resizedCallbacks.fire(columnWidths[i]);
      }
    }
    this._lastColumnWidths = columnWidths;
  }
  _updateLastRowBorder(isFreeSpaceRowVisible) {
    if (this.option("showBorders") && !isFreeSpaceRowVisible) {
      this.element().addClass(LAST_ROW_BORDER);
    } else {
      this.element().removeClass(LAST_ROW_BORDER);
    }
  }
  _updateScrollable() {
    var scrollable = ui_scrollable_default.getInstance(this.element());
    if (scrollable) {
      scrollable.update();
      if (scrollable.option("useNative") || !(null === scrollable || void 0 === scrollable ? void 0 : scrollable.isRenovated())) {
        this._updateHorizontalScrollPosition();
      }
    }
  }
  _updateHorizontalScrollPosition() {
    var scrollable = this.getScrollable();
    var scrollLeft = scrollable && scrollable.scrollOffset().left;
    var rtlEnabled = this.option("rtlEnabled");
    if (rtlEnabled) {
      var maxHorizontalScrollOffset = getMaxHorizontalScrollOffset(scrollable);
      var scrollRight = maxHorizontalScrollOffset - scrollLeft;
      if (scrollRight !== this._scrollRight) {
        this._scrollLeft = maxHorizontalScrollOffset - this._scrollRight;
      }
    }
    if (this._scrollLeft >= 0 && scrollLeft !== this._scrollLeft) {
      scrollable.scrollTo({
        x: this._scrollLeft
      });
    }
  }
  _resizeCore() {
    var that = this;
    that._fireColumnResizedCallbacks();
    that._updateRowHeight();
    deferRender(() => {
      that._renderScrollable();
      that.renderNoDataText();
      that.updateFreeSpaceRowHeight();
      deferUpdate(() => {
        that._updateScrollable();
      });
    });
  }
  scrollTo(location) {
    var $element = this.element();
    var dxScrollable = $element && ui_scrollable_default.getInstance($element);
    if (dxScrollable) {
      dxScrollable.scrollTo(location);
    }
  }
  height(height) {
    var $element = this.element();
    if (0 === arguments.length) {
      return $element ? getOuterHeight($element, true) : 0;
    }
    if (isDefined(height) && $element) {
      this.hasHeight("auto" !== height);
      setHeight($element, height);
    }
  }
  hasHeight(hasHeight) {
    if (0 === arguments.length) {
      return !!this._hasHeight;
    }
    this._hasHeight = hasHeight;
    return;
  }
  setLoading(isLoading, messageText) {
    var loadPanel = this._loadPanel;
    var dataController2 = this._dataController;
    var loadPanelOptions = this.option("loadPanel") || {};
    var animation2 = dataController2.isLoaded() ? loadPanelOptions.animation : null;
    var $element = this.element();
    if (!hasWindow()) {
      return;
    }
    if (!loadPanel && void 0 !== messageText && dataController2.isLocalStore() && "auto" === loadPanelOptions.enabled && $element) {
      this._renderLoadPanel($element, $element.parent());
      loadPanel = this._loadPanel;
    }
    if (loadPanel) {
      var visibilityOptions = {
        message: messageText || loadPanelOptions.text,
        animation: animation2,
        visible: isLoading
      };
      if (isLoading) {
        visibilityOptions.position = m_utils_default.calculateLoadPanelPosition($element);
      }
      clearTimeout(this._hideLoadingTimeoutID);
      if (loadPanel.option("visible") && !isLoading) {
        this._hideLoadingTimeoutID = setTimeout(() => {
          loadPanel.option(visibilityOptions);
        }, LOADPANEL_HIDE_TIMEOUT);
      } else {
        loadPanel.option(visibilityOptions);
      }
    }
  }
  setRowsOpacity(columnIndex, value2) {
    var $rows = this._getRowElements().not(".".concat(GROUP_ROW_CLASS2)) || [];
    this._setRowsOpacityCore($rows, this.getColumns(), columnIndex, value2);
  }
  _getCellElementsCore(rowIndex) {
    var $cells = super._getCellElementsCore.apply(this, arguments);
    if ($cells) {
      var groupCellIndex = $cells.filter(".".concat(GROUP_CELL_CLASS2)).index();
      if (groupCellIndex >= 0 && $cells.length > groupCellIndex + 1) {
        return $cells.slice(0, groupCellIndex + 1);
      }
    }
    return $cells;
  }
  _getBoundaryVisibleItemIndex(isTop, isFloor) {
    var itemIndex = 0;
    var prevOffset = 0;
    var offset = 0;
    var viewportBoundary = this._scrollTop;
    var $contentElement = this._findContentElement();
    var contentElementOffsetTop = $contentElement && $contentElement.offset().top;
    var items = this._dataController.items();
    var tableElement = this.getTableElement();
    if (items.length && tableElement) {
      var rowElements = this._getRowElements(tableElement).filter(":visible");
      if (!isTop) {
        var height = getOuterHeight(this._hasHeight ? this.element() : getWindow());
        viewportBoundary += height;
      }
      for (itemIndex = 0; itemIndex < items.length; itemIndex++) {
        prevOffset = offset;
        var $rowElement = renderer_default(rowElements).eq(itemIndex);
        if ($rowElement.length) {
          offset = $rowElement.offset();
          offset = (isTop ? offset.top : offset.top + getOuterHeight($rowElement)) - contentElementOffsetTop;
          if (offset > viewportBoundary) {
            if (itemIndex) {
              if (isFloor || 2 * viewportBoundary < Math.round(offset + prevOffset)) {
                itemIndex--;
              }
            }
            break;
          }
        }
      }
      if (itemIndex && itemIndex === items.length) {
        itemIndex--;
      }
    }
    return itemIndex;
  }
  getTopVisibleItemIndex(isFloor) {
    return this._getBoundaryVisibleItemIndex(true, isFloor);
  }
  getBottomVisibleItemIndex(isFloor) {
    return this._getBoundaryVisibleItemIndex(false, isFloor);
  }
  getTopVisibleRowData() {
    var itemIndex = this.getTopVisibleItemIndex();
    var items = this._dataController.items();
    if (items[itemIndex]) {
      return items[itemIndex].data;
    }
    return;
  }
  _scrollToElement($element, offset) {
    var scrollable = this.getScrollable();
    scrollable && scrollable.scrollToElement($element, offset);
  }
  optionChanged(args) {
    super.optionChanged(args);
    switch (args.name) {
      case "wordWrapEnabled":
      case "showColumnLines":
      case "showRowLines":
      case "rowAlternationEnabled":
      case "rowTemplate":
      case "dataRowTemplate":
      case "twoWayBindingEnabled":
        this._invalidate(true, true);
        args.handled = true;
        break;
      case "scrolling":
        this._rowHeight = null;
        this._tableElement = null;
        args.handled = true;
        break;
      case "rtlEnabled":
        this._rowHeight = null;
        this._tableElement = null;
        break;
      case "loadPanel":
        this._tableElement = null;
        this._invalidate(true, "loadPanel.enabled" !== args.fullName);
        args.handled = true;
        break;
      case "noDataText":
        this.renderNoDataText();
        args.handled = true;
    }
  }
  setAriaOwns(headerTableId, footerTableId, isFixed) {
    var _a;
    var $contentElement = this._findContentElement();
    var $tableElement = this.getTableElement();
    if (null === $tableElement || void 0 === $tableElement ? void 0 : $tableElement.length) {
      this.setAria("owns", "".concat(null !== headerTableId && void 0 !== headerTableId ? headerTableId : "", " ").concat(null !== (_a = $tableElement.attr("id")) && void 0 !== _a ? _a : "", " ").concat(null !== footerTableId && void 0 !== footerTableId ? footerTableId : "").trim(), $contentElement);
    }
  }
  dispose() {
    super.dispose();
    clearTimeout(this._hideLoadingTimeoutID);
    this._scrollable && this._scrollable.dispose();
  }
  setScrollerSpacing(vScrollbarWidth, hScrollbarWidth) {
  }
  getFixedContentElement() {
    var _a;
    var fixedContentClass = this.addWidgetPrefix(CONTENT_FIXED_CLASS2);
    return null === (_a = this.element()) || void 0 === _a ? void 0 : _a.children(".".concat(fixedContentClass));
  }
  _restoreErrorRow(contentTable) {
  }
  isElementInside($element) {
    var $rowsViewElement = $element.closest(".".concat(this.addWidgetPrefix(ROWS_VIEW_CLASS)));
    return $rowsViewElement.is(this.element());
  }
};
var rowsModule = {
  defaultOptions: () => ({
    hoverStateEnabled: false,
    scrolling: {
      useNative: "auto"
    },
    loadPanel: {
      enabled: "auto",
      text: message_default.format("Loading"),
      width: 200,
      height: 90,
      showIndicator: true,
      indicatorSrc: "",
      showPane: true
    },
    dataRowTemplate: null,
    columnAutoWidth: false,
    noDataText: message_default.format("dxDataGrid-noDataText"),
    wordWrapEnabled: false,
    showColumnLines: true,
    showRowLines: false,
    rowAlternationEnabled: false,
    activeStateEnabled: false,
    twoWayBindingEnabled: true
  }),
  views: {
    rowsView: RowsView
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/rows.js
var RowsView2 = rowsModule.views.rowsView;
m_core_default.registerModule("rows", rowsModule);

// node_modules/devextreme/esm/events/hold.js
var abs = Math.abs;
var HOLD_EVENT_NAME = "dxhold";
var HOLD_TIMEOUT = 750;
var TOUCH_BOUNDARY = 5;
var HoldEmitter = emitter_default.inherit({
  start: function(e) {
    this._startEventData = eventData(e);
    this._startTimer(e);
  },
  _startTimer: function(e) {
    var holdTimeout = "timeout" in this ? this.timeout : HOLD_TIMEOUT;
    this._holdTimer = setTimeout((function() {
      this._requestAccept(e);
      this._fireEvent(HOLD_EVENT_NAME, e, {
        target: e.target
      });
      this._forgetAccept();
    }).bind(this), holdTimeout);
  },
  move: function(e) {
    if (this._touchWasMoved(e)) {
      this._cancel(e);
    }
  },
  _touchWasMoved: function(e) {
    var delta = eventDelta(this._startEventData, eventData(e));
    return abs(delta.x) > TOUCH_BOUNDARY || abs(delta.y) > TOUCH_BOUNDARY;
  },
  end: function() {
    this._stopTimer();
  },
  _stopTimer: function() {
    clearTimeout(this._holdTimer);
  },
  cancel: function() {
    this._stopTimer();
  },
  dispose: function() {
    this._stopTimer();
  }
});
emitter_registrator_default({
  emitter: HoldEmitter,
  bubble: true,
  events: [HOLD_EVENT_NAME]
});
var hold_default = {
  name: HOLD_EVENT_NAME
};

// node_modules/devextreme/esm/events/contextmenu.js
var CONTEXTMENU_NAMESPACE = "dxContexMenu";
var CONTEXTMENU_NAMESPACED_EVENT_NAME = addNamespace("contextmenu", CONTEXTMENU_NAMESPACE);
var HOLD_NAMESPACED_EVENT_NAME = addNamespace(hold_default.name, CONTEXTMENU_NAMESPACE);
var CONTEXTMENU_EVENT_NAME = "dxcontextmenu";
var ContextMenu = class_default.inherit({
  setup: function(element) {
    var $element = renderer_default(element);
    events_engine_default.on($element, CONTEXTMENU_NAMESPACED_EVENT_NAME, this._contextMenuHandler.bind(this));
    if (touch || devices_default.isSimulator()) {
      events_engine_default.on($element, HOLD_NAMESPACED_EVENT_NAME, this._holdHandler.bind(this));
    }
  },
  _holdHandler: function(e) {
    if (isMouseEvent(e) && !devices_default.isSimulator()) {
      return;
    }
    this._fireContextMenu(e);
  },
  _contextMenuHandler: function(e) {
    this._fireContextMenu(e);
  },
  _fireContextMenu: function(e) {
    return fireEvent({
      type: CONTEXTMENU_EVENT_NAME,
      originalEvent: e
    });
  },
  teardown: function(element) {
    events_engine_default.off(element, "." + CONTEXTMENU_NAMESPACE);
  }
});
event_registrator_default(CONTEXTMENU_EVENT_NAME, new ContextMenu());
var name = CONTEXTMENU_EVENT_NAME;

// node_modules/devextreme/esm/ui/widget/utils.ink_ripple.js
var INKRIPPLE_CLASS = "dx-inkripple";
var INKRIPPLE_WAVE_CLASS = "dx-inkripple-wave";
var INKRIPPLE_SHOWING_CLASS = "dx-inkripple-showing";
var INKRIPPLE_HIDING_CLASS = "dx-inkripple-hiding";
var DEFAULT_WAVE_SIZE_COEFFICIENT = 2;
var MAX_WAVE_SIZE = 4e3;
var ANIMATION_DURATION = 300;
var HOLD_ANIMATION_DURATION = 1e3;
var DEFAULT_WAVE_INDEX = 0;
var initConfig = function() {
  var config2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
  var {
    useHoldAnimation,
    waveSizeCoefficient,
    isCentered,
    wavesNumber
  } = config2;
  return {
    waveSizeCoefficient: waveSizeCoefficient || DEFAULT_WAVE_SIZE_COEFFICIENT,
    isCentered: isCentered || false,
    wavesNumber: wavesNumber || 1,
    durations: getDurations(null !== useHoldAnimation && void 0 !== useHoldAnimation ? useHoldAnimation : true)
  };
};
var render = function(args) {
  var config2 = initConfig(args);
  return {
    showWave: showWave.bind(this, config2),
    hideWave: hideWave.bind(this, config2)
  };
};
var getInkRipple = function(element) {
  var result2 = element.children("." + INKRIPPLE_CLASS);
  if (0 === result2.length) {
    result2 = renderer_default("<div>").addClass(INKRIPPLE_CLASS).appendTo(element);
  }
  return result2;
};
var getWaves = function(element, wavesNumber) {
  var inkRipple = getInkRipple(renderer_default(element));
  var result2 = inkRipple.children("." + INKRIPPLE_WAVE_CLASS).toArray();
  for (var i = result2.length; i < wavesNumber; i++) {
    var $currentWave = renderer_default("<div>").appendTo(inkRipple).addClass(INKRIPPLE_WAVE_CLASS);
    result2.push($currentWave[0]);
  }
  return renderer_default(result2);
};
var getWaveStyleConfig = function(args, config2) {
  var element = renderer_default(config2.element);
  var elementWidth = getOuterWidth(element);
  var elementHeight = getOuterHeight(element);
  var elementDiagonal = parseInt(Math.sqrt(elementWidth * elementWidth + elementHeight * elementHeight));
  var waveSize = Math.min(MAX_WAVE_SIZE, parseInt(elementDiagonal * args.waveSizeCoefficient));
  var left;
  var top;
  if (args.isCentered) {
    left = (elementWidth - waveSize) / 2;
    top = (elementHeight - waveSize) / 2;
  } else {
    var event = config2.event;
    var position2 = element.offset();
    var x = event.pageX - position2.left;
    var y = event.pageY - position2.top;
    left = x - waveSize / 2;
    top = y - waveSize / 2;
  }
  return {
    left,
    top,
    height: waveSize,
    width: waveSize
  };
};
function showWave(args, config2) {
  var $wave = getWaves(config2.element, args.wavesNumber).eq(config2.wave || DEFAULT_WAVE_INDEX);
  args.hidingTimeout && clearTimeout(args.hidingTimeout);
  hideSelectedWave($wave);
  $wave.css(getWaveStyleConfig(args, config2));
  args.showingTimeout = setTimeout(showingWaveHandler.bind(this, args, $wave), 0);
}
function showingWaveHandler(args, $wave) {
  var durationCss = args.durations.showingScale + "ms";
  $wave.addClass(INKRIPPLE_SHOWING_CLASS).css("transitionDuration", durationCss);
}
function getDurations(useHoldAnimation) {
  return {
    showingScale: useHoldAnimation ? HOLD_ANIMATION_DURATION : ANIMATION_DURATION,
    hidingScale: ANIMATION_DURATION,
    hidingOpacity: ANIMATION_DURATION
  };
}
function hideSelectedWave($wave) {
  $wave.removeClass(INKRIPPLE_HIDING_CLASS).css("transitionDuration", "");
}
function hideWave(args, config2) {
  args.showingTimeout && clearTimeout(args.showingTimeout);
  var $wave = getWaves(config2.element, config2.wavesNumber).eq(config2.wave || DEFAULT_WAVE_INDEX);
  var durations = args.durations;
  var durationCss = durations.hidingScale + "ms, " + durations.hidingOpacity + "ms";
  $wave.addClass(INKRIPPLE_HIDING_CLASS).removeClass(INKRIPPLE_SHOWING_CLASS).css("transitionDuration", durationCss);
  var animationDuration = Math.max(durations.hidingScale, durations.hidingOpacity);
  args.hidingTimeout = setTimeout(hideSelectedWave.bind(this, $wave), animationDuration);
}

// node_modules/devextreme/esm/core/templates/bindable_template.js
var watchChanges = function(rawData, watchMethod, fields, fieldsMap, callback) {
  var fieldsDispose;
  var globalDispose = ((data17, watchMethod2, callback2) => watchMethod2(() => data17, callback2))(rawData, watchMethod, function(dataWithRawFields) {
    fieldsDispose && fieldsDispose();
    if (isPrimitive(dataWithRawFields)) {
      callback(dataWithRawFields);
      return;
    }
    fieldsDispose = function(data17, watchMethod2, fields2, fieldsMap2, callback2) {
      var resolvedData = {};
      var missedFields = fields2.slice();
      var watchHandlers = fields2.map(function(name2) {
        var fieldGetter = fieldsMap2[name2];
        return watchMethod2(fieldGetter ? () => fieldGetter(data17) : () => data17[name2], function(value2) {
          resolvedData[name2] = value2;
          if (missedFields.length) {
            var index = missedFields.indexOf(name2);
            if (index >= 0) {
              missedFields.splice(index, 1);
            }
          }
          if (!missedFields.length) {
            callback2(resolvedData);
          }
        });
      });
      return function() {
        watchHandlers.forEach((dispose) => dispose());
      };
    }(dataWithRawFields, watchMethod, fields, fieldsMap, callback);
  });
  return function() {
    fieldsDispose && fieldsDispose();
    globalDispose && globalDispose();
  };
};
var BindableTemplate = class extends TemplateBase {
  constructor(render4, fields, watchMethod, fieldsMap) {
    super();
    this._render = render4;
    this._fields = fields;
    this._fieldsMap = fieldsMap || {};
    this._watchMethod = watchMethod;
  }
  _renderCore(options2) {
    var $container = renderer_default(options2.container);
    var dispose = watchChanges(options2.model, this._watchMethod, this._fields, this._fieldsMap, (data17) => {
      $container.empty();
      this._render($container, data17, options2.model);
    });
    events_engine_default.on($container, removeEvent, dispose);
    return $container.contents();
  }
};

// node_modules/devextreme/esm/core/utils/icon.js
var ICON_CLASS = "dx-icon";
var SVG_ICON_CLASS = "dx-svg-icon";
var getImageSourceType = (source) => {
  if (!source || "string" !== typeof source) {
    return false;
  }
  if (/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(source)) {
    return "svg";
  }
  if (/data:.*base64|\.|[^<\s]\/{1,1}/.test(source)) {
    return "image";
  }
  if (/^[\w-_]+$/.test(source)) {
    return "dxIcon";
  }
  if (/^\s?([\w-_:]\s?)+$/.test(source)) {
    return "fontIcon";
  }
  return false;
};
var getImageContainer = (source) => {
  switch (getImageSourceType(source)) {
    case "image":
      return renderer_default("<img>").attr("src", source).addClass(ICON_CLASS);
    case "fontIcon":
      return renderer_default("<i>").addClass("".concat(ICON_CLASS, " ").concat(source));
    case "dxIcon":
      return renderer_default("<i>").addClass("".concat(ICON_CLASS, " ").concat(ICON_CLASS, "-").concat(source));
    case "svg":
      return renderer_default("<i>").addClass("".concat(ICON_CLASS, " ").concat(SVG_ICON_CLASS)).append(source);
    default:
      return null;
  }
};

// node_modules/devextreme/esm/__internal/ui/selection/m_selection.strategy.js
var SelectionStrategy = class {
  constructor(options2) {
    this.options = options2;
    this._setOption("disabledItemKeys", []);
    this._clearItemKeys();
  }
  _clearItemKeys() {
    this._setOption("addedItemKeys", []);
    this._setOption("removedItemKeys", []);
    this._setOption("removedItems", []);
    this._setOption("addedItems", []);
  }
  validate() {
  }
  _setOption(name2, value2) {
    this.options[name2] = value2;
  }
  onSelectionChanged() {
    var {
      addedItemKeys
    } = this.options;
    var {
      removedItemKeys
    } = this.options;
    var {
      addedItems
    } = this.options;
    var {
      removedItems
    } = this.options;
    var {
      selectedItems
    } = this.options;
    var {
      selectedItemKeys
    } = this.options;
    var onSelectionChanged = this.options.onSelectionChanged || noop;
    this._clearItemKeys();
    onSelectionChanged({
      selectedItems,
      selectedItemKeys,
      addedItemKeys,
      removedItemKeys,
      addedItems,
      removedItems
    });
  }
  equalKeys(key1, key2) {
    if (this.options.equalByReference) {
      if (isObject(key1) && isObject(key2)) {
        return key1 === key2;
      }
    }
    return equalByValue(key1, key2);
  }
  getSelectableItems(items) {
    return items.filter((item) => !(null === item || void 0 === item ? void 0 : item.disabled));
  }
  _clearSelection(keys, preserve, isDeselect, isSelectAll) {
    keys = keys || [];
    keys = Array.isArray(keys) ? keys : [keys];
    this.validate();
    return this.selectedItemKeys(keys, preserve, isDeselect, isSelectAll);
  }
  _removeTemplateProperty(remoteFilter) {
    if (Array.isArray(remoteFilter)) {
      return remoteFilter.map((f) => this._removeTemplateProperty(f));
    }
    if (isObject(remoteFilter)) {
      delete remoteFilter.template;
    }
    return remoteFilter;
  }
  _loadFilteredData(remoteFilter, localFilter, select, isSelectAll) {
    var filterLength = encodeURI(JSON.stringify(this._removeTemplateProperty(remoteFilter))).length;
    var needLoadAllData = this.options.maxFilterLengthInRequest && filterLength > this.options.maxFilterLengthInRequest;
    var deferred = Deferred();
    var loadOptions = {
      filter: needLoadAllData ? void 0 : remoteFilter,
      select: needLoadAllData ? this.options.dataFields() : select || this.options.dataFields()
    };
    if (remoteFilter && 0 === remoteFilter.length) {
      deferred.resolve([]);
    } else {
      this.options.load(loadOptions).done((items) => {
        var filteredItems = isPlainObject(items) ? items.data : items;
        if (localFilter && !isSelectAll) {
          filteredItems = filteredItems.filter(localFilter);
        } else if (needLoadAllData) {
          filteredItems = query_default(filteredItems).filter(remoteFilter).toArray();
        }
        deferred.resolve(filteredItems);
      }).fail(deferred.reject.bind(deferred));
    }
    return deferred;
  }
  updateSelectedItemKeyHash(keys) {
    for (var i = 0; i < keys.length; i++) {
      var keyHash = getKeyHash(keys[i]);
      if (!isObject(keyHash)) {
        this.options.keyHashIndices[keyHash] = this.options.keyHashIndices[keyHash] || [];
        var keyIndices = this.options.keyHashIndices[keyHash];
        keyIndices.push(i);
      }
    }
  }
  _isAnyItemSelected(items) {
    for (var i = 0; i < items.length; i++) {
      if (this.options.isItemSelected(items[i])) {
        return;
      }
    }
    return false;
  }
  _getFullSelectAllState() {
    var items = this.options.plainItems();
    var dataFilter = this.options.filter();
    var selectedItems = this.options.ignoreDisabledItems ? this.options.selectedItems : this.options.selectedItems.filter((item) => !(null === item || void 0 === item ? void 0 : item.disabled));
    if (dataFilter) {
      selectedItems = query_default(selectedItems).filter(dataFilter).toArray();
    }
    var selectedItemsLength = selectedItems.length;
    var disabledItemsLength = items.length - this.getSelectableItems(items).length;
    if (!selectedItemsLength) {
      return this._isAnyItemSelected(items);
    }
    if (selectedItemsLength >= this.options.totalCount() - disabledItemsLength) {
      return true;
    }
    return;
  }
  _getVisibleSelectAllState() {
    var items = this.getSelectableItems(this.options.plainItems());
    var hasSelectedItems = false;
    var hasUnselectedItems = false;
    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      var itemData = this.options.getItemData(item);
      var key = this.options.keyOf(itemData);
      if (this.options.isSelectableItem(item)) {
        if (this.isItemKeySelected(key)) {
          hasSelectedItems = true;
        } else {
          hasUnselectedItems = true;
        }
      }
    }
    if (hasSelectedItems) {
      return !hasUnselectedItems ? true : void 0;
    }
    return false;
  }
};

// node_modules/devextreme/esm/__internal/ui/selection/m_selection.strategy.deferred.js
var DeferredStrategy = class extends SelectionStrategy {
  getSelectedItems() {
    return this._loadFilteredData(this.options.selectionFilter);
  }
  getSelectedItemKeys() {
    var d = Deferred();
    var that = this;
    var key = this.options.key();
    var select = isString(key) ? [key] : key;
    this._loadFilteredData(this.options.selectionFilter, null, select).done((items) => {
      var keys = items.map((item) => that.options.keyOf(item));
      d.resolve(keys);
    }).fail(d.reject);
    return d.promise();
  }
  selectedItemKeys(keys, preserve, isDeselect, isSelectAll) {
    if (isSelectAll) {
      var filter = this.options.filter();
      var needResetSelectionFilter = !filter || JSON.stringify(filter) === JSON.stringify(this.options.selectionFilter) && isDeselect;
      if (needResetSelectionFilter) {
        this._setOption("selectionFilter", isDeselect ? [] : null);
      } else {
        this._addSelectionFilter(isDeselect, filter, isSelectAll);
      }
    } else {
      if (!preserve) {
        this._setOption("selectionFilter", []);
      }
      for (var i = 0; i < keys.length; i++) {
        if (isDeselect) {
          this.removeSelectedItem(keys[i]);
        } else {
          this.addSelectedItem(keys[i], isSelectAll, !preserve);
        }
      }
    }
    this.onSelectionChanged();
    return Deferred().resolve();
  }
  setSelectedItems(keys) {
    this._setOption("selectionFilter", null);
    for (var i = 0; i < keys.length; i++) {
      this.addSelectedItem(keys[i]);
    }
  }
  isItemDataSelected(itemData) {
    return this.isItemKeySelected(itemData);
  }
  isItemKeySelected(itemData) {
    var {
      selectionFilter
    } = this.options;
    if (!selectionFilter) {
      return true;
    }
    return !!query_default([itemData]).filter(selectionFilter).toArray().length;
  }
  _getKeyExpr() {
    var keyField = this.options.key();
    if (Array.isArray(keyField) && 1 === keyField.length) {
      return keyField[0];
    }
    return keyField;
  }
  _normalizeKey(key) {
    var keyExpr = this.options.key();
    if (Array.isArray(keyExpr) && 1 === keyExpr.length) {
      return key[keyExpr[0]];
    }
    return key;
  }
  _getFilterByKey(key) {
    var keyField = this._getKeyExpr();
    var filter = [keyField, "=", this._normalizeKey(key)];
    if (Array.isArray(keyField)) {
      filter = [];
      for (var i = 0; i < keyField.length; i++) {
        filter.push([keyField[i], "=", key[keyField[i]]]);
        if (i !== keyField.length - 1) {
          filter.push("and");
        }
      }
    }
    return filter;
  }
  addSelectedItem(key, isSelectAll, skipFilter) {
    var filter = this._getFilterByKey(key);
    this._addSelectionFilter(false, filter, isSelectAll, skipFilter);
  }
  removeSelectedItem(key) {
    var filter = this._getFilterByKey(key);
    this._addSelectionFilter(true, filter);
  }
  validate() {
    var {
      key
    } = this.options;
    if (key && void 0 === key()) {
      throw ui_errors_default.Error("E1042", "Deferred selection");
    }
  }
  _findSubFilter(selectionFilter, filter) {
    if (!selectionFilter) {
      return -1;
    }
    var filterString = JSON.stringify(filter);
    for (var index = 0; index < selectionFilter.length; index++) {
      var subFilter = selectionFilter[index];
      if (subFilter && JSON.stringify(subFilter) === filterString) {
        return index;
      }
    }
    return -1;
  }
  _isLastSubFilter(selectionFilter, filter) {
    if (selectionFilter && filter) {
      return this._findSubFilter(selectionFilter, filter) === selectionFilter.length - 1 || 0 === this._findSubFilter([selectionFilter], filter);
    }
    return false;
  }
  _addFilterOperator(selectionFilter, filterOperator) {
    if (selectionFilter.length > 1 && isString(selectionFilter[1]) && selectionFilter[1] !== filterOperator) {
      selectionFilter = [selectionFilter];
    }
    if (selectionFilter.length) {
      selectionFilter.push(filterOperator);
    }
    return selectionFilter;
  }
  _denormalizeFilter(filter) {
    if (filter && isString(filter[0])) {
      filter = [filter];
    }
    return filter;
  }
  _isOnlyNegativeFiltersLeft(filters) {
    return filters.every((filterItem, i) => {
      if (i % 2 === 0) {
        return Array.isArray(filterItem) && "!" === filterItem[0];
      }
      return "and" === filterItem;
    });
  }
  _addSelectionFilter(isDeselect, filter, isSelectAll, skipFilter) {
    var currentFilter = isDeselect ? ["!", filter] : filter;
    var currentOperation = isDeselect ? "and" : "or";
    var needAddFilter = true;
    var selectionFilter = this.options.selectionFilter || [];
    selectionFilter = this._denormalizeFilter(selectionFilter);
    if ((null === selectionFilter || void 0 === selectionFilter ? void 0 : selectionFilter.length) && !skipFilter) {
      var removedIndex = this._removeSameFilter(selectionFilter, filter, isDeselect, isSelectAll);
      var filterIndex = this._removeSameFilter(selectionFilter, filter, !isDeselect);
      var shouldCleanFilter = isDeselect && (-1 !== removedIndex || -1 !== filterIndex) && this._isOnlyNegativeFiltersLeft(selectionFilter);
      if (shouldCleanFilter) {
        selectionFilter = [];
      }
      var isKeyOperatorsAfterRemoved = this._isKeyFilter(filter) && this._hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex);
      needAddFilter = filter.length && !isKeyOperatorsAfterRemoved;
    }
    if (needAddFilter) {
      selectionFilter = this._addFilterOperator(selectionFilter, currentOperation);
      selectionFilter.push(currentFilter);
    }
    selectionFilter = this._normalizeFilter(selectionFilter);
    this._setOption("selectionFilter", !isDeselect && !selectionFilter.length ? null : selectionFilter);
  }
  _normalizeFilter(filter) {
    if (filter && 1 === filter.length) {
      filter = filter[0];
    }
    return filter;
  }
  _removeFilterByIndex(filter, filterIndex, isSelectAll) {
    var operation = filter[1];
    if (filterIndex > 0) {
      filter.splice(filterIndex - 1, 2);
    } else {
      filter.splice(filterIndex, 2);
    }
    if (isSelectAll && "and" === operation) {
      filter.splice(0, filter.length);
    }
  }
  _isSimpleKeyFilter(filter, key) {
    return 3 === filter.length && filter[0] === key && "=" === filter[1];
  }
  _isKeyFilter(filter) {
    if (2 === filter.length && "!" === filter[0]) {
      return this._isKeyFilter(filter[1]);
    }
    var keyField = this._getKeyExpr();
    if (Array.isArray(keyField)) {
      if (filter.length !== 2 * keyField.length - 1) {
        return false;
      }
      for (var i = 0; i < keyField.length; i++) {
        if (i > 0 && "and" !== filter[2 * i - 1]) {
          return false;
        }
        if (!this._isSimpleKeyFilter(filter[2 * i], keyField[i])) {
          return false;
        }
      }
      return true;
    }
    return this._isSimpleKeyFilter(filter, keyField);
  }
  _hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex) {
    if (filterIndex >= 0) {
      for (var i = filterIndex; i < selectionFilter.length; i++) {
        if ("string" !== typeof selectionFilter[i] && !this._isKeyFilter(selectionFilter[i])) {
          return false;
        }
      }
      return true;
    }
    return false;
  }
  _removeSameFilter(selectionFilter, filter, inverted, isSelectAll) {
    filter = inverted ? ["!", filter] : filter;
    if (JSON.stringify(filter) === JSON.stringify(selectionFilter)) {
      selectionFilter.splice(0, selectionFilter.length);
      return 0;
    }
    var filterIndex = this._findSubFilter(selectionFilter, filter);
    if (filterIndex >= 0) {
      this._removeFilterByIndex(selectionFilter, filterIndex, isSelectAll);
      return filterIndex;
    }
    for (var i = 0; i < selectionFilter.length; i++) {
      if (Array.isArray(selectionFilter[i]) && selectionFilter[i].length > 2) {
        var _filterIndex = this._removeSameFilter(selectionFilter[i], filter, false, isSelectAll);
        if (_filterIndex >= 0) {
          if (!selectionFilter[i].length) {
            this._removeFilterByIndex(selectionFilter, i, isSelectAll);
          } else if (1 === selectionFilter[i].length) {
            selectionFilter[i] = selectionFilter[i][0];
          }
          return _filterIndex;
        }
      }
    }
    return -1;
  }
  getSelectAllState() {
    var filter = this.options.filter();
    var {
      selectionFilter
    } = this.options;
    if (!selectionFilter) {
      return true;
    }
    if (!selectionFilter.length) {
      return false;
    }
    if (!filter || !filter.length) {
      return;
    }
    selectionFilter = this._denormalizeFilter(selectionFilter);
    if (this._isLastSubFilter(selectionFilter, filter)) {
      return true;
    }
    if (this._isLastSubFilter(selectionFilter, ["!", filter])) {
      return false;
    }
    return;
  }
  loadSelectedItemsWithFilter() {
    var componentFilter = this.options.filter();
    var {
      selectionFilter
    } = this.options;
    var filter = componentFilter ? [componentFilter, "and", selectionFilter] : selectionFilter;
    return this._loadFilteredData(filter);
  }
};

// node_modules/devextreme/esm/core/utils/selection_filter.js
var SelectionFilterCreator = function(selectedItemKeys, isSelectAll) {
  this.getLocalFilter = function(keyGetter, equalKeys, equalByReference, keyExpr) {
    equalKeys = void 0 === equalKeys ? equalByValue : equalKeys;
    return functionFilter.bind(this, equalKeys, keyGetter, equalByReference, keyExpr);
  };
  this.getExpr = function(keyExpr) {
    if (!keyExpr) {
      return;
    }
    var filterExpr;
    selectedItemKeys.forEach(function(key, index) {
      filterExpr = filterExpr || [];
      var filterExprPart;
      if (index > 0) {
        filterExpr.push(isSelectAll ? "and" : "or");
      }
      if (isString(keyExpr)) {
        filterExprPart = getFilterForPlainKey(keyExpr, key);
      } else {
        filterExprPart = function(keyExpr2, itemKeyValue) {
          var filterExpr2 = [];
          for (var i = 0, length = keyExpr2.length; i < length; i++) {
            var currentKeyExpr = keyExpr2[i];
            var keyValueGetter = compileGetter(currentKeyExpr);
            var currentKeyValue = itemKeyValue && keyValueGetter(itemKeyValue);
            var filterExprPart2 = getFilterForPlainKey(currentKeyExpr, currentKeyValue);
            if (!filterExprPart2) {
              break;
            }
            if (i > 0) {
              filterExpr2.push(isSelectAll ? "or" : "and");
            }
            filterExpr2.push(filterExprPart2);
          }
          return filterExpr2;
        }(keyExpr, key);
      }
      filterExpr.push(filterExprPart);
    });
    if (filterExpr && 1 === filterExpr.length) {
      filterExpr = filterExpr[0];
    }
    return filterExpr;
  };
  this.getCombinedFilter = function(keyExpr, dataSourceFilter) {
    var forceCombinedFilter = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;
    var filterExpr = this.getExpr(keyExpr);
    var combinedFilter = filterExpr;
    if ((forceCombinedFilter || isSelectAll) && dataSourceFilter) {
      if (filterExpr) {
        combinedFilter = [];
        combinedFilter.push(filterExpr);
        combinedFilter.push(dataSourceFilter);
      } else {
        combinedFilter = dataSourceFilter;
      }
    }
    return combinedFilter;
  };
  var selectedItemKeyHashesMap;
  var normalizeKeys = function(keys, keyOf, keyExpr) {
    return Array.isArray(keyExpr) ? keys.map((key) => keyOf(key)) : keys;
  };
  function functionFilter(equalKeys, keyOf, equalByReference, keyExpr, item) {
    var key = keyOf(item);
    var keyHash;
    var i;
    if (!equalByReference) {
      keyHash = getKeyHash(key);
      if (!isObject(keyHash)) {
        var selectedKeyHashesMap = function(keyOf2, keyExpr2) {
          if (!selectedItemKeyHashesMap) {
            selectedItemKeyHashesMap = {};
            var normalizedKeys = normalizeKeys(selectedItemKeys, keyOf2, keyExpr2);
            for (var i2 = 0; i2 < normalizedKeys.length; i2++) {
              selectedItemKeyHashesMap[getKeyHash(normalizedKeys[i2])] = true;
            }
          }
          return selectedItemKeyHashesMap;
        }(keyOf, keyExpr);
        if (selectedKeyHashesMap[keyHash]) {
          return !isSelectAll;
        }
        return !!isSelectAll;
      }
    }
    for (i = 0; i < selectedItemKeys.length; i++) {
      if (equalKeys(selectedItemKeys[i], key)) {
        return !isSelectAll;
      }
    }
    return !!isSelectAll;
  }
  function getFilterForPlainKey(keyExpr, keyValue) {
    if (void 0 === keyValue) {
      return;
    }
    return [keyExpr, isSelectAll ? "<>" : "=", keyValue];
  }
};

// node_modules/devextreme/esm/__internal/ui/selection/m_selection.strategy.standard.js
var StandardStrategy = class extends SelectionStrategy {
  constructor(options2) {
    super(options2);
    this._initSelectedItemKeyHash();
  }
  _initSelectedItemKeyHash() {
    this._setOption("keyHashIndices", this.options.equalByReference ? null : {});
  }
  getSelectedItemKeys() {
    return this.options.selectedItemKeys.slice(0);
  }
  getSelectedItems() {
    return this.options.selectedItems.slice(0);
  }
  _preserveSelectionUpdate(items, isDeselect) {
    var {
      keyOf
    } = this.options;
    var keyIndicesToRemoveMap;
    var keyIndex;
    var i;
    if (!keyOf) {
      return;
    }
    var isBatchDeselect = isDeselect && items.length > 1 && !this.options.equalByReference;
    if (isBatchDeselect) {
      keyIndicesToRemoveMap = {};
    }
    for (i = 0; i < items.length; i++) {
      var item = items[i];
      var key = keyOf(item);
      if (isDeselect) {
        keyIndex = this.removeSelectedItem(key, keyIndicesToRemoveMap, null === item || void 0 === item ? void 0 : item.disabled);
        if (keyIndicesToRemoveMap && keyIndex >= 0) {
          keyIndicesToRemoveMap[keyIndex] = true;
        }
      } else {
        this.addSelectedItem(key, item);
      }
    }
    if (isBatchDeselect) {
      this._batchRemoveSelectedItems(keyIndicesToRemoveMap);
    }
  }
  _batchRemoveSelectedItems(keyIndicesToRemoveMap) {
    var selectedItemKeys = this.options.selectedItemKeys.slice(0);
    var selectedItems = this.options.selectedItems.slice(0);
    this.options.selectedItemKeys.length = 0;
    this.options.selectedItems.length = 0;
    for (var i = 0; i < selectedItemKeys.length; i++) {
      if (!keyIndicesToRemoveMap[i]) {
        this.options.selectedItemKeys.push(selectedItemKeys[i]);
        this.options.selectedItems.push(selectedItems[i]);
      }
    }
    this._initSelectedItemKeyHash();
    this.updateSelectedItemKeyHash(this.options.selectedItemKeys);
  }
  _loadSelectedItemsCore(keys, isDeselect, isSelectAll, filter) {
    var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;
    var deferred = Deferred();
    var key = this.options.key();
    if (!keys.length && !isSelectAll) {
      deferred.resolve([]);
      return deferred;
    }
    if (isSelectAll && isDeselect && !filter) {
      deferred.resolve(this.getSelectedItems());
      return deferred;
    }
    var selectionFilterCreator = new SelectionFilterCreator(keys, isSelectAll);
    var combinedFilter = selectionFilterCreator.getCombinedFilter(key, filter, forceCombinedFilter);
    var deselectedItems = [];
    if (isDeselect) {
      var {
        selectedItems
      } = this.options;
      deselectedItems = combinedFilter && keys.length !== selectedItems.length ? query_default(selectedItems).filter(combinedFilter).toArray() : selectedItems.slice(0);
    }
    var filteredItems = deselectedItems.length ? deselectedItems : this.options.plainItems(true).filter(this.options.isSelectableItem).map(this.options.getItemData);
    var localFilter = selectionFilterCreator.getLocalFilter(this.options.keyOf, this.equalKeys.bind(this), this.options.equalByReference, key);
    filteredItems = filteredItems.filter(localFilter);
    if (deselectedItems.length || !isSelectAll && filteredItems.length === keys.length) {
      deferred.resolve(filteredItems);
    } else {
      deferred = this._loadFilteredData(combinedFilter, localFilter, null, isSelectAll);
    }
    return deferred;
  }
  _replaceSelectionUpdate(items) {
    var internalKeys = [];
    var {
      keyOf
    } = this.options;
    if (!keyOf) {
      return;
    }
    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      var key = keyOf(item);
      internalKeys.push(key);
    }
    this.setSelectedItems(internalKeys, items);
  }
  _warnOnIncorrectKeys(keys) {
    var {
      allowNullValue
    } = this.options;
    for (var i = 0; i < keys.length; i++) {
      var key = keys[i];
      if ((!allowNullValue || null !== key) && !this.isItemKeySelected(key)) {
        ui_errors_default.log("W1002", key);
      }
    }
  }
  _isMultiSelectEnabled() {
    var {
      mode
    } = this.options;
    return "all" === mode || "multiple" === mode;
  }
  _requestInProgress() {
    var _a;
    return "pending" === (null === (_a = this._lastLoadDeferred) || void 0 === _a ? void 0 : _a.state());
  }
  _concatRequestsItems(keys, isDeselect, oldRequestItems, updatedKeys) {
    var selectedItems;
    var deselectedItems = isDeselect ? keys : [];
    if (updatedKeys) {
      selectedItems = updatedKeys;
    } else {
      selectedItems = removeDuplicates(keys, this.options.selectedItemKeys);
    }
    return {
      addedItems: oldRequestItems.added.concat(selectedItems),
      removedItems: oldRequestItems.removed.concat(deselectedItems),
      keys
    };
  }
  _collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys) {
    var isDeselectAll = isDeselect && isSelectAll;
    var oldRequestItems = {
      added: [],
      removed: []
    };
    var multiSelectEnabled = this._isMultiSelectEnabled();
    var lastRequestData = multiSelectEnabled ? this._lastRequestData : {};
    if (multiSelectEnabled) {
      if (this._shouldMergeWithLastRequest) {
        if (isDeselectAll) {
          this._lastLoadDeferred.reject();
          lastRequestData = {};
        } else if (!isKeysEqual(keys, this.options.selectedItemKeys)) {
          oldRequestItems.added = lastRequestData.addedItems;
          oldRequestItems.removed = lastRequestData.removedItems;
          if (!isDeselect) {
            this._lastLoadDeferred.reject();
          }
        }
      }
      lastRequestData = this._concatRequestsItems(keys, isDeselect, oldRequestItems, this._shouldMergeWithLastRequest ? void 0 : updatedKeys);
    }
    return lastRequestData;
  }
  _updateKeysByLastRequestData(keys, isDeselect, isSelectAll) {
    var _a, _b;
    var currentKeys = keys;
    if (this._isMultiSelectEnabled() && this._shouldMergeWithLastRequest && !isDeselect && !isSelectAll) {
      currentKeys = removeDuplicates(keys.concat(null === (_a = this._lastRequestData) || void 0 === _a ? void 0 : _a.addedItems), null === (_b = this._lastRequestData) || void 0 === _b ? void 0 : _b.removedItems);
      currentKeys = getUniqueValues(currentKeys);
    }
    return currentKeys;
  }
  _loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys) {
    var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;
    var that = this;
    var deferred = Deferred();
    var filter = that.options.filter();
    this._shouldMergeWithLastRequest = this._requestInProgress();
    this._lastRequestData = this._collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys);
    when(that._lastLoadDeferred).always(() => {
      var currentKeys = that._updateKeysByLastRequestData(keys, isDeselect, isSelectAll);
      that._shouldMergeWithLastRequest = false;
      that._loadSelectedItemsCore(currentKeys, isDeselect, isSelectAll, filter, forceCombinedFilter).done(deferred.resolve).fail(deferred.reject);
    });
    that._lastLoadDeferred = deferred;
    return deferred;
  }
  selectedItemKeys(keys, preserve, isDeselect, isSelectAll, updatedKeys) {
    var forceCombinedFilter = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : false;
    var that = this;
    var deferred = that._loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys, forceCombinedFilter);
    deferred.done((items) => {
      if (preserve) {
        that._preserveSelectionUpdate(items, isDeselect);
      } else {
        that._replaceSelectionUpdate(items);
      }
      that.onSelectionChanged();
    });
    return deferred;
  }
  addSelectedItem(key, itemData) {
    if (isDefined(itemData) && !this.options.ignoreDisabledItems && itemData.disabled) {
      if (-1 === this.options.disabledItemKeys.indexOf(key)) {
        this.options.disabledItemKeys.push(key);
      }
      return;
    }
    var keyHash = this._getKeyHash(key);
    if (-1 === this._indexOfSelectedItemKey(keyHash)) {
      if (!isObject(keyHash) && this.options.keyHashIndices) {
        this.options.keyHashIndices[keyHash] = [this.options.selectedItemKeys.length];
      }
      this.options.selectedItemKeys.push(key);
      this.options.addedItemKeys.push(key);
      this.options.addedItems.push(itemData);
      this.options.selectedItems.push(itemData);
    }
  }
  _getSelectedIndexByKey(key, ignoreIndicesMap) {
    var {
      selectedItemKeys
    } = this.options;
    for (var index = 0; index < selectedItemKeys.length; index++) {
      if ((!ignoreIndicesMap || !ignoreIndicesMap[index]) && this.equalKeys(selectedItemKeys[index], key)) {
        return index;
      }
    }
    return -1;
  }
  _getSelectedIndexByHash(key, ignoreIndicesMap) {
    var indices = this.options.keyHashIndices[key];
    if (indices && indices.length > 1 && ignoreIndicesMap) {
      indices = indices.filter((index) => !ignoreIndicesMap[index]);
    }
    return indices && indices[0] >= 0 ? indices[0] : -1;
  }
  _indexOfSelectedItemKey(key, ignoreIndicesMap) {
    var selectedIndex;
    if (this.options.equalByReference) {
      selectedIndex = this.options.selectedItemKeys.indexOf(key);
    } else if (isObject(key)) {
      selectedIndex = this._getSelectedIndexByKey(key, ignoreIndicesMap);
    } else {
      selectedIndex = this._getSelectedIndexByHash(key, ignoreIndicesMap);
    }
    return selectedIndex;
  }
  _shiftSelectedKeyIndices(keyIndex) {
    for (var currentKeyIndex = keyIndex; currentKeyIndex < this.options.selectedItemKeys.length; currentKeyIndex++) {
      var currentKey = this.options.selectedItemKeys[currentKeyIndex];
      var currentKeyHash = getKeyHash(currentKey);
      var currentKeyIndices = this.options.keyHashIndices[currentKeyHash];
      if (!currentKeyIndices) {
        continue;
      }
      for (var i = 0; i < currentKeyIndices.length; i++) {
        if (currentKeyIndices[i] > keyIndex) {
          currentKeyIndices[i]--;
        }
      }
    }
  }
  removeSelectedItem(key, keyIndicesToRemoveMap, isDisabled) {
    if (!this.options.ignoreDisabledItems && isDisabled) {
      return;
    }
    var keyHash = this._getKeyHash(key);
    var isBatchDeselect = !!keyIndicesToRemoveMap;
    var keyIndex = this._indexOfSelectedItemKey(keyHash, keyIndicesToRemoveMap);
    if (keyIndex < 0) {
      return keyIndex;
    }
    this.options.removedItemKeys.push(key);
    this.options.removedItems.push(this.options.selectedItems[keyIndex]);
    if (isBatchDeselect) {
      return keyIndex;
    }
    this.options.selectedItemKeys.splice(keyIndex, 1);
    this.options.selectedItems.splice(keyIndex, 1);
    if (isObject(keyHash) || !this.options.keyHashIndices) {
      return keyIndex;
    }
    var keyIndices = this.options.keyHashIndices[keyHash];
    if (!keyIndices) {
      return keyIndex;
    }
    keyIndices.shift();
    if (!keyIndices.length) {
      delete this.options.keyHashIndices[keyHash];
    }
    this._shiftSelectedKeyIndices(keyIndex);
    return keyIndex;
  }
  _updateAddedItemKeys(keys, items) {
    for (var i = 0; i < keys.length; i++) {
      if (!this.isItemKeySelected(keys[i])) {
        this.options.addedItemKeys.push(keys[i]);
        this.options.addedItems.push(items[i]);
      }
    }
  }
  _updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems) {
    for (var i = 0; i < oldSelectedKeys.length; i++) {
      if (!this.isItemKeySelected(oldSelectedKeys[i])) {
        this.options.removedItemKeys.push(oldSelectedKeys[i]);
        this.options.removedItems.push(oldSelectedItems[i]);
      }
    }
  }
  _isItemSelectionInProgress(key, checkPending) {
    var _a;
    var shouldCheckPending = checkPending && this._lastRequestData && this._requestInProgress();
    if (shouldCheckPending) {
      var addedItems = null !== (_a = this._lastRequestData.addedItems) && void 0 !== _a ? _a : [];
      return addedItems.includes(key);
    }
    return false;
  }
  _getKeyHash(key) {
    return this.options.equalByReference ? key : getKeyHash(key);
  }
  setSelectedItems(keys, items) {
    this._updateAddedItemKeys(keys, items);
    var oldSelectedKeys = this.options.selectedItemKeys;
    var oldSelectedItems = this.options.selectedItems;
    if (!this.options.equalByReference) {
      this._initSelectedItemKeyHash();
      this.updateSelectedItemKeyHash(keys);
    }
    this._setOption("selectedItemKeys", keys);
    this._setOption("selectedItems", items);
    this._updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems);
  }
  isItemDataSelected(itemData) {
    var options2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    var key = this.options.keyOf(itemData);
    return this.isItemKeySelected(key, options2);
  }
  isItemKeySelected(key) {
    var options2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    var result2 = this._isItemSelectionInProgress(key, options2.checkPending);
    if (!result2) {
      var keyHash = this._getKeyHash(key);
      var index = this._indexOfSelectedItemKey(keyHash);
      result2 = -1 !== index;
    }
    return result2;
  }
  getSelectAllState(visibleOnly) {
    if (visibleOnly) {
      return this._getVisibleSelectAllState();
    }
    return this._getFullSelectAllState();
  }
  loadSelectedItemsWithFilter() {
    var keyExpr = this.options.key();
    var keys = this.getSelectedItemKeys();
    var filter = this.options.filter();
    if (!keys.length) {
      return Deferred().resolve([]);
    }
    var selectionFilterCreator = new SelectionFilterCreator(keys);
    var combinedFilter = selectionFilterCreator.getCombinedFilter(keyExpr, filter, true);
    return this._loadFilteredData(combinedFilter);
  }
};

// node_modules/devextreme/esm/__internal/ui/selection/m_selection.js
var Selection = class {
  constructor(options2) {
    this.options = extend(this._getDefaultOptions(), options2, {
      selectedItemKeys: options2.selectedKeys || []
    });
    this._selectionStrategy = this.options.deferred ? new DeferredStrategy(this.options) : new StandardStrategy(this.options);
    this._focusedItemIndex = -1;
    if (!this.options.equalByReference) {
      this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys);
    }
  }
  _getDefaultOptions() {
    return {
      allowNullValue: false,
      deferred: false,
      equalByReference: false,
      mode: "multiple",
      selectedItems: [],
      selectionFilter: [],
      maxFilterLengthInRequest: 0,
      onSelectionChanged: noop,
      key: noop,
      keyOf: (item) => item,
      load: () => Deferred().resolve([]),
      totalCount: () => -1,
      isSelectableItem: () => true,
      isItemSelected: () => false,
      getItemData: (item) => item,
      dataFields: noop,
      filter: noop
    };
  }
  validate() {
    this._selectionStrategy.validate();
  }
  getSelectedItemKeys() {
    return this._selectionStrategy.getSelectedItemKeys();
  }
  getSelectedItems() {
    return this._selectionStrategy.getSelectedItems();
  }
  selectionFilter(value2) {
    if (void 0 === value2) {
      return this.options.selectionFilter;
    }
    var filterIsChanged = this.options.selectionFilter !== value2 && JSON.stringify(this.options.selectionFilter) !== JSON.stringify(value2);
    this.options.selectionFilter = value2;
    filterIsChanged && this.onSelectionChanged();
  }
  setSelection(keys, updatedKeys) {
    return this.selectedItemKeys(keys, false, false, false, updatedKeys);
  }
  select(keys) {
    return this.selectedItemKeys(keys, true);
  }
  deselect(keys) {
    return this.selectedItemKeys(keys, true, true);
  }
  selectedItemKeys(keys, preserve, isDeselect, isSelectAll, updatedKeys) {
    keys = null !== keys && void 0 !== keys ? keys : [];
    keys = Array.isArray(keys) ? keys : [keys];
    this.validate();
    return this._selectionStrategy.selectedItemKeys(keys, preserve, isDeselect, isSelectAll, updatedKeys);
  }
  clearSelection() {
    return this.selectedItemKeys([]);
  }
  _addSelectedItem(itemData, key) {
    this._selectionStrategy.addSelectedItem(key, itemData);
  }
  _removeSelectedItem(key) {
    this._selectionStrategy.removeSelectedItem(key);
  }
  _setSelectedItems(keys, items) {
    this._selectionStrategy.setSelectedItems(keys, items);
  }
  onSelectionChanged() {
    this._selectionStrategy.onSelectionChanged();
  }
  changeItemSelection(itemIndex, keys, setFocusOnly) {
    var _a, _b;
    var isSelectedItemsChanged;
    var items = this.options.plainItems();
    var item = items[itemIndex];
    var deferred;
    var {
      isVirtualPaging: isVirtualPaging2
    } = this.options;
    var allowLoadByRange = null === (_b = (_a = this.options).allowLoadByRange) || void 0 === _b ? void 0 : _b.call(_a);
    var {
      alwaysSelectByShift
    } = this.options;
    var indexOffset;
    var focusedItemNotInLoadedRange = false;
    var shiftFocusedItemNotInLoadedRange = false;
    var itemIsNotInLoadedRange = (index) => index >= 0 && !items.filter((it) => it.loadIndex === index).length;
    if (isVirtualPaging2 && isDefined(item)) {
      if (allowLoadByRange) {
        indexOffset = item.loadIndex - itemIndex;
        itemIndex = item.loadIndex;
      }
      focusedItemNotInLoadedRange = itemIsNotInLoadedRange(this._focusedItemIndex);
      if (isDefined(this._shiftFocusedItemIndex)) {
        shiftFocusedItemNotInLoadedRange = itemIsNotInLoadedRange(this._shiftFocusedItemIndex);
      }
    }
    if (!this.isSelectable() || !this.isDataItem(item)) {
      return false;
    }
    var itemData = this.options.getItemData(item);
    var itemKey = this.options.keyOf(itemData);
    keys = keys || {};
    var allowSelectByShift = keys.shift;
    if (false === alwaysSelectByShift && allowSelectByShift) {
      allowSelectByShift = false !== allowLoadByRange || !focusedItemNotInLoadedRange && !shiftFocusedItemNotInLoadedRange;
    }
    if (allowSelectByShift && "multiple" === this.options.mode && this._focusedItemIndex >= 0) {
      if (allowLoadByRange && (focusedItemNotInLoadedRange || shiftFocusedItemNotInLoadedRange)) {
        isSelectedItemsChanged = itemIndex !== this._shiftFocusedItemIndex || this._focusedItemIndex !== this._shiftFocusedItemIndex;
        if (isSelectedItemsChanged) {
          deferred = this.changeItemSelectionWhenShiftKeyInVirtualPaging(itemIndex);
        }
      } else {
        isSelectedItemsChanged = this.changeItemSelectionWhenShiftKeyPressed(itemIndex, items, indexOffset);
      }
    } else if (keys.control) {
      this._resetItemSelectionWhenShiftKeyPressed();
      if (!setFocusOnly) {
        var isSelected = this._selectionStrategy.isItemDataSelected(itemData);
        if ("single" === this.options.mode) {
          this.clearSelectedItems();
        }
        if (isSelected) {
          this._removeSelectedItem(itemKey);
        } else {
          this._addSelectedItem(itemData, itemKey);
        }
      }
      isSelectedItemsChanged = true;
    } else {
      this._resetItemSelectionWhenShiftKeyPressed();
      var isKeysEqual2 = this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0], itemKey);
      if (1 !== this.options.selectedItemKeys.length || !isKeysEqual2) {
        this._setSelectedItems([itemKey], [itemData]);
        isSelectedItemsChanged = true;
      }
    }
    if (isSelectedItemsChanged) {
      when(deferred).done(() => {
        this._focusedItemIndex = itemIndex;
        !setFocusOnly && this.onSelectionChanged();
      });
      return true;
    }
  }
  isDataItem(item) {
    return this.options.isSelectableItem(item);
  }
  isSelectable() {
    return "single" === this.options.mode || "multiple" === this.options.mode;
  }
  isItemDataSelected(data17) {
    return this._selectionStrategy.isItemDataSelected(data17, {
      checkPending: true
    });
  }
  isItemSelected(arg, options2) {
    return this._selectionStrategy.isItemKeySelected(arg, options2);
  }
  _resetItemSelectionWhenShiftKeyPressed() {
    delete this._shiftFocusedItemIndex;
  }
  _resetFocusedItemIndex() {
    this._focusedItemIndex = -1;
  }
  changeItemSelectionWhenShiftKeyInVirtualPaging(loadIndex) {
    var loadOptions = this.options.getLoadOptions(loadIndex, this._focusedItemIndex, this._shiftFocusedItemIndex);
    var deferred = Deferred();
    var indexOffset = loadOptions.skip;
    this.options.load(loadOptions).done((items) => {
      this.changeItemSelectionWhenShiftKeyPressed(loadIndex, items, indexOffset);
      deferred.resolve();
    });
    return deferred.promise();
  }
  changeItemSelectionWhenShiftKeyPressed(itemIndex, items, indexOffset) {
    var isSelectedItemsChanged = false;
    var itemIndexStep;
    var indexOffsetDefined = isDefined(indexOffset);
    var index = indexOffsetDefined ? this._focusedItemIndex - indexOffset : this._focusedItemIndex;
    var {
      keyOf
    } = this.options;
    var focusedItem = items[index];
    var focusedData = this.options.getItemData(focusedItem);
    var focusedKey = keyOf(focusedData);
    var isFocusedItemSelected = focusedItem && this.isItemDataSelected(focusedData);
    if (!isDefined(this._shiftFocusedItemIndex)) {
      this._shiftFocusedItemIndex = this._focusedItemIndex;
    }
    var data17;
    var itemKey;
    var startIndex;
    var endIndex;
    if (this._shiftFocusedItemIndex !== this._focusedItemIndex) {
      itemIndexStep = this._focusedItemIndex < this._shiftFocusedItemIndex ? 1 : -1;
      startIndex = indexOffsetDefined ? this._focusedItemIndex - indexOffset : this._focusedItemIndex;
      endIndex = indexOffsetDefined ? this._shiftFocusedItemIndex - indexOffset : this._shiftFocusedItemIndex;
      for (index = startIndex; index !== endIndex; index += itemIndexStep) {
        if (indexOffsetDefined || this.isDataItem(items[index])) {
          itemKey = keyOf(this.options.getItemData(items[index]));
          this._removeSelectedItem(itemKey);
          isSelectedItemsChanged = true;
        }
      }
    }
    if (itemIndex !== this._shiftFocusedItemIndex) {
      itemIndexStep = itemIndex < this._shiftFocusedItemIndex ? 1 : -1;
      startIndex = indexOffsetDefined ? itemIndex - indexOffset : itemIndex;
      endIndex = indexOffsetDefined ? this._shiftFocusedItemIndex - indexOffset : this._shiftFocusedItemIndex;
      for (index = startIndex; index !== endIndex; index += itemIndexStep) {
        if (indexOffsetDefined || this.isDataItem(items[index])) {
          data17 = this.options.getItemData(items[index]);
          itemKey = keyOf(data17);
          this._addSelectedItem(data17, itemKey);
          isSelectedItemsChanged = true;
        }
      }
    }
    if ((indexOffsetDefined || this.isDataItem(focusedItem)) && !isFocusedItemSelected) {
      this._addSelectedItem(focusedData, focusedKey);
      isSelectedItemsChanged = true;
    }
    return isSelectedItemsChanged;
  }
  clearSelectedItems() {
    this._setSelectedItems([], []);
  }
  selectAll(isOnePage) {
    this._resetFocusedItemIndex();
    if (isOnePage) {
      return this._onePageSelectAll(false);
    }
    return this.selectedItemKeys([], true, false, true);
  }
  deselectAll(isOnePage) {
    this._resetFocusedItemIndex();
    if (isOnePage) {
      return this._onePageSelectAll(true);
    }
    return this.selectedItemKeys([], true, true, true);
  }
  _onePageSelectAll(isDeselect) {
    var items = this._selectionStrategy.getSelectableItems(this.options.plainItems());
    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      if (this.isDataItem(item)) {
        var itemData = this.options.getItemData(item);
        var itemKey = this.options.keyOf(itemData);
        var isSelected = this.isItemSelected(itemKey);
        if (!isSelected && !isDeselect) {
          this._addSelectedItem(itemData, itemKey);
        }
        if (isSelected && isDeselect) {
          this._removeSelectedItem(itemKey);
        }
      }
    }
    this.onSelectionChanged();
    return Deferred().resolve();
  }
  getSelectAllState(visibleOnly) {
    return this._selectionStrategy.getSelectAllState(visibleOnly);
  }
  loadSelectedItemsWithFilter() {
    return this._selectionStrategy.loadSelectedItemsWithFilter();
  }
};

// node_modules/devextreme/esm/data_helper.js
var DATA_SOURCE_OPTIONS_METHOD2 = "_dataSourceOptions";
var DATA_SOURCE_CHANGED_METHOD2 = "_dataSourceChangedHandler";
var DATA_SOURCE_LOAD_ERROR_METHOD2 = "_dataSourceLoadErrorHandler";
var DATA_SOURCE_LOADING_CHANGED_METHOD2 = "_dataSourceLoadingChangedHandler";
var DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD2 = "_dataSourceFromUrlLoadMode";
var SPECIFIC_DATA_SOURCE_OPTION2 = "_getSpecificDataSourceOption";
var NORMALIZE_DATA_SOURCE2 = "_normalizeDataSource";
var DataHelperMixin2 = {
  postCtor: function() {
    this.on("disposing", (function() {
      this._disposeDataSource();
    }).bind(this));
  },
  _refreshDataSource: function() {
    this._initDataSource();
    this._loadDataSource();
  },
  _initDataSource: function() {
    var dataSourceOptions = SPECIFIC_DATA_SOURCE_OPTION2 in this ? this[SPECIFIC_DATA_SOURCE_OPTION2]() : this.option("dataSource");
    var widgetDataSourceOptions;
    var dataSourceType;
    this._disposeDataSource();
    if (dataSourceOptions) {
      if (dataSourceOptions instanceof DataSource) {
        this._isSharedDataSource = true;
        this._dataSource = dataSourceOptions;
      } else {
        widgetDataSourceOptions = DATA_SOURCE_OPTIONS_METHOD2 in this ? this[DATA_SOURCE_OPTIONS_METHOD2]() : {};
        dataSourceType = this._dataSourceType ? this._dataSourceType() : DataSource;
        dataSourceOptions = normalizeDataSourceOptions(dataSourceOptions, {
          fromUrlLoadMode: DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD2 in this && this[DATA_SOURCE_FROM_URL_LOAD_MODE_METHOD2]()
        });
        this._dataSource = new dataSourceType(extend(true, {}, widgetDataSourceOptions, dataSourceOptions));
      }
      if (NORMALIZE_DATA_SOURCE2 in this) {
        this._dataSource = this[NORMALIZE_DATA_SOURCE2](this._dataSource);
      }
      this._addDataSourceHandlers();
      this._initDataController();
    }
  },
  _initDataController: function() {
    var _this$option;
    var dataController2 = null === (_this$option = this.option) || void 0 === _this$option ? void 0 : _this$option.call(this, "_dataController");
    var dataSource = this._dataSource;
    if (dataController2) {
      this._dataController = dataController2;
    } else {
      this._dataController = new m_data_controller_default(dataSource);
    }
  },
  _addDataSourceHandlers: function() {
    if (DATA_SOURCE_CHANGED_METHOD2 in this) {
      this._addDataSourceChangeHandler();
    }
    if (DATA_SOURCE_LOAD_ERROR_METHOD2 in this) {
      this._addDataSourceLoadErrorHandler();
    }
    if (DATA_SOURCE_LOADING_CHANGED_METHOD2 in this) {
      this._addDataSourceLoadingChangedHandler();
    }
    this._addReadyWatcher();
  },
  _addReadyWatcher: function() {
    this.readyWatcher = (function(isLoading) {
      this._ready && this._ready(!isLoading);
    }).bind(this);
    this._dataSource.on("loadingChanged", this.readyWatcher);
  },
  _addDataSourceChangeHandler: function() {
    var dataSource = this._dataSource;
    this._proxiedDataSourceChangedHandler = (function(e) {
      this[DATA_SOURCE_CHANGED_METHOD2](dataSource.items(), e);
    }).bind(this);
    dataSource.on("changed", this._proxiedDataSourceChangedHandler);
  },
  _addDataSourceLoadErrorHandler: function() {
    this._proxiedDataSourceLoadErrorHandler = this[DATA_SOURCE_LOAD_ERROR_METHOD2].bind(this);
    this._dataSource.on("loadError", this._proxiedDataSourceLoadErrorHandler);
  },
  _addDataSourceLoadingChangedHandler: function() {
    this._proxiedDataSourceLoadingChangedHandler = this[DATA_SOURCE_LOADING_CHANGED_METHOD2].bind(this);
    this._dataSource.on("loadingChanged", this._proxiedDataSourceLoadingChangedHandler);
  },
  _loadDataSource: function() {
    var dataSource = this._dataSource;
    if (dataSource) {
      if (dataSource.isLoaded()) {
        this._proxiedDataSourceChangedHandler && this._proxiedDataSourceChangedHandler();
      } else {
        dataSource.load();
      }
    }
  },
  _loadSingle: function(key, value2) {
    key = "this" === key ? this._dataSource.key() || "this" : key;
    return this._dataSource.loadSingle(key, value2);
  },
  _isLastPage: function() {
    return !this._dataSource || this._dataSource.isLastPage() || !this._dataSource._pageSize;
  },
  _isDataSourceLoading: function() {
    return this._dataSource && this._dataSource.isLoading();
  },
  _disposeDataSource: function() {
    if (this._dataSource) {
      if (this._isSharedDataSource) {
        delete this._isSharedDataSource;
        this._proxiedDataSourceChangedHandler && this._dataSource.off("changed", this._proxiedDataSourceChangedHandler);
        this._proxiedDataSourceLoadErrorHandler && this._dataSource.off("loadError", this._proxiedDataSourceLoadErrorHandler);
        this._proxiedDataSourceLoadingChangedHandler && this._dataSource.off("loadingChanged", this._proxiedDataSourceLoadingChangedHandler);
        if (this._dataSource._eventsStrategy) {
          this._dataSource._eventsStrategy.off("loadingChanged", this.readyWatcher);
        }
      } else {
        this._dataSource.dispose();
      }
      delete this._dataSource;
      delete this._proxiedDataSourceChangedHandler;
      delete this._proxiedDataSourceLoadErrorHandler;
      delete this._proxiedDataSourceLoadingChangedHandler;
    }
  },
  getDataSource: function() {
    return this._dataSource || null;
  }
};
var data_helper_default = DataHelperMixin2;

// node_modules/devextreme/esm/__internal/ui/collection/m_item.js
var INVISIBLE_STATE_CLASS = "dx-state-invisible";
var DISABLED_STATE_CLASS = "dx-state-disabled";
var ITEM_CONTENT_PLACEHOLDER_CLASS = "dx-item-content-placeholder";
var forcibleWatcher = function(watchMethod, fn, callback) {
  var filteredCallback = function(value2) {
    if (oldValue !== value2) {
      callback(value2, oldValue);
      oldValue = value2;
    }
  };
  var oldValue;
  return {
    dispose: watchMethod(fn, filteredCallback),
    force() {
      filteredCallback(fn());
    }
  };
};
var CollectionItem = class_default.inherit({
  ctor($element, options2, rawData) {
    this._$element = $element;
    this._options = options2;
    this._rawData = rawData;
    attachInstanceToElement($element, this, this._dispose);
    this._render();
  },
  _render() {
    var $placeholder = renderer_default("<div>").addClass(ITEM_CONTENT_PLACEHOLDER_CLASS);
    this._$element.append($placeholder);
    this._watchers = [];
    this._renderWatchers();
  },
  _renderWatchers() {
    this._startWatcher("disabled", this._renderDisabled.bind(this));
    this._startWatcher("visible", this._renderVisible.bind(this));
  },
  _startWatcher(field, render4) {
    var rawData = this._rawData;
    var exprGetter = this._options.fieldGetter(field);
    var watcher = forcibleWatcher(this._options.watchMethod(), () => exprGetter(rawData), (value2, oldValue) => {
      this._dirty = true;
      render4(value2, oldValue);
    });
    this._watchers.push(watcher);
  },
  setDataField() {
    this._dirty = false;
    each(this._watchers, (_, watcher) => {
      watcher.force();
    });
    if (this._dirty) {
      return true;
    }
  },
  _renderDisabled(value2, oldValue) {
    this._$element.toggleClass(DISABLED_STATE_CLASS, !!value2);
    this._$element.attr("aria-disabled", !!value2);
    this._updateOwnerFocus(value2);
  },
  _updateOwnerFocus(isDisabled) {
    var ownerComponent = this._options.owner;
    if (ownerComponent && isDisabled) {
      ownerComponent._resetItemFocus(this._$element);
    }
  },
  _renderVisible(value2, oldValue) {
    this._$element.toggleClass(INVISIBLE_STATE_CLASS, void 0 !== value2 && !value2);
  },
  _dispose() {
    each(this._watchers, (_, watcher) => {
      watcher.dispose();
    });
  }
});
CollectionItem.getInstance = function($element) {
  return getInstanceByElement($element, this);
};
var m_item_default = CollectionItem;

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.base.js
var COLLECTION_CLASS = "dx-collection";
var ITEM_CLASS = "dx-item";
var CONTENT_CLASS_POSTFIX = "-content";
var ITEM_CONTENT_PLACEHOLDER_CLASS2 = "dx-item-content-placeholder";
var ITEM_DATA_KEY = "dxItemData";
var ITEM_INDEX_KEY = "dxItemIndex";
var ITEM_TEMPLATE_ID_PREFIX = "tmpl-";
var ITEMS_OPTIONS_NAME = "dxItem";
var SELECTED_ITEM_CLASS = "dx-item-selected";
var ITEM_RESPONSE_WAIT_CLASS = "dx-item-response-wait";
var EMPTY_COLLECTION = "dx-empty-collection";
var TEMPLATE_WRAPPER_CLASS = "dx-template-wrapper";
var ITEM_PATH_REGEX = /^([^.]+\[\d+\]\.)+([\w.]+)$/;
var ANONYMOUS_TEMPLATE_NAME = "item";
var FOCUS_UP = "up";
var FOCUS_DOWN = "down";
var FOCUS_LEFT = "left";
var FOCUS_RIGHT = "right";
var FOCUS_PAGE_UP = "pageup";
var FOCUS_PAGE_DOWN = "pagedown";
var FOCUS_LAST = "last";
var FOCUS_FIRST = "first";
var CollectionWidget = ui_widget_default.inherit({
  _activeStateUnit: ".".concat(ITEM_CLASS),
  _supportedKeys() {
    var move2 = function(location, e) {
      if (!isCommandKeyPressed(e)) {
        e.preventDefault();
        e.stopPropagation();
        this._moveFocus(location, e);
      }
    };
    return extend(this.callBase(), {
      space: function(e) {
        e.preventDefault();
        this._enterKeyHandler(e);
      },
      enter: this._enterKeyHandler,
      leftArrow: move2.bind(this, FOCUS_LEFT),
      rightArrow: move2.bind(this, FOCUS_RIGHT),
      upArrow: move2.bind(this, FOCUS_UP),
      downArrow: move2.bind(this, FOCUS_DOWN),
      pageUp: move2.bind(this, FOCUS_UP),
      pageDown: move2.bind(this, FOCUS_DOWN),
      home: move2.bind(this, FOCUS_FIRST),
      end: move2.bind(this, FOCUS_LAST)
    });
  },
  _enterKeyHandler(e) {
    var $itemElement = renderer_default(this.option("focusedElement"));
    if (!$itemElement.length) {
      return;
    }
    var itemData = this._getItemData($itemElement);
    if (null === itemData || void 0 === itemData ? void 0 : itemData.onClick) {
      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {
        event: e
      });
    }
    this._itemClickHandler(extend({}, e, {
      target: $itemElement.get(0),
      currentTarget: $itemElement.get(0)
    }));
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      selectOnFocus: false,
      loopItemFocus: true,
      items: [],
      itemTemplate: "item",
      onItemRendered: null,
      onItemClick: null,
      onItemHold: null,
      itemHoldTimeout: 750,
      onItemContextMenu: null,
      onFocusedItemChanged: null,
      noDataText: message_default.format("dxCollectionWidget-noDataText"),
      encodeNoDataText: false,
      dataSource: null,
      _dataController: null,
      _itemAttributes: {},
      itemTemplateProperty: "template",
      focusOnSelectedItem: true,
      focusedElement: null,
      displayExpr: void 0,
      disabledExpr: (data17) => data17 ? data17.disabled : void 0,
      visibleExpr: (data17) => data17 ? data17.visible : void 0
    });
  },
  _init() {
    this._compileDisplayGetter();
    this._initDataController();
    this.callBase();
    this._cleanRenderedItems();
    this._refreshDataSource();
  },
  _compileDisplayGetter() {
    var displayExpr = this.option("displayExpr");
    this._displayGetter = displayExpr ? compileGetter(this.option("displayExpr")) : void 0;
  },
  _initTemplates() {
    this._initItemsFromMarkup();
    this._initDefaultItemTemplate();
    this.callBase();
  },
  _getAnonymousTemplateName: () => ANONYMOUS_TEMPLATE_NAME,
  _initDefaultItemTemplate() {
    var fieldsMap = this._getFieldsMap();
    this._templateManager.addDefaultTemplates({
      item: new BindableTemplate(($container, data17) => {
        if (isPlainObject(data17)) {
          this._prepareDefaultItemTemplate(data17, $container);
        } else {
          if (fieldsMap && isFunction(fieldsMap.text)) {
            data17 = fieldsMap.text(data17);
          }
          $container.text(String(ensureDefined(data17, "")));
        }
      }, this._getBindableFields(), this.option("integrationOptions.watchMethod"), fieldsMap)
    });
  },
  _getBindableFields: () => ["text", "html"],
  _getFieldsMap() {
    if (this._displayGetter) {
      return {
        text: this._displayGetter
      };
    }
  },
  _prepareDefaultItemTemplate(data17, $container) {
    if (isDefined(data17.text)) {
      $container.text(data17.text);
    }
    if (isDefined(data17.html)) {
      $container.html(data17.html);
    }
  },
  _initItemsFromMarkup() {
    var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);
    if (!rawItems.length || this.option("items").length) {
      return;
    }
    var items = rawItems.map((_ref) => {
      var {
        element,
        options: options2
      } = _ref;
      var isTemplateRequired = /\S/.test(element.innerHTML) && !options2.template;
      if (isTemplateRequired) {
        options2.template = this._prepareItemTemplate(element);
      } else {
        renderer_default(element).remove();
      }
      return options2;
    });
    this.option("items", items);
  },
  _prepareItemTemplate(item) {
    var templateId = ITEM_TEMPLATE_ID_PREFIX + new guid_default();
    var $template = renderer_default(item).detach().clone().removeAttr("data-options").addClass(TEMPLATE_WRAPPER_CLASS);
    this._saveTemplate(templateId, $template);
    return templateId;
  },
  _dataSourceOptions: () => ({
    paginate: false
  }),
  _cleanRenderedItems() {
    this._renderedItemsCount = 0;
  },
  _focusTarget() {
    return this.$element();
  },
  _focusInHandler(e) {
    this.callBase.apply(this, arguments);
    if (!this._isFocusTarget(e.target)) {
      return;
    }
    var $focusedElement = renderer_default(this.option("focusedElement"));
    if ($focusedElement.length) {
      this._setFocusedItem($focusedElement);
    } else {
      var $activeItem = this._getActiveItem();
      if ($activeItem.length) {
        this.option("focusedElement", getPublicElement($activeItem));
      }
    }
  },
  _focusOutHandler() {
    this.callBase.apply(this, arguments);
    var $target = renderer_default(this.option("focusedElement"));
    this._updateFocusedItemState($target, false);
  },
  _findActiveTarget($element) {
    return $element.find(this._activeStateUnit);
  },
  _getActiveItem(last) {
    var $focusedElement = renderer_default(this.option("focusedElement"));
    if ($focusedElement.length) {
      return $focusedElement;
    }
    var index = this.option("focusOnSelectedItem") ? this.option("selectedIndex") : 0;
    var activeElements = this._getActiveElement();
    var lastIndex = activeElements.length - 1;
    if (index < 0) {
      index = last ? lastIndex : 0;
    }
    return activeElements.eq(index);
  },
  _moveFocus(location) {
    var $items = this._getAvailableItems();
    var $newTarget;
    switch (location) {
      case FOCUS_PAGE_UP:
      case FOCUS_UP:
        $newTarget = this._prevItem($items);
        break;
      case FOCUS_PAGE_DOWN:
      case FOCUS_DOWN:
        $newTarget = this._nextItem($items);
        break;
      case FOCUS_RIGHT:
        $newTarget = this.option("rtlEnabled") ? this._prevItem($items) : this._nextItem($items);
        break;
      case FOCUS_LEFT:
        $newTarget = this.option("rtlEnabled") ? this._nextItem($items) : this._prevItem($items);
        break;
      case FOCUS_FIRST:
        $newTarget = $items.first();
        break;
      case FOCUS_LAST:
        $newTarget = $items.last();
        break;
      default:
        return false;
    }
    if (0 !== $newTarget.length) {
      this.option("focusedElement", getPublicElement($newTarget));
    }
  },
  _getVisibleItems($itemElements) {
    $itemElements = $itemElements || this._itemElements();
    return $itemElements.filter(":visible");
  },
  _getAvailableItems($itemElements) {
    return this._getVisibleItems($itemElements);
  },
  _prevItem($items) {
    var $target = this._getActiveItem();
    var targetIndex = $items.index($target);
    var $last = $items.last();
    var $item = renderer_default($items[targetIndex - 1]);
    var loop = this.option("loopItemFocus");
    if (0 === $item.length && loop) {
      $item = $last;
    }
    return $item;
  },
  _nextItem($items) {
    var $target = this._getActiveItem(true);
    var targetIndex = $items.index($target);
    var $first = $items.first();
    var $item = renderer_default($items[targetIndex + 1]);
    var loop = this.option("loopItemFocus");
    if (0 === $item.length && loop) {
      $item = $first;
    }
    return $item;
  },
  _selectFocusedItem($target) {
    this.selectItem($target);
  },
  _updateFocusedItemState(target, isFocused, needCleanItemId) {
    var $target = renderer_default(target);
    if ($target.length) {
      this._refreshActiveDescendant();
      this._refreshItemId($target, needCleanItemId);
      this._toggleFocusClass(isFocused, $target);
    }
    this._updateParentActiveDescendant();
  },
  _refreshActiveDescendant($target) {
    this.setAria("activedescendant", isDefined(this.option("focusedElement")) ? this.getFocusedItemId() : null, $target);
  },
  _refreshItemId($target, needCleanItemId) {
    if (!needCleanItemId && this.option("focusedElement")) {
      this.setAria("id", this.getFocusedItemId(), $target);
    } else {
      this.setAria("id", null, $target);
    }
  },
  _isDisabled: ($element) => $element && "true" === renderer_default($element).attr("aria-disabled"),
  _setFocusedItem($target) {
    if (!$target || !$target.length) {
      return;
    }
    this._updateFocusedItemState($target, true);
    this.onFocusedItemChanged(this.getFocusedItemId());
    var {
      selectOnFocus
    } = this.option();
    var isTargetDisabled = this._isDisabled($target);
    if (selectOnFocus && !isTargetDisabled) {
      this._selectFocusedItem($target);
    }
  },
  _findItemElementByItem(item) {
    var result2 = renderer_default();
    var that = this;
    this.itemElements().each(function() {
      var $item = renderer_default(this);
      if ($item.data(that._itemDataKey()) === item) {
        result2 = $item;
        return false;
      }
    });
    return result2;
  },
  _getIndexByItem(item) {
    return this.option("items").indexOf(item);
  },
  _itemOptionChanged(item, property, value2, oldValue) {
    var $item = this._findItemElementByItem(item);
    if (!$item.length) {
      return;
    }
    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value2)) {
      this._refreshItem($item, item);
    }
    var isDisabling = "disabled" === property && value2;
    if (isDisabling) {
      this._resetItemFocus($item);
    }
  },
  _resetItemFocus($item) {
    if ($item.is(this.option("focusedElement"))) {
      this.option("focusedElement", null);
    }
  },
  _refreshItem($item) {
    var itemData = this._getItemData($item);
    var index = $item.data(this._itemIndexKey());
    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);
  },
  _updateParentActiveDescendant: noop,
  _optionChanged(args) {
    if ("items" === args.name) {
      var matches = args.fullName.match(ITEM_PATH_REGEX);
      if (matches && matches.length) {
        var property = matches[matches.length - 1];
        var itemPath = args.fullName.replace(".".concat(property), "");
        var item = this.option(itemPath);
        this._itemOptionChanged(item, property, args.value, args.previousValue);
        return;
      }
    }
    switch (args.name) {
      case "items":
      case "_itemAttributes":
      case "itemTemplateProperty":
      case "useItemTextAsTitle":
        this._cleanRenderedItems();
        this._invalidate();
        break;
      case "dataSource":
        this._refreshDataSource();
        this._renderEmptyMessage();
        break;
      case "noDataText":
      case "encodeNoDataText":
        this._renderEmptyMessage();
        break;
      case "itemTemplate":
        this._invalidate();
        break;
      case "onItemRendered":
        this._createItemRenderAction();
        break;
      case "onItemClick":
        break;
      case "onItemHold":
      case "itemHoldTimeout":
        this._attachHoldEvent();
        break;
      case "onItemContextMenu":
        this._attachContextMenuEvent();
        break;
      case "onFocusedItemChanged":
        this.onFocusedItemChanged = this._createActionByOption("onFocusedItemChanged");
        break;
      case "selectOnFocus":
      case "loopItemFocus":
      case "focusOnSelectedItem":
        break;
      case "focusedElement":
        this._updateFocusedItemState(args.previousValue, false, true);
        this._setFocusedItem(renderer_default(args.value));
        break;
      case "displayExpr":
        this._compileDisplayGetter();
        this._initDefaultItemTemplate();
        this._invalidate();
        break;
      case "visibleExpr":
      case "disabledExpr":
        this._invalidate();
        break;
      default:
        this.callBase(args);
    }
  },
  _invalidate() {
    this.option("focusedElement", null);
    return this.callBase.apply(this, arguments);
  },
  _loadNextPage() {
    this._expectNextPageLoading();
    return this._dataController.loadNextPage();
  },
  _expectNextPageLoading() {
    this._startIndexForAppendedItems = 0;
  },
  _expectLastItemLoading() {
    this._startIndexForAppendedItems = -1;
  },
  _forgetNextPageLoading() {
    this._startIndexForAppendedItems = null;
  },
  _dataSourceChangedHandler(newItems) {
    var items = this.option("items");
    if (this._initialized && items && this._shouldAppendItems()) {
      this._renderedItemsCount = items.length;
      if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {
        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));
      }
      this._forgetNextPageLoading();
      this._refreshContent();
    } else {
      this.option("items", newItems.slice());
    }
  },
  _refreshContent() {
    this._prepareContent();
    this._renderContent();
  },
  _dataSourceLoadErrorHandler() {
    this._forgetNextPageLoading();
    this.option("items", this.option("items"));
  },
  _shouldAppendItems() {
    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();
  },
  _allowDynamicItemsAppend: () => false,
  _clean() {
    this._cleanFocusState();
    this._cleanItemContainer();
    this._inkRipple && delete this._inkRipple;
    this._resetActiveState();
  },
  _cleanItemContainer() {
    renderer_default(this._itemContainer()).empty();
  },
  _dispose() {
    this.callBase();
    clearTimeout(this._itemFocusTimeout);
  },
  _refresh() {
    this._cleanRenderedItems();
    this.callBase.apply(this, arguments);
  },
  _itemContainer() {
    return this.$element();
  },
  _itemClass: () => ITEM_CLASS,
  _itemContentClass() {
    return this._itemClass() + CONTENT_CLASS_POSTFIX;
  },
  _selectedItemClass: () => SELECTED_ITEM_CLASS,
  _itemResponseWaitClass: () => ITEM_RESPONSE_WAIT_CLASS,
  _itemSelector() {
    return ".".concat(this._itemClass());
  },
  _itemDataKey: () => ITEM_DATA_KEY,
  _itemIndexKey: () => ITEM_INDEX_KEY,
  _itemElements() {
    return this._itemContainer().find(this._itemSelector());
  },
  _initMarkup() {
    this.callBase();
    this.onFocusedItemChanged = this._createActionByOption("onFocusedItemChanged");
    this.$element().addClass(COLLECTION_CLASS);
    this._prepareContent();
  },
  _prepareContent: deferRenderer(function() {
    this._renderContentImpl();
  }),
  _renderContent() {
    this._fireContentReadyAction();
  },
  _render() {
    this.callBase();
    this._attachClickEvent();
    this._attachHoldEvent();
    this._attachContextMenuEvent();
  },
  _getPointerEvent: () => pointer_default.down,
  _attachClickEvent() {
    var itemSelector = this._itemSelector();
    var pointerEvent = this._getPointerEvent();
    var clickEventNamespace = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var pointerEventNamespace = addNamespace(pointerEvent, this.NAME);
    var pointerAction = new Action((args) => {
      var {
        event
      } = args;
      this._itemPointerDownHandler(event);
    });
    events_engine_default.off(this._itemContainer(), clickEventNamespace, itemSelector);
    events_engine_default.off(this._itemContainer(), pointerEventNamespace, itemSelector);
    events_engine_default.on(this._itemContainer(), clickEventNamespace, itemSelector, (e) => this._itemClickHandler(e));
    events_engine_default.on(this._itemContainer(), pointerEventNamespace, itemSelector, (e) => {
      pointerAction.execute({
        element: renderer_default(e.target),
        event: e
      });
    });
  },
  _itemClickHandler(e, args, config2) {
    this._itemDXEventHandler(e, "onItemClick", args, config2);
  },
  _itemPointerDownHandler(e) {
    if (!this.option("focusStateEnabled")) {
      return;
    }
    this._itemFocusHandler = (function() {
      clearTimeout(this._itemFocusTimeout);
      this._itemFocusHandler = null;
      if (e.isDefaultPrevented()) {
        return;
      }
      var $target = renderer_default(e.target);
      var $closestItem = $target.closest(this._itemElements());
      var $closestFocusable = this._closestFocusable($target);
      if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {
        this.option("focusedElement", getPublicElement($closestItem));
      }
    }).bind(this);
    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));
  },
  _closestFocusable($target) {
    if ($target.is(focusable)) {
      return $target;
    }
    $target = $target.parent();
    while ($target.length && !dom_adapter_default.isDocument($target.get(0)) && !dom_adapter_default.isDocumentFragment($target.get(0))) {
      if ($target.is(focusable)) {
        return $target;
      }
      $target = $target.parent();
    }
  },
  _forcePointerDownFocus() {
    this._itemFocusHandler && this._itemFocusHandler();
  },
  _updateFocusState() {
    this.callBase.apply(this, arguments);
    this._forcePointerDownFocus();
  },
  _attachHoldEvent() {
    var $itemContainer = this._itemContainer();
    var itemSelector = this._itemSelector();
    var eventName = addNamespace(hold_default.name, this.NAME);
    events_engine_default.off($itemContainer, eventName, itemSelector);
    events_engine_default.on($itemContainer, eventName, itemSelector, {
      timeout: this._getHoldTimeout()
    }, this._itemHoldHandler.bind(this));
  },
  _getHoldTimeout() {
    return this.option("itemHoldTimeout");
  },
  _shouldFireHoldEvent() {
    return this.hasActionSubscription("onItemHold");
  },
  _itemHoldHandler(e) {
    if (this._shouldFireHoldEvent()) {
      this._itemDXEventHandler(e, "onItemHold");
    } else {
      e.cancel = true;
    }
  },
  _attachContextMenuEvent() {
    var $itemContainer = this._itemContainer();
    var itemSelector = this._itemSelector();
    var eventName = addNamespace(name, this.NAME);
    events_engine_default.off($itemContainer, eventName, itemSelector);
    events_engine_default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));
  },
  _shouldFireContextMenuEvent() {
    return this.hasActionSubscription("onItemContextMenu");
  },
  _itemContextMenuHandler(e) {
    if (this._shouldFireContextMenuEvent()) {
      this._itemDXEventHandler(e, "onItemContextMenu");
    } else {
      e.cancel = true;
    }
  },
  _renderContentImpl() {
    var items = this.option("items") || [];
    if (this._renderedItemsCount) {
      this._renderItems(items.slice(this._renderedItemsCount));
    } else {
      this._renderItems(items);
    }
  },
  _renderItems(items) {
    if (items.length) {
      each(items, (index, itemData) => {
        this._renderItem(this._renderedItemsCount + index, itemData);
      });
    }
    this._renderEmptyMessage();
  },
  _getItemsContainer() {
    return this._itemContainer();
  },
  _setAttributes($element) {
    var attributes = _extends({}, this.option("_itemAttributes"));
    var {
      class: customClassValue
    } = attributes;
    if (customClassValue) {
      var currentClassValue = $element.get(0).className;
      attributes.class = [currentClassValue, customClassValue].join(" ");
    }
    $element.attr(attributes);
  },
  _renderItem(index, itemData, $container, $itemToReplace) {
    var _a;
    var itemIndex = null !== (_a = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _a ? _a : index;
    $container = $container || this._getItemsContainer();
    var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);
    this._setElementData($itemFrame, itemData, itemIndex);
    this._setAttributes($itemFrame);
    this._attachItemClickEvent(itemData, $itemFrame);
    var $itemContent = this._getItemContent($itemFrame);
    var renderContentPromise = this._renderItemContent({
      index: itemIndex,
      itemData,
      container: getPublicElement($itemContent),
      contentClass: this._itemContentClass(),
      defaultTemplateName: this.option("itemTemplate")
    });
    var that = this;
    when(renderContentPromise).done(($itemContent2) => {
      that._postprocessRenderItem({
        itemElement: $itemFrame,
        itemContent: $itemContent2,
        itemData,
        itemIndex
      });
      that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame));
    });
    return $itemFrame;
  },
  _getItemContent($itemFrame) {
    var $itemContent = $itemFrame.find(".".concat(ITEM_CONTENT_PLACEHOLDER_CLASS2));
    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS2);
    return $itemContent;
  },
  _attachItemClickEvent(itemData, $itemElement) {
    if (!itemData || !itemData.onClick) {
      return;
    }
    events_engine_default.on($itemElement, CLICK_EVENT_NAME, (e) => {
      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {
        event: e
      });
    });
  },
  _renderItemContent(args) {
    var itemTemplateName = this._getItemTemplateName(args);
    var itemTemplate = this._getTemplate(itemTemplateName);
    this._addItemContentClasses(args);
    var $templateResult = renderer_default(this._createItemByTemplate(itemTemplate, args));
    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {
      return args.container;
    }
    return this._renderItemContentByNode(args, $templateResult);
  },
  _renderItemContentByNode(args, $node) {
    renderer_default(args.container).replaceWith($node);
    args.container = getPublicElement($node);
    this._addItemContentClasses(args);
    return $node;
  },
  _addItemContentClasses(args) {
    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];
    renderer_default(args.container).addClass(classes.join(" "));
  },
  _appendItemToContainer($container, $itemFrame, index) {
    $itemFrame.appendTo($container);
  },
  _renderItemFrame(index, itemData, $container, $itemToReplace) {
    var $itemFrame = renderer_default("<div>");
    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});
    if ($itemToReplace && $itemToReplace.length) {
      $itemToReplace.replaceWith($itemFrame);
    } else {
      this._appendItemToContainer.call(this, $container, $itemFrame, index);
    }
    if (this.option("useItemTextAsTitle")) {
      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;
      $itemFrame.attr("title", displayValue);
    }
    return $itemFrame;
  },
  _itemOptions() {
    var that = this;
    return {
      watchMethod: () => that.option("integrationOptions.watchMethod"),
      owner: that,
      fieldGetter(field) {
        var expr = that.option("".concat(field, "Expr"));
        var getter = compileGetter(expr);
        return getter;
      }
    };
  },
  _postprocessRenderItem: noop,
  _executeItemRenderAction(index, itemData, itemElement) {
    this._getItemRenderAction()({
      itemElement,
      itemIndex: index,
      itemData
    });
  },
  _setElementData(element, data17, index) {
    element.addClass([ITEM_CLASS, this._itemClass()].join(" ")).data(this._itemDataKey(), data17).data(this._itemIndexKey(), index);
  },
  _createItemRenderAction() {
    return this._itemRenderAction = this._createActionByOption("onItemRendered", {
      element: this.element(),
      excludeValidators: ["disabled", "readOnly"],
      category: "rendering"
    });
  },
  _getItemRenderAction() {
    return this._itemRenderAction || this._createItemRenderAction();
  },
  _getItemTemplateName(args) {
    var data17 = args.itemData;
    var templateProperty = args.templateProperty || this.option("itemTemplateProperty");
    var template = data17 && data17[templateProperty];
    return template || args.defaultTemplateName;
  },
  _createItemByTemplate(itemTemplate, renderArgs) {
    return itemTemplate.render({
      model: renderArgs.itemData,
      container: renderArgs.container,
      index: renderArgs.index,
      onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)
    });
  },
  _onItemTemplateRendered: () => noop,
  _emptyMessageContainer() {
    return this._itemContainer();
  },
  _renderEmptyMessage(items) {
    items = items || this.option("items");
    var noDataText = this.option("noDataText");
    var hideNoData = !noDataText || items && items.length || this._dataController.isLoading();
    if (hideNoData && this._$noData) {
      this._$noData.remove();
      this._$noData = null;
      this.setAria("label", void 0);
    }
    if (!hideNoData) {
      this._$noData = this._$noData || renderer_default("<div>").addClass("dx-empty-message");
      this._$noData.appendTo(this._emptyMessageContainer());
      if (this.option("encodeNoDataText")) {
        this._$noData.text(noDataText);
      } else {
        this._$noData.html(noDataText);
      }
    }
    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);
  },
  _itemDXEventHandler(dxEvent, handlerOptionName, actionArgs, actionConfig) {
    this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {
      event: dxEvent
    }), actionConfig);
  },
  _itemEventHandler(initiator, handlerOptionName, actionArgs, actionConfig) {
    var action = this._createActionByOption(handlerOptionName, extend({
      validatingTargetName: "itemElement"
    }, actionConfig));
    return this._itemEventHandlerImpl(initiator, action, actionArgs);
  },
  _itemEventHandlerByHandler(initiator, handler, actionArgs, actionConfig) {
    var action = this._createAction(handler, extend({
      validatingTargetName: "itemElement"
    }, actionConfig));
    return this._itemEventHandlerImpl(initiator, action, actionArgs);
  },
  _itemEventHandlerImpl(initiator, action, actionArgs) {
    var $itemElement = this._closestItemElement(renderer_default(initiator));
    var args = extend({}, actionArgs);
    return action(extend(actionArgs, this._extendActionArgs($itemElement), args));
  },
  _extendActionArgs($itemElement) {
    return {
      itemElement: getPublicElement($itemElement),
      itemIndex: this._itemElements().index($itemElement),
      itemData: this._getItemData($itemElement)
    };
  },
  _closestItemElement($element) {
    return renderer_default($element).closest(this._itemSelector());
  },
  _getItemData(itemElement) {
    return renderer_default(itemElement).data(this._itemDataKey());
  },
  _getSummaryItemsSize(dimension, items, includeMargin) {
    var result2 = 0;
    if (items) {
      each(items, (_, item) => {
        if ("width" === dimension) {
          result2 += getOuterWidth(item, includeMargin || false);
        } else if ("height" === dimension) {
          result2 += getOuterHeight(item, includeMargin || false);
        }
      });
    }
    return result2;
  },
  getFocusedItemId() {
    if (!this._focusedItemId) {
      this._focusedItemId = "dx-".concat(new guid_default());
    }
    return this._focusedItemId;
  },
  itemElements() {
    return this._itemElements();
  },
  itemsContainer() {
    return this._itemContainer();
  }
}).include(data_helper_default);
CollectionWidget.ItemClass = m_item_default;
var m_collection_widget_base_default = CollectionWidget;

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.edit.strategy.js
var {
  abstract: abstract3
} = class_default;
var EditStrategy = class_default.inherit({
  ctor(collectionWidget) {
    this._collectionWidget = collectionWidget;
  },
  getIndexByItemData: abstract3,
  getItemDataByIndex: abstract3,
  getKeysByItems: abstract3,
  getItemsByKeys: abstract3,
  itemsGetter: abstract3,
  getKeyByIndex(index) {
    var resultIndex = this._denormalizeItemIndex(index);
    return this.getKeysByItems([this.getItemDataByIndex(resultIndex)])[0];
  },
  _equalKeys(key1, key2) {
    if (this._collectionWidget._isKeySpecified()) {
      return equalByValue(key1, key2);
    }
    return key1 === key2;
  },
  beginCache() {
    this._cache = {};
  },
  endCache() {
    this._cache = null;
  },
  getIndexByKey: abstract3,
  getNormalizedIndex(value2) {
    if (this._isNormalizedItemIndex(value2)) {
      return value2;
    }
    if (this._isItemIndex(value2)) {
      return this._normalizeItemIndex(value2);
    }
    if (this._isNode(value2)) {
      return this._getNormalizedItemIndex(value2);
    }
    return this._normalizeItemIndex(this.getIndexByItemData(value2));
  },
  getIndex(value2) {
    if (this._isNormalizedItemIndex(value2)) {
      return this._denormalizeItemIndex(value2);
    }
    if (this._isItemIndex(value2)) {
      return value2;
    }
    if (this._isNode(value2)) {
      return this._denormalizeItemIndex(this._getNormalizedItemIndex(value2));
    }
    return this.getIndexByItemData(value2);
  },
  getItemElement(value2) {
    if (this._isNormalizedItemIndex(value2)) {
      return this._getItemByNormalizedIndex(value2);
    }
    if (this._isItemIndex(value2)) {
      return this._getItemByNormalizedIndex(this._normalizeItemIndex(value2));
    }
    if (this._isNode(value2)) {
      return renderer_default(value2);
    }
    var normalizedItemIndex = this._normalizeItemIndex(this.getIndexByItemData(value2));
    return this._getItemByNormalizedIndex(normalizedItemIndex);
  },
  _isNode: (el) => dom_adapter_default.isNode(el && isRenderer(el) ? el.get(0) : el),
  deleteItemAtIndex: abstract3,
  itemPlacementFunc(movingIndex, destinationIndex) {
    return this._itemsFromSameParent(movingIndex, destinationIndex) && movingIndex < destinationIndex ? "after" : "before";
  },
  moveItemAtIndexToIndex: abstract3,
  _isNormalizedItemIndex: (index) => "number" === typeof index && Math.round(index) === index,
  _isItemIndex: abstract3,
  _getNormalizedItemIndex: abstract3,
  _normalizeItemIndex: abstract3,
  _denormalizeItemIndex: abstract3,
  _getItemByNormalizedIndex: abstract3,
  _itemsFromSameParent: abstract3
});
var m_collection_widget_edit_strategy_default = EditStrategy;

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.edit.strategy.plain.js
var PlainEditStrategy = m_collection_widget_edit_strategy_default.inherit({
  _getPlainItems() {
    return this._collectionWidget.option("items") || [];
  },
  getIndexByItemData(itemData) {
    var keyOf = this._collectionWidget.keyOf.bind(this._collectionWidget);
    if (keyOf) {
      return this.getIndexByKey(keyOf(itemData));
    }
    return this._getPlainItems().indexOf(itemData);
  },
  getItemDataByIndex(index) {
    return this._getPlainItems()[index];
  },
  deleteItemAtIndex(index) {
    this._getPlainItems().splice(index, 1);
  },
  itemsGetter() {
    return this._getPlainItems();
  },
  getKeysByItems(items) {
    var keyOf = this._collectionWidget.keyOf.bind(this._collectionWidget);
    var result2 = items;
    if (keyOf) {
      result2 = [];
      for (var i = 0; i < items.length; i++) {
        result2.push(keyOf(items[i]));
      }
    }
    return result2;
  },
  getIndexByKey(key) {
    var cache = this._cache;
    var keys = cache && cache.keys || this.getKeysByItems(this._getPlainItems());
    if (cache && !cache.keys) {
      cache.keys = keys;
    }
    if ("object" === typeof key) {
      for (var i = 0, {
        length
      } = keys; i < length; i++) {
        if (this._equalKeys(key, keys[i])) {
          return i;
        }
      }
    } else {
      return keys.indexOf(key);
    }
    return -1;
  },
  getItemsByKeys: (keys, items) => (items || keys).slice(),
  moveItemAtIndexToIndex(movingIndex, destinationIndex) {
    var items = this._getPlainItems();
    var movedItemData = items[movingIndex];
    items.splice(movingIndex, 1);
    items.splice(destinationIndex, 0, movedItemData);
  },
  _isItemIndex: (index) => "number" === typeof index && Math.round(index) === index,
  _getNormalizedItemIndex(itemElement) {
    return this._collectionWidget._itemElements().index(itemElement);
  },
  _normalizeItemIndex: (index) => index,
  _denormalizeItemIndex: (index) => index,
  _getItemByNormalizedIndex(index) {
    return index > -1 ? this._collectionWidget._itemElements().eq(index) : null;
  },
  _itemsFromSameParent: () => true
});
var m_collection_widget_edit_strategy_plain_default = PlainEditStrategy;

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.edit.js
var ITEM_DELETING_DATA_KEY = "dxItemDeleting";
var NOT_EXISTING_INDEX = -1;
var indexExists = function(index) {
  return index !== NOT_EXISTING_INDEX;
};
var CollectionWidget2 = m_collection_widget_base_default.inherit({
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      selectedItem: true
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      selectionMode: "none",
      selectionRequired: false,
      selectByClick: true,
      selectedItems: [],
      selectedItemKeys: [],
      maxFilterLengthInRequest: 1500,
      keyExpr: null,
      selectedIndex: NOT_EXISTING_INDEX,
      selectedItem: null,
      onSelectionChanged: null,
      onItemReordered: null,
      onItemDeleting: null,
      onItemDeleted: null
    });
  },
  ctor(element, options2) {
    this._userOptions = options2 || {};
    this.callBase(element, options2);
  },
  _init() {
    this._initEditStrategy();
    this.callBase();
    this._initKeyGetter();
    this._initSelectionModule();
  },
  _initKeyGetter() {
    this._keyGetter = compileGetter(this.option("keyExpr"));
  },
  _getKeysByItems(selectedItems) {
    return this._editStrategy.getKeysByItems(selectedItems);
  },
  _getItemsByKeys(selectedItemKeys, selectedItems) {
    return this._editStrategy.getItemsByKeys(selectedItemKeys, selectedItems);
  },
  _getKeyByIndex(index) {
    return this._editStrategy.getKeyByIndex(index);
  },
  _getIndexByKey(key) {
    return this._editStrategy.getIndexByKey(key);
  },
  _getIndexByItemData(itemData) {
    return this._editStrategy.getIndexByItemData(itemData);
  },
  _isKeySpecified() {
    return !!this._dataController.key();
  },
  _getCombinedFilter() {
    return this._dataController.filter();
  },
  key() {
    if (this.option("keyExpr")) {
      return this.option("keyExpr");
    }
    return this._dataController.key();
  },
  keyOf(item) {
    var key = item;
    if (this.option("keyExpr")) {
      key = this._keyGetter(item);
    } else if (this._dataController.store()) {
      key = this._dataController.keyOf(item);
    }
    return key;
  },
  _nullValueSelectionSupported: () => false,
  _initSelectionModule() {
    var that = this;
    var {
      itemsGetter
    } = that._editStrategy;
    this._selection = new Selection({
      allowNullValue: this._nullValueSelectionSupported(),
      mode: this.option("selectionMode"),
      maxFilterLengthInRequest: this.option("maxFilterLengthInRequest"),
      equalByReference: !this._isKeySpecified(),
      onSelectionChanged(args) {
        if (args.addedItemKeys.length || args.removedItemKeys.length) {
          that.option("selectedItems", that._getItemsByKeys(args.selectedItemKeys, args.selectedItems));
          that._updateSelectedItems(args);
        }
      },
      filter: that._getCombinedFilter.bind(that),
      totalCount() {
        var items = that.option("items");
        var totalCount = that._dataController.totalCount();
        return totalCount >= 0 ? totalCount : that._getItemsCount(items);
      },
      key: that.key.bind(that),
      keyOf: that.keyOf.bind(that),
      load(options2) {
        var _a;
        var dataController2 = that._dataController;
        options2.customQueryParams = null === (_a = dataController2.loadOptions()) || void 0 === _a ? void 0 : _a.customQueryParams;
        options2.userData = dataController2.userData();
        if (dataController2.store()) {
          return dataController2.loadFromStore(options2).done((loadResult) => {
            if (that._disposed) {
              return;
            }
            var items = normalizeLoadResult(loadResult).data;
            dataController2.applyMapFunction(items);
          });
        }
        return Deferred().resolve(this.plainItems());
      },
      dataFields: () => that._dataController.select(),
      plainItems: itemsGetter.bind(that._editStrategy)
    });
  },
  _getItemsCount(items) {
    return items.reduce((itemsCount, item) => itemsCount + (item.items ? this._getItemsCount(item.items) : 1), 0);
  },
  _initEditStrategy() {
    var Strategy = m_collection_widget_edit_strategy_plain_default;
    this._editStrategy = new Strategy(this);
  },
  _getSelectedItemIndices(keys) {
    var that = this;
    var indices = [];
    keys = keys || this._selection.getSelectedItemKeys();
    that._editStrategy.beginCache();
    each(keys, (_, key) => {
      var selectedIndex = that._getIndexByKey(key);
      if (indexExists(selectedIndex)) {
        indices.push(selectedIndex);
      }
    });
    that._editStrategy.endCache();
    return indices;
  },
  _initMarkup() {
    this._rendering = true;
    if (!this._dataController.isLoading()) {
      this._syncSelectionOptions().done(() => this._normalizeSelectedItems());
    }
    this.callBase();
  },
  _render() {
    this.callBase();
    this._rendering = false;
  },
  _fireContentReadyAction() {
    this._rendering = false;
    this._rendered = true;
    this.callBase.apply(this, arguments);
  },
  _syncSelectionOptions(byOption) {
    byOption = byOption || this._chooseSelectOption();
    var selectedItem;
    var selectedIndex;
    var selectedItemKeys;
    var selectedItems;
    switch (byOption) {
      case "selectedIndex":
        selectedItem = this._editStrategy.getItemDataByIndex(this.option("selectedIndex"));
        if (isDefined(selectedItem)) {
          this._setOptionWithoutOptionChange("selectedItems", [selectedItem]);
          this._setOptionWithoutOptionChange("selectedItem", selectedItem);
          this._setOptionWithoutOptionChange("selectedItemKeys", this._editStrategy.getKeysByItems([selectedItem]));
        } else {
          this._setOptionWithoutOptionChange("selectedItems", []);
          this._setOptionWithoutOptionChange("selectedItemKeys", []);
          this._setOptionWithoutOptionChange("selectedItem", null);
        }
        break;
      case "selectedItems":
        selectedItems = this.option("selectedItems") || [];
        selectedIndex = selectedItems.length ? this._editStrategy.getIndexByItemData(selectedItems[0]) : NOT_EXISTING_INDEX;
        if (this.option("selectionRequired") && !indexExists(selectedIndex)) {
          return this._syncSelectionOptions("selectedIndex");
        }
        this._setOptionWithoutOptionChange("selectedItem", selectedItems[0]);
        this._setOptionWithoutOptionChange("selectedIndex", selectedIndex);
        this._setOptionWithoutOptionChange("selectedItemKeys", this._editStrategy.getKeysByItems(selectedItems));
        break;
      case "selectedItem":
        selectedItem = this.option("selectedItem");
        selectedIndex = this._editStrategy.getIndexByItemData(selectedItem);
        if (this.option("selectionRequired") && !indexExists(selectedIndex)) {
          return this._syncSelectionOptions("selectedIndex");
        }
        if (isDefined(selectedItem)) {
          this._setOptionWithoutOptionChange("selectedItems", [selectedItem]);
          this._setOptionWithoutOptionChange("selectedIndex", selectedIndex);
          this._setOptionWithoutOptionChange("selectedItemKeys", this._editStrategy.getKeysByItems([selectedItem]));
        } else {
          this._setOptionWithoutOptionChange("selectedItems", []);
          this._setOptionWithoutOptionChange("selectedItemKeys", []);
          this._setOptionWithoutOptionChange("selectedIndex", NOT_EXISTING_INDEX);
        }
        break;
      case "selectedItemKeys":
        selectedItemKeys = this.option("selectedItemKeys");
        if (this.option("selectionRequired")) {
          var selectedItemIndex = this._getIndexByKey(selectedItemKeys[0]);
          if (!indexExists(selectedItemIndex)) {
            return this._syncSelectionOptions("selectedIndex");
          }
        }
        return this._selection.setSelection(selectedItemKeys);
    }
    return Deferred().resolve().promise();
  },
  _chooseSelectOption() {
    var optionName = "selectedIndex";
    var isOptionDefined = (function(optionName2) {
      var optionValue = this.option(optionName2);
      var length = isDefined(optionValue) && optionValue.length;
      return length || optionName2 in this._userOptions;
    }).bind(this);
    if (isOptionDefined("selectedItems")) {
      optionName = "selectedItems";
    } else if (isOptionDefined("selectedItem")) {
      optionName = "selectedItem";
    } else if (isOptionDefined("selectedItemKeys")) {
      optionName = "selectedItemKeys";
    }
    return optionName;
  },
  _compareKeys(oldKeys, newKeys) {
    if (oldKeys.length !== newKeys.length) {
      return false;
    }
    for (var i = 0; i < newKeys.length; i++) {
      if (oldKeys[i] !== newKeys[i]) {
        return false;
      }
    }
    return true;
  },
  _normalizeSelectedItems() {
    if ("none" === this.option("selectionMode")) {
      this._setOptionWithoutOptionChange("selectedItems", []);
      this._syncSelectionOptions("selectedItems");
    } else if ("single" === this.option("selectionMode")) {
      var newSelection = this.option("selectedItems");
      if (newSelection.length > 1 || !newSelection.length && this.option("selectionRequired") && this.option("items") && this.option("items").length) {
        var currentSelection = this._selection.getSelectedItems();
        var normalizedSelection = void 0 === newSelection[0] ? currentSelection[0] : newSelection[0];
        if (void 0 === normalizedSelection) {
          normalizedSelection = this._editStrategy.itemsGetter()[0];
        }
        if (this.option("grouped") && normalizedSelection && normalizedSelection.items) {
          normalizedSelection.items = [normalizedSelection.items[0]];
        }
        this._selection.setSelection(this._getKeysByItems([normalizedSelection]));
        this._setOptionWithoutOptionChange("selectedItems", [normalizedSelection]);
        return this._syncSelectionOptions("selectedItems");
      }
      this._selection.setSelection(this._getKeysByItems(newSelection));
    } else {
      var newKeys = this._getKeysByItems(this.option("selectedItems"));
      var oldKeys = this._selection.getSelectedItemKeys();
      if (!this._compareKeys(oldKeys, newKeys)) {
        this._selection.setSelection(newKeys);
      }
    }
    return Deferred().resolve().promise();
  },
  _itemClickHandler(e) {
    var itemSelectPromise = Deferred().resolve();
    var {
      callBase
    } = this;
    this._createAction((e2) => {
      var _a;
      itemSelectPromise = null !== (_a = this._itemSelectHandler(e2.event)) && void 0 !== _a ? _a : itemSelectPromise;
    }, {
      validatingTargetName: "itemElement"
    })({
      itemElement: renderer_default(e.currentTarget),
      event: e
    });
    itemSelectPromise.always(() => {
      callBase.apply(this, arguments);
    });
  },
  _itemSelectHandler(e) {
    var itemSelectPromise;
    if (!this.option("selectByClick")) {
      return;
    }
    var $itemElement = e.currentTarget;
    if (this.isItemSelected($itemElement)) {
      this.unselectItem(e.currentTarget);
    } else {
      itemSelectPromise = this.selectItem(e.currentTarget);
    }
    return null === itemSelectPromise || void 0 === itemSelectPromise ? void 0 : itemSelectPromise.promise();
  },
  _selectedItemElement(index) {
    return this._itemElements().eq(index);
  },
  _postprocessRenderItem(args) {
    if ("none" !== this.option("selectionMode")) {
      var $itemElement = renderer_default(args.itemElement);
      var normalizedItemIndex = this._editStrategy.getNormalizedIndex($itemElement);
      var isItemSelected = this._isItemSelected(normalizedItemIndex);
      this._processSelectableItem($itemElement, isItemSelected);
    }
  },
  _processSelectableItem($itemElement, isSelected) {
    $itemElement.toggleClass(this._selectedItemClass(), isSelected);
    this._setAriaSelectionAttribute($itemElement, String(isSelected));
  },
  _updateSelectedItems(args) {
    var that = this;
    var {
      addedItemKeys
    } = args;
    var {
      removedItemKeys
    } = args;
    if (that._rendered && (addedItemKeys.length || removedItemKeys.length)) {
      var selectionChangePromise = that._selectionChangePromise;
      if (!that._rendering) {
        var addedSelection = [];
        var normalizedIndex;
        var removedSelection = [];
        that._editStrategy.beginCache();
        for (var i = 0; i < addedItemKeys.length; i++) {
          normalizedIndex = that._getIndexByKey(addedItemKeys[i]);
          addedSelection.push(normalizedIndex);
          that._addSelection(normalizedIndex);
        }
        for (var _i = 0; _i < removedItemKeys.length; _i++) {
          normalizedIndex = that._getIndexByKey(removedItemKeys[_i]);
          removedSelection.push(normalizedIndex);
          that._removeSelection(normalizedIndex);
        }
        that._editStrategy.endCache();
        that._updateSelection(addedSelection, removedSelection);
      }
      when(selectionChangePromise).done(() => {
        that._fireSelectionChangeEvent(args.addedItems, args.removedItems);
      });
    }
  },
  _fireSelectionChangeEvent(addedItems, removedItems) {
    this._createActionByOption("onSelectionChanged", {
      excludeValidators: ["disabled", "readOnly"]
    })({
      addedItems,
      removedItems
    });
  },
  _updateSelection: noop,
  _setAriaSelectionAttribute($target, value2) {
    this.setAria("selected", value2, $target);
  },
  _removeSelection(normalizedIndex) {
    var $itemElement = this._editStrategy.getItemElement(normalizedIndex);
    if (indexExists(normalizedIndex)) {
      this._processSelectableItem($itemElement, false);
      events_engine_default.triggerHandler($itemElement, "stateChanged", false);
    }
  },
  _addSelection(normalizedIndex) {
    var $itemElement = this._editStrategy.getItemElement(normalizedIndex);
    if (indexExists(normalizedIndex)) {
      this._processSelectableItem($itemElement, true);
      events_engine_default.triggerHandler($itemElement, "stateChanged", true);
    }
  },
  _isItemSelected(index) {
    var key = this._getKeyByIndex(index);
    return this._selection.isItemSelected(key, {
      checkPending: true
    });
  },
  _optionChanged(args) {
    switch (args.name) {
      case "selectionMode":
        this._invalidate();
        break;
      case "dataSource":
        if (!args.value || Array.isArray(args.value) && !args.value.length) {
          this.option("selectedItemKeys", []);
        }
        this.callBase(args);
        break;
      case "selectedIndex":
      case "selectedItem":
      case "selectedItems":
      case "selectedItemKeys":
        this._syncSelectionOptions(args.name).done(() => this._normalizeSelectedItems());
        break;
      case "keyExpr":
        this._initKeyGetter();
        break;
      case "selectionRequired":
        this._normalizeSelectedItems();
        break;
      case "selectByClick":
      case "onSelectionChanged":
      case "onItemDeleting":
      case "onItemDeleted":
      case "onItemReordered":
      case "maxFilterLengthInRequest":
        break;
      default:
        this.callBase(args);
    }
  },
  _clearSelectedItems() {
    this._setOptionWithoutOptionChange("selectedItems", []);
    this._syncSelectionOptions("selectedItems");
  },
  _waitDeletingPrepare($itemElement) {
    if ($itemElement.data(ITEM_DELETING_DATA_KEY)) {
      return Deferred().resolve().promise();
    }
    $itemElement.data(ITEM_DELETING_DATA_KEY, true);
    var deferred = Deferred();
    var deletingActionArgs = {
      cancel: false
    };
    var deletePromise = this._itemEventHandler($itemElement, "onItemDeleting", deletingActionArgs, {
      excludeValidators: ["disabled", "readOnly"]
    });
    when(deletePromise).always(function(value2) {
      var deletePromiseExists = !deletePromise;
      var deletePromiseResolved = !deletePromiseExists && "resolved" === deletePromise.state();
      var argumentsSpecified = !!arguments.length;
      var shouldDelete = deletePromiseExists || deletePromiseResolved && !argumentsSpecified || deletePromiseResolved && value2;
      when(fromPromise(deletingActionArgs.cancel)).always(() => {
        $itemElement.data(ITEM_DELETING_DATA_KEY, false);
      }).done((cancel) => {
        shouldDelete && !cancel ? deferred.resolve() : deferred.reject();
      }).fail(deferred.reject);
    });
    return deferred.promise();
  },
  _deleteItemFromDS($item) {
    var dataController2 = this._dataController;
    var deferred = Deferred();
    var disabledState = this.option("disabled");
    var dataStore = dataController2.store();
    if (!dataStore) {
      return Deferred().resolve().promise();
    }
    if (!dataStore.remove) {
      throw ui_errors_default.Error("E1011");
    }
    this.option("disabled", true);
    dataStore.remove(dataController2.keyOf(this._getItemData($item))).done((key) => {
      if (void 0 !== key) {
        deferred.resolve();
      } else {
        deferred.reject();
      }
    }).fail(() => {
      deferred.reject();
    });
    deferred.always(() => {
      this.option("disabled", disabledState);
    });
    return deferred;
  },
  _tryRefreshLastPage() {
    var deferred = Deferred();
    if (this._isLastPage() || this.option("grouped")) {
      deferred.resolve();
    } else {
      this._refreshLastPage().done(() => {
        deferred.resolve();
      });
    }
    return deferred.promise();
  },
  _refreshLastPage() {
    this._expectLastItemLoading();
    return this._dataController.load();
  },
  _updateSelectionAfterDelete(index) {
    var key = this._getKeyByIndex(index);
    this._selection.deselect([key]);
  },
  _updateIndicesAfterIndex(index) {
    var itemElements = this._itemElements();
    for (var i = index + 1; i < itemElements.length; i++) {
      renderer_default(itemElements[i]).data(this._itemIndexKey(), i - 1);
    }
  },
  _simulateOptionChange(optionName) {
    var optionValue = this.option(optionName);
    if (optionValue instanceof DataSource) {
      return;
    }
    this._optionChangedAction({
      name: optionName,
      fullName: optionName,
      value: optionValue
    });
  },
  isItemSelected(itemElement) {
    return this._isItemSelected(this._editStrategy.getNormalizedIndex(itemElement));
  },
  selectItem(itemElement) {
    if ("none" === this.option("selectionMode")) {
      return;
    }
    var itemIndex = this._editStrategy.getNormalizedIndex(itemElement);
    if (!indexExists(itemIndex)) {
      return;
    }
    var key = this._getKeyByIndex(itemIndex);
    if (this._selection.isItemSelected(key)) {
      return;
    }
    if ("single" === this.option("selectionMode")) {
      return this._selection.setSelection([key]);
    }
    var selectedItemKeys = this.option("selectedItemKeys") || [];
    return this._selection.setSelection([...selectedItemKeys, key], [key]);
  },
  unselectItem(itemElement) {
    var itemIndex = this._editStrategy.getNormalizedIndex(itemElement);
    if (!indexExists(itemIndex)) {
      return;
    }
    var selectedItemKeys = this._selection.getSelectedItemKeys();
    if (this.option("selectionRequired") && selectedItemKeys.length <= 1) {
      return;
    }
    var key = this._getKeyByIndex(itemIndex);
    if (!this._selection.isItemSelected(key, {
      checkPending: true
    })) {
      return;
    }
    this._selection.deselect([key]);
  },
  _deleteItemElementByIndex(index) {
    this._updateSelectionAfterDelete(index);
    this._updateIndicesAfterIndex(index);
    this._editStrategy.deleteItemAtIndex(index);
  },
  _afterItemElementDeleted($item, deletedActionArgs) {
    var changingOption = this._dataController.getDataSource() ? "dataSource" : "items";
    this._simulateOptionChange(changingOption);
    this._itemEventHandler($item, "onItemDeleted", deletedActionArgs, {
      beforeExecute() {
        $item.remove();
      },
      excludeValidators: ["disabled", "readOnly"]
    });
    this._renderEmptyMessage();
  },
  deleteItem(itemElement) {
    var that = this;
    var deferred = Deferred();
    var $item = this._editStrategy.getItemElement(itemElement);
    var index = this._editStrategy.getNormalizedIndex(itemElement);
    var itemResponseWaitClass = this._itemResponseWaitClass();
    if (indexExists(index)) {
      this._waitDeletingPrepare($item).done(() => {
        $item.addClass(itemResponseWaitClass);
        var deletedActionArgs = that._extendActionArgs($item);
        that._deleteItemFromDS($item).done(() => {
          that._deleteItemElementByIndex(index);
          that._afterItemElementDeleted($item, deletedActionArgs);
          that._tryRefreshLastPage().done(() => {
            deferred.resolveWith(that);
          });
        }).fail(() => {
          $item.removeClass(itemResponseWaitClass);
          deferred.rejectWith(that);
        });
      }).fail(() => {
        deferred.rejectWith(that);
      });
    } else {
      deferred.rejectWith(that);
    }
    return deferred.promise();
  },
  reorderItem(itemElement, toItemElement) {
    var deferred = Deferred();
    var that = this;
    var strategy = this._editStrategy;
    var $movingItem = strategy.getItemElement(itemElement);
    var $destinationItem = strategy.getItemElement(toItemElement);
    var movingIndex = strategy.getNormalizedIndex(itemElement);
    var destinationIndex = strategy.getNormalizedIndex(toItemElement);
    var changingOption = this._dataController.getDataSource() ? "dataSource" : "items";
    var canMoveItems = indexExists(movingIndex) && indexExists(destinationIndex) && movingIndex !== destinationIndex;
    if (canMoveItems) {
      deferred.resolveWith(this);
    } else {
      deferred.rejectWith(this);
    }
    return deferred.promise().done(function() {
      $destinationItem[strategy.itemPlacementFunc(movingIndex, destinationIndex)]($movingItem);
      strategy.moveItemAtIndexToIndex(movingIndex, destinationIndex);
      this._updateIndicesAfterIndex(movingIndex);
      that.option("selectedItems", that._getItemsByKeys(that._selection.getSelectedItemKeys(), that._selection.getSelectedItems()));
      if ("items" === changingOption) {
        that._simulateOptionChange(changingOption);
      }
      that._itemEventHandler($movingItem, "onItemReordered", {
        fromIndex: strategy.getIndex(movingIndex),
        toIndex: strategy.getIndex(destinationIndex)
      }, {
        excludeValidators: ["disabled", "readOnly"]
      });
    });
  }
});
var m_collection_widget_edit_default = CollectionWidget2;

// node_modules/devextreme/esm/ui/collection/ui.collection_widget.edit.js
var ui_collection_widget_edit_default = m_collection_widget_edit_default;

// node_modules/devextreme/esm/core/resize_observer.js
var window2 = getWindow();
var ResizeObserverMock = {
  observe: noop,
  unobserve: noop,
  disconnect: noop
};
var ResizeObserverSingleton = class {
  constructor() {
    if (!hasWindow() || !window2.ResizeObserver) {
      return ResizeObserverMock;
    }
    this._callbacksMap = /* @__PURE__ */ new Map();
    this._observer = new window2.ResizeObserver((entries) => {
      entries.forEach((entry) => {
        var _this$_callbacksMap$g;
        null === (_this$_callbacksMap$g = this._callbacksMap.get(entry.target)) || void 0 === _this$_callbacksMap$g ? void 0 : _this$_callbacksMap$g(entry);
      });
    });
  }
  observe(element, callback) {
    this._callbacksMap.set(element, callback);
    this._observer.observe(element);
  }
  unobserve(element) {
    this._callbacksMap.delete(element);
    this._observer.unobserve(element);
  }
  disconnect() {
    this._callbacksMap.clear();
    this._observer.disconnect();
  }
};
var resizeObserverSingleton = new ResizeObserverSingleton();
var resize_observer_default = resizeObserverSingleton;

// node_modules/devextreme/esm/__internal/ui/m_validation_engine.js
var EMAIL_VALIDATION_REGEX = /^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i;
var STATUS = {
  valid: "valid",
  invalid: "invalid",
  pending: "pending"
};
var BaseRuleValidator = class {
  constructor() {
    this.NAME = "base";
  }
  defaultMessage(value2) {
    return message_default.getFormatter("validation-".concat(this.NAME))(value2);
  }
  defaultFormattedMessage(value2) {
    return message_default.getFormatter("validation-".concat(this.NAME, "-formatted"))(value2);
  }
  _isValueEmpty(value2) {
    return !rulesValidators.required.validate(value2, {});
  }
  validate(value2, rule) {
    var valueArray = Array.isArray(value2) ? value2 : [value2];
    var result2 = true;
    if (valueArray.length) {
      valueArray.every((itemValue) => {
        result2 = this._validate(itemValue, rule);
        return result2;
      });
    } else {
      result2 = this._validate(null, rule);
    }
    return result2;
  }
};
var RequiredRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "required";
  }
  _validate(value2, rule) {
    if (!isDefined(value2)) {
      return false;
    }
    if (false === value2) {
      return false;
    }
    value2 = String(value2);
    if (rule.trim || !isDefined(rule.trim)) {
      value2 = value2.trim();
    }
    return "" !== value2;
  }
};
var NumericRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "numeric";
  }
  _validate(value2, rule) {
    if (false !== rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    if (rule.useCultureSettings && isString(value2)) {
      return !isNaN(number_default.parse(value2));
    }
    return isNumeric(value2);
  }
};
var RangeRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "range";
  }
  _validate(value2, rule) {
    if (false !== rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    var validNumber = rulesValidators.numeric.validate(value2, rule);
    var validValue = isDefined(value2) && "" !== value2;
    var number2 = validNumber ? parseFloat(value2) : validValue && value2.valueOf();
    var {
      min
    } = rule;
    var {
      max
    } = rule;
    if (!(validNumber || isDate(value2)) && !validValue) {
      return false;
    }
    if (isDefined(min)) {
      if (isDefined(max)) {
        return number2 >= min && number2 <= max;
      }
      return number2 >= min;
    }
    if (isDefined(max)) {
      return number2 <= max;
    }
    throw errors_default.Error("E0101");
  }
};
var StringLengthRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "stringLength";
  }
  _validate(value2, rule) {
    value2 = String(null !== value2 && void 0 !== value2 ? value2 : "");
    if (rule.trim || !isDefined(rule.trim)) {
      value2 = value2.trim();
    }
    if (rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    return rulesValidators.range.validate(value2.length, extend({}, rule));
  }
};
var CustomRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "custom";
  }
  validate(value2, rule) {
    if (rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    var {
      validator
    } = rule;
    var dataGetter = validator && isFunction(validator.option) && validator.option("dataGetter");
    var extraParams = isFunction(dataGetter) && dataGetter();
    var params = {
      value: value2,
      validator,
      rule
    };
    if (extraParams) {
      extend(params, extraParams);
    }
    return rule.validationCallback(params);
  }
};
var AsyncRuleValidator = class extends CustomRuleValidator {
  constructor() {
    super();
    this.NAME = "async";
  }
  validate(value2, rule) {
    if (!isDefined(rule.reevaluate)) {
      extend(rule, {
        reevaluate: true
      });
    }
    if (rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    var {
      validator
    } = rule;
    var dataGetter = validator && isFunction(validator.option) && validator.option("dataGetter");
    var extraParams = isFunction(dataGetter) && dataGetter();
    var params = {
      value: value2,
      validator,
      rule
    };
    if (extraParams) {
      extend(params, extraParams);
    }
    var callbackResult = rule.validationCallback(params);
    if (!isPromise(callbackResult)) {
      throw errors_default.Error("E0103");
    }
    return this._getWrappedPromise(fromPromise(callbackResult).promise());
  }
  _getWrappedPromise(promise) {
    var deferred = Deferred();
    promise.then((res) => {
      deferred.resolve(res);
    }, (err) => {
      var res = {
        isValid: false
      };
      if (isDefined(err)) {
        if (isString(err)) {
          res.message = err;
        } else if (isObject(err) && isDefined(err.message) && isString(err.message)) {
          res.message = err.message;
        }
      }
      deferred.resolve(res);
    });
    return deferred.promise();
  }
};
var CompareRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "compare";
  }
  _validate(value2, rule) {
    if (!rule.comparisonTarget) {
      throw errors_default.Error("E0102");
    }
    if (rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    extend(rule, {
      reevaluate: true
    });
    var otherValue = rule.comparisonTarget();
    var type2 = rule.comparisonType || "==";
    switch (type2) {
      case "==":
        return value2 == otherValue;
      case "!=":
        return value2 != otherValue;
      case "===":
        return value2 === otherValue;
      case "!==":
        return value2 !== otherValue;
      case ">":
        return value2 > otherValue;
      case ">=":
        return value2 >= otherValue;
      case "<":
        return value2 < otherValue;
      case "<=":
        return value2 <= otherValue;
    }
  }
};
var PatternRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "pattern";
  }
  _validate(value2, rule) {
    if (false !== rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    var {
      pattern
    } = rule;
    if (isString(pattern)) {
      pattern = new RegExp(pattern);
    }
    return pattern.test(value2);
  }
};
var EmailRuleValidator = class extends BaseRuleValidator {
  constructor() {
    super();
    this.NAME = "email";
  }
  _validate(value2, rule) {
    if (false !== rule.ignoreEmptyValue && this._isValueEmpty(value2)) {
      return true;
    }
    return rulesValidators.pattern.validate(value2, extend({}, rule, {
      pattern: EMAIL_VALIDATION_REGEX
    }));
  }
};
var rulesValidators = {
  required: new RequiredRuleValidator(),
  numeric: new NumericRuleValidator(),
  range: new RangeRuleValidator(),
  stringLength: new StringLengthRuleValidator(),
  custom: new CustomRuleValidator(),
  async: new AsyncRuleValidator(),
  compare: new CompareRuleValidator(),
  pattern: new PatternRuleValidator(),
  email: new EmailRuleValidator()
};
var GroupConfig = class_default.inherit({
  ctor(group, isRemovable) {
    this.group = group;
    this.validators = [];
    this._isRemovable = isRemovable;
    this._pendingValidators = [];
    this._onValidatorStatusChanged = this._onValidatorStatusChanged.bind(this);
    this._resetValidationInfo();
    this._eventsStrategy = new EventsStrategy(this);
  },
  validate() {
    var result2 = {
      isValid: true,
      brokenRules: [],
      validators: [],
      status: STATUS.valid,
      complete: null
    };
    this._unsubscribeFromAllChangeEvents();
    this._pendingValidators = [];
    this._resetValidationInfo();
    each(this.validators, (_, validator) => {
      var validatorResult = validator.validate();
      result2.isValid = result2.isValid && validatorResult.isValid;
      if (validatorResult.brokenRules) {
        result2.brokenRules = result2.brokenRules.concat(validatorResult.brokenRules);
      }
      result2.validators.push(validator);
      if (validatorResult.status === STATUS.pending) {
        this._addPendingValidator(validator);
      }
      this._subscribeToChangeEvents(validator);
    });
    if (this._pendingValidators.length) {
      result2.status = STATUS.pending;
    } else {
      result2.status = result2.isValid ? STATUS.valid : STATUS.invalid;
      this._unsubscribeFromAllChangeEvents();
      this._raiseValidatedEvent(result2);
    }
    this._updateValidationInfo(result2);
    return extend({}, this._validationInfo.result);
  },
  _subscribeToChangeEvents(validator) {
    validator.on("validating", this._onValidatorStatusChanged);
    validator.on("validated", this._onValidatorStatusChanged);
  },
  _unsubscribeFromChangeEvents(validator) {
    validator.off("validating", this._onValidatorStatusChanged);
    validator.off("validated", this._onValidatorStatusChanged);
  },
  _unsubscribeFromAllChangeEvents() {
    each(this.validators, (_, validator) => {
      this._unsubscribeFromChangeEvents(validator);
    });
  },
  _updateValidationInfo(result2) {
    this._validationInfo.result = result2;
    if (result2.status !== STATUS.pending) {
      return;
    }
    if (!this._validationInfo.deferred) {
      this._validationInfo.deferred = Deferred();
      this._validationInfo.result.complete = this._validationInfo.deferred.promise();
    }
  },
  _addPendingValidator(validator) {
    var foundValidator = grep(this._pendingValidators, (val) => val === validator)[0];
    if (!foundValidator) {
      this._pendingValidators.push(validator);
    }
  },
  _removePendingValidator(validator) {
    var index = this._pendingValidators.indexOf(validator);
    if (index >= 0) {
      this._pendingValidators.splice(index, 1);
    }
  },
  _orderBrokenRules(brokenRules) {
    var orderedRules = [];
    each(this.validators, (_, validator) => {
      var foundRules = grep(brokenRules, (rule) => rule.validator === validator);
      if (foundRules.length) {
        orderedRules = orderedRules.concat(foundRules);
      }
    });
    return orderedRules;
  },
  _updateBrokenRules(result2) {
    if (!this._validationInfo.result) {
      return;
    }
    var {
      brokenRules
    } = this._validationInfo.result;
    var rules = grep(brokenRules, (rule) => rule.validator !== result2.validator);
    if (result2.brokenRules) {
      brokenRules = rules.concat(result2.brokenRules);
    }
    this._validationInfo.result.brokenRules = this._orderBrokenRules(brokenRules);
  },
  _onValidatorStatusChanged(result2) {
    if (result2.status === STATUS.pending) {
      this._addPendingValidator(result2.validator);
      return;
    }
    this._resolveIfComplete(result2);
  },
  _resolveIfComplete(result2) {
    this._removePendingValidator(result2.validator);
    this._updateBrokenRules(result2);
    if (!this._pendingValidators.length) {
      this._unsubscribeFromAllChangeEvents();
      if (!this._validationInfo.result) {
        return;
      }
      this._validationInfo.result.status = 0 === this._validationInfo.result.brokenRules.length ? STATUS.valid : STATUS.invalid;
      this._validationInfo.result.isValid = this._validationInfo.result.status === STATUS.valid;
      var res = extend({}, this._validationInfo.result, {
        complete: null
      });
      var {
        deferred
      } = this._validationInfo;
      this._validationInfo.deferred = null;
      this._raiseValidatedEvent(res);
      deferred && setTimeout(() => {
        deferred.resolve(res);
      });
    }
  },
  _raiseValidatedEvent(result2) {
    this._eventsStrategy.fireEvent("validated", [result2]);
  },
  _resetValidationInfo() {
    this._validationInfo = {
      result: null,
      deferred: null
    };
  },
  _synchronizeValidationInfo() {
    if (this._validationInfo.result) {
      this._validationInfo.result.validators = this.validators;
    }
  },
  removeRegisteredValidator(validator) {
    var index = this.validators.indexOf(validator);
    if (index > -1) {
      this.validators.splice(index, 1);
      this._synchronizeValidationInfo();
      this._resolveIfComplete({
        validator
      });
    }
  },
  registerValidator(validator) {
    if (!this.validators.includes(validator)) {
      this.validators.push(validator);
      this._synchronizeValidationInfo();
    }
  },
  reset() {
    each(this.validators, (_, validator) => {
      validator.reset();
    });
    this._pendingValidators = [];
    this._resetValidationInfo();
  },
  on(eventName, eventHandler) {
    this._eventsStrategy.on(eventName, eventHandler);
    return this;
  },
  off(eventName, eventHandler) {
    this._eventsStrategy.off(eventName, eventHandler);
    return this;
  }
});
var ValidationEngine = {
  groups: [],
  getGroupConfig(group) {
    var result2 = grep(this.groups, (config2) => config2.group === group);
    if (result2.length) {
      return result2[0];
    }
  },
  findGroup($element, model) {
    var _a, _b;
    var hasValidationGroup = null === (_b = null === (_a = $element.data()) || void 0 === _a ? void 0 : _a.dxComponents) || void 0 === _b ? void 0 : _b.includes("dxValidationGroup");
    var validationGroup = hasValidationGroup && $element.dxValidationGroup("instance");
    if (validationGroup) {
      return validationGroup;
    }
    var $dxGroup = $element.parents(".dx-validationgroup").first();
    if ($dxGroup.length) {
      return $dxGroup.dxValidationGroup("instance");
    }
    return model;
  },
  initGroups() {
    this.groups = [];
    this.addGroup(void 0, false);
  },
  addGroup(group) {
    var isRemovable = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : true;
    var config2 = this.getGroupConfig(group);
    if (!config2) {
      config2 = new GroupConfig(group, isRemovable);
      this.groups.push(config2);
    }
    return config2;
  },
  removeGroup(group) {
    var config2 = this.getGroupConfig(group);
    var index = this.groups.indexOf(config2);
    if (index > -1) {
      this.groups.splice(index, 1);
    }
    return config2;
  },
  _setDefaultMessage(info) {
    var {
      rule,
      validator,
      name: name2
    } = info;
    if (!isDefined(rule.message)) {
      if (validator.defaultFormattedMessage && isDefined(name2)) {
        rule.message = validator.defaultFormattedMessage(name2);
      } else {
        rule.message = validator.defaultMessage();
      }
    }
  },
  _addBrokenRule(info) {
    var {
      result: result2,
      rule
    } = info;
    if (!result2.brokenRule) {
      result2.brokenRule = rule;
    }
    if (!result2.brokenRules) {
      result2.brokenRules = [];
    }
    result2.brokenRules.push(rule);
  },
  validate(value2, rules, name2) {
    var _a;
    var result2 = {
      name: name2,
      value: value2,
      brokenRule: null,
      brokenRules: null,
      isValid: true,
      validationRules: rules,
      pendingRules: null,
      status: STATUS.valid,
      complete: null
    };
    var validator = null === (_a = null === rules || void 0 === rules ? void 0 : rules[0]) || void 0 === _a ? void 0 : _a.validator;
    var asyncRuleItems = [];
    each(rules || [], (_, rule) => {
      var ruleValidator = rulesValidators[rule.type];
      var ruleValidationResult;
      if (ruleValidator) {
        if (isDefined(rule.isValid) && rule.value === value2 && !rule.reevaluate) {
          if (!rule.isValid) {
            result2.isValid = false;
            this._addBrokenRule({
              result: result2,
              rule
            });
            return false;
          }
          return true;
        }
        rule.value = value2;
        if ("async" === rule.type) {
          asyncRuleItems.push({
            rule,
            ruleValidator
          });
          return true;
        }
        ruleValidationResult = ruleValidator.validate(value2, rule);
        rule.isValid = ruleValidationResult;
        if (!ruleValidationResult) {
          result2.isValid = false;
          this._setDefaultMessage({
            rule,
            validator: ruleValidator,
            name: name2
          });
          this._addBrokenRule({
            result: result2,
            rule
          });
        }
        if (!rule.isValid) {
          return false;
        }
      } else {
        throw errors_default.Error("E0100");
      }
    });
    if (result2.isValid && !result2.brokenRules && asyncRuleItems.length) {
      result2 = this._validateAsyncRules({
        value: value2,
        items: asyncRuleItems,
        result: result2,
        name: name2
      });
    }
    this._synchronizeGroupValidationInfo(validator, result2);
    result2.status = result2.pendingRules ? STATUS.pending : result2.isValid ? STATUS.valid : STATUS.invalid;
    return result2;
  },
  _synchronizeGroupValidationInfo(validator, result2) {
    var _a;
    if (!validator) {
      return;
    }
    var groupConfig = ValidationEngine.getGroupConfig(validator._validationGroup);
    groupConfig._updateBrokenRules.call(groupConfig, {
      validator,
      brokenRules: null !== (_a = result2.brokenRules) && void 0 !== _a ? _a : []
    });
  },
  _validateAsyncRules(_ref) {
    var {
      result: result2,
      value: value2,
      items,
      name: name2
    } = _ref;
    var asyncResults = [];
    each(items, (_, item) => {
      var validateResult = item.ruleValidator.validate(value2, item.rule);
      if (!isPromise(validateResult)) {
        this._updateRuleConfig({
          rule: item.rule,
          ruleResult: this._getPatchedRuleResult(validateResult),
          validator: item.ruleValidator,
          name: name2
        });
      } else {
        if (!result2.pendingRules) {
          result2.pendingRules = [];
        }
        result2.pendingRules.push(item.rule);
        var asyncResult = validateResult.then((res) => {
          var ruleResult = this._getPatchedRuleResult(res);
          this._updateRuleConfig({
            rule: item.rule,
            ruleResult,
            validator: item.ruleValidator,
            name: name2
          });
          return ruleResult;
        });
        asyncResults.push(asyncResult);
      }
    });
    if (asyncResults.length) {
      result2.complete = Promise.all(asyncResults).then((values) => this._getAsyncRulesResult({
        result: result2,
        values
      }));
    }
    return result2;
  },
  _updateRuleConfig(_ref2) {
    var {
      rule,
      ruleResult,
      validator,
      name: name2
    } = _ref2;
    rule.isValid = ruleResult.isValid;
    if (!ruleResult.isValid) {
      if (isDefined(ruleResult.message) && isString(ruleResult.message) && ruleResult.message.length) {
        rule.message = ruleResult.message;
      } else {
        this._setDefaultMessage({
          rule,
          validator,
          name: name2
        });
      }
    }
  },
  _getPatchedRuleResult(ruleResult) {
    var result2;
    if (isObject(ruleResult)) {
      result2 = extend({}, ruleResult);
      if (!isDefined(result2.isValid)) {
        result2.isValid = true;
      }
    } else {
      result2 = {
        isValid: isBoolean(ruleResult) ? ruleResult : true
      };
    }
    return result2;
  },
  _getAsyncRulesResult(_ref3) {
    var {
      values,
      result: result2
    } = _ref3;
    each(values, (index, val) => {
      if (false === val.isValid) {
        result2.isValid = val.isValid;
        var rule = result2.pendingRules[index];
        this._addBrokenRule({
          result: result2,
          rule
        });
      }
    });
    result2.pendingRules = null;
    result2.complete = null;
    result2.status = result2.isValid ? STATUS.valid : STATUS.invalid;
    return result2;
  },
  registerValidatorInGroup(group, validator) {
    var groupConfig = ValidationEngine.addGroup(group);
    groupConfig.registerValidator.call(groupConfig, validator);
  },
  removeRegisteredValidator(group, validator) {
    var config2 = ValidationEngine.getGroupConfig(group);
    if (config2) {
      config2.removeRegisteredValidator.call(config2, validator);
      var validatorsInGroup = config2.validators;
      var isRemovable = config2._isRemovable;
      var shouldRemoveGroup = 0 === validatorsInGroup.length && isRemovable;
      if (shouldRemoveGroup) {
        this.removeGroup(group);
      }
    }
  },
  initValidationOptions(options2) {
    var initedOptions = {};
    if (options2) {
      ["isValid", "validationStatus", "validationError", "validationErrors"].forEach((prop) => {
        if (prop in options2) {
          extend(initedOptions, this.synchronizeValidationOptions({
            name: prop,
            value: options2[prop]
          }, options2));
        }
      });
    }
    return initedOptions;
  },
  synchronizeValidationOptions(_ref4, options2) {
    var {
      name: name2,
      value: value2
    } = _ref4;
    switch (name2) {
      case "validationStatus":
        var isValid = value2 === STATUS.valid || value2 === STATUS.pending;
        return options2.isValid !== isValid ? {
          isValid
        } : {};
      case "isValid":
        var {
          validationStatus
        } = options2;
        var newStatus = validationStatus;
        if (value2 && validationStatus === STATUS.invalid) {
          newStatus = STATUS.valid;
        } else if (!value2 && validationStatus !== STATUS.invalid) {
          newStatus = STATUS.invalid;
        }
        return newStatus !== validationStatus ? {
          validationStatus: newStatus
        } : {};
      case "validationErrors":
        var validationError = !value2 || !value2.length ? null : value2[0];
        return options2.validationError !== validationError ? {
          validationError
        } : {};
      case "validationError":
        var {
          validationErrors
        } = options2;
        if (!value2 && validationErrors) {
          return {
            validationErrors: null
          };
        }
        if (value2 && !validationErrors) {
          return {
            validationErrors: [value2]
          };
        }
        if (value2 && validationErrors && value2 !== validationErrors[0]) {
          validationErrors[0] = value2;
          return {
            validationErrors: validationErrors.slice()
          };
        }
    }
    return {};
  },
  validateGroup(group) {
    var groupConfig = ValidationEngine.getGroupConfig(group);
    if (!groupConfig) {
      throw errors_default.Error("E0110");
    }
    return groupConfig.validate();
  },
  resetGroup(group) {
    var groupConfig = ValidationEngine.getGroupConfig(group);
    if (!groupConfig) {
      throw errors_default.Error("E0110");
    }
    return groupConfig.reset();
  }
};
ValidationEngine.initGroups();
var m_validation_engine_default = ValidationEngine;

// node_modules/devextreme/esm/ui/validation_engine.js
var validation_engine_default = m_validation_engine_default;

// node_modules/devextreme/esm/__internal/ui/m_validation_message.js
var INVALID_MESSAGE = "dx-invalid-message";
var INVALID_MESSAGE_AUTO = "dx-invalid-message-auto";
var INVALID_MESSAGE_ALWAYS = "dx-invalid-message-always";
var INVALID_MESSAGE_CONTENT = "dx-invalid-message-content";
var VALIDATION_MESSAGE_MIN_WIDTH = 100;
var ValidationMessage = ui_overlay_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      integrationOptions: {},
      templatesRenderAsynchronously: false,
      shading: false,
      width: "auto",
      height: "auto",
      hideOnOutsideClick: false,
      animation: null,
      visible: true,
      propagateOutsideClick: true,
      _checkParentVisibility: false,
      rtlEnabled: false,
      contentTemplate: this._renderInnerHtml,
      maxWidth: "100%",
      container: this.$element(),
      target: void 0,
      mode: "auto",
      validationErrors: void 0,
      preventScrollEvents: false,
      positionSide: "top",
      boundary: void 0,
      offset: {
        h: 0,
        v: 0
      },
      contentId: void 0
    });
  },
  _init() {
    this.callBase();
    this.updateMaxWidth();
    this._updatePosition();
  },
  _initMarkup() {
    this.callBase();
    this._ensureMessageNotEmpty();
    this._updatePositionByTarget();
    this._toggleModeClass();
    this._updateContentId();
  },
  _updatePositionByTarget() {
    var {
      target
    } = this.option();
    this.option("position.of", target);
  },
  _ensureMessageNotEmpty() {
    this._textMarkup = this._getTextMarkup();
    var shouldShowMessage = this.option("visible") && this._textMarkup;
    this._toggleVisibilityClasses(shouldShowMessage);
  },
  _toggleVisibilityClasses(visible) {
    if (visible) {
      this.$element().addClass(INVALID_MESSAGE);
      this.$wrapper().addClass(INVALID_MESSAGE);
    } else {
      this.$element().removeClass(INVALID_MESSAGE);
      this.$wrapper().removeClass(INVALID_MESSAGE);
    }
  },
  _updateContentId() {
    var {
      container,
      contentId
    } = this.option();
    var id = null !== contentId && void 0 !== contentId ? contentId : renderer_default(container).attr("aria-describedby");
    this.$content().addClass(INVALID_MESSAGE_CONTENT).attr("id", id);
  },
  _renderInnerHtml(element) {
    var $element = element && renderer_default(element);
    null === $element || void 0 === $element ? void 0 : $element.html(this._textMarkup);
  },
  _getTextMarkup() {
    var _a;
    var validationErrors = null !== (_a = this.option("validationErrors")) && void 0 !== _a ? _a : [];
    var validationErrorMessage = "";
    validationErrors.forEach((err) => {
      var _a2;
      var separator = validationErrorMessage ? "<br />" : "";
      validationErrorMessage += separator + encodeHtml(null !== (_a2 = null === err || void 0 === err ? void 0 : err.message) && void 0 !== _a2 ? _a2 : "");
    });
    return validationErrorMessage;
  },
  _toggleModeClass() {
    var mode = this.option("mode");
    this.$wrapper().toggleClass(INVALID_MESSAGE_AUTO, "auto" === mode).toggleClass(INVALID_MESSAGE_ALWAYS, "always" === mode);
  },
  updateMaxWidth() {
    var target = this.option("target");
    var targetWidth = getOuterWidth(target);
    var maxWidth = "100%";
    if (targetWidth) {
      maxWidth = Math.max(targetWidth, VALIDATION_MESSAGE_MIN_WIDTH);
    }
    this.option({
      maxWidth
    });
  },
  _getPositionsArray(positionSide, rtlSide) {
    switch (positionSide) {
      case "top":
        return ["".concat(rtlSide, " bottom"), "".concat(rtlSide, " top")];
      case "left":
        return ["right", "left"];
      case "right":
        return ["left", "right"];
      default:
        return ["".concat(rtlSide, " top"), "".concat(rtlSide, " bottom")];
    }
  },
  _updatePosition() {
    var {
      positionSide,
      rtlEnabled,
      offset: componentOffset,
      boundary
    } = this.option();
    var rtlSide = getDefaultAlignment(rtlEnabled);
    var positions = this._getPositionsArray(positionSide, rtlSide);
    var offset = _extends({}, componentOffset);
    this.$element().addClass("dx-invalid-message-".concat(positionSide));
    if (rtlEnabled && "left" !== positionSide && "right" !== positionSide) {
      offset.h = -offset.h;
    }
    if ("top" === positionSide) {
      offset.v = -offset.v;
    }
    if ("left" === positionSide) {
      offset.h = -offset.h;
    }
    this.option("position", {
      offset,
      boundary,
      my: positions[0],
      at: positions[1],
      collision: "none flip"
    });
  },
  _optionChanged(args) {
    var {
      name: name2,
      value: value2,
      previousValue
    } = args;
    switch (name2) {
      case "target":
        this._updatePositionByTarget();
        this.updateMaxWidth();
        this.callBase(args);
        break;
      case "boundary":
        this.option("position.boundary", value2);
        break;
      case "mode":
        this._toggleModeClass(value2);
        break;
      case "rtlEnabled":
      case "offset":
      case "positionSide":
        this.$element().removeClass("dx-invalid-message-".concat(previousValue));
        this._updatePosition();
        break;
      case "container":
        this._updateContentId();
        this.callBase(args);
        break;
      case "contentId":
        this._updateContentId();
        break;
      case "validationErrors":
        this._ensureMessageNotEmpty();
        this._renderInnerHtml(this.$content());
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxValidationMessage", ValidationMessage);
var m_validation_message_default = ValidationMessage;

// node_modules/devextreme/esm/ui/validation_message.js
var validation_message_default = m_validation_message_default;

// node_modules/devextreme/esm/__internal/ui/editor/m_editor.js
var INVALID_MESSAGE_AUTO2 = "dx-invalid-message-auto";
var READONLY_STATE_CLASS = "dx-state-readonly";
var INVALID_CLASS = "dx-invalid";
var DX_INVALID_BADGE_CLASS = "dx-show-invalid-badge";
var VALIDATION_TARGET = "dx-validation-target";
var VALIDATION_STATUS_VALID = "valid";
var VALIDATION_STATUS_INVALID = "invalid";
var READONLY_NAMESPACE = "editorReadOnly";
var ALLOWED_STYLING_MODES = ["outlined", "filled", "underlined"];
var VALIDATION_MESSAGE_KEYS_MAP = {
  validationMessageMode: "mode",
  validationMessagePosition: "positionSide",
  validationMessageOffset: "offset",
  validationBoundary: "boundary"
};
var Editor = ui_widget_default.inherit({
  ctor() {
    this.showValidationMessageTimeout = null;
    this.validationRequest = callbacks_default();
    this.callBase.apply(this, arguments);
  },
  _createElement(element) {
    this.callBase(element);
    var $element = this.$element();
    if ($element) {
      data($element[0], VALIDATION_TARGET, this);
    }
  },
  _initOptions(options2) {
    this.callBase.apply(this, arguments);
    this.option(validation_engine_default.initValidationOptions(options2));
  },
  _init() {
    this._initialValue = this.option("value");
    this.callBase();
    this._options.cache("validationTooltipOptions", this.option("validationTooltipOptions"));
    var $element = this.$element();
    $element.addClass(DX_INVALID_BADGE_CLASS);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      value: null,
      name: "",
      onValueChanged: null,
      readOnly: false,
      isValid: true,
      validationError: null,
      validationErrors: null,
      validationStatus: VALIDATION_STATUS_VALID,
      validationMessageMode: "auto",
      validationMessagePosition: "bottom",
      validationBoundary: void 0,
      validationMessageOffset: {
        h: 0,
        v: 0
      },
      validationTooltipOptions: {},
      _showValidationMessage: true,
      isDirty: false
    });
  },
  _attachKeyboardEvents() {
    if (!this.option("readOnly")) {
      this.callBase();
    }
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      validationError: true
    });
  },
  _createValueChangeAction() {
    this._valueChangeAction = this._createActionByOption("onValueChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _suppressValueChangeAction() {
    this._valueChangeActionSuppressed = true;
  },
  _resumeValueChangeAction() {
    this._valueChangeActionSuppressed = false;
  },
  _initMarkup() {
    var _a;
    this._toggleReadOnlyState();
    this._setSubmitElementName(this.option("name"));
    this.callBase();
    this._renderValidationState();
    null === (_a = this.option("_onMarkupRendered")) || void 0 === _a ? void 0 : _a();
  },
  _raiseValueChangeAction(value2, previousValue) {
    if (!this._valueChangeAction) {
      this._createValueChangeAction();
    }
    this._valueChangeAction(this._valueChangeArgs(value2, previousValue));
  },
  _valueChangeArgs(value2, previousValue) {
    return {
      value: value2,
      previousValue,
      event: this._valueChangeEventInstance
    };
  },
  _saveValueChangeEvent(e) {
    this._valueChangeEventInstance = e;
  },
  _focusInHandler(e) {
    var _a;
    var isValidationMessageShownOnFocus = "auto" === this.option("validationMessageMode");
    if (this._canValueBeChangedByClick() && isValidationMessageShownOnFocus) {
      var $validationMessageWrapper = null === (_a = this._validationMessage) || void 0 === _a ? void 0 : _a.$wrapper();
      null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.removeClass(INVALID_MESSAGE_AUTO2);
      clearTimeout(this.showValidationMessageTimeout);
      this.showValidationMessageTimeout = setTimeout(() => null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.addClass(INVALID_MESSAGE_AUTO2), 150);
    }
    return this.callBase(e);
  },
  _canValueBeChangedByClick: () => false,
  _getStylingModePrefix: () => "dx-editor-",
  _renderStylingMode() {
    var optionValue = this.option("stylingMode");
    var prefix = this._getStylingModePrefix();
    var allowedStylingClasses = ALLOWED_STYLING_MODES.map((mode) => prefix + mode);
    allowedStylingClasses.forEach((className) => this.$element().removeClass(className));
    var stylingModeClass = prefix + optionValue;
    if (!allowedStylingClasses.includes(stylingModeClass)) {
      var defaultOptionValue = this._getDefaultOptions().stylingMode;
      var platformOptionValue = this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;
      stylingModeClass = prefix + (platformOptionValue || defaultOptionValue);
    }
    this.$element().addClass(stylingModeClass);
  },
  _getValidationErrors() {
    var validationErrors = this.option("validationErrors");
    if (!validationErrors && this.option("validationError")) {
      validationErrors = [this.option("validationError")];
    }
    return validationErrors;
  },
  _disposeValidationMessage() {
    if (this._$validationMessage) {
      this._$validationMessage.remove();
      this.setAria("describedby", null);
      this._$validationMessage = void 0;
      this._validationMessage = void 0;
    }
  },
  _toggleValidationClasses(isInvalid3) {
    this.$element().toggleClass(INVALID_CLASS, isInvalid3);
    this.setAria(VALIDATION_STATUS_INVALID, isInvalid3 || void 0);
  },
  _renderValidationState() {
    var isValid = this.option("isValid") && this.option("validationStatus") !== VALIDATION_STATUS_INVALID;
    var validationErrors = this._getValidationErrors();
    var $element = this.$element();
    this._toggleValidationClasses(!isValid);
    if (!hasWindow() || false === this.option("_showValidationMessage")) {
      return;
    }
    this._disposeValidationMessage();
    if (!isValid && validationErrors) {
      var {
        validationMessageMode,
        validationMessageOffset,
        validationBoundary,
        rtlEnabled
      } = this.option();
      this._$validationMessage = renderer_default("<div>").appendTo($element);
      var validationMessageContentId = "dx-".concat(new guid_default());
      this.setAria("describedby", validationMessageContentId);
      this._validationMessage = new validation_message_default(this._$validationMessage, extend({
        validationErrors,
        rtlEnabled,
        target: this._getValidationMessageTarget(),
        visualContainer: $element,
        mode: validationMessageMode,
        positionSide: this._getValidationMessagePosition(),
        offset: validationMessageOffset,
        boundary: validationBoundary,
        contentId: validationMessageContentId
      }, this._options.cache("validationTooltipOptions")));
      this._bindInnerWidgetOptions(this._validationMessage, "validationTooltipOptions");
    }
  },
  _getValidationMessagePosition() {
    return this.option("validationMessagePosition");
  },
  _getValidationMessageTarget() {
    return this.$element();
  },
  _toggleReadOnlyState() {
    var readOnly = this.option("readOnly");
    this._toggleBackspaceHandler(readOnly);
    this.$element().toggleClass(READONLY_STATE_CLASS, !!readOnly);
    this.setAria("readonly", readOnly || void 0);
  },
  _toggleBackspaceHandler(isReadOnly) {
    var $eventTarget = this._keyboardEventBindingTarget();
    var eventName = addNamespace("keydown", READONLY_NAMESPACE);
    events_engine_default.off($eventTarget, eventName);
    if (isReadOnly) {
      events_engine_default.on($eventTarget, eventName, (e) => {
        if ("backspace" === normalizeKeyName(e)) {
          e.preventDefault();
        }
      });
    }
  },
  _dispose() {
    var element = this.$element()[0];
    data(element, VALIDATION_TARGET, null);
    clearTimeout(this.showValidationMessageTimeout);
    this._disposeValidationMessage();
    this.callBase();
  },
  _setSubmitElementName(name2) {
    var $submitElement = this._getSubmitElement();
    if (!$submitElement) {
      return;
    }
    if (name2.length > 0) {
      $submitElement.attr("name", name2);
    } else {
      $submitElement.removeAttr("name");
    }
  },
  _getSubmitElement: () => null,
  _setValidationMessageOption(_ref) {
    var {
      name: name2,
      value: value2
    } = _ref;
    var _a;
    var optionKey = VALIDATION_MESSAGE_KEYS_MAP[name2] ? VALIDATION_MESSAGE_KEYS_MAP[name2] : name2;
    null === (_a = this._validationMessage) || void 0 === _a ? void 0 : _a.option(optionKey, value2);
  },
  _hasActiveElement: noop,
  _optionChanged(args) {
    var _a;
    switch (args.name) {
      case "onValueChanged":
        this._createValueChangeAction();
        break;
      case "readOnly":
        this._toggleReadOnlyState();
        this._refreshFocusState();
        break;
      case "value":
        if (args.value != args.previousValue) {
          this.option("isDirty", this._initialValue !== args.value);
          this.validationRequest.fire({
            value: args.value,
            editor: this
          });
        }
        if (!this._valueChangeActionSuppressed) {
          this._raiseValueChangeAction(args.value, args.previousValue);
          this._saveValueChangeEvent(void 0);
        }
        break;
      case "width":
        this.callBase(args);
        null === (_a = this._validationMessage) || void 0 === _a ? void 0 : _a.updateMaxWidth();
        break;
      case "name":
        this._setSubmitElementName(args.value);
        break;
      case "isValid":
      case "validationError":
      case "validationErrors":
      case "validationStatus":
        this.option(validation_engine_default.synchronizeValidationOptions(args, this.option()));
        this._renderValidationState();
        break;
      case "validationBoundary":
      case "validationMessageMode":
      case "validationMessagePosition":
      case "validationMessageOffset":
        this._setValidationMessageOption(args);
        break;
      case "rtlEnabled":
        this._setValidationMessageOption(args);
        this.callBase(args);
        break;
      case "validationTooltipOptions":
        this._innerWidgetOptionChanged(this._validationMessage, args);
        break;
      case "_showValidationMessage":
      case "isDirty":
        break;
      default:
        this.callBase(args);
    }
  },
  _resetToInitialValue() {
    this.option("value", this._initialValue);
  },
  blur() {
    if (this._hasActiveElement()) {
      resetActiveElement();
    }
  },
  clear() {
    var defaultOptions3 = this._getDefaultOptions();
    this.option("value", defaultOptions3.value);
  },
  reset() {
    var value2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0;
    if (arguments.length) {
      this._initialValue = value2;
    }
    this._resetToInitialValue();
    this.option("isDirty", false);
    this.option("isValid", true);
  }
});
Editor.isEditor = (instance) => instance instanceof Editor;
var m_editor_default = Editor;

// node_modules/devextreme/esm/ui/editor/editor.js
var editor_default = m_editor_default;

// node_modules/devextreme/esm/__internal/ui/text_box/texteditor_button_collection/m_button.js
var TextEditorButton = class {
  constructor(name2, editor, options2) {
    this.instance = null;
    this.$container = null;
    this.$placeMarker = null;
    this.editor = editor;
    this.name = name2;
    this.options = options2 || {};
  }
  _addPlaceMarker($container) {
    this.$placeMarker = renderer_default("<div>").appendTo($container);
  }
  _addToContainer($element) {
    var {
      $placeMarker,
      $container
    } = this;
    $placeMarker ? $placeMarker.replaceWith($element) : $element.appendTo($container);
  }
  _attachEvents(instance, $element) {
    throw "Not implemented";
  }
  _create() {
    throw "Not implemented";
  }
  _isRendered() {
    return !!this.instance;
  }
  _isVisible() {
    var {
      editor,
      options: options2
    } = this;
    return options2.visible || !editor.option("readOnly");
  }
  _isDisabled() {
    throw "Not implemented";
  }
  _shouldRender() {
    return this._isVisible() && !this._isRendered();
  }
  dispose() {
    var {
      instance,
      $placeMarker
    } = this;
    if (instance) {
      instance.dispose ? instance.dispose() : instance.remove();
      this.instance = null;
    }
    $placeMarker && $placeMarker.remove();
  }
  render() {
    var $container = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.$container;
    this.$container = $container;
    if (this._isVisible()) {
      var {
        instance,
        $element
      } = this._create();
      this.instance = instance;
      this._attachEvents(instance, $element);
    } else {
      this._addPlaceMarker($container);
    }
  }
  update() {
    if (this._shouldRender()) {
      this.render();
    }
    return !!this.instance;
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.clear.js
var pointerDown = pointer_default.down;
var STATE_INVISIBLE_CLASS = "dx-state-invisible";
var TEXTEDITOR_CLEAR_BUTTON_CLASS = "dx-clear-button-area";
var TEXTEDITOR_CLEAR_ICON_CLASS = "dx-icon-clear";
var TEXTEDITOR_ICON_CLASS = "dx-icon";
var TEXTEDITOR_SHOW_CLEAR_BUTTON_CLASS = "dx-show-clear-button";
var ClearButton = class extends TextEditorButton {
  _create() {
    var $element = renderer_default("<span>").addClass(TEXTEDITOR_CLEAR_BUTTON_CLASS).append(renderer_default("<span>").addClass(TEXTEDITOR_ICON_CLASS).addClass(TEXTEDITOR_CLEAR_ICON_CLASS));
    this._addToContainer($element);
    this.update(true);
    return {
      instance: $element,
      $element
    };
  }
  _isVisible() {
    var {
      editor
    } = this;
    return editor._isClearButtonVisible();
  }
  _attachEvents(instance, $button) {
    var {
      editor
    } = this;
    var editorName = editor.NAME;
    events_engine_default.on($button, addNamespace(pointerDown, editorName), (e) => {
      e.preventDefault();
      if ("mouse" !== e.pointerType) {
        editor._clearValueHandler(e);
      }
    });
    events_engine_default.on($button, addNamespace(CLICK_EVENT_NAME, editorName), (e) => editor._clearValueHandler(e));
  }
  _legacyRender($editor, isVisible) {
    $editor.toggleClass(TEXTEDITOR_SHOW_CLEAR_BUTTON_CLASS, isVisible);
  }
  update() {
    var rendered = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : false;
    !rendered && super.update();
    var {
      editor,
      instance
    } = this;
    var $editor = editor.$element();
    var isVisible = this._isVisible();
    instance && instance.toggleClass(STATE_INVISIBLE_CLASS, !isVisible);
    this._legacyRender($editor, isVisible);
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.label.js
var TEXTEDITOR_LABEL_CLASS = "dx-texteditor-label";
var TEXTEDITOR_WITH_LABEL_CLASS = "dx-texteditor-with-label";
var TEXTEDITOR_LABEL_OUTSIDE_CLASS = "dx-texteditor-label-outside";
var TEXTEDITOR_WITH_FLOATING_LABEL_CLASS = "dx-texteditor-with-floating-label";
var TEXTEDITOR_WITH_BEFORE_BUTTONS_CLASS = "dx-texteditor-with-before-buttons";
var LABEL_BEFORE_CLASS = "dx-label-before";
var LABEL_CLASS = "dx-label";
var LABEL_AFTER_CLASS = "dx-label-after";
var TextEditorLabel = class {
  constructor(props) {
    this.NAME = "dxLabel";
    this._props = props;
    this._id = "".concat(TEXTEDITOR_LABEL_CLASS, "-").concat(new guid_default());
    this._render();
    this._toggleMarkupVisibility();
  }
  _isVisible() {
    return !!this._props.text && "hidden" !== this._props.mode;
  }
  _render() {
    this._$before = renderer_default("<div>").addClass(LABEL_BEFORE_CLASS);
    this._$labelSpan = renderer_default("<span>");
    this._$label = renderer_default("<div>").addClass(LABEL_CLASS).append(this._$labelSpan);
    this._$after = renderer_default("<div>").addClass(LABEL_AFTER_CLASS);
    this._$root = renderer_default("<div>").addClass(TEXTEDITOR_LABEL_CLASS).attr("id", this._id).append(this._$before).append(this._$label).append(this._$after);
    this._updateMark();
    this._updateText();
    this._updateBeforeWidth();
    this._updateMaxWidth();
  }
  _toggleMarkupVisibility() {
    var visible = this._isVisible();
    this._updateEditorBeforeButtonsClass(visible);
    this._updateEditorLabelClass(visible);
    visible ? this._$root.appendTo(this._props.$editor) : this._$root.detach();
    this._attachEvents();
  }
  _attachEvents() {
    var clickEventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var hoverStartEventName = addNamespace(HOVERSTART, this.NAME);
    var activeEventName = addNamespace(ACTIVE_EVENT_NAME, this.NAME);
    events_engine_default.off(this._$labelSpan, clickEventName);
    events_engine_default.off(this._$labelSpan, hoverStartEventName);
    events_engine_default.off(this._$labelSpan, activeEventName);
    if (this._isVisible() && this._isOutsideMode()) {
      events_engine_default.on(this._$labelSpan, clickEventName, (e) => {
        var selectedText = getWindow().getSelection().toString();
        if ("" === selectedText) {
          this._props.onClickHandler();
          e.preventDefault();
        }
      });
      events_engine_default.on(this._$labelSpan, hoverStartEventName, (e) => {
        this._props.onHoverHandler(e);
      });
      events_engine_default.on(this._$labelSpan, activeEventName, (e) => {
        this._props.onActiveHandler(e);
      });
    }
  }
  _updateEditorLabelClass(visible) {
    this._props.$editor.removeClass(TEXTEDITOR_WITH_FLOATING_LABEL_CLASS).removeClass(TEXTEDITOR_LABEL_OUTSIDE_CLASS).removeClass(TEXTEDITOR_WITH_LABEL_CLASS);
    if (visible) {
      var labelClass = "floating" === this._props.mode ? TEXTEDITOR_WITH_FLOATING_LABEL_CLASS : TEXTEDITOR_WITH_LABEL_CLASS;
      this._props.$editor.addClass(labelClass);
      if (this._isOutsideMode()) {
        this._props.$editor.addClass(TEXTEDITOR_LABEL_OUTSIDE_CLASS);
      }
    }
  }
  _isOutsideMode() {
    return "outside" === this._props.mode;
  }
  _updateEditorBeforeButtonsClass() {
    var visible = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._isVisible();
    this._props.$editor.removeClass(TEXTEDITOR_WITH_BEFORE_BUTTONS_CLASS);
    if (visible) {
      var beforeButtonsClass = this._props.containsButtonsBefore ? TEXTEDITOR_WITH_BEFORE_BUTTONS_CLASS : "";
      this._props.$editor.addClass(beforeButtonsClass);
    }
  }
  _updateMark() {
    this._$labelSpan.attr("data-mark", this._props.mark);
  }
  _updateText() {
    this._$labelSpan.text(this._props.text);
  }
  _updateBeforeWidth() {
    var _a;
    if (this._isVisible()) {
      var width = null !== (_a = this._props.beforeWidth) && void 0 !== _a ? _a : this._props.getBeforeWidth();
      this._$before.css({
        width
      });
      this._updateLabelTransform();
    }
  }
  _updateLabelTransform() {
    var offset = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
    this._$labelSpan.css("transform", "");
    if (this._isVisible() && this._isOutsideMode()) {
      var sign2 = this._props.rtlEnabled ? 1 : -1;
      var labelTranslateX = sign2 * (getWidth(this._$before) + offset);
      this._$labelSpan.css("transform", "translateX(".concat(labelTranslateX, "px)"));
    }
  }
  _updateMaxWidth() {
    var _a;
    if (this._isVisible() && !this._isOutsideMode()) {
      var maxWidth = null !== (_a = this._props.containerWidth) && void 0 !== _a ? _a : this._props.getContainerWidth();
      this._$label.css({
        maxWidth
      });
    }
  }
  $element() {
    return this._$root;
  }
  isVisible() {
    return this._isVisible();
  }
  getId() {
    if (this._isVisible()) {
      return this._id;
    }
  }
  updateMode(mode) {
    this._props.mode = mode;
    this._toggleMarkupVisibility();
    this._updateBeforeWidth();
    this._updateMaxWidth();
  }
  updateText(text) {
    this._props.text = text;
    this._updateText();
    this._toggleMarkupVisibility();
    this._updateBeforeWidth();
    this._updateMaxWidth();
  }
  updateMark(mark) {
    this._props.mark = mark;
    this._updateMark();
  }
  updateContainsButtonsBefore(containsButtonsBefore) {
    this._props.containsButtonsBefore = containsButtonsBefore;
    this._updateEditorBeforeButtonsClass();
  }
  updateBeforeWidth(beforeWidth) {
    this._props.beforeWidth = beforeWidth;
    this._updateBeforeWidth();
  }
  updateMaxWidth(containerWidth) {
    this._props.containerWidth = containerWidth;
    this._updateMaxWidth();
  }
};

// node_modules/inferno/dist/index.esm.js
var isArray = Array.isArray;
function isStringOrNumber(o) {
  var type2 = typeof o;
  return type2 === "string" || type2 === "number";
}
function isNullOrUndef(o) {
  return o === void 0 || o === null;
}
function isInvalid(o) {
  return o === null || o === false || o === true || o === void 0;
}
function isFunction2(o) {
  return typeof o === "function";
}
function isString2(o) {
  return typeof o === "string";
}
function isNumber(o) {
  return typeof o === "number";
}
function isNull(o) {
  return o === null;
}
function isUndefined(o) {
  return o === void 0;
}
function combineFrom(first, second) {
  var out = {};
  if (first) {
    for (var key in first) {
      out[key] = first[key];
    }
  }
  if (second) {
    for (var key$1 in second) {
      out[key$1] = second[key$1];
    }
  }
  return out;
}
function isLinkEventObject(o) {
  return !isNull(o) && typeof o === "object";
}
var EMPTY_OBJ = {};
var Fragment = "$F";
function normalizeEventName(name2) {
  return name2.substr(2).toLowerCase();
}
function appendChild(parentDOM, dom) {
  parentDOM.appendChild(dom);
}
function insertOrAppend(parentDOM, newNode, nextNode) {
  if (isNull(nextNode)) {
    appendChild(parentDOM, newNode);
  } else {
    parentDOM.insertBefore(newNode, nextNode);
  }
}
function documentCreateElement(tag, isSVG) {
  if (isSVG) {
    return document.createElementNS("http://www.w3.org/2000/svg", tag);
  }
  return document.createElement(tag);
}
function replaceChild(parentDOM, newDom, lastDom) {
  parentDOM.replaceChild(newDom, lastDom);
}
function removeChild(parentDOM, childNode) {
  parentDOM.removeChild(childNode);
}
function callAll(arrayFn) {
  for (var i = 0; i < arrayFn.length; i++) {
    arrayFn[i]();
  }
}
function findChildVNode(vNode, startEdge, flags) {
  var children = vNode.children;
  if (flags & 4) {
    return children.$LI;
  }
  if (flags & 8192) {
    return vNode.childFlags === 2 ? children : children[startEdge ? 0 : children.length - 1];
  }
  return children;
}
function findDOMfromVNode(vNode, startEdge) {
  var flags;
  while (vNode) {
    flags = vNode.flags;
    if (flags & 2033) {
      return vNode.dom;
    }
    vNode = findChildVNode(vNode, startEdge, flags);
  }
  return null;
}
function removeVNodeDOM(vNode, parentDOM) {
  do {
    var flags = vNode.flags;
    if (flags & 2033) {
      removeChild(parentDOM, vNode.dom);
      return;
    }
    var children = vNode.children;
    if (flags & 4) {
      vNode = children.$LI;
    }
    if (flags & 8) {
      vNode = children;
    }
    if (flags & 8192) {
      if (vNode.childFlags === 2) {
        vNode = children;
      } else {
        for (var i = 0, len = children.length; i < len; ++i) {
          removeVNodeDOM(children[i], parentDOM);
        }
        return;
      }
    }
  } while (vNode);
}
function moveVNodeDOM(vNode, parentDOM, nextNode) {
  do {
    var flags = vNode.flags;
    if (flags & 2033) {
      insertOrAppend(parentDOM, vNode.dom, nextNode);
      return;
    }
    var children = vNode.children;
    if (flags & 4) {
      vNode = children.$LI;
    }
    if (flags & 8) {
      vNode = children;
    }
    if (flags & 8192) {
      if (vNode.childFlags === 2) {
        vNode = children;
      } else {
        for (var i = 0, len = children.length; i < len; ++i) {
          moveVNodeDOM(children[i], parentDOM, nextNode);
        }
        return;
      }
    }
  } while (vNode);
}
function createDerivedState(instance, nextProps, state) {
  if (instance.constructor.getDerivedStateFromProps) {
    return combineFrom(state, instance.constructor.getDerivedStateFromProps(nextProps, state));
  }
  return state;
}
var renderCheck = {
  v: false
};
var options = {
  componentComparator: null,
  createVNode: null,
  renderComplete: null
};
function setTextContent(dom, children) {
  dom.textContent = children;
}
function isLastValueSameLinkEvent(lastValue, nextValue) {
  return isLinkEventObject(lastValue) && lastValue.event === nextValue.event && lastValue.data === nextValue.data;
}
function mergeUnsetProperties(to, from) {
  for (var propName in from) {
    if (isUndefined(to[propName])) {
      to[propName] = from[propName];
    }
  }
  return to;
}
function safeCall1(method, arg1) {
  return !!isFunction2(method) && (method(arg1), true);
}
var keyPrefix = "$";
function V(childFlags, children, className, flags, key, props, ref, type2) {
  this.childFlags = childFlags;
  this.children = children;
  this.className = className;
  this.dom = null;
  this.flags = flags;
  this.key = key === void 0 ? null : key;
  this.props = props === void 0 ? null : props;
  this.ref = ref === void 0 ? null : ref;
  this.type = type2;
}
function createVNode(flags, type2, className, children, childFlags, props, key, ref) {
  var childFlag = childFlags === void 0 ? 1 : childFlags;
  var vNode = new V(childFlag, children, className, flags, key, props, ref, type2);
  if (options.createVNode) {
    options.createVNode(vNode);
  }
  if (childFlag === 0) {
    normalizeChildren(vNode, vNode.children);
  }
  return vNode;
}
function mergeDefaultHooks(flags, type2, ref) {
  if (flags & 4) {
    return ref;
  }
  var defaultHooks = (flags & 32768 ? type2.render : type2).defaultHooks;
  if (isNullOrUndef(defaultHooks)) {
    return ref;
  }
  if (isNullOrUndef(ref)) {
    return defaultHooks;
  }
  return mergeUnsetProperties(ref, defaultHooks);
}
function mergeDefaultProps(flags, type2, props) {
  var defaultProps = (flags & 32768 ? type2.render : type2).defaultProps;
  if (isNullOrUndef(defaultProps)) {
    return props;
  }
  if (isNullOrUndef(props)) {
    return combineFrom(defaultProps, null);
  }
  return mergeUnsetProperties(props, defaultProps);
}
function resolveComponentFlags(flags, type2) {
  if (flags & 12) {
    return flags;
  }
  if (type2.prototype && type2.prototype.render) {
    return 4;
  }
  if (type2.render) {
    return 32776;
  }
  return 8;
}
function createComponentVNode(flags, type2, props, key, ref) {
  flags = resolveComponentFlags(flags, type2);
  var vNode = new V(1, null, null, flags, key, mergeDefaultProps(flags, type2, props), mergeDefaultHooks(flags, type2, ref), type2);
  if (options.createVNode) {
    options.createVNode(vNode);
  }
  return vNode;
}
function createTextVNode(text, key) {
  return new V(1, isNullOrUndef(text) || text === true || text === false ? "" : text, null, 16, key, null, null, null);
}
function createFragment(children, childFlags, key) {
  var fragment = createVNode(8192, 8192, null, children, childFlags, null, key, null);
  switch (fragment.childFlags) {
    case 1:
      fragment.children = createVoidVNode();
      fragment.childFlags = 2;
      break;
    case 16:
      fragment.children = [createTextVNode(children)];
      fragment.childFlags = 4;
      break;
  }
  return fragment;
}
function normalizeProps(vNode) {
  var props = vNode.props;
  if (props) {
    var flags = vNode.flags;
    if (flags & 481) {
      if (props.children !== void 0 && isNullOrUndef(vNode.children)) {
        normalizeChildren(vNode, props.children);
      }
      if (props.className !== void 0) {
        if (isNullOrUndef(vNode.className)) {
          vNode.className = props.className || null;
        }
        props.className = void 0;
      }
    }
    if (props.key !== void 0) {
      vNode.key = props.key;
      props.key = void 0;
    }
    if (props.ref !== void 0) {
      if (flags & 8) {
        vNode.ref = combineFrom(vNode.ref, props.ref);
      } else {
        vNode.ref = props.ref;
      }
      props.ref = void 0;
    }
  }
  return vNode;
}
function cloneFragment(vNodeToClone) {
  var oldChildren = vNodeToClone.children;
  var childFlags = vNodeToClone.childFlags;
  return createFragment(childFlags === 2 ? directClone(oldChildren) : oldChildren.map(directClone), childFlags, vNodeToClone.key);
}
function directClone(vNodeToClone) {
  var flags = vNodeToClone.flags & -16385;
  var props = vNodeToClone.props;
  if (flags & 14) {
    if (!isNull(props)) {
      var propsToClone = props;
      props = {};
      for (var key in propsToClone) {
        props[key] = propsToClone[key];
      }
    }
  }
  if ((flags & 8192) === 0) {
    return new V(vNodeToClone.childFlags, vNodeToClone.children, vNodeToClone.className, flags, vNodeToClone.key, props, vNodeToClone.ref, vNodeToClone.type);
  }
  return cloneFragment(vNodeToClone);
}
function createVoidVNode() {
  return createTextVNode("", null);
}
function _normalizeVNodes(nodes, result2, index, currentKey) {
  for (var len = nodes.length; index < len; index++) {
    var n = nodes[index];
    if (!isInvalid(n)) {
      var newKey = currentKey + keyPrefix + index;
      if (isArray(n)) {
        _normalizeVNodes(n, result2, 0, newKey);
      } else {
        if (isStringOrNumber(n)) {
          n = createTextVNode(n, newKey);
        } else {
          var oldKey = n.key;
          var isPrefixedKey = isString2(oldKey) && oldKey[0] === keyPrefix;
          if (n.flags & 81920 || isPrefixedKey) {
            n = directClone(n);
          }
          n.flags |= 65536;
          if (!isPrefixedKey) {
            if (isNull(oldKey)) {
              n.key = newKey;
            } else {
              n.key = currentKey + oldKey;
            }
          } else if (oldKey.substring(0, currentKey.length) !== currentKey) {
            n.key = currentKey + oldKey;
          }
        }
        result2.push(n);
      }
    }
  }
}
function getFlagsForElementVnode(type2) {
  switch (type2) {
    case "svg":
      return 32;
    case "input":
      return 64;
    case "select":
      return 256;
    case "textarea":
      return 128;
    case Fragment:
      return 8192;
    default:
      return 1;
  }
}
function normalizeChildren(vNode, children) {
  var newChildren;
  var newChildFlags = 1;
  if (isInvalid(children)) {
    newChildren = children;
  } else if (isStringOrNumber(children)) {
    newChildFlags = 16;
    newChildren = children;
  } else if (isArray(children)) {
    var len = children.length;
    for (var i = 0; i < len; ++i) {
      var n = children[i];
      if (isInvalid(n) || isArray(n)) {
        newChildren = newChildren || children.slice(0, i);
        _normalizeVNodes(children, newChildren, i, "");
        break;
      } else if (isStringOrNumber(n)) {
        newChildren = newChildren || children.slice(0, i);
        newChildren.push(createTextVNode(n, keyPrefix + i));
      } else {
        var key = n.key;
        var needsCloning = (n.flags & 81920) > 0;
        var isNullKey = isNull(key);
        var isPrefixed = isString2(key) && key[0] === keyPrefix;
        if (needsCloning || isNullKey || isPrefixed) {
          newChildren = newChildren || children.slice(0, i);
          if (needsCloning || isPrefixed) {
            n = directClone(n);
          }
          if (isNullKey || isPrefixed) {
            n.key = keyPrefix + i;
          }
          newChildren.push(n);
        } else if (newChildren) {
          newChildren.push(n);
        }
        n.flags |= 65536;
      }
    }
    newChildren = newChildren || children;
    if (newChildren.length === 0) {
      newChildFlags = 1;
    } else {
      newChildFlags = 8;
    }
  } else {
    newChildren = children;
    newChildren.flags |= 65536;
    if (children.flags & 81920) {
      newChildren = directClone(children);
    }
    newChildFlags = 2;
  }
  vNode.children = newChildren;
  vNode.childFlags = newChildFlags;
  return vNode;
}
function normalizeRoot(input) {
  if (isInvalid(input) || isStringOrNumber(input)) {
    return createTextVNode(input, null);
  }
  if (isArray(input)) {
    return createFragment(input, 0, null);
  }
  return input.flags & 16384 ? directClone(input) : input;
}
var xlinkNS = "http://www.w3.org/1999/xlink";
var xmlNS = "http://www.w3.org/XML/1998/namespace";
var namespaces = {
  "xlink:actuate": xlinkNS,
  "xlink:arcrole": xlinkNS,
  "xlink:href": xlinkNS,
  "xlink:role": xlinkNS,
  "xlink:show": xlinkNS,
  "xlink:title": xlinkNS,
  "xlink:type": xlinkNS,
  "xml:base": xmlNS,
  "xml:lang": xmlNS,
  "xml:space": xmlNS
};
function getDelegatedEventObject(v) {
  return {
    onClick: v,
    onDblClick: v,
    onFocusIn: v,
    onFocusOut: v,
    onKeyDown: v,
    onKeyPress: v,
    onKeyUp: v,
    onMouseDown: v,
    onMouseMove: v,
    onMouseUp: v,
    onTouchEnd: v,
    onTouchMove: v,
    onTouchStart: v
  };
}
var attachedEventCounts = getDelegatedEventObject(0);
var attachedEvents = getDelegatedEventObject(null);
var syntheticEvents = getDelegatedEventObject(true);
function updateOrAddSyntheticEvent(name2, dom) {
  var eventsObject = dom.$EV;
  if (!eventsObject) {
    eventsObject = dom.$EV = getDelegatedEventObject(null);
  }
  if (!eventsObject[name2]) {
    if (++attachedEventCounts[name2] === 1) {
      attachedEvents[name2] = attachEventToDocument(name2);
    }
  }
  return eventsObject;
}
function unmountSyntheticEvent(name2, dom) {
  var eventsObject = dom.$EV;
  if (eventsObject && eventsObject[name2]) {
    if (--attachedEventCounts[name2] === 0) {
      document.removeEventListener(normalizeEventName(name2), attachedEvents[name2]);
      attachedEvents[name2] = null;
    }
    eventsObject[name2] = null;
  }
}
function handleSyntheticEvent(name2, lastEvent, nextEvent, dom) {
  if (isFunction2(nextEvent)) {
    updateOrAddSyntheticEvent(name2, dom)[name2] = nextEvent;
  } else if (isLinkEventObject(nextEvent)) {
    if (isLastValueSameLinkEvent(lastEvent, nextEvent)) {
      return;
    }
    updateOrAddSyntheticEvent(name2, dom)[name2] = nextEvent;
  } else {
    unmountSyntheticEvent(name2, dom);
  }
}
function getTargetNode(event) {
  return isFunction2(event.composedPath) ? event.composedPath()[0] : event.target;
}
function dispatchEvents(event, isClick, name2, eventData2) {
  var dom = getTargetNode(event);
  do {
    if (isClick && dom.disabled) {
      return;
    }
    var eventsObject = dom.$EV;
    if (eventsObject) {
      var currentEvent = eventsObject[name2];
      if (currentEvent) {
        eventData2.dom = dom;
        currentEvent.event ? currentEvent.event(currentEvent.data, event) : currentEvent(event);
        if (event.cancelBubble) {
          return;
        }
      }
    }
    dom = dom.parentNode;
  } while (!isNull(dom));
}
function stopPropagation() {
  this.cancelBubble = true;
  if (!this.immediatePropagationStopped) {
    this.stopImmediatePropagation();
  }
}
function isDefaultPrevented() {
  return this.defaultPrevented;
}
function isPropagationStopped() {
  return this.cancelBubble;
}
function extendEventProperties(event) {
  var eventData2 = {
    dom: document
  };
  event.isDefaultPrevented = isDefaultPrevented;
  event.isPropagationStopped = isPropagationStopped;
  event.stopPropagation = stopPropagation;
  Object.defineProperty(event, "currentTarget", {
    configurable: true,
    get: function get() {
      return eventData2.dom;
    }
  });
  return eventData2;
}
function rootClickEvent(name2) {
  return function(event) {
    if (event.button !== 0) {
      event.stopPropagation();
      return;
    }
    dispatchEvents(event, true, name2, extendEventProperties(event));
  };
}
function rootEvent(name2) {
  return function(event) {
    dispatchEvents(event, false, name2, extendEventProperties(event));
  };
}
function attachEventToDocument(name2) {
  var attachedEvent = name2 === "onClick" || name2 === "onDblClick" ? rootClickEvent(name2) : rootEvent(name2);
  document.addEventListener(normalizeEventName(name2), attachedEvent);
  return attachedEvent;
}
function isSameInnerHTML(dom, innerHTML) {
  var tempdom = document.createElement("i");
  tempdom.innerHTML = innerHTML;
  return tempdom.innerHTML === dom.innerHTML;
}
function triggerEventListener(props, methodName, e) {
  if (props[methodName]) {
    var listener = props[methodName];
    if (listener.event) {
      listener.event(listener.data, e);
    } else {
      listener(e);
    }
  } else {
    var nativeListenerName = methodName.toLowerCase();
    if (props[nativeListenerName]) {
      props[nativeListenerName](e);
    }
  }
}
function createWrappedFunction(methodName, applyValue) {
  var fnMethod = function(e) {
    var vNode = this.$V;
    if (!vNode) {
      return;
    }
    var props = vNode.props || EMPTY_OBJ;
    var dom = vNode.dom;
    if (isString2(methodName)) {
      triggerEventListener(props, methodName, e);
    } else {
      for (var i = 0; i < methodName.length; ++i) {
        triggerEventListener(props, methodName[i], e);
      }
    }
    if (isFunction2(applyValue)) {
      var newVNode = this.$V;
      var newProps = newVNode.props || EMPTY_OBJ;
      applyValue(newProps, dom, false, newVNode);
    }
  };
  Object.defineProperty(fnMethod, "wrapped", {
    configurable: false,
    enumerable: false,
    value: true,
    writable: false
  });
  return fnMethod;
}
function attachEvent(dom, eventName, handler) {
  var previousKey = "$" + eventName;
  var previousArgs = dom[previousKey];
  if (previousArgs) {
    if (previousArgs[1].wrapped) {
      return;
    }
    dom.removeEventListener(previousArgs[0], previousArgs[1]);
    dom[previousKey] = null;
  }
  if (isFunction2(handler)) {
    dom.addEventListener(eventName, handler);
    dom[previousKey] = [eventName, handler];
  }
}
function isCheckedType(type2) {
  return type2 === "checkbox" || type2 === "radio";
}
var onTextInputChange = createWrappedFunction("onInput", applyValueInput);
var wrappedOnChange = createWrappedFunction(["onClick", "onChange"], applyValueInput);
function emptywrapper(event) {
  event.stopPropagation();
}
emptywrapper.wrapped = true;
function inputEvents(dom, nextPropsOrEmpty) {
  if (isCheckedType(nextPropsOrEmpty.type)) {
    attachEvent(dom, "change", wrappedOnChange);
    attachEvent(dom, "click", emptywrapper);
  } else {
    attachEvent(dom, "input", onTextInputChange);
  }
}
function applyValueInput(nextPropsOrEmpty, dom) {
  var type2 = nextPropsOrEmpty.type;
  var value2 = nextPropsOrEmpty.value;
  var checked = nextPropsOrEmpty.checked;
  var multiple = nextPropsOrEmpty.multiple;
  var defaultValue = nextPropsOrEmpty.defaultValue;
  var hasValue = !isNullOrUndef(value2);
  if (type2 && type2 !== dom.type) {
    dom.setAttribute("type", type2);
  }
  if (!isNullOrUndef(multiple) && multiple !== dom.multiple) {
    dom.multiple = multiple;
  }
  if (!isNullOrUndef(defaultValue) && !hasValue) {
    dom.defaultValue = defaultValue + "";
  }
  if (isCheckedType(type2)) {
    if (hasValue) {
      dom.value = value2;
    }
    if (!isNullOrUndef(checked)) {
      dom.checked = checked;
    }
  } else {
    if (hasValue && dom.value !== value2) {
      dom.defaultValue = value2;
      dom.value = value2;
    } else if (!isNullOrUndef(checked)) {
      dom.checked = checked;
    }
  }
}
function updateChildOptions(vNode, value2) {
  if (vNode.type === "option") {
    updateChildOption(vNode, value2);
  } else {
    var children = vNode.children;
    var flags = vNode.flags;
    if (flags & 4) {
      updateChildOptions(children.$LI, value2);
    } else if (flags & 8) {
      updateChildOptions(children, value2);
    } else if (vNode.childFlags === 2) {
      updateChildOptions(children, value2);
    } else if (vNode.childFlags & 12) {
      for (var i = 0, len = children.length; i < len; ++i) {
        updateChildOptions(children[i], value2);
      }
    }
  }
}
function updateChildOption(vNode, value2) {
  var props = vNode.props || EMPTY_OBJ;
  var dom = vNode.dom;
  dom.value = props.value;
  if (props.value === value2 || isArray(value2) && value2.indexOf(props.value) !== -1) {
    dom.selected = true;
  } else if (!isNullOrUndef(value2) || !isNullOrUndef(props.selected)) {
    dom.selected = props.selected || false;
  }
}
var onSelectChange = createWrappedFunction("onChange", applyValueSelect);
function selectEvents(dom) {
  attachEvent(dom, "change", onSelectChange);
}
function applyValueSelect(nextPropsOrEmpty, dom, mounting, vNode) {
  var multiplePropInBoolean = Boolean(nextPropsOrEmpty.multiple);
  if (!isNullOrUndef(nextPropsOrEmpty.multiple) && multiplePropInBoolean !== dom.multiple) {
    dom.multiple = multiplePropInBoolean;
  }
  var index = nextPropsOrEmpty.selectedIndex;
  if (index === -1) {
    dom.selectedIndex = -1;
  }
  var childFlags = vNode.childFlags;
  if (childFlags !== 1) {
    var value2 = nextPropsOrEmpty.value;
    if (isNumber(index) && index > -1 && dom.options[index]) {
      value2 = dom.options[index].value;
    }
    if (mounting && isNullOrUndef(value2)) {
      value2 = nextPropsOrEmpty.defaultValue;
    }
    updateChildOptions(vNode, value2);
  }
}
var onTextareaInputChange = createWrappedFunction("onInput", applyValueTextArea);
var wrappedOnChange$1 = createWrappedFunction("onChange");
function textAreaEvents(dom, nextPropsOrEmpty) {
  attachEvent(dom, "input", onTextareaInputChange);
  if (nextPropsOrEmpty.onChange) {
    attachEvent(dom, "change", wrappedOnChange$1);
  }
}
function applyValueTextArea(nextPropsOrEmpty, dom, mounting) {
  var value2 = nextPropsOrEmpty.value;
  var domValue = dom.value;
  if (isNullOrUndef(value2)) {
    if (mounting) {
      var defaultValue = nextPropsOrEmpty.defaultValue;
      if (!isNullOrUndef(defaultValue) && defaultValue !== domValue) {
        dom.defaultValue = defaultValue;
        dom.value = defaultValue;
      }
    }
  } else if (domValue !== value2) {
    dom.defaultValue = value2;
    dom.value = value2;
  }
}
function processElement(flags, vNode, dom, nextPropsOrEmpty, mounting, isControlled) {
  if (flags & 64) {
    applyValueInput(nextPropsOrEmpty, dom);
  } else if (flags & 256) {
    applyValueSelect(nextPropsOrEmpty, dom, mounting, vNode);
  } else if (flags & 128) {
    applyValueTextArea(nextPropsOrEmpty, dom, mounting);
  }
  if (isControlled) {
    dom.$V = vNode;
  }
}
function addFormElementEventHandlers(flags, dom, nextPropsOrEmpty) {
  if (flags & 64) {
    inputEvents(dom, nextPropsOrEmpty);
  } else if (flags & 256) {
    selectEvents(dom);
  } else if (flags & 128) {
    textAreaEvents(dom, nextPropsOrEmpty);
  }
}
function isControlledFormElement(nextPropsOrEmpty) {
  return nextPropsOrEmpty.type && isCheckedType(nextPropsOrEmpty.type) ? !isNullOrUndef(nextPropsOrEmpty.checked) : !isNullOrUndef(nextPropsOrEmpty.value);
}
function createRef() {
  return {
    current: null
  };
}
function unmountRef(ref) {
  if (ref) {
    if (!safeCall1(ref, null) && ref.current) {
      ref.current = null;
    }
  }
}
function mountRef(ref, value2, lifecycle) {
  if (ref && (isFunction2(ref) || ref.current !== void 0)) {
    lifecycle.push(function() {
      if (!safeCall1(ref, value2) && ref.current !== void 0) {
        ref.current = value2;
      }
    });
  }
}
function remove2(vNode, parentDOM) {
  unmount(vNode);
  removeVNodeDOM(vNode, parentDOM);
}
function unmount(vNode) {
  var flags = vNode.flags;
  var children = vNode.children;
  var ref;
  if (flags & 481) {
    ref = vNode.ref;
    var props = vNode.props;
    unmountRef(ref);
    var childFlags = vNode.childFlags;
    if (!isNull(props)) {
      var keys = Object.keys(props);
      for (var i = 0, len = keys.length; i < len; i++) {
        var key = keys[i];
        if (syntheticEvents[key]) {
          unmountSyntheticEvent(key, vNode.dom);
        }
      }
    }
    if (childFlags & 12) {
      unmountAllChildren(children);
    } else if (childFlags === 2) {
      unmount(children);
    }
  } else if (children) {
    if (flags & 4) {
      if (isFunction2(children.componentWillUnmount)) {
        children.componentWillUnmount();
      }
      unmountRef(vNode.ref);
      children.$UN = true;
      unmount(children.$LI);
    } else if (flags & 8) {
      ref = vNode.ref;
      if (!isNullOrUndef(ref) && isFunction2(ref.onComponentWillUnmount)) {
        ref.onComponentWillUnmount(findDOMfromVNode(vNode, true), vNode.props || EMPTY_OBJ);
      }
      unmount(children);
    } else if (flags & 1024) {
      remove2(children, vNode.ref);
    } else if (flags & 8192) {
      if (vNode.childFlags & 12) {
        unmountAllChildren(children);
      }
    }
  }
}
function unmountAllChildren(children) {
  for (var i = 0, len = children.length; i < len; ++i) {
    unmount(children[i]);
  }
}
function clearDOM(dom) {
  dom.textContent = "";
}
function removeAllChildren(dom, vNode, children) {
  unmountAllChildren(children);
  if (vNode.flags & 8192) {
    removeVNodeDOM(vNode, dom);
  } else {
    clearDOM(dom);
  }
}
function wrapLinkEvent(nextValue) {
  var ev = nextValue.event;
  return function(e) {
    ev(nextValue.data, e);
  };
}
function patchEvent(name2, lastValue, nextValue, dom) {
  if (isLinkEventObject(nextValue)) {
    if (isLastValueSameLinkEvent(lastValue, nextValue)) {
      return;
    }
    nextValue = wrapLinkEvent(nextValue);
  }
  attachEvent(dom, normalizeEventName(name2), nextValue);
}
function patchStyle(lastAttrValue, nextAttrValue, dom) {
  if (isNullOrUndef(nextAttrValue)) {
    dom.removeAttribute("style");
    return;
  }
  var domStyle = dom.style;
  var style;
  var value2;
  if (isString2(nextAttrValue)) {
    domStyle.cssText = nextAttrValue;
    return;
  }
  if (!isNullOrUndef(lastAttrValue) && !isString2(lastAttrValue)) {
    for (style in nextAttrValue) {
      value2 = nextAttrValue[style];
      if (value2 !== lastAttrValue[style]) {
        domStyle.setProperty(style, value2);
      }
    }
    for (style in lastAttrValue) {
      if (isNullOrUndef(nextAttrValue[style])) {
        domStyle.removeProperty(style);
      }
    }
  } else {
    for (style in nextAttrValue) {
      value2 = nextAttrValue[style];
      domStyle.setProperty(style, value2);
    }
  }
}
function patchDangerInnerHTML(lastValue, nextValue, lastVNode, dom) {
  var lastHtml = lastValue && lastValue.__html || "";
  var nextHtml = nextValue && nextValue.__html || "";
  if (lastHtml !== nextHtml) {
    if (!isNullOrUndef(nextHtml) && !isSameInnerHTML(dom, nextHtml)) {
      if (!isNull(lastVNode)) {
        if (lastVNode.childFlags & 12) {
          unmountAllChildren(lastVNode.children);
        } else if (lastVNode.childFlags === 2) {
          unmount(lastVNode.children);
        }
        lastVNode.children = null;
        lastVNode.childFlags = 1;
      }
      dom.innerHTML = nextHtml;
    }
  }
}
function patchProp(prop, lastValue, nextValue, dom, isSVG, hasControlledValue, lastVNode) {
  switch (prop) {
    case "children":
    case "childrenType":
    case "className":
    case "defaultValue":
    case "key":
    case "multiple":
    case "ref":
    case "selectedIndex":
      break;
    case "autoFocus":
      dom.autofocus = !!nextValue;
      break;
    case "allowfullscreen":
    case "autoplay":
    case "capture":
    case "checked":
    case "controls":
    case "default":
    case "disabled":
    case "hidden":
    case "indeterminate":
    case "loop":
    case "muted":
    case "novalidate":
    case "open":
    case "readOnly":
    case "required":
    case "reversed":
    case "scoped":
    case "seamless":
    case "selected":
      dom[prop] = !!nextValue;
      break;
    case "defaultChecked":
    case "value":
    case "volume":
      if (hasControlledValue && prop === "value") {
        break;
      }
      var value2 = isNullOrUndef(nextValue) ? "" : nextValue;
      if (dom[prop] !== value2) {
        dom[prop] = value2;
      }
      break;
    case "style":
      patchStyle(lastValue, nextValue, dom);
      break;
    case "dangerouslySetInnerHTML":
      patchDangerInnerHTML(lastValue, nextValue, lastVNode, dom);
      break;
    default:
      if (syntheticEvents[prop]) {
        handleSyntheticEvent(prop, lastValue, nextValue, dom);
      } else if (prop.charCodeAt(0) === 111 && prop.charCodeAt(1) === 110) {
        patchEvent(prop, lastValue, nextValue, dom);
      } else if (isNullOrUndef(nextValue)) {
        dom.removeAttribute(prop);
      } else if (isSVG && namespaces[prop]) {
        dom.setAttributeNS(namespaces[prop], prop, nextValue);
      } else {
        dom.setAttribute(prop, nextValue);
      }
      break;
  }
}
function mountProps(vNode, flags, props, dom, isSVG) {
  var hasControlledValue = false;
  var isFormElement = (flags & 448) > 0;
  if (isFormElement) {
    hasControlledValue = isControlledFormElement(props);
    if (hasControlledValue) {
      addFormElementEventHandlers(flags, dom, props);
    }
  }
  for (var prop in props) {
    patchProp(prop, null, props[prop], dom, isSVG, hasControlledValue, null);
  }
  if (isFormElement) {
    processElement(flags, vNode, dom, props, true, hasControlledValue);
  }
}
function renderNewInput(instance, props, context) {
  var nextInput = normalizeRoot(instance.render(props, instance.state, context));
  var childContext = context;
  if (isFunction2(instance.getChildContext)) {
    childContext = combineFrom(context, instance.getChildContext());
  }
  instance.$CX = childContext;
  return nextInput;
}
function createClassComponentInstance(vNode, Component4, props, context, isSVG, lifecycle) {
  var instance = new Component4(props, context);
  var usesNewAPI = instance.$N = Boolean(Component4.getDerivedStateFromProps || instance.getSnapshotBeforeUpdate);
  instance.$SVG = isSVG;
  instance.$L = lifecycle;
  vNode.children = instance;
  instance.$BS = false;
  instance.context = context;
  if (instance.props === EMPTY_OBJ) {
    instance.props = props;
  }
  if (!usesNewAPI) {
    if (isFunction2(instance.componentWillMount)) {
      instance.$BR = true;
      instance.componentWillMount();
      var pending = instance.$PS;
      if (!isNull(pending)) {
        var state = instance.state;
        if (isNull(state)) {
          instance.state = pending;
        } else {
          for (var key in pending) {
            state[key] = pending[key];
          }
        }
        instance.$PS = null;
      }
      instance.$BR = false;
    }
  } else {
    instance.state = createDerivedState(instance, props, instance.state);
  }
  instance.$LI = renderNewInput(instance, props, context);
  return instance;
}
function renderFunctionalComponent(vNode, context) {
  var props = vNode.props || EMPTY_OBJ;
  return vNode.flags & 32768 ? vNode.type.render(props, vNode.ref, context) : vNode.type(props, context);
}
function mount(vNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var flags = vNode.flags |= 16384;
  if (flags & 481) {
    mountElement(vNode, parentDOM, context, isSVG, nextNode, lifecycle);
  } else if (flags & 4) {
    mountClassComponent(vNode, parentDOM, context, isSVG, nextNode, lifecycle);
  } else if (flags & 8) {
    mountFunctionalComponent(vNode, parentDOM, context, isSVG, nextNode, lifecycle);
    mountFunctionalComponentCallbacks(vNode, lifecycle);
  } else if (flags & 512 || flags & 16) {
    mountText(vNode, parentDOM, nextNode);
  } else if (flags & 8192) {
    mountFragment(vNode, context, parentDOM, isSVG, nextNode, lifecycle);
  } else if (flags & 1024) {
    mountPortal(vNode, context, parentDOM, nextNode, lifecycle);
  } else ;
}
function mountPortal(vNode, context, parentDOM, nextNode, lifecycle) {
  mount(vNode.children, vNode.ref, context, false, null, lifecycle);
  var placeHolderVNode = createVoidVNode();
  mountText(placeHolderVNode, parentDOM, nextNode);
  vNode.dom = placeHolderVNode.dom;
}
function mountFragment(vNode, context, parentDOM, isSVG, nextNode, lifecycle) {
  var children = vNode.children;
  var childFlags = vNode.childFlags;
  if (childFlags & 12 && children.length === 0) {
    childFlags = vNode.childFlags = 2;
    children = vNode.children = createVoidVNode();
  }
  if (childFlags === 2) {
    mount(children, parentDOM, context, isSVG, nextNode, lifecycle);
  } else {
    mountArrayChildren(children, parentDOM, context, isSVG, nextNode, lifecycle);
  }
}
function mountText(vNode, parentDOM, nextNode) {
  var dom = vNode.dom = document.createTextNode(vNode.children);
  if (!isNull(parentDOM)) {
    insertOrAppend(parentDOM, dom, nextNode);
  }
}
function mountElement(vNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var flags = vNode.flags;
  var props = vNode.props;
  var className = vNode.className;
  var childFlags = vNode.childFlags;
  var dom = vNode.dom = documentCreateElement(vNode.type, isSVG = isSVG || (flags & 32) > 0);
  var children = vNode.children;
  if (!isNullOrUndef(className) && className !== "") {
    if (isSVG) {
      dom.setAttribute("class", className);
    } else {
      dom.className = className;
    }
  }
  if (childFlags === 16) {
    setTextContent(dom, children);
  } else if (childFlags !== 1) {
    var childrenIsSVG = isSVG && vNode.type !== "foreignObject";
    if (childFlags === 2) {
      if (children.flags & 16384) {
        vNode.children = children = directClone(children);
      }
      mount(children, dom, context, childrenIsSVG, null, lifecycle);
    } else if (childFlags === 8 || childFlags === 4) {
      mountArrayChildren(children, dom, context, childrenIsSVG, null, lifecycle);
    }
  }
  if (!isNull(parentDOM)) {
    insertOrAppend(parentDOM, dom, nextNode);
  }
  if (!isNull(props)) {
    mountProps(vNode, flags, props, dom, isSVG);
  }
  mountRef(vNode.ref, dom, lifecycle);
}
function mountArrayChildren(children, dom, context, isSVG, nextNode, lifecycle) {
  for (var i = 0; i < children.length; ++i) {
    var child = children[i];
    if (child.flags & 16384) {
      children[i] = child = directClone(child);
    }
    mount(child, dom, context, isSVG, nextNode, lifecycle);
  }
}
function mountClassComponent(vNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var instance = createClassComponentInstance(vNode, vNode.type, vNode.props || EMPTY_OBJ, context, isSVG, lifecycle);
  mount(instance.$LI, parentDOM, instance.$CX, isSVG, nextNode, lifecycle);
  mountClassComponentCallbacks(vNode.ref, instance, lifecycle);
}
function mountFunctionalComponent(vNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  mount(vNode.children = normalizeRoot(renderFunctionalComponent(vNode, context)), parentDOM, context, isSVG, nextNode, lifecycle);
}
function createClassMountCallback(instance) {
  return function() {
    instance.componentDidMount();
  };
}
function mountClassComponentCallbacks(ref, instance, lifecycle) {
  mountRef(ref, instance, lifecycle);
  if (isFunction2(instance.componentDidMount)) {
    lifecycle.push(createClassMountCallback(instance));
  }
}
function createOnMountCallback(ref, vNode) {
  return function() {
    ref.onComponentDidMount(findDOMfromVNode(vNode, true), vNode.props || EMPTY_OBJ);
  };
}
function mountFunctionalComponentCallbacks(vNode, lifecycle) {
  var ref = vNode.ref;
  if (!isNullOrUndef(ref)) {
    safeCall1(ref.onComponentWillMount, vNode.props || EMPTY_OBJ);
    if (isFunction2(ref.onComponentDidMount)) {
      lifecycle.push(createOnMountCallback(ref, vNode));
    }
  }
}
function replaceWithNewNode(lastVNode, nextVNode, parentDOM, context, isSVG, lifecycle) {
  unmount(lastVNode);
  if ((nextVNode.flags & lastVNode.flags & 2033) !== 0) {
    mount(nextVNode, null, context, isSVG, null, lifecycle);
    replaceChild(parentDOM, nextVNode.dom, lastVNode.dom);
  } else {
    mount(nextVNode, parentDOM, context, isSVG, findDOMfromVNode(lastVNode, true), lifecycle);
    removeVNodeDOM(lastVNode, parentDOM);
  }
}
function patch(lastVNode, nextVNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var nextFlags = nextVNode.flags |= 16384;
  if (lastVNode.flags !== nextFlags || lastVNode.type !== nextVNode.type || lastVNode.key !== nextVNode.key || nextFlags & 2048) {
    if (lastVNode.flags & 16384) {
      replaceWithNewNode(lastVNode, nextVNode, parentDOM, context, isSVG, lifecycle);
    } else {
      mount(nextVNode, parentDOM, context, isSVG, nextNode, lifecycle);
    }
  } else if (nextFlags & 481) {
    patchElement(lastVNode, nextVNode, context, isSVG, nextFlags, lifecycle);
  } else if (nextFlags & 4) {
    patchClassComponent(lastVNode, nextVNode, parentDOM, context, isSVG, nextNode, lifecycle);
  } else if (nextFlags & 8) {
    patchFunctionalComponent(lastVNode, nextVNode, parentDOM, context, isSVG, nextNode, lifecycle);
  } else if (nextFlags & 16) {
    patchText(lastVNode, nextVNode);
  } else if (nextFlags & 512) {
    nextVNode.dom = lastVNode.dom;
  } else if (nextFlags & 8192) {
    patchFragment(lastVNode, nextVNode, parentDOM, context, isSVG, lifecycle);
  } else {
    patchPortal(lastVNode, nextVNode, context, lifecycle);
  }
}
function patchSingleTextChild(lastChildren, nextChildren, parentDOM) {
  if (lastChildren !== nextChildren) {
    if (lastChildren !== "") {
      parentDOM.firstChild.nodeValue = nextChildren;
    } else {
      setTextContent(parentDOM, nextChildren);
    }
  }
}
function patchContentEditableChildren(dom, nextChildren) {
  if (dom.textContent !== nextChildren) {
    dom.textContent = nextChildren;
  }
}
function patchFragment(lastVNode, nextVNode, parentDOM, context, isSVG, lifecycle) {
  var lastChildren = lastVNode.children;
  var nextChildren = nextVNode.children;
  var lastChildFlags = lastVNode.childFlags;
  var nextChildFlags = nextVNode.childFlags;
  var nextNode = null;
  if (nextChildFlags & 12 && nextChildren.length === 0) {
    nextChildFlags = nextVNode.childFlags = 2;
    nextChildren = nextVNode.children = createVoidVNode();
  }
  var nextIsSingle = (nextChildFlags & 2) !== 0;
  if (lastChildFlags & 12) {
    var lastLen = lastChildren.length;
    if (
      // It uses keyed algorithm
      lastChildFlags & 8 && nextChildFlags & 8 || // It transforms from many to single
      nextIsSingle || // It will append more nodes
      !nextIsSingle && nextChildren.length > lastLen
    ) {
      nextNode = findDOMfromVNode(lastChildren[lastLen - 1], false).nextSibling;
    }
  }
  patchChildren(lastChildFlags, nextChildFlags, lastChildren, nextChildren, parentDOM, context, isSVG, nextNode, lastVNode, lifecycle);
}
function patchPortal(lastVNode, nextVNode, context, lifecycle) {
  var lastContainer = lastVNode.ref;
  var nextContainer = nextVNode.ref;
  var nextChildren = nextVNode.children;
  patchChildren(lastVNode.childFlags, nextVNode.childFlags, lastVNode.children, nextChildren, lastContainer, context, false, null, lastVNode, lifecycle);
  nextVNode.dom = lastVNode.dom;
  if (lastContainer !== nextContainer && !isInvalid(nextChildren)) {
    var node = nextChildren.dom;
    removeChild(lastContainer, node);
    appendChild(nextContainer, node);
  }
}
function patchElement(lastVNode, nextVNode, context, isSVG, nextFlags, lifecycle) {
  var dom = nextVNode.dom = lastVNode.dom;
  var lastProps = lastVNode.props;
  var nextProps = nextVNode.props;
  var isFormElement = false;
  var hasControlledValue = false;
  var nextPropsOrEmpty;
  isSVG = isSVG || (nextFlags & 32) > 0;
  if (lastProps !== nextProps) {
    var lastPropsOrEmpty = lastProps || EMPTY_OBJ;
    nextPropsOrEmpty = nextProps || EMPTY_OBJ;
    if (nextPropsOrEmpty !== EMPTY_OBJ) {
      isFormElement = (nextFlags & 448) > 0;
      if (isFormElement) {
        hasControlledValue = isControlledFormElement(nextPropsOrEmpty);
      }
      for (var prop in nextPropsOrEmpty) {
        var lastValue = lastPropsOrEmpty[prop];
        var nextValue = nextPropsOrEmpty[prop];
        if (lastValue !== nextValue) {
          patchProp(prop, lastValue, nextValue, dom, isSVG, hasControlledValue, lastVNode);
        }
      }
    }
    if (lastPropsOrEmpty !== EMPTY_OBJ) {
      for (var prop$1 in lastPropsOrEmpty) {
        if (isNullOrUndef(nextPropsOrEmpty[prop$1]) && !isNullOrUndef(lastPropsOrEmpty[prop$1])) {
          patchProp(prop$1, lastPropsOrEmpty[prop$1], null, dom, isSVG, hasControlledValue, lastVNode);
        }
      }
    }
  }
  var nextChildren = nextVNode.children;
  var nextClassName = nextVNode.className;
  if (lastVNode.className !== nextClassName) {
    if (isNullOrUndef(nextClassName)) {
      dom.removeAttribute("class");
    } else if (isSVG) {
      dom.setAttribute("class", nextClassName);
    } else {
      dom.className = nextClassName;
    }
  }
  if (nextFlags & 4096) {
    patchContentEditableChildren(dom, nextChildren);
  } else {
    patchChildren(lastVNode.childFlags, nextVNode.childFlags, lastVNode.children, nextChildren, dom, context, isSVG && nextVNode.type !== "foreignObject", null, lastVNode, lifecycle);
  }
  if (isFormElement) {
    processElement(nextFlags, nextVNode, dom, nextPropsOrEmpty, false, hasControlledValue);
  }
  var nextRef = nextVNode.ref;
  var lastRef = lastVNode.ref;
  if (lastRef !== nextRef) {
    unmountRef(lastRef);
    mountRef(nextRef, dom, lifecycle);
  }
}
function replaceOneVNodeWithMultipleVNodes(lastChildren, nextChildren, parentDOM, context, isSVG, lifecycle) {
  unmount(lastChildren);
  mountArrayChildren(nextChildren, parentDOM, context, isSVG, findDOMfromVNode(lastChildren, true), lifecycle);
  removeVNodeDOM(lastChildren, parentDOM);
}
function patchChildren(lastChildFlags, nextChildFlags, lastChildren, nextChildren, parentDOM, context, isSVG, nextNode, parentVNode, lifecycle) {
  switch (lastChildFlags) {
    case 2:
      switch (nextChildFlags) {
        case 2:
          patch(lastChildren, nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
        case 1:
          remove2(lastChildren, parentDOM);
          break;
        case 16:
          unmount(lastChildren);
          setTextContent(parentDOM, nextChildren);
          break;
        default:
          replaceOneVNodeWithMultipleVNodes(lastChildren, nextChildren, parentDOM, context, isSVG, lifecycle);
          break;
      }
      break;
    case 1:
      switch (nextChildFlags) {
        case 2:
          mount(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
        case 1:
          break;
        case 16:
          setTextContent(parentDOM, nextChildren);
          break;
        default:
          mountArrayChildren(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
      }
      break;
    case 16:
      switch (nextChildFlags) {
        case 16:
          patchSingleTextChild(lastChildren, nextChildren, parentDOM);
          break;
        case 2:
          clearDOM(parentDOM);
          mount(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
        case 1:
          clearDOM(parentDOM);
          break;
        default:
          clearDOM(parentDOM);
          mountArrayChildren(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
      }
      break;
    default:
      switch (nextChildFlags) {
        case 16:
          unmountAllChildren(lastChildren);
          setTextContent(parentDOM, nextChildren);
          break;
        case 2:
          removeAllChildren(parentDOM, parentVNode, lastChildren);
          mount(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
          break;
        case 1:
          removeAllChildren(parentDOM, parentVNode, lastChildren);
          break;
        default:
          var lastLength = lastChildren.length | 0;
          var nextLength = nextChildren.length | 0;
          if (lastLength === 0) {
            if (nextLength > 0) {
              mountArrayChildren(nextChildren, parentDOM, context, isSVG, nextNode, lifecycle);
            }
          } else if (nextLength === 0) {
            removeAllChildren(parentDOM, parentVNode, lastChildren);
          } else if (nextChildFlags === 8 && lastChildFlags === 8) {
            patchKeyedChildren(lastChildren, nextChildren, parentDOM, context, isSVG, lastLength, nextLength, nextNode, parentVNode, lifecycle);
          } else {
            patchNonKeyedChildren(lastChildren, nextChildren, parentDOM, context, isSVG, lastLength, nextLength, nextNode, lifecycle);
          }
          break;
      }
      break;
  }
}
function createDidUpdate(instance, lastProps, lastState, snapshot, lifecycle) {
  lifecycle.push(function() {
    instance.componentDidUpdate(lastProps, lastState, snapshot);
  });
}
function updateClassComponent(instance, nextState, nextProps, parentDOM, context, isSVG, force, nextNode, lifecycle) {
  var lastState = instance.state;
  var lastProps = instance.props;
  var usesNewAPI = Boolean(instance.$N);
  var hasSCU = isFunction2(instance.shouldComponentUpdate);
  if (usesNewAPI) {
    nextState = createDerivedState(instance, nextProps, nextState !== lastState ? combineFrom(lastState, nextState) : nextState);
  }
  if (force || !hasSCU || hasSCU && instance.shouldComponentUpdate(nextProps, nextState, context)) {
    if (!usesNewAPI && isFunction2(instance.componentWillUpdate)) {
      instance.componentWillUpdate(nextProps, nextState, context);
    }
    instance.props = nextProps;
    instance.state = nextState;
    instance.context = context;
    var snapshot = null;
    var nextInput = renderNewInput(instance, nextProps, context);
    if (usesNewAPI && isFunction2(instance.getSnapshotBeforeUpdate)) {
      snapshot = instance.getSnapshotBeforeUpdate(lastProps, lastState);
    }
    patch(instance.$LI, nextInput, parentDOM, instance.$CX, isSVG, nextNode, lifecycle);
    instance.$LI = nextInput;
    if (isFunction2(instance.componentDidUpdate)) {
      createDidUpdate(instance, lastProps, lastState, snapshot, lifecycle);
    }
  } else {
    instance.props = nextProps;
    instance.state = nextState;
    instance.context = context;
  }
}
function patchClassComponent(lastVNode, nextVNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var instance = nextVNode.children = lastVNode.children;
  if (isNull(instance)) {
    return;
  }
  instance.$L = lifecycle;
  var nextProps = nextVNode.props || EMPTY_OBJ;
  var nextRef = nextVNode.ref;
  var lastRef = lastVNode.ref;
  var nextState = instance.state;
  if (!instance.$N) {
    if (isFunction2(instance.componentWillReceiveProps)) {
      instance.$BR = true;
      instance.componentWillReceiveProps(nextProps, context);
      if (instance.$UN) {
        return;
      }
      instance.$BR = false;
    }
    if (!isNull(instance.$PS)) {
      nextState = combineFrom(nextState, instance.$PS);
      instance.$PS = null;
    }
  }
  updateClassComponent(instance, nextState, nextProps, parentDOM, context, isSVG, false, nextNode, lifecycle);
  if (lastRef !== nextRef) {
    unmountRef(lastRef);
    mountRef(nextRef, instance, lifecycle);
  }
}
function patchFunctionalComponent(lastVNode, nextVNode, parentDOM, context, isSVG, nextNode, lifecycle) {
  var shouldUpdate = true;
  var nextProps = nextVNode.props || EMPTY_OBJ;
  var nextRef = nextVNode.ref;
  var lastProps = lastVNode.props;
  var nextHooksDefined = !isNullOrUndef(nextRef);
  var lastInput = lastVNode.children;
  if (nextHooksDefined && isFunction2(nextRef.onComponentShouldUpdate)) {
    shouldUpdate = nextRef.onComponentShouldUpdate(lastProps, nextProps);
  }
  if (shouldUpdate !== false) {
    if (nextHooksDefined && isFunction2(nextRef.onComponentWillUpdate)) {
      nextRef.onComponentWillUpdate(lastProps, nextProps);
    }
    var nextInput = normalizeRoot(renderFunctionalComponent(nextVNode, context));
    patch(lastInput, nextInput, parentDOM, context, isSVG, nextNode, lifecycle);
    nextVNode.children = nextInput;
    if (nextHooksDefined && isFunction2(nextRef.onComponentDidUpdate)) {
      nextRef.onComponentDidUpdate(lastProps, nextProps);
    }
  } else {
    nextVNode.children = lastInput;
  }
}
function patchText(lastVNode, nextVNode) {
  var nextText = nextVNode.children;
  var dom = nextVNode.dom = lastVNode.dom;
  if (nextText !== lastVNode.children) {
    dom.nodeValue = nextText;
  }
}
function patchNonKeyedChildren(lastChildren, nextChildren, dom, context, isSVG, lastChildrenLength, nextChildrenLength, nextNode, lifecycle) {
  var commonLength = lastChildrenLength > nextChildrenLength ? nextChildrenLength : lastChildrenLength;
  var i = 0;
  var nextChild;
  var lastChild;
  for (; i < commonLength; ++i) {
    nextChild = nextChildren[i];
    lastChild = lastChildren[i];
    if (nextChild.flags & 16384) {
      nextChild = nextChildren[i] = directClone(nextChild);
    }
    patch(lastChild, nextChild, dom, context, isSVG, nextNode, lifecycle);
    lastChildren[i] = nextChild;
  }
  if (lastChildrenLength < nextChildrenLength) {
    for (i = commonLength; i < nextChildrenLength; ++i) {
      nextChild = nextChildren[i];
      if (nextChild.flags & 16384) {
        nextChild = nextChildren[i] = directClone(nextChild);
      }
      mount(nextChild, dom, context, isSVG, nextNode, lifecycle);
    }
  } else if (lastChildrenLength > nextChildrenLength) {
    for (i = commonLength; i < lastChildrenLength; ++i) {
      remove2(lastChildren[i], dom);
    }
  }
}
function patchKeyedChildren(a, b, dom, context, isSVG, aLength, bLength, outerEdge, parentVNode, lifecycle) {
  var aEnd = aLength - 1;
  var bEnd = bLength - 1;
  var j = 0;
  var aNode = a[j];
  var bNode = b[j];
  var nextPos;
  var nextNode;
  outer: {
    while (aNode.key === bNode.key) {
      if (bNode.flags & 16384) {
        b[j] = bNode = directClone(bNode);
      }
      patch(aNode, bNode, dom, context, isSVG, outerEdge, lifecycle);
      a[j] = bNode;
      ++j;
      if (j > aEnd || j > bEnd) {
        break outer;
      }
      aNode = a[j];
      bNode = b[j];
    }
    aNode = a[aEnd];
    bNode = b[bEnd];
    while (aNode.key === bNode.key) {
      if (bNode.flags & 16384) {
        b[bEnd] = bNode = directClone(bNode);
      }
      patch(aNode, bNode, dom, context, isSVG, outerEdge, lifecycle);
      a[aEnd] = bNode;
      aEnd--;
      bEnd--;
      if (j > aEnd || j > bEnd) {
        break outer;
      }
      aNode = a[aEnd];
      bNode = b[bEnd];
    }
  }
  if (j > aEnd) {
    if (j <= bEnd) {
      nextPos = bEnd + 1;
      nextNode = nextPos < bLength ? findDOMfromVNode(b[nextPos], true) : outerEdge;
      while (j <= bEnd) {
        bNode = b[j];
        if (bNode.flags & 16384) {
          b[j] = bNode = directClone(bNode);
        }
        ++j;
        mount(bNode, dom, context, isSVG, nextNode, lifecycle);
      }
    }
  } else if (j > bEnd) {
    while (j <= aEnd) {
      remove2(a[j++], dom);
    }
  } else {
    patchKeyedChildrenComplex(a, b, context, aLength, bLength, aEnd, bEnd, j, dom, isSVG, outerEdge, parentVNode, lifecycle);
  }
}
function patchKeyedChildrenComplex(a, b, context, aLength, bLength, aEnd, bEnd, j, dom, isSVG, outerEdge, parentVNode, lifecycle) {
  var aNode;
  var bNode;
  var nextPos;
  var i = 0;
  var aStart = j;
  var bStart = j;
  var aLeft = aEnd - j + 1;
  var bLeft = bEnd - j + 1;
  var sources = new Int32Array(bLeft + 1);
  var canRemoveWholeContent = aLeft === aLength;
  var moved = false;
  var pos = 0;
  var patched = 0;
  if (bLength < 4 || (aLeft | bLeft) < 32) {
    for (i = aStart; i <= aEnd; ++i) {
      aNode = a[i];
      if (patched < bLeft) {
        for (j = bStart; j <= bEnd; j++) {
          bNode = b[j];
          if (aNode.key === bNode.key) {
            sources[j - bStart] = i + 1;
            if (canRemoveWholeContent) {
              canRemoveWholeContent = false;
              while (aStart < i) {
                remove2(a[aStart++], dom);
              }
            }
            if (pos > j) {
              moved = true;
            } else {
              pos = j;
            }
            if (bNode.flags & 16384) {
              b[j] = bNode = directClone(bNode);
            }
            patch(aNode, bNode, dom, context, isSVG, outerEdge, lifecycle);
            ++patched;
            break;
          }
        }
        if (!canRemoveWholeContent && j > bEnd) {
          remove2(aNode, dom);
        }
      } else if (!canRemoveWholeContent) {
        remove2(aNode, dom);
      }
    }
  } else {
    var keyIndex = {};
    for (i = bStart; i <= bEnd; ++i) {
      keyIndex[b[i].key] = i;
    }
    for (i = aStart; i <= aEnd; ++i) {
      aNode = a[i];
      if (patched < bLeft) {
        j = keyIndex[aNode.key];
        if (j !== void 0) {
          if (canRemoveWholeContent) {
            canRemoveWholeContent = false;
            while (i > aStart) {
              remove2(a[aStart++], dom);
            }
          }
          sources[j - bStart] = i + 1;
          if (pos > j) {
            moved = true;
          } else {
            pos = j;
          }
          bNode = b[j];
          if (bNode.flags & 16384) {
            b[j] = bNode = directClone(bNode);
          }
          patch(aNode, bNode, dom, context, isSVG, outerEdge, lifecycle);
          ++patched;
        } else if (!canRemoveWholeContent) {
          remove2(aNode, dom);
        }
      } else if (!canRemoveWholeContent) {
        remove2(aNode, dom);
      }
    }
  }
  if (canRemoveWholeContent) {
    removeAllChildren(dom, parentVNode, a);
    mountArrayChildren(b, dom, context, isSVG, outerEdge, lifecycle);
  } else if (moved) {
    var seq = lis_algorithm(sources);
    j = seq.length - 1;
    for (i = bLeft - 1; i >= 0; i--) {
      if (sources[i] === 0) {
        pos = i + bStart;
        bNode = b[pos];
        if (bNode.flags & 16384) {
          b[pos] = bNode = directClone(bNode);
        }
        nextPos = pos + 1;
        mount(bNode, dom, context, isSVG, nextPos < bLength ? findDOMfromVNode(b[nextPos], true) : outerEdge, lifecycle);
      } else if (j < 0 || i !== seq[j]) {
        pos = i + bStart;
        bNode = b[pos];
        nextPos = pos + 1;
        moveVNodeDOM(bNode, dom, nextPos < bLength ? findDOMfromVNode(b[nextPos], true) : outerEdge);
      } else {
        j--;
      }
    }
  } else if (patched !== bLeft) {
    for (i = bLeft - 1; i >= 0; i--) {
      if (sources[i] === 0) {
        pos = i + bStart;
        bNode = b[pos];
        if (bNode.flags & 16384) {
          b[pos] = bNode = directClone(bNode);
        }
        nextPos = pos + 1;
        mount(bNode, dom, context, isSVG, nextPos < bLength ? findDOMfromVNode(b[nextPos], true) : outerEdge, lifecycle);
      }
    }
  }
}
var result;
var p;
var maxLen = 0;
function lis_algorithm(arr) {
  var arrI = 0;
  var i = 0;
  var j = 0;
  var k = 0;
  var u = 0;
  var v = 0;
  var c = 0;
  var len = arr.length;
  if (len > maxLen) {
    maxLen = len;
    result = new Int32Array(len);
    p = new Int32Array(len);
  }
  for (; i < len; ++i) {
    arrI = arr[i];
    if (arrI !== 0) {
      j = result[k];
      if (arr[j] < arrI) {
        p[i] = j;
        result[++k] = i;
        continue;
      }
      u = 0;
      v = k;
      while (u < v) {
        c = u + v >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = k + 1;
  var seq = new Int32Array(u);
  v = result[u - 1];
  while (u-- > 0) {
    seq[u] = v;
    v = p[v];
    result[u] = 0;
  }
  return seq;
}
var hasDocumentAvailable = typeof document !== "undefined";
if (hasDocumentAvailable) {
  if (window.Node) {
    Node.prototype.$EV = null;
    Node.prototype.$V = null;
  }
}
function __render(input, parentDOM, callback, context) {
  var lifecycle = [];
  var rootInput = parentDOM.$V;
  renderCheck.v = true;
  if (isNullOrUndef(rootInput)) {
    if (!isNullOrUndef(input)) {
      if (input.flags & 16384) {
        input = directClone(input);
      }
      mount(input, parentDOM, context, false, null, lifecycle);
      parentDOM.$V = input;
      rootInput = input;
    }
  } else {
    if (isNullOrUndef(input)) {
      remove2(rootInput, parentDOM);
      parentDOM.$V = null;
    } else {
      if (input.flags & 16384) {
        input = directClone(input);
      }
      patch(rootInput, input, parentDOM, context, false, null, lifecycle);
      rootInput = parentDOM.$V = input;
    }
  }
  callAll(lifecycle);
  renderCheck.v = false;
  if (isFunction2(callback)) {
    callback();
  }
  if (isFunction2(options.renderComplete)) {
    options.renderComplete(rootInput, parentDOM);
  }
}
function render2(input, parentDOM, callback, context) {
  if (callback === void 0) callback = null;
  if (context === void 0) context = EMPTY_OBJ;
  __render(input, parentDOM, callback, context);
}
var QUEUE = [];
var nextTick = typeof Promise !== "undefined" ? Promise.resolve().then.bind(Promise.resolve()) : function(a) {
  window.setTimeout(a, 0);
};
var microTaskPending = false;
function queueStateChanges(component, newState, callback, force) {
  var pending = component.$PS;
  if (isFunction2(newState)) {
    newState = newState(pending ? combineFrom(component.state, pending) : component.state, component.props, component.context);
  }
  if (isNullOrUndef(pending)) {
    component.$PS = newState;
  } else {
    for (var stateKey in newState) {
      pending[stateKey] = newState[stateKey];
    }
  }
  if (!component.$BR) {
    if (!renderCheck.v) {
      if (QUEUE.length === 0) {
        applyState(component, force);
        if (isFunction2(callback)) {
          callback.call(component);
        }
        return;
      }
    }
    if (QUEUE.indexOf(component) === -1) {
      QUEUE.push(component);
    }
    if (force) {
      component.$F = true;
    }
    if (!microTaskPending) {
      microTaskPending = true;
      nextTick(rerender);
    }
    if (isFunction2(callback)) {
      var QU = component.$QU;
      if (!QU) {
        QU = component.$QU = [];
      }
      QU.push(callback);
    }
  } else if (isFunction2(callback)) {
    component.$L.push(callback.bind(component));
  }
}
function callSetStateCallbacks(component) {
  var queue = component.$QU;
  for (var i = 0; i < queue.length; ++i) {
    queue[i].call(component);
  }
  component.$QU = null;
}
function rerender() {
  var component;
  microTaskPending = false;
  while (component = QUEUE.shift()) {
    if (!component.$UN) {
      var force = component.$F;
      component.$F = false;
      applyState(component, force);
      if (component.$QU) {
        callSetStateCallbacks(component);
      }
    }
  }
}
function applyState(component, force) {
  if (force || !component.$BR) {
    var pendingState = component.$PS;
    component.$PS = null;
    var lifecycle = [];
    renderCheck.v = true;
    updateClassComponent(component, combineFrom(component.state, pendingState), component.props, findDOMfromVNode(component.$LI, true).parentNode, component.context, component.$SVG, force, null, lifecycle);
    callAll(lifecycle);
    renderCheck.v = false;
  } else {
    component.state = component.$PS;
    component.$PS = null;
  }
}
var Component = function Component2(props, context) {
  this.state = null;
  this.$BR = false;
  this.$BS = true;
  this.$PS = null;
  this.$LI = null;
  this.$UN = false;
  this.$CX = null;
  this.$QU = null;
  this.$N = false;
  this.$L = null;
  this.$SVG = false;
  this.$F = false;
  this.props = props || EMPTY_OBJ;
  this.context = context || EMPTY_OBJ;
};
Component.prototype.forceUpdate = function forceUpdate(callback) {
  if (this.$UN) {
    return;
  }
  queueStateChanges(this, {}, callback, true);
};
Component.prototype.setState = function setState(newState, callback) {
  if (this.$UN) {
    return;
  }
  if (!this.$BS) {
    queueStateChanges(this, newState, callback, false);
  }
};
Component.prototype.render = function render3(_nextProps, _nextState, _nextContext) {
  return null;
};

// node_modules/inferno/index.esm.js
if (true) {
  console.warn("You are running production build of Inferno in development mode. Use dev:module entry point.");
}

// node_modules/@devextreme/runtime/esm/inferno/effect_host.js
var InfernoEffectHost = {
  lockCount: 0,
  lock() {
    this.lockCount++;
  },
  callbacks: [],
  callEffects() {
    this.lockCount--;
    if (this.lockCount < 0) {
      throw new Error("Unexpected Effect Call");
    }
    if (this.lockCount === 0) {
      const effects = this.callbacks;
      this.callbacks = [];
      effects.forEach((callback) => callback());
    }
  }
};

// node_modules/@devextreme/runtime/esm/inferno/base_component.js
var areObjectsEqual = (firstObject, secondObject) => {
  const bothAreObjects = firstObject instanceof Object && secondObject instanceof Object;
  if (!bothAreObjects) {
    return firstObject === secondObject;
  }
  const firstObjectKeys = Object.keys(firstObject);
  const secondObjectKeys = Object.keys(secondObject);
  if (firstObjectKeys.length !== secondObjectKeys.length) {
    return false;
  }
  const hasDifferentElement = firstObjectKeys.some((key) => firstObject[key] !== secondObject[key]);
  return !hasDifferentElement;
};
var BaseInfernoComponent = class extends Component {
  constructor() {
    super(...arguments);
    this._pendingContext = this.context;
  }
  componentWillReceiveProps(_, context) {
    this._pendingContext = context !== null && context !== void 0 ? context : {};
  }
  shouldComponentUpdate(nextProps, nextState) {
    return !areObjectsEqual(this.props, nextProps) || !areObjectsEqual(this.state, nextState) || !areObjectsEqual(this.context, this._pendingContext);
  }
};
var InfernoComponent = class extends BaseInfernoComponent {
  constructor() {
    super(...arguments);
    this._effects = [];
  }
  createEffects() {
    return [];
  }
  updateEffects() {
  }
  componentWillMount() {
    InfernoEffectHost.lock();
  }
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  componentWillUpdate(_nextProps, _nextState, _context) {
    InfernoEffectHost.lock();
  }
  componentDidMount() {
    InfernoEffectHost.callbacks.push(() => {
      this._effects = this.createEffects();
    });
    InfernoEffectHost.callEffects();
  }
  componentDidUpdate() {
    InfernoEffectHost.callbacks.push(() => this.updateEffects());
    InfernoEffectHost.callEffects();
  }
  destroyEffects() {
    this._effects.forEach((e) => e.dispose());
  }
  componentWillUnmount() {
    this.destroyEffects();
  }
};
var InfernoWrapperComponent = class extends InfernoComponent {
  constructor() {
    super(...arguments);
    this.vDomElement = null;
  }
  vDomUpdateClasses() {
    const el = this.vDomElement;
    const currentClasses = el.className.length ? el.className.split(" ") : [];
    const addedClasses = currentClasses.filter((className) => el.dxClasses.previous.indexOf(className) < 0);
    const removedClasses = el.dxClasses.previous.filter((className) => currentClasses.indexOf(className) < 0);
    addedClasses.forEach((value2) => {
      const indexInRemoved = el.dxClasses.removed.indexOf(value2);
      if (indexInRemoved > -1) {
        el.dxClasses.removed.splice(indexInRemoved, 1);
      } else if (!el.dxClasses.added.includes(value2)) {
        el.dxClasses.added.push(value2);
      }
    });
    removedClasses.forEach((value2) => {
      const indexInAdded = el.dxClasses.added.indexOf(value2);
      if (indexInAdded > -1) {
        el.dxClasses.added.splice(indexInAdded, 1);
      } else if (!el.dxClasses.removed.includes(value2)) {
        el.dxClasses.removed.push(value2);
      }
    });
  }
  componentDidMount() {
    const el = findDOMfromVNode(this.$LI, true);
    this.vDomElement = el;
    super.componentDidMount();
    el.dxClasses = el.dxClasses || {
      removed: [],
      added: [],
      previous: []
    };
    el.dxClasses.previous = (el === null || el === void 0 ? void 0 : el.className.length) ? el.className.split(" ") : [];
  }
  componentDidUpdate() {
    super.componentDidUpdate();
    const el = this.vDomElement;
    if (el !== null) {
      el.dxClasses.added.forEach((className) => el.classList.add(className));
      el.dxClasses.removed.forEach((className) => el.classList.remove(className));
      el.dxClasses.previous = el.className.length ? el.className.split(" ") : [];
    }
  }
  shouldComponentUpdate(nextProps, nextState) {
    const shouldUpdate = super.shouldComponentUpdate(nextProps, nextState);
    if (shouldUpdate) {
      this.vDomUpdateClasses();
    }
    return shouldUpdate;
  }
};

// node_modules/@devextreme/runtime/esm/inferno/create_context.js
var contextId = 0;
var createContext = function(defaultValue) {
  const id = contextId++;
  return {
    id,
    defaultValue,
    Provider: class extends Component {
      getChildContext() {
        return Object.assign(Object.assign({}, this.context), { [id]: this.props.value || defaultValue });
      }
      render() {
        return this.props.children;
      }
    }
  };
};

// node_modules/@devextreme/runtime/esm/inferno/effect.js
var InfernoEffect = class {
  constructor(effect, dependency) {
    this.dependency = dependency;
    this.effect = effect;
    this.destroy = effect();
  }
  update(dependency) {
    const currentDependency = this.dependency;
    if (dependency) {
      this.dependency = dependency;
    }
    if (!dependency || dependency.some((d, i) => currentDependency[i] !== d)) {
      this.dispose();
      this.destroy = this.effect();
    }
  }
  dispose() {
    if (this.destroy) {
      this.destroy();
    }
  }
};

// node_modules/@devextreme/runtime/esm/inferno/re_render_effect.js
var createReRenderEffect = () => new InfernoEffect(() => {
  rerender();
}, []);

// node_modules/@devextreme/runtime/esm/inferno/mocked/shared.js
var ERROR_MSG = "a runtime error occured! Use Inferno in development environment to find the error.";
function isNullOrUndef2(o) {
  return o === void 0 || o === null;
}
function isInvalid2(o) {
  return o === null || o === false || o === true || o === void 0;
}
function isFunction3(o) {
  return typeof o === "function";
}
function isNull2(o) {
  return o === null;
}
function throwError(message) {
  if (!message) {
    message = ERROR_MSG;
  }
  throw new Error(`Inferno Error: ${message}`);
}

// node_modules/@devextreme/runtime/esm/inferno/mocked/hydrate.js
function isSameInnerHTML2(dom, innerHTML) {
  const tempdom = document.createElement("i");
  tempdom.innerHTML = innerHTML;
  return tempdom.innerHTML === dom.innerHTML;
}
function findLastDOMFromVNode(vNode) {
  let flags;
  let children;
  while (vNode) {
    flags = vNode.flags;
    if (flags & 2033) {
      return vNode.dom;
    }
    children = vNode.children;
    if (flags & 8192) {
      vNode = vNode.childFlags === 2 ? children : children[children.length - 1];
    } else if (flags & 4) {
      vNode = children.$LI;
    } else {
      vNode = children;
    }
  }
  return null;
}
function isSamePropsInnerHTML(dom, props) {
  return Boolean(props && props.dangerouslySetInnerHTML && props.dangerouslySetInnerHTML.__html && isSameInnerHTML2(dom, props.dangerouslySetInnerHTML.__html));
}
function hydrateComponent(vNode, parentDOM, dom, context, isSVG, isClass, lifecycle) {
  const type2 = vNode.type;
  const ref = vNode.ref;
  const props = vNode.props || EMPTY_OBJ;
  let currentNode;
  if (isClass) {
    const instance = createClassComponentInstance(vNode, type2, props, context, isSVG, lifecycle);
    const input = instance.$LI;
    currentNode = hydrateVNode(input, parentDOM, dom, instance.$CX, isSVG, lifecycle);
    mountClassComponentCallbacks(ref, instance, lifecycle);
  } else {
    const input = normalizeRoot(renderFunctionalComponent(vNode, context));
    currentNode = hydrateVNode(input, parentDOM, dom, context, isSVG, lifecycle);
    vNode.children = input;
    mountFunctionalComponentCallbacks(vNode, lifecycle);
  }
  return currentNode;
}
function hydrateChildren(parentVNode, parentNode, currentNode, context, isSVG, lifecycle) {
  const childFlags = parentVNode.childFlags;
  const children = parentVNode.children;
  const props = parentVNode.props;
  const flags = parentVNode.flags;
  if (childFlags !== 1) {
    if (childFlags === 2) {
      if (isNull2(currentNode)) {
        mount(children, parentNode, context, isSVG, null, lifecycle);
      } else {
        currentNode = hydrateVNode(children, parentNode, currentNode, context, isSVG, lifecycle);
        currentNode = currentNode ? currentNode.nextSibling : null;
      }
    } else if (childFlags === 16) {
      if (isNull2(currentNode)) {
        parentNode.appendChild(document.createTextNode(children));
      } else if (parentNode.childNodes.length !== 1 || currentNode.nodeType !== 3) {
        parentNode.textContent = children;
      } else if (currentNode.nodeValue !== children) {
        currentNode.nodeValue = children;
      }
      currentNode = null;
    } else if (childFlags & 12) {
      let prevVNodeIsTextNode = false;
      for (let i = 0, len = children.length; i < len; ++i) {
        const child = children[i];
        if (isNull2(currentNode) || prevVNodeIsTextNode && (child.flags & 16) > 0) {
          mount(child, parentNode, context, isSVG, currentNode, lifecycle);
        } else {
          currentNode = hydrateVNode(child, parentNode, currentNode, context, isSVG, lifecycle);
          currentNode = currentNode ? currentNode.nextSibling : null;
        }
        prevVNodeIsTextNode = (child.flags & 16) > 0;
      }
    }
    if ((flags & 8192) === 0) {
      let nextSibling = null;
      while (currentNode) {
        nextSibling = currentNode.nextSibling;
        parentNode.removeChild(currentNode);
        currentNode = nextSibling;
      }
    }
  } else if (!isNull2(parentNode.firstChild) && !isSamePropsInnerHTML(parentNode, props)) {
    parentNode.textContent = "";
    if (flags & 448) {
      parentNode.defaultValue = "";
    }
  }
}
function hydrateElement(vNode, parentDOM, dom, context, isSVG, lifecycle) {
  const props = vNode.props;
  const className = vNode.className;
  const flags = vNode.flags;
  const ref = vNode.ref;
  isSVG = isSVG || (flags & 32) > 0;
  if (dom.nodeType !== 1) {
    mountElement(vNode, null, context, isSVG, null, lifecycle);
    parentDOM.replaceChild(vNode.dom, dom);
  } else {
    vNode.dom = dom;
    hydrateChildren(vNode, dom, dom.firstChild, context, isSVG, lifecycle);
    if (!isNull2(props)) {
      mountProps(vNode, flags, props, dom, isSVG);
    }
    if (isNullOrUndef2(className)) {
      if (dom.className !== "") {
        dom.removeAttribute("class");
      }
    } else if (isSVG) {
      dom.setAttribute("class", className);
    } else {
      dom.className = className;
    }
    mountRef(ref, dom, lifecycle);
  }
  return vNode.dom;
}
function hydrateText(vNode, parentDOM, dom) {
  if (dom.nodeType !== 3) {
    parentDOM.replaceChild(vNode.dom = document.createTextNode(vNode.children), dom);
  } else {
    const text = vNode.children;
    if (dom.nodeValue !== text) {
      dom.nodeValue = text;
    }
    vNode.dom = dom;
  }
  return vNode.dom;
}
function hydrateFragment(vNode, parentDOM, dom, context, isSVG, lifecycle) {
  const children = vNode.children;
  if (vNode.childFlags === 2) {
    hydrateText(children, parentDOM, dom);
    return children.dom;
  }
  hydrateChildren(vNode, parentDOM, dom, context, isSVG, lifecycle);
  return findLastDOMFromVNode(children[children.length - 1]);
}
function hydrateVNode(vNode, parentDOM, currentDom, context, isSVG, lifecycle) {
  const flags = vNode.flags |= 16384;
  if (flags & 14) {
    return hydrateComponent(vNode, parentDOM, currentDom, context, isSVG, (flags & 4) > 0, lifecycle);
  }
  if (flags & 481) {
    return hydrateElement(vNode, parentDOM, currentDom, context, isSVG, lifecycle);
  }
  if (flags & 16) {
    return hydrateText(vNode, parentDOM, currentDom);
  }
  if (flags & 512) {
    return vNode.dom = currentDom;
  }
  if (flags & 8192) {
    return hydrateFragment(vNode, parentDOM, currentDom, context, isSVG, lifecycle);
  }
  throwError();
  return null;
}
function hydrate(input, parentDOM, callback) {
  let dom = parentDOM.firstChild;
  if (isNull2(dom)) {
    render2(input, parentDOM, callback);
  } else {
    const lifecycle = [];
    if (!isInvalid2(input)) {
      dom = hydrateVNode(input, parentDOM, dom, {}, false, lifecycle);
    }
    while (dom && (dom = dom.nextSibling)) {
      parentDOM.removeChild(dom);
    }
    if (lifecycle.length > 0) {
      let listener;
      while ((listener = lifecycle.shift()) !== void 0) {
        listener();
      }
    }
  }
  parentDOM.$V = input;
  if (isFunction3(callback)) {
    callback();
  }
}

// node_modules/inferno-create-element/dist/index.esm.js
function isNullOrUndef3(o) {
  return o === void 0 || o === null;
}
function isString3(o) {
  return typeof o === "string";
}
function isUndefined2(o) {
  return o === void 0;
}
var componentHooks = {
  onComponentDidMount: 1,
  onComponentDidUpdate: 1,
  onComponentShouldUpdate: 1,
  onComponentWillMount: 1,
  onComponentWillUnmount: 1,
  onComponentWillUpdate: 1
};
function createElement(type2, props, _children) {
  var arguments$1 = arguments;
  var children;
  var ref = null;
  var key = null;
  var className = null;
  var flags = 0;
  var newProps;
  var childLen = arguments.length - 2;
  if (childLen === 1) {
    children = _children;
  } else if (childLen > 1) {
    children = [];
    while (childLen-- > 0) {
      children[childLen] = arguments$1[childLen + 2];
    }
  }
  if (isString3(type2)) {
    flags = getFlagsForElementVnode(type2);
    if (!isNullOrUndef3(props)) {
      newProps = {};
      for (var prop in props) {
        if (prop === "className" || prop === "class") {
          className = props[prop];
        } else if (prop === "key") {
          key = props.key;
        } else if (prop === "children" && isUndefined2(children)) {
          children = props.children;
        } else if (prop === "ref") {
          ref = props.ref;
        } else {
          if (prop === "contenteditable") {
            flags |= 4096;
          }
          newProps[prop] = props[prop];
        }
      }
    }
  } else {
    flags = 2;
    if (!isUndefined2(children)) {
      if (!props) {
        props = {};
      }
      props.children = children;
    }
    if (!isNullOrUndef3(props)) {
      newProps = {};
      for (var prop$1 in props) {
        if (prop$1 === "key") {
          key = props.key;
        } else if (prop$1 === "ref") {
          ref = props.ref;
        } else if (componentHooks[prop$1] === 1) {
          if (!ref) {
            ref = {};
          }
          ref[prop$1] = props[prop$1];
        } else {
          newProps[prop$1] = props[prop$1];
        }
      }
    }
    return createComponentVNode(flags, type2, newProps, key, ref);
  }
  if (flags & 8192) {
    return createFragment(childLen === 1 ? [children] : children, 0, key);
  }
  return createVNode(flags, type2, className, children, 0, newProps, key, ref);
}

// node_modules/@devextreme/runtime/esm/inferno/render_template.js
var getContainer = (props) => {
  var _a, _b;
  return ((_a = props.container) === null || _a === void 0 ? void 0 : _a.get(0)) || ((_b = props.item) === null || _b === void 0 ? void 0 : _b.get(0));
};
function renderTemplate(template, props, _component) {
  setTimeout(() => {
    render2(createElement(template, props), getContainer(props));
  }, 0);
}
var hasTemplate = (name2, properties, _component) => {
  const value2 = properties[name2];
  return !!value2 && typeof value2 !== "string";
};

// node_modules/@devextreme/runtime/esm/inferno/normalize_styles.js
var NUMBER_STYLES = /* @__PURE__ */ new Set([
  "animationIterationCount",
  "borderImageOutset",
  "borderImageSlice",
  "border-imageWidth",
  "boxFlex",
  "boxFlexGroup",
  "boxOrdinalGroup",
  "columnCount",
  "fillOpacity",
  "flex",
  "flexGrow",
  "flexNegative",
  "flexOrder",
  "flexPositive",
  "flexShrink",
  "floodOpacity",
  "fontWeight",
  "gridColumn",
  "gridRow",
  "lineClamp",
  "lineHeight",
  "opacity",
  "order",
  "orphans",
  "stopOpacity",
  "strokeDasharray",
  "strokeDashoffset",
  "strokeMiterlimit",
  "strokeOpacity",
  "strokeWidth",
  "tabSize",
  "widows",
  "zIndex",
  "zoom"
]);
var isNumeric2 = (value2) => {
  if (typeof value2 === "number")
    return true;
  return !Number.isNaN(Number(value2));
};
var getNumberStyleValue = (style, value2) => NUMBER_STYLES.has(style) ? value2 : `${value2}px`;
var uppercasePattern = /[A-Z]/g;
var kebabCase = (str) => str.replace(uppercasePattern, "-$&").toLowerCase();
function normalizeStyles(styles) {
  if (!(styles instanceof Object)) {
    return void 0;
  }
  return Object.entries(styles).reduce((acc, [key, value2]) => {
    acc[kebabCase(key)] = isNumeric2(value2) ? getNumberStyleValue(key, value2) : value2;
    return acc;
  }, {});
}

// node_modules/devextreme/esm/core/inferno_renderer.js
var remove3 = (element) => {
  var {
    parentNode
  } = element;
  if (parentNode) {
    var nextSibling = element.nextSibling;
    cleanDataRecursive(element);
    parentNode.$V = element.$V;
    render2(null, parentNode);
    parentNode.insertBefore(element, nextSibling);
    element.innerHTML = "";
    delete parentNode.$V;
  }
  delete element.$V;
};
var inferno_renderer_default = dependency_injector_default({
  createElement: (component, props) => createElement(component, props),
  remove: remove3,
  onAfterRender: () => {
    InfernoEffectHost.callEffects();
  },
  onPreRender: () => {
    InfernoEffectHost.lock();
  },
  render: (component, props, container, replace) => {
    if (!replace) {
      var {
        parentNode
      } = container;
      var nextNode = null === container || void 0 === container ? void 0 : container.nextSibling;
      var rootNode = dom_adapter_default.createElement("div");
      rootNode.appendChild(container);
      var mountNode = dom_adapter_default.createDocumentFragment().appendChild(rootNode);
      var vNodeAlreadyExists = !!container.$V;
      vNodeAlreadyExists && remove3(container);
      hydrate(createElement(component, props), mountNode);
      container.$V = mountNode.$V;
      if (parentNode) {
        parentNode.insertBefore(container, nextNode);
      }
    } else {
      render2(createElement(component, props), container);
    }
  }
});

// node_modules/devextreme/esm/renovation/utils/shallow_equals.js
var shallowEquals = (firstObject, secondObject) => {
  if (Object.keys(firstObject).length !== Object.keys(secondObject).length) {
    return false;
  }
  return Object.keys(firstObject).every((key) => firstObject[key] === secondObject[key]);
};

// node_modules/devextreme/esm/renovation/component_wrapper/common/template_wrapper.js
var _excluded = ["isEqual"];
function isDxElementWrapper(element) {
  return !!element.toArray;
}
function buildTemplateArgs(model, template) {
  var _model$data;
  var args = {
    template,
    model: _extends({}, model)
  };
  var _ref = null !== (_model$data = model.data) && void 0 !== _model$data ? _model$data : {}, {
    isEqual
  } = _ref, data17 = _objectWithoutPropertiesLoose(_ref, _excluded);
  if (isEqual) {
    args.model.data = data17;
    args.isEqual = isEqual;
  }
  return args;
}
function renderTemplateContent(props, container) {
  var _props$model;
  var {
    data: data17,
    index
  } = null !== (_props$model = props.model) && void 0 !== _props$model ? _props$model : {
    data: {}
  };
  if (data17) {
    Object.keys(data17).forEach((name2) => {
      if (data17[name2] && dom_adapter_default.isNode(data17[name2])) {
        data17[name2] = getPublicElement(renderer_default(data17[name2]));
      }
    });
  }
  var rendered = props.template.render(_extends({
    container,
    transclude: props.transclude
  }, {
    renovated: props.renovated
  }, !props.transclude ? {
    model: data17
  } : {}, !props.transclude && Number.isFinite(index) ? {
    index
  } : {}));
  if (void 0 === rendered) {
    return [];
  }
  return isDxElementWrapper(rendered) ? rendered.toArray() : [renderer_default(rendered).get(0)];
}
function removeDifferentElements(oldChildren, newChildren) {
  newChildren.forEach((newElement) => {
    var hasOldChild = !!oldChildren.find((oldElement) => newElement === oldElement);
    if (!hasOldChild && newElement.parentNode) {
      renderer_default(newElement).remove();
    }
  });
}
var TemplateWrapper = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.renderTemplate = this.renderTemplate.bind(this);
  }
  renderTemplate() {
    var node = findDOMfromVNode(this.$LI, true);
    if (!(null !== node && void 0 !== node && node.parentNode)) {
      return () => {
      };
    }
    var container = node.parentNode;
    var $container = renderer_default(container);
    var $oldContainerContent = $container.contents().toArray();
    var content = renderTemplateContent(this.props, getPublicElement($container));
    replaceWith(renderer_default(node), renderer_default(content));
    return () => {
      var $actualContainerContent = renderer_default(container).contents().toArray();
      removeDifferentElements($oldContainerContent, $actualContainerContent);
      container.appendChild(node);
    };
  }
  shouldComponentUpdate(nextProps) {
    var {
      model,
      template
    } = this.props;
    var {
      isEqual,
      model: nextModel,
      template: nextTemplate
    } = nextProps;
    var equalityComparer = null !== isEqual && void 0 !== isEqual ? isEqual : shallowEquals;
    if (template !== nextTemplate) {
      return true;
    }
    if (!isDefined(model) || !isDefined(nextModel)) {
      return model !== nextModel;
    }
    var {
      data: data17,
      index
    } = model;
    var {
      data: nextData,
      index: nextIndex
    } = nextModel;
    if (index !== nextIndex) {
      return true;
    }
    return !equalityComparer(data17, nextData);
  }
  createEffects() {
    return [new InfernoEffect(this.renderTemplate, [this.props.template, this.props.model])];
  }
  updateEffects() {
    this._effects[0].update([this.props.template, this.props.model]);
  }
  componentWillUnmount() {
  }
  render() {
    return null;
  }
};

// node_modules/devextreme/esm/renovation/component_wrapper/utils/update_props_immutable.js
function cloneObjectValue(value2) {
  return Array.isArray(value2) ? [...value2] : _extends({}, value2);
}
function cloneObjectProp(value2, prevValue, fullNameParts) {
  var result2 = fullNameParts.length > 0 && prevValue && value2 !== prevValue ? cloneObjectValue(prevValue) : cloneObjectValue(value2);
  var name2 = fullNameParts[0];
  if (fullNameParts.length > 1) {
    result2[name2] = cloneObjectProp(value2[name2], null === prevValue || void 0 === prevValue ? void 0 : prevValue[name2], fullNameParts.slice(1));
  } else if (name2) {
    if (isPlainObject(value2[name2])) {
      result2[name2] = cloneObjectValue(value2[name2]);
    } else {
      result2[name2] = value2[name2];
    }
  }
  return result2;
}
function updatePropsImmutable(props, option, name2, fullName) {
  var currentPropsValue = option[name2];
  var prevPropsValue = props[name2];
  var result2 = props;
  if (isPlainObject(currentPropsValue) || name2 !== fullName && Array.isArray(currentPropsValue)) {
    result2[name2] = cloneObjectProp(currentPropsValue, prevPropsValue, getPathParts(fullName).slice(1));
  } else {
    result2[name2] = currentPropsValue;
  }
}

// node_modules/devextreme/esm/renovation/component_wrapper/common/component.js
var setDefaultOptionValue = (options2, defaultValueGetter) => (name2) => {
  if (Object.prototype.hasOwnProperty.call(options2, name2) && void 0 === options2[name2]) {
    options2[name2] = defaultValueGetter(name2);
  }
};
var ComponentWrapper = class extends dom_component_default {
  constructor(element, options2) {
    super(element, options2);
    this._shouldRaiseContentReady = false;
    this.validateKeyDownHandler();
  }
  get _propsInfo() {
    return {
      allowNull: [],
      twoWay: [],
      elements: [],
      templates: [],
      props: []
    };
  }
  validateKeyDownHandler() {
    var supportedKeyNames = this.getSupportedKeyNames();
    var hasComponentDefaultKeyHandlers = supportedKeyNames.length > 0;
    var hasComponentKeyDownMethod = "function" === typeof this._viewComponent.prototype.keyDown;
    if (hasComponentDefaultKeyHandlers && !hasComponentKeyDownMethod) {
      throw Error("Component's declaration must have 'keyDown' method.");
    }
  }
  get viewRef() {
    var _this$_viewRef;
    return null === (_this$_viewRef = this._viewRef) || void 0 === _this$_viewRef ? void 0 : _this$_viewRef.current;
  }
  _checkContentReadyOption(fullName) {
    var contentReadyOptions = this._getContentReadyOptions().reduce((options2, name2) => {
      options2[name2] = true;
      return options2;
    }, {});
    this._checkContentReadyOption = (optionName) => !!contentReadyOptions[optionName];
    return this._checkContentReadyOption(fullName);
  }
  _getContentReadyOptions() {
    return ["rtlEnabled"];
  }
  _fireContentReady() {
    this._actionsMap.onContentReady({});
  }
  _getDefaultOptions() {
    var viewDefaultProps = this._getViewComponentDefaultProps();
    return extend(true, super._getDefaultOptions(), viewDefaultProps, this._propsInfo.twoWay.reduce((options2, _ref) => {
      var [name2, defaultName, eventName] = _ref;
      return _extends({}, options2, {
        [name2]: viewDefaultProps[defaultName],
        [eventName]: (value2) => this.option(name2, value2)
      });
    }, {}), this._propsInfo.templates.reduce((options2, name2) => _extends({}, options2, {
      [name2]: null
    }), {}));
  }
  _getUnwrappedOption() {
    var unwrappedProps = {};
    Object.keys(this.option()).forEach((key) => {
      unwrappedProps[key] = this.option(key);
    });
    return unwrappedProps;
  }
  _initializeComponent() {
    var _this$_templateManage;
    super._initializeComponent();
    null === (_this$_templateManage = this._templateManager) || void 0 === _this$_templateManage ? void 0 : _this$_templateManage.addDefaultTemplates(this.getDefaultTemplates());
    var optionProxy = this._getUnwrappedOption();
    this._props = this._optionsWithDefaultTemplates(optionProxy);
    this._propsInfo.templates.forEach((template) => {
      this._componentTemplates[template] = this._createTemplateComponent(this._props[template]);
    });
    Object.keys(this._getActionConfigsFull()).forEach((name2) => this._addAction(name2));
    this._viewRef = createRef();
    this.defaultKeyHandlers = this._createDefaultKeyHandlers();
  }
  _initMarkup() {
    var props = this.getProps();
    this._renderWrapper(props);
  }
  _renderWrapper(props) {
    var containerNode = this.$element()[0];
    if (!this._isNodeReplaced) {
      inferno_renderer_default.onPreRender();
    }
    inferno_renderer_default.render(this._viewComponent, props, containerNode, this._isNodeReplaced);
    if (!this._isNodeReplaced) {
      this._isNodeReplaced = true;
      inferno_renderer_default.onAfterRender();
      this._shouldRaiseContentReady = true;
    }
    if (this._shouldRaiseContentReady) {
      this._fireContentReady();
      this._shouldRaiseContentReady = false;
    }
  }
  _silent(name2, value2) {
    this._options.silent(name2, value2);
  }
  _render() {
  }
  _removeWidget() {
    inferno_renderer_default.remove(this.$element()[0]);
  }
  _dispose() {
    this._removeWidget();
    super._dispose();
  }
  get elementAttr() {
    var element = this.$element()[0];
    if (!this._elementAttr) {
      var {
        attributes
      } = element;
      var attrs = Array.from(attributes).filter((attr) => {
        var _attributes$attr$name;
        return !this._propsInfo.templates.includes(attr.name) && (null === (_attributes$attr$name = attributes[attr.name]) || void 0 === _attributes$attr$name ? void 0 : _attributes$attr$name.specified);
      }).reduce((result2, _ref2) => {
        var {
          name: name2,
          value: value2
        } = _ref2;
        var updatedAttributes = result2;
        var isDomAttr = name2 in element;
        updatedAttributes[name2] = "" === value2 && isDomAttr ? element[name2] : value2;
        return updatedAttributes;
      }, {});
      this._elementAttr = attrs;
      this._storedClasses = element.getAttribute("class") || "";
    }
    var elemStyle = element.style;
    var style = {};
    for (var i = 0; i < elemStyle.length; i += 1) {
      style[elemStyle[i]] = elemStyle.getPropertyValue(elemStyle[i]);
    }
    this._elementAttr.style = style;
    this._elementAttr.class = this._storedClasses;
    return this._elementAttr;
  }
  _getAdditionalActionConfigs() {
    return {
      onContentReady: {
        excludeValidators: ["disabled", "readOnly"]
      }
    };
  }
  _getAdditionalProps() {
    return [];
  }
  _patchOptionValues(options2) {
    var {
      allowNull,
      elements,
      props,
      twoWay
    } = this._propsInfo;
    var viewDefaultProps = this._getViewComponentDefaultProps();
    var defaultWidgetPropsKeys = Object.keys(viewDefaultProps);
    var defaultOptions3 = this._getDefaultOptions();
    var {
      children,
      onKeyboardHandled,
      ref
    } = options2;
    var onKeyDown = onKeyboardHandled ? (_, event_options) => {
      onKeyboardHandled(event_options);
    } : void 0;
    var widgetProps = {
      ref,
      children,
      onKeyDown
    };
    [...props, ...this._getAdditionalProps()].forEach((propName) => {
      if (Object.prototype.hasOwnProperty.call(options2, propName)) {
        widgetProps[propName] = options2[propName];
      }
    });
    allowNull.forEach(setDefaultOptionValue(widgetProps, () => null));
    defaultWidgetPropsKeys.forEach(setDefaultOptionValue(widgetProps, (name2) => defaultOptions3[name2]));
    twoWay.forEach((_ref3) => {
      var [name2, defaultName] = _ref3;
      setDefaultOptionValue(widgetProps, () => defaultOptions3[defaultName])(name2);
    });
    elements.forEach((name2) => {
      if (name2 in widgetProps) {
        var value2 = widgetProps[name2];
        if (isRenderer(value2)) {
          widgetProps[name2] = this._patchElementParam(value2);
        }
      }
    });
    return widgetProps;
  }
  getSupportedKeyNames() {
    return [];
  }
  prepareStyleProp(props) {
    if ("string" === typeof props.style) {
      return _extends({}, props, {
        style: {},
        cssText: props.style
      });
    }
    return props;
  }
  getProps() {
    var _this$elementAttr$cla, _elementAttr$class;
    var {
      elementAttr
    } = this.option();
    var options2 = this._patchOptionValues(_extends({}, this._props, {
      ref: this._viewRef,
      children: this._extractDefaultSlot(),
      aria: this._aria
    }));
    this._propsInfo.templates.forEach((template) => {
      options2[template] = this._componentTemplates[template];
    });
    return this.prepareStyleProp(_extends({}, options2, this.elementAttr, elementAttr, {
      className: [...(null !== (_this$elementAttr$cla = this.elementAttr.class) && void 0 !== _this$elementAttr$cla ? _this$elementAttr$cla : "").split(" "), ...(null !== (_elementAttr$class = null === elementAttr || void 0 === elementAttr ? void 0 : elementAttr.class) && void 0 !== _elementAttr$class ? _elementAttr$class : "").split(" ")].filter((c, i, a) => c && a.indexOf(c) === i).join(" ").trim(),
      class: ""
    }, this._actionsMap));
  }
  _getActionConfigs() {
    return {};
  }
  _getActionConfigsFull() {
    return _extends({}, this._getActionConfigs(), this._getAdditionalActionConfigs());
  }
  getDefaultTemplates() {
    var defaultTemplates = Object.values(this._templatesInfo);
    var result2 = {};
    defaultTemplates.forEach((template) => {
      result2[template] = "dx-renovation-template-mock";
    });
    return result2;
  }
  get _templatesInfo() {
    return {};
  }
  _optionsWithDefaultTemplates(options2) {
    var templateOptions = Object.entries(this._templatesInfo).reduce((result2, _ref4) => {
      var _options$templateName;
      var [templateName, templateValue] = _ref4;
      return _extends({}, result2, {
        [templateName]: null !== (_options$templateName = options2[templateName]) && void 0 !== _options$templateName ? _options$templateName : templateValue
      });
    }, {});
    return _extends({}, options2, templateOptions);
  }
  _init() {
    super._init();
    this.customKeyHandlers = {};
    this._actionsMap = {};
    this._aria = {};
    this._componentTemplates = {};
  }
  _createDefaultKeyHandlers() {
    var result2 = {};
    var keys = this.getSupportedKeyNames();
    keys.forEach((key) => {
      result2[key] = (e) => this.viewRef.keyDown(keyboard_processor_default.createKeyDownOptions(e));
    });
    return result2;
  }
  _addAction(event, actionToAdd) {
    var action = actionToAdd;
    if (!action) {
      var actionByOption = this._createActionByOption(event, this._getActionConfigsFull()[event]);
      action = (actArgs) => {
        Object.keys(actArgs).forEach((name2) => {
          if (isDefined(actArgs[name2]) && dom_adapter_default.isNode(actArgs[name2])) {
            actArgs[name2] = getPublicElement(renderer_default(actArgs[name2]));
          }
        });
        return actionByOption(actArgs);
      };
    }
    this._actionsMap[event] = action;
  }
  _optionChanged(option) {
    var {
      fullName,
      name: name2,
      previousValue,
      value: value2
    } = option;
    updatePropsImmutable(this._props, this.option(), name2, fullName);
    if (this._propsInfo.templates.includes(name2) && value2 !== previousValue) {
      this._componentTemplates[name2] = this._createTemplateComponent(value2);
    }
    if (name2 && this._getActionConfigsFull()[name2]) {
      this._addAction(name2);
    }
    this._shouldRaiseContentReady = this._shouldRaiseContentReady || this._checkContentReadyOption(fullName);
    super._optionChanged(option);
    this._invalidate();
  }
  _extractDefaultSlot() {
    if (this.option("_hasAnonymousTemplateContent")) {
      return inferno_renderer_default.createElement(TemplateWrapper, {
        template: this._getTemplate(this._templateManager.anonymousTemplateName),
        transclude: true,
        renovated: true
      });
    }
    return null;
  }
  _createTemplateComponent(templateOption) {
    if (!templateOption) {
      return;
    }
    var template = this._getTemplate(templateOption);
    if (isString(template) && "dx-renovation-template-mock" === template) {
      return;
    }
    return (model) => inferno_renderer_default.createElement(TemplateWrapper, buildTemplateArgs(model, template));
  }
  _wrapKeyDownHandler(initialHandler) {
    return (options2) => {
      var {
        keyName,
        originalEvent,
        which
      } = options2;
      var keys = this.customKeyHandlers;
      var func2 = keys[keyName] || keys[which];
      if (void 0 !== func2) {
        var handler = func2.bind(this);
        var result2 = handler(originalEvent, options2);
        if (!result2) {
          originalEvent.cancel = true;
          return originalEvent;
        }
      }
      return null === initialHandler || void 0 === initialHandler ? void 0 : initialHandler(originalEvent, options2);
    };
  }
  _toPublicElement(element) {
    return getPublicElement(renderer_default(element));
  }
  _patchElementParam(value2) {
    try {
      var result2 = renderer_default(value2);
      var element = null === result2 || void 0 === result2 ? void 0 : result2.get(0);
      return null !== element && void 0 !== element && element.nodeType ? element : value2;
    } catch (error) {
      return value2;
    }
  }
  repaint() {
    this._isNodeReplaced = false;
    this._shouldRaiseContentReady = true;
    this._removeWidget();
    this._refresh();
  }
  _supportedKeys() {
    return _extends({}, this.defaultKeyHandlers, this.customKeyHandlers);
  }
  registerKeyHandler(key, handler) {
    this.customKeyHandlers[key] = handler;
  }
  setAria(name2, value2) {
    this._aria[name2] = value2;
    this._initMarkup();
  }
  _getViewComponentDefaultProps() {
    return this._viewComponent.defaultProps || {};
  }
};
ComponentWrapper.IS_RENOVATED_WIDGET = false;
ComponentWrapper.IS_RENOVATED_WIDGET = true;

// node_modules/devextreme/esm/renovation/component_wrapper/button.js
var ButtonWrapper = class extends ComponentWrapper {
  get _validationGroupConfig() {
    return validation_engine_default.getGroupConfig(this._findGroup());
  }
  getDefaultTemplateNames() {
    return ["content"];
  }
  getSupportedKeyNames() {
    return ["space", "enter"];
  }
  getProps() {
    var props = super.getProps();
    props.onClick = (_ref) => {
      var {
        event
      } = _ref;
      this._clickAction({
        event,
        validationGroup: this._validationGroupConfig
      });
    };
    var iconType = getImageSourceType(props.icon);
    if ("svg" === iconType) {
      props.iconTemplate = this._createTemplateComponent(() => props.icon);
    }
    return props;
  }
  get _templatesInfo() {
    return {
      template: "content"
    };
  }
  _toggleActiveState(_, value2) {
    var button = this.viewRef;
    value2 ? button.activate() : button.deactivate();
  }
  _getSubmitAction() {
    var needValidate = true;
    var validationStatus = "valid";
    return this._createAction((_ref2) => {
      var {
        event,
        submitInput
      } = _ref2;
      if (needValidate) {
        var validationGroup = this._validationGroupConfig;
        if (void 0 !== validationGroup && "" !== validationGroup) {
          var validationResult = validationGroup.validate();
          validationStatus = validationResult.status;
          if ("pending" === validationResult.status) {
            needValidate = false;
            this.option("disabled", true);
            validationResult.complete.then((_ref3) => {
              var {
                status
              } = _ref3;
              this.option("disabled", false);
              validationStatus = status;
              "valid" === validationStatus && submitInput.click();
              needValidate = true;
            });
          }
        }
      }
      "valid" !== validationStatus && event.preventDefault();
      event.stopPropagation();
    });
  }
  _initializeComponent() {
    super._initializeComponent();
    this._addAction("onSubmit", this._getSubmitAction());
    this._clickAction = this._createClickAction();
  }
  _initMarkup() {
    super._initMarkup();
    var $content = this.$element().find(".dx-button-content").first();
    var $template = $content.children().filter(".dx-template-wrapper");
    var $input = $content.children().filter(".dx-button-submit-input");
    if ($template.length) {
      $template.addClass("dx-button-content");
      $template.append($input);
      $content.replaceWith($template);
    }
  }
  _patchOptionValues(options2) {
    return super._patchOptionValues(_extends({}, options2, {
      templateData: options2._templateData
    }));
  }
  _findGroup() {
    var $element = this.$element();
    var validationGroup = this.option("validationGroup");
    return void 0 !== validationGroup && "" !== validationGroup ? validationGroup : validation_engine_default.findGroup($element, this._modelByElement($element));
  }
  _createClickAction() {
    return this._createActionByOption("onClick", {
      excludeValidators: ["readOnly"]
    });
  }
  _optionChanged(option) {
    switch (option.name) {
      case "onClick":
        this._clickAction = this._createClickAction();
    }
    super._optionChanged(option);
  }
};

// node_modules/devextreme/esm/renovation/utils/combine_classes.js
function combineClasses(classesMap) {
  return Object.keys(classesMap).filter((p2) => classesMap[p2]).join(" ");
}

// node_modules/devextreme/esm/renovation/ui/common/icon.js
var _excluded2 = ["iconTemplate", "position", "source"];
var viewFunction = (_ref) => {
  var {
    iconClassName,
    props: {
      iconTemplate: IconTemplate,
      source
    },
    sourceType
  } = _ref;
  return createFragment(["dxIcon" === sourceType && createVNode(1, "i", iconClassName), "fontIcon" === sourceType && createVNode(1, "i", iconClassName), "image" === sourceType && createVNode(1, "img", iconClassName, null, 1, {
    alt: "",
    src: source
  }), IconTemplate && createVNode(1, "i", iconClassName, IconTemplate({}), 0)], 0);
};
var IconProps = {
  position: "left",
  source: ""
};
var getTemplate = (TemplateProp) => TemplateProp && (TemplateProp.defaultProps ? (props) => normalizeProps(createComponentVNode(2, TemplateProp, _extends({}, props))) : TemplateProp);
var Icon = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
  }
  get sourceType() {
    return getImageSourceType(this.props.source);
  }
  get cssClass() {
    return "left" !== this.props.position ? "dx-icon-right" : "";
  }
  get iconClassName() {
    var generalClasses = {
      "dx-icon": true,
      [this.cssClass]: !!this.cssClass
    };
    var {
      source
    } = this.props;
    if ("dxIcon" === this.sourceType) {
      return combineClasses(_extends({}, generalClasses, {
        ["dx-icon-".concat(source)]: true
      }));
    }
    if ("fontIcon" === this.sourceType) {
      return combineClasses(_extends({}, generalClasses, {
        [String(source)]: !!source
      }));
    }
    if ("image" === this.sourceType) {
      return combineClasses(generalClasses);
    }
    if ("svg" === this.sourceType) {
      return combineClasses(_extends({}, generalClasses, {
        "dx-svg-icon": true
      }));
    }
    return "";
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded2);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction({
      props: _extends({}, props, {
        iconTemplate: getTemplate(props.iconTemplate)
      }),
      sourceType: this.sourceType,
      cssClass: this.cssClass,
      iconClassName: this.iconClassName,
      restAttributes: this.restAttributes
    });
  }
};
Icon.defaultProps = IconProps;

// node_modules/devextreme/esm/renovation/ui/common/ink_ripple.js
var _excluded3 = ["config"];
var viewFunction2 = (model) => normalizeProps(createVNode(1, "div", "dx-inkripple", null, 1, _extends({}, model.restAttributes)));
var InkRippleProps = {
  config: Object.freeze({})
};
var InkRipple = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.__getterCache = {};
    this.hideWave = this.hideWave.bind(this);
    this.showWave = this.showWave.bind(this);
  }
  get getConfig() {
    if (void 0 !== this.__getterCache.getConfig) {
      return this.__getterCache.getConfig;
    }
    return this.__getterCache.getConfig = (() => {
      var {
        config: config2
      } = this.props;
      return initConfig(config2);
    })();
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded3);
    return restProps;
  }
  hideWave(opts) {
    hideWave(this.getConfig, opts);
  }
  showWave(opts) {
    showWave(this.getConfig, opts);
  }
  componentWillUpdate(nextProps, nextState, context) {
    if (this.props.config !== nextProps.config) {
      this.__getterCache.getConfig = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction2({
      props: _extends({}, props),
      getConfig: this.getConfig,
      restAttributes: this.restAttributes
    });
  }
};
InkRipple.defaultProps = InkRippleProps;

// node_modules/devextreme/esm/renovation/utils/subscribe_to_event.js
function subscribeToEvent(eventName) {
  return (element, handler, eventData2, namespace) => {
    var event = namespace ? addNamespace(eventName, namespace) : eventName;
    if (handler) {
      events_engine_default.on(element, event, eventData2, handler);
      return () => {
        events_engine_default.off(element, event, handler);
      };
    }
    return;
  };
}
var subscribeToClickEvent = subscribeToEvent(CLICK_EVENT_NAME);
var subscribeToScrollEvent = subscribeToEvent(emitter_gesture_scroll_default.scroll);
var subscribeToScrollInitEvent = subscribeToEvent(emitter_gesture_scroll_default.init);
var subscribeToDXScrollStartEvent = subscribeToEvent(emitter_gesture_scroll_default.start);
var subscribeToDXScrollMoveEvent = subscribeToEvent(emitter_gesture_scroll_default.move);
var subscribeToDXScrollEndEvent = subscribeToEvent(emitter_gesture_scroll_default.end);
var subscribeToDXScrollStopEvent = subscribeToEvent(emitter_gesture_scroll_default.stop);
var subscribeToDXScrollCancelEvent = subscribeToEvent(emitter_gesture_scroll_default.cancel);
var subscribeToDXPointerDownEvent = subscribeToEvent(pointer_default.down);
var subscribeToDXPointerUpEvent = subscribeToEvent(pointer_default.up);
var subscribeToDXPointerMoveEvent = subscribeToEvent(pointer_default.move);
var subscribeToMouseEnterEvent = subscribeToEvent("mouseenter");
var subscribeToMouseLeaveEvent = subscribeToEvent("mouseleave");
var subscribeToKeyDownEvent = subscribeToEvent("keydown");
var subscribeToDxActiveEvent = subscribeToEvent("dxactive");
var subscribeToDxInactiveEvent = subscribeToEvent("dxinactive");
var subscribeToDxHoverStartEvent = subscribeToEvent("dxhoverstart");
var subscribeToDxHoverEndEvent = subscribeToEvent("dxhoverend");
var subscribeToDxFocusInEvent = subscribeToEvent("focusin");
var subscribeToDxFocusOutEvent = subscribeToEvent("focusout");

// node_modules/devextreme/esm/renovation/ui/common/base_props.js
var BaseWidgetProps = {
  className: "",
  activeStateEnabled: false,
  disabled: false,
  focusStateEnabled: false,
  hoverStateEnabled: false,
  tabIndex: 0,
  visible: true
};

// node_modules/devextreme/esm/renovation/common/config_context.js
var ConfigContext = createContext(void 0);

// node_modules/devextreme/esm/renovation/common/config_provider.js
var _excluded4 = ["children", "rtlEnabled"];
var viewFunction3 = (viewModel) => viewModel.props.children;
var ConfigProviderProps = {};
var ConfigProvider = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.__getterCache = {};
  }
  getChildContext() {
    return _extends({}, this.context, {
      [ConfigContext.id]: this.config || ConfigContext.defaultValue
    });
  }
  get config() {
    if (void 0 !== this.__getterCache.config) {
      return this.__getterCache.config;
    }
    return this.__getterCache.config = (() => ({
      rtlEnabled: this.props.rtlEnabled
    }))();
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded4);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    if (this.props.rtlEnabled !== nextProps.rtlEnabled) {
      this.__getterCache.config = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction3({
      props: _extends({}, props),
      config: this.config,
      restAttributes: this.restAttributes
    });
  }
};
ConfigProvider.defaultProps = ConfigProviderProps;

// node_modules/devextreme/esm/renovation/utils/resolve_rtl.js
function resolveRtlEnabled(rtlProp, config2) {
  if (void 0 !== rtlProp) {
    return rtlProp;
  }
  if (void 0 !== (null === config2 || void 0 === config2 ? void 0 : config2.rtlEnabled)) {
    return config2.rtlEnabled;
  }
  return config_default().rtlEnabled;
}
function resolveRtlEnabledDefinition(rtlProp, config2) {
  var isPropDefined = isDefined(rtlProp);
  var onlyGlobalDefined = isDefined(config_default().rtlEnabled) && !isPropDefined && !isDefined(null === config2 || void 0 === config2 ? void 0 : config2.rtlEnabled);
  return isPropDefined && rtlProp !== (null === config2 || void 0 === config2 ? void 0 : config2.rtlEnabled) || onlyGlobalDefined;
}

// node_modules/devextreme/esm/renovation/ui/common/widget.js
var _excluded5 = ["_feedbackHideTimeout", "_feedbackShowTimeout", "accessKey", "activeStateEnabled", "activeStateUnit", "addWidgetClass", "aria", "children", "className", "classes", "cssText", "disabled", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "name", "onActive", "onClick", "onDimensionChanged", "onFocusIn", "onFocusOut", "onHoverEnd", "onHoverStart", "onInactive", "onKeyDown", "onRootElementRendered", "onVisibilityChange", "rootElementRef", "rtlEnabled", "tabIndex", "visible", "width"];
var DEFAULT_FEEDBACK_HIDE_TIMEOUT = 400;
var DEFAULT_FEEDBACK_SHOW_TIMEOUT = 30;
var getAria = (args) => Object.keys(args).reduce((r, key) => {
  if (args[key]) {
    return _extends({}, r, {
      ["role" === key || "id" === key ? key : "aria-".concat(key)]: String(args[key])
    });
  }
  return r;
}, {});
var viewFunction4 = (viewModel) => {
  var widget = normalizeProps(createVNode(1, "div", viewModel.cssClasses, viewModel.props.children, 0, _extends({}, viewModel.attributes, {
    tabIndex: viewModel.tabIndex,
    title: viewModel.props.hint,
    style: normalizeStyles(viewModel.styles)
  }), null, viewModel.widgetElementRef));
  return viewModel.shouldRenderConfigProvider ? createComponentVNode(2, ConfigProvider, {
    rtlEnabled: viewModel.rtlEnabled,
    children: widget
  }) : widget;
};
var WidgetProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BaseWidgetProps), Object.getOwnPropertyDescriptors({
  _feedbackHideTimeout: DEFAULT_FEEDBACK_HIDE_TIMEOUT,
  _feedbackShowTimeout: DEFAULT_FEEDBACK_SHOW_TIMEOUT,
  cssText: "",
  aria: Object.freeze({}),
  classes: "",
  name: "",
  addWidgetClass: true
})));
var Widget = class extends InfernoWrapperComponent {
  constructor(props) {
    super(props);
    this.widgetElementRef = createRef();
    this.state = {
      active: false,
      focused: false,
      hovered: false
    };
    this.setRootElementRef = this.setRootElementRef.bind(this);
    this.activeEffect = this.activeEffect.bind(this);
    this.inactiveEffect = this.inactiveEffect.bind(this);
    this.clickEffect = this.clickEffect.bind(this);
    this.focus = this.focus.bind(this);
    this.blur = this.blur.bind(this);
    this.activate = this.activate.bind(this);
    this.deactivate = this.deactivate.bind(this);
    this.focusInEffect = this.focusInEffect.bind(this);
    this.focusOutEffect = this.focusOutEffect.bind(this);
    this.hoverStartEffect = this.hoverStartEffect.bind(this);
    this.hoverEndEffect = this.hoverEndEffect.bind(this);
    this.keyboardEffect = this.keyboardEffect.bind(this);
    this.resizeEffect = this.resizeEffect.bind(this);
    this.windowResizeEffect = this.windowResizeEffect.bind(this);
    this.visibilityEffect = this.visibilityEffect.bind(this);
    this.checkDeprecation = this.checkDeprecation.bind(this);
    this.applyCssTextEffect = this.applyCssTextEffect.bind(this);
  }
  get config() {
    if (this.context[ConfigContext.id]) {
      return this.context[ConfigContext.id];
    }
    return ConfigContext.defaultValue;
  }
  createEffects() {
    return [new InfernoEffect(this.setRootElementRef, []), new InfernoEffect(this.activeEffect, [this.props._feedbackShowTimeout, this.props.activeStateEnabled, this.props.activeStateUnit, this.props.disabled, this.props.onActive]), new InfernoEffect(this.inactiveEffect, [this.props._feedbackHideTimeout, this.props.activeStateEnabled, this.props.activeStateUnit, this.props.onInactive, this.state.active]), new InfernoEffect(this.clickEffect, [this.props.disabled, this.props.name, this.props.onClick]), new InfernoEffect(this.focusInEffect, [this.props.disabled, this.props.focusStateEnabled, this.props.name, this.props.onFocusIn]), new InfernoEffect(this.focusOutEffect, [this.props.focusStateEnabled, this.props.name, this.props.onFocusOut, this.state.focused]), new InfernoEffect(this.hoverStartEffect, [this.props.activeStateUnit, this.props.disabled, this.props.hoverStateEnabled, this.props.onHoverStart, this.state.active]), new InfernoEffect(this.hoverEndEffect, [this.props.activeStateUnit, this.props.hoverStateEnabled, this.props.onHoverEnd, this.state.hovered]), new InfernoEffect(this.keyboardEffect, [this.props.focusStateEnabled, this.props.onKeyDown]), new InfernoEffect(this.resizeEffect, [this.props.name, this.props.onDimensionChanged]), new InfernoEffect(this.windowResizeEffect, [this.props.onDimensionChanged]), new InfernoEffect(this.visibilityEffect, [this.props.name, this.props.onVisibilityChange]), new InfernoEffect(this.checkDeprecation, [this.props.height, this.props.width]), new InfernoEffect(this.applyCssTextEffect, [this.props.cssText]), createReRenderEffect()];
  }
  updateEffects() {
    var _this$_effects$, _this$_effects$2, _this$_effects$3, _this$_effects$4, _this$_effects$5, _this$_effects$6, _this$_effects$7, _this$_effects$8, _this$_effects$9, _this$_effects$10, _this$_effects$11, _this$_effects$12, _this$_effects$13;
    null === (_this$_effects$ = this._effects[1]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props._feedbackShowTimeout, this.props.activeStateEnabled, this.props.activeStateUnit, this.props.disabled, this.props.onActive]);
    null === (_this$_effects$2 = this._effects[2]) || void 0 === _this$_effects$2 ? void 0 : _this$_effects$2.update([this.props._feedbackHideTimeout, this.props.activeStateEnabled, this.props.activeStateUnit, this.props.onInactive, this.state.active]);
    null === (_this$_effects$3 = this._effects[3]) || void 0 === _this$_effects$3 ? void 0 : _this$_effects$3.update([this.props.disabled, this.props.name, this.props.onClick]);
    null === (_this$_effects$4 = this._effects[4]) || void 0 === _this$_effects$4 ? void 0 : _this$_effects$4.update([this.props.disabled, this.props.focusStateEnabled, this.props.name, this.props.onFocusIn]);
    null === (_this$_effects$5 = this._effects[5]) || void 0 === _this$_effects$5 ? void 0 : _this$_effects$5.update([this.props.focusStateEnabled, this.props.name, this.props.onFocusOut, this.state.focused]);
    null === (_this$_effects$6 = this._effects[6]) || void 0 === _this$_effects$6 ? void 0 : _this$_effects$6.update([this.props.activeStateUnit, this.props.disabled, this.props.hoverStateEnabled, this.props.onHoverStart, this.state.active]);
    null === (_this$_effects$7 = this._effects[7]) || void 0 === _this$_effects$7 ? void 0 : _this$_effects$7.update([this.props.activeStateUnit, this.props.hoverStateEnabled, this.props.onHoverEnd, this.state.hovered]);
    null === (_this$_effects$8 = this._effects[8]) || void 0 === _this$_effects$8 ? void 0 : _this$_effects$8.update([this.props.focusStateEnabled, this.props.onKeyDown]);
    null === (_this$_effects$9 = this._effects[9]) || void 0 === _this$_effects$9 ? void 0 : _this$_effects$9.update([this.props.name, this.props.onDimensionChanged]);
    null === (_this$_effects$10 = this._effects[10]) || void 0 === _this$_effects$10 ? void 0 : _this$_effects$10.update([this.props.onDimensionChanged]);
    null === (_this$_effects$11 = this._effects[11]) || void 0 === _this$_effects$11 ? void 0 : _this$_effects$11.update([this.props.name, this.props.onVisibilityChange]);
    null === (_this$_effects$12 = this._effects[12]) || void 0 === _this$_effects$12 ? void 0 : _this$_effects$12.update([this.props.height, this.props.width]);
    null === (_this$_effects$13 = this._effects[13]) || void 0 === _this$_effects$13 ? void 0 : _this$_effects$13.update([this.props.cssText]);
  }
  setRootElementRef() {
    var {
      onRootElementRendered,
      rootElementRef
    } = this.props;
    if (rootElementRef) {
      rootElementRef.current = this.widgetElementRef.current;
    }
    null === onRootElementRendered || void 0 === onRootElementRendered ? void 0 : onRootElementRendered(this.widgetElementRef.current);
  }
  activeEffect() {
    var {
      _feedbackShowTimeout,
      activeStateEnabled,
      activeStateUnit,
      disabled,
      onActive
    } = this.props;
    var selector = activeStateUnit;
    if (activeStateEnabled) {
      if (!disabled) {
        return subscribeToDxActiveEvent(this.widgetElementRef.current, (event) => {
          this.setState((__state_argument) => ({
            active: true
          }));
          null === onActive || void 0 === onActive ? void 0 : onActive(event);
        }, {
          timeout: _feedbackShowTimeout,
          selector
        }, "UIFeedback");
      }
    }
    return;
  }
  inactiveEffect() {
    var {
      _feedbackHideTimeout,
      activeStateEnabled,
      activeStateUnit,
      onInactive
    } = this.props;
    var selector = activeStateUnit;
    if (activeStateEnabled) {
      return subscribeToDxInactiveEvent(this.widgetElementRef.current, (event) => {
        if (this.state.active) {
          this.setState((__state_argument) => ({
            active: false
          }));
          null === onInactive || void 0 === onInactive ? void 0 : onInactive(event);
        }
      }, {
        timeout: _feedbackHideTimeout,
        selector
      }, "UIFeedback");
    }
    return;
  }
  clickEffect() {
    var {
      disabled,
      name: name2,
      onClick
    } = this.props;
    var namespace = name2;
    if (onClick && !disabled) {
      dxClick.on(this.widgetElementRef.current, onClick, {
        namespace
      });
      return () => dxClick.off(this.widgetElementRef.current, {
        namespace
      });
    }
    return;
  }
  focusInEffect() {
    var {
      disabled,
      focusStateEnabled,
      name: name2,
      onFocusIn
    } = this.props;
    var namespace = "".concat(name2, "Focus");
    if (focusStateEnabled) {
      if (!disabled) {
        return subscribeToDxFocusInEvent(this.widgetElementRef.current, (event) => {
          if (!event.isDefaultPrevented()) {
            this.setState((__state_argument) => ({
              focused: true
            }));
            null === onFocusIn || void 0 === onFocusIn ? void 0 : onFocusIn(event);
          }
        }, null, namespace);
      }
    }
    return;
  }
  focusOutEffect() {
    var {
      focusStateEnabled,
      name: name2,
      onFocusOut
    } = this.props;
    var namespace = "".concat(name2, "Focus");
    if (focusStateEnabled) {
      return subscribeToDxFocusOutEvent(this.widgetElementRef.current, (event) => {
        if (!event.isDefaultPrevented() && this.state.focused) {
          this.setState((__state_argument) => ({
            focused: false
          }));
          null === onFocusOut || void 0 === onFocusOut ? void 0 : onFocusOut(event);
        }
      }, null, namespace);
    }
    return;
  }
  hoverStartEffect() {
    var {
      activeStateUnit,
      disabled,
      hoverStateEnabled,
      onHoverStart
    } = this.props;
    var selector = activeStateUnit;
    if (hoverStateEnabled) {
      if (!disabled) {
        return subscribeToDxHoverStartEvent(this.widgetElementRef.current, (event) => {
          !this.state.active && this.setState((__state_argument) => ({
            hovered: true
          }));
          null === onHoverStart || void 0 === onHoverStart ? void 0 : onHoverStart(event);
        }, {
          selector
        }, "UIFeedback");
      }
    }
    return;
  }
  hoverEndEffect() {
    var {
      activeStateUnit,
      hoverStateEnabled,
      onHoverEnd
    } = this.props;
    var selector = activeStateUnit;
    if (hoverStateEnabled) {
      return subscribeToDxHoverEndEvent(this.widgetElementRef.current, (event) => {
        if (this.state.hovered) {
          this.setState((__state_argument) => ({
            hovered: false
          }));
          null === onHoverEnd || void 0 === onHoverEnd ? void 0 : onHoverEnd(event);
        }
      }, {
        selector
      }, "UIFeedback");
    }
    return;
  }
  keyboardEffect() {
    var {
      focusStateEnabled,
      onKeyDown
    } = this.props;
    if (focusStateEnabled && onKeyDown) {
      var id = keyboard.on(this.widgetElementRef.current, this.widgetElementRef.current, (e) => onKeyDown(e));
      return () => keyboard.off(id);
    }
    return;
  }
  resizeEffect() {
    var namespace = "".concat(this.props.name, "VisibilityChange");
    var {
      onDimensionChanged
    } = this.props;
    if (onDimensionChanged) {
      resize.on(this.widgetElementRef.current, onDimensionChanged, {
        namespace
      });
      return () => resize.off(this.widgetElementRef.current, {
        namespace
      });
    }
    return;
  }
  windowResizeEffect() {
    var {
      onDimensionChanged
    } = this.props;
    if (onDimensionChanged) {
      resize_callbacks_default.add(onDimensionChanged);
      return () => {
        resize_callbacks_default.remove(onDimensionChanged);
      };
    }
    return;
  }
  visibilityEffect() {
    var {
      name: name2,
      onVisibilityChange
    } = this.props;
    var namespace = "".concat(name2, "VisibilityChange");
    if (onVisibilityChange) {
      visibility.on(this.widgetElementRef.current, () => onVisibilityChange(true), () => onVisibilityChange(false), {
        namespace
      });
      return () => visibility.off(this.widgetElementRef.current, {
        namespace
      });
    }
    return;
  }
  checkDeprecation() {
    var {
      height,
      width
    } = this.props;
    if (isFunction(width)) {
      errors_default.log("W0017", "width");
    }
    if (isFunction(height)) {
      errors_default.log("W0017", "height");
    }
  }
  applyCssTextEffect() {
    var {
      cssText
    } = this.props;
    if ("" !== cssText) {
      this.widgetElementRef.current.style.cssText = cssText;
    }
  }
  get shouldRenderConfigProvider() {
    var {
      rtlEnabled
    } = this.props;
    return resolveRtlEnabledDefinition(rtlEnabled, this.config);
  }
  get rtlEnabled() {
    var {
      rtlEnabled
    } = this.props;
    return resolveRtlEnabled(rtlEnabled, this.config);
  }
  get attributes() {
    var {
      aria,
      disabled,
      focusStateEnabled,
      visible
    } = this.props;
    var accessKey = focusStateEnabled && !disabled && this.props.accessKey;
    return _extends({}, extend({}, accessKey && {
      accessKey
    }), getAria(_extends({}, aria, {
      disabled,
      hidden: !visible
    })), extend({}, this.restAttributes));
  }
  get styles() {
    var {
      height,
      width
    } = this.props;
    var style = this.restAttributes.style || {};
    var computedWidth = normalizeStyleProp("width", isFunction(width) ? width() : width);
    var computedHeight = normalizeStyleProp("height", isFunction(height) ? height() : height);
    return _extends({}, style, {
      height: null !== computedHeight && void 0 !== computedHeight ? computedHeight : style.height,
      width: null !== computedWidth && void 0 !== computedWidth ? computedWidth : style.width
    });
  }
  get cssClasses() {
    var {
      activeStateEnabled,
      addWidgetClass,
      className,
      classes,
      disabled,
      focusStateEnabled,
      hoverStateEnabled,
      onVisibilityChange,
      visible
    } = this.props;
    var isFocusable = !!focusStateEnabled && !disabled;
    var isHoverable = !!hoverStateEnabled && !disabled;
    var canBeActive = !!activeStateEnabled && !disabled;
    var classesMap = {
      "dx-widget": !!addWidgetClass,
      [String(classes)]: !!classes,
      [String(className)]: !!className,
      "dx-state-disabled": !!disabled,
      "dx-state-invisible": !visible,
      "dx-state-focused": !!this.state.focused && isFocusable,
      "dx-state-active": !!this.state.active && canBeActive,
      "dx-state-hover": !!this.state.hovered && isHoverable && !this.state.active,
      "dx-rtl": !!this.rtlEnabled,
      "dx-visibility-change-handler": !!onVisibilityChange
    };
    return combineClasses(classesMap);
  }
  get tabIndex() {
    var {
      disabled,
      focusStateEnabled,
      tabIndex
    } = this.props;
    var isFocusable = focusStateEnabled && !disabled;
    return isFocusable ? tabIndex : void 0;
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded5);
    return restProps;
  }
  focus() {
    focus.trigger(this.widgetElementRef.current);
  }
  blur() {
    var activeElement = dom_adapter_default.getActiveElement(this.widgetElementRef.current);
    if (this.widgetElementRef.current === activeElement) {
      activeElement.blur();
    }
  }
  activate() {
    this.setState((__state_argument) => ({
      active: true
    }));
  }
  deactivate() {
    this.setState((__state_argument) => ({
      active: false
    }));
  }
  render() {
    var props = this.props;
    return viewFunction4({
      props: _extends({}, props),
      active: this.state.active,
      focused: this.state.focused,
      hovered: this.state.hovered,
      widgetElementRef: this.widgetElementRef,
      config: this.config,
      shouldRenderConfigProvider: this.shouldRenderConfigProvider,
      rtlEnabled: this.rtlEnabled,
      attributes: this.attributes,
      styles: this.styles,
      cssClasses: this.cssClasses,
      tabIndex: this.tabIndex,
      restAttributes: this.restAttributes
    });
  }
};
Widget.defaultProps = WidgetProps;

// node_modules/devextreme/esm/renovation/ui/button.js
var _excluded6 = ["accessKey", "activeStateEnabled", "children", "className", "disabled", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "icon", "iconPosition", "iconTemplate", "onClick", "onKeyDown", "onSubmit", "pressed", "rtlEnabled", "stylingMode", "tabIndex", "template", "templateData", "text", "type", "useInkRipple", "useSubmitBehavior", "visible", "width"];
var stylingModes = ["outlined", "text", "contained"];
var getCssClasses = (model) => {
  var {
    icon,
    iconPosition,
    stylingMode,
    text,
    type: type2
  } = model;
  var isValidStylingMode = stylingMode && stylingModes.includes(stylingMode);
  var classesMap = {
    "dx-button": true,
    ["dx-button-mode-".concat(isValidStylingMode ? stylingMode : "contained")]: true,
    ["dx-button-".concat(null !== type2 && void 0 !== type2 ? type2 : "normal")]: true,
    "dx-button-has-text": !!text,
    "dx-button-has-icon": !!icon,
    "dx-button-icon-right": "left" !== iconPosition
  };
  return combineClasses(classesMap);
};
var viewFunction5 = (viewModel) => {
  var {
    children,
    iconPosition,
    iconTemplate: IconTemplate,
    template: ButtonTemplate,
    text
  } = viewModel.props;
  var renderText = !viewModel.props.template && !children && "" !== text;
  var isIconLeft = "left" === iconPosition;
  var iconComponent = !viewModel.props.template && !children && (viewModel.iconSource || viewModel.props.iconTemplate) && createComponentVNode(2, Icon, {
    source: viewModel.iconSource,
    position: iconPosition,
    iconTemplate: IconTemplate
  });
  return normalizeProps(createComponentVNode(2, Widget, _extends({
    accessKey: viewModel.props.accessKey,
    activeStateEnabled: viewModel.props.activeStateEnabled,
    aria: viewModel.aria,
    className: viewModel.props.className,
    classes: viewModel.cssClasses,
    disabled: viewModel.props.disabled,
    focusStateEnabled: viewModel.props.focusStateEnabled,
    height: viewModel.props.height,
    hint: viewModel.props.hint,
    hoverStateEnabled: viewModel.props.hoverStateEnabled,
    onActive: viewModel.onActive,
    onClick: viewModel.onWidgetClick,
    onInactive: viewModel.onInactive,
    onKeyDown: viewModel.keyDown,
    rtlEnabled: viewModel.props.rtlEnabled,
    tabIndex: viewModel.props.tabIndex,
    visible: viewModel.props.visible,
    width: viewModel.props.width
  }, viewModel.restAttributes, {
    children: createVNode(1, "div", "dx-button-content", [viewModel.props.template && ButtonTemplate({
      data: viewModel.buttonTemplateData
    }), !viewModel.props.template && children, isIconLeft && iconComponent, renderText && createVNode(1, "span", "dx-button-text", text, 0), !isIconLeft && iconComponent, viewModel.props.useSubmitBehavior && createVNode(64, "input", "dx-button-submit-input", null, 1, {
      type: "submit",
      tabIndex: -1
    }, null, viewModel.submitInputRef), viewModel.props.useInkRipple && createComponentVNode(2, InkRipple, {
      config: viewModel.inkRippleConfig
    }, null, viewModel.inkRippleRef)], 0, null, null, viewModel.contentRef)
  }), null, viewModel.widgetRef));
};
var ButtonProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BaseWidgetProps), Object.getOwnPropertyDescriptors({
  activeStateEnabled: true,
  hoverStateEnabled: true,
  icon: "",
  iconPosition: "left",
  stylingMode: "contained",
  text: "",
  type: "normal",
  useInkRipple: false,
  useSubmitBehavior: false,
  templateData: Object.freeze({})
})));
var defaultOptionRules = createDefaultOptionRules([{
  device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
  options: {
    focusStateEnabled: true
  }
}, {
  device: () => isMaterial(current()),
  options: {
    useInkRipple: true
  }
}]);
var getTemplate2 = (TemplateProp) => TemplateProp && (TemplateProp.defaultProps ? (props) => normalizeProps(createComponentVNode(2, TemplateProp, _extends({}, props))) : TemplateProp);
var Button = class extends InfernoWrapperComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.contentRef = createRef();
    this.inkRippleRef = createRef();
    this.submitInputRef = createRef();
    this.widgetRef = createRef();
    this.__getterCache = {};
    this.focus = this.focus.bind(this);
    this.activate = this.activate.bind(this);
    this.deactivate = this.deactivate.bind(this);
    this.submitEffect = this.submitEffect.bind(this);
    this.onActive = this.onActive.bind(this);
    this.onInactive = this.onInactive.bind(this);
    this.onWidgetClick = this.onWidgetClick.bind(this);
    this.keyDown = this.keyDown.bind(this);
    this.emitClickEvent = this.emitClickEvent.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.submitEffect, [this.props.onSubmit, this.props.useSubmitBehavior]), createReRenderEffect()];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.onSubmit, this.props.useSubmitBehavior]);
  }
  submitEffect() {
    var {
      onSubmit,
      useSubmitBehavior
    } = this.props;
    if (useSubmitBehavior && onSubmit) {
      click.on(this.submitInputRef.current, (event) => onSubmit({
        event,
        submitInput: this.submitInputRef.current
      }), {
        namespace: "UIFeedback"
      });
      return () => click.off(this.submitInputRef.current, {
        namespace: "UIFeedback"
      });
    }
    return;
  }
  onActive(event) {
    var {
      useInkRipple
    } = this.props;
    useInkRipple && this.inkRippleRef.current.showWave({
      element: this.contentRef.current,
      event
    });
  }
  onInactive(event) {
    var {
      useInkRipple
    } = this.props;
    useInkRipple && this.inkRippleRef.current.hideWave({
      element: this.contentRef.current,
      event
    });
  }
  onWidgetClick(event) {
    var {
      onClick,
      useSubmitBehavior
    } = this.props;
    null === onClick || void 0 === onClick ? void 0 : onClick({
      event
    });
    useSubmitBehavior && this.submitInputRef.current.click();
  }
  keyDown(e) {
    var {
      onKeyDown
    } = this.props;
    var {
      keyName,
      originalEvent,
      which
    } = e;
    var result2 = null === onKeyDown || void 0 === onKeyDown ? void 0 : onKeyDown(e);
    if (null !== result2 && void 0 !== result2 && result2.cancel) {
      return result2;
    }
    if ("space" === keyName || "space" === which || "enter" === keyName || "enter" === which) {
      originalEvent.preventDefault();
      this.emitClickEvent();
    }
    return;
  }
  emitClickEvent() {
    this.contentRef.current.click();
  }
  get aria() {
    var {
      icon,
      text
    } = this.props;
    var label = null !== text && void 0 !== text ? text : "";
    if (!text && icon) {
      var iconSource = getImageSourceType(icon);
      switch (iconSource) {
        case "image":
          var isPathToImage = !icon.includes("base64") && /^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/.test(icon);
          label = isPathToImage ? icon.replace(/.+\/([^.]+)\..+$/, "$1") : "";
          break;
        case "dxIcon":
          label = message_default.format(camelize(icon, true)) || icon;
          break;
        case "fontIcon":
          label = icon;
          break;
        case "svg":
          var _titleRegexp$exec$, _titleRegexp$exec;
          var title = null !== (_titleRegexp$exec$ = null === (_titleRegexp$exec = /<title>(.*?)<\/title>/.exec(icon)) || void 0 === _titleRegexp$exec ? void 0 : _titleRegexp$exec[1]) && void 0 !== _titleRegexp$exec$ ? _titleRegexp$exec$ : "";
          label = title;
      }
    }
    return _extends({
      role: "button"
    }, label ? {
      label
    } : {});
  }
  get cssClasses() {
    return getCssClasses(this.props);
  }
  get iconSource() {
    var {
      icon
    } = this.props;
    return null !== icon && void 0 !== icon ? icon : "";
  }
  get inkRippleConfig() {
    if (void 0 !== this.__getterCache.inkRippleConfig) {
      return this.__getterCache.inkRippleConfig;
    }
    return this.__getterCache.inkRippleConfig = (() => {
      var {
        icon,
        text
      } = this.props;
      return !text && icon ? {
        isCentered: true,
        useHoldAnimation: false,
        waveSizeCoefficient: 1
      } : {};
    })();
  }
  get buttonTemplateData() {
    var {
      icon,
      templateData,
      text
    } = this.props;
    return _extends({
      icon,
      text
    }, templateData);
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded6);
    return restProps;
  }
  focus() {
    this.widgetRef.current.focus();
  }
  activate() {
    this.widgetRef.current.activate();
  }
  deactivate() {
    this.widgetRef.current.deactivate();
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props.icon !== nextProps.icon || this.props.text !== nextProps.text) {
      this.__getterCache.inkRippleConfig = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction5({
      props: _extends({}, props, {
        template: getTemplate2(props.template),
        iconTemplate: getTemplate2(props.iconTemplate)
      }),
      contentRef: this.contentRef,
      submitInputRef: this.submitInputRef,
      inkRippleRef: this.inkRippleRef,
      widgetRef: this.widgetRef,
      onActive: this.onActive,
      onInactive: this.onInactive,
      onWidgetClick: this.onWidgetClick,
      keyDown: this.keyDown,
      emitClickEvent: this.emitClickEvent,
      aria: this.aria,
      cssClasses: this.cssClasses,
      iconSource: this.iconSource,
      inkRippleConfig: this.inkRippleConfig,
      buttonTemplateData: this.buttonTemplateData,
      restAttributes: this.restAttributes
    });
  }
};
Button.defaultProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(ButtonProps), Object.getOwnPropertyDescriptors(_extends({}, convertRulesToOptions(defaultOptionRules)))));
var __defaultOptionRules = [];
function defaultOptions(rule) {
  __defaultOptionRules.push(rule);
  Button.defaultProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(Button.defaultProps), Object.getOwnPropertyDescriptors(convertRulesToOptions(defaultOptionRules)), Object.getOwnPropertyDescriptors(convertRulesToOptions(__defaultOptionRules))));
}

// node_modules/devextreme/esm/renovation/ui/button.j.js
var Button2 = class extends ButtonWrapper {
  getProps() {
    var props = super.getProps();
    props.onKeyDown = this._wrapKeyDownHandler(props.onKeyDown);
    return props;
  }
  focus() {
    var _this$viewRef;
    return null === (_this$viewRef = this.viewRef) || void 0 === _this$viewRef ? void 0 : _this$viewRef.focus(...arguments);
  }
  activate() {
    var _this$viewRef2;
    return null === (_this$viewRef2 = this.viewRef) || void 0 === _this$viewRef2 ? void 0 : _this$viewRef2.activate(...arguments);
  }
  deactivate() {
    var _this$viewRef3;
    return null === (_this$viewRef3 = this.viewRef) || void 0 === _this$viewRef3 ? void 0 : _this$viewRef3.deactivate(...arguments);
  }
  _getActionConfigs() {
    return {
      onClick: {
        excludeValidators: ["readOnly"]
      },
      onSubmit: {}
    };
  }
  get _propsInfo() {
    return {
      twoWay: [],
      allowNull: [],
      elements: ["onSubmit"],
      templates: ["template", "iconTemplate"],
      props: ["activeStateEnabled", "hoverStateEnabled", "icon", "iconPosition", "onClick", "onSubmit", "pressed", "stylingMode", "template", "iconTemplate", "text", "type", "useInkRipple", "useSubmitBehavior", "templateData", "className", "accessKey", "disabled", "focusStateEnabled", "height", "hint", "onKeyDown", "rtlEnabled", "tabIndex", "visible", "width"]
    };
  }
  get _viewComponent() {
    return Button;
  }
};
component_registrator_default("dxButton", Button2);
Button2.defaultOptions = defaultOptions;

// node_modules/devextreme/esm/ui/button.js
var button_default = Button2;

// node_modules/devextreme/esm/__internal/ui/text_box/texteditor_button_collection/m_custom.js
var CUSTOM_BUTTON_HOVERED_CLASS = "dx-custom-button-hovered";
var CustomButton = class extends TextEditorButton {
  _attachEvents(instance, $element) {
    var {
      editor
    } = this;
    events_engine_default.on($element, HOVERSTART, () => {
      editor.$element().addClass(CUSTOM_BUTTON_HOVERED_CLASS);
    });
    events_engine_default.on($element, HOVEREND, () => {
      editor.$element().removeClass(CUSTOM_BUTTON_HOVERED_CLASS);
    });
    events_engine_default.on($element, CLICK_EVENT_NAME, (e) => {
      e.stopPropagation();
    });
  }
  _create() {
    var {
      editor
    } = this;
    var $element = renderer_default("<div>");
    this._addToContainer($element);
    var instance = editor._createComponent($element, button_default, extend({}, this.options, {
      ignoreParentReadOnly: true,
      disabled: this._isDisabled(),
      integrationOptions: this._prepareIntegrationOptions(editor)
    }));
    return {
      $element,
      instance
    };
  }
  _prepareIntegrationOptions(editor) {
    return extend({}, editor.option("integrationOptions"), {
      skipTemplates: ["content"]
    });
  }
  update() {
    var isUpdated = super.update();
    if (this.instance) {
      this.instance.option("disabled", this._isDisabled());
    }
    return isUpdated;
  }
  _isVisible() {
    var {
      editor
    } = this;
    return editor.option("visible");
  }
  _isDisabled() {
    var isDefinedByUser = void 0 !== this.options.disabled;
    if (isDefinedByUser) {
      return this.instance ? this.instance.option("disabled") : this.options.disabled;
    }
    return this.editor.option("readOnly");
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/texteditor_button_collection/m_index.js
var TEXTEDITOR_BUTTONS_CONTAINER_CLASS = "dx-texteditor-buttons-container";
function checkButtonInfo(buttonInfo) {
  (() => {
    if (!buttonInfo || "object" !== typeof buttonInfo || Array.isArray(buttonInfo)) {
      throw ui_errors_default.Error("E1053");
    }
  })();
  (() => {
    if (!("name" in buttonInfo)) {
      throw ui_errors_default.Error("E1054");
    }
  })();
  (() => {
    var {
      name: name2
    } = buttonInfo;
    if ("string" !== typeof name2) {
      throw ui_errors_default.Error("E1055");
    }
  })();
  (() => {
    var {
      location
    } = buttonInfo;
    if ("location" in buttonInfo && "after" !== location && "before" !== location) {
      buttonInfo.location = "after";
    }
  })();
}
function checkNamesUniqueness(existingNames, newName) {
  if (-1 !== existingNames.indexOf(newName)) {
    throw ui_errors_default.Error("E1055", newName);
  }
  existingNames.push(newName);
}
function isPredefinedButtonName(name2, predefinedButtonsInfo) {
  return !!predefinedButtonsInfo.find((info) => info.name === name2);
}
var TextEditorButtonCollection = class {
  constructor(editor, defaultButtonsInfo) {
    this.buttons = [];
    this.defaultButtonsInfo = defaultButtonsInfo;
    this.editor = editor;
  }
  _compileButtonInfo(buttons) {
    var names = [];
    return buttons.map((button) => {
      var isStringButton = "string" === typeof button;
      if (!isStringButton) {
        checkButtonInfo(button);
      }
      var isDefaultButton = isStringButton || isPredefinedButtonName(button.name, this.defaultButtonsInfo);
      if (isDefaultButton) {
        var defaultButtonInfo = this.defaultButtonsInfo.find((_ref) => {
          var {
            name: name3
          } = _ref;
          return name3 === button || name3 === button.name;
        });
        if (!defaultButtonInfo) {
          throw ui_errors_default.Error("E1056", this.editor.NAME, button);
        }
        checkNamesUniqueness(names, button);
        return defaultButtonInfo;
      }
      var {
        name: name2
      } = button;
      checkNamesUniqueness(names, name2);
      return extend(button, {
        Ctor: CustomButton
      });
    });
  }
  _createButton(buttonsInfo) {
    var {
      Ctor,
      options: options2,
      name: name2
    } = buttonsInfo;
    var button = new Ctor(name2, this.editor, options2);
    this.buttons.push(button);
    return button;
  }
  _renderButtons(buttons, $container, targetLocation) {
    var $buttonsContainer = null;
    var buttonsInfo = buttons ? this._compileButtonInfo(buttons) : this.defaultButtonsInfo;
    buttonsInfo.forEach((buttonsInfo2) => {
      var {
        location = "after"
      } = buttonsInfo2;
      if (location === targetLocation) {
        this._createButton(buttonsInfo2).render((() => {
          $buttonsContainer = null !== $buttonsContainer && void 0 !== $buttonsContainer ? $buttonsContainer : renderer_default("<div>").addClass(TEXTEDITOR_BUTTONS_CONTAINER_CLASS);
          "before" === targetLocation ? $container.prepend($buttonsContainer) : $container.append($buttonsContainer);
          return $buttonsContainer;
        })());
      }
    });
    return $buttonsContainer;
  }
  clean() {
    this.buttons.forEach((button) => button.dispose());
    this.buttons = [];
  }
  getButton(buttonName) {
    var button = this.buttons.find((_ref2) => {
      var {
        name: name2
      } = _ref2;
      return name2 === buttonName;
    });
    return button && button.instance;
  }
  renderAfterButtons(buttons, $container) {
    return this._renderButtons(buttons, $container, "after");
  }
  renderBeforeButtons(buttons, $container) {
    return this._renderButtons(buttons, $container, "before");
  }
  updateButtons(names) {
    this.buttons.forEach((button) => {
      if (!names || -1 !== names.indexOf(button.name)) {
        button.update();
      }
    });
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.base.js
var TEXTEDITOR_CLASS = "dx-texteditor";
var TEXTEDITOR_INPUT_CONTAINER_CLASS = "dx-texteditor-input-container";
var TEXTEDITOR_INPUT_CLASS = "dx-texteditor-input";
var TEXTEDITOR_INPUT_SELECTOR = ".".concat(TEXTEDITOR_INPUT_CLASS);
var TEXTEDITOR_CONTAINER_CLASS = "dx-texteditor-container";
var TEXTEDITOR_BUTTONS_CONTAINER_CLASS2 = "dx-texteditor-buttons-container";
var TEXTEDITOR_PLACEHOLDER_CLASS = "dx-placeholder";
var TEXTEDITOR_EMPTY_INPUT_CLASS = "dx-texteditor-empty";
var STATE_INVISIBLE_CLASS2 = "dx-state-invisible";
var TEXTEDITOR_PENDING_INDICATOR_CLASS = "dx-pending-indicator";
var TEXTEDITOR_VALIDATION_PENDING_CLASS = "dx-validation-pending";
var TEXTEDITOR_VALID_CLASS = "dx-valid";
var EVENTS_LIST = ["KeyDown", "KeyPress", "KeyUp", "Change", "Cut", "Copy", "Paste", "Input"];
var CONTROL_KEYS = ["tab", "enter", "shift", "control", "alt", "escape", "pageUp", "pageDown", "end", "home", "leftArrow", "upArrow", "rightArrow", "downArrow"];
var TextEditorLabelCreator = TextEditorLabel;
function checkButtonsOptionType(buttons) {
  if (isDefined(buttons) && !Array.isArray(buttons)) {
    throw ui_errors_default.Error("E1053");
  }
}
var TextEditorBase = editor_default.inherit({
  ctor(_, options2) {
    if (options2) {
      checkButtonsOptionType(options2.buttons);
    }
    this._buttonCollection = new TextEditorButtonCollection(this, this._getDefaultButtons());
    this._$beforeButtonsContainer = null;
    this._$afterButtonsContainer = null;
    this._labelContainerElement = null;
    this.callBase.apply(this, arguments);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      buttons: void 0,
      value: "",
      spellcheck: false,
      showClearButton: false,
      valueChangeEvent: "change",
      placeholder: "",
      inputAttr: {},
      onFocusIn: null,
      onFocusOut: null,
      onKeyDown: null,
      onKeyUp: null,
      onChange: null,
      onInput: null,
      onCut: null,
      onCopy: null,
      onPaste: null,
      onEnterKey: null,
      mode: "text",
      hoverStateEnabled: true,
      focusStateEnabled: true,
      text: void 0,
      displayValueFormatter: (value2) => isDefined(value2) && false !== value2 ? value2 : "",
      stylingMode: config_default().editorStylingMode || "outlined",
      showValidationMark: true,
      label: "",
      labelMode: "static",
      labelMark: ""
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device() {
        var themeName = current();
        return isMaterial(themeName);
      },
      options: {
        labelMode: "floating",
        stylingMode: config_default().editorStylingMode || "filled"
      }
    }, {
      device() {
        var themeName = current();
        return isFluent(themeName);
      },
      options: {
        labelMode: "outside"
      }
    }]);
  },
  _getDefaultButtons: () => [{
    name: "clear",
    Ctor: ClearButton
  }],
  _isClearButtonVisible() {
    return this.option("showClearButton") && !this.option("readOnly");
  },
  _input() {
    return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first();
  },
  _isFocused() {
    return focused(this._input()) || this.callBase();
  },
  _inputWrapper() {
    return this.$element();
  },
  _buttonsContainer() {
    return this._inputWrapper().find(".".concat(TEXTEDITOR_BUTTONS_CONTAINER_CLASS2)).eq(0);
  },
  _isControlKey: (key) => CONTROL_KEYS.includes(key),
  _renderStylingMode() {
    this.callBase();
    this._updateButtonsStyling(this.option("stylingMode"));
  },
  _initMarkup() {
    this.$element().addClass(TEXTEDITOR_CLASS);
    this._renderInput();
    this._renderButtonContainers();
    this._renderStylingMode();
    this._renderInputType();
    this._renderPlaceholder();
    this._renderProps();
    this.callBase();
    this._renderValue();
    this._renderLabel();
  },
  _render() {
    this.callBase();
    this._refreshValueChangeEvent();
    this._refreshEvents();
    this._renderEnterKeyAction();
    this._renderEmptinessEvent();
  },
  _renderInput() {
    this._$textEditorContainer = renderer_default("<div>").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());
    this._$textEditorInputContainer = renderer_default("<div>").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);
    this._$textEditorInputContainer.append(this._createInput());
  },
  _getInputContainer() {
    return this._$textEditorInputContainer;
  },
  _renderPendingIndicator() {
    this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);
    var $inputContainer = this._getInputContainer();
    var $indicatorElement = renderer_default("<div>").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);
    this._pendingIndicator = this._createComponent($indicatorElement, load_indicator_default);
  },
  _disposePendingIndicator() {
    if (!this._pendingIndicator) {
      return;
    }
    this._pendingIndicator.dispose();
    this._pendingIndicator.$element().remove();
    this._pendingIndicator = null;
    this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);
  },
  _renderValidationState() {
    this.callBase();
    var isPending = "pending" === this.option("validationStatus");
    if (isPending) {
      !this._pendingIndicator && this._renderPendingIndicator();
      this._showValidMark = false;
    } else {
      if ("invalid" === this.option("validationStatus")) {
        this._showValidMark = false;
      }
      if (!this._showValidMark && true === this.option("showValidationMark")) {
        this._showValidMark = "valid" === this.option("validationStatus") && !!this._pendingIndicator;
      }
      this._disposePendingIndicator();
    }
    this._toggleValidMark();
  },
  _getButtonsContainer() {
    return this._$textEditorContainer;
  },
  _renderButtonContainers() {
    var buttons = this.option("buttons");
    var $buttonsContainer = this._getButtonsContainer();
    this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, $buttonsContainer);
    this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, $buttonsContainer);
  },
  _cleanButtonContainers() {
    var _a, _b;
    null === (_a = this._$beforeButtonsContainer) || void 0 === _a ? void 0 : _a.remove();
    null === (_b = this._$afterButtonsContainer) || void 0 === _b ? void 0 : _b.remove();
    this._buttonCollection.clean();
  },
  _clean() {
    this._buttonCollection.clean();
    this._disposePendingIndicator();
    this._unobserveLabelContainerResize();
    this._$beforeButtonsContainer = null;
    this._$afterButtonsContainer = null;
    this._$textEditorContainer = null;
    this.callBase();
  },
  _createInput() {
    var $input = renderer_default("<input>");
    this._applyInputAttributes($input, this.option("inputAttr"));
    return $input;
  },
  _setSubmitElementName(name2) {
    var inputAttrName = this.option("inputAttr.name");
    return this.callBase(name2 || inputAttrName || "");
  },
  _applyInputAttributes($input, customAttributes) {
    var inputAttributes = extend(this._getDefaultAttributes(), customAttributes);
    $input.attr(inputAttributes).addClass(TEXTEDITOR_INPUT_CLASS);
    this._setInputMinHeight($input);
  },
  _setInputMinHeight($input) {
    $input.css("minHeight", this.option("height") ? "0" : "");
  },
  _getPlaceholderAttr() {
    var {
      ios: ios2,
      mac: mac2
    } = devices_default.real();
    var {
      placeholder
    } = this.option();
    var value2 = placeholder || (ios2 || mac2 ? " " : null);
    return value2;
  },
  _getDefaultAttributes() {
    var defaultAttributes = {
      autocomplete: "off",
      placeholder: this._getPlaceholderAttr()
    };
    return defaultAttributes;
  },
  _updateButtons(names) {
    this._buttonCollection.updateButtons(names);
  },
  _updateButtonsStyling(editorStylingMode) {
    each(this.option("buttons"), (_, _ref) => {
      var {
        options: options2,
        name: buttonName
      } = _ref;
      if (options2 && !options2.stylingMode && this.option("visible")) {
        var buttonInstance = this.getButton(buttonName);
        buttonInstance.option && buttonInstance.option("stylingMode", "underlined" === editorStylingMode ? "text" : "contained");
      }
    });
  },
  _renderValue() {
    var renderInputPromise = this._renderInputValue();
    return renderInputPromise.promise();
  },
  _renderInputValue(value2) {
    value2 = null !== value2 && void 0 !== value2 ? value2 : this.option("value");
    var text = this.option("text");
    var displayValue = this.option("displayValue");
    var displayValueFormatter = this.option("displayValueFormatter");
    if (void 0 !== displayValue && null !== value2) {
      text = displayValueFormatter(displayValue);
    } else if (!isDefined(text)) {
      text = displayValueFormatter(value2);
    }
    this.option("text", text);
    if (this._input().val() !== (isDefined(text) ? text : "")) {
      this._renderDisplayText(text);
    } else {
      this._toggleEmptinessEventHandler();
    }
    return Deferred().resolve();
  },
  _renderDisplayText(text) {
    this._input().val(text);
    this._toggleEmptinessEventHandler();
  },
  _isValueValid() {
    if (this._input().length) {
      var {
        validity
      } = this._input().get(0);
      if (validity) {
        return validity.valid;
      }
    }
    return true;
  },
  _toggleEmptiness(isEmpty3) {
    this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty3);
    this._togglePlaceholder(isEmpty3);
  },
  _togglePlaceholder(isEmpty3) {
    this.$element().find(".".concat(TEXTEDITOR_PLACEHOLDER_CLASS)).eq(0).toggleClass(STATE_INVISIBLE_CLASS2, !isEmpty3);
  },
  _renderProps() {
    this._toggleReadOnlyState();
    this._toggleSpellcheckState();
    this._toggleTabIndex();
  },
  _toggleDisabledState(value2) {
    this.callBase.apply(this, arguments);
    var $input = this._input();
    $input.prop("disabled", value2);
  },
  _toggleTabIndex() {
    var $input = this._input();
    var disabled = this.option("disabled");
    var focusStateEnabled = this.option("focusStateEnabled");
    if (disabled || !focusStateEnabled) {
      $input.attr("tabIndex", -1);
    } else {
      $input.removeAttr("tabIndex");
    }
  },
  _toggleReadOnlyState() {
    this._input().prop("readOnly", this._readOnlyPropValue());
    this.callBase();
  },
  _readOnlyPropValue() {
    return this.option("readOnly");
  },
  _toggleSpellcheckState() {
    this._input().prop("spellcheck", this.option("spellcheck"));
  },
  _unobserveLabelContainerResize() {
    if (this._labelContainerElement) {
      resize_observer_default.unobserve(this._labelContainerElement);
      this._labelContainerElement = null;
    }
  },
  _getLabelContainer() {
    return this._input();
  },
  _getLabelContainerWidth() {
    return getWidth(this._getLabelContainer());
  },
  _getLabelBeforeWidth() {
    var buttonsBeforeWidth = this._$beforeButtonsContainer && getWidth(this._$beforeButtonsContainer);
    return null !== buttonsBeforeWidth && void 0 !== buttonsBeforeWidth ? buttonsBeforeWidth : 0;
  },
  _updateLabelWidth() {
    this._label.updateBeforeWidth(this._getLabelBeforeWidth());
    this._label.updateMaxWidth(this._getLabelContainerWidth());
  },
  _getFieldElement() {
    return this._getLabelContainer();
  },
  _setFieldAria(force) {
    var _a;
    var inputAttr = this.option("inputAttr");
    var ariaLabel = null === inputAttr || void 0 === inputAttr ? void 0 : inputAttr["aria-label"];
    var labelId = null === (_a = this._label) || void 0 === _a ? void 0 : _a.getId();
    var value2 = ariaLabel ? void 0 : labelId;
    if (value2 || force) {
      var aria = {
        labelledby: value2,
        label: ariaLabel
      };
      this.setAria(aria, this._getFieldElement());
    }
  },
  _renderLabel() {
    this._unobserveLabelContainerResize();
    this._labelContainerElement = renderer_default(this._getLabelContainer()).get(0);
    var {
      label,
      labelMode,
      labelMark,
      rtlEnabled
    } = this.option();
    var labelConfig = {
      onClickHandler: () => {
        this.focus();
      },
      onHoverHandler: (e) => {
        e.stopPropagation();
      },
      onActiveHandler: (e) => {
        e.stopPropagation();
      },
      $editor: this.$element(),
      text: label,
      mark: labelMark,
      mode: labelMode,
      rtlEnabled,
      containsButtonsBefore: !!this._$beforeButtonsContainer,
      getContainerWidth: () => this._getLabelContainerWidth(),
      getBeforeWidth: () => this._getLabelBeforeWidth()
    };
    this._label = new TextEditorLabelCreator(labelConfig);
    this._setFieldAria();
    if (this._labelContainerElement) {
      resize_observer_default.observe(this._labelContainerElement, this._updateLabelWidth.bind(this));
    }
  },
  _renderPlaceholder() {
    this._renderPlaceholderMarkup();
    this._attachPlaceholderEvents();
  },
  _renderPlaceholderMarkup() {
    if (this._$placeholder) {
      this._$placeholder.remove();
      this._$placeholder = null;
    }
    var $input = this._input();
    var placeholder = this.option("placeholder");
    var placeholderAttributes = {
      id: placeholder ? "dx-".concat(new guid_default()) : void 0,
      "data-dx_placeholder": placeholder
    };
    var $placeholder = this._$placeholder = renderer_default("<div>").attr(placeholderAttributes);
    $placeholder.insertAfter($input);
    $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS);
  },
  _attachPlaceholderEvents() {
    var startEvent = addNamespace(pointer_default.up, this.NAME);
    events_engine_default.on(this._$placeholder, startEvent, () => {
      events_engine_default.trigger(this._input(), "focus");
    });
    this._toggleEmptinessEventHandler();
  },
  _placeholder() {
    return this._$placeholder || renderer_default();
  },
  _clearValueHandler(e) {
    var $input = this._input();
    e.stopPropagation();
    this._saveValueChangeEvent(e);
    this._clearValue();
    !this._isFocused() && events_engine_default.trigger($input, "focus");
    events_engine_default.trigger($input, "input");
  },
  _clearValue() {
    this.clear();
  },
  _renderEvents() {
    var $input = this._input();
    each(EVENTS_LIST, (_, event) => {
      if (this.hasActionSubscription("on".concat(event))) {
        var action = this._createActionByOption("on".concat(event), {
          excludeValidators: ["readOnly"]
        });
        events_engine_default.on($input, addNamespace(event.toLowerCase(), this.NAME), (e) => {
          if (this._disposed) {
            return;
          }
          action({
            event: e
          });
        });
      }
    });
  },
  _refreshEvents() {
    var $input = this._input();
    each(EVENTS_LIST, (_, event) => {
      events_engine_default.off($input, addNamespace(event.toLowerCase(), this.NAME));
    });
    this._renderEvents();
  },
  _keyPressHandler() {
    this.option("text", this._input().val());
  },
  _keyDownHandler(e) {
    var $input = this._input();
    var isCtrlEnter = e.ctrlKey && "enter" === normalizeKeyName(e);
    var isNewValue = $input.val() !== this.option("value");
    if (isCtrlEnter && isNewValue) {
      events_engine_default.trigger($input, "change");
    }
  },
  _getValueChangeEventOptionName: () => "valueChangeEvent",
  _renderValueChangeEvent() {
    var keyPressEvent = addNamespace(this._renderValueEventName(), "".concat(this.NAME, "TextChange"));
    var valueChangeEvent = addNamespace(this.option(this._getValueChangeEventOptionName()), "".concat(this.NAME, "ValueChange"));
    var keyDownEvent = addNamespace("keydown", "".concat(this.NAME, "TextChange"));
    var $input = this._input();
    events_engine_default.on($input, keyPressEvent, this._keyPressHandler.bind(this));
    events_engine_default.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));
    events_engine_default.on($input, keyDownEvent, this._keyDownHandler.bind(this));
  },
  _cleanValueChangeEvent() {
    var valueChangeNamespace = ".".concat(this.NAME, "ValueChange");
    var textChangeNamespace = ".".concat(this.NAME, "TextChange");
    events_engine_default.off(this._input(), valueChangeNamespace);
    events_engine_default.off(this._input(), textChangeNamespace);
  },
  _refreshValueChangeEvent() {
    this._cleanValueChangeEvent();
    this._renderValueChangeEvent();
  },
  _renderValueEventName: () => "input change keypress",
  _focusTarget() {
    return this._input();
  },
  _focusEventTarget() {
    return this.element();
  },
  _isInput(element) {
    return element === this._input().get(0);
  },
  _preventNestedFocusEvent(event) {
    if (event.isDefaultPrevented()) {
      return true;
    }
    var shouldPrevent = this._isNestedTarget(event.relatedTarget);
    if ("focusin" === event.type) {
      shouldPrevent = shouldPrevent && this._isNestedTarget(event.target) && !this._isInput(event.target);
    } else if (!shouldPrevent) {
      this._toggleFocusClass(false, this.$element());
    }
    shouldPrevent && event.preventDefault();
    return shouldPrevent;
  },
  _isNestedTarget(target) {
    return !!this.$element().find(target).length;
  },
  _focusClassTarget() {
    return this.$element();
  },
  _focusInHandler(event) {
    this._preventNestedFocusEvent(event);
    this.callBase.apply(this, arguments);
  },
  _focusOutHandler(event) {
    this._preventNestedFocusEvent(event);
    this.callBase.apply(this, arguments);
  },
  _toggleFocusClass(isFocused, $element) {
    this.callBase(isFocused, this._focusClassTarget($element));
  },
  _hasFocusClass(element) {
    return this.callBase(renderer_default(element || this.$element()));
  },
  _renderEmptinessEvent() {
    var $input = this._input();
    events_engine_default.on($input, "input blur", this._toggleEmptinessEventHandler.bind(this));
  },
  _toggleEmptinessEventHandler() {
    var text = this._input().val();
    var isEmpty3 = ("" === text || null === text) && this._isValueValid();
    this._toggleEmptiness(isEmpty3);
  },
  _valueChangeEventHandler(e, formattedValue) {
    if (this.option("readOnly")) {
      return;
    }
    this._saveValueChangeEvent(e);
    this.option("value", arguments.length > 1 ? formattedValue : this._input().val());
    this._saveValueChangeEvent(void 0);
  },
  _renderEnterKeyAction() {
    this._enterKeyAction = this._createActionByOption("onEnterKey", {
      excludeValidators: ["readOnly"]
    });
    events_engine_default.off(this._input(), "keyup.onEnterKey.dxTextEditor");
    events_engine_default.on(this._input(), "keyup.onEnterKey.dxTextEditor", this._enterKeyHandlerUp.bind(this));
  },
  _enterKeyHandlerUp(e) {
    if (this._disposed) {
      return;
    }
    if ("enter" === normalizeKeyName(e)) {
      this._enterKeyAction({
        event: e
      });
    }
  },
  _updateValue() {
    this._options.silent("text", null);
    this._renderValue();
  },
  _dispose() {
    this._enterKeyAction = void 0;
    this.callBase();
  },
  _getSubmitElement() {
    return this._input();
  },
  _hasActiveElement() {
    return this._input().is(dom_adapter_default.getActiveElement(this._input()[0]));
  },
  _optionChanged(args) {
    var {
      name: name2,
      fullName,
      value: value2
    } = args;
    var eventName = name2.replace("on", "");
    if (EVENTS_LIST.includes(eventName)) {
      this._refreshEvents();
      return;
    }
    switch (name2) {
      case "valueChangeEvent":
        this._refreshValueChangeEvent();
        this._refreshFocusEvent();
        this._refreshEvents();
        break;
      case "onValueChanged":
        this._createValueChangeAction();
        break;
      case "focusStateEnabled":
        this.callBase(args);
        this._toggleTabIndex();
        break;
      case "spellcheck":
        this._toggleSpellcheckState();
        break;
      case "mode":
        this._renderInputType();
        break;
      case "onEnterKey":
        this._renderEnterKeyAction();
        break;
      case "placeholder":
        this._renderPlaceholder();
        this._setFieldAria(true);
        this._input().attr({
          placeholder: this._getPlaceholderAttr()
        });
        break;
      case "label":
        this._label.updateText(value2);
        this._setFieldAria(true);
        break;
      case "labelMark":
        this._label.updateMark(value2);
        break;
      case "labelMode":
        this._label.updateMode(value2);
        this._setFieldAria();
        break;
      case "width":
        this.callBase(args);
        this._label.updateMaxWidth(this._getLabelContainerWidth());
        break;
      case "readOnly":
      case "disabled":
        this._updateButtons();
        this.callBase(args);
        break;
      case "showClearButton":
        this._updateButtons(["clear"]);
        break;
      case "text":
        break;
      case "value":
        this._updateValue();
        this.callBase(args);
        break;
      case "inputAttr":
        this._applyInputAttributes(this._input(), this.option(name2));
        break;
      case "stylingMode":
        this._renderStylingMode();
        this._updateLabelWidth();
        break;
      case "buttons":
        if (fullName === name2) {
          checkButtonsOptionType(value2);
        }
        this._cleanButtonContainers();
        this._renderButtonContainers();
        this._updateButtonsStyling(this.option("stylingMode"));
        this._updateLabelWidth();
        this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);
        break;
      case "visible":
        this.callBase(args);
        if (value2 && this.option("buttons")) {
          this._cleanButtonContainers();
          this._renderButtonContainers();
          this._updateButtonsStyling(this.option("stylingMode"));
        }
        break;
      case "displayValueFormatter":
        this._invalidate();
        break;
      case "showValidationMark":
        break;
      default:
        this.callBase(args);
    }
  },
  _renderInputType() {
    this._setInputType(this.option("mode"));
  },
  _setInputType(type2) {
    var input = this._input();
    if ("search" === type2) {
      type2 = "text";
    }
    try {
      input.prop("type", type2);
    } catch (e) {
      input.prop("type", "text");
    }
  },
  getButton(name2) {
    return this._buttonCollection.getButton(name2);
  },
  focus() {
    events_engine_default.trigger(this._input(), "focus");
  },
  clear() {
    if (this._showValidMark) {
      this._showValidMark = false;
      this._renderValidationState();
    }
    var defaultOptions3 = this._getDefaultOptions();
    if (this.option("value") === defaultOptions3.value) {
      this._options.silent("text", "");
      this._renderValue();
    } else {
      this.option("value", defaultOptions3.value);
    }
  },
  _resetToInitialValue() {
    if (this.option("value") === this._initialValue) {
      this._options.silent("text", this._initialValue);
      this._renderValue();
    } else {
      this.callBase();
    }
    this._disposePendingIndicator();
    this._showValidMark = false;
    this._toggleValidMark();
  },
  _toggleValidMark() {
    this.$element().toggleClass(TEXTEDITOR_VALID_CLASS, !!this._showValidMark);
  },
  reset() {
    var value2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0;
    if (arguments.length) {
      this.callBase(value2);
    } else {
      this.callBase();
    }
  },
  on(eventName, eventHandler) {
    var result2 = this.callBase(eventName, eventHandler);
    var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);
    if (EVENTS_LIST.includes(event)) {
      this._refreshEvents();
    }
    return result2;
  }
});
var m_text_editor_base_default = TextEditorBase;

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.mask.rule.js
var EMPTY_CHAR = " ";
var BaseMaskRule = class {
  constructor(config2) {
    this._value = EMPTY_CHAR;
    extend(this, config2);
  }
  next(rule) {
    if (!arguments.length) {
      return this._next;
    }
    this._next = rule;
  }
  _prepareHandlingArgs(args, config2) {
    var _a, _b, _c;
    config2 = config2 || {};
    var handlingProperty = Object.prototype.hasOwnProperty.call(args, "value") ? "value" : "text";
    args[handlingProperty] = null !== (_a = config2.str) && void 0 !== _a ? _a : args[handlingProperty];
    args.start = null !== (_b = config2.start) && void 0 !== _b ? _b : args.start;
    args.length = null !== (_c = config2.length) && void 0 !== _c ? _c : args.length;
    args.index += 1;
    return args;
  }
  first(index) {
    index = index || 0;
    return this.next().first(index + 1);
  }
  isAccepted(caret3) {
    return false;
  }
  adjustedCaret(caret3, isForwardDirection, char) {
    return isForwardDirection ? this._adjustedForward(caret3, 0, char) : this._adjustedBackward(caret3, 0, char);
  }
  _adjustedForward(caret3, index, char) {
  }
  _adjustedBackward(caret3, index, char) {
  }
  isValid(args) {
  }
  reset() {
  }
  clear(args) {
  }
  text() {
  }
  value() {
  }
  rawValue() {
  }
  handle(args) {
  }
};
var EmptyMaskRule = class extends BaseMaskRule {
  next() {
  }
  handle() {
    return 0;
  }
  text() {
    return "";
  }
  value() {
    return "";
  }
  first() {
    return 0;
  }
  rawValue() {
    return "";
  }
  adjustedCaret() {
    return 0;
  }
  isValid() {
    return true;
  }
};
var MaskRule = class extends BaseMaskRule {
  text() {
    return (this._value !== EMPTY_CHAR ? this._value : this.maskChar) + this.next().text();
  }
  value() {
    return this._value + this.next().value();
  }
  rawValue() {
    return this._value + this.next().rawValue();
  }
  handle(args) {
    var str = Object.prototype.hasOwnProperty.call(args, "value") ? args.value : args.text;
    if (!str || !str.length || !args.length) {
      return 0;
    }
    if (args.start) {
      return this.next().handle(this._prepareHandlingArgs(args, {
        start: args.start - 1
      }));
    }
    var char = str[0];
    var rest = str.substring(1);
    this._tryAcceptChar(char, args);
    return this._accepted() ? this.next().handle(this._prepareHandlingArgs(args, {
      str: rest,
      length: args.length - 1
    })) + 1 : this.handle(this._prepareHandlingArgs(args, {
      str: rest,
      length: args.length - 1
    }));
  }
  clear(args) {
    this._tryAcceptChar(EMPTY_CHAR, args);
    this.next().clear(this._prepareHandlingArgs(args));
  }
  reset() {
    this._accepted(false);
    this.next().reset();
  }
  _tryAcceptChar(char, args) {
    this._accepted(false);
    if (!this._isAllowed(char, args)) {
      return;
    }
    var acceptedChar = char === EMPTY_CHAR ? this.maskChar : char;
    args.fullText = args.fullText.substring(0, args.index) + acceptedChar + args.fullText.substring(args.index + 1);
    this._accepted(true);
    this._value = char;
  }
  _accepted(value2) {
    if (!arguments.length) {
      return !!this._isAccepted;
    }
    this._isAccepted = !!value2;
  }
  first(index) {
    return this._value === EMPTY_CHAR ? index || 0 : super.first(index);
  }
  _isAllowed(char, args) {
    if (char === EMPTY_CHAR) {
      return true;
    }
    return this._isValid(char, args);
  }
  _isValid(char, args) {
    var {
      allowedChars
    } = this;
    if (allowedChars instanceof RegExp) {
      return allowedChars.test(char);
    }
    if (isFunction(allowedChars)) {
      return allowedChars(char, args.index, args.fullText);
    }
    if (Array.isArray(allowedChars)) {
      return allowedChars.includes(char);
    }
    return allowedChars === char;
  }
  isAccepted(caret3) {
    return 0 === caret3 ? this._accepted() : this.next().isAccepted(caret3 - 1);
  }
  _adjustedForward(caret3, index, char) {
    if (index >= caret3) {
      return index;
    }
    return this.next()._adjustedForward(caret3, index + 1, char) || index + 1;
  }
  _adjustedBackward(caret3, index) {
    if (index >= caret3 - 1) {
      return caret3;
    }
    return this.next()._adjustedBackward(caret3, index + 1) || index + 1;
  }
  isValid(args) {
    return this._isValid(this._value, args) && this.next().isValid(this._prepareHandlingArgs(args));
  }
};
var StubMaskRule = class extends MaskRule {
  value() {
    return this.next().value();
  }
  handle(args) {
    var hasValueProperty = Object.prototype.hasOwnProperty.call(args, "value");
    var str = hasValueProperty ? args.value : args.text;
    if (!str.length || !args.length) {
      return 0;
    }
    if (args.start || hasValueProperty) {
      return this.next().handle(this._prepareHandlingArgs(args, {
        start: args.start && args.start - 1
      }));
    }
    var char = str[0];
    var rest = str.substring(1);
    this._tryAcceptChar(char);
    var nextArgs = this._isAllowed(char) ? this._prepareHandlingArgs(args, {
      str: rest,
      length: args.length - 1
    }) : args;
    return this.next().handle(nextArgs) + 1;
  }
  clear(args) {
    this._accepted(false);
    this.next().clear(this._prepareHandlingArgs(args));
  }
  _tryAcceptChar(char) {
    this._accepted(this._isValid(char));
  }
  _isValid(char) {
    return char === this.maskChar;
  }
  first(index) {
    index = index || 0;
    return this.next().first(index + 1);
  }
  _adjustedForward(caret3, index, char) {
    if (index >= caret3 && char === this.maskChar) {
      return index;
    }
    if (caret3 === index + 1 && this._accepted()) {
      return caret3;
    }
    return this.next()._adjustedForward(caret3, index + 1, char);
  }
  _adjustedBackward(caret3, index) {
    if (index >= caret3 - 1) {
      return 0;
    }
    return this.next()._adjustedBackward(caret3, index + 1);
  }
  isValid(args) {
    return this.next().isValid(this._prepareHandlingArgs(args));
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.mask.strategy.js
var MASK_EVENT_NAMESPACE = "dxMask";
var BLUR_EVENT = "blur beforedeactivate";
var EMPTY_CHAR2 = " ";
var DELETE_INPUT_TYPES = ["deleteContentBackward", "deleteSoftLineBackward", "deleteContent", "deleteHardLineBackward"];
var HISTORY_INPUT_TYPES = ["historyUndo", "historyRedo"];
var EVENT_NAMES = ["focusIn", "focusOut", "input", "paste", "cut", "drop", "beforeInput"];
function getEmptyString(length) {
  return EMPTY_CHAR2.repeat(length);
}
var MaskStrategy = class {
  constructor(editor) {
    this.editor = editor;
  }
  _editorOption() {
    return this.editor.option(...arguments);
  }
  _editorInput() {
    return this.editor._input();
  }
  _editorCaret(newCaret) {
    if (!newCaret) {
      return this.editor._caret();
    }
    this.editor._caret(newCaret);
  }
  _attachChangeEventHandler() {
    if (!this._editorOption("valueChangeEvent").split(" ").includes("change")) {
      return;
    }
    var $input = this._editorInput();
    var namespace = addNamespace(BLUR_EVENT, MASK_EVENT_NAMESPACE);
    events_engine_default.on($input, namespace, (e) => {
      this.editor._changeHandler(e);
    });
  }
  _beforeInputHandler() {
    this._previousText = this._editorOption("text");
    this._prevCaret = this._editorCaret();
  }
  _inputHandler(event) {
    var {
      originalEvent
    } = event;
    if (!originalEvent) {
      return;
    }
    var {
      inputType: inputType2
    } = originalEvent;
    if (HISTORY_INPUT_TYPES.includes(inputType2)) {
      this._handleHistoryInputEvent();
    } else if (DELETE_INPUT_TYPES.includes(inputType2)) {
      this._handleBackwardDeleteInputEvent();
    } else {
      var currentCaret = this._editorCaret();
      if (!currentCaret.end) {
        return;
      }
      this._clearSelectedText();
      this._autoFillHandler(originalEvent);
      this._editorCaret(currentCaret);
      this._handleInsertTextInputEvent(originalEvent.data);
    }
    if (this._editorOption("text") === this._previousText) {
      event.stopImmediatePropagation();
    }
  }
  _handleHistoryInputEvent() {
    var caret3 = this._editorCaret();
    this._updateEditorMask({
      start: caret3.start,
      length: caret3.end - caret3.start,
      text: ""
    });
    this._editorCaret(this._prevCaret);
  }
  _handleBackwardDeleteInputEvent() {
    this._clearSelectedText(true);
    var caret3 = this._editorCaret();
    this.editor.setForwardDirection();
    this.editor._adjustCaret();
    var adjustedForwardCaret = this._editorCaret();
    if (adjustedForwardCaret.start !== caret3.start) {
      this.editor.setBackwardDirection();
      this.editor._adjustCaret();
    }
  }
  _clearSelectedText(isDeleteInputEvent) {
    var selectionLength = this._prevCaret && this._prevCaret.end - this._prevCaret.start;
    var length = selectionLength || Number(isDeleteInputEvent);
    var caret3 = this._editorCaret();
    if (!this._isAutoFill()) {
      this.editor.setBackwardDirection();
      this._updateEditorMask({
        start: caret3.start,
        length,
        text: getEmptyString(length)
      });
    }
  }
  _handleInsertTextInputEvent(data17) {
    var _a, _b;
    var text = null !== data17 && void 0 !== data17 ? data17 : "";
    this.editor.setForwardDirection();
    var hasValidChars = this._updateEditorMask({
      start: null !== (_b = null === (_a = this._prevCaret) || void 0 === _a ? void 0 : _a.start) && void 0 !== _b ? _b : 0,
      length: text.length || 1,
      text
    });
    if (!hasValidChars) {
      this._editorCaret(this._prevCaret);
    }
  }
  _updateEditorMask(args) {
    var textLength = args.text.length;
    var processedCharsCount = this.editor._handleChain(args);
    this.editor._displayMask();
    if (this.editor.isForwardDirection()) {
      var {
        start,
        end
      } = this._editorCaret();
      var correction = processedCharsCount - textLength;
      var hasSkippedStub = processedCharsCount > 1;
      if (hasSkippedStub && 1 === textLength) {
        this._editorCaret({
          start: start + correction,
          end: end + correction
        });
      }
      this.editor._adjustCaret();
    }
    return !!processedCharsCount;
  }
  _focusInHandler() {
    this.editor._showMaskPlaceholder();
    this.editor.setForwardDirection();
    if (!this.editor._isValueEmpty() && this._editorOption("isValid")) {
      this.editor._adjustCaret();
    } else {
      var caret3 = this.editor._maskRulesChain.first();
      this._caretTimeout = setTimeout(() => {
        this._editorCaret({
          start: caret3,
          end: caret3
        });
      }, 0);
    }
  }
  _focusOutHandler(event) {
    this.editor._changeHandler(event);
    if ("onFocus" === this._editorOption("showMaskMode") && this.editor._isValueEmpty()) {
      this._editorOption("text", "");
      this.editor._renderDisplayText("");
    }
  }
  _delHandler(event) {
    var {
      editor
    } = this;
    editor._maskKeyHandler(event, () => {
      if (!editor._hasSelection()) {
        editor._handleKey(EMPTY_CHAR2);
      }
    });
  }
  _cutHandler(event) {
    var caret3 = this._editorCaret();
    var selectedText = this._editorInput().val().substring(caret3.start, caret3.end);
    this.editor._maskKeyHandler(event, () => clipboardText(event, selectedText));
  }
  _dropHandler() {
    this._clearDragTimer();
    this._dragTimer = setTimeout(() => {
      var value2 = this.editor._convertToValue(this._editorInput().val());
      this._editorOption("value", value2);
    });
  }
  _pasteHandler(event) {
    var {
      editor
    } = this;
    if (this._editorOption("disabled")) {
      return;
    }
    var caret3 = this._editorCaret();
    editor._maskKeyHandler(event, () => {
      var pastedText = clipboardText(event);
      var restText = editor._maskRulesChain.text().substring(caret3.end);
      var accepted = editor._handleChain({
        text: pastedText,
        start: caret3.start,
        length: pastedText.length
      });
      var newCaret = caret3.start + accepted;
      editor._handleChain({
        text: restText,
        start: newCaret,
        length: restText.length
      });
      editor._caret({
        start: newCaret,
        end: newCaret
      });
    });
  }
  _autoFillHandler(event) {
    var {
      editor
    } = this;
    var inputVal = this._editorInput().val();
    this._inputHandlerTimer = setTimeout(() => {
      if (this._isAutoFill()) {
        editor._maskKeyHandler(event, () => {
          editor._handleChain({
            text: inputVal,
            start: 0,
            length: inputVal.length
          });
        });
        editor._validateMask();
      }
    });
  }
  _isAutoFill() {
    var _a;
    var $input = this._editorInput();
    if (browser_default.webkit) {
      var input = $input.get(0);
      return null !== (_a = null === input || void 0 === input ? void 0 : input.matches(":-webkit-autofill")) && void 0 !== _a ? _a : false;
    }
    return false;
  }
  _clearDragTimer() {
    clearTimeout(this._dragTimer);
  }
  _clearTimers() {
    this._clearDragTimer();
    clearTimeout(this._caretTimeout);
    clearTimeout(this._inputHandlerTimer);
  }
  getHandler(handlerName) {
    return (args) => {
      var _a;
      null === (_a = this["_".concat(handlerName, "Handler")]) || void 0 === _a ? void 0 : _a.call(this, args);
    };
  }
  attachEvents() {
    var $input = this._editorInput();
    EVENT_NAMES.forEach((eventName) => {
      var namespace = addNamespace(eventName.toLowerCase(), MASK_EVENT_NAMESPACE);
      events_engine_default.on($input, namespace, this.getHandler(eventName));
    });
    this._attachChangeEventHandler();
  }
  detachEvents() {
    this._clearTimers();
    events_engine_default.off(this._editorInput(), ".".concat(MASK_EVENT_NAMESPACE));
  }
  clean() {
    this._clearTimers();
  }
};

// node_modules/devextreme/esm/__internal/ui/text_box/m_utils.caret.js
var {
  ios,
  mac
} = devices_default.real();
var isFocusingOnCaretChange = ios || mac;
var getCaret = function(input) {
  var range;
  try {
    range = {
      start: input.selectionStart,
      end: input.selectionEnd
    };
  } catch (e) {
    range = {
      start: 0,
      end: 0
    };
  }
  return range;
};
var setCaret = function(input, position2) {
  var body = dom_adapter_default.getBody();
  if (!body.contains(input) && !body.contains(input.getRootNode().host)) {
    return;
  }
  try {
    input.selectionStart = position2.start;
    input.selectionEnd = position2.end;
  } catch (e) {
  }
};
var caret = function(input, position2) {
  var force = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;
  input = renderer_default(input).get(0);
  if (!isDefined(position2)) {
    return getCaret(input);
  }
  if (!force && isFocusingOnCaretChange && dom_adapter_default.getActiveElement(input) !== input) {
    return;
  }
  setCaret(input, position2);
};
var m_utils_caret_default = caret;

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.mask.js
var caret2 = m_utils_caret_default;
var EMPTY_CHAR3 = " ";
var ESCAPED_CHAR = "\\";
var TEXTEDITOR_MASKED_CLASS = "dx-texteditor-masked";
var FORWARD_DIRECTION = "forward";
var BACKWARD_DIRECTION = "backward";
var DROP_EVENT_NAME = "drop";
var buildInMaskRules = {
  0: /[0-9]/,
  9: /[0-9\s]/,
  "#": /[-+0-9\s]/,
  L: (char) => isLiteralChar(char),
  l: (char) => isLiteralChar(char) || isSpaceChar(char),
  C: /\S/,
  c: /./,
  A: (char) => isLiteralChar(char) || isNumericChar(char),
  a: (char) => isLiteralChar(char) || isNumericChar(char) || isSpaceChar(char)
};
function isNumericChar(char) {
  return /[0-9]/.test(char);
}
function isLiteralChar(char) {
  var code = char.charCodeAt();
  return code > 64 && code < 91 || code > 96 && code < 123 || code > 127;
}
function isSpaceChar(char) {
  return " " === char;
}
var TextEditorMask = m_text_editor_base_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      mask: "",
      maskChar: "_",
      maskRules: {},
      maskInvalidMessage: message_default.format("validation-mask"),
      useMaskedValue: false,
      showMaskMode: "always"
    });
  },
  _supportedKeys() {
    var that = this;
    var keyHandlerMap = {
      del: that._maskStrategy.getHandler("del"),
      enter: that._changeHandler
    };
    var result2 = that.callBase();
    each(keyHandlerMap, (key, callback) => {
      var parentHandler = result2[key];
      result2[key] = function(e) {
        that.option("mask") && callback.call(that, e);
        parentHandler && parentHandler(e);
      };
    });
    return result2;
  },
  _getSubmitElement() {
    return !this.option("mask") ? this.callBase() : this._$hiddenElement;
  },
  _init() {
    this.callBase();
    this._initMaskStrategy();
  },
  _initMaskStrategy() {
    this._maskStrategy = new MaskStrategy(this);
  },
  _initMarkup() {
    this._renderHiddenElement();
    this.callBase();
  },
  _attachMouseWheelEventHandlers() {
    var hasMouseWheelHandler = this._onMouseWheel !== noop;
    if (!hasMouseWheelHandler) {
      return;
    }
    var input = this._input();
    var eventName = addNamespace(EVENT_NAME, this.NAME);
    var mouseWheelAction = this._createAction((e) => {
      var {
        event
      } = e;
      if (focused(input) && !isCommandKeyPressed(event)) {
        this._onMouseWheel(event);
        event.preventDefault();
        event.stopPropagation();
      }
    });
    events_engine_default.off(input, eventName);
    events_engine_default.on(input, eventName, (e) => {
      mouseWheelAction({
        event: e
      });
    });
  },
  _onMouseWheel: noop,
  _useMaskBehavior() {
    return Boolean(this.option("mask"));
  },
  _attachDropEventHandler() {
    var useMaskBehavior = this._useMaskBehavior();
    if (!useMaskBehavior) {
      return;
    }
    var eventName = addNamespace(DROP_EVENT_NAME, this.NAME);
    var input = this._input();
    events_engine_default.off(input, eventName);
    events_engine_default.on(input, eventName, (e) => e.preventDefault());
  },
  _render() {
    this._attachMouseWheelEventHandlers();
    this._renderMask();
    this.callBase();
    this._attachDropEventHandler();
  },
  _renderHiddenElement() {
    if (this.option("mask")) {
      this._$hiddenElement = renderer_default("<input>").attr("type", "hidden").appendTo(this._inputWrapper());
    }
  },
  _removeHiddenElement() {
    this._$hiddenElement && this._$hiddenElement.remove();
  },
  _renderMask() {
    this.$element().removeClass(TEXTEDITOR_MASKED_CLASS);
    this._maskRulesChain = null;
    this._maskStrategy.detachEvents();
    if (!this.option("mask")) {
      return;
    }
    this.$element().addClass(TEXTEDITOR_MASKED_CLASS);
    this._maskStrategy.attachEvents();
    this._parseMask();
    this._renderMaskedValue();
  },
  _changeHandler(e) {
    var $input = this._input();
    var inputValue = $input.val();
    if (inputValue === this._changedValue) {
      return;
    }
    this._changedValue = inputValue;
    var changeEvent = createEvent(e, {
      type: "change"
    });
    events_engine_default.trigger($input, changeEvent);
  },
  _parseMask() {
    this._maskRules = extend({}, buildInMaskRules, this.option("maskRules"));
    this._maskRulesChain = this._parseMaskRule(0);
  },
  _parseMaskRule(index) {
    var mask = this.option("mask");
    if (index >= mask.length) {
      return new EmptyMaskRule();
    }
    var currentMaskChar = mask[index];
    var isEscapedChar = currentMaskChar === ESCAPED_CHAR;
    var result2 = isEscapedChar ? new StubMaskRule({
      maskChar: mask[index + 1]
    }) : this._getMaskRule(currentMaskChar);
    result2.next(this._parseMaskRule(index + 1 + isEscapedChar));
    return result2;
  },
  _getMaskRule(pattern) {
    var ruleConfig;
    each(this._maskRules, (rulePattern, allowedChars) => {
      if (rulePattern === pattern) {
        ruleConfig = {
          pattern: rulePattern,
          allowedChars
        };
        return false;
      }
    });
    return isDefined(ruleConfig) ? new MaskRule(extend({
      maskChar: this.option("maskChar") || " "
    }, ruleConfig)) : new StubMaskRule({
      maskChar: pattern
    });
  },
  _renderMaskedValue() {
    if (!this._maskRulesChain) {
      return;
    }
    var value2 = this.option("value") || "";
    this._maskRulesChain.clear(this._normalizeChainArguments());
    var chainArgs = {
      length: value2.length
    };
    chainArgs[this._isMaskedValueMode() ? "text" : "value"] = value2;
    this._handleChain(chainArgs);
    this._displayMask();
  },
  _replaceSelectedText(text, selection2, char) {
    if (void 0 === char) {
      return text;
    }
    var textBefore = text.slice(0, selection2.start);
    var textAfter = text.slice(selection2.end);
    var edited = textBefore + char + textAfter;
    return edited;
  },
  _isMaskedValueMode() {
    return this.option("useMaskedValue");
  },
  _displayMask(caret3) {
    caret3 = caret3 || this._caret();
    this._renderValue();
    this._caret(caret3);
  },
  _isValueEmpty() {
    return isEmpty(this._value);
  },
  _shouldShowMask() {
    var showMaskMode = this.option("showMaskMode");
    if ("onFocus" === showMaskMode) {
      return focused(this._input()) || !this._isValueEmpty();
    }
    return true;
  },
  _showMaskPlaceholder() {
    if (this._shouldShowMask()) {
      var text = this._maskRulesChain.text();
      this.option("text", text);
      if ("onFocus" === this.option("showMaskMode")) {
        this._renderDisplayText(text);
      }
    }
  },
  _renderValue() {
    if (this._maskRulesChain) {
      this._showMaskPlaceholder();
      if (this._$hiddenElement) {
        var value2 = this._maskRulesChain.value();
        var submitElementValue = !isEmpty(value2) ? this._getPreparedValue() : "";
        this._$hiddenElement.val(submitElementValue);
      }
    }
    return this.callBase();
  },
  _getPreparedValue() {
    return this._convertToValue().replace(/\s+$/, "");
  },
  _valueChangeEventHandler(e) {
    if (!this._maskRulesChain) {
      this.callBase.apply(this, arguments);
      return;
    }
    this._saveValueChangeEvent(e);
    this.option("value", this._getPreparedValue());
  },
  _isControlKeyFired(e) {
    return this._isControlKey(normalizeKeyName(e)) || isCommandKeyPressed(e);
  },
  _handleChain(args) {
    var handledCount = this._maskRulesChain.handle(this._normalizeChainArguments(args));
    this._updateMaskInfo();
    return handledCount;
  },
  _normalizeChainArguments(args) {
    args = args || {};
    args.index = 0;
    args.fullText = this._maskRulesChain.text();
    return args;
  },
  _convertToValue(text) {
    if (this._isMaskedValueMode()) {
      text = this._replaceMaskCharWithEmpty(text || this._textValue || "");
    } else {
      text = text || this._value || "";
    }
    return text;
  },
  _replaceMaskCharWithEmpty(text) {
    return text.replace(new RegExp(this.option("maskChar"), "g"), EMPTY_CHAR3);
  },
  _maskKeyHandler(e, keyHandler) {
    if (this.option("readOnly")) {
      return;
    }
    this.setForwardDirection();
    e.preventDefault();
    this._handleSelection();
    var previousText = this._input().val();
    var raiseInputEvent = () => {
      if (previousText !== this._input().val()) {
        events_engine_default.trigger(this._input(), "input");
      }
    };
    var handled = keyHandler();
    if (handled) {
      handled.then(raiseInputEvent);
    } else {
      this.setForwardDirection();
      this._adjustCaret();
      this._displayMask();
      this._maskRulesChain.reset();
      raiseInputEvent();
    }
  },
  _handleKey(key, direction) {
    this._direction(direction || FORWARD_DIRECTION);
    this._adjustCaret(key);
    this._handleKeyChain(key);
    this._moveCaret();
  },
  _handleSelection() {
    if (!this._hasSelection()) {
      return;
    }
    var caret3 = this._caret();
    var emptyChars = new Array(caret3.end - caret3.start + 1).join(EMPTY_CHAR3);
    this._handleKeyChain(emptyChars);
  },
  _handleKeyChain(chars) {
    var caret3 = this._caret();
    var start = this.isForwardDirection() ? caret3.start : caret3.start - 1;
    var end = this.isForwardDirection() ? caret3.end : caret3.end - 1;
    var length = start === end ? 1 : end - start;
    this._handleChain({
      text: chars,
      start,
      length
    });
  },
  _tryMoveCaretBackward() {
    this.setBackwardDirection();
    var currentCaret = this._caret().start;
    this._adjustCaret();
    return !currentCaret || currentCaret !== this._caret().start;
  },
  _adjustCaret(char) {
    var caretStart = this._caret().start;
    var isForwardDirection = this.isForwardDirection();
    var caret3 = this._maskRulesChain.adjustedCaret(caretStart, isForwardDirection, char);
    this._caret({
      start: caret3,
      end: caret3
    });
  },
  _moveCaret() {
    var currentCaret = this._caret().start;
    var maskRuleIndex = currentCaret + (this.isForwardDirection() ? 0 : -1);
    var caret3 = this._maskRulesChain.isAccepted(maskRuleIndex) ? currentCaret + (this.isForwardDirection() ? 1 : -1) : currentCaret;
    this._caret({
      start: caret3,
      end: caret3
    });
  },
  _caret(position2, force) {
    var $input = this._input();
    if (!$input.length) {
      return;
    }
    if (!arguments.length) {
      return caret2($input);
    }
    caret2($input, position2, force);
  },
  _hasSelection() {
    var caret3 = this._caret();
    return caret3.start !== caret3.end;
  },
  _direction(direction) {
    if (!arguments.length) {
      return this._typingDirection;
    }
    this._typingDirection = direction;
  },
  setForwardDirection() {
    this._direction(FORWARD_DIRECTION);
  },
  setBackwardDirection() {
    this._direction(BACKWARD_DIRECTION);
  },
  isForwardDirection() {
    return this._direction() === FORWARD_DIRECTION;
  },
  _updateMaskInfo() {
    this._textValue = this._maskRulesChain.text();
    this._value = this._maskRulesChain.value();
  },
  _clean() {
    this._maskStrategy && this._maskStrategy.clean();
    this.callBase();
  },
  _validateMask() {
    if (!this._maskRulesChain) {
      return;
    }
    var isValid = isEmpty(this.option("value")) || this._maskRulesChain.isValid(this._normalizeChainArguments());
    this.option({
      isValid,
      validationError: isValid ? null : {
        editorSpecific: true,
        message: this.option("maskInvalidMessage")
      }
    });
  },
  _updateHiddenElement() {
    this._removeHiddenElement();
    if (this.option("mask")) {
      this._input().removeAttr("name");
      this._renderHiddenElement();
    }
    this._setSubmitElementName(this.option("name"));
  },
  _updateMaskOption() {
    this._updateHiddenElement();
    this._renderMask();
    this._validateMask();
    this._refreshValueChangeEvent();
  },
  _processEmptyMask(mask) {
    if (mask) {
      return;
    }
    var value2 = this.option("value");
    this.option({
      text: value2,
      isValid: true,
      validationError: null
    });
    this.validationRequest.fire({
      value: value2,
      editor: this
    });
    this._renderValue();
  },
  _optionChanged(args) {
    switch (args.name) {
      case "mask":
        this._updateMaskOption();
        this._processEmptyMask(args.value);
        break;
      case "maskChar":
      case "maskRules":
      case "useMaskedValue":
        this._updateMaskOption();
        break;
      case "value":
        this._renderMaskedValue();
        this._validateMask();
        this.callBase(args);
        this._changedValue = this._input().val();
        break;
      case "maskInvalidMessage":
        break;
      case "showMaskMode":
        this.option("text", "");
        this._renderValue();
        break;
      default:
        this.callBase(args);
    }
  },
  clear() {
    var {
      value: defaultValue
    } = this._getDefaultOptions();
    if (this.option("value") === defaultValue) {
      this._renderMaskedValue();
    }
    this.callBase();
  }
});
var m_text_editor_mask_default = TextEditorMask;

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_editor.js
component_registrator_default("dxTextEditor", m_text_editor_mask_default);
var m_text_editor_default = m_text_editor_mask_default;

// node_modules/devextreme/esm/__internal/ui/text_box/m_text_box.js
var window3 = getWindow();
var ignoreKeys = ["backspace", "tab", "enter", "pageUp", "pageDown", "end", "home", "leftArrow", "rightArrow", "downArrow", "upArrow", "del"];
var TEXTBOX_CLASS = "dx-textbox";
var SEARCHBOX_CLASS = "dx-searchbox";
var ICON_CLASS2 = "dx-icon";
var SEARCH_ICON_CLASS = "dx-icon-search";
var TextBox = m_text_editor_default.inherit({
  ctor(element, options2) {
    if (options2) {
      this._showClearButton = options2.showClearButton;
    }
    this.callBase.apply(this, arguments);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      value: "",
      mode: "text",
      maxLength: null
    });
  },
  _initMarkup() {
    this.$element().addClass(TEXTBOX_CLASS);
    this.callBase();
    this.setAria("role", "textbox");
  },
  _renderInputType() {
    this.callBase();
    this._renderSearchMode();
  },
  _useTemplates: () => false,
  _renderProps() {
    this.callBase();
    this._toggleMaxLengthProp();
  },
  _toggleMaxLengthProp() {
    var maxLength = this._getMaxLength();
    if (maxLength && maxLength > 0) {
      this._input().attr("maxLength", maxLength);
    } else {
      this._input().removeAttr("maxLength");
    }
  },
  _renderSearchMode() {
    var $element = this._$element;
    if ("search" === this.option("mode")) {
      $element.addClass(SEARCHBOX_CLASS);
      this._renderSearchIcon();
      if (void 0 === this._showClearButton) {
        this._showClearButton = this.option("showClearButton");
        this.option("showClearButton", true);
      }
    } else {
      $element.removeClass(SEARCHBOX_CLASS);
      this._$searchIcon && this._$searchIcon.remove();
      this.option("showClearButton", void 0 === this._showClearButton ? this.option("showClearButton") : this._showClearButton);
      delete this._showClearButton;
    }
  },
  _renderSearchIcon() {
    var $searchIcon = renderer_default("<div>").addClass(ICON_CLASS2).addClass(SEARCH_ICON_CLASS);
    $searchIcon.prependTo(this._input().parent());
    this._$searchIcon = $searchIcon;
  },
  _getLabelContainerWidth() {
    if (this._$searchIcon) {
      var $inputContainer = this._input().parent();
      return getWidth($inputContainer) - this._getLabelBeforeWidth();
    }
    return this.callBase();
  },
  _getLabelBeforeWidth() {
    var labelBeforeWidth = this.callBase();
    if (this._$searchIcon) {
      labelBeforeWidth += getOuterWidth(this._$searchIcon);
    }
    return labelBeforeWidth;
  },
  _optionChanged(args) {
    switch (args.name) {
      case "maxLength":
        this._toggleMaxLengthProp();
        break;
      case "mode":
        this.callBase(args);
        this._updateLabelWidth();
        break;
      case "mask":
        this.callBase(args);
        this._toggleMaxLengthProp();
        break;
      default:
        this.callBase(args);
    }
  },
  _onKeyDownCutOffHandler(e) {
    var actualMaxLength = this._getMaxLength();
    if (actualMaxLength && !e.ctrlKey && !this._hasSelection()) {
      var $input = renderer_default(e.target);
      var key = normalizeKeyName(e);
      this._cutOffExtraChar($input);
      return $input.val().length < actualMaxLength || ignoreKeys.includes(key) || "" !== window3.getSelection().toString();
    }
    return true;
  },
  _onChangeCutOffHandler(e) {
    var $input = renderer_default(e.target);
    if (this.option("maxLength")) {
      this._cutOffExtraChar($input);
    }
  },
  _cutOffExtraChar($input) {
    var actualMaxLength = this._getMaxLength();
    var textInput = $input.val();
    if (actualMaxLength && textInput.length > actualMaxLength) {
      $input.val(textInput.substr(0, actualMaxLength));
    }
  },
  _getMaxLength() {
    var isMaskSpecified = !!this.option("mask");
    return isMaskSpecified ? null : this.option("maxLength");
  }
});
component_registrator_default("dxTextBox", TextBox);
var m_text_box_default = TextBox;

// node_modules/devextreme/esm/ui/text_box/text_box.js
var text_box_default = m_text_box_default;

// node_modules/devextreme/esm/ui/text_box.js
var text_box_default2 = text_box_default;

// node_modules/devextreme/esm/core/utils/stubs.js
function stubComponent(componentName) {
  return class {
    constructor() {
      throw new Error("Module '".concat(componentName, "' not found"));
    }
    static getInstance() {
    }
  };
}

// node_modules/devextreme/esm/ui/widget/ui.search_box_mixin.js
var EditorClass = stubComponent("TextBox");
var ui_search_box_mixin_default = {
  _getDefaultOptions: function() {
    return extend(this.callBase(), {
      searchMode: "",
      searchExpr: null,
      searchValue: "",
      searchEnabled: false,
      searchEditorOptions: {}
    });
  },
  _initMarkup: function() {
    this._renderSearch();
    this.callBase();
  },
  _renderSearch: function() {
    var $element = this.$element();
    var searchEnabled = this.option("searchEnabled");
    var searchBoxClassName = this._addWidgetPrefix("search");
    var rootElementClassName = this._addWidgetPrefix("with-search");
    if (!searchEnabled) {
      $element.removeClass(rootElementClassName);
      this._removeSearchBox();
      return;
    }
    var editorOptions = this._getSearchEditorOptions();
    if (this._searchEditor) {
      this._searchEditor.option(editorOptions);
    } else {
      $element.addClass(rootElementClassName);
      this._$searchEditorElement = renderer_default("<div>").addClass(searchBoxClassName).prependTo($element);
      this._searchEditor = this._createComponent(this._$searchEditorElement, EditorClass, editorOptions);
    }
  },
  _removeSearchBox: function() {
    this._$searchEditorElement && this._$searchEditorElement.remove();
    delete this._$searchEditorElement;
    delete this._searchEditor;
  },
  _getSearchEditorOptions: function() {
    var that = this;
    var userEditorOptions = that.option("searchEditorOptions");
    var searchText = message_default.format("Search");
    return extend({
      mode: "search",
      placeholder: searchText,
      tabIndex: that.option("tabIndex"),
      value: that.option("searchValue"),
      valueChangeEvent: "input",
      inputAttr: {
        "aria-label": searchText
      },
      onValueChanged: function(e) {
        var searchTimeout = that.option("searchTimeout");
        that._valueChangeDeferred = new Deferred();
        clearTimeout(that._valueChangeTimeout);
        that._valueChangeDeferred.done((function() {
          this.option("searchValue", e.value);
        }).bind(that));
        if (e.event && "input" === e.event.type && searchTimeout) {
          that._valueChangeTimeout = setTimeout(function() {
            that._valueChangeDeferred.resolve();
          }, searchTimeout);
        } else {
          that._valueChangeDeferred.resolve();
        }
      }
    }, userEditorOptions);
  },
  _getAriaTarget: function() {
    if (this.option("searchEnabled")) {
      return this._itemContainer(true);
    }
    return this.callBase();
  },
  _focusTarget: function() {
    if (this.option("searchEnabled")) {
      return this._itemContainer(true);
    }
    return this.callBase();
  },
  _updateFocusState: function(e, isFocused) {
    if (this.option("searchEnabled")) {
      this._toggleFocusClass(isFocused, this.$element());
    }
    this.callBase(e, isFocused);
  },
  getOperationBySearchMode: function(searchMode) {
    return "equals" === searchMode ? "=" : searchMode;
  },
  _optionChanged: function(args) {
    switch (args.name) {
      case "searchEnabled":
      case "searchEditorOptions":
        this._invalidate();
        break;
      case "searchExpr":
      case "searchMode":
      case "searchValue":
        if (!this._dataSource) {
          ui_errors_default.log("W1009");
          return;
        }
        if ("searchMode" === args.name) {
          this._dataSource.searchOperation(this.getOperationBySearchMode(args.value));
        } else {
          this._dataSource[args.name](args.value);
        }
        this._dataSource.load();
        break;
      case "searchTimeout":
        break;
      default:
        this.callBase(args);
    }
  },
  focus: function() {
    if (!this.option("focusedElement") && this.option("searchEnabled")) {
      this._searchEditor && this._searchEditor.focus();
      return;
    }
    this.callBase();
  },
  _cleanAria: function() {
    var $element = this.$element();
    this.setAria({
      role: null,
      activedescendant: null
    }, $element);
    $element.attr("tabIndex", null);
  },
  _clean() {
    this.callBase();
    this._cleanAria();
  },
  _refresh: function() {
    if (this._valueChangeDeferred) {
      this._valueChangeDeferred.resolve();
    }
    this.callBase();
  },
  setEditorClass: function(value2) {
    EditorClass = value2;
  }
};

// node_modules/devextreme/esm/__internal/ui/hierarchical_collection/m_data_converter.js
var DataConverter = class_default.inherit({
  ctor() {
    this._dataStructure = [];
    this._itemsCount = 0;
    this._visibleItemsCount = 0;
  },
  _indexByKey: {},
  _convertItemsToNodes(items, parentKey) {
    var that = this;
    each(items, (_, item) => {
      var parentId = isDefined(parentKey) ? parentKey : that._getParentId(item);
      var node = that._convertItemToNode(item, parentId);
      that._dataStructure.push(node);
      that._checkForDuplicateId(node.internalFields.key);
      that._indexByKey[node.internalFields.key] = that._dataStructure.length - 1;
      if (that._itemHasChildren(item)) {
        that._convertItemsToNodes(that._dataAccessors.getters.items(item), node.internalFields.key);
      }
    });
  },
  _checkForDuplicateId(key) {
    if (isDefined(this._indexByKey[key])) {
      throw ui_errors_default.Error("E1040", key);
    }
  },
  _getParentId(item) {
    return "plain" === this._dataType ? this._dataAccessors.getters.parentKey(item) : void 0;
  },
  _itemHasChildren(item) {
    if ("plain" === this._dataType) {
      return;
    }
    var items = this._dataAccessors.getters.items(item);
    return items && items.length;
  },
  _getUniqueKey(item) {
    var keyGetter = this._dataAccessors.getters.key;
    var itemKey = keyGetter(item);
    var isCorrectKey = keyGetter && (itemKey || 0 === itemKey) && isPrimitive(itemKey);
    return isCorrectKey ? itemKey : this.getItemsCount();
  },
  _convertItemToNode(item, parentKey) {
    this._itemsCount++;
    false !== item.visible && this._visibleItemsCount++;
    var node = {
      internalFields: {
        disabled: this._dataAccessors.getters.disabled(item, {
          defaultValue: false
        }),
        expanded: this._dataAccessors.getters.expanded(item, {
          defaultValue: false
        }),
        selected: this._dataAccessors.getters.selected(item, {
          defaultValue: false
        }),
        key: this._getUniqueKey(item),
        parentKey: isDefined(parentKey) ? parentKey : this._rootValue,
        item: this._makeObjectFromPrimitive(item),
        childrenKeys: []
      }
    };
    extend(node, item);
    delete node.items;
    return node;
  },
  setChildrenKeys() {
    var that = this;
    each(this._dataStructure, (_, node) => {
      if (node.internalFields.parentKey === that._rootValue) {
        return;
      }
      var parent = that.getParentNode(node);
      parent && parent.internalFields.childrenKeys.push(node.internalFields.key);
    });
  },
  _makeObjectFromPrimitive(item) {
    if (isPrimitive(item)) {
      var key = item;
      item = {};
      this._dataAccessors.setters.key(item, key);
    }
    return item;
  },
  _convertToPublicNode(node, parent) {
    if (!node) {
      return null;
    }
    var publicNode = {
      text: this._dataAccessors.getters.display(node),
      key: node.internalFields.key,
      selected: node.internalFields.selected,
      expanded: node.internalFields.expanded,
      disabled: node.internalFields.disabled,
      parent: parent || null,
      itemData: node.internalFields.item,
      children: [],
      items: []
    };
    if (publicNode.parent) {
      publicNode.parent.children.push(publicNode);
      publicNode.parent.items.push(publicNode);
    }
    return publicNode;
  },
  convertToPublicNodes(data17, parent) {
    if (!data17.length) {
      return [];
    }
    var that = this;
    var publicNodes = [];
    each(data17, (_, node) => {
      node = isPrimitive(node) ? that._getByKey(node) : node;
      var publicNode = that._convertToPublicNode(node, parent);
      publicNode.children = that.convertToPublicNodes(node.internalFields.childrenKeys, publicNode);
      publicNodes.push(publicNode);
      node.internalFields.publicNode = publicNode;
    });
    return publicNodes;
  },
  setDataAccessors(accessors) {
    this._dataAccessors = accessors;
  },
  _getByKey(key) {
    return this._dataStructure[this.getIndexByKey(key)] || null;
  },
  getParentNode(node) {
    return this._getByKey(node.internalFields.parentKey);
  },
  getByKey(data17, key) {
    if (null === key || void 0 === key) {
      return null;
    }
    var result2 = null;
    var that = this;
    return function(data18, key2) {
      each(data18, (_, element) => {
        var currentElementKey = element.internalFields && element.internalFields.key || that._dataAccessors.getters.key(element);
        if (currentElementKey.toString() === key2.toString()) {
          result2 = element;
          return false;
        }
      });
      return result2;
    }(data17, key);
  },
  getItemsCount() {
    return this._itemsCount;
  },
  getVisibleItemsCount() {
    return this._visibleItemsCount;
  },
  updateIndexByKey() {
    var that = this;
    this._indexByKey = {};
    each(this._dataStructure, (index, node) => {
      that._checkForDuplicateId(node.internalFields.key);
      that._indexByKey[node.internalFields.key] = index;
    });
  },
  updateChildrenKeys() {
    this._indexByKey = {};
    this.removeChildrenKeys();
    this.updateIndexByKey();
    this.setChildrenKeys();
  },
  removeChildrenKeys() {
    this._indexByKey = {};
    each(this._dataStructure, (index, node) => {
      node.internalFields.childrenKeys = [];
    });
  },
  getIndexByKey(key) {
    return this._indexByKey[key];
  },
  createPlainStructure(items, rootValue, dataType) {
    this._itemsCount = 0;
    this._visibleItemsCount = 0;
    this._rootValue = rootValue;
    this._dataType = dataType;
    this._indexByKey = {};
    this._convertItemsToNodes(items);
    this.setChildrenKeys();
    return this._dataStructure;
  }
});
var m_data_converter_default = DataConverter;

// node_modules/devextreme/esm/__internal/ui/hierarchical_collection/m_data_adapter.js
var EXPANDED = "expanded";
var SELECTED = "selected";
var DISABLED = "disabled";
ui_search_box_mixin_default.setEditorClass(text_box_default2);
var DataAdapter = class_default.inherit({
  ctor(options2) {
    this.options = {};
    extend(this.options, this._defaultOptions(), options2);
    this.options.dataConverter.setDataAccessors(this.options.dataAccessors);
    this._selectedNodesKeys = [];
    this._expandedNodesKeys = [];
    this._dataStructure = [];
    this._createInternalDataStructure();
    this.getTreeNodes();
  },
  setOption(name2, value2) {
    this.options[name2] = value2;
    if ("recursiveSelection" === name2) {
      this._updateSelection();
    }
  },
  _defaultOptions: () => ({
    dataAccessors: void 0,
    items: [],
    multipleSelection: true,
    recursiveSelection: false,
    recursiveExpansion: false,
    rootValue: 0,
    searchValue: "",
    dataType: "tree",
    searchMode: "contains",
    dataConverter: new m_data_converter_default(),
    onNodeChanged: noop,
    sort: null
  }),
  _createInternalDataStructure() {
    this._initialDataStructure = this.options.dataConverter.createPlainStructure(this.options.items, this.options.rootValue, this.options.dataType);
    this._dataStructure = this.options.searchValue.length ? this.search(this.options.searchValue) : this._initialDataStructure;
    this.options.dataConverter._dataStructure = this._dataStructure;
    this._updateSelection();
    this._updateExpansion();
  },
  _updateSelection() {
    if (this.options.recursiveSelection) {
      this._setChildrenSelection();
      this._setParentSelection();
    }
    this._selectedNodesKeys = this._updateNodesKeysArray(SELECTED);
  },
  _updateExpansion(key) {
    if (this.options.recursiveExpansion) {
      key ? this._updateOneBranch(key) : this._setParentExpansion();
    }
    this._expandedNodesKeys = this._updateNodesKeysArray(EXPANDED);
  },
  _updateNodesKeysArray(property) {
    var that = this;
    var array2 = [];
    each(that._getDataBySelectionMode(), (_, node) => {
      if (!that._isNodeVisible(node)) {
        return;
      }
      if (node.internalFields[property]) {
        if (property === EXPANDED || that.options.multipleSelection) {
          array2.push(node.internalFields.key);
        } else {
          array2.length && that.toggleSelection(array2[0], false, true);
          array2 = [node.internalFields.key];
        }
      }
    });
    return array2;
  },
  _getDataBySelectionMode() {
    return this.options.multipleSelection ? this.getData() : this.getFullData();
  },
  _isNodeVisible: (node) => false !== node.internalFields.item.visible,
  _getByKey(data17, key) {
    return data17 === this._dataStructure ? this.options.dataConverter._getByKey(key) : this.options.dataConverter.getByKey(data17, key);
  },
  _setChildrenSelection() {
    var that = this;
    each(this._dataStructure, (_, node) => {
      if (!node.internalFields.childrenKeys.length) {
        return;
      }
      var isSelected = node.internalFields.selected;
      true === isSelected && that._toggleChildrenSelection(node, isSelected);
    });
  },
  _setParentSelection() {
    var that = this;
    each(this._dataStructure, (_, node) => {
      var parent = that.options.dataConverter.getParentNode(node);
      if (parent && node.internalFields.parentKey !== that.options.rootValue) {
        that._iterateParents(node, (parent2) => {
          var newParentState = that._calculateSelectedState(parent2);
          that._setFieldState(parent2, SELECTED, newParentState);
        });
      }
    });
  },
  _setParentExpansion() {
    var that = this;
    each(this._dataStructure, (_, node) => {
      if (!node.internalFields.expanded) {
        return;
      }
      that._updateOneBranch(node.internalFields.key);
    });
  },
  _updateOneBranch(key) {
    var that = this;
    var node = this.getNodeByKey(key);
    that._iterateParents(node, (parent) => {
      that._setFieldState(parent, EXPANDED, true);
    });
  },
  _iterateChildren(node, recursive, callback, processedKeys) {
    if (!isFunction(callback)) {
      return;
    }
    var that = this;
    var nodeKey = node.internalFields.key;
    processedKeys = processedKeys || [];
    if (-1 === processedKeys.indexOf(nodeKey)) {
      processedKeys.push(nodeKey);
      each(node.internalFields.childrenKeys, (_, key) => {
        var child = that.getNodeByKey(key);
        callback(child);
        if (child.internalFields.childrenKeys.length && recursive) {
          that._iterateChildren(child, recursive, callback, processedKeys);
        }
      });
    }
  },
  _iterateParents(node, callback, processedKeys) {
    if (node.internalFields.parentKey === this.options.rootValue || !isFunction(callback)) {
      return;
    }
    processedKeys = processedKeys || [];
    var {
      key
    } = node.internalFields;
    if (-1 === processedKeys.indexOf(key)) {
      processedKeys.push(key);
      var parent = this.options.dataConverter.getParentNode(node);
      if (parent) {
        callback(parent);
        if (parent.internalFields.parentKey !== this.options.rootValue) {
          this._iterateParents(parent, callback, processedKeys);
        }
      }
    }
  },
  _calculateSelectedState(node) {
    var itemsCount = node.internalFields.childrenKeys.length;
    var selectedItemsCount = 0;
    var invisibleItemsCount = 0;
    var result2 = false;
    for (var i = 0; i <= itemsCount - 1; i++) {
      var childNode = this.getNodeByKey(node.internalFields.childrenKeys[i]);
      var isChildInvisible = false === childNode.internalFields.item.visible;
      var childState = childNode.internalFields.selected;
      if (isChildInvisible) {
        invisibleItemsCount++;
        continue;
      }
      if (childState) {
        selectedItemsCount++;
      } else if (void 0 === childState) {
        selectedItemsCount += 0.5;
      }
    }
    if (selectedItemsCount) {
      result2 = selectedItemsCount === itemsCount - invisibleItemsCount ? true : void 0;
    }
    return result2;
  },
  _toggleChildrenSelection(node, state) {
    var that = this;
    this._iterateChildren(node, true, (child) => {
      if (that._isNodeVisible(child)) {
        that._setFieldState(child, SELECTED, state);
      }
    });
  },
  _setFieldState(node, field, state) {
    if (node.internalFields[field] === state) {
      return;
    }
    node.internalFields[field] = state;
    if (node.internalFields.publicNode) {
      node.internalFields.publicNode[field] = state;
    }
    this.options.dataAccessors.setters[field](node.internalFields.item, state);
    this.options.onNodeChanged(node);
  },
  _markChildren(keys) {
    var that = this;
    each(keys, (_, key) => {
      var index = that.getIndexByKey(key);
      var node = that.getNodeByKey(key);
      that._dataStructure[index] = 0;
      node.internalFields.childrenKeys.length && that._markChildren(node.internalFields.childrenKeys);
    });
  },
  _removeNode(key) {
    var node = this.getNodeByKey(key);
    this._dataStructure[this.getIndexByKey(key)] = 0;
    this._markChildren(node.internalFields.childrenKeys);
    var that = this;
    var counter = 0;
    var items = extend([], this._dataStructure);
    each(items, (index, item) => {
      if (!item) {
        that._dataStructure.splice(index - counter, 1);
        counter++;
      }
    });
  },
  _addNode(item) {
    var {
      dataConverter
    } = this.options;
    var node = dataConverter._convertItemToNode(item, this.options.dataAccessors.getters.parentKey(item));
    this._dataStructure = this._dataStructure.concat(node);
    this._initialDataStructure = this._initialDataStructure.concat(node);
    dataConverter._dataStructure = dataConverter._dataStructure.concat(node);
  },
  _updateFields() {
    this.options.dataConverter.updateChildrenKeys();
    this._updateSelection();
    this._updateExpansion();
  },
  getSelectedNodesKeys() {
    return this._selectedNodesKeys;
  },
  getExpandedNodesKeys() {
    return this._expandedNodesKeys;
  },
  getData() {
    return this._dataStructure;
  },
  getFullData() {
    return this._initialDataStructure;
  },
  getNodeByItem(item) {
    var result2 = null;
    each(this._dataStructure, (_, node) => {
      if (node.internalFields.item === item) {
        result2 = node;
        return false;
      }
    });
    return result2;
  },
  getNodesByItems(items) {
    var that = this;
    var nodes = [];
    each(items, (_, item) => {
      var node = that.getNodeByItem(item);
      node && nodes.push(node);
    });
    return nodes;
  },
  getNodeByKey(key, data17) {
    return this._getByKey(data17 || this._getDataBySelectionMode(), key);
  },
  getTreeNodes() {
    return this.options.dataConverter.convertToPublicNodes(this.getRootNodes());
  },
  getItemsCount() {
    return this.options.dataConverter.getItemsCount();
  },
  getVisibleItemsCount() {
    return this.options.dataConverter.getVisibleItemsCount();
  },
  getPublicNode: (node) => node.internalFields.publicNode,
  getRootNodes() {
    return this.getChildrenNodes(this.options.rootValue);
  },
  getChildrenNodes(parentKey) {
    return query_default(this._dataStructure, {
      langParams: this.options.langParams
    }).filter(["internalFields.parentKey", parentKey]).toArray();
  },
  getIndexByKey(key) {
    return this.options.dataConverter.getIndexByKey(key);
  },
  addItem(item) {
    this._addNode(item);
    this._updateFields();
  },
  removeItem(key) {
    this._removeNode(key);
    this._updateFields();
  },
  toggleSelection(key, state, selectRecursive) {
    var isSingleModeUnselect = this._isSingleModeUnselect(state);
    var node = this._getByKey(selectRecursive || isSingleModeUnselect ? this._initialDataStructure : this._dataStructure, key);
    this._setFieldState(node, SELECTED, state);
    if (this.options.recursiveSelection && !selectRecursive) {
      state ? this._setChildrenSelection() : this._toggleChildrenSelection(node, state);
      this._setParentSelection();
    }
    this._selectedNodesKeys = this._updateNodesKeysArray(SELECTED);
  },
  _isSingleModeUnselect(selectionState) {
    return !this.options.multipleSelection && !selectionState;
  },
  toggleNodeDisabledState(key, state) {
    var node = this.getNodeByKey(key);
    this._setFieldState(node, DISABLED, state);
  },
  toggleSelectAll(state) {
    if (!isDefined(state)) {
      return;
    }
    var that = this;
    var lastSelectedKey = that._selectedNodesKeys[that._selectedNodesKeys.length - 1];
    var dataStructure = that._isSingleModeUnselect(state) ? this._initialDataStructure : this._dataStructure;
    each(dataStructure, (index, node) => {
      if (!that._isNodeVisible(node)) {
        return;
      }
      that._setFieldState(node, SELECTED, state);
    });
    that._selectedNodesKeys = that._updateNodesKeysArray(SELECTED);
    if (!state && that.options.selectionRequired) {
      that.toggleSelection(lastSelectedKey, true);
    }
  },
  isAllSelected() {
    if (this.getSelectedNodesKeys().length) {
      return this.getSelectedNodesKeys().length === this.getVisibleItemsCount() ? true : void 0;
    }
    return false;
  },
  toggleExpansion(key, state) {
    var node = this.getNodeByKey(key);
    this._setFieldState(node, EXPANDED, state);
    if (state) {
      this._updateExpansion(key);
    }
    this._expandedNodesKeys = this._updateNodesKeysArray(EXPANDED);
  },
  isFiltered(item) {
    return !this.options.searchValue.length || !!this._filterDataStructure(this.options.searchValue, [item]).length;
  },
  _createCriteria(selector, value2, operation) {
    var searchFilter = [];
    if (!Array.isArray(selector)) {
      return [selector, operation, value2];
    }
    each(selector, (i, item) => {
      searchFilter.push([item, operation, value2], "or");
    });
    searchFilter.pop();
    return searchFilter;
  },
  _filterDataStructure(filterValue, dataStructure) {
    var selector = this.options.searchExpr || this.options.dataAccessors.getters.display;
    var operation = ui_search_box_mixin_default.getOperationBySearchMode(this.options.searchMode);
    var criteria = this._createCriteria(selector, filterValue, operation);
    dataStructure = dataStructure || this._initialDataStructure;
    return query_default(dataStructure, {
      langParams: this.options.langParams
    }).filter(criteria).toArray();
  },
  search(searchValue) {
    var that = this;
    var matches = this._filterDataStructure(searchValue);
    var {
      dataConverter
    } = this.options;
    !function lookForParents(matches2, index) {
      var {
        length
      } = matches2;
      while (index < length) {
        var node = matches2[index];
        if (node.internalFields.parentKey === that.options.rootValue) {
          index++;
          continue;
        }
        var parent = dataConverter.getParentNode(node);
        if (!parent) {
          ui_errors_default.log("W1007", node.internalFields.parentKey, node.internalFields.key);
          index++;
          continue;
        }
        if (!parent.internalFields.expanded) {
          that._setFieldState(parent, EXPANDED, true);
        }
        if (matches2.includes(parent)) {
          index++;
          continue;
        }
        matches2.splice(index, 0, parent);
        lookForParents(matches2, index);
      }
    }(matches, 0);
    if (this.options.sort) {
      matches = store_helper_default.queryByOptions(query_default(matches), {
        sort: this.options.sort,
        langParams: this.options.langParams
      }).toArray();
    }
    dataConverter._indexByKey = {};
    each(matches, (index, node) => {
      node.internalFields.childrenKeys = [];
      dataConverter._indexByKey[node.internalFields.key] = index;
    });
    dataConverter._dataStructure = matches;
    dataConverter.setChildrenKeys();
    return dataConverter._dataStructure;
  }
});
var m_data_adapter_default = DataAdapter;

// node_modules/devextreme/esm/__internal/ui/hierarchical_collection/m_hierarchical_collection_widget.js
var DISABLED_STATE_CLASS2 = "dx-state-disabled";
var ITEM_URL_CLASS = "dx-item-url";
var HierarchicalCollectionWidget = ui_collection_widget_edit_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      keyExpr: "id",
      displayExpr: "text",
      selectedExpr: "selected",
      disabledExpr: "disabled",
      itemsExpr: "items",
      hoverStateEnabled: true,
      parentIdExpr: "parentId",
      expandedExpr: "expanded"
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }]);
  },
  _init() {
    this.callBase();
    this._initAccessors();
    this._initDataAdapter();
    this._initDynamicTemplates();
  },
  _initDataSource() {
    this.callBase();
    this._dataSource && this._dataSource.paginate(false);
  },
  _initDataAdapter() {
    var accessors = this._createDataAdapterAccessors();
    this._dataAdapter = new m_data_adapter_default(extend({
      dataAccessors: {
        getters: accessors.getters,
        setters: accessors.setters
      },
      items: this.option("items")
    }, this._getDataAdapterOptions()));
  },
  _getDataAdapterOptions: noop,
  _getItemExtraPropNames: noop,
  _initDynamicTemplates() {
    var fields = ["text", "html", "items", "icon"].concat(this._getItemExtraPropNames());
    this._templateManager.addDefaultTemplates({
      item: new BindableTemplate(this._addContent.bind(this), fields, this.option("integrationOptions.watchMethod"), {
        text: this._displayGetter,
        items: this._itemsGetter
      })
    });
  },
  _addContent($container, itemData) {
    $container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData));
  },
  _getLinkContainer(iconContainer, textContainer, _ref) {
    var {
      linkAttr,
      url
    } = _ref;
    var linkAttributes = isObject(linkAttr) ? linkAttr : {};
    return renderer_default("<a>").addClass(ITEM_URL_CLASS).attr(_extends(_extends({}, linkAttributes), {
      href: url
    })).append(iconContainer).append(textContainer);
  },
  _getIconContainer(itemData) {
    if (!itemData.icon) {
      return;
    }
    var $imageContainer = getImageContainer(itemData.icon);
    if ($imageContainer.is("img")) {
      var componentName = this.NAME.startsWith("dxPrivateComponent") ? "" : "".concat(this.NAME, " ");
      $imageContainer.attr("alt", "".concat(componentName, "item icon"));
    }
    return $imageContainer;
  },
  _getTextContainer: (itemData) => renderer_default("<span>").text(itemData.text),
  _initAccessors() {
    var that = this;
    each(this._getAccessors(), (_, accessor) => {
      that._compileAccessor(accessor);
    });
    this._compileDisplayGetter();
  },
  _getAccessors: () => ["key", "selected", "items", "disabled", "parentId", "expanded"],
  _getChildNodes(node) {
    var that = this;
    var arr = [];
    each(node.internalFields.childrenKeys, (_, key) => {
      var childNode = that._dataAdapter.getNodeByKey(key);
      arr.push(childNode);
    });
    return arr;
  },
  _hasChildren: (node) => node && node.internalFields.childrenKeys.length,
  _compileAccessor(optionName) {
    var getter = "_".concat(optionName, "Getter");
    var setter = "_".concat(optionName, "Setter");
    var optionExpr = this.option("".concat(optionName, "Expr"));
    if (!optionExpr) {
      this[getter] = noop;
      this[setter] = noop;
      return;
    }
    if (isFunction(optionExpr)) {
      this[setter] = function(obj, value2) {
        obj[optionExpr()] = value2;
      };
      this[getter] = function(obj) {
        return obj[optionExpr()];
      };
      return;
    }
    this[getter] = compileGetter(optionExpr);
    this[setter] = compileSetter(optionExpr);
  },
  _createDataAdapterAccessors() {
    var that = this;
    var accessors = {
      getters: {},
      setters: {}
    };
    each(this._getAccessors(), (_, accessor) => {
      var getterName = "_".concat(accessor, "Getter");
      var setterName = "_".concat(accessor, "Setter");
      var newAccessor = "parentId" === accessor ? "parentKey" : accessor;
      accessors.getters[newAccessor] = that[getterName];
      accessors.setters[newAccessor] = that[setterName];
    });
    accessors.getters.display = !this._displayGetter ? (itemData) => itemData.text : this._displayGetter;
    return accessors;
  },
  _initMarkup() {
    this.callBase();
    this._addWidgetClass();
  },
  _addWidgetClass() {
    this._focusTarget().addClass(this._widgetClass());
  },
  _widgetClass: noop,
  _renderItemFrame(index, itemData) {
    var $itemFrame = this.callBase.apply(this, arguments);
    $itemFrame.toggleClass(DISABLED_STATE_CLASS2, !!this._disabledGetter(itemData));
    return $itemFrame;
  },
  _optionChanged(args) {
    switch (args.name) {
      case "displayExpr":
      case "keyExpr":
        this._initAccessors();
        this._initDynamicTemplates();
        this.repaint();
        break;
      case "itemsExpr":
      case "selectedExpr":
      case "disabledExpr":
      case "expandedExpr":
      case "parentIdExpr":
        this._initAccessors();
        this._initDataAdapter();
        this.repaint();
        break;
      case "items":
        this._initDataAdapter();
        this.callBase(args);
        break;
      default:
        this.callBase(args);
    }
  }
});
var m_hierarchical_collection_widget_default = HierarchicalCollectionWidget;

// node_modules/devextreme/esm/ui/hierarchical_collection/ui.hierarchical_collection_widget.js
var ui_hierarchical_collection_widget_default = m_hierarchical_collection_widget_default;

// node_modules/devextreme/esm/__internal/ui/widget.js
var TypedWidget = ui_widget_default;
var widget_default = TypedWidget;

// node_modules/devextreme/esm/__internal/ui/collection/hierarchical.js
var TypedCollectionWidget = ui_hierarchical_collection_widget_default;
var hierarchical_default = TypedCollectionWidget;

// node_modules/devextreme/esm/__internal/ui/context_menu/m_menu_base.edit.strategy.js
var MenuBaseEditStrategy = class extends m_collection_widget_edit_strategy_plain_default {
  _getPlainItems() {
    return map(this._collectionWidget.option("items"), function getMenuItems(item) {
      return item.items ? [item].concat(map(item.items, getMenuItems)) : item;
    });
  }
  _stringifyItem(item) {
    return JSON.stringify(item, (key, value2) => {
      if ("template" === key) {
        return this._getTemplateString(value2);
      }
      return value2;
    });
  }
  _getTemplateString(template) {
    var result2;
    if ("object" === typeof template) {
      result2 = renderer_default(template).text();
    } else {
      result2 = template.toString();
    }
    return result2;
  }
};
var m_menu_base_edit_strategy_default = MenuBaseEditStrategy;

// node_modules/devextreme/esm/__internal/ui/context_menu/m_menu_base.js
var DX_MENU_CLASS = "dx-menu";
var DX_MENU_NO_ICONS_CLASS = "".concat(DX_MENU_CLASS, "-no-icons");
var DX_MENU_BASE_CLASS = "dx-menu-base";
var ITEM_CLASS2 = "".concat(DX_MENU_CLASS, "-item");
var DX_ITEM_CONTENT_CLASS = "".concat(ITEM_CLASS2, "-content");
var DX_MENU_SELECTED_ITEM_CLASS = "".concat(ITEM_CLASS2, "-selected");
var DX_MENU_ITEM_WRAPPER_CLASS = "".concat(ITEM_CLASS2, "-wrapper");
var DX_MENU_ITEMS_CONTAINER_CLASS = "".concat(DX_MENU_CLASS, "-items-container");
var DX_MENU_ITEM_EXPANDED_CLASS = "".concat(ITEM_CLASS2, "-expanded");
var DX_MENU_SEPARATOR_CLASS = "".concat(DX_MENU_CLASS, "-separator");
var DX_MENU_ITEM_LAST_GROUP_ITEM = "".concat(DX_MENU_CLASS, "-last-group-item");
var DX_ITEM_HAS_TEXT = "".concat(ITEM_CLASS2, "-has-text");
var DX_ITEM_HAS_ICON = "".concat(ITEM_CLASS2, "-has-icon");
var DX_ITEM_HAS_SUBMENU = "".concat(ITEM_CLASS2, "-has-submenu");
var DX_MENU_ITEM_POPOUT_CLASS = "".concat(ITEM_CLASS2, "-popout");
var DX_MENU_ITEM_POPOUT_CONTAINER_CLASS = "".concat(DX_MENU_ITEM_POPOUT_CLASS, "-container");
var DX_MENU_ITEM_CAPTION_CLASS = "".concat(ITEM_CLASS2, "-text");
var SINGLE_SELECTION_MODE = "single";
var DEFAULT_DELAY = {
  show: 50,
  hide: 300
};
var DX_MENU_ITEM_CAPTION_URL_CLASS = "".concat(DX_MENU_ITEM_CAPTION_CLASS, "-with-url");
var DX_ICON_WITH_URL_CLASS = "dx-icon-with-url";
var ITEM_URL_CLASS2 = "dx-item-url";
var MenuBase = class extends hierarchical_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      items: [],
      cssClass: "",
      activeStateEnabled: true,
      showSubmenuMode: {
        name: "onHover",
        delay: {
          show: 50,
          hide: 300
        }
      },
      animation: {
        show: {
          type: "fade",
          from: 0,
          to: 1,
          duration: 100
        },
        hide: {
          type: "fade",
          from: 1,
          to: 0,
          duration: 100
        }
      },
      selectByClick: false,
      focusOnSelectedItem: false,
      keyExpr: null,
      _itemAttributes: {
        role: "menuitem"
      },
      useInkRipple: false
    });
  }
  _itemDataKey() {
    return "dxMenuItemDataKey";
  }
  _itemClass() {
    return ITEM_CLASS2;
  }
  _setAriaSelectionAttribute($itemElement, isSelected) {
  }
  _selectedItemClass() {
    return DX_MENU_SELECTED_ITEM_CLASS;
  }
  _widgetClass() {
    return DX_MENU_BASE_CLASS;
  }
  _focusTarget() {
    return this._itemContainer();
  }
  _clean() {
    this.option("focusedElement", null);
    super._clean();
  }
  _supportedKeys() {
    return extend(super._supportedKeys(), {
      space: () => {
        var $item = renderer_default(this.option("focusedElement"));
        if (!$item.length || !this._isSelectionEnabled()) {
          return;
        }
        this.selectItem($item[0]);
      },
      pageUp: noop,
      pageDown: noop
    });
  }
  _isSelectionEnabled() {
    return this.option("selectionMode") === SINGLE_SELECTION_MODE;
  }
  _init() {
    this._activeStateUnit = ".".concat(ITEM_CLASS2);
    super._init();
    this._renderSelectedItem();
    this._initActions();
  }
  _getLinkContainer(iconContainer, textContainer, itemData) {
    var {
      linkAttr,
      url
    } = itemData;
    null === iconContainer || void 0 === iconContainer ? void 0 : iconContainer.addClass(DX_ICON_WITH_URL_CLASS);
    null === textContainer || void 0 === textContainer ? void 0 : textContainer.addClass(DX_MENU_ITEM_CAPTION_URL_CLASS);
    return super._getLinkContainer(iconContainer, textContainer, {
      linkAttr,
      url
    });
  }
  _addContent($container, itemData) {
    var {
      html,
      url
    } = itemData;
    if (url) {
      $container.html(html);
      var link = this._getLinkContainer(this._getIconContainer(itemData), this._getTextContainer(itemData), itemData);
      $container.append(link);
    } else {
      super._addContent($container, itemData);
    }
    $container.append(this._getPopoutContainer(itemData));
    this._addContentClasses(itemData, $container.parent());
  }
  _getTextContainer(itemData) {
    var {
      text
    } = itemData;
    if (!text) {
      return;
    }
    var $itemContainer = renderer_default("<span>").addClass(DX_MENU_ITEM_CAPTION_CLASS);
    var itemText = isPlainObject(itemData) ? text : String(itemData);
    return $itemContainer.text(itemText);
  }
  _getItemExtraPropNames() {
    return ["url", "linkAttr"];
  }
  _getPopoutContainer(itemData) {
    var {
      items
    } = itemData;
    var $popOutContainer;
    if (items && items.length) {
      var $popOutImage = renderer_default("<div>").addClass(DX_MENU_ITEM_POPOUT_CLASS);
      $popOutContainer = renderer_default("<span>").addClass(DX_MENU_ITEM_POPOUT_CONTAINER_CLASS).append($popOutImage);
    }
    return $popOutContainer;
  }
  _getDataAdapterOptions() {
    return {
      rootValue: 0,
      multipleSelection: false,
      recursiveSelection: false,
      recursiveExpansion: false,
      searchValue: ""
    };
  }
  _selectByItem(selectedItem) {
    if (!selectedItem) {
      return;
    }
    var nodeToSelect = this._dataAdapter.getNodeByItem(selectedItem);
    this._dataAdapter.toggleSelection(nodeToSelect.internalFields.key, true);
  }
  _renderSelectedItem() {
    var selectedKeys = this._dataAdapter.getSelectedNodesKeys();
    var selectedKey = selectedKeys.length && selectedKeys[0];
    var selectedItem = this.option("selectedItem");
    if (!selectedKey) {
      this._selectByItem(selectedItem);
      return;
    }
    var node = this._dataAdapter.getNodeByKey(selectedKey);
    if (false === node.selectable) {
      return;
    }
    if (!selectedItem) {
      this.option("selectedItem", node.internalFields.item);
      return;
    }
    if (selectedItem !== node.internalFields.item) {
      this._dataAdapter.toggleSelection(selectedKey, false);
      this._selectByItem(selectedItem);
    }
  }
  _initActions() {
  }
  _initMarkup() {
    super._initMarkup();
    this.option("useInkRipple") && this._renderInkRipple();
  }
  _renderInkRipple() {
    this._inkRipple = render();
  }
  _toggleActiveState($element, value2, e) {
    super._toggleActiveState.apply(this, arguments);
    if (!this._inkRipple) {
      return;
    }
    var config2 = {
      element: $element,
      event: e
    };
    if (value2) {
      this._inkRipple.showWave(config2);
    } else {
      this._inkRipple.hideWave(config2);
    }
  }
  _getShowSubmenuMode() {
    var optionValue = this.option("showSubmenuMode");
    optionValue = isObject(optionValue) ? optionValue.name : optionValue;
    return this._isDesktopDevice() ? optionValue : "onClick";
  }
  _initSelectedItems() {
  }
  _isDesktopDevice() {
    return "desktop" === devices_default.real().deviceType;
  }
  _initEditStrategy() {
    var Strategy = m_menu_base_edit_strategy_default;
    this._editStrategy = new Strategy(this);
  }
  _addCustomCssClass($element) {
    $element.addClass(this.option("cssClass"));
  }
  _itemWrapperSelector() {
    return ".".concat(DX_MENU_ITEM_WRAPPER_CLASS);
  }
  _hoverStartHandler(e) {
    var $itemElement = this._getItemElementByEventArgs(e);
    if (!$itemElement || this._isItemDisabled($itemElement)) {
      return;
    }
    e.stopPropagation();
    if ("onHover" === this._getShowSubmenuMode()) {
      clearTimeout(this._showSubmenusTimeout);
      this._showSubmenusTimeout = setTimeout(this._showSubmenu.bind(this, $itemElement), this._getSubmenuDelay("show"));
    }
  }
  _getAvailableItems($itemElements) {
    return super._getAvailableItems($itemElements).filter(function() {
      return "hidden" !== renderer_default(this).css("visibility");
    });
  }
  _isItemDisabled($item) {
    return this._disabledGetter($item.data(this._itemDataKey()));
  }
  _showSubmenu($itemElement) {
    this._addExpandedClass($itemElement);
  }
  _addExpandedClass(itemElement) {
    renderer_default(itemElement).addClass(DX_MENU_ITEM_EXPANDED_CLASS);
  }
  _getSubmenuDelay(action) {
    var {
      delay
    } = this.option("showSubmenuMode");
    if (!isDefined(delay)) {
      return DEFAULT_DELAY[action];
    }
    return isObject(delay) ? delay[action] : delay;
  }
  _getItemElementByEventArgs(eventArgs) {
    var $target = renderer_default(eventArgs.target);
    if ($target.hasClass(this._itemClass()) || $target.get(0) === eventArgs.currentTarget) {
      return $target;
    }
    while (!$target.hasClass(this._itemClass())) {
      $target = $target.parent();
      if ($target.hasClass("dx-submenu")) {
        return null;
      }
    }
    return $target;
  }
  _hoverEndHandler(event) {
    clearTimeout(this._showSubmenusTimeout);
  }
  _hasSubmenu(node) {
    return node && node.internalFields.childrenKeys.length;
  }
  _renderContentImpl() {
    this._renderItems(this._dataAdapter.getRootNodes());
  }
  _renderItems(nodes, submenuContainer) {
    if (!nodes.length) {
      return;
    }
    this.hasIcons = false;
    var $nodeContainer = this._renderContainer(this.$element(), submenuContainer);
    var firstVisibleIndex = -1;
    var nextGroupFirstIndex = -1;
    each(nodes, (index, node) => {
      var isVisibleNode = false !== node.visible;
      if (isVisibleNode && firstVisibleIndex < 0) {
        firstVisibleIndex = index;
      }
      var isBeginGroup = firstVisibleIndex < index && (node.beginGroup || index === nextGroupFirstIndex);
      if (isBeginGroup) {
        nextGroupFirstIndex = isVisibleNode ? index : index + 1;
      }
      if (index === nextGroupFirstIndex && firstVisibleIndex < index) {
        this._renderSeparator($nodeContainer);
      }
      this._renderItem(index, node, $nodeContainer);
    });
    if (!this.hasIcons) {
      $nodeContainer.addClass(DX_MENU_NO_ICONS_CLASS);
    }
  }
  _renderContainer($wrapper, submenuContainer) {
    var $container = renderer_default("<ul>");
    this.setAria("role", "none", $container);
    return $container.appendTo($wrapper).addClass(DX_MENU_ITEMS_CONTAINER_CLASS);
  }
  _createDOMElement($nodeContainer) {
    var $node = renderer_default("<li>");
    this.setAria("role", "none", $node);
    return $node.appendTo($nodeContainer).addClass(DX_MENU_ITEM_WRAPPER_CLASS);
  }
  _renderItem(index, node, $nodeContainer, $nodeElement) {
    var {
      items = []
    } = this.option();
    var $node = null !== $nodeElement && void 0 !== $nodeElement ? $nodeElement : this._createDOMElement($nodeContainer);
    if (items[index + 1] && items[index + 1].beginGroup) {
      $node.addClass(DX_MENU_ITEM_LAST_GROUP_ITEM);
    }
    var $itemFrame = super._renderItem(index, node.internalFields.item, $node);
    if (node.internalFields.item === this.option("selectedItem")) {
      $itemFrame.addClass(DX_MENU_SELECTED_ITEM_CLASS);
    }
    $itemFrame.attr("tabIndex", -1);
    if (this._hasSubmenu(node)) {
      this.setAria("haspopup", "true", $itemFrame);
    }
  }
  _renderItemFrame(index, itemData, $itemContainer) {
    var $itemFrame = $itemContainer.children(".".concat(ITEM_CLASS2));
    return $itemFrame.length ? $itemFrame : super._renderItemFrame.apply(this, arguments);
  }
  _refreshItem($item, item) {
    var node = this._dataAdapter.getNodeByItem(item);
    var index = $item.data(this._itemIndexKey());
    var $nodeContainer = $item.closest("ul");
    var $nodeElement = $item.closest("li");
    this._renderItem(index, node, $nodeContainer, $nodeElement);
  }
  _addContentClasses(itemData, $itemFrame) {
    var hasText = itemData.text ? !!itemData.text.length : false;
    var hasIcon = !!itemData.icon;
    var hasSubmenu = itemData.items ? !!itemData.items.length : false;
    $itemFrame.toggleClass(DX_ITEM_HAS_TEXT, hasText);
    $itemFrame.toggleClass(DX_ITEM_HAS_ICON, hasIcon);
    if (!this.hasIcons) {
      this.hasIcons = hasIcon;
    }
    $itemFrame.toggleClass(DX_ITEM_HAS_SUBMENU, hasSubmenu);
  }
  _getItemContent($itemFrame) {
    var $itemContent = super._getItemContent($itemFrame);
    if (!$itemContent.length) {
      $itemContent = $itemFrame.children(".".concat(DX_ITEM_CONTENT_CLASS));
    }
    return $itemContent;
  }
  _postprocessRenderItem(args) {
    var $itemElement = renderer_default(args.itemElement);
    var selectedIndex = this._dataAdapter.getSelectedNodesKeys();
    if (!selectedIndex.length || !this._selectedGetter(args.itemData) || !this._isItemSelectable(args.itemData)) {
      this._setAriaSelectionAttribute($itemElement, "false");
      return;
    }
    var node = this._dataAdapter.getNodeByItem(args.itemData);
    if (node.internalFields.key === selectedIndex[0]) {
      $itemElement.addClass(this._selectedItemClass());
      this._setAriaSelectionAttribute($itemElement, "true");
    } else {
      this._setAriaSelectionAttribute($itemElement, "false");
    }
  }
  _isItemSelectable(item) {
    return false !== item.selectable;
  }
  _renderSeparator($itemsContainer) {
    renderer_default("<li>").appendTo($itemsContainer).addClass(DX_MENU_SEPARATOR_CLASS);
  }
  _itemClickHandler(e) {
    if (e._skipHandling) {
      return;
    }
    var itemClickActionHandler = this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));
    this._itemDXEventHandler(e, "onItemClick", {}, {
      beforeExecute: this._itemClick,
      afterExecute: itemClickActionHandler.bind(this)
    });
    e._skipHandling = true;
  }
  _itemClick(actionArgs) {
    var {
      event,
      itemData
    } = actionArgs.args[0];
    var $itemElement = this._getItemElementByEventArgs(event);
    var link = $itemElement && $itemElement.find(".".concat(ITEM_URL_CLASS2)).get(0);
    if (itemData.url && link) {
      link.click();
    }
  }
  _updateSubmenuVisibilityOnClick(actionArgs) {
    this._updateSelectedItemOnClick(actionArgs);
    if ("onClick" === this._getShowSubmenuMode()) {
      this._addExpandedClass(actionArgs.args[0].itemElement);
    }
  }
  _updateSelectedItemOnClick(actionArgs) {
    var args = actionArgs.args ? actionArgs.args[0] : actionArgs;
    if (!this._isItemSelectAllowed(args.itemData)) {
      return;
    }
    var selectedItemKey = this._dataAdapter.getSelectedNodesKeys();
    var selectedNode = selectedItemKey.length && this._dataAdapter.getNodeByKey(selectedItemKey[0]);
    if (selectedNode) {
      this._toggleItemSelection(selectedNode, false);
    }
    if (!selectedNode || selectedNode.internalFields.item !== args.itemData) {
      this.selectItem(args.itemData);
    } else {
      this._fireSelectionChangeEvent(null, this.option("selectedItem"));
      this._setOptionWithoutOptionChange("selectedItem", null);
    }
  }
  _isItemSelectAllowed(item) {
    var isSelectByClickEnabled = this._isSelectionEnabled() && this.option("selectByClick");
    return !this._isContainerEmpty() && isSelectByClickEnabled && this._isItemSelectable(item) && !this._itemsGetter(item);
  }
  _isContainerEmpty() {
    return this._itemContainer().is(":empty");
  }
  _syncSelectionOptions() {
    return asyncNoop();
  }
  _optionChanged(args) {
    switch (args.name) {
      case "showSubmenuMode":
        break;
      case "selectedItem":
        var node = this._dataAdapter.getNodeByItem(args.value);
        var selectedKey = this._dataAdapter.getSelectedNodesKeys()[0];
        if (node && node.internalFields.key !== selectedKey) {
          if (false === node.selectable) {
            break;
          }
          if (selectedKey) {
            this._toggleItemSelection(this._dataAdapter.getNodeByKey(selectedKey), false);
          }
          this._toggleItemSelection(node, true);
          this._updateSelectedItems();
        }
        break;
      case "cssClass":
      case "position":
      case "selectByClick":
      case "animation":
      case "useInkRipple":
        this._invalidate();
        break;
      default:
        super._optionChanged(args);
    }
  }
  _toggleItemSelection(node, value2) {
    var itemElement = this._getElementByItem(node.internalFields.item);
    itemElement && renderer_default(itemElement).toggleClass(DX_MENU_SELECTED_ITEM_CLASS);
    this._dataAdapter.toggleSelection(node.internalFields.key, value2);
  }
  _getElementByItem(itemData) {
    var result2;
    each(this._itemElements(), (_, itemElement) => {
      if (renderer_default(itemElement).data(this._itemDataKey()) !== itemData) {
        return true;
      }
      result2 = itemElement;
      return false;
    });
    return result2;
  }
  _updateSelectedItems(oldSelection, newSelection) {
    if (oldSelection || newSelection) {
      this._fireSelectionChangeEvent(newSelection, oldSelection);
    }
  }
  _fireSelectionChangeEvent(addedSelection, removedSelection) {
    this._createActionByOption("onSelectionChanged", {
      excludeValidators: ["disabled", "readOnly"]
    })({
      addedItems: [addedSelection],
      removedItems: [removedSelection]
    });
  }
  selectItem(itemElement) {
    var itemData = itemElement.nodeType ? this._getItemData(itemElement) : itemElement;
    var selectedKey = this._dataAdapter.getSelectedNodesKeys()[0];
    var selectedItem = this.option("selectedItem");
    var node = this._dataAdapter.getNodeByItem(itemData);
    if (node.internalFields.key !== selectedKey) {
      if (selectedKey) {
        this._toggleItemSelection(this._dataAdapter.getNodeByKey(selectedKey), false);
      }
      this._toggleItemSelection(node, true);
      this._updateSelectedItems(selectedItem, itemData);
      this._setOptionWithoutOptionChange("selectedItem", itemData);
    }
  }
  unselectItem(itemElement) {
    var itemData = itemElement.nodeType ? this._getItemData(itemElement) : itemElement;
    var node = this._dataAdapter.getNodeByItem(itemData);
    var selectedItem = this.option("selectedItem");
    if (node.internalFields.selected) {
      this._toggleItemSelection(node, false);
      this._updateSelectedItems(selectedItem, null);
      this._setOptionWithoutOptionChange("selectedItem", null);
    }
  }
};
MenuBase.ItemClass = m_item_default;
var m_menu_base_default = MenuBase;

// node_modules/devextreme/esm/__internal/ui/context_menu/m_context_menu.js
var DX_MENU_CLASS2 = "dx-menu";
var DX_MENU_ITEM_CLASS = "".concat(DX_MENU_CLASS2, "-item");
var DX_MENU_ITEM_EXPANDED_CLASS2 = "".concat(DX_MENU_ITEM_CLASS, "-expanded");
var DX_MENU_PHONE_CLASS = "dx-menu-phone-overlay";
var DX_MENU_ITEMS_CONTAINER_CLASS2 = "".concat(DX_MENU_CLASS2, "-items-container");
var DX_MENU_ITEM_WRAPPER_CLASS2 = "".concat(DX_MENU_ITEM_CLASS, "-wrapper");
var DX_SUBMENU_CLASS = "dx-submenu";
var DX_CONTEXT_MENU_CLASS = "dx-context-menu";
var DX_HAS_CONTEXT_MENU_CLASS = "dx-has-context-menu";
var DX_STATE_DISABLED_CLASS = "dx-state-disabled";
var DX_STATE_FOCUSED_CLASS = "dx-state-focused";
var DX_STATE_HOVER_CLASS = "dx-state-hover";
var OVERLAY_CONTENT_CLASS = "dx-overlay-content";
var FOCUS_UP2 = "up";
var FOCUS_DOWN2 = "down";
var FOCUS_LEFT2 = "left";
var FOCUS_RIGHT2 = "right";
var FOCUS_FIRST2 = "first";
var FOCUS_LAST2 = "last";
var ACTIONS = ["onShowing", "onShown", "onSubmenuCreated", "onHiding", "onHidden", "onPositioning", "onLeftFirstItem", "onLeftLastItem", "onCloseRootSubmenu", "onExpandLastSubmenu"];
var LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP2, FOCUS_DOWN2, FOCUS_FIRST2, FOCUS_LAST2];
var DEFAULT_SHOW_EVENT = "dxcontextmenu";
var window4 = getWindow();
var ContextMenu2 = class extends m_menu_base_default {
  getShowEvent(showEventOption) {
    var _a;
    if (isObject(showEventOption)) {
      if (null !== showEventOption.name) {
        return null !== (_a = showEventOption.name) && void 0 !== _a ? _a : DEFAULT_SHOW_EVENT;
      }
    } else {
      return showEventOption;
    }
    return null;
  }
  getShowDelay(showEventOption) {
    return isObject(showEventOption) && showEventOption.delay;
  }
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      showEvent: DEFAULT_SHOW_EVENT,
      hideOnOutsideClick: true,
      position: {
        at: "top left",
        my: "top left"
      },
      onShowing: null,
      onShown: null,
      onSubmenuCreated: null,
      onHiding: null,
      onHidden: null,
      onPositioning: null,
      submenuDirection: "auto",
      visible: false,
      target: void 0,
      onLeftFirstItem: null,
      onLeftLastItem: null,
      onCloseRootSubmenu: null,
      onExpandLastSubmenu: null
    });
  }
  _defaultOptionsRules() {
    return super._defaultOptionsRules().concat([{
      device: () => !hasWindow(),
      options: {
        animation: null
      }
    }]);
  }
  _setDeprecatedOptions() {
    super._setDeprecatedOptions();
    extend(this._deprecatedOptions, {
      closeOnOutsideClick: {
        since: "22.2",
        alias: "hideOnOutsideClick"
      }
    });
  }
  _initActions() {
    this._actions = {};
    each(ACTIONS, (index, action) => {
      this._actions[action] = this._createActionByOption(action) || noop;
    });
  }
  _setOptionsByReference() {
    super._setOptionsByReference();
    extend(this._optionsByReference, {
      animation: true,
      selectedItem: true
    });
  }
  _focusInHandler() {
  }
  _itemContainer() {
    return this._overlay ? this._overlay.$content() : renderer_default();
  }
  _eventBindingTarget() {
    return this._itemContainer();
  }
  itemsContainer() {
    return this._overlay ? this._overlay.$content() : void 0;
  }
  _supportedKeys() {
    return extend(super._supportedKeys(), {
      space: () => {
        var $item = renderer_default(this.option("focusedElement"));
        this.hide();
        if (!$item.length || !this._isSelectionEnabled()) {
          return;
        }
        this.selectItem($item[0]);
      },
      escape: this.hide
    });
  }
  _getActiveItem(last) {
    var $availableItems = this._getAvailableItems();
    var $focusedItem = $availableItems.filter(".".concat(DX_STATE_FOCUSED_CLASS));
    var $hoveredItem = $availableItems.filter(".".concat(DX_STATE_HOVER_CLASS));
    var $hoveredItemContainer = $hoveredItem.closest(".".concat(DX_MENU_ITEMS_CONTAINER_CLASS2));
    if ($hoveredItemContainer.find(".".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {
      return $focusedItem;
    }
    if ($hoveredItem.length) {
      return $hoveredItem;
    }
    return super._getActiveItem();
  }
  _moveFocus(location) {
    var $items = this._getItemsByLocation(location);
    var $oldTarget = this._getActiveItem(true);
    var $hoveredItem = this.itemsContainer().find(".".concat(DX_STATE_HOVER_CLASS));
    var $focusedItem = renderer_default(this.option("focusedElement"));
    var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);
    var $newTarget;
    switch (location) {
      case FOCUS_UP2:
        $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;
        this._setFocusedElement($newTarget);
        if ($oldTarget.is($items.first())) {
          this._actions.onLeftFirstItem($oldTarget);
        }
        break;
      case FOCUS_DOWN2:
        $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;
        this._setFocusedElement($newTarget);
        if ($oldTarget.is($items.last())) {
          this._actions.onLeftLastItem($oldTarget);
        }
        break;
      case FOCUS_RIGHT2:
        $newTarget = this.option("rtlEnabled") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);
        this._setFocusedElement($newTarget);
        break;
      case FOCUS_LEFT2:
        $newTarget = this.option("rtlEnabled") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();
        this._setFocusedElement($newTarget);
        break;
      case FOCUS_FIRST2:
        $newTarget = $items.first();
        this._setFocusedElement($newTarget);
        break;
      case FOCUS_LAST2:
        $newTarget = $items.last();
        this._setFocusedElement($newTarget);
        break;
      default:
        return super._moveFocus(location);
    }
  }
  _setFocusedElement($element) {
    if ($element && 0 !== $element.length) {
      this.option("focusedElement", getPublicElement($element));
    }
  }
  _getItemsByLocation(location) {
    var $activeItem = this._getActiveItem(true);
    var $items;
    if (LOCAL_SUBMENU_DIRECTIONS.includes(location)) {
      $items = $activeItem.closest(".".concat(DX_MENU_ITEMS_CONTAINER_CLASS2)).children().children();
    }
    $items = this._getAvailableItems($items);
    return $items;
  }
  _getAriaTarget() {
    return this.$element();
  }
  _refreshActiveDescendant() {
    if (isDefined(this._overlay)) {
      var $target = this._overlay.$content();
      super._refreshActiveDescendant($target);
    }
  }
  _hideSubmenuHandler() {
    var $curItem = this._getActiveItem(true);
    var $parentItem = $curItem.parents(".".concat(DX_MENU_ITEM_EXPANDED_CLASS2)).first();
    if ($parentItem.length) {
      this._hideSubmenusOnSameLevel($parentItem);
      this._hideSubmenu($curItem.closest(".".concat(DX_SUBMENU_CLASS)));
      return $parentItem;
    }
    this._actions.onCloseRootSubmenu($curItem);
  }
  _expandSubmenuHandler($items, location) {
    var $curItem = this._getActiveItem(true);
    var itemData = this._getItemData($curItem);
    var node = this._dataAdapter.getNodeByItem(itemData);
    var isItemHasSubmenu = this._hasSubmenu(node);
    var $submenu = $curItem.children(".".concat(DX_SUBMENU_CLASS));
    if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {
      if (!$submenu.length || "hidden" === $submenu.css("visibility")) {
        this._showSubmenu($curItem);
      }
      return this._nextItem(this._getItemsByLocation(location));
    }
    this._actions.onExpandLastSubmenu($curItem);
    return;
  }
  _clean() {
    if (this._overlay) {
      this._overlay.$element().remove();
      this._overlay = null;
    }
    this._detachShowContextMenuEvents(this._getTarget());
    super._clean();
  }
  _initMarkup() {
    this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);
    super._initMarkup();
  }
  _render() {
    super._render();
    this._renderVisibility(this.option("visible"));
    this._addWidgetClass();
  }
  _renderContentImpl() {
    this._detachShowContextMenuEvents(this._getTarget());
    this._attachShowContextMenuEvents();
  }
  _attachKeyboardEvents() {
    !this._keyboardListenerId && this._focusTarget().length && super._attachKeyboardEvents();
  }
  _renderContextMenuOverlay() {
    if (this._overlay) {
      return;
    }
    var overlayOptions = this._getOverlayOptions();
    this._overlay = this._createComponent(renderer_default("<div>").appendTo(this._$element), ui_overlay_default, overlayOptions);
    var $overlayContent = this._overlay.$content();
    $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);
    this._addCustomCssClass($overlayContent);
    this._addPlatformDependentClass($overlayContent);
    this._attachContextMenuEvent();
  }
  preventShowingDefaultContextMenuAboveOverlay() {
    var $itemContainer = this._itemContainer();
    var eventName = addNamespace(name, this.NAME);
    events_engine_default.off($itemContainer, eventName, ".".concat(DX_SUBMENU_CLASS));
    events_engine_default.on($itemContainer, eventName, ".".concat(DX_SUBMENU_CLASS), (e) => {
      e.stopPropagation();
      e.preventDefault();
      events_engine_default.off($itemContainer, eventName, ".".concat(DX_SUBMENU_CLASS));
    });
  }
  _itemContextMenuHandler(e) {
    super._itemContextMenuHandler(e);
    e.stopPropagation();
  }
  _addPlatformDependentClass($element) {
    if (devices_default.current().phone) {
      $element.addClass(DX_MENU_PHONE_CLASS);
    }
  }
  _detachShowContextMenuEvents(target) {
    var showEvent = this.getShowEvent(this.option("showEvent"));
    if (!showEvent) {
      return;
    }
    var eventName = addNamespace(showEvent, this.NAME);
    if (this._showContextMenuEventHandler) {
      events_engine_default.off(dom_adapter_default.getDocument(), eventName, target, this._showContextMenuEventHandler);
    } else {
      events_engine_default.off(renderer_default(target), eventName);
    }
  }
  _attachShowContextMenuEvents() {
    var target = this._getTarget();
    var showEvent = this.getShowEvent(this.option("showEvent"));
    if (!showEvent) {
      return;
    }
    var eventName = addNamespace(showEvent, this.NAME);
    var contextMenuAction = this._createAction((e) => {
      var delay = this.getShowDelay(this.option("showEvent"));
      if (delay) {
        setTimeout(() => this._show(e.event), delay);
      } else {
        this._show(e.event);
      }
    }, {
      validatingTargetName: "target"
    });
    var handler = (e) => contextMenuAction({
      event: e,
      target: renderer_default(e.currentTarget)
    });
    contextMenuAction = this._createAction(contextMenuAction);
    if (isRenderer(target) || target.nodeType || isWindow(target)) {
      this._showContextMenuEventHandler = void 0;
      events_engine_default.on(target, eventName, handler);
    } else {
      this._showContextMenuEventHandler = handler;
      events_engine_default.on(dom_adapter_default.getDocument(), eventName, target, this._showContextMenuEventHandler);
    }
  }
  _hoverEndHandler(e) {
    super._hoverEndHandler(e);
    e.stopPropagation();
  }
  _renderDimensions() {
  }
  _renderContainer($wrapper, submenuContainer) {
    var $holder = submenuContainer || this._itemContainer();
    $wrapper = renderer_default("<div>");
    $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css("visibility", submenuContainer ? "hidden" : "visible");
    if (!$wrapper.parent().hasClass(OVERLAY_CONTENT_CLASS)) {
      this._addCustomCssClass($wrapper);
    }
    var $itemsContainer = super._renderContainer($wrapper);
    if (submenuContainer) {
      return $itemsContainer;
    }
    if (this.option("width")) {
      return $itemsContainer.css("minWidth", this.option("width"));
    }
    if (this.option("height")) {
      return $itemsContainer.css("minHeight", this.option("height"));
    }
    return $itemsContainer;
  }
  _renderSubmenuItems(node, $itemFrame) {
    this._renderItems(this._getChildNodes(node), $itemFrame);
    this._actions.onSubmenuCreated({
      itemElement: getPublicElement($itemFrame),
      itemData: node.internalFields.item,
      submenuElement: getPublicElement($itemFrame.children(".".concat(DX_SUBMENU_CLASS)))
    });
  }
  _getOverlayOptions() {
    var position2 = this.option("position");
    var overlayOptions = {
      focusStateEnabled: this.option("focusStateEnabled"),
      animation: this.option("animation"),
      innerOverlay: true,
      hideOnOutsideClick: (e) => this._hideOnOutsideClickHandler(e),
      propagateOutsideClick: true,
      hideOnParentScroll: true,
      deferRendering: false,
      position: {
        at: position2.at,
        my: position2.my,
        of: this._getTarget(),
        collision: "flipfit"
      },
      shading: false,
      showTitle: false,
      height: "auto",
      width: "auto",
      onShown: this._overlayShownActionHandler.bind(this),
      onHiding: this._overlayHidingActionHandler.bind(this),
      onHidden: this._overlayHiddenActionHandler.bind(this),
      visualContainer: window4
    };
    return overlayOptions;
  }
  _overlayShownActionHandler(arg) {
    this._actions.onShown(arg);
  }
  _overlayHidingActionHandler(arg) {
    this._actions.onHiding(arg);
    if (!arg.cancel) {
      this._hideAllShownSubmenus();
      this._setOptionWithoutOptionChange("visible", false);
    }
  }
  _overlayHiddenActionHandler(arg) {
    this._actions.onHidden(arg);
  }
  _shouldHideOnOutsideClick(e) {
    var {
      closeOnOutsideClick,
      hideOnOutsideClick
    } = this.option();
    if (isFunction(hideOnOutsideClick)) {
      return hideOnOutsideClick(e);
    }
    if (isFunction(closeOnOutsideClick)) {
      return closeOnOutsideClick(e);
    }
    return hideOnOutsideClick || closeOnOutsideClick;
  }
  _hideOnOutsideClickHandler(e) {
    if (!this._shouldHideOnOutsideClick(e)) {
      return false;
    }
    if (dom_adapter_default.isDocument(e.target)) {
      return true;
    }
    var $activeItemContainer = this._getActiveItemsContainer(e.target);
    var $itemContainers = this._getItemsContainers();
    var $clickedItem = this._searchActiveItem(e.target);
    var $rootItem = this.$element().parents(".".concat(DX_MENU_ITEM_CLASS));
    var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;
    var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;
    if (isInnerOverlayClicked || isRootItemClicked) {
      if ("onClick" === this._getShowSubmenuMode()) {
        this._hideAllShownChildSubmenus($clickedItem);
      }
      return false;
    }
    return true;
  }
  _getActiveItemsContainer(target) {
    return renderer_default(target).closest(".".concat(DX_MENU_ITEMS_CONTAINER_CLASS2));
  }
  _getItemsContainers() {
    return this._overlay.$content().find(".".concat(DX_MENU_ITEMS_CONTAINER_CLASS2));
  }
  _searchActiveItem(target) {
    return renderer_default(target).closest(".".concat(DX_MENU_ITEM_CLASS)).eq(0);
  }
  _isIncludeOverlay($activeOverlay, $allOverlays) {
    var isSame = false;
    each($allOverlays, (index, $overlay) => {
      if ($activeOverlay.is($overlay) && !isSame) {
        isSame = true;
      }
    });
    return isSame;
  }
  _hideAllShownChildSubmenus($clickedItem) {
    var $submenuElements = $clickedItem.find(".".concat(DX_SUBMENU_CLASS));
    var shownSubmenus = extend([], this._shownSubmenus);
    if ($submenuElements.length > 0) {
      each(shownSubmenus, (index, $submenu) => {
        var $context = this._searchActiveItem($submenu.context).parent();
        if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {
          this._hideSubmenu($submenu);
        }
      });
    }
  }
  _showSubmenu($item) {
    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));
    this._hideSubmenusOnSameLevel($item);
    if (!this._hasSubmenu(node)) {
      return;
    }
    var $submenu = $item.children(".".concat(DX_SUBMENU_CLASS));
    var isSubmenuRendered = $submenu.length;
    super._showSubmenu($item);
    if (!isSubmenuRendered) {
      this._renderSubmenuItems(node, $item);
    }
    if (!this._isSubmenuVisible($submenu)) {
      this._drawSubmenu($item);
    }
  }
  _hideSubmenusOnSameLevel($item) {
    var $expandedItems = $item.parent(".".concat(DX_MENU_ITEM_WRAPPER_CLASS2)).siblings().find(".".concat(DX_MENU_ITEM_EXPANDED_CLASS2));
    if ($expandedItems.length) {
      $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS2);
      this._hideSubmenu($expandedItems.find(".".concat(DX_SUBMENU_CLASS)));
    }
  }
  _hideSubmenuGroup($submenu) {
    if (this._isSubmenuVisible($submenu)) {
      this._hideSubmenuCore($submenu);
    }
  }
  _isSubmenuVisible($submenu) {
    return "visible" === $submenu.css("visibility");
  }
  _drawSubmenu($itemElement) {
    var animation2 = this.option("animation") ? this.option("animation").show : {};
    var $submenu = $itemElement.children(".".concat(DX_SUBMENU_CLASS));
    var submenuPosition = this._getSubmenuPosition($itemElement);
    if (this._overlay && this._overlay.option("visible")) {
      if (!isDefined(this._shownSubmenus)) {
        this._shownSubmenus = [];
      }
      if (!this._shownSubmenus.includes($submenu)) {
        this._shownSubmenus.push($submenu);
      }
      if (animation2) {
        fx_default.stop($submenu);
      }
      position_default.setup($submenu, submenuPosition);
      if (animation2) {
        if (isPlainObject(animation2.to)) {
          animation2.to.position = submenuPosition;
        }
        this._animate($submenu, animation2);
      }
      $submenu.css("visibility", "visible");
    }
  }
  _animate($container, options2) {
    fx_default.animate($container, options2);
  }
  _getSubmenuPosition($rootItem) {
    var submenuDirection = this.option("submenuDirection").toLowerCase();
    var $rootItemWrapper = $rootItem.parent(".".concat(DX_MENU_ITEM_WRAPPER_CLASS2));
    var position2 = {
      collision: "flip",
      of: $rootItemWrapper,
      offset: {
        h: 0,
        v: -1
      }
    };
    switch (submenuDirection) {
      case "left":
        position2.at = "left top";
        position2.my = "right top";
        break;
      case "right":
        position2.at = "right top";
        position2.my = "left top";
        break;
      default:
        if (this.option("rtlEnabled")) {
          position2.at = "left top";
          position2.my = "right top";
        } else {
          position2.at = "right top";
          position2.my = "left top";
        }
    }
    return position2;
  }
  _updateSubmenuVisibilityOnClick(actionArgs) {
    if (!actionArgs.args.length) {
      return;
    }
    var {
      itemData
    } = actionArgs.args[0];
    var node = this._dataAdapter.getNodeByItem(itemData);
    if (!node) {
      return;
    }
    var $itemElement = renderer_default(actionArgs.args[0].itemElement);
    var $submenu = $itemElement.find(".".concat(DX_SUBMENU_CLASS));
    var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;
    if (shouldRenderSubmenu) {
      this._renderSubmenuItems(node, $itemElement);
      $submenu = $itemElement.find(".".concat(DX_SUBMENU_CLASS));
    }
    if ($itemElement.context === $submenu.context && "visible" === $submenu.css("visibility")) {
      return;
    }
    this._updateSelectedItemOnClick(actionArgs);
    var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;
    if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {
      return;
    }
    if (0 === $submenu.length) {
      var $prevSubmenu = renderer_default($itemElement.parents(".".concat(DX_SUBMENU_CLASS))[0]);
      this._hideSubmenu($prevSubmenu);
      if (!actionArgs.canceled && this._overlay && this._overlay.option("visible")) {
        this.option("visible", false);
      }
    } else {
      if (this._shownSubmenus && this._shownSubmenus.length > 0) {
        if (this._shownSubmenus[0].is($submenu)) {
          this._hideSubmenu($submenu);
        }
      }
      this._showSubmenu($itemElement);
    }
  }
  _hideSubmenu($curSubmenu) {
    var shownSubmenus = extend([], this._shownSubmenus);
    each(shownSubmenus, (index, $submenu) => {
      if ($curSubmenu.is($submenu) || contains($curSubmenu[0], $submenu[0])) {
        $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS2);
        this._hideSubmenuCore($submenu);
      }
    });
  }
  _hideSubmenuCore($submenu) {
    var index = this._shownSubmenus.indexOf($submenu);
    var animation2 = this.option("animation") ? this.option("animation").hide : null;
    if (index >= 0) {
      this._shownSubmenus.splice(index, 1);
    }
    this._stopAnimate($submenu);
    animation2 && this._animate($submenu, animation2);
    $submenu.css("visibility", "hidden");
  }
  _stopAnimate($container) {
    fx_default.stop($container, true);
  }
  _hideAllShownSubmenus() {
    var shownSubmenus = extend([], this._shownSubmenus);
    var $expandedItems = this._overlay.$content().find(".".concat(DX_MENU_ITEM_EXPANDED_CLASS2));
    $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS2);
    each(shownSubmenus, (_, $submenu) => {
      this._hideSubmenu($submenu);
    });
  }
  _visibilityChanged(visible) {
    if (visible) {
      this._renderContentImpl();
    }
  }
  _optionChanged(args) {
    if (ACTIONS.includes(args.name)) {
      this._initActions();
      return;
    }
    switch (args.name) {
      case "visible":
        this._renderVisibility(args.value);
        break;
      case "showEvent":
      case "position":
      case "submenuDirection":
        this._invalidate();
        break;
      case "target":
        args.previousValue && this._detachShowContextMenuEvents(args.previousValue);
        this._invalidate();
        break;
      case "closeOnOutsideClick":
      case "hideOnOutsideClick":
        break;
      default:
        super._optionChanged(args);
    }
  }
  _renderVisibility(showing) {
    return showing ? this._show() : this._hide();
  }
  _toggleVisibility() {
  }
  _show(event) {
    var _a;
    var args = {
      jQEvent: event
    };
    var promise = Deferred().reject().promise();
    this._actions.onShowing(args);
    if (args.cancel) {
      return promise;
    }
    var position2 = this._positionContextMenu(event);
    if (position2) {
      if (!this._overlay) {
        this._renderContextMenuOverlay();
        this._overlay.$content().addClass(this._widgetClass());
        this._renderFocusState();
        this._attachHoverEvents();
        this._attachClickEvent();
        this._renderItems(this._dataAdapter.getRootNodes());
      }
      this._setOptionWithoutOptionChange("visible", true);
      this._overlay.option("position", position2);
      promise = this._overlay.show();
      event && event.stopPropagation();
      this._setAriaAttributes();
      if ((null === (_a = null === event || void 0 === event ? void 0 : event.originalEvent) || void 0 === _a ? void 0 : _a.type) === hold_default.name) {
        this.preventShowingDefaultContextMenuAboveOverlay();
      }
    }
    return promise;
  }
  _setAriaAttributes() {
    this._overlayContentId = "dx-".concat(new guid_default());
    this.setAria("owns", this._overlayContentId);
    this.setAria({
      id: this._overlayContentId,
      role: "menu"
    }, this._overlay.$content());
  }
  _cleanAriaAttributes() {
    this._overlay && this.setAria("id", null, this._overlay.$content());
    this.setAria("owns", void 0);
  }
  _getTarget() {
    return this.option("target") || this.option("position").of || renderer_default(dom_adapter_default.getDocument());
  }
  _getContextMenuPosition() {
    return extend({}, this.option("position"), {
      of: this._getTarget()
    });
  }
  _positionContextMenu(jQEvent) {
    var position2 = this._getContextMenuPosition();
    var isInitialPosition = this._isInitialOptionValue("position");
    var positioningAction = this._createActionByOption("onPositioning");
    if (jQEvent && jQEvent.preventDefault && isInitialPosition) {
      position2.of = jQEvent;
    }
    var actionArgs = {
      position: position2,
      event: jQEvent
    };
    positioningAction(actionArgs);
    if (actionArgs.cancel) {
      position2 = null;
    } else if (actionArgs.event) {
      actionArgs.event.cancel = true;
      jQEvent.preventDefault();
    }
    return position2;
  }
  _refresh() {
    if (!hasWindow()) {
      super._refresh();
    } else if (this._overlay) {
      var lastPosition = this._overlay.option("position");
      super._refresh();
      this._overlay && this._overlay.option("position", lastPosition);
    } else {
      super._refresh();
    }
  }
  _hide() {
    var promise;
    if (this._overlay) {
      promise = this._overlay.hide();
      this._setOptionWithoutOptionChange("visible", false);
    }
    this._cleanAriaAttributes();
    this.option("focusedElement", null);
    return promise || Deferred().reject().promise();
  }
  toggle(showing) {
    var visible = this.option("visible");
    showing = void 0 === showing ? !visible : showing;
    return this._renderVisibility(showing);
  }
  show() {
    return this.toggle(true);
  }
  hide() {
    return this.toggle(false);
  }
};
component_registrator_default("dxContextMenu", ContextMenu2);
var m_context_menu_default = ContextMenu2;

// node_modules/devextreme/esm/ui/context_menu.js
var context_menu_default = m_context_menu_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/context_menu/m_context_menu.js
var CONTEXT_MENU = "dx-context-menu";
var viewName = {
  columnHeadersView: "header",
  rowsView: "content",
  footerView: "footer",
  headerPanel: "headerPanel"
};
var VIEW_NAMES = ["columnHeadersView", "rowsView", "footerView", "headerPanel"];
var ContextMenuController = class extends m_modules_default.ViewController {
  init() {
    this.createAction("onContextMenuPreparing");
  }
  getContextMenuItems(dxEvent) {
    if (!dxEvent) {
      return false;
    }
    var that = this;
    var $targetElement = renderer_default(dxEvent.target);
    var $element;
    var $targetRowElement;
    var $targetCellElement;
    var menuItems;
    each(VIEW_NAMES, function() {
      var _a, _b;
      var view = that.getView(this);
      $element = view && view.element();
      if ($element && ($element.is($targetElement) || $element.find($targetElement).length)) {
        $targetCellElement = $targetElement.closest(".dx-row > td, .dx-row > tr");
        $targetRowElement = $targetCellElement.parent();
        var rowIndex = view.getRowIndex($targetRowElement);
        var columnIndex = $targetCellElement[0] && $targetCellElement[0].cellIndex;
        var rowOptions = $targetRowElement.data("options");
        var options2 = {
          event: dxEvent,
          targetElement: getPublicElement($targetElement),
          target: viewName[this],
          rowIndex,
          row: view._getRows()[rowIndex],
          columnIndex,
          column: null === (_b = null === (_a = null === rowOptions || void 0 === rowOptions ? void 0 : rowOptions.cells) || void 0 === _a ? void 0 : _a[columnIndex]) || void 0 === _b ? void 0 : _b.column
        };
        options2.items = view.getContextMenuItems && view.getContextMenuItems(options2);
        that.executeAction("onContextMenuPreparing", options2);
        that._contextMenuPrepared(options2);
        menuItems = options2.items;
        if (menuItems) {
          return false;
        }
      }
      return;
    });
    return menuItems;
  }
  _contextMenuPrepared(options2) {
  }
};
var ContextMenuView = class extends m_modules_default.View {
  init() {
    super.init();
    this._contextMenuController = this.getController("contextMenu");
  }
  _renderCore() {
    var $element = this.element().addClass(CONTEXT_MENU);
    this.setAria("role", "presentation", $element);
    this._createComponent($element, context_menu_default, {
      onPositioning: (actionArgs) => {
        var {
          event
        } = actionArgs;
        var contextMenuInstance = actionArgs.component;
        var items = this._contextMenuController.getContextMenuItems(event);
        if (items) {
          contextMenuInstance.option("items", items);
          event.stopPropagation();
        } else {
          actionArgs.cancel = true;
        }
      },
      onItemClick(params) {
        var _a, _b;
        null === (_b = null === (_a = params.itemData) || void 0 === _a ? void 0 : _a.onItemClick) || void 0 === _b ? void 0 : _b.call(_a, params);
      },
      cssClass: this.getWidgetContainerClass(),
      target: this.component.$element()
    });
  }
};
var contextMenuModule = {
  defaultOptions: () => ({
    onContextMenuPreparing: null
  }),
  controllers: {
    contextMenu: ContextMenuController
  },
  views: {
    contextMenuView: ContextMenuView
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/context_menu.js
m_core_default.registerModule("contextMenu", contextMenuModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/error_handling/m_error_handling.js
var ERROR_ROW_CLASS2 = "dx-error-row";
var ERROR_MESSAGE_CLASS = "dx-error-message";
var ERROR_CLOSEBUTTON_CLASS = "dx-closebutton";
var ACTION_CLASS = "action";
var ErrorHandlingController = class extends m_modules_default.ViewController {
  init() {
    this._resizingController = this.getController("resizing");
    this._columnsController = this.getController("columns");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._rowsView = this.getView("rowsView");
  }
  _createErrorRow(error, $tableElements) {
    var $errorRow;
    var $closeButton;
    var $errorMessage = this._renderErrorMessage(error);
    if ($tableElements) {
      $errorRow = renderer_default("<tr>").attr("role", "row").addClass(ERROR_ROW_CLASS2);
      $closeButton = renderer_default("<div>").addClass(ERROR_CLOSEBUTTON_CLASS).addClass(this.addWidgetPrefix(ACTION_CLASS));
      events_engine_default.on($closeButton, CLICK_EVENT_NAME, this.createAction((args) => {
        var _a, _b;
        var e = args.event;
        var $errorRow2;
        var errorRowIndex = renderer_default(e.currentTarget).closest(".".concat(ERROR_ROW_CLASS2)).index();
        e.stopPropagation();
        each($tableElements, (_, tableElement) => {
          $errorRow2 = renderer_default(tableElement).children("tbody").children("tr").eq(errorRowIndex);
          this.removeErrorRow($errorRow2);
        });
        null === (_b = null === (_a = this._resizingController) || void 0 === _a ? void 0 : _a.fireContentReadyAction) || void 0 === _b ? void 0 : _b.call(_a);
      }));
      renderer_default("<td>").attr({
        colSpan: this._columnsController.getVisibleColumns().length,
        role: "gridcell"
      }).prepend($closeButton).append($errorMessage).appendTo($errorRow);
      return $errorRow;
    }
    return $errorMessage;
  }
  _renderErrorMessage(error) {
    var message = error.url ? error.message.replace(error.url, "") : error.message || error;
    var $message = renderer_default("<div>").attr("role", "alert").attr("aria-roledescription", message_default.format("dxDataGrid-ariaError")).addClass(ERROR_MESSAGE_CLASS).text(message);
    if (error.url) {
      renderer_default("<a>").attr("href", error.url).text(error.url).appendTo($message);
    }
    return $message;
  }
  renderErrorRow(error, rowIndex, $popupContent) {
    var _a, _b;
    var that = this;
    var $errorMessageElement;
    var $firstErrorRow;
    if ($popupContent) {
      $popupContent.find(".".concat(ERROR_MESSAGE_CLASS)).remove();
      $errorMessageElement = that._createErrorRow(error);
      $popupContent.prepend($errorMessageElement);
      return $errorMessageElement;
    }
    var viewElement = rowIndex >= 0 || !that._columnHeadersView.isVisible() ? that._rowsView : that._columnHeadersView;
    var $tableElements = viewElement.getTableElements();
    each($tableElements, (_, tableElement) => {
      $errorMessageElement = that._createErrorRow(error, $tableElements);
      $firstErrorRow = $firstErrorRow || $errorMessageElement;
      if (rowIndex >= 0) {
        var $row = viewElement._getRowElements(renderer_default(tableElement)).eq(rowIndex);
        that.removeErrorRow($row.next());
        $errorMessageElement.insertAfter($row);
      } else {
        var $tbody = renderer_default(tableElement).children("tbody");
        var rowElements = $tbody.children("tr");
        if (that._columnHeadersView.isVisible()) {
          that.removeErrorRow(rowElements.last());
          renderer_default(tableElement).append($errorMessageElement);
        } else {
          that.removeErrorRow(rowElements.first());
          $tbody.first().prepend($errorMessageElement);
        }
      }
    });
    null === (_b = null === (_a = this._resizingController) || void 0 === _a ? void 0 : _a.fireContentReadyAction) || void 0 === _b ? void 0 : _b.call(_a);
    return $firstErrorRow;
  }
  removeErrorRow($row) {
    if (!$row) {
      var $columnHeaders = this._columnHeadersView && this._columnHeadersView.element();
      $row = $columnHeaders && $columnHeaders.find(".".concat(ERROR_ROW_CLASS2));
      if (!$row || !$row.length) {
        var $rowsViewElement = this._rowsView.element();
        $row = $rowsViewElement && $rowsViewElement.find(".".concat(ERROR_ROW_CLASS2));
      }
    }
    $row && $row.hasClass(ERROR_ROW_CLASS2) && $row.remove();
  }
  optionChanged(args) {
    switch (args.name) {
      case "errorRowEnabled":
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
};
var data2 = (Base) => class extends Base {
  init() {
    super.init();
    this.dataErrorOccurred.add((error, $popupContent) => {
      if (this.option("errorRowEnabled")) {
        this._errorHandlingController.renderErrorRow(error, void 0, $popupContent);
      }
    });
    this.changed.add((e) => {
      var _a, _b;
      if (e && "loadError" === e.changeType) {
        return;
      }
      if (this._editingController && !this._editingController.hasChanges()) {
        null === (_b = null === (_a = this._errorHandlingController) || void 0 === _a ? void 0 : _a.removeErrorRow) || void 0 === _b ? void 0 : _b.call(_a);
      }
    });
  }
};
var errorHandlingModule = {
  defaultOptions: () => ({
    errorRowEnabled: true
  }),
  controllers: {
    errorHandling: ErrorHandlingController
  },
  extenders: {
    controllers: {
      data: data2
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/error_handling.js
m_core_default.registerModule("errorHandling", errorHandlingModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/views/m_grid_view.js
var BORDERS_CLASS = "borders";
var TABLE_FIXED_CLASS2 = "table-fixed";
var IMPORTANT_MARGIN_CLASS = "important-margin";
var GRIDBASE_CONTAINER_CLASS = "dx-gridbase-container";
var GROUP_ROW_SELECTOR = "tr.dx-group-row";
var HIDDEN_COLUMNS_WIDTH2 = "adaptiveHidden";
var VIEW_NAMES2 = ["columnsSeparatorView", "blockSeparatorView", "trackerView", "headerPanel", "columnHeadersView", "rowsView", "footerView", "columnChooserView", "filterPanelView", "pagerView", "draggingHeaderView", "contextMenuView", "errorView", "headerFilterView", "filterBuilderView"];
var isPercentWidth = function(width) {
  return isString(width) && width.endsWith("%");
};
var isPixelWidth = function(width) {
  return isString(width) && width.endsWith("px");
};
var calculateFreeWidth = function(that, widths) {
  var contentWidth = that._rowsView.contentWidth();
  var totalWidth = that._getTotalWidth(widths, contentWidth);
  return contentWidth - totalWidth;
};
var calculateFreeWidthWithCurrentMinWidth = function(that, columnIndex, currentMinWidth, widths) {
  return calculateFreeWidth(that, widths.map((width, index) => index === columnIndex ? currentMinWidth : width));
};
var restoreFocus2 = function(focusedElement, selectionRange) {
  hiddenFocus(focusedElement, true);
  m_utils_default.setSelectionRange(focusedElement, selectionRange);
};
var ResizingController = class extends m_modules_default.ViewController {
  init() {
    this._prevContentMinHeight = null;
    this._dataController = this.getController("data");
    this._columnsController = this.getController("columns");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._adaptiveColumnsController = this.getController("adaptiveColumns");
    this._editorFactoryController = this.getController("editorFactory");
    this._footerView = this.getView("footerView");
    this._rowsView = this.getView("rowsView");
  }
  _initPostRenderHandlers() {
    if (!this._refreshSizesHandler) {
      this._refreshSizesHandler = (e) => {
        var resizeDeferred = new Deferred().resolve(null);
        var changeType = null === e || void 0 === e ? void 0 : e.changeType;
        var isDelayed = null === e || void 0 === e ? void 0 : e.isDelayed;
        var needFireContentReady = changeType && "updateSelection" !== changeType && "updateFocusedRow" !== changeType && "pageIndex" !== changeType && !isDelayed;
        this._dataController.changed.remove(this._refreshSizesHandler);
        if (this._checkSize()) {
          resizeDeferred = this._refreshSizes(e);
        }
        if (needFireContentReady) {
          when(resizeDeferred).done(() => {
            this._setAriaLabel();
            this.fireContentReadyAction();
          });
        }
      };
      this._dataController.changed.add(() => {
        this._dataController.changed.add(this._refreshSizesHandler);
      });
    }
  }
  _refreshSizes(e) {
    var _a;
    var resizeDeferred = new Deferred().resolve(null);
    var changeType = null === e || void 0 === e ? void 0 : e.changeType;
    var isDelayed = null === e || void 0 === e ? void 0 : e.isDelayed;
    var items = this._dataController.items();
    if (!e || "refresh" === changeType || "prepend" === changeType || "append" === changeType) {
      if (!isDelayed) {
        resizeDeferred = this.resize();
      }
    } else if ("update" === changeType) {
      if (0 === (null === (_a = e.changeTypes) || void 0 === _a ? void 0 : _a.length)) {
        return resizeDeferred;
      }
      if ((items.length > 1 || "insert" !== e.changeTypes[0]) && !(0 === items.length && "remove" === e.changeTypes[0]) && !e.needUpdateDimensions) {
        resizeDeferred = new Deferred();
        this._waitAsyncTemplates().done(() => {
          deferUpdate(() => deferRender(() => deferUpdate(() => {
            this._setScrollerSpacing();
            this._rowsView.resize();
            resizeDeferred.resolve();
          })));
        }).fail(resizeDeferred.reject);
      } else {
        resizeDeferred = this.resize();
      }
    }
    return resizeDeferred;
  }
  fireContentReadyAction() {
    this.component._fireContentReadyAction();
  }
  _getWidgetAriaLabel() {
    return "dxDataGrid-ariaDataGrid";
  }
  _setAriaLabel() {
    var totalItemsCount = Math.max(0, this._dataController.totalItemsCount());
    this.component.setAria("label", message_default.format(this._getWidgetAriaLabel(), totalItemsCount, this.component.columnCount()), this.component.$element().children(".".concat(GRIDBASE_CONTAINER_CLASS)));
  }
  _getBestFitWidths() {
    var _a;
    var rowsView17 = this._rowsView;
    var columnHeadersView8 = this._columnHeadersView;
    var widths = rowsView17.getColumnWidths();
    if (!(null === widths || void 0 === widths ? void 0 : widths.length)) {
      var headersTableElement = columnHeadersView8.getTableElement();
      columnHeadersView8.setTableElement(null === (_a = rowsView17.getTableElement()) || void 0 === _a ? void 0 : _a.children(".dx-header"));
      widths = columnHeadersView8.getColumnWidths();
      columnHeadersView8.setTableElement(headersTableElement);
    }
    return widths;
  }
  _setVisibleWidths(visibleColumns, widths) {
    var columnsController = this._columnsController;
    columnsController.beginUpdate();
    each(visibleColumns, (index, column) => {
      var columnId = columnsController.getColumnId(column);
      columnsController.columnOption(columnId, "visibleWidth", widths[index]);
    });
    columnsController.endUpdate();
  }
  _toggleBestFitModeForView(view, className, isBestFit) {
    if (!view || !view.isVisible()) {
      return;
    }
    var $rowsTables = this._rowsView.getTableElements();
    var $viewTables = view.getTableElements();
    each($rowsTables, (index, tableElement) => {
      var $tableBody;
      var $rowsTable = renderer_default(tableElement);
      var $viewTable = $viewTables.eq(index);
      if ($viewTable && $viewTable.length) {
        if (isBestFit) {
          $tableBody = $viewTable.children("tbody").appendTo($rowsTable);
        } else {
          $tableBody = $rowsTable.children(".".concat(className)).appendTo($viewTable);
        }
        $tableBody.toggleClass(className, isBestFit);
        $tableBody.toggleClass(this.addWidgetPrefix("best-fit"), isBestFit);
      }
    });
  }
  _toggleBestFitMode(isBestFit) {
    var $rowsTable = this._rowsView.getTableElement();
    var $rowsFixedTable = this._rowsView.getTableElements().eq(1);
    if (!$rowsTable) {
      return;
    }
    $rowsTable.css("tableLayout", isBestFit ? "auto" : "fixed");
    $rowsTable.children("colgroup").css("display", isBestFit ? "none" : "");
    each($rowsFixedTable.find(GROUP_ROW_SELECTOR), (idx, item) => {
      renderer_default(item).css("display", isBestFit ? "none" : "");
    });
    $rowsFixedTable.toggleClass(this.addWidgetPrefix(TABLE_FIXED_CLASS2), !isBestFit);
    this._toggleBestFitModeForView(this._columnHeadersView, "dx-header", isBestFit);
    this._toggleBestFitModeForView(this._footerView, "dx-footer", isBestFit);
    if (this._needStretch()) {
      $rowsTable.get(0).style.width = isBestFit ? "auto" : "";
    }
  }
  _toggleContentMinHeight(value2) {
    var scrollable = this._rowsView.getScrollable();
    var $contentElement = this._rowsView._findContentElement();
    if (false === (null === scrollable || void 0 === scrollable ? void 0 : scrollable.option("useNative"))) {
      if (true === value2) {
        this._prevContentMinHeight = $contentElement.get(0).style.minHeight;
      }
      if (isDefined(this._prevContentMinHeight)) {
        $contentElement.css({
          minHeight: value2 ? m_utils_default.getContentHeightLimit(browser_default) : this._prevContentMinHeight
        });
      }
    }
  }
  _synchronizeColumns() {
    var columnsController = this._columnsController;
    var visibleColumns = columnsController.getVisibleColumns();
    var columnAutoWidth = this.option("columnAutoWidth");
    var wordWrapEnabled = this.option("wordWrapEnabled");
    var hasUndefinedColumnWidth = visibleColumns.some((column) => !isDefined(column.width));
    var needBestFit = this._needBestFit();
    var hasMinWidth = false;
    var resetBestFitMode;
    var isColumnWidthsCorrected = false;
    var resultWidths = [];
    var focusedElement;
    var selectionRange;
    !needBestFit && each(visibleColumns, (index, column) => {
      if ("auto" === column.width) {
        needBestFit = true;
        return false;
      }
      return;
    });
    each(visibleColumns, (index, column) => {
      if (column.minWidth) {
        hasMinWidth = true;
        return false;
      }
      return;
    });
    this._setVisibleWidths(visibleColumns, []);
    var $element = this.component.$element();
    if (needBestFit) {
      focusedElement = dom_adapter_default.getActiveElement($element.get(0));
      selectionRange = m_utils_default.getSelectionRange(focusedElement);
      this._toggleBestFitMode(true);
      resetBestFitMode = true;
    }
    this._toggleContentMinHeight(wordWrapEnabled);
    if ($element && $element.get(0) && this._maxWidth) {
      delete this._maxWidth;
      $element[0].style.maxWidth = "";
    }
    deferUpdate(() => {
      if (needBestFit) {
        resultWidths = this._getBestFitWidths();
        each(visibleColumns, (index, column) => {
          var columnId = columnsController.getColumnId(column);
          columnsController.columnOption(columnId, "bestFitWidth", resultWidths[index], true);
        });
      } else if (hasMinWidth) {
        resultWidths = this._getBestFitWidths();
      }
      each(visibleColumns, function(index) {
        var {
          width
        } = this;
        if ("auto" !== width) {
          if (isDefined(width)) {
            resultWidths[index] = isNumeric(width) || isPixelWidth(width) ? parseFloat(width) : width;
          } else if (!columnAutoWidth) {
            resultWidths[index] = void 0;
          }
        }
      });
      if (resetBestFitMode) {
        this._toggleBestFitMode(false);
        resetBestFitMode = false;
        if (focusedElement && focusedElement !== dom_adapter_default.getActiveElement()) {
          var isFocusOutsideWindow = getBoundingRect(focusedElement).bottom < 0;
          if (!isFocusOutsideWindow) {
            restoreFocus2(focusedElement, selectionRange);
          }
        }
      }
      isColumnWidthsCorrected = this._correctColumnWidths(resultWidths, visibleColumns);
      if (columnAutoWidth) {
        !function() {
          var expandColumnWidth;
          each(visibleColumns, (index, column) => {
            if ("groupExpand" === column.type) {
              expandColumnWidth = resultWidths[index];
            }
          });
          each(visibleColumns, (index, column) => {
            if ("groupExpand" === column.type && expandColumnWidth) {
              resultWidths[index] = expandColumnWidth;
            }
          });
        }();
        if (this._needStretch()) {
          this._processStretch(resultWidths, visibleColumns);
        }
      }
      deferRender(() => {
        if (needBestFit || isColumnWidthsCorrected || hasUndefinedColumnWidth) {
          this._setVisibleWidths(visibleColumns, resultWidths);
        }
        if (wordWrapEnabled) {
          this._toggleContentMinHeight(false);
        }
      });
    });
  }
  _needBestFit() {
    return this.option("columnAutoWidth");
  }
  _needStretch() {
    return this._columnsController.getVisibleColumns().some((c) => "auto" === c.width && !c.command);
  }
  _getAverageColumnsWidth(resultWidths) {
    var freeWidth = calculateFreeWidth(this, resultWidths);
    var columnCountWithoutWidth = resultWidths.filter((width) => void 0 === width).length;
    return freeWidth / columnCountWithoutWidth;
  }
  _correctColumnWidths(resultWidths, visibleColumns) {
    var that = this;
    var i;
    var hasPercentWidth = false;
    var hasAutoWidth = false;
    var isColumnWidthsCorrected = false;
    var $element = that.component.$element();
    var hasWidth = that._hasWidth;
    var _loop = function() {
      var index = i;
      var column = visibleColumns[index];
      var isHiddenColumn = resultWidths[index] === HIDDEN_COLUMNS_WIDTH2;
      var width = resultWidths[index];
      var {
        minWidth
      } = column;
      if (minWidth) {
        if (void 0 === width) {
          var averageColumnsWidth = that._getAverageColumnsWidth(resultWidths);
          width = averageColumnsWidth;
        } else if (isPercentWidth(width)) {
          var freeWidth = calculateFreeWidthWithCurrentMinWidth(that, index, minWidth, resultWidths);
          if (freeWidth < 0) {
            width = -1;
          }
        }
      }
      var realColumnWidth = that._getRealColumnWidth(index, resultWidths.map((columnWidth, columnIndex) => index === columnIndex ? width : columnWidth));
      if (minWidth && !isHiddenColumn && realColumnWidth < minWidth) {
        resultWidths[index] = minWidth;
        isColumnWidthsCorrected = true;
        i = -1;
      }
      if (!isDefined(column.width)) {
        hasAutoWidth = true;
      }
      if (isPercentWidth(column.width)) {
        hasPercentWidth = true;
      }
    };
    for (i = 0; i < visibleColumns.length; i++) {
      _loop();
    }
    if (!hasAutoWidth && resultWidths.length) {
      var $rowsViewElement = that._rowsView.element();
      var contentWidth = that._rowsView.contentWidth();
      var scrollbarWidth = that._rowsView.getScrollbarWidth();
      var totalWidth = that._getTotalWidth(resultWidths, contentWidth);
      if (totalWidth < contentWidth) {
        var lastColumnIndex = m_utils_default.getLastResizableColumnIndex(visibleColumns, resultWidths);
        if (lastColumnIndex >= 0) {
          resultWidths[lastColumnIndex] = "auto";
          isColumnWidthsCorrected = true;
          if (false === hasWidth && !hasPercentWidth) {
            var borderWidth = that.option("showBorders") ? Math.ceil(getOuterWidth($rowsViewElement) - getInnerWidth($rowsViewElement)) : 0;
            that._maxWidth = totalWidth + scrollbarWidth + borderWidth;
            $element.css("maxWidth", that._maxWidth);
          }
        }
      }
    }
    return isColumnWidthsCorrected;
  }
  _processStretch(resultSizes, visibleColumns) {
    var groupSize = this._rowsView.contentWidth();
    var tableSize = this._getTotalWidth(resultSizes, groupSize);
    var unusedIndexes = {
      length: 0
    };
    if (!resultSizes.length) {
      return;
    }
    each(visibleColumns, function(index) {
      if (this.width || resultSizes[index] === HIDDEN_COLUMNS_WIDTH2) {
        unusedIndexes[index] = true;
        unusedIndexes.length++;
      }
    });
    var diff = groupSize - tableSize;
    var diffElement = Math.floor(diff / (resultSizes.length - unusedIndexes.length));
    var onePixelElementsCount = diff - diffElement * (resultSizes.length - unusedIndexes.length);
    if (diff >= 0) {
      for (var i = 0; i < resultSizes.length; i++) {
        if (unusedIndexes[i]) {
          continue;
        }
        resultSizes[i] += diffElement;
        if (onePixelElementsCount > 0) {
          if (onePixelElementsCount < 1) {
            resultSizes[i] += onePixelElementsCount;
            onePixelElementsCount = 0;
          } else {
            resultSizes[i]++;
            onePixelElementsCount--;
          }
        }
      }
    }
  }
  _getRealColumnWidth(columnIndex, columnWidths, groupWidth) {
    var ratio = 1;
    var width = columnWidths[columnIndex];
    if (!isPercentWidth(width)) {
      return parseFloat(width);
    }
    var percentTotalWidth = columnWidths.reduce((sum, width2, index) => {
      if (!isPercentWidth(width2)) {
        return sum;
      }
      return sum + parseFloat(width2);
    }, 0);
    var pixelTotalWidth = columnWidths.reduce((sum, width2) => {
      if (!width2 || width2 === HIDDEN_COLUMNS_WIDTH2 || isPercentWidth(width2)) {
        return sum;
      }
      return sum + parseFloat(width2);
    }, 0);
    groupWidth = groupWidth || this._rowsView.contentWidth();
    var freeSpace = groupWidth - pixelTotalWidth;
    var percentTotalWidthInPixel = percentTotalWidth * groupWidth / 100;
    if (pixelTotalWidth > 0 && percentTotalWidthInPixel + pixelTotalWidth >= groupWidth) {
      ratio = percentTotalWidthInPixel > freeSpace ? freeSpace / percentTotalWidthInPixel : 1;
    }
    return parseFloat(width) * groupWidth * ratio / 100;
  }
  _getTotalWidth(widths, groupWidth) {
    var result2 = 0;
    for (var i = 0; i < widths.length; i++) {
      var width = widths[i];
      if (width && width !== HIDDEN_COLUMNS_WIDTH2) {
        result2 += this._getRealColumnWidth(i, widths, groupWidth);
      }
    }
    return Math.ceil(result2);
  }
  _getGroupElement() {
    return this.component.$element().children().get(0);
  }
  updateSize(rootElement) {
    var $rootElement = renderer_default(rootElement);
    var importantMarginClass = this.addWidgetPrefix(IMPORTANT_MARGIN_CLASS);
    if (void 0 === this._hasHeight && $rootElement && $rootElement.is(":visible") && getWidth($rootElement)) {
      var $groupElement = $rootElement.children(".".concat(this.getWidgetContainerClass()));
      if ($groupElement.length) {
        $groupElement.detach();
      }
      this._hasHeight = !!getHeight($rootElement);
      var width = getWidth($rootElement);
      $rootElement.addClass(importantMarginClass);
      this._hasWidth = getWidth($rootElement) === width;
      $rootElement.removeClass(importantMarginClass);
      if ($groupElement.length) {
        $groupElement.appendTo($rootElement);
      }
    }
  }
  publicMethods() {
    return ["resize", "updateDimensions"];
  }
  _waitAsyncTemplates() {
    var _a, _b, _c;
    return when(null === (_a = this._columnHeadersView) || void 0 === _a ? void 0 : _a.waitAsyncTemplates(true), null === (_b = this._rowsView) || void 0 === _b ? void 0 : _b.waitAsyncTemplates(true), null === (_c = this._footerView) || void 0 === _c ? void 0 : _c.waitAsyncTemplates(true));
  }
  resize() {
    if (this.component._requireResize) {
      return new Deferred().resolve();
    }
    var d = new Deferred();
    this._waitAsyncTemplates().done(() => {
      when(this.updateDimensions()).done(d.resolve).fail(d.reject);
    }).fail(d.reject);
    return d.promise();
  }
  updateDimensions(checkSize) {
    var that = this;
    that._initPostRenderHandlers();
    if (!that._checkSize(checkSize)) {
      return;
    }
    var prevResult = that._resizeDeferred;
    var result2 = that._resizeDeferred = new Deferred();
    when(prevResult).always(() => {
      deferRender(() => {
        if (that._dataController.isLoaded()) {
          that._synchronizeColumns();
        }
        that._resetGroupElementHeight();
        deferUpdate(() => {
          deferRender(() => {
            deferUpdate(() => {
              that._updateDimensionsCore();
            });
          });
        });
      }).done(result2.resolve).fail(result2.reject);
    });
    return result2.promise();
  }
  _resetGroupElementHeight() {
    var groupElement = this._getGroupElement();
    var scrollable = this._rowsView.getScrollable();
    if (groupElement && groupElement.style.height && (!scrollable || !scrollable.scrollTop())) {
      groupElement.style.height = "";
    }
  }
  _checkSize(checkSize) {
    var $rootElement = this.component.$element();
    var isWidgetVisible = $rootElement.is(":visible");
    var isGridSizeChanged = this._lastWidth !== getWidth($rootElement) || this._lastHeight !== getHeight($rootElement) || this._devicePixelRatio !== getWindow().devicePixelRatio;
    return isWidgetVisible && (!checkSize || isGridSizeChanged);
  }
  _setScrollerSpacingCore() {
    var that = this;
    var vScrollbarWidth = that._rowsView.getScrollbarWidth();
    var hScrollbarWidth = that._rowsView.getScrollbarWidth(true);
    deferRender(() => {
      that._columnHeadersView && that._columnHeadersView.setScrollerSpacing(vScrollbarWidth);
      that._footerView && that._footerView.setScrollerSpacing(vScrollbarWidth);
      that._rowsView.setScrollerSpacing(vScrollbarWidth, hScrollbarWidth);
    });
  }
  _setScrollerSpacing() {
    var scrollable = this._rowsView.getScrollable();
    var isNativeScrolling = true === this.option("scrolling.useNative");
    if (!scrollable || isNativeScrolling) {
      deferRender(() => {
        deferUpdate(() => {
          this._setScrollerSpacingCore();
        });
      });
    } else {
      this._setScrollerSpacingCore();
    }
  }
  _setAriaOwns() {
    var _a, _b, _c;
    var headerTable = null === (_a = this._columnHeadersView) || void 0 === _a ? void 0 : _a.getTableElement();
    var footerTable = null === (_b = this._footerView) || void 0 === _b ? void 0 : _b.getTableElement();
    null === (_c = this._rowsView) || void 0 === _c ? void 0 : _c.setAriaOwns(null === headerTable || void 0 === headerTable ? void 0 : headerTable.attr("id"), null === footerTable || void 0 === footerTable ? void 0 : footerTable.attr("id"));
  }
  _updateDimensionsCore() {
    var _a;
    var that = this;
    var dataController2 = that._dataController;
    var rowsView17 = that._rowsView;
    var $rootElement = that.component.$element();
    var groupElement = this._getGroupElement();
    var rootElementHeight = getHeight($rootElement);
    var height = null !== (_a = that.option("height")) && void 0 !== _a ? _a : $rootElement.get(0).style.height;
    var isHeightSpecified = !!height && "auto" !== height;
    var maxHeight = parseInt($rootElement.css("maxHeight"));
    var maxHeightHappened = maxHeight && rootElementHeight >= maxHeight;
    var isMaxHeightApplied = groupElement && groupElement.scrollHeight === groupElement.offsetHeight;
    that.updateSize($rootElement);
    deferRender(() => {
      var hasHeight = that._hasHeight || !!maxHeight || isHeightSpecified;
      rowsView17.hasHeight(hasHeight);
      this._setAriaOwns();
      if (maxHeightHappened && !isMaxHeightApplied) {
        renderer_default(groupElement).css("height", maxHeight);
      }
      if (!dataController2.isLoaded()) {
        rowsView17.setLoading(dataController2.isLoading());
        return;
      }
      deferUpdate(() => {
        that._updateLastSizes($rootElement);
        that._setScrollerSpacing();
        each(VIEW_NAMES2, (index, viewName2) => {
          var view = that.getView(viewName2);
          if (view) {
            view.resize();
          }
        });
        this._editorFactoryController && this._editorFactoryController.resize();
      });
    });
  }
  _updateLastSizes($rootElement) {
    this._lastWidth = getWidth($rootElement);
    this._lastHeight = getHeight($rootElement);
    this._devicePixelRatio = getWindow().devicePixelRatio;
  }
  optionChanged(args) {
    switch (args.name) {
      case "width":
      case "height":
        this.component._renderDimensions();
        this.resize();
      case "renderAsync":
        args.handled = true;
        return;
      default:
        super.optionChanged(args);
    }
  }
};
var SynchronizeScrollingController = class extends m_modules_default.ViewController {
  _scrollChangedHandler(views, pos, viewName2) {
    for (var j = 0; j < views.length; j++) {
      if (views[j] && views[j].name !== viewName2) {
        views[j].scrollTo({
          left: pos.left,
          top: pos.top
        });
      }
    }
  }
  init() {
    var views = [this.getView("columnHeadersView"), this.getView("footerView"), this.getView("rowsView")];
    for (var i = 0; i < views.length; i++) {
      var view = views[i];
      if (view) {
        view.scrollChanged.add(this._scrollChangedHandler.bind(this, views));
      }
    }
  }
};
var GridView = class extends m_modules_default.View {
  _endUpdateCore() {
    if (this.component._requireResize) {
      this.component._requireResize = false;
      this._resizingController.resize();
    }
  }
  init() {
    this._resizingController = this.getController("resizing");
    this._dataController = this.getController("data");
  }
  getView(name2) {
    return this.component._views[name2];
  }
  element() {
    return this._groupElement;
  }
  optionChanged(args) {
    if (isDefined(this._groupElement) && "showBorders" === args.name) {
      this._groupElement.toggleClass(this.addWidgetPrefix(BORDERS_CLASS), !!args.value);
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _renderViews($groupElement) {
    var that = this;
    each(VIEW_NAMES2, (index, viewName2) => {
      var view = that.getView(viewName2);
      if (view) {
        view.render($groupElement);
      }
    });
  }
  _getTableRoleName() {
    return "group";
  }
  render($rootElement) {
    var isFirstRender = !this._groupElement;
    var $groupElement = this._groupElement || renderer_default("<div>").addClass(this.getWidgetContainerClass());
    $groupElement.addClass(GRIDBASE_CONTAINER_CLASS);
    $groupElement.toggleClass(this.addWidgetPrefix(BORDERS_CLASS), !!this.option("showBorders"));
    this.setAria("role", "presentation", $rootElement);
    this.component.setAria("role", this._getTableRoleName(), $groupElement);
    this._rootElement = $rootElement || this._rootElement;
    if (isFirstRender) {
      this._groupElement = $groupElement;
      hasWindow() && this._resizingController.updateSize($rootElement);
      $groupElement.appendTo($rootElement);
    }
    this._renderViews($groupElement);
  }
  update() {
    var $rootElement = this._rootElement;
    var $groupElement = this._groupElement;
    if ($rootElement && $groupElement) {
      this._resizingController.resize();
      if (this._dataController.isLoaded()) {
        this._resizingController.fireContentReadyAction();
      }
    }
  }
};
var gridViewModule = {
  defaultOptions: () => ({
    showBorders: false,
    renderAsync: false
  }),
  controllers: {
    resizing: ResizingController,
    synchronizeScrolling: SynchronizeScrollingController
  },
  views: {
    gridView: GridView
  },
  VIEW_NAMES: VIEW_NAMES2
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/grid_view.js
m_core_default.registerModule("gridView", gridViewModule);

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.async.js
var AsyncCollectionWidget = m_collection_widget_edit_default.inherit({
  _initMarkup() {
    this._deferredItems = [];
    this.callBase();
  },
  _renderItemContent(args) {
    var renderContentDeferred = Deferred();
    var itemDeferred = Deferred();
    this._deferredItems[args.index] = itemDeferred;
    var $itemContent = this.callBase.call(this, args);
    itemDeferred.done(() => {
      renderContentDeferred.resolve($itemContent);
    });
    return renderContentDeferred.promise();
  },
  _onItemTemplateRendered(itemTemplate, renderArgs) {
    return () => {
      this._deferredItems[renderArgs.index].resolve();
    };
  },
  _postProcessRenderItems: noop,
  _renderItemsAsync() {
    var d = Deferred();
    when.apply(this, this._deferredItems).done(() => {
      this._postProcessRenderItems();
      d.resolve();
    });
    return d.promise();
  },
  _clean() {
    this.callBase();
    this._deferredItems = [];
  }
});
var m_collection_widget_async_default = AsyncCollectionWidget;

// node_modules/devextreme/esm/ui/collection/ui.collection_widget.async.js
var ui_collection_widget_async_default = m_collection_widget_async_default;

// node_modules/devextreme/esm/__internal/ui/collection/async.js
var TypedCollectionWidget2 = ui_collection_widget_async_default;
var async_default = TypedCollectionWidget2;

// node_modules/devextreme/esm/__internal/ui/toolbar/m_constants.js
var TOOLBAR_CLASS = "dx-toolbar";

// node_modules/devextreme/esm/__internal/ui/toolbar/m_toolbar.base.js
var TOOLBAR_BEFORE_CLASS = "dx-toolbar-before";
var TOOLBAR_CENTER_CLASS = "dx-toolbar-center";
var TOOLBAR_AFTER_CLASS = "dx-toolbar-after";
var TOOLBAR_MINI_CLASS = "dx-toolbar-mini";
var TOOLBAR_ITEM_CLASS = "dx-toolbar-item";
var TOOLBAR_LABEL_CLASS = "dx-toolbar-label";
var TOOLBAR_BUTTON_CLASS = "dx-toolbar-button";
var TOOLBAR_ITEMS_CONTAINER_CLASS = "dx-toolbar-items-container";
var TOOLBAR_GROUP_CLASS = "dx-toolbar-group";
var TOOLBAR_COMPACT_CLASS = "dx-toolbar-compact";
var TEXT_BUTTON_MODE = "text";
var DEFAULT_BUTTON_TYPE = "default";
var DEFAULT_DROPDOWNBUTTON_STYLING_MODE = "contained";
var TOOLBAR_ITEM_DATA_KEY = "dxToolbarItemDataKey";
var ANIMATION_TIMEOUT = 15;
var ToolbarBase = class extends async_default {
  _getSynchronizableOptionsForCreateComponent() {
    return super._getSynchronizableOptionsForCreateComponent().filter((item) => "disabled" !== item);
  }
  _initTemplates() {
    super._initTemplates();
    var template = new BindableTemplate(($container, data17, rawModel) => {
      var _a, _b, _c, _d, _e;
      if (isPlainObject(data17)) {
        var {
          text,
          html,
          widget
        } = data17;
        if (text) {
          $container.text(text).wrapInner("<div>");
        }
        if (html) {
          $container.html(html);
        }
        if ("dxDropDownButton" === widget) {
          data17.options = null !== (_a = data17.options) && void 0 !== _a ? _a : {};
          if (!isDefined(data17.options.stylingMode)) {
            data17.options.stylingMode = this.option("useFlatButtons") ? TEXT_BUTTON_MODE : DEFAULT_DROPDOWNBUTTON_STYLING_MODE;
          }
        }
        if ("dxButton" === widget) {
          if (this.option("useFlatButtons")) {
            data17.options = null !== (_b = data17.options) && void 0 !== _b ? _b : {};
            data17.options.stylingMode = null !== (_c = data17.options.stylingMode) && void 0 !== _c ? _c : TEXT_BUTTON_MODE;
          }
          if (this.option("useDefaultButtons")) {
            data17.options = null !== (_d = data17.options) && void 0 !== _d ? _d : {};
            data17.options.type = null !== (_e = data17.options.type) && void 0 !== _e ? _e : DEFAULT_BUTTON_TYPE;
          }
        }
      } else {
        $container.text(String(data17));
      }
      this._getTemplate("dx-polymorph-widget").render({
        container: $container,
        model: rawModel,
        parent: this
      });
    }, ["text", "html", "widget", "options"], this.option("integrationOptions.watchMethod"));
    this._templateManager.addDefaultTemplates({
      item: template,
      menuItem: template
    });
  }
  _getDefaultOptions() {
    return _extends(_extends({}, super._getDefaultOptions()), {
      renderAs: "topToolbar",
      grouped: false,
      useFlatButtons: false,
      useDefaultButtons: false
    });
  }
  _defaultOptionsRules() {
    return super._defaultOptionsRules().concat([{
      device: () => isMaterialBased(),
      options: {
        useFlatButtons: true
      }
    }]);
  }
  _itemContainer() {
    return this._$toolbarItemsContainer.find([".".concat(TOOLBAR_BEFORE_CLASS), ".".concat(TOOLBAR_CENTER_CLASS), ".".concat(TOOLBAR_AFTER_CLASS)].join(","));
  }
  _itemClass() {
    return TOOLBAR_ITEM_CLASS;
  }
  _itemDataKey() {
    return TOOLBAR_ITEM_DATA_KEY;
  }
  _dimensionChanged(dimension) {
    if (this._disposed) {
      return;
    }
    this._arrangeItems();
    this._applyCompactMode();
  }
  _initMarkup() {
    this._renderToolbar();
    this._renderSections();
    super._initMarkup();
  }
  _render() {
    super._render();
    this._renderItemsAsync();
    this._updateDimensionsInMaterial();
  }
  _postProcessRenderItems() {
    this._arrangeItems();
  }
  _renderToolbar() {
    this.$element().addClass(TOOLBAR_CLASS);
    this._$toolbarItemsContainer = renderer_default("<div>").addClass(TOOLBAR_ITEMS_CONTAINER_CLASS).appendTo(this.$element());
    this.setAria("role", "toolbar");
  }
  _renderSections() {
    var $container = this._$toolbarItemsContainer;
    each(["before", "center", "after"], (_, section) => {
      var sectionClass = "dx-toolbar-".concat(section);
      var $section = $container.find(".".concat(sectionClass));
      if (!$section.length) {
        this["_$".concat(section, "Section")] = renderer_default("<div>").addClass(sectionClass).attr("role", "presentation").appendTo($container);
      }
    });
  }
  _arrangeItems(width) {
    var _a, _b;
    var elementWidth = null !== width && void 0 !== width ? width : getWidth(this.$element());
    this._$centerSection.css({
      margin: "0 auto",
      float: "none"
    });
    var beforeRect = getBoundingRect(null === (_a = this._$beforeSection) || void 0 === _a ? void 0 : _a.get(0));
    var afterRect = getBoundingRect(null === (_b = this._$afterSection) || void 0 === _b ? void 0 : _b.get(0));
    this._alignCenterSection(beforeRect, afterRect, elementWidth);
    var $label = this._$toolbarItemsContainer.find(".".concat(TOOLBAR_LABEL_CLASS)).eq(0);
    var $section = $label.parent();
    if (!$label.length) {
      return;
    }
    var labelOffset = beforeRect.width ? beforeRect.width : $label.position().left;
    var widthBeforeSection = $section.hasClass(TOOLBAR_BEFORE_CLASS) ? 0 : labelOffset;
    var widthAfterSection = $section.hasClass(TOOLBAR_AFTER_CLASS) ? 0 : afterRect.width;
    var elemsAtSectionWidth = 0;
    $section.children().not(".".concat(TOOLBAR_LABEL_CLASS)).each((index, element) => {
      elemsAtSectionWidth += getOuterWidth(element);
    });
    var freeSpace = elementWidth - elemsAtSectionWidth;
    var sectionMaxWidth = Math.max(freeSpace - widthBeforeSection - widthAfterSection, 0);
    if ($section.hasClass(TOOLBAR_BEFORE_CLASS)) {
      this._alignSection(this._$beforeSection, sectionMaxWidth);
    } else {
      var labelPaddings = getOuterWidth($label) - getWidth($label);
      $label.css("maxWidth", sectionMaxWidth - labelPaddings);
    }
  }
  _alignCenterSection(beforeRect, afterRect, elementWidth) {
    var _a;
    this._alignSection(this._$centerSection, elementWidth - beforeRect.width - afterRect.width);
    var isRTL = this.option("rtlEnabled");
    var leftRect = isRTL ? afterRect : beforeRect;
    var rightRect = isRTL ? beforeRect : afterRect;
    var centerRect = getBoundingRect(null === (_a = this._$centerSection) || void 0 === _a ? void 0 : _a.get(0));
    if (leftRect.right > centerRect.left || centerRect.right > rightRect.left) {
      this._$centerSection.css({
        marginLeft: leftRect.width,
        marginRight: rightRect.width,
        float: leftRect.width > rightRect.width ? "none" : "right"
      });
    }
  }
  _alignSection($section, maxWidth) {
    var $labels = $section.find(".".concat(TOOLBAR_LABEL_CLASS));
    var labels = $labels.toArray();
    maxWidth -= this._getCurrentLabelsPaddings(labels);
    var currentWidth = this._getCurrentLabelsWidth(labels);
    var difference = Math.abs(currentWidth - maxWidth);
    if (maxWidth < currentWidth) {
      labels = labels.reverse();
      this._alignSectionLabels(labels, difference, false);
    } else {
      this._alignSectionLabels(labels, difference, true);
    }
  }
  _alignSectionLabels(labels, difference, expanding) {
    var getRealLabelWidth = function(label) {
      return getBoundingRect(label).width;
    };
    for (var i = 0; i < labels.length; i++) {
      var $label = renderer_default(labels[i]);
      var currentLabelWidth = Math.ceil(getRealLabelWidth(labels[i]));
      var labelMaxWidth = void 0;
      if (expanding) {
        $label.css("maxWidth", "inherit");
      }
      var possibleLabelWidth = Math.ceil(expanding ? getRealLabelWidth(labels[i]) : currentLabelWidth);
      if (possibleLabelWidth < difference) {
        labelMaxWidth = expanding ? possibleLabelWidth : 0;
        difference -= possibleLabelWidth;
      } else {
        labelMaxWidth = expanding ? currentLabelWidth + difference : currentLabelWidth - difference;
        $label.css("maxWidth", labelMaxWidth);
        break;
      }
      $label.css("maxWidth", labelMaxWidth);
    }
  }
  _applyCompactMode() {
    var $element = renderer_default(this.element());
    $element.removeClass(TOOLBAR_COMPACT_CLASS);
    if (this.option("compactMode") && this._getSummaryItemsSize("width", this._itemElements(), true) > getWidth($element)) {
      $element.addClass(TOOLBAR_COMPACT_CLASS);
    }
  }
  _getCurrentLabelsWidth(labels) {
    var width = 0;
    labels.forEach((label) => {
      width += getOuterWidth(label);
    });
    return width;
  }
  _getCurrentLabelsPaddings(labels) {
    var padding = 0;
    labels.forEach((label) => {
      padding += getOuterWidth(label) - getWidth(label);
    });
    return padding;
  }
  _renderItem(index, item, itemContainer, $after) {
    var _a, _b;
    var location = null !== (_a = item.location) && void 0 !== _a ? _a : "center";
    var container = null !== itemContainer && void 0 !== itemContainer ? itemContainer : this["_$".concat(location, "Section")];
    var itemHasText = !!(null !== (_b = item.text) && void 0 !== _b ? _b : item.html);
    var itemElement = super._renderItem(index, item, container, $after);
    itemElement.toggleClass(TOOLBAR_BUTTON_CLASS, !itemHasText).toggleClass(TOOLBAR_LABEL_CLASS, itemHasText).addClass(item.cssClass);
    return itemElement;
  }
  _renderGroupedItems() {
    each(this.option("items"), (groupIndex, group) => {
      var _a;
      var groupItems = group.items;
      var $container = renderer_default("<div>").addClass(TOOLBAR_GROUP_CLASS);
      var location = null !== (_a = group.location) && void 0 !== _a ? _a : "center";
      if (!groupItems || !groupItems.length) {
        return;
      }
      each(groupItems, (itemIndex, item) => {
        this._renderItem(itemIndex, item, $container, null);
      });
      this._$toolbarItemsContainer.find(".dx-toolbar-".concat(location)).append($container);
    });
  }
  _renderItems(items) {
    var grouped = this.option("grouped") && items.length && items[0].items;
    grouped ? this._renderGroupedItems() : super._renderItems(items);
  }
  _getToolbarItems() {
    var _a;
    return null !== (_a = this.option("items")) && void 0 !== _a ? _a : [];
  }
  _renderContentImpl() {
    var items = this._getToolbarItems();
    this.$element().toggleClass(TOOLBAR_MINI_CLASS, 0 === items.length);
    if (this._renderedItemsCount) {
      this._renderItems(items.slice(this._renderedItemsCount));
    } else {
      this._renderItems(items);
    }
    this._applyCompactMode();
  }
  _renderEmptyMessage() {
  }
  _clean() {
    this._$toolbarItemsContainer.children().empty();
    this.$element().empty();
    delete this._$beforeSection;
    delete this._$centerSection;
    delete this._$afterSection;
  }
  _visibilityChanged(visible) {
    if (visible) {
      this._arrangeItems();
    }
  }
  _isVisible() {
    return getWidth(this.$element()) > 0 && getHeight(this.$element()) > 0;
  }
  _getIndexByItem(item) {
    return this._getToolbarItems().indexOf(item);
  }
  _itemOptionChanged(item, property, value2, prevValue) {
    super._itemOptionChanged(item, property, value2, prevValue);
    this._arrangeItems();
  }
  _optionChanged(args) {
    var {
      name: name2
    } = args;
    switch (name2) {
      case "width":
        super._optionChanged(args);
        this._dimensionChanged();
        break;
      case "renderAs":
      case "useFlatButtons":
      case "useDefaultButtons":
        this._invalidate();
        break;
      case "compactMode":
        this._applyCompactMode();
        break;
      case "grouped":
        break;
      default:
        super._optionChanged(args);
    }
  }
  _dispose() {
    super._dispose();
    clearTimeout(this._waitParentAnimationTimeout);
  }
  _updateDimensionsInMaterial() {
    if (isMaterial()) {
      Promise.all([(() => new Promise((resolve) => {
        var check = () => {
          var readyToResolve = true;
          this.$element().parents().each((_, parent) => {
            if (fx_default.isAnimating(renderer_default(parent))) {
              readyToResolve = false;
              return false;
            }
          });
          if (readyToResolve) {
            resolve();
          }
          return readyToResolve;
        };
        var runCheck = () => {
          clearTimeout(this._waitParentAnimationTimeout);
          this._waitParentAnimationTimeout = setTimeout(() => check() || runCheck(), ANIMATION_TIMEOUT);
        };
        runCheck();
      }))(), (() => {
        var $labels = this.$element().find(".".concat(TOOLBAR_LABEL_CLASS));
        var promises = [];
        $labels.each((_, label) => {
          var text = renderer_default(label).text();
          var fontWeight = renderer_default(label).css("fontWeight");
          promises.push(waitWebFont(text, fontWeight));
        });
        return Promise.all(promises);
      })()]).then(() => {
        this._dimensionChanged();
      });
    }
  }
};
component_registrator_default("dxToolbarBase", ToolbarBase);
var m_toolbar_base_default = ToolbarBase;

// node_modules/devextreme/esm/__internal/ui/toolbar/m_toolbar.utils.js
var BUTTON_GROUP_CLASS = "dx-buttongroup";
var TOOLBAR_ITEMS = ["dxAutocomplete", "dxButton", "dxCheckBox", "dxDateBox", "dxMenu", "dxSelectBox", "dxTabs", "dxTextBox", "dxButtonGroup", "dxDropDownButton"];
var getItemInstance = function($element) {
  var itemData = $element.data && $element.data();
  var dxComponents = itemData && itemData.dxComponents;
  var widgetName = dxComponents && dxComponents[0];
  return widgetName && itemData[widgetName];
};
function toggleItemFocusableElementTabIndex(context, item) {
  var _a, _b, _c;
  if (!context) {
    return;
  }
  var $item = context._findItemElementByItem(item);
  if (!$item.length) {
    return;
  }
  var itemData = context._getItemData($item);
  var isItemNotFocusable = !!((null === (_a = itemData.options) || void 0 === _a ? void 0 : _a.disabled) || itemData.disabled || context.option("disabled"));
  var {
    widget
  } = itemData;
  if (widget && TOOLBAR_ITEMS.includes(widget)) {
    var $widget = $item.find(widget.toLowerCase().replace("dx", ".dx-"));
    if ($widget.length) {
      var itemInstance = getItemInstance($widget);
      if (!itemInstance) {
        return;
      }
      var $focusTarget = null === (_b = itemInstance._focusTarget) || void 0 === _b ? void 0 : _b.call(itemInstance);
      if ("dxDropDownButton" === widget) {
        $focusTarget = $focusTarget && $focusTarget.find(".".concat(BUTTON_GROUP_CLASS));
      } else {
        $focusTarget = null !== $focusTarget && void 0 !== $focusTarget ? $focusTarget : renderer_default(itemInstance.element());
      }
      var tabIndex = null === (_c = itemData.options) || void 0 === _c ? void 0 : _c.tabIndex;
      if (isItemNotFocusable) {
        $focusTarget.attr("tabIndex", -1);
      } else {
        $focusTarget.attr("tabIndex", null !== tabIndex && void 0 !== tabIndex ? tabIndex : 0);
      }
    }
  }
}

// node_modules/devextreme/esm/__internal/ui/toolbar/strategy/m_toolbar.multiline.js
var TOOLBAR_LABEL_CLASS2 = "dx-toolbar-label";
var MultiLineStrategy = class {
  constructor(toolbar) {
    this._toolbar = toolbar;
  }
  _initMarkup() {
  }
  _updateMenuVisibility() {
  }
  _renderMenuItems() {
  }
  _renderItem() {
  }
  _getMenuItems() {
  }
  _getToolbarItems() {
    var _a;
    return null !== (_a = this._toolbar.option("items")) && void 0 !== _a ? _a : [];
  }
  _getItemsWidth() {
    return this._toolbar._getSummaryItemsSize("width", this._toolbar._itemElements(), true);
  }
  _arrangeItems() {
    var $label = this._toolbar._$toolbarItemsContainer.find(".".concat(TOOLBAR_LABEL_CLASS2)).eq(0);
    if (!$label.length) {
      return;
    }
    var elementWidth = getWidth(this._toolbar.$element());
    var labelPaddings = getOuterWidth($label) - getWidth($label);
    $label.css("maxWidth", elementWidth - labelPaddings);
  }
  _hideOverflowItems() {
  }
  _dimensionChanged() {
  }
  _itemOptionChanged() {
  }
  _optionChanged() {
  }
};

// node_modules/devextreme/esm/__internal/ui/m_resizable.js
var RESIZABLE = "dxResizable";
var RESIZABLE_CLASS = "dx-resizable";
var RESIZABLE_RESIZING_CLASS = "dx-resizable-resizing";
var RESIZABLE_HANDLE_CLASS = "dx-resizable-handle";
var RESIZABLE_HANDLE_TOP_CLASS = "dx-resizable-handle-top";
var RESIZABLE_HANDLE_BOTTOM_CLASS = "dx-resizable-handle-bottom";
var RESIZABLE_HANDLE_LEFT_CLASS = "dx-resizable-handle-left";
var RESIZABLE_HANDLE_RIGHT_CLASS = "dx-resizable-handle-right";
var RESIZABLE_HANDLE_CORNER_CLASS = "dx-resizable-handle-corner";
var DRAGSTART_START_EVENT_NAME = addNamespace(DRAG_START_EVENT, RESIZABLE);
var DRAGSTART_EVENT_NAME = addNamespace(DRAG_EVENT, RESIZABLE);
var DRAGSTART_END_EVENT_NAME = addNamespace(DRAG_END_EVENT, RESIZABLE);
var SIDE_BORDER_WIDTH_STYLES = {
  left: "borderLeftWidth",
  top: "borderTopWidth",
  right: "borderRightWidth",
  bottom: "borderBottomWidth"
};
var Resizable = dom_component_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      handles: "all",
      step: "1",
      stepPrecision: "simple",
      area: void 0,
      minWidth: 30,
      maxWidth: 1 / 0,
      minHeight: 30,
      maxHeight: 1 / 0,
      onResizeStart: null,
      onResize: null,
      onResizeEnd: null,
      roundStepValue: true,
      keepAspectRatio: true
    });
  },
  _init() {
    this.callBase();
    this.$element().addClass(RESIZABLE_CLASS);
  },
  _initMarkup() {
    this.callBase();
    this._renderHandles();
  },
  _render() {
    this.callBase();
    this._renderActions();
  },
  _renderActions() {
    this._resizeStartAction = this._createActionByOption("onResizeStart");
    this._resizeEndAction = this._createActionByOption("onResizeEnd");
    this._resizeAction = this._createActionByOption("onResize");
  },
  _renderHandles() {
    this._handles = [];
    var handles = this.option("handles");
    if ("none" === handles || !handles) {
      return;
    }
    var directions = "all" === handles ? ["top", "bottom", "left", "right"] : handles.split(" ");
    var activeHandlesMap = {};
    each(directions, (index, handleName) => {
      activeHandlesMap[handleName] = true;
      this._renderHandle(handleName);
    });
    activeHandlesMap.bottom && activeHandlesMap.right && this._renderHandle("corner-bottom-right");
    activeHandlesMap.bottom && activeHandlesMap.left && this._renderHandle("corner-bottom-left");
    activeHandlesMap.top && activeHandlesMap.right && this._renderHandle("corner-top-right");
    activeHandlesMap.top && activeHandlesMap.left && this._renderHandle("corner-top-left");
    this._attachEventHandlers();
  },
  _renderHandle(handleName) {
    var $handle = renderer_default("<div>").addClass(RESIZABLE_HANDLE_CLASS).addClass("".concat(RESIZABLE_HANDLE_CLASS, "-").concat(handleName)).appendTo(this.$element());
    this._handles.push($handle);
  },
  _attachEventHandlers() {
    if (this.option("disabled")) {
      return;
    }
    var handlers = {};
    handlers[DRAGSTART_START_EVENT_NAME] = this._dragStartHandler.bind(this);
    handlers[DRAGSTART_EVENT_NAME] = this._dragHandler.bind(this);
    handlers[DRAGSTART_END_EVENT_NAME] = this._dragEndHandler.bind(this);
    this._handles.forEach((handleElement) => {
      events_engine_default.on(handleElement, handlers, {
        direction: "both",
        immediate: true
      });
    });
  },
  _detachEventHandlers() {
    this._handles.forEach((handleElement) => {
      events_engine_default.off(handleElement);
    });
  },
  _toggleEventHandlers(shouldAttachEvents) {
    shouldAttachEvents ? this._attachEventHandlers() : this._detachEventHandlers();
  },
  _getElementSize() {
    var $element = this.$element();
    return "border-box" === $element.css("boxSizing") ? {
      width: getOuterWidth($element),
      height: getOuterHeight($element)
    } : {
      width: getWidth($element),
      height: getHeight($element)
    };
  },
  _dragStartHandler(e) {
    var $element = this.$element();
    if ($element.is(".dx-state-disabled, .dx-state-disabled *")) {
      e.cancel = true;
      return;
    }
    this._toggleResizingClass(true);
    this._movingSides = this._getMovingSides(e);
    this._elementLocation = locate($element);
    this._elementSize = this._getElementSize();
    this._renderDragOffsets(e);
    this._resizeStartAction({
      event: e,
      width: this._elementSize.width,
      height: this._elementSize.height,
      handles: this._movingSides
    });
    e.targetElements = null;
  },
  _toggleResizingClass(value2) {
    this.$element().toggleClass(RESIZABLE_RESIZING_CLASS, value2);
  },
  _renderDragOffsets(e) {
    var area = this._getArea();
    if (!area) {
      return;
    }
    var $handle = renderer_default(e.target).closest(".".concat(RESIZABLE_HANDLE_CLASS));
    var handleWidth = getOuterWidth($handle);
    var handleHeight = getOuterHeight($handle);
    var handleOffset = $handle.offset();
    var areaOffset = area.offset;
    var scrollOffset = this._getAreaScrollOffset();
    e.maxLeftOffset = this._leftMaxOffset = handleOffset.left - areaOffset.left - scrollOffset.scrollX;
    e.maxRightOffset = this._rightMaxOffset = areaOffset.left + area.width - handleOffset.left - handleWidth + scrollOffset.scrollX;
    e.maxTopOffset = this._topMaxOffset = handleOffset.top - areaOffset.top - scrollOffset.scrollY;
    e.maxBottomOffset = this._bottomMaxOffset = areaOffset.top + area.height - handleOffset.top - handleHeight + scrollOffset.scrollY;
  },
  _getBorderWidth($element, direction) {
    if (isWindow($element.get(0))) {
      return 0;
    }
    var borderWidth = $element.css(SIDE_BORDER_WIDTH_STYLES[direction]);
    return parseInt(borderWidth) || 0;
  },
  _proportionate(direction, value2) {
    var size = this._elementSize;
    var factor = "x" === direction ? size.width / size.height : size.height / size.width;
    return value2 * factor;
  },
  _getProportionalDelta(_ref) {
    var {
      x,
      y
    } = _ref;
    var proportionalY = this._proportionate("y", x);
    if (proportionalY >= y) {
      return {
        x,
        y: proportionalY
      };
    }
    var proportionalX = this._proportionate("x", y);
    if (proportionalX >= x) {
      return {
        x: proportionalX,
        y
      };
    }
    return {
      x: 0,
      y: 0
    };
  },
  _getDirectionName(axis) {
    var sides = this._movingSides;
    if ("x" === axis) {
      return sides.left ? "left" : "right";
    }
    return sides.top ? "top" : "bottom";
  },
  _fitIntoArea(axis, value2) {
    var _a;
    var directionName = this._getDirectionName(axis);
    return Math.min(value2, null !== (_a = this["_".concat(directionName, "MaxOffset")]) && void 0 !== _a ? _a : 1 / 0);
  },
  _fitDeltaProportionally(delta) {
    var fittedDelta = _extends({}, delta);
    var size = this._elementSize;
    var {
      minWidth,
      minHeight,
      maxWidth,
      maxHeight
    } = this.option();
    var getWidth2 = () => size.width + fittedDelta.x;
    var getHeight2 = () => size.height + fittedDelta.y;
    var isInArea = (axis) => fittedDelta[axis] === this._fitIntoArea(axis, fittedDelta[axis]);
    var isFittedX = () => inRange(getWidth2(), minWidth, maxWidth) && isInArea("x");
    var isFittedY = () => inRange(getHeight2(), minHeight, maxHeight) && isInArea("y");
    if (!isFittedX()) {
      var x = this._fitIntoArea("x", fitIntoRange(getWidth2(), minWidth, maxWidth) - size.width);
      fittedDelta = {
        x,
        y: this._proportionate("y", x)
      };
    }
    if (!isFittedY()) {
      var y = this._fitIntoArea("y", fitIntoRange(getHeight2(), minHeight, maxHeight) - size.height);
      fittedDelta = {
        x: this._proportionate("x", y),
        y
      };
    }
    return isFittedX() && isFittedY() ? fittedDelta : {
      x: 0,
      y: 0
    };
  },
  _fitDelta(_ref2) {
    var {
      x,
      y
    } = _ref2;
    var size = this._elementSize;
    var {
      minWidth,
      minHeight,
      maxWidth,
      maxHeight
    } = this.option();
    return {
      x: fitIntoRange(size.width + x, minWidth, maxWidth) - size.width,
      y: fitIntoRange(size.height + y, minHeight, maxHeight) - size.height
    };
  },
  _getDeltaByOffset(offset) {
    var sides = this._movingSides;
    var shouldKeepAspectRatio = this._isCornerHandler(sides) && this.option("keepAspectRatio");
    var delta = {
      x: offset.x * (sides.left ? -1 : 1),
      y: offset.y * (sides.top ? -1 : 1)
    };
    if (shouldKeepAspectRatio) {
      var proportionalDelta = this._getProportionalDelta(delta);
      var fittedProportionalDelta = this._fitDeltaProportionally(proportionalDelta);
      delta = fittedProportionalDelta;
    } else {
      var fittedDelta = this._fitDelta(delta);
      var roundedFittedDelta = this._roundByStep(fittedDelta);
      delta = roundedFittedDelta;
    }
    return delta;
  },
  _updatePosition(delta, _ref3) {
    var {
      width,
      height
    } = _ref3;
    var location = this._elementLocation;
    var sides = this._movingSides;
    var $element = this.$element();
    var elementRect = this._getElementSize();
    var offsetTop = delta.y * (sides.top ? -1 : 1) - ((elementRect.height || height) - height);
    var offsetLeft = delta.x * (sides.left ? -1 : 1) - ((elementRect.width || width) - width);
    move($element, {
      top: location.top + (sides.top ? offsetTop : 0),
      left: location.left + (sides.left ? offsetLeft : 0)
    });
  },
  _dragHandler(e) {
    var offset = this._getOffset(e);
    var delta = this._getDeltaByOffset(offset);
    var dimensions = this._updateDimensions(delta);
    this._updatePosition(delta, dimensions);
    this._triggerResizeAction(e, dimensions);
  },
  _updateDimensions(delta) {
    var isAbsoluteSize = (size2) => "px" === size2.substring(size2.length - 2);
    var isStepPrecisionStrict = "strict" === this.option("stepPrecision");
    var size = this._elementSize;
    var width = size.width + delta.x;
    var height = size.height + delta.y;
    var elementStyle = this.$element().get(0).style;
    var shouldRenderWidth = delta.x || isStepPrecisionStrict || isAbsoluteSize(elementStyle.width);
    var shouldRenderHeight = delta.y || isStepPrecisionStrict || isAbsoluteSize(elementStyle.height);
    if (shouldRenderWidth) {
      this.option({
        width
      });
    }
    if (shouldRenderHeight) {
      this.option({
        height
      });
    }
    return {
      width: shouldRenderWidth ? width : size.width,
      height: shouldRenderHeight ? height : size.height
    };
  },
  _triggerResizeAction(e, _ref4) {
    var {
      width,
      height
    } = _ref4;
    this._resizeAction({
      event: e,
      width: this.option("width") || width,
      height: this.option("height") || height,
      handles: this._movingSides
    });
    triggerResizeEvent(this.$element());
  },
  _isCornerHandler: (sides) => 0 === Object.values(sides).reduce((xor, value2) => xor ^ value2, 0),
  _getOffset(e) {
    var {
      offset
    } = e;
    var sides = this._movingSides;
    if (!sides.left && !sides.right) {
      offset.x = 0;
    }
    if (!sides.top && !sides.bottom) {
      offset.y = 0;
    }
    return offset;
  },
  _roundByStep(delta) {
    return "strict" === this.option("stepPrecision") ? this._roundStrict(delta) : this._roundNotStrict(delta);
  },
  _getSteps() {
    return pairToObject(this.option("step"), !this.option("roundStepValue"));
  },
  _roundNotStrict(delta) {
    var steps = this._getSteps();
    return {
      x: delta.x - delta.x % steps.h,
      y: delta.y - delta.y % steps.v
    };
  },
  _roundStrict(delta) {
    var sides = this._movingSides;
    var offset = {
      x: delta.x * (sides.left ? -1 : 1),
      y: delta.y * (sides.top ? -1 : 1)
    };
    var steps = this._getSteps();
    var location = this._elementLocation;
    var size = this._elementSize;
    var xPos = sides.left ? location.left : location.left + size.width;
    var yPos = sides.top ? location.top : location.top + size.height;
    var newXShift = (xPos + offset.x) % steps.h;
    var newYShift = (yPos + offset.y) % steps.v;
    var sign2 = Math.sign || ((x) => {
      x = +x;
      if (0 === x || isNaN(x)) {
        return x;
      }
      return x > 0 ? 1 : -1;
    });
    var separatorOffset = (steps2, offset2) => (1 + 0.2 * sign2(offset2)) % 1 * steps2;
    var isSmallOffset = (offset2, steps2) => Math.abs(offset2) < 0.2 * steps2;
    var newOffsetX = offset.x - newXShift;
    var newOffsetY = offset.y - newYShift;
    if (newXShift > separatorOffset(steps.h, offset.x)) {
      newOffsetX += steps.h;
    }
    if (newYShift > separatorOffset(steps.v, offset.y)) {
      newOffsetY += steps.v;
    }
    var roundedOffset_x = (sides.left || sides.right) && !isSmallOffset(offset.x, steps.h) ? newOffsetX : 0, roundedOffset_y = (sides.top || sides.bottom) && !isSmallOffset(offset.y, steps.v) ? newOffsetY : 0;
    return {
      x: roundedOffset_x * (sides.left ? -1 : 1),
      y: roundedOffset_y * (sides.top ? -1 : 1)
    };
  },
  _getMovingSides(e) {
    var $target = renderer_default(e.target);
    var hasCornerTopLeftClass = $target.hasClass("".concat(RESIZABLE_HANDLE_CORNER_CLASS, "-top-left"));
    var hasCornerTopRightClass = $target.hasClass("".concat(RESIZABLE_HANDLE_CORNER_CLASS, "-top-right"));
    var hasCornerBottomLeftClass = $target.hasClass("".concat(RESIZABLE_HANDLE_CORNER_CLASS, "-bottom-left"));
    var hasCornerBottomRightClass = $target.hasClass("".concat(RESIZABLE_HANDLE_CORNER_CLASS, "-bottom-right"));
    return {
      top: $target.hasClass(RESIZABLE_HANDLE_TOP_CLASS) || hasCornerTopLeftClass || hasCornerTopRightClass,
      left: $target.hasClass(RESIZABLE_HANDLE_LEFT_CLASS) || hasCornerTopLeftClass || hasCornerBottomLeftClass,
      bottom: $target.hasClass(RESIZABLE_HANDLE_BOTTOM_CLASS) || hasCornerBottomLeftClass || hasCornerBottomRightClass,
      right: $target.hasClass(RESIZABLE_HANDLE_RIGHT_CLASS) || hasCornerTopRightClass || hasCornerBottomRightClass
    };
  },
  _getArea() {
    var area = this.option("area");
    if (isFunction(area)) {
      area = area.call(this);
    }
    if (isPlainObject(area)) {
      return this._getAreaFromObject(area);
    }
    return this._getAreaFromElement(area);
  },
  _getAreaScrollOffset() {
    var area = this.option("area");
    var isElement = !isFunction(area) && !isPlainObject(area);
    var scrollOffset = {
      scrollY: 0,
      scrollX: 0
    };
    if (isElement) {
      var areaElement = renderer_default(area)[0];
      if (isWindow(areaElement)) {
        scrollOffset.scrollX = areaElement.pageXOffset;
        scrollOffset.scrollY = areaElement.pageYOffset;
      }
    }
    return scrollOffset;
  },
  _getAreaFromObject(area) {
    var result2 = {
      width: area.right - area.left,
      height: area.bottom - area.top,
      offset: {
        left: area.left,
        top: area.top
      }
    };
    this._correctAreaGeometry(result2);
    return result2;
  },
  _getAreaFromElement(area) {
    var $area = renderer_default(area);
    var result2;
    if ($area.length) {
      result2 = {
        width: getInnerWidth($area),
        height: getInnerHeight($area),
        offset: extend({
          top: 0,
          left: 0
        }, isWindow($area[0]) ? {} : $area.offset())
      };
      this._correctAreaGeometry(result2, $area);
    }
    return result2;
  },
  _correctAreaGeometry(result2, $area) {
    var areaBorderLeft = $area ? this._getBorderWidth($area, "left") : 0;
    var areaBorderTop = $area ? this._getBorderWidth($area, "top") : 0;
    result2.offset.left += areaBorderLeft + this._getBorderWidth(this.$element(), "left");
    result2.offset.top += areaBorderTop + this._getBorderWidth(this.$element(), "top");
    result2.width -= getOuterWidth(this.$element()) - getInnerWidth(this.$element());
    result2.height -= getOuterHeight(this.$element()) - getInnerHeight(this.$element());
  },
  _dragEndHandler(e) {
    var $element = this.$element();
    this._resizeEndAction({
      event: e,
      width: getOuterWidth($element),
      height: getOuterHeight($element),
      handles: this._movingSides
    });
    this._toggleResizingClass(false);
  },
  _renderWidth(width) {
    this.option("width", fitIntoRange(width, this.option("minWidth"), this.option("maxWidth")));
  },
  _renderHeight(height) {
    this.option("height", fitIntoRange(height, this.option("minHeight"), this.option("maxHeight")));
  },
  _optionChanged(args) {
    switch (args.name) {
      case "disabled":
        this._toggleEventHandlers(!args.value);
        this.callBase(args);
        break;
      case "handles":
        this._invalidate();
        break;
      case "minWidth":
      case "maxWidth":
        hasWindow() && this._renderWidth(getOuterWidth(this.$element()));
        break;
      case "minHeight":
      case "maxHeight":
        hasWindow() && this._renderHeight(getOuterHeight(this.$element()));
        break;
      case "onResize":
      case "onResizeStart":
      case "onResizeEnd":
        this._renderActions();
        break;
      case "area":
      case "stepPrecision":
      case "step":
      case "roundStepValue":
      case "keepAspectRatio":
        break;
      default:
        this.callBase(args);
    }
  },
  _clean() {
    this.$element().find(".".concat(RESIZABLE_HANDLE_CLASS)).remove();
  },
  _useTemplates: () => false
});
component_registrator_default(RESIZABLE, Resizable);
var m_resizable_default = Resizable;

// node_modules/devextreme/esm/ui/resizable.js
var resizable_default = m_resizable_default;

// node_modules/devextreme/esm/__internal/ui/popup/m_popup_drag.js
var KEYBOARD_DRAG_STEP = 5;
var PopupDrag = class {
  constructor(config2) {
    this.init(config2);
  }
  init(_ref) {
    var {
      dragEnabled,
      handle,
      draggableElement,
      positionController
    } = _ref;
    this._positionController = positionController;
    this._draggableElement = draggableElement;
    this._handle = handle;
    this._dragEnabled = dragEnabled;
    this.unsubscribe();
    if (!dragEnabled) {
      return;
    }
    this.subscribe();
  }
  moveDown(e) {
    this._moveTo(KEYBOARD_DRAG_STEP, 0, e);
  }
  moveUp(e) {
    this._moveTo(-KEYBOARD_DRAG_STEP, 0, e);
  }
  moveLeft(e) {
    this._moveTo(0, -KEYBOARD_DRAG_STEP, e);
  }
  moveRight(e) {
    this._moveTo(0, KEYBOARD_DRAG_STEP, e);
  }
  subscribe() {
    var eventNames = this._getEventNames();
    events_engine_default.on(this._handle, eventNames.startEventName, (e) => {
      this._dragStartHandler(e);
    });
    events_engine_default.on(this._handle, eventNames.updateEventName, (e) => {
      this._dragUpdateHandler(e);
    });
    events_engine_default.on(this._handle, eventNames.endEventName, (e) => {
      this._dragEndHandler(e);
    });
  }
  unsubscribe() {
    var eventNames = this._getEventNames();
    events_engine_default.off(this._handle, eventNames.startEventName);
    events_engine_default.off(this._handle, eventNames.updateEventName);
    events_engine_default.off(this._handle, eventNames.endEventName);
  }
  _getEventNames() {
    var startEventName = addNamespace(DRAG_START_EVENT, "overlayDrag");
    var updateEventName = addNamespace(DRAG_EVENT, "overlayDrag");
    var endEventName = addNamespace(DRAG_END_EVENT, "overlayDrag");
    return {
      startEventName,
      updateEventName,
      endEventName
    };
  }
  _dragStartHandler(e) {
    var allowedOffsets = this._getAllowedOffsets();
    this._prevOffset = {
      x: 0,
      y: 0
    };
    e.targetElements = [];
    e.maxTopOffset = allowedOffsets.top;
    e.maxBottomOffset = allowedOffsets.bottom;
    e.maxLeftOffset = allowedOffsets.left;
    e.maxRightOffset = allowedOffsets.right;
  }
  _dragUpdateHandler(e) {
    var targetOffset = {
      top: e.offset.y - this._prevOffset.y,
      left: e.offset.x - this._prevOffset.x
    };
    this._moveByOffset(targetOffset);
    this._prevOffset = e.offset;
  }
  _dragEndHandler(event) {
    this._positionController.dragHandled();
    this._positionController.detectVisualPositionChange(event);
  }
  _moveTo(top, left, e) {
    if (!this._dragEnabled) {
      return;
    }
    e.preventDefault();
    e.stopPropagation();
    var offset = this._fitOffsetIntoAllowedRange(top, left);
    this._moveByOffset(offset);
    this._dragEndHandler(e);
  }
  _fitOffsetIntoAllowedRange(top, left) {
    var allowedOffsets = this._getAllowedOffsets();
    return {
      top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),
      left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)
    };
  }
  _getContainerDimensions() {
    var document2 = dom_adapter_default.getDocument();
    var container = this._positionController.$dragResizeContainer.get(0);
    var containerWidth = getOuterWidth(container);
    var containerHeight = getOuterHeight(container);
    if (isWindow(container)) {
      containerHeight = Math.max(document2.body.clientHeight, containerHeight);
      containerWidth = Math.max(document2.body.clientWidth, containerWidth);
    }
    return {
      width: containerWidth,
      height: containerHeight
    };
  }
  _getContainerPosition() {
    var container = this._positionController.$dragResizeContainer.get(0);
    return isWindow(container) ? {
      top: 0,
      left: 0
    } : getOffset(container);
  }
  _getElementPosition() {
    return getOffset(this._draggableElement);
  }
  _getInnerDelta() {
    var containerDimensions = this._getContainerDimensions();
    var elementDimensions = this._getElementDimensions();
    return {
      x: containerDimensions.width - elementDimensions.width,
      y: containerDimensions.height - elementDimensions.height
    };
  }
  _getOuterDelta() {
    var {
      width,
      height
    } = this._getElementDimensions();
    var {
      outsideDragFactor
    } = this._positionController;
    return {
      x: width * outsideDragFactor,
      y: height * outsideDragFactor
    };
  }
  _getFullDelta() {
    var fullDelta = this._getInnerDelta();
    var outerDelta = this._getOuterDelta();
    return {
      x: fullDelta.x + outerDelta.x,
      y: fullDelta.y + outerDelta.y
    };
  }
  _getElementDimensions() {
    return {
      width: this._draggableElement.offsetWidth,
      height: this._draggableElement.offsetHeight
    };
  }
  _getAllowedOffsets() {
    var fullDelta = this._getFullDelta();
    var isDragAllowed = fullDelta.y >= 0 && fullDelta.x >= 0;
    if (!isDragAllowed) {
      return {
        top: 0,
        bottom: 0,
        left: 0,
        right: 0
      };
    }
    var elementPosition = this._getElementPosition();
    var containerPosition = this._getContainerPosition();
    var outerDelta = this._getOuterDelta();
    return {
      top: elementPosition.top - containerPosition.top + outerDelta.y,
      bottom: -elementPosition.top + containerPosition.top + fullDelta.y,
      left: elementPosition.left - containerPosition.left + outerDelta.x,
      right: -elementPosition.left + containerPosition.left + fullDelta.x
    };
  }
  _moveByOffset(offset) {
    var currentPosition = locate(this._draggableElement);
    var newPosition = {
      left: currentPosition.left + offset.left,
      top: currentPosition.top + offset.top
    };
    move(this._draggableElement, newPosition);
  }
};
var m_popup_drag_default = PopupDrag;

// node_modules/devextreme/esm/__internal/ui/popup/m_popup_overflow_manager.js
var overflowManagerMock = {
  setOverflow: noop,
  restoreOverflow: noop
};
var createBodyOverflowManager = () => {
  if (!hasWindow()) {
    return overflowManagerMock;
  }
  var window15 = getWindow();
  var {
    documentElement
  } = dom_adapter_default.getDocument();
  var body = dom_adapter_default.getBody();
  var isIosDevice = "ios" === devices_default.real().platform;
  var prevSettings = {
    overflow: null,
    overflowX: null,
    overflowY: null,
    paddingRight: null,
    position: null,
    top: null,
    left: null
  };
  return {
    setOverflow: isIosDevice ? () => {
      if (isDefined(prevSettings.position) || "fixed" === body.style.position) {
        return;
      }
      var {
        scrollY,
        scrollX
      } = window15;
      prevSettings.position = body.style.position;
      prevSettings.top = body.style.top;
      prevSettings.left = body.style.left;
      body.style.setProperty("position", "fixed");
      body.style.setProperty("top", "".concat(-scrollY, "px"));
      body.style.setProperty("left", "".concat(-scrollX, "px"));
    } : () => {
      (() => {
        var scrollBarWidth = window15.innerWidth - documentElement.clientWidth;
        if (prevSettings.paddingRight || scrollBarWidth <= 0) {
          return;
        }
        var paddingRight = window15.getComputedStyle(body).getPropertyValue("padding-right");
        var computedBodyPaddingRight = parseInt(paddingRight, 10);
        prevSettings.paddingRight = computedBodyPaddingRight;
        body.style.setProperty("padding-right", "".concat(computedBodyPaddingRight + scrollBarWidth, "px"));
      })();
      if (prevSettings.overflow || "hidden" === body.style.overflow) {
        return;
      }
      prevSettings.overflow = body.style.overflow;
      prevSettings.overflowX = body.style.overflowX;
      prevSettings.overflowY = body.style.overflowY;
      body.style.setProperty("overflow", "hidden");
    },
    restoreOverflow: isIosDevice ? () => {
      if (!isDefined(prevSettings.position)) {
        return;
      }
      var scrollY = -parseInt(body.style.top, 10);
      var scrollX = -parseInt(body.style.left, 10);
      ["position", "top", "left"].forEach((property) => {
        if (prevSettings[property]) {
          body.style.setProperty(property, prevSettings[property]);
        } else {
          body.style.removeProperty(property);
        }
      });
      window15.scrollTo(scrollX, scrollY);
      prevSettings.position = null;
    } : () => {
      (() => {
        if (!isDefined(prevSettings.paddingRight)) {
          return;
        }
        if (prevSettings.paddingRight) {
          body.style.setProperty("padding-right", "".concat(prevSettings.paddingRight, "px"));
        } else {
          body.style.removeProperty("padding-right");
        }
        prevSettings.paddingRight = null;
      })();
      ["overflow", "overflowX", "overflowY"].forEach((property) => {
        if (!isDefined(prevSettings[property])) {
          return;
        }
        var propertyInKebabCase = property.replace(/(X)|(Y)/, (symbol) => "-".concat(symbol.toLowerCase()));
        if (prevSettings[property]) {
          body.style.setProperty(propertyInKebabCase, prevSettings[property]);
        } else {
          body.style.removeProperty(propertyInKebabCase);
        }
        prevSettings[property] = null;
      });
    }
  };
};

// node_modules/devextreme/esm/__internal/ui/popup/m_popup_position_controller.js
var __rest2 = function(s, e) {
  var t = {};
  for (var p2 in s) {
    if (Object.prototype.hasOwnProperty.call(s, p2) && e.indexOf(p2) < 0) {
      t[p2] = s[p2];
    }
  }
  if (null != s && "function" === typeof Object.getOwnPropertySymbols) {
    var i = 0;
    for (p2 = Object.getOwnPropertySymbols(s); i < p2.length; i++) {
      if (e.indexOf(p2[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p2[i])) {
        t[p2[i]] = s[p2[i]];
      }
    }
  }
  return t;
};
var window5 = getWindow();
var PopupPositionController = class extends OverlayPositionController {
  constructor(_a) {
    var {
      fullScreen,
      forceApplyBindings,
      dragOutsideBoundary,
      dragAndResizeArea,
      outsideDragFactor
    } = _a, args = __rest2(_a, ["fullScreen", "forceApplyBindings", "dragOutsideBoundary", "dragAndResizeArea", "outsideDragFactor"]);
    super(args);
    this._props = _extends(_extends({}, this._props), {
      fullScreen,
      forceApplyBindings,
      dragOutsideBoundary,
      dragAndResizeArea,
      outsideDragFactor
    });
    this._$dragResizeContainer = void 0;
    this._updateDragResizeContainer();
  }
  set fullScreen(fullScreen) {
    this._props.fullScreen = fullScreen;
    if (fullScreen) {
      this._fullScreenEnabled();
    } else {
      this._fullScreenDisabled();
    }
  }
  get $dragResizeContainer() {
    return this._$dragResizeContainer;
  }
  get outsideDragFactor() {
    if (this._props.dragOutsideBoundary) {
      return 1;
    }
    return this._props.outsideDragFactor;
  }
  set dragAndResizeArea(dragAndResizeArea) {
    this._props.dragAndResizeArea = dragAndResizeArea;
    this._updateDragResizeContainer();
  }
  set dragOutsideBoundary(dragOutsideBoundary) {
    this._props.dragOutsideBoundary = dragOutsideBoundary;
    this._updateDragResizeContainer();
  }
  set outsideDragFactor(outsideDragFactor) {
    this._props.outsideDragFactor = outsideDragFactor;
  }
  updateContainer(containerProp) {
    super.updateContainer(containerProp);
    this._updateDragResizeContainer();
  }
  dragHandled() {
    this.restorePositionOnNextRender(false);
  }
  resizeHandled() {
    this.restorePositionOnNextRender(false);
  }
  positionContent() {
    var _a, _b;
    if (this._props.fullScreen) {
      move(this._$content, {
        top: 0,
        left: 0
      });
      this.detectVisualPositionChange();
    } else {
      null === (_b = (_a = this._props).forceApplyBindings) || void 0 === _b ? void 0 : _b.call(_a);
      super.positionContent();
    }
  }
  _updateDragResizeContainer() {
    this._$dragResizeContainer = this._getDragResizeContainer();
  }
  _getDragResizeContainer() {
    if (this._props.dragOutsideBoundary) {
      return renderer_default(window5);
    }
    if (this._props.dragAndResizeArea) {
      return renderer_default(this._props.dragAndResizeArea);
    }
    var isContainerDefined = originalViewPort().get(0) || this._props.container;
    return isContainerDefined ? this._$markupContainer : renderer_default(window5);
  }
  _getVisualContainer() {
    if (this._props.fullScreen) {
      return renderer_default(window5);
    }
    return super._getVisualContainer();
  }
  _fullScreenEnabled() {
    this.restorePositionOnNextRender(false);
  }
  _fullScreenDisabled() {
    this.restorePositionOnNextRender(true);
  }
};

// node_modules/devextreme/esm/__internal/ui/popup/m_popup.js
var window6 = getWindow();
var POPUP_CLASS = "dx-popup";
var POPUP_WRAPPER_CLASS = "dx-popup-wrapper";
var POPUP_FULL_SCREEN_CLASS = "dx-popup-fullscreen";
var POPUP_FULL_SCREEN_WIDTH_CLASS = "dx-popup-fullscreen-width";
var POPUP_NORMAL_CLASS = "dx-popup-normal";
var POPUP_CONTENT_CLASS = "dx-popup-content";
var POPUP_CONTENT_SCROLLABLE_CLASS = "dx-popup-content-scrollable";
var DISABLED_STATE_CLASS3 = "dx-state-disabled";
var POPUP_DRAGGABLE_CLASS = "dx-popup-draggable";
var POPUP_TITLE_CLASS = "dx-popup-title";
var POPUP_TITLE_CLOSEBUTTON_CLASS = "dx-closebutton";
var POPUP_BOTTOM_CLASS = "dx-popup-bottom";
var POPUP_HAS_CLOSE_BUTTON_CLASS = "dx-has-close-button";
var TEMPLATE_WRAPPER_CLASS2 = "dx-template-wrapper";
var POPUP_CONTENT_FLEX_HEIGHT_CLASS = "dx-popup-flex-height";
var POPUP_CONTENT_INHERIT_HEIGHT_CLASS = "dx-popup-inherit-height";
var TOOLBAR_LABEL_CLASS3 = "dx-toolbar-label";
var ALLOWED_TOOLBAR_ITEM_ALIASES = ["cancel", "clear", "done"];
var BUTTON_DEFAULT_TYPE = "default";
var BUTTON_NORMAL_TYPE = "normal";
var BUTTON_TEXT_MODE = "text";
var BUTTON_CONTAINED_MODE = "contained";
var BUTTON_OUTLINED_MODE = "outlined";
var IS_OLD_SAFARI = browser_default.safari && compare(browser_default.version, [11]) < 0;
var HEIGHT_STRATEGIES = {
  static: "",
  inherit: POPUP_CONTENT_INHERIT_HEIGHT_CLASS,
  flex: POPUP_CONTENT_FLEX_HEIGHT_CLASS
};
var getButtonPlace = (name2) => {
  var device = devices_default.current();
  var {
    platform
  } = device;
  var toolbar = "bottom";
  var location = "before";
  if ("ios" === platform) {
    switch (name2) {
      case "cancel":
        toolbar = "top";
        break;
      case "clear":
        toolbar = "top";
        location = "after";
        break;
      case "done":
        location = "after";
    }
  } else if ("android" === platform) {
    switch (name2) {
      case "cancel":
      case "done":
        location = "after";
    }
  }
  return {
    toolbar,
    location
  };
};
var Popup = ui_overlay_default.inherit({
  _supportedKeys() {
    return extend(this.callBase(), {
      upArrow: (e) => {
        var _a;
        null === (_a = this._drag) || void 0 === _a ? void 0 : _a.moveUp(e);
      },
      downArrow: (e) => {
        var _a;
        null === (_a = this._drag) || void 0 === _a ? void 0 : _a.moveDown(e);
      },
      leftArrow: (e) => {
        var _a;
        null === (_a = this._drag) || void 0 === _a ? void 0 : _a.moveLeft(e);
      },
      rightArrow: (e) => {
        var _a;
        null === (_a = this._drag) || void 0 === _a ? void 0 : _a.moveRight(e);
      }
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      fullScreen: false,
      title: "",
      showTitle: true,
      titleTemplate: "title",
      onTitleRendered: null,
      dragOutsideBoundary: false,
      dragEnabled: false,
      dragAndResizeArea: void 0,
      enableBodyScroll: true,
      outsideDragFactor: 0,
      onResizeStart: null,
      onResize: null,
      onResizeEnd: null,
      resizeEnabled: false,
      toolbarItems: [],
      showCloseButton: false,
      bottomTemplate: "bottom",
      useDefaultToolbarButtons: false,
      useFlatToolbarButtons: false,
      autoResizeEnabled: true
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: {
        platform: "ios"
      },
      options: {
        animation: this._iosAnimation
      }
    }, {
      device: {
        platform: "android"
      },
      options: {
        animation: this._androidAnimation
      }
    }, {
      device: {
        platform: "generic"
      },
      options: {
        showCloseButton: true
      }
    }, {
      device: (device) => "desktop" === devices_default.real().deviceType && "generic" === device.platform,
      options: {
        dragEnabled: true
      }
    }, {
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }, {
      device: () => isMaterialBased(),
      options: {
        useFlatToolbarButtons: true
      }
    }, {
      device: () => isMaterial(),
      options: {
        useDefaultToolbarButtons: true,
        showCloseButton: false
      }
    }]);
  },
  _iosAnimation: {
    show: {
      type: "slide",
      duration: 400,
      from: {
        position: {
          my: "top",
          at: "bottom"
        }
      },
      to: {
        position: {
          my: "center",
          at: "center"
        }
      }
    },
    hide: {
      type: "slide",
      duration: 400,
      from: {
        opacity: 1,
        position: {
          my: "center",
          at: "center"
        }
      },
      to: {
        opacity: 1,
        position: {
          my: "top",
          at: "bottom"
        }
      }
    }
  },
  _androidAnimation() {
    return this.option("fullScreen") ? {
      show: {
        type: "slide",
        duration: 300,
        from: {
          top: "30%",
          opacity: 0
        },
        to: {
          top: 0,
          opacity: 1
        }
      },
      hide: {
        type: "slide",
        duration: 300,
        from: {
          top: 0,
          opacity: 1
        },
        to: {
          top: "30%",
          opacity: 0
        }
      }
    } : {
      show: {
        type: "fade",
        duration: 400,
        from: 0,
        to: 1
      },
      hide: {
        type: "fade",
        duration: 400,
        from: 1,
        to: 0
      }
    };
  },
  _init() {
    var popupWrapperClassExternal = this.option("_wrapperClassExternal");
    var popupWrapperClasses = popupWrapperClassExternal ? "".concat(POPUP_WRAPPER_CLASS, " ").concat(popupWrapperClassExternal) : POPUP_WRAPPER_CLASS;
    this.callBase();
    this._createBodyOverflowManager();
    this._updateResizeCallbackSkipCondition();
    this.$element().addClass(POPUP_CLASS);
    this.$wrapper().addClass(popupWrapperClasses);
    this._$popupContent = this._$content.wrapInner(renderer_default("<div>").addClass(POPUP_CONTENT_CLASS)).children().eq(0);
    this._toggleContentScrollClass();
    this.$overlayContent().attr("role", "dialog");
  },
  _render() {
    var isFullscreen = this.option("fullScreen");
    this._toggleFullScreenClass(isFullscreen);
    this.callBase();
  },
  _createBodyOverflowManager() {
    this._bodyOverflowManager = createBodyOverflowManager();
  },
  _toggleFullScreenClass(value2) {
    this.$overlayContent().toggleClass(POPUP_FULL_SCREEN_CLASS, value2).toggleClass(POPUP_NORMAL_CLASS, !value2);
  },
  _initTemplates() {
    this.callBase();
    this._templateManager.addDefaultTemplates({
      title: new EmptyTemplate(),
      bottom: new EmptyTemplate()
    });
  },
  _getActionsList() {
    return this.callBase().concat(["onResizeStart", "onResize", "onResizeEnd"]);
  },
  _contentResizeHandler(entry) {
    if (!this._shouldSkipContentResize(entry)) {
      this._renderGeometry({
        shouldOnlyReposition: true
      });
    }
  },
  _doesShowAnimationChangeDimensions() {
    var animation2 = this.option("animation");
    return ["to", "from"].some((prop) => {
      var _a;
      var config2 = null === (_a = null === animation2 || void 0 === animation2 ? void 0 : animation2.show) || void 0 === _a ? void 0 : _a[prop];
      return isObject(config2) && ("width" in config2 || "height" in config2);
    });
  },
  _updateResizeCallbackSkipCondition() {
    var doesShowAnimationChangeDimensions = this._doesShowAnimationChangeDimensions();
    this._shouldSkipContentResize = (entry) => doesShowAnimationChangeDimensions && this._showAnimationProcessing || this._areContentDimensionsRendered(entry);
  },
  _observeContentResize(shouldObserve) {
    if (!this.option("useResizeObserver")) {
      return;
    }
    var contentElement = this._$content.get(0);
    if (shouldObserve) {
      resize_observer_default.observe(contentElement, (entry) => {
        this._contentResizeHandler(entry);
      });
    } else {
      resize_observer_default.unobserve(contentElement);
    }
  },
  _areContentDimensionsRendered(entry) {
    var _a, _b, _c, _d, _e;
    var contentBox = null === (_a = entry.contentBoxSize) || void 0 === _a ? void 0 : _a[0];
    if (contentBox) {
      return parseInt(contentBox.inlineSize, 10) === (null === (_b = this._renderedDimensions) || void 0 === _b ? void 0 : _b.width) && parseInt(contentBox.blockSize, 10) === (null === (_c = this._renderedDimensions) || void 0 === _c ? void 0 : _c.height);
    }
    var {
      contentRect
    } = entry;
    return parseInt(contentRect.width, 10) === (null === (_d = this._renderedDimensions) || void 0 === _d ? void 0 : _d.width) && parseInt(contentRect.height, 10) === (null === (_e = this._renderedDimensions) || void 0 === _e ? void 0 : _e.height);
  },
  _renderContent() {
    this.callBase();
    this._observeContentResize(true);
  },
  _renderContentImpl() {
    this._renderTitle();
    this.callBase();
    this._renderResize();
    this._renderBottom();
  },
  _renderTitle() {
    var items = this._getToolbarItems("top");
    var {
      title,
      showTitle
    } = this.option();
    if (showTitle && !!title) {
      items.unshift({
        location: devices_default.current().ios ? "center" : "before",
        text: title
      });
    }
    if (showTitle || items.length > 0) {
      this._$title && this._$title.remove();
      var $title = renderer_default("<div>").addClass(POPUP_TITLE_CLASS).insertBefore(this.$content());
      this._$title = this._renderTemplateByType("titleTemplate", items, $title).addClass(POPUP_TITLE_CLASS);
      this._renderDrag();
      this._executeTitleRenderAction(this._$title);
      this._$title.toggleClass(POPUP_HAS_CLOSE_BUTTON_CLASS, this._hasCloseButton());
    } else if (this._$title) {
      this._$title.detach();
    }
    this._toggleAriaLabel();
  },
  _toggleAriaLabel() {
    var _a;
    var {
      title,
      showTitle
    } = this.option();
    var shouldSetAriaLabel = showTitle && !!title;
    var titleId = shouldSetAriaLabel ? new guid_default() : null;
    null === (_a = this._$title) || void 0 === _a ? void 0 : _a.find(".".concat(TOOLBAR_LABEL_CLASS3)).eq(0).attr("id", titleId);
    this.$overlayContent().attr("aria-labelledby", titleId);
  },
  _renderTemplateByType(optionName, data17, $container, additionalToolbarOptions) {
    var {
      rtlEnabled,
      useDefaultToolbarButtons,
      useFlatToolbarButtons,
      disabled
    } = this.option();
    var template = this._getTemplateByOption(optionName);
    var toolbarTemplate = template instanceof EmptyTemplate;
    if (toolbarTemplate) {
      var integrationOptions = extend({}, this.option("integrationOptions"), {
        skipTemplates: ["content", "title"]
      });
      var toolbarOptions = extend(additionalToolbarOptions, {
        items: data17,
        rtlEnabled,
        useDefaultButtons: useDefaultToolbarButtons,
        useFlatButtons: useFlatToolbarButtons,
        disabled,
        integrationOptions
      });
      this._getTemplate("dx-polymorph-widget").render({
        container: $container,
        model: {
          widget: this._getToolbarName(),
          options: toolbarOptions
        }
      });
      var $toolbar = $container.children("div");
      $container.replaceWith($toolbar);
      return $toolbar;
    }
    var $result = renderer_default(template.render({
      container: getPublicElement($container)
    }));
    if ($result.hasClass(TEMPLATE_WRAPPER_CLASS2)) {
      $container.replaceWith($result);
      $container = $result;
    }
    return $container;
  },
  _getToolbarName: () => "dxToolbarBase",
  _renderVisibilityAnimate(visible) {
    return this.callBase(visible);
  },
  _hide() {
    this._observeContentResize(false);
    return this.callBase();
  },
  _executeTitleRenderAction($titleElement) {
    this._getTitleRenderAction()({
      titleElement: getPublicElement($titleElement)
    });
  },
  _getTitleRenderAction() {
    return this._titleRenderAction || this._createTitleRenderAction();
  },
  _createTitleRenderAction() {
    return this._titleRenderAction = this._createActionByOption("onTitleRendered", {
      element: this.element(),
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _getCloseButton() {
    return {
      toolbar: "top",
      location: "after",
      template: this._getCloseButtonRenderer()
    };
  },
  _getCloseButtonRenderer() {
    return (_, __, container) => {
      var $button = renderer_default("<div>").addClass(POPUP_TITLE_CLOSEBUTTON_CLASS);
      this._createComponent($button, button_default, {
        icon: "close",
        onClick: this._createToolbarItemAction(void 0),
        stylingMode: "text",
        integrationOptions: {}
      });
      renderer_default(container).append($button);
    };
  },
  _getToolbarItems(toolbar) {
    var toolbarItems = this.option("toolbarItems");
    var toolbarsItems = [];
    this._toolbarItemClasses = [];
    var currentPlatform = devices_default.current().platform;
    var index = 0;
    each(toolbarItems, (_, data17) => {
      var isShortcut = isDefined(data17.shortcut);
      var item = isShortcut ? getButtonPlace(data17.shortcut) : data17;
      if (isShortcut && "ios" === currentPlatform && index < 2) {
        item.toolbar = "top";
        index++;
      }
      item.toolbar = data17.toolbar || item.toolbar || "top";
      if (item && item.toolbar === toolbar) {
        if (isShortcut) {
          extend(item, {
            location: data17.location
          }, this._getToolbarItemByAlias(data17));
        }
        var isLTROrder = "generic" === currentPlatform;
        if ("done" === data17.shortcut && isLTROrder || "cancel" === data17.shortcut && !isLTROrder) {
          toolbarsItems.unshift(item);
        } else {
          toolbarsItems.push(item);
        }
      }
    });
    if ("top" === toolbar && this._hasCloseButton()) {
      toolbarsItems.push(this._getCloseButton());
    }
    return toolbarsItems;
  },
  _hasCloseButton() {
    return this.option("showCloseButton") && this.option("showTitle");
  },
  _getLocalizationKey: (itemType) => "done" === itemType.toLowerCase() ? "OK" : camelize(itemType, true),
  _getToolbarButtonStylingMode(shortcut) {
    if (isFluent()) {
      return "done" === shortcut ? BUTTON_CONTAINED_MODE : BUTTON_OUTLINED_MODE;
    }
    return this.option("useFlatToolbarButtons") ? BUTTON_TEXT_MODE : BUTTON_CONTAINED_MODE;
  },
  _getToolbarButtonType(shortcut) {
    if (isFluent() && "done" === shortcut || this.option("useDefaultToolbarButtons")) {
      return BUTTON_DEFAULT_TYPE;
    }
    return BUTTON_NORMAL_TYPE;
  },
  _getToolbarItemByAlias(data17) {
    var that = this;
    var itemType = data17.shortcut;
    if (!ALLOWED_TOOLBAR_ITEM_ALIASES.includes(itemType)) {
      return false;
    }
    var itemConfig = extend({
      text: message_default.format(this._getLocalizationKey(itemType)),
      onClick: this._createToolbarItemAction(data17.onClick),
      integrationOptions: {},
      type: this._getToolbarButtonType(itemType),
      stylingMode: this._getToolbarButtonStylingMode(itemType)
    }, data17.options || {});
    var itemClass = "".concat(POPUP_CLASS, "-").concat(itemType);
    this._toolbarItemClasses.push(itemClass);
    return {
      template(_, __, container) {
        var $toolbarItem = renderer_default("<div>").addClass(itemClass).appendTo(container);
        that._createComponent($toolbarItem, button_default, itemConfig);
      }
    };
  },
  _createToolbarItemAction(clickAction) {
    return this._createAction(clickAction, {
      afterExecute(e) {
        e.component.hide();
      }
    });
  },
  _renderBottom() {
    var items = this._getToolbarItems("bottom");
    if (items.length) {
      this._$bottom && this._$bottom.remove();
      var $bottom = renderer_default("<div>").addClass(POPUP_BOTTOM_CLASS).insertAfter(this.$content());
      this._$bottom = this._renderTemplateByType("bottomTemplate", items, $bottom, {
        compactMode: true
      }).addClass(POPUP_BOTTOM_CLASS);
      this._toggleClasses();
    } else {
      this._$bottom && this._$bottom.detach();
    }
  },
  _toggleDisabledState(value2) {
    this.callBase(...arguments);
    this.$content().toggleClass(DISABLED_STATE_CLASS3, Boolean(value2));
  },
  _toggleClasses() {
    var aliases = ALLOWED_TOOLBAR_ITEM_ALIASES;
    each(aliases, (_, alias) => {
      var className = "".concat(POPUP_CLASS, "-").concat(alias);
      if (this._toolbarItemClasses.includes(className)) {
        this.$wrapper().addClass("".concat(className, "-visible"));
        this._$bottom.addClass(className);
      } else {
        this.$wrapper().removeClass("".concat(className, "-visible"));
        this._$bottom.removeClass(className);
      }
    });
  },
  _toggleFocusClass(isFocused, $element) {
    this.callBase(isFocused, $element);
    if (isFocused && !isLastZIndexInStack(this._zIndex)) {
      var zIndex = create(this._zIndexInitValue());
      remove(this._zIndex);
      this._zIndex = zIndex;
      this._$wrapper.css("zIndex", zIndex);
      this._$content.css("zIndex", zIndex);
    }
  },
  _toggleContentScrollClass() {
    var isNativeScrollingEnabled = !this.option("preventScrollEvents");
    this.$content().toggleClass(POPUP_CONTENT_SCROLLABLE_CLASS, isNativeScrollingEnabled);
  },
  _getPositionControllerConfig() {
    var {
      fullScreen,
      forceApplyBindings,
      dragOutsideBoundary,
      dragAndResizeArea,
      outsideDragFactor
    } = this.option();
    return extend({}, this.callBase(), {
      fullScreen,
      forceApplyBindings,
      dragOutsideBoundary,
      dragAndResizeArea,
      outsideDragFactor
    });
  },
  _initPositionController() {
    this._positionController = new PopupPositionController(this._getPositionControllerConfig());
  },
  _getDragTarget() {
    return this.topToolbar();
  },
  _renderGeometry(options2) {
    var {
      visible,
      useResizeObserver
    } = this.option();
    if (visible && hasWindow()) {
      var isAnimated = this._showAnimationProcessing;
      var shouldRepeatAnimation = isAnimated && !(null === options2 || void 0 === options2 ? void 0 : options2.forceStopAnimation) && useResizeObserver;
      this._isAnimationPaused = shouldRepeatAnimation || void 0;
      this._stopAnimation();
      if (null === options2 || void 0 === options2 ? void 0 : options2.shouldOnlyReposition) {
        this._renderPosition(false);
      } else {
        this._renderGeometryImpl(null === options2 || void 0 === options2 ? void 0 : options2.isDimensionChange);
      }
      if (shouldRepeatAnimation) {
        this._animateShowing();
        this._isAnimationPaused = void 0;
      }
    }
  },
  _cacheDimensions() {
    if (!this.option("useResizeObserver")) {
      return;
    }
    this._renderedDimensions = {
      width: parseInt(getWidth(this._$content), 10),
      height: parseInt(getHeight(this._$content), 10)
    };
  },
  _renderGeometryImpl() {
    var isDimensionChange = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : false;
    if (!isDimensionChange) {
      this._resetContentHeight();
    }
    this.callBase();
    this._cacheDimensions();
    this._setContentHeight();
  },
  _resetContentHeight() {
    var height = this._getOptionValue("height");
    if ("auto" === height) {
      this.$content().css({
        height: "auto",
        maxHeight: "none"
      });
    }
  },
  _renderDrag() {
    var $dragTarget = this._getDragTarget();
    var dragEnabled = this.option("dragEnabled");
    if (!$dragTarget) {
      return;
    }
    var config2 = {
      dragEnabled,
      handle: $dragTarget.get(0),
      draggableElement: this._$content.get(0),
      positionController: this._positionController
    };
    if (this._drag) {
      this._drag.init(config2);
    } else {
      this._drag = new m_popup_drag_default(config2);
    }
    this.$overlayContent().toggleClass(POPUP_DRAGGABLE_CLASS, dragEnabled);
  },
  _renderResize() {
    this._resizable = this._createComponent(this._$content, resizable_default, {
      handles: this.option("resizeEnabled") ? "all" : "none",
      onResizeEnd: (e) => {
        this._resizeEndHandler(e);
        this._observeContentResize(true);
      },
      onResize: (e) => {
        this._setContentHeight();
        this._actions.onResize(e);
      },
      onResizeStart: (e) => {
        this._observeContentResize(false);
        this._actions.onResizeStart(e);
      },
      minHeight: 100,
      minWidth: 100,
      area: this._positionController.$dragResizeContainer,
      keepAspectRatio: false
    });
  },
  _resizeEndHandler(e) {
    var width = this._resizable.option("width");
    var height = this._resizable.option("height");
    width && this._setOptionWithoutOptionChange("width", width);
    height && this._setOptionWithoutOptionChange("height", height);
    this._cacheDimensions();
    this._positionController.resizeHandled();
    this._positionController.detectVisualPositionChange(e.event);
    this._actions.onResizeEnd(e);
  },
  _setContentHeight() {
    (this.option("forceApplyBindings") || noop)();
    var overlayContent = this.$overlayContent().get(0);
    var currentHeightStrategyClass = this._chooseHeightStrategy(overlayContent);
    this.$content().css(this._getHeightCssStyles(currentHeightStrategyClass, overlayContent));
    this._setHeightClasses(this.$overlayContent(), currentHeightStrategyClass);
  },
  _heightStrategyChangeOffset: (currentHeightStrategyClass, popupVerticalPaddings) => currentHeightStrategyClass === HEIGHT_STRATEGIES.flex ? -popupVerticalPaddings : 0,
  _chooseHeightStrategy(overlayContent) {
    var isAutoWidth = "auto" === overlayContent.style.width || "" === overlayContent.style.width;
    var currentHeightStrategyClass = HEIGHT_STRATEGIES.static;
    if (this._isAutoHeight() && this.option("autoResizeEnabled")) {
      if (isAutoWidth || IS_OLD_SAFARI) {
        currentHeightStrategyClass = HEIGHT_STRATEGIES.inherit;
      } else {
        currentHeightStrategyClass = HEIGHT_STRATEGIES.flex;
      }
    }
    return currentHeightStrategyClass;
  },
  _getHeightCssStyles(currentHeightStrategyClass, overlayContent) {
    var cssStyles = {};
    var contentMaxHeight = this._getOptionValue("maxHeight", overlayContent);
    var contentMinHeight = this._getOptionValue("minHeight", overlayContent);
    var popupHeightParts = this._splitPopupHeight();
    var toolbarsAndVerticalOffsetsHeight = popupHeightParts.header + popupHeightParts.footer + popupHeightParts.contentVerticalOffsets + popupHeightParts.popupVerticalOffsets + this._heightStrategyChangeOffset(currentHeightStrategyClass, popupHeightParts.popupVerticalPaddings);
    if (currentHeightStrategyClass === HEIGHT_STRATEGIES.static) {
      if (!this._isAutoHeight() || contentMaxHeight || contentMinHeight) {
        var overlayHeight = this.option("fullScreen") ? Math.min(getBoundingRect(overlayContent).height, getWindow().innerHeight) : getBoundingRect(overlayContent).height;
        var contentHeight = overlayHeight - toolbarsAndVerticalOffsetsHeight;
        cssStyles = {
          height: Math.max(0, contentHeight),
          minHeight: "auto",
          maxHeight: "auto"
        };
      }
    } else {
      var container = renderer_default(this._positionController.$visualContainer).get(0);
      var maxHeightValue = addOffsetToMaxHeight(contentMaxHeight, -toolbarsAndVerticalOffsetsHeight, container);
      var minHeightValue = addOffsetToMinHeight(contentMinHeight, -toolbarsAndVerticalOffsetsHeight, container);
      cssStyles = {
        height: "auto",
        minHeight: minHeightValue,
        maxHeight: maxHeightValue
      };
    }
    return cssStyles;
  },
  _setHeightClasses($container, currentClass) {
    var excessClasses = "";
    for (var name2 in HEIGHT_STRATEGIES) {
      if (HEIGHT_STRATEGIES[name2] !== currentClass) {
        excessClasses += " ".concat(HEIGHT_STRATEGIES[name2]);
      }
    }
    $container.removeClass(excessClasses).addClass(currentClass);
  },
  _isAutoHeight() {
    return "auto" === this.$overlayContent().get(0).style.height;
  },
  _splitPopupHeight() {
    var topToolbar = this.topToolbar();
    var bottomToolbar = this.bottomToolbar();
    return {
      header: getVisibleHeight(topToolbar && topToolbar.get(0)),
      footer: getVisibleHeight(bottomToolbar && bottomToolbar.get(0)),
      contentVerticalOffsets: getVerticalOffsets(this.$overlayContent().get(0), true),
      popupVerticalOffsets: getVerticalOffsets(this.$content().get(0), true),
      popupVerticalPaddings: getVerticalOffsets(this.$content().get(0), false)
    };
  },
  _isAllWindowCovered() {
    return this.callBase() || this.option("fullScreen");
  },
  _renderDimensions() {
    if (this.option("fullScreen")) {
      this.$overlayContent().css({
        width: "100%",
        height: "100%",
        minWidth: "",
        maxWidth: "",
        minHeight: "",
        maxHeight: ""
      });
    } else {
      this.callBase();
    }
    if (hasWindow()) {
      this._renderFullscreenWidthClass();
    }
  },
  _dimensionChanged() {
    this._renderGeometry({
      isDimensionChange: true
    });
  },
  _clean() {
    this.callBase();
    this._observeContentResize(false);
  },
  _dispose() {
    this.callBase();
    this._toggleBodyScroll(true);
  },
  _renderFullscreenWidthClass() {
    this.$overlayContent().toggleClass(POPUP_FULL_SCREEN_WIDTH_CLASS, getOuterWidth(this.$overlayContent()) === getWidth(window6));
  },
  _toggleSafariScrolling() {
    if (!this.option("enableBodyScroll")) {
      return;
    }
    this.callBase();
  },
  _toggleBodyScroll(enabled) {
    if (!this._bodyOverflowManager) {
      return;
    }
    var {
      setOverflow,
      restoreOverflow
    } = this._bodyOverflowManager;
    if (enabled) {
      restoreOverflow();
    } else {
      setOverflow();
    }
  },
  refreshPosition() {
    this._renderPosition();
  },
  _optionChanged(args) {
    var _a, _b;
    var {
      value: value2,
      name: name2
    } = args;
    switch (name2) {
      case "disabled":
        this.callBase(args);
        this._renderTitle();
        this._renderBottom();
        break;
      case "animation":
        this._updateResizeCallbackSkipCondition();
        break;
      case "enableBodyScroll":
        if (this.option("visible")) {
          this._toggleBodyScroll(value2);
        }
        break;
      case "showTitle":
      case "title":
      case "titleTemplate":
        this._renderTitle();
        this._renderGeometry();
        triggerResizeEvent(this.$overlayContent());
        break;
      case "bottomTemplate":
        this._renderBottom();
        this._renderGeometry();
        triggerResizeEvent(this.$overlayContent());
        break;
      case "container":
        this.callBase(args);
        if (this.option("resizeEnabled")) {
          null === (_a = this._resizable) || void 0 === _a ? void 0 : _a.option("area", this._positionController.$dragResizeContainer);
        }
        break;
      case "width":
      case "height":
        this.callBase(args);
        null === (_b = this._resizable) || void 0 === _b ? void 0 : _b.option(name2, value2);
        break;
      case "onTitleRendered":
        this._createTitleRenderAction(value2);
        break;
      case "toolbarItems":
      case "useDefaultToolbarButtons":
      case "useFlatToolbarButtons":
        var shouldRenderGeometry = !args.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);
        this._renderTitle();
        this._renderBottom();
        if (shouldRenderGeometry) {
          this._renderGeometry();
          triggerResizeEvent(this.$overlayContent());
        }
        break;
      case "dragEnabled":
        this._renderDrag();
        break;
      case "dragAndResizeArea":
        this._positionController.dragAndResizeArea = value2;
        if (this.option("resizeEnabled")) {
          this._resizable.option("area", this._positionController.$dragResizeContainer);
        }
        this._positionController.positionContent();
        break;
      case "dragOutsideBoundary":
        this._positionController.dragOutsideBoundary = value2;
        if (this.option("resizeEnabled")) {
          this._resizable.option("area", this._positionController.$dragResizeContainer);
        }
        break;
      case "outsideDragFactor":
        this._positionController.outsideDragFactor = value2;
        break;
      case "resizeEnabled":
        this._renderResize();
        this._renderGeometry();
        break;
      case "autoResizeEnabled":
        this._renderGeometry();
        triggerResizeEvent(this.$overlayContent());
        break;
      case "fullScreen":
        this._positionController.fullScreen = value2;
        this._toggleFullScreenClass(value2);
        this._toggleSafariScrolling();
        this._renderGeometry();
        triggerResizeEvent(this.$overlayContent());
        break;
      case "showCloseButton":
        this._renderTitle();
        break;
      case "preventScrollEvents":
        this.callBase(args);
        this._toggleContentScrollClass();
        break;
      default:
        this.callBase(args);
    }
  },
  bottomToolbar() {
    return this._$bottom;
  },
  topToolbar() {
    return this._$title;
  },
  $content() {
    return this._$popupContent;
  },
  content() {
    return getPublicElement(this.$content());
  },
  $overlayContent() {
    return this._$content;
  },
  getFocusableElements() {
    return this.$wrapper().find("[tabindex]").filter((index, item) => item.getAttribute("tabindex") >= 0);
  }
});
component_registrator_default("dxPopup", Popup);
var m_popup_default = Popup;

// node_modules/devextreme/esm/ui/popup/ui.popup.js
var ui_popup_default = m_popup_default;

// node_modules/devextreme/esm/events/swipe.js
var SWIPE_START_EVENT = "dxswipestart";
var SWIPE_EVENT = "dxswipe";
var SWIPE_END_EVENT = "dxswipeend";
var HorizontalStrategy = {
  defaultItemSizeFunc: function() {
    return getWidth(this.getElement());
  },
  getBounds: function() {
    return [this._maxLeftOffset, this._maxRightOffset];
  },
  calcOffsetRatio: function(e) {
    var endEventData = eventData(e);
    return (endEventData.x - (this._savedEventData && this._savedEventData.x || 0)) / this._itemSizeFunc().call(this, e);
  },
  isFastSwipe: function(e) {
    var endEventData = eventData(e);
    return this.FAST_SWIPE_SPEED_LIMIT * Math.abs(endEventData.x - this._tickData.x) >= endEventData.time - this._tickData.time;
  }
};
var VerticalStrategy = {
  defaultItemSizeFunc: function() {
    return getHeight(this.getElement());
  },
  getBounds: function() {
    return [this._maxTopOffset, this._maxBottomOffset];
  },
  calcOffsetRatio: function(e) {
    var endEventData = eventData(e);
    return (endEventData.y - (this._savedEventData && this._savedEventData.y || 0)) / this._itemSizeFunc().call(this, e);
  },
  isFastSwipe: function(e) {
    var endEventData = eventData(e);
    return this.FAST_SWIPE_SPEED_LIMIT * Math.abs(endEventData.y - this._tickData.y) >= endEventData.time - this._tickData.time;
  }
};
var STRATEGIES = {
  horizontal: HorizontalStrategy,
  vertical: VerticalStrategy
};
var SwipeEmitter = emitter_gesture_default.inherit({
  TICK_INTERVAL: 300,
  FAST_SWIPE_SPEED_LIMIT: 10,
  ctor: function(element) {
    this.callBase(element);
    this.direction = "horizontal";
    this.elastic = true;
  },
  _getStrategy: function() {
    return STRATEGIES[this.direction];
  },
  _defaultItemSizeFunc: function() {
    return this._getStrategy().defaultItemSizeFunc.call(this);
  },
  _itemSizeFunc: function() {
    return this.itemSizeFunc || this._defaultItemSizeFunc;
  },
  _init: function(e) {
    this._tickData = eventData(e);
  },
  _start: function(e) {
    this._savedEventData = eventData(e);
    e = this._fireEvent(SWIPE_START_EVENT, e);
    if (!e.cancel) {
      this._maxLeftOffset = e.maxLeftOffset;
      this._maxRightOffset = e.maxRightOffset;
      this._maxTopOffset = e.maxTopOffset;
      this._maxBottomOffset = e.maxBottomOffset;
    }
  },
  _move: function(e) {
    var strategy = this._getStrategy();
    var moveEventData = eventData(e);
    var offset = strategy.calcOffsetRatio.call(this, e);
    offset = this._fitOffset(offset, this.elastic);
    if (moveEventData.time - this._tickData.time > this.TICK_INTERVAL) {
      this._tickData = moveEventData;
    }
    this._fireEvent(SWIPE_EVENT, e, {
      offset
    });
    if (false !== e.cancelable) {
      e.preventDefault();
    }
  },
  _end: function(e) {
    var strategy = this._getStrategy();
    var offsetRatio = strategy.calcOffsetRatio.call(this, e);
    var isFast = strategy.isFastSwipe.call(this, e);
    var startOffset = offsetRatio;
    var targetOffset = this._calcTargetOffset(offsetRatio, isFast);
    startOffset = this._fitOffset(startOffset, this.elastic);
    targetOffset = this._fitOffset(targetOffset, false);
    this._fireEvent(SWIPE_END_EVENT, e, {
      offset: startOffset,
      targetOffset
    });
  },
  _fitOffset: function(offset, elastic) {
    var strategy = this._getStrategy();
    var bounds = strategy.getBounds.call(this);
    if (offset < -bounds[0]) {
      return elastic ? (-2 * bounds[0] + offset) / 3 : -bounds[0];
    }
    if (offset > bounds[1]) {
      return elastic ? (2 * bounds[1] + offset) / 3 : bounds[1];
    }
    return offset;
  },
  _calcTargetOffset: function(offsetRatio, isFast) {
    var result2;
    if (isFast) {
      result2 = Math.ceil(Math.abs(offsetRatio));
      if (offsetRatio < 0) {
        result2 = -result2;
      }
    } else {
      result2 = Math.round(offsetRatio);
    }
    return result2;
  }
});
emitter_registrator_default({
  emitter: SwipeEmitter,
  events: [SWIPE_START_EVENT, SWIPE_EVENT, SWIPE_END_EVENT]
});

// node_modules/devextreme/esm/renovation/utils/type_conversion.js
function toNumber(attribute) {
  return attribute ? Number(attribute.replace("px", "")) : 0;
}

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_element_style.js
function getElementStyle(el) {
  var _getWindow$getCompute, _getWindow;
  return el && hasWindow() ? null === (_getWindow$getCompute = (_getWindow = getWindow()).getComputedStyle) || void 0 === _getWindow$getCompute ? void 0 : _getWindow$getCompute.call(_getWindow, el) : null;
}
function getElementMargin(element, side) {
  var style = getElementStyle(element);
  return style ? toNumber(style["margin".concat(titleize(side))]) : 0;
}

// node_modules/devextreme/esm/__internal/ui/collection/m_collection_widget.live_update.js
var PRIVATE_KEY_FIELD = "__dx_key__";
var m_collection_widget_live_update_default = m_collection_widget_edit_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      repaintChangesOnly: false
    });
  },
  ctor() {
    var _a;
    this.callBase.apply(this, arguments);
    this._customizeStoreLoadOptions = (e) => {
      var dataController2 = this._dataController;
      if (dataController2.getDataSource() && !this._dataController.isLoaded()) {
        this._correctionIndex = 0;
      }
      if (this._correctionIndex && e.storeLoadOptions) {
        e.storeLoadOptions.skip += this._correctionIndex;
      }
    };
    null === (_a = this._dataController) || void 0 === _a ? void 0 : _a.on("customizeStoreLoadOptions", this._customizeStoreLoadOptions);
  },
  reload() {
    this._correctionIndex = 0;
  },
  _init() {
    this.callBase();
    this._refreshItemsCache();
    this._correctionIndex = 0;
  },
  _findItemElementByKey(key) {
    var result2 = renderer_default();
    var keyExpr = this.key();
    this.itemElements().each((_, item) => {
      var $item = renderer_default(item);
      var itemData = this._getItemData($item);
      if (keyExpr ? keysEqual(keyExpr, this.keyOf(itemData), key) : this._isItemEquals(itemData, key)) {
        result2 = $item;
        return false;
      }
    });
    return result2;
  },
  _dataSourceChangedHandler(newItems, e) {
    if (null === e || void 0 === e ? void 0 : e.changes) {
      this._modifyByChanges(e.changes);
    } else {
      this.callBase(newItems, e);
      this._refreshItemsCache();
    }
  },
  _isItemEquals(item1, item2) {
    if (item1 && item1[PRIVATE_KEY_FIELD]) {
      item1 = item1.data;
    }
    try {
      return JSON.stringify(item1) === JSON.stringify(item2);
    } catch (e) {
      return item1 === item2;
    }
  },
  _isItemStrictEquals(item1, item2) {
    return this._isItemEquals(item1, item2);
  },
  _shouldAddNewGroup(changes, items) {
    var result2 = false;
    if (this.option("grouped")) {
      if (!changes.length) {
        result2 = true;
      }
      each(changes, (i, change) => {
        if ("insert" === change.type) {
          result2 = true;
          each(items, (_, item) => {
            if (void 0 !== change.data.key && change.data.key === item.key) {
              result2 = false;
              return false;
            }
          });
        }
      });
    }
    return result2;
  },
  _partialRefresh() {
    if (this.option("repaintChangesOnly")) {
      var result2 = findChanges(this._itemsCache, this._editStrategy.itemsGetter(), (data17) => {
        if (data17 && void 0 !== data17[PRIVATE_KEY_FIELD]) {
          return data17[PRIVATE_KEY_FIELD];
        }
        return this.keyOf(data17);
      }, this._isItemStrictEquals.bind(this));
      if (result2 && this._itemsCache.length && !this._shouldAddNewGroup(result2, this._itemsCache)) {
        this._modifyByChanges(result2, true);
        this._renderEmptyMessage();
        return true;
      }
      this._refreshItemsCache();
    }
    return false;
  },
  _refreshItemsCache() {
    if (this.option("repaintChangesOnly")) {
      var items = this._editStrategy.itemsGetter();
      try {
        this._itemsCache = extend(true, [], items);
        if (!this.key()) {
          this._itemsCache = this._itemsCache.map((itemCache, index) => ({
            [PRIVATE_KEY_FIELD]: items[index],
            data: itemCache
          }));
        }
      } catch (e) {
        this._itemsCache = extend([], items);
      }
    }
  },
  _dispose() {
    this._dataController.off("customizeStoreLoadOptions", this._customizeStoreLoadOptions);
    this.callBase();
  },
  _updateByChange(keyInfo, items, change, isPartialRefresh) {
    if (isPartialRefresh) {
      this._renderItem(change.index, change.data, null, this._findItemElementByKey(change.key));
    } else {
      var changedItem = items[indexByKey(keyInfo, items, change.key)];
      if (changedItem) {
        update(keyInfo, items, change.key, change.data).done(() => {
          this._renderItem(items.indexOf(changedItem), changedItem, null, this._findItemElementByKey(change.key));
        });
      }
    }
  },
  _insertByChange(keyInfo, items, change, isPartialRefresh) {
    when(isPartialRefresh || insert(keyInfo, items, change.data, change.index)).done(() => {
      var _a;
      this._beforeItemElementInserted(change);
      this._renderItem(null !== (_a = change.index) && void 0 !== _a ? _a : items.length, change.data);
      this._afterItemElementInserted();
      this._correctionIndex++;
    });
  },
  _updateSelectionAfterRemoveByChange(removeIndex) {
    var selectedIndex = this.option("selectedIndex");
    if (selectedIndex > removeIndex) {
      this.option("selectedIndex", selectedIndex - 1);
    } else if (selectedIndex === removeIndex && 1 === this.option("selectedItems").length) {
      this.option("selectedItems", []);
    } else {
      this._normalizeSelectedItems();
    }
  },
  _beforeItemElementInserted(change) {
    var selectedIndex = this.option("selectedIndex");
    if (change.index <= selectedIndex) {
      this.option("selectedIndex", selectedIndex + 1);
    }
  },
  _afterItemElementInserted: noop,
  _removeByChange(keyInfo, items, change, isPartialRefresh) {
    var index = isPartialRefresh ? change.index : indexByKey(keyInfo, items, change.key);
    var removedItem = isPartialRefresh ? change.oldItem : items[index];
    if (removedItem) {
      var $removedItemElement = this._findItemElementByKey(change.key);
      var deletedActionArgs = this._extendActionArgs($removedItemElement);
      this._waitDeletingPrepare($removedItemElement).done(() => {
        if (isPartialRefresh) {
          this._updateIndicesAfterIndex(index - 1);
          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);
          this._updateSelectionAfterRemoveByChange(index);
        } else {
          this._deleteItemElementByIndex(index);
          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);
        }
      });
      this._correctionIndex--;
    }
  },
  _modifyByChanges(changes, isPartialRefresh) {
    var items = this._editStrategy.itemsGetter();
    var keyInfo = {
      key: this.key.bind(this),
      keyOf: this.keyOf.bind(this)
    };
    var dataController2 = this._dataController;
    var paginate = dataController2.paginate();
    var group = dataController2.group();
    if (paginate || group) {
      changes = changes.filter((item) => "insert" !== item.type || void 0 !== item.index);
    }
    changes.forEach((change) => this["_".concat(change.type, "ByChange")](keyInfo, items, change, isPartialRefresh));
    this._renderedItemsCount = items.length;
    this._refreshItemsCache();
    this._fireContentReadyAction();
  },
  _appendItemToContainer($container, $itemFrame, index) {
    var nextSiblingElement = $container.children(this._itemSelector()).get(index);
    dom_adapter_default.insertElement($container.get(0), $itemFrame.get(0), nextSiblingElement);
  },
  _optionChanged(args) {
    switch (args.name) {
      case "items":
        var isItemsUpdated = this._partialRefresh(args.value);
        if (!isItemsUpdated) {
          this.callBase(args);
        }
        break;
      case "dataSource":
        if (!this.option("repaintChangesOnly") || !args.value) {
          this.option("items", []);
        }
        this.callBase(args);
        break;
      case "repaintChangesOnly":
        break;
      default:
        this.callBase(args);
    }
  }
});

// node_modules/devextreme/esm/ui/collection/ui.collection_widget.live_update.js
var ui_collection_widget_live_update_default = m_collection_widget_live_update_default;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scroll_view.native.pull_down.js
var SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = "dx-scrollview-pull-down-loading";
var SCROLLVIEW_PULLDOWN_READY_CLASS = "dx-scrollview-pull-down-ready";
var SCROLLVIEW_PULLDOWN_IMAGE_CLASS = "dx-scrollview-pull-down-image";
var SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = "dx-scrollview-pull-down-indicator";
var SCROLLVIEW_PULLDOWN_TEXT_CLASS = "dx-scrollview-pull-down-text";
var SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = "dx-scrollview-pull-down-text-visible";
var STATE_RELEASED = 0;
var STATE_READY = 1;
var STATE_REFRESHING = 2;
var STATE_LOADING = 3;
var PULLDOWN_RELEASE_TIME = 400;
var PullDownNativeScrollViewStrategy = m_scrollable_native_default.inherit({
  _init(scrollView) {
    this.callBase(scrollView);
    this._$topPocket = scrollView._$topPocket;
    this._$pullDown = scrollView._$pullDown;
    this._$refreshingText = scrollView._$refreshingText;
    this._$scrollViewContent = renderer_default(scrollView.content());
    this._$container = renderer_default(scrollView.container());
    this._initCallbacks();
  },
  _initCallbacks() {
    this.pullDownCallbacks = callbacks_default();
    this.releaseCallbacks = callbacks_default();
    this.reachBottomCallbacks = callbacks_default();
  },
  render() {
    this.callBase();
    this._renderPullDown();
    this._releaseState();
  },
  _renderPullDown() {
    var $image = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);
    var $loadContainer = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);
    var $loadIndicator = new load_indicator_default(renderer_default("<div>")).$element();
    var $text = this._$pullDownText = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);
    this._$pullingDownText = renderer_default("<div>").text(this.option("pullingDownText")).appendTo($text);
    this._$pulledDownText = renderer_default("<div>").text(this.option("pulledDownText")).appendTo($text);
    this._$refreshingText = renderer_default("<div>").text(this.option("refreshingText")).appendTo($text);
    this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text);
  },
  _releaseState() {
    this._state = STATE_RELEASED;
    this._refreshPullDownText();
  },
  _refreshPullDownText() {
    var that = this;
    var pullDownTextItems = [{
      element: this._$pullingDownText,
      visibleState: STATE_RELEASED
    }, {
      element: this._$pulledDownText,
      visibleState: STATE_READY
    }, {
      element: this._$refreshingText,
      visibleState: STATE_REFRESHING
    }];
    each(pullDownTextItems, (_, item) => {
      var action = that._state === item.visibleState ? "addClass" : "removeClass";
      item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS);
    });
  },
  update() {
    this.callBase();
    this._setTopPocketOffset();
  },
  _updateDimensions() {
    this.callBase();
    this._topPocketSize = this._$topPocket.get(0).clientHeight;
    var contentEl = this._$scrollViewContent.get(0);
    var containerEl = this._$container.get(0);
    this._bottomBoundary = Math.max(contentEl.clientHeight - containerEl.clientHeight, 0);
  },
  _allowedDirections() {
    var allowedDirections = this.callBase();
    allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;
    return allowedDirections;
  },
  _setTopPocketOffset() {
    this._$topPocket.css({
      top: -this._topPocketSize
    });
  },
  handleEnd() {
    this.callBase();
    this._complete();
  },
  handleStop() {
    this.callBase();
    this._complete();
  },
  _complete() {
    if (this._state === STATE_READY) {
      this._setPullDownOffset(this._topPocketSize);
      clearTimeout(this._pullDownRefreshTimeout);
      this._pullDownRefreshTimeout = setTimeout(() => {
        this._pullDownRefreshing();
      }, 400);
    }
  },
  _setPullDownOffset(offset) {
    move(this._$topPocket, {
      top: offset
    });
    move(this._$scrollViewContent, {
      top: offset
    });
  },
  handleScroll(e) {
    this.callBase(e);
    if (this._state === STATE_REFRESHING) {
      return;
    }
    var currentLocation = this.location().top;
    var scrollDelta = (this._location || 0) - currentLocation;
    this._location = currentLocation;
    if (this._isPullDown()) {
      this._pullDownReady();
    } else if (scrollDelta > 0 && this._isReachBottom()) {
      this._reachBottom();
    } else {
      this._stateReleased();
    }
  },
  _isPullDown() {
    return this._pullDownEnabled && this._location >= this._topPocketSize;
  },
  _isReachBottom() {
    return this._reachBottomEnabled && Math.round(this._bottomBoundary + Math.floor(this._location)) <= 1;
  },
  _reachBottom() {
    if (this._state === STATE_LOADING) {
      return;
    }
    this._state = STATE_LOADING;
    this.reachBottomCallbacks.fire();
  },
  _pullDownReady() {
    if (this._state === STATE_READY) {
      return;
    }
    this._state = STATE_READY;
    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);
    this._refreshPullDownText();
  },
  _stateReleased() {
    if (this._state === STATE_RELEASED) {
      return;
    }
    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);
    this._releaseState();
  },
  _pullDownRefreshing() {
    if (this._state === STATE_REFRESHING) {
      return;
    }
    this._state = STATE_REFRESHING;
    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);
    this._refreshPullDownText();
    this.pullDownCallbacks.fire();
  },
  pullDownEnable(enabled) {
    if (enabled) {
      this._updateDimensions();
      this._setTopPocketOffset();
    }
    this._pullDownEnabled = enabled;
  },
  reachBottomEnable(enabled) {
    this._reachBottomEnabled = enabled;
  },
  pendingRelease() {
    this._state = STATE_READY;
  },
  release() {
    var deferred = Deferred();
    this._updateDimensions();
    clearTimeout(this._releaseTimeout);
    if (this._state === STATE_LOADING) {
      this._state = STATE_RELEASED;
    }
    this._releaseTimeout = setTimeout(() => {
      this._setPullDownOffset(0);
      this._stateReleased();
      this.releaseCallbacks.fire();
      this._updateAction();
      deferred.resolve();
    }, PULLDOWN_RELEASE_TIME);
    return deferred.promise();
  },
  dispose() {
    clearTimeout(this._pullDownRefreshTimeout);
    clearTimeout(this._releaseTimeout);
    this.callBase();
  }
});
var m_scroll_view_native_pull_down_default = PullDownNativeScrollViewStrategy;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scroll_view.native.swipe_down.js
var SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS = "dx-scrollview-pull-down-loading";
var SCROLLVIEW_PULLDOWN_INDICATOR_CLASS2 = "dx-scrollview-pull-down-indicator";
var SCROLLVIEW_PULLDOWN_REFRESHING_CLASS2 = "dx-scrollview-pull-down-refreshing";
var PULLDOWN_ICON_CLASS = "dx-icon-pulldown";
var STATE_RELEASED2 = 0;
var STATE_READY2 = 1;
var STATE_REFRESHING2 = 2;
var STATE_TOUCHED = 4;
var STATE_PULLED = 5;
var SwipeDownNativeScrollViewStrategy = m_scrollable_native_default.inherit({
  _init(scrollView) {
    this.callBase(scrollView);
    this._$topPocket = scrollView._$topPocket;
    this._$pullDown = scrollView._$pullDown;
    this._$scrollViewContent = renderer_default(scrollView.content());
    this._$container = renderer_default(scrollView.container());
    this._initCallbacks();
    this._location = 0;
  },
  _initCallbacks() {
    this.pullDownCallbacks = callbacks_default();
    this.releaseCallbacks = callbacks_default();
    this.reachBottomCallbacks = callbacks_default();
  },
  render() {
    this.callBase();
    this._renderPullDown();
    this._releaseState();
  },
  _renderPullDown() {
    var $loadContainer = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS2);
    var $loadIndicator = new load_indicator_default(renderer_default("<div>")).$element();
    this._$icon = renderer_default("<div>").addClass(PULLDOWN_ICON_CLASS);
    this._$pullDown.empty().append(this._$icon).append($loadContainer.append($loadIndicator));
  },
  _releaseState() {
    this._state = STATE_RELEASED2;
    this._releasePullDown();
    this._updateDimensions();
  },
  _releasePullDown() {
    this._$pullDown.css({
      opacity: 0
    });
  },
  _updateDimensions() {
    this.callBase();
    this._topPocketSize = this._$topPocket.get(0).clientHeight;
    var contentEl = this._$scrollViewContent.get(0);
    var containerEl = this._$container.get(0);
    this._bottomBoundary = Math.max(contentEl.clientHeight - containerEl.clientHeight, 0);
  },
  _allowedDirections() {
    var allowedDirections = this.callBase();
    allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;
    return allowedDirections;
  },
  handleInit(e) {
    this.callBase(e);
    if (this._state === STATE_RELEASED2 && 0 === this._location) {
      this._startClientY = eventData(e.originalEvent).y;
      this._state = STATE_TOUCHED;
    }
  },
  handleMove(e) {
    this.callBase(e);
    this._deltaY = eventData(e.originalEvent).y - this._startClientY;
    if (this._state === STATE_TOUCHED) {
      if (this._pullDownEnabled && this._deltaY > 0) {
        this._state = STATE_PULLED;
      } else {
        this._complete();
      }
    }
    if (this._state === STATE_PULLED) {
      e.preventDefault();
      this._movePullDown();
    }
  },
  _movePullDown() {
    var pullDownHeight = this._getPullDownHeight();
    var top = Math.min(3 * pullDownHeight, this._deltaY + this._getPullDownStartPosition());
    var angle = 180 * top / pullDownHeight / 3;
    this._$pullDown.css({
      opacity: 1
    }).toggleClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS2, top < pullDownHeight);
    move(this._$pullDown, {
      top
    });
    this._$icon.css({
      transform: "rotate(".concat(angle, "deg)")
    });
  },
  _isPullDown() {
    return this._pullDownEnabled && this._state === STATE_PULLED && this._deltaY >= this._getPullDownHeight() - this._getPullDownStartPosition();
  },
  _getPullDownHeight() {
    return Math.round(0.05 * getOuterHeight(this._$element));
  },
  _getPullDownStartPosition() {
    return -Math.round(1.5 * getOuterHeight(this._$pullDown));
  },
  handleEnd() {
    if (this._isPullDown()) {
      this._pullDownRefreshing();
    }
    this._complete();
  },
  handleStop() {
    this._complete();
  },
  _complete() {
    if (this._state === STATE_TOUCHED || this._state === STATE_PULLED) {
      this._releaseState();
    }
  },
  handleScroll(e) {
    this.callBase(e);
    if (this._state === STATE_REFRESHING2) {
      return;
    }
    var currentLocation = this.location().top;
    var scrollDelta = this._location - currentLocation;
    this._location = currentLocation;
    if (scrollDelta > 0 && this._isReachBottom()) {
      this._reachBottom();
    } else {
      this._stateReleased();
    }
  },
  _isReachBottom() {
    return this._reachBottomEnabled && Math.round(this._bottomBoundary + Math.floor(this._location)) <= 1;
  },
  _reachBottom() {
    this.reachBottomCallbacks.fire();
  },
  _stateReleased() {
    if (this._state === STATE_RELEASED2) {
      return;
    }
    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);
    this._releaseState();
  },
  _pullDownRefreshing() {
    this._state = STATE_REFRESHING2;
    this._pullDownRefreshHandler();
  },
  _pullDownRefreshHandler() {
    this._refreshPullDown();
    this.pullDownCallbacks.fire();
  },
  _refreshPullDown() {
    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);
    move(this._$pullDown, {
      top: this._getPullDownHeight()
    });
  },
  pullDownEnable(enabled) {
    this._$topPocket.toggle(enabled);
    this._pullDownEnabled = enabled;
  },
  reachBottomEnable(enabled) {
    this._reachBottomEnabled = enabled;
  },
  pendingRelease() {
    this._state = STATE_READY2;
  },
  release() {
    var deferred = Deferred();
    this._updateDimensions();
    clearTimeout(this._releaseTimeout);
    this._releaseTimeout = setTimeout(() => {
      this._stateReleased();
      this.releaseCallbacks.fire();
      this._updateAction();
      deferred.resolve();
    }, 800);
    return deferred.promise();
  },
  dispose() {
    clearTimeout(this._pullDownRefreshTimeout);
    clearTimeout(this._releaseTimeout);
    this.callBase();
  }
});
var m_scroll_view_native_swipe_down_default = SwipeDownNativeScrollViewStrategy;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scroll_view.simulated.js
var math = Math;
var SCROLLVIEW_PULLDOWN_REFRESHING_CLASS3 = "dx-scrollview-pull-down-loading";
var SCROLLVIEW_PULLDOWN_READY_CLASS2 = "dx-scrollview-pull-down-ready";
var SCROLLVIEW_PULLDOWN_IMAGE_CLASS2 = "dx-scrollview-pull-down-image";
var SCROLLVIEW_PULLDOWN_INDICATOR_CLASS3 = "dx-scrollview-pull-down-indicator";
var SCROLLVIEW_PULLDOWN_TEXT_CLASS2 = "dx-scrollview-pull-down-text";
var SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS2 = "dx-scrollview-pull-down-text-visible";
var STATE_RELEASED3 = 0;
var STATE_READY3 = 1;
var STATE_REFRESHING3 = 2;
var STATE_LOADING2 = 3;
var ScrollViewScroller = Scroller.inherit({
  ctor() {
    this._topPocketSize = 0;
    this._bottomPocketSize = 0;
    this.callBase.apply(this, arguments);
    this._initCallbacks();
    this._releaseState();
  },
  _releaseState() {
    this._state = STATE_RELEASED3;
    this._refreshPullDownText();
  },
  _refreshPullDownText() {
    var that = this;
    var pullDownTextItems = [{
      element: this._$pullingDownText,
      visibleState: STATE_RELEASED3
    }, {
      element: this._$pulledDownText,
      visibleState: STATE_READY3
    }, {
      element: this._$refreshingText,
      visibleState: STATE_REFRESHING3
    }];
    each(pullDownTextItems, (_, item) => {
      var action = that._state === item.visibleState ? "addClass" : "removeClass";
      item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS2);
    });
  },
  _initCallbacks() {
    this.pullDownCallbacks = callbacks_default();
    this.releaseCallbacks = callbacks_default();
    this.reachBottomCallbacks = callbacks_default();
  },
  _updateBounds() {
    var considerPockets = "horizontal" !== this._direction;
    if (considerPockets) {
      this._topPocketSize = this._$topPocket.get(0).clientHeight;
      this._bottomPocketSize = this._$bottomPocket.get(0).clientHeight;
      var containerEl = this._$container.get(0);
      var contentEl = this._$content.get(0);
      this._bottomBoundary = Math.max(contentEl.clientHeight - this._bottomPocketSize - containerEl.clientHeight, 0);
    }
    this.callBase();
  },
  _updateScrollbar() {
    this._scrollbar.option({
      containerSize: this._containerSize(),
      contentSize: this._contentSize() - this._topPocketSize - this._bottomPocketSize,
      scaleRatio: this._getScaleRatio()
    });
  },
  _moveContent() {
    this.callBase();
    if (this._isPullDown()) {
      this._pullDownReady();
    } else if (this._isReachBottom()) {
      this._reachBottomReady();
    } else if (this._state !== STATE_RELEASED3) {
      this._stateReleased();
    }
  },
  _moveScrollbar() {
    this._scrollbar.moveTo(this._topPocketSize + this._location);
  },
  _isPullDown() {
    return this._pullDownEnabled && this._location >= 0;
  },
  _isReachBottom() {
    var containerEl = this._$container.get(0);
    return this._reachBottomEnabled && Math.round(this._bottomBoundary - Math.ceil(containerEl.scrollTop)) <= 1;
  },
  _scrollComplete() {
    if (this._inBounds() && this._state === STATE_READY3) {
      this._pullDownRefreshing();
    } else if (this._inBounds() && this._state === STATE_LOADING2) {
      this._reachBottomLoading();
    } else {
      this.callBase();
    }
  },
  _reachBottomReady() {
    if (this._state === STATE_LOADING2) {
      return;
    }
    this._state = STATE_LOADING2;
    this._minOffset = this._getMinOffset();
  },
  _getMaxOffset() {
    return -this._topPocketSize;
  },
  _getMinOffset() {
    return math.min(this.callBase(), -this._topPocketSize);
  },
  _reachBottomLoading() {
    this.reachBottomCallbacks.fire();
  },
  _pullDownReady() {
    if (this._state === STATE_READY3) {
      return;
    }
    this._state = STATE_READY3;
    this._maxOffset = 0;
    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS2);
    this._refreshPullDownText();
  },
  _stateReleased() {
    if (this._state === STATE_RELEASED3) {
      return;
    }
    this._releaseState();
    this._updateBounds();
    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS3).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS2);
    this.releaseCallbacks.fire();
  },
  _pullDownRefreshing() {
    if (this._state === STATE_REFRESHING3) {
      return;
    }
    this._state = STATE_REFRESHING3;
    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS3).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS2);
    this._refreshPullDownText();
    this.pullDownCallbacks.fire();
  },
  _releaseHandler() {
    if (this._state === STATE_RELEASED3) {
      this._moveToBounds();
    }
    this._update();
    if (this._releaseTask) {
      this._releaseTask.abort();
    }
    this._releaseTask = executeAsync(this._release.bind(this));
    return this._releaseTask.promise;
  },
  _release() {
    this._stateReleased();
    this._scrollComplete();
  },
  _reachBottomEnablingHandler(enabled) {
    if (this._reachBottomEnabled === enabled) {
      return;
    }
    this._reachBottomEnabled = enabled;
    this._updateBounds();
  },
  _pullDownEnablingHandler(enabled) {
    if (this._pullDownEnabled === enabled) {
      return;
    }
    this._pullDownEnabled = enabled;
    this._considerTopPocketChange();
    this._updateHandler();
  },
  _considerTopPocketChange() {
    this._location -= getHeight(this._$topPocket) || -this._topPocketSize;
    this._maxOffset = 0;
    this._move();
  },
  _pendingReleaseHandler() {
    this._state = STATE_READY3;
  },
  dispose() {
    if (this._releaseTask) {
      this._releaseTask.abort();
    }
    this.callBase();
  }
});
var SimulatedScrollViewStrategy = SimulatedStrategy.inherit({
  _init(scrollView) {
    this.callBase(scrollView);
    this._$pullDown = scrollView._$pullDown;
    this._$topPocket = scrollView._$topPocket;
    this._$bottomPocket = scrollView._$bottomPocket;
    this._initCallbacks();
  },
  _initCallbacks() {
    this.pullDownCallbacks = callbacks_default();
    this.releaseCallbacks = callbacks_default();
    this.reachBottomCallbacks = callbacks_default();
  },
  render() {
    this._renderPullDown();
    this.callBase();
  },
  _renderPullDown() {
    var $image = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS2);
    var $loadContainer = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS3);
    var $loadIndicator = new load_indicator_default(renderer_default("<div>")).$element();
    var $text = this._$pullDownText = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS2);
    this._$pullingDownText = renderer_default("<div>").text(this.option("pullingDownText")).appendTo($text);
    this._$pulledDownText = renderer_default("<div>").text(this.option("pulledDownText")).appendTo($text);
    this._$refreshingText = renderer_default("<div>").text(this.option("refreshingText")).appendTo($text);
    this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text);
  },
  pullDownEnable(enabled) {
    this._eventHandler("pullDownEnabling", enabled);
  },
  reachBottomEnable(enabled) {
    this._eventHandler("reachBottomEnabling", enabled);
  },
  _createScroller(direction) {
    var that = this;
    var scroller = that._scrollers[direction] = new ScrollViewScroller(that._scrollerOptions(direction));
    scroller.pullDownCallbacks.add(() => {
      that.pullDownCallbacks.fire();
    });
    scroller.releaseCallbacks.add(() => {
      that.releaseCallbacks.fire();
    });
    scroller.reachBottomCallbacks.add(() => {
      that.reachBottomCallbacks.fire();
    });
  },
  _scrollerOptions(direction) {
    return extend(this.callBase(direction), {
      $topPocket: this._$topPocket,
      $bottomPocket: this._$bottomPocket,
      $pullDown: this._$pullDown,
      $pullDownText: this._$pullDownText,
      $pullingDownText: this._$pullingDownText,
      $pulledDownText: this._$pulledDownText,
      $refreshingText: this._$refreshingText
    });
  },
  pendingRelease() {
    this._eventHandler("pendingRelease");
  },
  release() {
    return this._eventHandler("release").done(this._updateAction);
  },
  location() {
    var location = this.callBase();
    location.top += getHeight(this._$topPocket);
    return location;
  },
  dispose() {
    each(this._scrollers, function() {
      this.dispose();
    });
    this.callBase();
  }
});
var m_scroll_view_simulated_default = SimulatedScrollViewStrategy;

// node_modules/devextreme/esm/__internal/ui/scroll_view/m_scroll_view.js
var SCROLLVIEW_CLASS = "dx-scrollview";
var SCROLLVIEW_CONTENT_CLASS = "".concat(SCROLLVIEW_CLASS, "-content");
var SCROLLVIEW_TOP_POCKET_CLASS = "".concat(SCROLLVIEW_CLASS, "-top-pocket");
var SCROLLVIEW_BOTTOM_POCKET_CLASS = "".concat(SCROLLVIEW_CLASS, "-bottom-pocket");
var SCROLLVIEW_PULLDOWN_CLASS = "".concat(SCROLLVIEW_CLASS, "-pull-down");
var SCROLLVIEW_REACHBOTTOM_CLASS = "".concat(SCROLLVIEW_CLASS, "-scrollbottom");
var SCROLLVIEW_REACHBOTTOM_INDICATOR_CLASS = "".concat(SCROLLVIEW_REACHBOTTOM_CLASS, "-indicator");
var SCROLLVIEW_REACHBOTTOM_TEXT_CLASS = "".concat(SCROLLVIEW_REACHBOTTOM_CLASS, "-text");
var SCROLLVIEW_LOADPANEL = "".concat(SCROLLVIEW_CLASS, "-loadpanel");
var refreshStrategies = {
  pullDown: m_scroll_view_native_pull_down_default,
  swipeDown: m_scroll_view_native_swipe_down_default,
  simulated: m_scroll_view_simulated_default
};
var isServerSide = !hasWindow();
var scrollViewServerConfig = {
  finishLoading: noop,
  release: noop,
  refresh: noop,
  scrollOffset: () => ({
    top: 0,
    left: 0
  }),
  _optionChanged(args) {
    if ("onUpdated" !== args.name) {
      return this.callBase.apply(this, arguments);
    }
  }
};
var ScrollView = m_scrollable_default.inherit(isServerSide ? scrollViewServerConfig : {
  _getDefaultOptions() {
    return extend(this.callBase(), {
      pullingDownText: message_default.format("dxScrollView-pullingDownText"),
      pulledDownText: message_default.format("dxScrollView-pulledDownText"),
      refreshingText: message_default.format("dxScrollView-refreshingText"),
      reachBottomText: message_default.format("dxScrollView-reachBottomText"),
      onPullDown: null,
      onReachBottom: null,
      refreshStrategy: "pullDown"
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device() {
        var realDevice2 = devices_default.real();
        return "android" === realDevice2.platform;
      },
      options: {
        refreshStrategy: "swipeDown"
      }
    }, {
      device: () => isMaterialBased(),
      options: {
        pullingDownText: "",
        pulledDownText: "",
        refreshingText: "",
        reachBottomText: ""
      }
    }]);
  },
  _init() {
    this.callBase();
    this._loadingIndicatorEnabled = true;
  },
  _initScrollableMarkup() {
    this.callBase();
    this.$element().addClass(SCROLLVIEW_CLASS);
    this._initContent();
    this._initTopPocket();
    this._initBottomPocket();
    this._initLoadPanel();
  },
  _initContent() {
    var $content = renderer_default("<div>").addClass(SCROLLVIEW_CONTENT_CLASS);
    this._$content.wrapInner($content);
  },
  _initTopPocket() {
    var $topPocket = this._$topPocket = renderer_default("<div>").addClass(SCROLLVIEW_TOP_POCKET_CLASS);
    var $pullDown = this._$pullDown = renderer_default("<div>").addClass(SCROLLVIEW_PULLDOWN_CLASS);
    $topPocket.append($pullDown);
    this._$content.prepend($topPocket);
  },
  _initBottomPocket() {
    var $bottomPocket = this._$bottomPocket = renderer_default("<div>").addClass(SCROLLVIEW_BOTTOM_POCKET_CLASS);
    var $reachBottom = this._$reachBottom = renderer_default("<div>").addClass(SCROLLVIEW_REACHBOTTOM_CLASS);
    var $loadContainer = renderer_default("<div>").addClass(SCROLLVIEW_REACHBOTTOM_INDICATOR_CLASS);
    var $loadIndicator = new load_indicator_default(renderer_default("<div>")).$element();
    var $text = this._$reachBottomText = renderer_default("<div>").addClass(SCROLLVIEW_REACHBOTTOM_TEXT_CLASS);
    this._updateReachBottomText();
    $reachBottom.append($loadContainer.append($loadIndicator)).append($text);
    $bottomPocket.append($reachBottom);
    this._$content.append($bottomPocket);
  },
  _initLoadPanel() {
    var $loadPanelElement = renderer_default("<div>").addClass(SCROLLVIEW_LOADPANEL).appendTo(this.$element());
    var loadPanelOptions = {
      shading: false,
      delay: 400,
      message: this.option("refreshingText"),
      position: {
        of: this.$element()
      }
    };
    this._loadPanel = this._createComponent($loadPanelElement, load_panel_default, loadPanelOptions);
  },
  _updateReachBottomText() {
    this._$reachBottomText.text(this.option("reachBottomText"));
  },
  _createStrategy() {
    var strategyName = this.option("useNative") ? this.option("refreshStrategy") : "simulated";
    var strategyClass = refreshStrategies[strategyName];
    this._strategy = new strategyClass(this);
    this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this));
    this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this));
    this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this));
  },
  _createActions() {
    this.callBase();
    this._pullDownAction = this._createActionByOption("onPullDown");
    this._reachBottomAction = this._createActionByOption("onReachBottom");
    this._tryRefreshPocketState();
  },
  _tryRefreshPocketState() {
    this._pullDownEnable(this.hasActionSubscription("onPullDown"));
    this._reachBottomEnable(this.hasActionSubscription("onReachBottom"));
  },
  on(eventName) {
    var result2 = this.callBase.apply(this, arguments);
    if ("pullDown" === eventName || "reachBottom" === eventName) {
      this._tryRefreshPocketState();
    }
    return result2;
  },
  _pullDownEnable(enabled) {
    if (0 === arguments.length) {
      return this._pullDownEnabled;
    }
    if (this._$pullDown && this._strategy) {
      this._$pullDown.toggle(enabled);
      this._strategy.pullDownEnable(enabled);
      this._pullDownEnabled = enabled;
    }
  },
  _reachBottomEnable(enabled) {
    if (0 === arguments.length) {
      return this._reachBottomEnabled;
    }
    if (this._$reachBottom && this._strategy) {
      this._$reachBottom.toggle(enabled);
      this._strategy.reachBottomEnable(enabled);
      this._reachBottomEnabled = enabled;
    }
  },
  _pullDownHandler() {
    this._loadingIndicator(false);
    this._pullDownLoading();
  },
  _loadingIndicator(value2) {
    if (arguments.length < 1) {
      return this._loadingIndicatorEnabled;
    }
    this._loadingIndicatorEnabled = value2;
  },
  _pullDownLoading() {
    this.startLoading();
    this._pullDownAction();
  },
  _reachBottomHandler() {
    this._loadingIndicator(false);
    this._reachBottomLoading();
  },
  _reachBottomLoading() {
    this.startLoading();
    this._reachBottomAction();
  },
  _releaseHandler() {
    this.finishLoading();
    this._loadingIndicator(true);
  },
  _optionChanged(args) {
    switch (args.name) {
      case "onPullDown":
      case "onReachBottom":
        this._createActions();
        break;
      case "pullingDownText":
      case "pulledDownText":
      case "refreshingText":
      case "refreshStrategy":
        this._invalidate();
        break;
      case "reachBottomText":
        this._updateReachBottomText();
        break;
      default:
        this.callBase(args);
    }
  },
  content() {
    return getPublicElement(this._$content.children().eq(1));
  },
  release(preventReachBottom) {
    if (void 0 !== preventReachBottom) {
      this.toggleLoading(!preventReachBottom);
    }
    return this._strategy.release();
  },
  toggleLoading(showOrHide) {
    this._reachBottomEnable(showOrHide);
  },
  refresh() {
    if (!this.hasActionSubscription("onPullDown")) {
      return;
    }
    this._strategy.pendingRelease();
    this._pullDownLoading();
  },
  startLoading() {
    if (this._loadingIndicator() && this.$element().is(":visible")) {
      this._loadPanel.show();
    }
    this._lock();
  },
  finishLoading() {
    this._loadPanel.hide();
    this._unlock();
  },
  _dispose() {
    this._strategy.dispose();
    this.callBase();
    if (this._loadPanel) {
      this._loadPanel.$element().remove();
    }
  }
});
component_registrator_default("dxScrollView", ScrollView);
var m_scroll_view_default = ScrollView;

// node_modules/devextreme/esm/ui/scroll_view.js
var scroll_view_default = m_scroll_view_default;

// node_modules/devextreme/esm/__internal/ui/shared/m_grouped_data_converter_mixin.js
var isCorrectStructure = (data17) => Array.isArray(data17) && data17.every((item) => {
  var hasTwoFields = 2 === Object.keys(item).length;
  var hasCorrectFields = "key" in item && "items" in item;
  return hasTwoFields && hasCorrectFields && Array.isArray(item.items);
});
var m_grouped_data_converter_mixin_default = {
  _getSpecificDataSourceOption() {
    var dataSource = this.option("dataSource");
    var hasSimpleItems = false;
    var data17 = {};
    if (this._getGroupedOption() && isCorrectStructure(dataSource)) {
      data17 = dataSource.reduce((accumulator, item) => {
        var items = item.items.map((innerItem) => {
          if (!isObject(innerItem)) {
            innerItem = {
              text: innerItem
            };
            hasSimpleItems = true;
          }
          if (!("key" in innerItem)) {
            innerItem.key = item.key;
          }
          return innerItem;
        });
        return accumulator.concat(items);
      }, []);
      dataSource = {
        store: {
          type: "array",
          data: data17
        },
        group: {
          selector: "key",
          keepInitialKeyOrder: true
        }
      };
      if (hasSimpleItems) {
        dataSource.searchExpr = "text";
      }
    }
    return dataSource;
  }
};

// node_modules/devextreme/esm/__internal/ui/list/m_item.js
var LIST_ITEM_BADGE_CONTAINER_CLASS = "dx-list-item-badge-container";
var LIST_ITEM_BADGE_CLASS = "dx-list-item-badge";
var BADGE_CLASS = "dx-badge";
var LIST_ITEM_CHEVRON_CONTAINER_CLASS = "dx-list-item-chevron-container";
var LIST_ITEM_CHEVRON_CLASS = "dx-list-item-chevron";
var ListItem = m_item_default.inherit({
  _renderWatchers() {
    this.callBase();
    this._startWatcher("badge", this._renderBadge.bind(this));
    this._startWatcher("showChevron", this._renderShowChevron.bind(this));
  },
  _renderBadge(badge) {
    this._$element.children(".".concat(LIST_ITEM_BADGE_CONTAINER_CLASS)).remove();
    if (!badge) {
      return;
    }
    var $badge = renderer_default("<div>").addClass(LIST_ITEM_BADGE_CONTAINER_CLASS).append(renderer_default("<div>").addClass(LIST_ITEM_BADGE_CLASS).addClass(BADGE_CLASS).text(badge));
    var $chevron = this._$element.children(".".concat(LIST_ITEM_CHEVRON_CONTAINER_CLASS)).first();
    $chevron.length > 0 ? $badge.insertBefore($chevron) : $badge.appendTo(this._$element);
  },
  _renderShowChevron(showChevron) {
    this._$element.children(".".concat(LIST_ITEM_CHEVRON_CONTAINER_CLASS)).remove();
    if (!showChevron) {
      return;
    }
    var $chevronContainer = renderer_default("<div>").addClass(LIST_ITEM_CHEVRON_CONTAINER_CLASS);
    var $chevron = renderer_default("<div>").addClass(LIST_ITEM_CHEVRON_CLASS);
    $chevronContainer.append($chevron).appendTo(this._$element);
  }
});
var m_item_default2 = ListItem;

// node_modules/devextreme/esm/__internal/ui/list/m_list.base.js
var LIST_CLASS = "dx-list";
var LIST_ITEMS_CLASS = "dx-list-items";
var LIST_ITEM_CLASS = "dx-list-item";
var LIST_ITEM_SELECTOR = ".".concat(LIST_ITEM_CLASS);
var LIST_ITEM_ICON_CONTAINER_CLASS = "dx-list-item-icon-container";
var LIST_ITEM_ICON_CLASS = "dx-list-item-icon";
var LIST_GROUP_CLASS = "dx-list-group";
var LIST_GROUP_HEADER_CLASS = "dx-list-group-header";
var LIST_GROUP_BODY_CLASS = "dx-list-group-body";
var LIST_COLLAPSIBLE_GROUPS_CLASS = "dx-list-collapsible-groups";
var LIST_GROUP_COLLAPSED_CLASS = "dx-list-group-collapsed";
var LIST_GROUP_HEADER_INDICATOR_CLASS = "dx-list-group-header-indicator";
var LIST_HAS_NEXT_CLASS = "dx-has-next";
var LIST_NEXT_BUTTON_CLASS = "dx-list-next-button";
var WRAP_ITEM_TEXT_CLASS = "dx-wrap-item-text";
var SELECT_ALL_ITEM_SELECTOR = ".dx-list-select-all";
var LIST_ITEM_DATA_KEY = "dxListItemData";
var LIST_FEEDBACK_SHOW_TIMEOUT = 70;
var groupItemsGetter = compileGetter("items");
var _scrollView;
var ListBase = ui_collection_widget_live_update_default.inherit({
  _activeStateUnit: [LIST_ITEM_SELECTOR, SELECT_ALL_ITEM_SELECTOR].join(","),
  _supportedKeys() {
    var that = this;
    var moveFocusPerPage = function(direction) {
      var $item = getEdgeVisibleItem(direction);
      var isFocusedItem = $item.is(that.option("focusedElement"));
      if (isFocusedItem) {
        !function($item2, direction2) {
          var resultPosition = $item2.position().top;
          if ("prev" === direction2) {
            resultPosition = $item2.position().top - getHeight(that.$element()) + getOuterHeight($item2);
          }
          that.scrollTo(resultPosition);
        }($item, direction);
        $item = getEdgeVisibleItem(direction);
      }
      that.option("focusedElement", getPublicElement($item));
      that.scrollToItem($item);
    };
    function getEdgeVisibleItem(direction) {
      var scrollTop = that.scrollTop();
      var containerHeight = getHeight(that.$element());
      var $item = renderer_default(that.option("focusedElement"));
      var isItemVisible = true;
      if (!$item.length) {
        return renderer_default();
      }
      while (isItemVisible) {
        var $nextItem = $item[direction]();
        if (!$nextItem.length) {
          break;
        }
        var nextItemLocation = $nextItem.position().top + getOuterHeight($nextItem) / 2;
        isItemVisible = nextItemLocation < containerHeight + scrollTop && nextItemLocation > scrollTop;
        if (isItemVisible) {
          $item = $nextItem;
        }
      }
      return $item;
    }
    return extend(this.callBase(), {
      leftArrow: noop,
      rightArrow: noop,
      pageUp() {
        moveFocusPerPage("prev");
        return false;
      },
      pageDown() {
        moveFocusPerPage("next");
        return false;
      }
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      hoverStateEnabled: true,
      pullRefreshEnabled: false,
      scrollingEnabled: true,
      selectByClick: true,
      showScrollbar: "onScroll",
      useNativeScrolling: true,
      bounceEnabled: true,
      scrollByContent: true,
      scrollByThumb: false,
      pullingDownText: message_default.format("dxList-pullingDownText"),
      pulledDownText: message_default.format("dxList-pulledDownText"),
      refreshingText: message_default.format("dxList-refreshingText"),
      pageLoadingText: message_default.format("dxList-pageLoadingText"),
      onScroll: null,
      onPullRefresh: null,
      onPageLoading: null,
      pageLoadMode: "scrollBottom",
      nextButtonText: message_default.format("dxList-nextButtonText"),
      onItemSwipe: null,
      grouped: false,
      onGroupRendered: null,
      collapsibleGroups: false,
      groupTemplate: "group",
      indicateLoading: true,
      activeStateEnabled: true,
      _itemAttributes: {
        role: "option"
      },
      useInkRipple: false,
      wrapItemText: false,
      _swipeEnabled: true,
      showChevronExpr: (data17) => data17 ? data17.showChevron : void 0,
      badgeExpr: (data17) => data17 ? data17.badge : void 0
    });
  },
  _defaultOptionsRules() {
    var themeName = current();
    return this.callBase().concat(deviceDependentOptions(), [{
      device: () => !nativeScrolling,
      options: {
        useNativeScrolling: false
      }
    }, {
      device: (device) => !nativeScrolling && !devices_default.isSimulator() && "desktop" === devices_default.real().deviceType && "generic" === device.platform,
      options: {
        showScrollbar: "onHover",
        pageLoadMode: "nextButton"
      }
    }, {
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }, {
      device: () => isMaterial(themeName),
      options: {
        useInkRipple: true
      }
    }, {
      device: () => isMaterialBased(themeName),
      options: {
        pullingDownText: "",
        pulledDownText: "",
        refreshingText: "",
        pageLoadingText: ""
      }
    }]);
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._updateLoadingState(true);
    }
  },
  _itemClass: () => LIST_ITEM_CLASS,
  _itemDataKey: () => LIST_ITEM_DATA_KEY,
  _itemContainer() {
    return this._$container;
  },
  _getItemsContainer() {
    return this._$listContainer;
  },
  _cleanItemContainer() {
    this.callBase();
    var listContainer = this._getItemsContainer();
    renderer_default(listContainer).empty();
    listContainer.appendTo(this._$container);
  },
  _saveSelectionChangeEvent(e) {
    this._selectionChangeEventInstance = e;
  },
  _getSelectionChangeEvent() {
    return this._selectionChangeEventInstance;
  },
  _refreshItemElements() {
    if (!this.option("grouped")) {
      this._itemElementsCache = this._getItemsContainer().children(this._itemSelector());
    } else {
      this._itemElementsCache = this._getItemsContainer().children(".".concat(LIST_GROUP_CLASS)).children(".".concat(LIST_GROUP_BODY_CLASS)).children(this._itemSelector());
    }
  },
  _modifyByChanges() {
    this.callBase.apply(this, arguments);
    this._refreshItemElements();
    this._updateLoadingState(true);
  },
  reorderItem(itemElement, toItemElement) {
    var promise = this.callBase(itemElement, toItemElement);
    return promise.done(function() {
      this._refreshItemElements();
    });
  },
  deleteItem(itemElement) {
    var promise = this.callBase(itemElement);
    return promise.done(function() {
      this._refreshItemElements();
    });
  },
  _itemElements() {
    return this._itemElementsCache;
  },
  _itemSelectHandler(e) {
    if ("single" === this.option("selectionMode") && this.isItemSelected(e.currentTarget)) {
      return;
    }
    return this.callBase(e);
  },
  _allowDynamicItemsAppend: () => true,
  _init() {
    this.callBase();
    this._dataController.resetDataSourcePageIndex();
    this._$container = this.$element();
    this._$listContainer = renderer_default("<div>").addClass(LIST_ITEMS_CLASS);
    this._initScrollView();
    this._feedbackShowTimeout = LIST_FEEDBACK_SHOW_TIMEOUT;
    this._createGroupRenderAction();
  },
  _scrollBottomMode() {
    return "scrollBottom" === this.option("pageLoadMode");
  },
  _nextButtonMode() {
    return "nextButton" === this.option("pageLoadMode");
  },
  _dataSourceOptions() {
    var scrollBottom = this._scrollBottomMode();
    var nextButton = this._nextButtonMode();
    return extend(this.callBase(), {
      paginate: ensureDefined(scrollBottom || nextButton, true)
    });
  },
  _getGroupedOption() {
    return this.option("grouped");
  },
  _getGroupContainerByIndex(groupIndex) {
    return this._getItemsContainer().find(".".concat(LIST_GROUP_CLASS)).eq(groupIndex).find(".".concat(LIST_GROUP_BODY_CLASS));
  },
  _dataSourceFromUrlLoadMode: () => "raw",
  _initScrollView() {
    var scrollingEnabled = this.option("scrollingEnabled");
    var pullRefreshEnabled = scrollingEnabled && this.option("pullRefreshEnabled");
    var autoPagingEnabled = scrollingEnabled && this._scrollBottomMode() && !!this._dataController.getDataSource();
    this._scrollView = this._createComponent(this.$element(), getScrollView(), {
      height: this.option("height"),
      width: this.option("width"),
      disabled: this.option("disabled") || !scrollingEnabled,
      onScroll: this._scrollHandler.bind(this),
      onPullDown: pullRefreshEnabled ? this._pullDownHandler.bind(this) : null,
      onReachBottom: autoPagingEnabled ? this._scrollBottomHandler.bind(this) : null,
      showScrollbar: this.option("showScrollbar"),
      useNative: this.option("useNativeScrolling"),
      bounceEnabled: this.option("bounceEnabled"),
      scrollByContent: this.option("scrollByContent"),
      scrollByThumb: this.option("scrollByThumb"),
      pullingDownText: this.option("pullingDownText"),
      pulledDownText: this.option("pulledDownText"),
      refreshingText: this.option("refreshingText"),
      reachBottomText: this.option("pageLoadingText"),
      useKeyboard: false
    });
    this._$container = renderer_default(this._scrollView.content());
    this._$listContainer.appendTo(this._$container);
    this._toggleWrapItemText(this.option("wrapItemText"));
    this._createScrollViewActions();
  },
  _toggleWrapItemText(value2) {
    this._$listContainer.toggleClass(WRAP_ITEM_TEXT_CLASS, value2);
  },
  _createScrollViewActions() {
    this._scrollAction = this._createActionByOption("onScroll");
    this._pullRefreshAction = this._createActionByOption("onPullRefresh");
    this._pageLoadingAction = this._createActionByOption("onPageLoading");
  },
  _scrollHandler(e) {
    this._scrollAction && this._scrollAction(e);
  },
  _initTemplates() {
    this._templateManager.addDefaultTemplates({
      group: new BindableTemplate(($container, data17) => {
        if (isPlainObject(data17)) {
          if (data17.key) {
            $container.text(data17.key);
          }
        } else {
          $container.text(String(data17));
        }
      }, ["key"], this.option("integrationOptions.watchMethod"))
    });
    this.callBase();
  },
  _prepareDefaultItemTemplate(data17, $container) {
    this.callBase(data17, $container);
    if (data17.icon) {
      var $icon = getImageContainer(data17.icon).addClass(LIST_ITEM_ICON_CLASS);
      var $iconContainer = renderer_default("<div>").addClass(LIST_ITEM_ICON_CONTAINER_CLASS);
      $iconContainer.append($icon);
      $container.prepend($iconContainer);
    }
  },
  _getBindableFields: () => ["text", "html", "icon"],
  _updateLoadingState(tryLoadMore) {
    var dataController2 = this._dataController;
    var shouldLoadNextPage = this._scrollBottomMode() && tryLoadMore && !dataController2.isLoading() && !this._isLastPage();
    if (this._shouldContinueLoading(shouldLoadNextPage)) {
      this._infiniteDataLoading();
    } else {
      this._scrollView.release(!shouldLoadNextPage && !dataController2.isLoading());
      this._toggleNextButton(this._shouldRenderNextButton() && !this._isLastPage());
      this._loadIndicationSuppressed(false);
    }
  },
  _shouldRenderNextButton() {
    return this._nextButtonMode() && this._dataController.isLoaded();
  },
  _isDataSourceFirstLoadCompleted(newValue) {
    if (isDefined(newValue)) {
      this._isFirstLoadCompleted = newValue;
    }
    return this._isFirstLoadCompleted;
  },
  _dataSourceLoadingChangedHandler(isLoading) {
    if (this._loadIndicationSuppressed()) {
      return;
    }
    if (isLoading && this.option("indicateLoading")) {
      this._showLoadingIndicatorTimer = setTimeout(() => {
        var _a;
        var isEmpty3 = !this._itemElements().length;
        var shouldIndicateLoading = !isEmpty3 || this._isDataSourceFirstLoadCompleted();
        if (shouldIndicateLoading) {
          null === (_a = this._scrollView) || void 0 === _a ? void 0 : _a.startLoading();
        }
      });
    } else {
      clearTimeout(this._showLoadingIndicatorTimer);
      this._scrollView && this._scrollView.finishLoading();
    }
    if (!isLoading) {
      this._isDataSourceFirstLoadCompleted(false);
    }
  },
  _dataSourceChangedHandler() {
    if (!this._shouldAppendItems() && hasWindow()) {
      this._scrollView && this._scrollView.scrollTo(0);
    }
    this.callBase.apply(this, arguments);
    this._isDataSourceFirstLoadCompleted(true);
  },
  _refreshContent() {
    this._prepareContent();
    this._fireContentReadyAction();
  },
  _hideLoadingIfLoadIndicationOff() {
    if (!this.option("indicateLoading")) {
      this._dataSourceLoadingChangedHandler(false);
    }
  },
  _loadIndicationSuppressed(value2) {
    if (!arguments.length) {
      return this._isLoadIndicationSuppressed;
    }
    this._isLoadIndicationSuppressed = value2;
  },
  _scrollViewIsFull() {
    var scrollView = this._scrollView;
    return !scrollView || getHeight(scrollView.content()) > getHeight(scrollView.container());
  },
  _pullDownHandler(e) {
    this._pullRefreshAction(e);
    var dataController2 = this._dataController;
    if (dataController2.getDataSource() && !dataController2.isLoading()) {
      this._clearSelectedItems();
      dataController2.pageIndex(0);
      dataController2.reload();
    } else {
      this._updateLoadingState();
    }
  },
  _shouldContinueLoading(shouldLoadNextPage) {
    var _a, _b;
    var isBottomReached = getHeight(this._scrollView.content()) - getHeight(this._scrollView.container()) < (null !== (_b = null === (_a = this._scrollView.scrollOffset()) || void 0 === _a ? void 0 : _a.top) && void 0 !== _b ? _b : 0);
    return shouldLoadNextPage && (!this._scrollViewIsFull() || isBottomReached);
  },
  _infiniteDataLoading() {
    var isElementVisible2 = this.$element().is(":visible");
    if (isElementVisible2) {
      clearTimeout(this._loadNextPageTimer);
      this._loadNextPageTimer = setTimeout(() => {
        this._loadNextPage();
      });
    }
  },
  _scrollBottomHandler(e) {
    this._pageLoadingAction(e);
    var dataController2 = this._dataController;
    if (!dataController2.isLoading() && !this._isLastPage()) {
      this._loadNextPage();
    } else {
      this._updateLoadingState();
    }
  },
  _renderItems(items) {
    if (this.option("grouped")) {
      each(items, this._renderGroup.bind(this));
      this._attachGroupCollapseEvent();
      this._renderEmptyMessage();
      if (isMaterial()) {
        this.attachGroupHeaderInkRippleEvents();
      }
    } else {
      this.callBase.apply(this, arguments);
    }
    this._refreshItemElements();
    this._updateLoadingState(true);
  },
  _attachGroupCollapseEvent() {
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var selector = ".".concat(LIST_GROUP_HEADER_CLASS);
    var $element = this.$element();
    var collapsibleGroups = this.option("collapsibleGroups");
    $element.toggleClass(LIST_COLLAPSIBLE_GROUPS_CLASS, collapsibleGroups);
    events_engine_default.off($element, eventName, selector);
    if (collapsibleGroups) {
      events_engine_default.on($element, eventName, selector, (e) => {
        this._createAction((e2) => {
          var $group = renderer_default(e2.event.currentTarget).parent();
          this._collapseGroupHandler($group);
          if (this.option("focusStateEnabled")) {
            this.option("focusedElement", getPublicElement($group.find(".".concat(LIST_ITEM_CLASS)).eq(0)));
          }
        }, {
          validatingTargetName: "element"
        })({
          event: e
        });
      });
    }
  },
  _collapseGroupHandler($group, toggle) {
    var deferred = Deferred();
    if ($group.hasClass(LIST_GROUP_COLLAPSED_CLASS) === toggle) {
      return deferred.resolve();
    }
    var $groupBody = $group.children(".".concat(LIST_GROUP_BODY_CLASS));
    var startHeight = getOuterHeight($groupBody);
    var endHeight = 0;
    if (0 === startHeight) {
      setHeight2($groupBody, "auto");
      endHeight = getOuterHeight($groupBody);
    }
    $group.toggleClass(LIST_GROUP_COLLAPSED_CLASS, toggle);
    fx_default.animate($groupBody, {
      type: "custom",
      from: {
        height: startHeight
      },
      to: {
        height: endHeight
      },
      duration: 200,
      complete: (function() {
        this.updateDimensions();
        this._updateLoadingState(true);
        deferred.resolve();
      }).bind(this)
    });
    return deferred.promise();
  },
  _dataSourceLoadErrorHandler() {
    this._forgetNextPageLoading();
    if (this._initialized) {
      this._renderEmptyMessage();
      this._updateLoadingState();
    }
  },
  _initMarkup() {
    this._itemElementsCache = renderer_default();
    this.$element().addClass(LIST_CLASS);
    this.callBase();
    this.option("useInkRipple") && this._renderInkRipple();
    this.setAria({
      role: "group",
      roledescription: "list"
    }, this.$element());
    this.setAria({
      role: "group"
    }, this._focusTarget());
    this._setListAria();
  },
  _setListAria() {
    var {
      items
    } = this.option();
    var listArea = (null === items || void 0 === items ? void 0 : items.length) ? {
      role: "listbox",
      label: "Items"
    } : {
      role: void 0,
      label: void 0
    };
    this.setAria(listArea, this._$listContainer);
  },
  _focusTarget() {
    return this._itemContainer();
  },
  _renderInkRipple() {
    this._inkRipple = render();
  },
  _toggleActiveState($element, value2, e) {
    this.callBase.apply(this, arguments);
    var that = this;
    if (!this._inkRipple) {
      return;
    }
    var config2 = {
      element: $element,
      event: e
    };
    if (value2) {
      if (isMaterial()) {
        this._inkRippleTimer = setTimeout(() => {
          that._inkRipple.showWave(config2);
        }, LIST_FEEDBACK_SHOW_TIMEOUT / 2);
      } else {
        that._inkRipple.showWave(config2);
      }
    } else {
      clearTimeout(this._inkRippleTimer);
      this._inkRipple.hideWave(config2);
    }
  },
  _postprocessRenderItem(args) {
    this._refreshItemElements();
    this.callBase.apply(this, arguments);
    if (this.option("_swipeEnabled")) {
      this._attachSwipeEvent(renderer_default(args.itemElement));
    }
  },
  _attachSwipeEvent($itemElement) {
    var endEventName = addNamespace(SWIPE_END_EVENT, this.NAME);
    events_engine_default.on($itemElement, endEventName, this._itemSwipeEndHandler.bind(this));
  },
  _itemSwipeEndHandler(e) {
    this._itemDXEventHandler(e, "onItemSwipe", {
      direction: e.offset < 0 ? "left" : "right"
    });
  },
  _nextButtonHandler(e) {
    this._pageLoadingAction(e);
    var dataController2 = this._dataController;
    if (dataController2.getDataSource() && !dataController2.isLoading()) {
      this._scrollView.toggleLoading(true);
      this._$nextButton.detach();
      this._loadIndicationSuppressed(true);
      this._loadNextPage();
    }
  },
  _renderGroup(index, group) {
    var $groupElement = renderer_default("<div>").addClass(LIST_GROUP_CLASS).appendTo(this._getItemsContainer());
    var id = "dx-".concat(new guid_default().toString());
    var groupAria = {
      role: "group",
      labelledby: id
    };
    this.setAria(groupAria, $groupElement);
    var $groupHeaderElement = renderer_default("<div>").addClass(LIST_GROUP_HEADER_CLASS).attr("id", id).appendTo($groupElement);
    var groupTemplateName = this.option("groupTemplate");
    var groupTemplate = this._getTemplate(group.template || groupTemplateName, group, index, $groupHeaderElement);
    var renderArgs = {
      index,
      itemData: group,
      container: getPublicElement($groupHeaderElement)
    };
    this._createItemByTemplate(groupTemplate, renderArgs);
    renderer_default("<div>").addClass(LIST_GROUP_HEADER_INDICATOR_CLASS).prependTo($groupHeaderElement);
    this._renderingGroupIndex = index;
    var $groupBody = renderer_default("<div>").addClass(LIST_GROUP_BODY_CLASS).appendTo($groupElement);
    each(groupItemsGetter(group) || [], (itemIndex, item) => {
      this._renderItem({
        group: index,
        item: itemIndex
      }, item, $groupBody);
    });
    this._groupRenderAction({
      groupElement: getPublicElement($groupElement),
      groupIndex: index,
      groupData: group
    });
  },
  downInkRippleHandler(e) {
    this._toggleActiveState(renderer_default(e.currentTarget), true, e);
  },
  upInkRippleHandler(e) {
    this._toggleActiveState(renderer_default(e.currentTarget), false);
  },
  attachGroupHeaderInkRippleEvents() {
    var selector = ".".concat(LIST_GROUP_HEADER_CLASS);
    var $element = this.$element();
    this._downInkRippleHandler = this._downInkRippleHandler || this.downInkRippleHandler.bind(this);
    this._upInkRippleHandler = this._upInkRippleHandler || this.upInkRippleHandler.bind(this);
    var downArguments = [$element, "dxpointerdown", selector, this._downInkRippleHandler];
    var upArguments = [$element, "dxpointerup dxpointerout", selector, this._upInkRippleHandler];
    events_engine_default.off(...downArguments);
    events_engine_default.on(...downArguments);
    events_engine_default.off(...upArguments);
    events_engine_default.on(...upArguments);
  },
  _createGroupRenderAction() {
    this._groupRenderAction = this._createActionByOption("onGroupRendered");
  },
  _clean() {
    clearTimeout(this._inkRippleTimer);
    if (this._$nextButton) {
      this._$nextButton.remove();
      this._$nextButton = null;
    }
    this.callBase.apply(this, arguments);
  },
  _dispose() {
    this._isDataSourceFirstLoadCompleted(false);
    clearTimeout(this._holdTimer);
    clearTimeout(this._loadNextPageTimer);
    clearTimeout(this._showLoadingIndicatorTimer);
    this.callBase();
  },
  _toggleDisabledState(value2) {
    this.callBase(value2);
    this._scrollView.option("disabled", value2 || !this.option("scrollingEnabled"));
  },
  _toggleNextButton(value2) {
    var dataController2 = this._dataController;
    var $nextButton = this._getNextButton();
    this.$element().toggleClass(LIST_HAS_NEXT_CLASS, value2);
    if (value2 && dataController2.isLoaded()) {
      $nextButton.appendTo(this._itemContainer());
    }
    if (!value2) {
      $nextButton.detach();
    }
  },
  _getNextButton() {
    if (!this._$nextButton) {
      this._$nextButton = this._createNextButton();
    }
    return this._$nextButton;
  },
  _createNextButton() {
    var $result = renderer_default("<div>").addClass(LIST_NEXT_BUTTON_CLASS);
    var $button = renderer_default("<div>").appendTo($result);
    this._createComponent($button, button_default, {
      text: this.option("nextButtonText"),
      onClick: this._nextButtonHandler.bind(this),
      type: isMaterialBased() ? "default" : void 0,
      integrationOptions: {}
    });
    return $result;
  },
  _moveFocus() {
    this.callBase.apply(this, arguments);
    this.scrollToItem(this.option("focusedElement"));
  },
  _refresh() {
    if (!hasWindow()) {
      this.callBase();
    } else {
      var scrollTop = this._scrollView.scrollTop();
      this.callBase();
      scrollTop && this._scrollView.scrollTo(scrollTop);
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "pageLoadMode":
        this._toggleNextButton(args.value);
        this._initScrollView();
        break;
      case "dataSource":
        this.callBase(args);
        this._initScrollView();
        this._isDataSourceFirstLoadCompleted(false);
        break;
      case "items":
        this.callBase(args);
        this._isDataSourceFirstLoadCompleted(false);
        break;
      case "pullingDownText":
      case "pulledDownText":
      case "refreshingText":
      case "pageLoadingText":
      case "showScrollbar":
      case "bounceEnabled":
      case "scrollByContent":
      case "scrollByThumb":
      case "useNativeScrolling":
      case "scrollingEnabled":
      case "pullRefreshEnabled":
        this._initScrollView();
        this._updateLoadingState(true);
        break;
      case "nextButtonText":
      case "onItemSwipe":
      case "useInkRipple":
        this._invalidate();
        break;
      case "onScroll":
      case "onPullRefresh":
      case "onPageLoading":
        this._createScrollViewActions();
        break;
      case "grouped":
      case "collapsibleGroups":
      case "groupTemplate":
        this._invalidate();
        break;
      case "wrapItemText":
        this._toggleWrapItemText(args.value);
        break;
      case "onGroupRendered":
        this._createGroupRenderAction();
        break;
      case "width":
      case "height":
        this.callBase(args);
        this._scrollView.option(args.name, args.value);
        this._scrollView.update();
        break;
      case "indicateLoading":
        this._hideLoadingIfLoadIndicationOff();
        break;
      case "visible":
        this.callBase(args);
        this._scrollView.update();
        break;
      case "rtlEnabled":
        this._initScrollView();
        this.callBase(args);
        break;
      case "showChevronExpr":
      case "badgeExpr":
        this._invalidate();
        break;
      case "_swipeEnabled":
      case "selectByClick":
        break;
      default:
        this.callBase(args);
    }
  },
  _extendActionArgs($itemElement) {
    if (!this.option("grouped")) {
      return this.callBase($itemElement);
    }
    var $group = $itemElement.closest(".".concat(LIST_GROUP_CLASS));
    var $item = $group.find(".".concat(LIST_ITEM_CLASS));
    return extend(this.callBase($itemElement), {
      itemIndex: {
        group: $group.index(),
        item: $item.index($itemElement)
      }
    });
  },
  expandGroup(groupIndex) {
    var deferred = Deferred();
    var $group = this._getItemsContainer().find(".".concat(LIST_GROUP_CLASS)).eq(groupIndex);
    this._collapseGroupHandler($group, false).done(() => {
      deferred.resolveWith(this);
    });
    return deferred.promise();
  },
  collapseGroup(groupIndex) {
    var deferred = Deferred();
    var $group = this._getItemsContainer().find(".".concat(LIST_GROUP_CLASS)).eq(groupIndex);
    this._collapseGroupHandler($group, true).done(() => {
      deferred.resolveWith(this);
    });
    return deferred;
  },
  updateDimensions() {
    var that = this;
    var deferred = Deferred();
    if (that._scrollView) {
      that._scrollView.update().done(() => {
        !that._scrollViewIsFull() && that._updateLoadingState(true);
        deferred.resolveWith(that);
      });
    } else {
      deferred.resolveWith(that);
    }
    return deferred.promise();
  },
  reload() {
    this.callBase();
    this.scrollTo(0);
    this._pullDownHandler();
  },
  repaint() {
    this.scrollTo(0);
    this.callBase();
  },
  scrollTop() {
    return this._scrollView.scrollOffset().top;
  },
  clientHeight() {
    return this._scrollView.clientHeight();
  },
  scrollHeight() {
    return this._scrollView.scrollHeight();
  },
  scrollBy(distance) {
    this._scrollView.scrollBy(distance);
  },
  scrollTo(location) {
    this._scrollView.scrollTo(location);
  },
  scrollToItem(itemElement) {
    var $item = this._editStrategy.getItemElement(itemElement);
    var item = null === $item || void 0 === $item ? void 0 : $item.get(0);
    this._scrollView.scrollToElement(item, {
      bottom: getElementMargin(item, "bottom")
    });
  },
  _dimensionChanged() {
    this.updateDimensions();
  }
}).include(m_grouped_data_converter_mixin_default);
ListBase.ItemClass = m_item_default2;
function getScrollView() {
  return _scrollView || scroll_view_default;
}

// node_modules/devextreme/esm/__internal/ui/toolbar/internal/m_toolbar.menu.list.js
var TOOLBAR_MENU_ACTION_CLASS = "dx-toolbar-menu-action";
var TOOLBAR_HIDDEN_BUTTON_CLASS = "dx-toolbar-hidden-button";
var TOOLBAR_HIDDEN_BUTTON_GROUP_CLASS = "dx-toolbar-hidden-button-group";
var TOOLBAR_MENU_SECTION_CLASS = "dx-toolbar-menu-section";
var TOOLBAR_MENU_CUSTOM_CLASS = "dx-toolbar-menu-custom";
var TOOLBAR_MENU_LAST_SECTION_CLASS = "dx-toolbar-menu-last-section";
var SCROLLVIEW_CONTENT_CLASS2 = "dx-scrollview-content";
var ToolbarMenuList = class extends ListBase {
  _init() {
    super._init();
    this._activeStateUnit = ".".concat(TOOLBAR_MENU_ACTION_CLASS, ":not(.").concat(TOOLBAR_HIDDEN_BUTTON_GROUP_CLASS, ")");
  }
  _initMarkup() {
    this._renderSections();
    super._initMarkup();
    this._setMenuRole();
  }
  _getSections() {
    return this._itemContainer().children();
  }
  _itemElements() {
    return this._getSections().children(this._itemSelector());
  }
  _renderSections() {
    var $container = this._itemContainer();
    each(["before", "center", "after", "menu"], (_, section) => {
      var sectionName = "_$".concat(section, "Section");
      if (!this[sectionName]) {
        this[sectionName] = renderer_default("<div>").addClass(TOOLBAR_MENU_SECTION_CLASS);
      }
      this[sectionName].appendTo($container);
    });
  }
  _renderItems() {
    super._renderItems.apply(this, arguments);
    this._updateSections();
  }
  _setMenuRole() {
    var $menuContainer = this.$element().find(".".concat(SCROLLVIEW_CONTENT_CLASS2));
    $menuContainer.attr("role", "menu");
  }
  _updateSections() {
    var $sections = this.$element().find(".".concat(TOOLBAR_MENU_SECTION_CLASS));
    $sections.removeClass(TOOLBAR_MENU_LAST_SECTION_CLASS);
    $sections.not(":empty").eq(-1).addClass(TOOLBAR_MENU_LAST_SECTION_CLASS);
  }
  _renderItem(index, item, itemContainer, $after) {
    var _a;
    var location = null !== (_a = item.location) && void 0 !== _a ? _a : "menu";
    var $container = this["_$".concat(location, "Section")];
    var itemElement = super._renderItem(index, item, $container, $after);
    if (this._getItemTemplateName({
      itemData: item
    })) {
      itemElement.addClass(TOOLBAR_MENU_CUSTOM_CLASS);
    }
    if ("menu" === location || "dxButton" === item.widget || "dxButtonGroup" === item.widget || item.isAction) {
      itemElement.addClass(TOOLBAR_MENU_ACTION_CLASS);
    }
    if ("dxButton" === item.widget) {
      itemElement.addClass(TOOLBAR_HIDDEN_BUTTON_CLASS);
    }
    if ("dxButtonGroup" === item.widget) {
      itemElement.addClass(TOOLBAR_HIDDEN_BUTTON_GROUP_CLASS);
    }
    itemElement.addClass(item.cssClass);
    return itemElement;
  }
  _getItemTemplateName(args) {
    var template = super._getItemTemplateName(args);
    var data17 = args.itemData;
    var menuTemplate = data17 && data17.menuItemTemplate;
    return menuTemplate || template;
  }
  _dataSourceOptions() {
    return {
      paginate: false
    };
  }
  _itemClickHandler(e, args, config2) {
    if (renderer_default(e.target).closest(".".concat(TOOLBAR_MENU_ACTION_CLASS)).length) {
      super._itemClickHandler(e, args, config2);
    }
  }
  _clean() {
    this._getSections().empty();
    super._clean();
  }
};

// node_modules/devextreme/esm/__internal/ui/toolbar/internal/m_toolbar.menu.js
var DROP_DOWN_MENU_CLASS = "dx-dropdownmenu";
var DROP_DOWN_MENU_POPUP_CLASS = "dx-dropdownmenu-popup";
var DROP_DOWN_MENU_POPUP_WRAPPER_CLASS = "dx-dropdownmenu-popup-wrapper";
var DROP_DOWN_MENU_LIST_CLASS = "dx-dropdownmenu-list";
var DROP_DOWN_MENU_BUTTON_CLASS = "dx-dropdownmenu-button";
var POPUP_BOUNDARY_VERTICAL_OFFSET = 10;
var POPUP_VERTICAL_OFFSET = 3;
var DropDownMenu = class extends widget_default {
  _supportedKeys() {
    var _a;
    var extension = {};
    if (!this.option("opened") || !(null === (_a = this._list) || void 0 === _a ? void 0 : _a.option("focusedElement"))) {
      extension = this._button._supportedKeys();
    }
    return extend(super._supportedKeys(), extension, {
      tab() {
        this._popup && this._popup.hide();
      }
    });
  }
  _getDefaultOptions() {
    return _extends(_extends({}, super._getDefaultOptions()), {
      items: [],
      onItemClick: null,
      dataSource: null,
      itemTemplate: "item",
      onButtonClick: null,
      activeStateEnabled: true,
      hoverStateEnabled: true,
      opened: false,
      onItemRendered: null,
      closeOnClick: true,
      useInkRipple: false,
      container: void 0,
      animation: {
        show: {
          type: "fade",
          from: 0,
          to: 1
        },
        hide: {
          type: "fade",
          to: 0
        }
      }
    });
  }
  _defaultOptionsRules() {
    return super._defaultOptionsRules().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }, {
      device: () => isMaterialBased(),
      options: {
        useInkRipple: true,
        animation: {
          show: {
            type: "pop",
            duration: 200,
            from: {
              scale: 0
            },
            to: {
              scale: 1
            }
          },
          hide: {
            type: "pop",
            duration: 200,
            from: {
              scale: 1
            },
            to: {
              scale: 0
            }
          }
        }
      }
    }]);
  }
  _init() {
    super._init();
    this.$element().addClass(DROP_DOWN_MENU_CLASS);
    this._initItemClickAction();
    this._initButtonClickAction();
  }
  _initItemClickAction() {
    this._itemClickAction = this._createActionByOption("onItemClick");
  }
  _initButtonClickAction() {
    this._buttonClickAction = this._createActionByOption("onButtonClick");
  }
  _initTemplates() {
    this._templateManager.addDefaultTemplates({
      content: new ChildDefaultTemplate("content")
    });
    super._initTemplates();
  }
  _initMarkup() {
    this._renderButton();
    super._initMarkup();
  }
  _render() {
    super._render();
    this.setAria({
      haspopup: true,
      expanded: this.option("opened")
    });
  }
  _renderContentImpl() {
    if (this.option("opened")) {
      this._renderPopup();
    }
  }
  _clean() {
    this._cleanFocusState();
    this._list && this._list.$element().remove();
    this._popup && this._popup.$element().remove();
    delete this._list;
    delete this._popup;
  }
  _renderButton() {
    var $button = this.$element().addClass(DROP_DOWN_MENU_BUTTON_CLASS);
    this._button = this._createComponent($button, button_default, {
      icon: "overflow",
      template: "content",
      stylingMode: isFluent() ? "text" : "contained",
      useInkRipple: this.option("useInkRipple"),
      hoverStateEnabled: false,
      focusStateEnabled: false,
      onClick: (e) => {
        this.option("opened", !this.option("opened"));
        this._buttonClickAction(e);
      }
    });
  }
  _toggleActiveState($element, value2, e) {
    this._button._toggleActiveState($element, value2, e);
  }
  _toggleMenuVisibility(opened) {
    var _a, _b;
    var state = null !== opened && void 0 !== opened ? opened : !(null === (_a = this._popup) || void 0 === _a ? void 0 : _a.option("visible"));
    if (opened) {
      this._renderPopup();
    }
    null === (_b = this._popup) || void 0 === _b ? void 0 : _b.toggle(state);
    this.setAria("expanded", state);
  }
  _renderPopup() {
    if (this._$popup) {
      return;
    }
    this._$popup = renderer_default("<div>").appendTo(this.$element());
    var {
      rtlEnabled,
      container,
      animation: animation2
    } = this.option();
    this._popup = this._createComponent(this._$popup, "dxPopup", {
      onInitialized(_ref) {
        var {
          component
        } = _ref;
        component.$wrapper().addClass(DROP_DOWN_MENU_POPUP_WRAPPER_CLASS).addClass(DROP_DOWN_MENU_POPUP_CLASS);
      },
      deferRendering: false,
      preventScrollEvents: false,
      contentTemplate: (contentElement) => this._renderList(contentElement),
      _ignoreFunctionValueDeprecation: true,
      maxHeight: () => this._getMaxHeight(),
      position: {
        my: "top ".concat(rtlEnabled ? "left" : "right"),
        at: "bottom ".concat(rtlEnabled ? "left" : "right"),
        collision: "fit flip",
        offset: {
          v: POPUP_VERTICAL_OFFSET
        },
        of: this.$element()
      },
      animation: animation2,
      onOptionChanged: (_ref2) => {
        var {
          name: name2,
          value: value2
        } = _ref2;
        if ("visible" === name2) {
          this.option("opened", value2);
        }
      },
      container,
      autoResizeEnabled: false,
      height: "auto",
      width: "auto",
      hideOnOutsideClick: (e) => this._closeOutsideDropDownHandler(e),
      hideOnParentScroll: true,
      shading: false,
      dragEnabled: false,
      showTitle: false,
      fullScreen: false,
      _fixWrapperPosition: true
    });
  }
  _getMaxHeight() {
    var $element = this.$element();
    var offsetTop = $element.offset().top;
    var windowHeight = getOuterHeight(getWindow());
    var maxHeight = Math.max(offsetTop, windowHeight - offsetTop - getOuterHeight($element));
    return Math.min(windowHeight, maxHeight - POPUP_VERTICAL_OFFSET - POPUP_BOUNDARY_VERTICAL_OFFSET);
  }
  _closeOutsideDropDownHandler(e) {
    var isOutsideClick = !renderer_default(e.target).closest(this.$element()).length;
    return isOutsideClick;
  }
  _renderList(contentElement) {
    var $content = renderer_default(contentElement);
    $content.addClass(DROP_DOWN_MENU_LIST_CLASS);
    this._list = this._createComponent($content, ToolbarMenuList, {
      dataSource: this._getListDataSource(),
      pageLoadMode: "scrollBottom",
      indicateLoading: false,
      noDataText: "",
      itemTemplate: this.option("itemTemplate"),
      onItemClick: (e) => {
        if (this.option("closeOnClick")) {
          this.option("opened", false);
        }
        this._itemClickAction(e);
      },
      tabIndex: -1,
      focusStateEnabled: false,
      activeStateEnabled: true,
      onItemRendered: this.option("onItemRendered"),
      _itemAttributes: {
        role: "menuitem"
      }
    });
  }
  _itemOptionChanged(item, property, value2) {
    var _a;
    null === (_a = this._list) || void 0 === _a ? void 0 : _a._itemOptionChanged(item, property, value2);
    toggleItemFocusableElementTabIndex(this._list, item);
  }
  _getListDataSource() {
    var _a;
    return null !== (_a = this.option("dataSource")) && void 0 !== _a ? _a : this.option("items");
  }
  _setListDataSource() {
    var _a;
    null === (_a = this._list) || void 0 === _a ? void 0 : _a.option("dataSource", this._getListDataSource());
    delete this._deferRendering;
  }
  _getKeyboardListeners() {
    return super._getKeyboardListeners().concat([this._list]);
  }
  _toggleVisibility(visible) {
    var _a;
    super._toggleVisibility(visible);
    null === (_a = this._button) || void 0 === _a ? void 0 : _a.option("visible", visible);
  }
  _optionChanged(args) {
    var _a, _b, _c;
    var {
      name: name2,
      value: value2
    } = args;
    switch (name2) {
      case "items":
      case "dataSource":
        if (!this.option("opened")) {
          this._deferRendering = true;
        } else {
          this._setListDataSource();
        }
        break;
      case "itemTemplate":
        null === (_a = this._list) || void 0 === _a ? void 0 : _a.option(name2, this._getTemplate(value2));
        break;
      case "onItemClick":
        this._initItemClickAction();
        break;
      case "onButtonClick":
        this._buttonClickAction();
        break;
      case "useInkRipple":
        this._invalidate();
        break;
      case "focusStateEnabled":
        null === (_b = this._list) || void 0 === _b ? void 0 : _b.option(name2, value2);
        super._optionChanged(args);
        break;
      case "onItemRendered":
        null === (_c = this._list) || void 0 === _c ? void 0 : _c.option(name2, value2);
        break;
      case "opened":
        if (this._deferRendering) {
          this._setListDataSource();
        }
        this._toggleMenuVisibility(value2);
        this._updateFocusableItemsTabIndex();
        break;
      case "closeOnClick":
        break;
      case "container":
        this._popup && this._popup.option(name2, value2);
        break;
      case "disabled":
        if (this._list) {
          this._updateFocusableItemsTabIndex();
        }
        break;
      default:
        super._optionChanged(args);
    }
  }
  _updateFocusableItemsTabIndex() {
    this.option("items").forEach((item) => toggleItemFocusableElementTabIndex(this._list, item));
  }
};

// node_modules/devextreme/esm/__internal/ui/toolbar/strategy/m_toolbar.singleline.js
var INVISIBLE_STATE_CLASS2 = "dx-state-invisible";
var TOOLBAR_DROP_DOWN_MENU_CONTAINER_CLASS = "dx-toolbar-menu-container";
var TOOLBAR_BUTTON_CLASS2 = "dx-toolbar-button";
var TOOLBAR_AUTO_HIDE_ITEM_CLASS = "dx-toolbar-item-auto-hide";
var TOOLBAR_HIDDEN_ITEM = "dx-toolbar-item-invisible";
var SingleLineStrategy = class {
  constructor(toolbar) {
    this._toolbar = toolbar;
  }
  _initMarkup() {
    deferRender(() => {
      this._renderOverflowMenu();
      this._renderMenuItems();
    });
  }
  _renderOverflowMenu() {
    if (!this._hasVisibleMenuItems()) {
      return;
    }
    this._renderMenuButtonContainer();
    var $menu = renderer_default("<div>").appendTo(this._overflowMenuContainer());
    var itemClickAction = this._toolbar._createActionByOption("onItemClick");
    var menuItemTemplate = this._toolbar._getTemplateByOption("menuItemTemplate");
    this._menu = this._toolbar._createComponent($menu, DropDownMenu, {
      disabled: this._toolbar.option("disabled"),
      itemTemplate: () => menuItemTemplate,
      onItemClick: (e) => {
        itemClickAction(e);
      },
      container: this._toolbar.option("menuContainer"),
      onOptionChanged: (_ref) => {
        var {
          name: name2,
          value: value2
        } = _ref;
        if ("opened" === name2) {
          this._toolbar.option("overflowMenuVisible", value2);
        }
        if ("items" === name2) {
          this._updateMenuVisibility(value2);
        }
      }
    });
  }
  renderMenuItems() {
    if (!this._menu) {
      this._renderOverflowMenu();
    }
    this._menu && this._menu.option("items", this._getMenuItems());
    if (this._menu && !this._menu.option("items").length) {
      this._menu.option("opened", false);
    }
  }
  _renderMenuButtonContainer() {
    this._$overflowMenuContainer = renderer_default("<div>").appendTo(this._toolbar._$afterSection).addClass(TOOLBAR_BUTTON_CLASS2).addClass(TOOLBAR_DROP_DOWN_MENU_CONTAINER_CLASS);
  }
  _overflowMenuContainer() {
    return this._$overflowMenuContainer;
  }
  _updateMenuVisibility(menuItems) {
    var items = null !== menuItems && void 0 !== menuItems ? menuItems : this._getMenuItems();
    var isMenuVisible = items.length && this._hasVisibleMenuItems(items);
    this._toggleMenuVisibility(isMenuVisible);
  }
  _toggleMenuVisibility(value2) {
    if (!this._overflowMenuContainer()) {
      return;
    }
    this._overflowMenuContainer().toggleClass(INVISIBLE_STATE_CLASS2, !value2);
  }
  _renderMenuItems() {
    deferRender(() => {
      this.renderMenuItems();
    });
  }
  _dimensionChanged() {
    this.renderMenuItems();
  }
  _getToolbarItems() {
    var _a;
    return grep(null !== (_a = this._toolbar.option("items")) && void 0 !== _a ? _a : [], (item) => !this._toolbar._isMenuItem(item));
  }
  _getHiddenItems() {
    return this._toolbar._itemContainer().children(".".concat(TOOLBAR_AUTO_HIDE_ITEM_CLASS, ".").concat(TOOLBAR_HIDDEN_ITEM)).not(".".concat(INVISIBLE_STATE_CLASS2));
  }
  _getMenuItems() {
    var _a, _b;
    var menuItems = grep(null !== (_a = this._toolbar.option("items")) && void 0 !== _a ? _a : [], (item) => this._toolbar._isMenuItem(item));
    var $hiddenItems = this._getHiddenItems();
    this._restoreItems = null !== (_b = this._restoreItems) && void 0 !== _b ? _b : [];
    var overflowItems = [].slice.call($hiddenItems).map((hiddenItem) => {
      var itemData = this._toolbar._getItemData(hiddenItem);
      var $itemContainer = renderer_default(hiddenItem);
      var $itemMarkup = $itemContainer.children();
      return extend({
        menuItemTemplate: () => {
          this._restoreItems.push({
            container: $itemContainer,
            item: $itemMarkup
          });
          var $container = renderer_default("<div>").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);
          return $container.append($itemMarkup);
        }
      }, itemData);
    });
    return [...overflowItems, ...menuItems];
  }
  _hasVisibleMenuItems(items) {
    var menuItems = null !== items && void 0 !== items ? items : this._toolbar.option("items");
    var result2 = false;
    var optionGetter = compileGetter("visible");
    var overflowGetter = compileGetter("locateInMenu");
    each(menuItems, (index, item) => {
      var itemVisible = optionGetter(item, {
        functionsAsIs: true
      });
      var itemOverflow = overflowGetter(item, {
        functionsAsIs: true
      });
      if (false !== itemVisible && ("auto" === itemOverflow || "always" === itemOverflow) || "menu" === item.location) {
        result2 = true;
      }
    });
    return result2;
  }
  _arrangeItems() {
    var _a;
    this._toolbar._$centerSection.css({
      margin: "0 auto",
      float: "none"
    });
    each(null !== (_a = this._restoreItems) && void 0 !== _a ? _a : [], (_, obj) => {
      renderer_default(obj.container).append(obj.item);
    });
    this._restoreItems = [];
    var elementWidth = getWidth(this._toolbar.$element());
    this._hideOverflowItems(elementWidth);
    return elementWidth;
  }
  _hideOverflowItems(width) {
    var overflowItems = this._toolbar.$element().find(".".concat(TOOLBAR_AUTO_HIDE_ITEM_CLASS));
    if (!overflowItems.length) {
      return;
    }
    var elementWidth = null !== width && void 0 !== width ? width : getWidth(this._toolbar.$element());
    renderer_default(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);
    var itemsWidth = this._getItemsWidth();
    while (overflowItems.length && elementWidth < itemsWidth) {
      var $item = overflowItems.eq(-1);
      $item.addClass(TOOLBAR_HIDDEN_ITEM);
      itemsWidth = this._getItemsWidth();
      overflowItems.splice(-1, 1);
    }
  }
  _getItemsWidth() {
    return this._toolbar._getSummaryItemsSize("width", [this._toolbar._$beforeSection, this._toolbar._$centerSection, this._toolbar._$afterSection]);
  }
  _itemOptionChanged(item, property, value2) {
    var _a;
    if ("disabled" === property || "options.disabled" === property) {
      if (this._toolbar._isMenuItem(item)) {
        null === (_a = this._menu) || void 0 === _a ? void 0 : _a._itemOptionChanged(item, property, value2);
        return;
      }
    }
    this.renderMenuItems();
  }
  _renderItem(item, itemElement) {
    if ("auto" === item.locateInMenu) {
      itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);
    }
  }
  _optionChanged(name2, value2) {
    var _a, _b, _c, _d, _e;
    switch (name2) {
      case "disabled":
        null === (_a = this._menu) || void 0 === _a ? void 0 : _a.option(name2, value2);
        break;
      case "overflowMenuVisible":
        null === (_b = this._menu) || void 0 === _b ? void 0 : _b.option("opened", value2);
        break;
      case "onItemClick":
        null === (_c = this._menu) || void 0 === _c ? void 0 : _c.option(name2, value2);
        break;
      case "menuContainer":
        null === (_d = this._menu) || void 0 === _d ? void 0 : _d.option("container", value2);
        break;
      case "menuItemTemplate":
        null === (_e = this._menu) || void 0 === _e ? void 0 : _e.option("itemTemplate", value2);
    }
  }
};

// node_modules/devextreme/esm/__internal/ui/toolbar/m_toolbar.js
var TOOLBAR_MULTILINE_CLASS = "dx-toolbar-multiline";
var TOOLBAR_AUTO_HIDE_TEXT_CLASS = "dx-toolbar-text-auto-hide";
var Toolbar = class extends m_toolbar_base_default {
  _getDefaultOptions() {
    return _extends(_extends({}, super._getDefaultOptions()), {
      menuItemTemplate: "menuItem",
      menuContainer: void 0,
      overflowMenuVisible: false,
      multiline: false
    });
  }
  _isMultiline() {
    return this.option("multiline");
  }
  _dimensionChanged(dimension) {
    if ("height" === dimension) {
      return;
    }
    super._dimensionChanged();
    this._layoutStrategy._dimensionChanged();
  }
  _initMarkup() {
    super._initMarkup();
    this._updateFocusableItemsTabIndex();
    this._layoutStrategy._initMarkup();
  }
  _renderToolbar() {
    super._renderToolbar();
    this._renderLayoutStrategy();
  }
  _itemContainer() {
    if (this._isMultiline()) {
      return this._$toolbarItemsContainer;
    }
    return super._itemContainer();
  }
  _renderLayoutStrategy() {
    this.$element().toggleClass(TOOLBAR_MULTILINE_CLASS, this._isMultiline());
    this._layoutStrategy = this._isMultiline() ? new MultiLineStrategy(this) : new SingleLineStrategy(this);
  }
  _renderSections() {
    if (this._isMultiline()) {
      return;
    }
    return super._renderSections();
  }
  _postProcessRenderItems() {
    this._layoutStrategy._hideOverflowItems();
    this._layoutStrategy._updateMenuVisibility();
    super._postProcessRenderItems();
    this._layoutStrategy._renderMenuItems();
  }
  _renderItem(index, item, itemContainer, $after) {
    var itemElement = super._renderItem(index, item, itemContainer, $after);
    this._layoutStrategy._renderItem(item, itemElement);
    var {
      widget,
      showText
    } = item;
    if ("dxButton" === widget && "inMenu" === showText) {
      itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS);
    }
    return itemElement;
  }
  _getItemsWidth() {
    return this._layoutStrategy._getItemsWidth();
  }
  _getMenuItems() {
    return this._layoutStrategy._getMenuItems();
  }
  _getToolbarItems() {
    return this._layoutStrategy._getToolbarItems();
  }
  _arrangeItems() {
    if (this.$element().is(":hidden")) {
      return;
    }
    var elementWidth = this._layoutStrategy._arrangeItems();
    if (!this._isMultiline()) {
      super._arrangeItems(elementWidth);
    }
  }
  _itemOptionChanged(item, property, value2, prevValue) {
    if (!this._isMenuItem(item)) {
      super._itemOptionChanged(item, property, value2, prevValue);
    }
    this._layoutStrategy._itemOptionChanged(item, property, value2);
    if ("disabled" === property || "options.disabled" === property) {
      toggleItemFocusableElementTabIndex(this, item);
    }
    if ("location" === property) {
      this.repaint();
    }
  }
  _updateFocusableItemsTabIndex() {
    this._getToolbarItems().forEach((item) => toggleItemFocusableElementTabIndex(this, item));
  }
  _isMenuItem(itemData) {
    return "menu" === itemData.location || "always" === itemData.locateInMenu;
  }
  _isToolbarItem(itemData) {
    return void 0 === itemData.location || "never" === itemData.locateInMenu;
  }
  _optionChanged(args) {
    var {
      name: name2,
      value: value2
    } = args;
    this._layoutStrategy._optionChanged(name2, value2);
    switch (name2) {
      case "menuContainer":
      case "menuItemTemplate":
      case "overflowMenuVisible":
        break;
      case "multiline":
        this._invalidate();
        break;
      case "disabled":
        super._optionChanged(args);
        this._updateFocusableItemsTabIndex();
        break;
      default:
        super._optionChanged(args);
    }
  }
  updateDimensions() {
    this._dimensionChanged();
  }
};
component_registrator_default("dxToolbar", Toolbar);
var m_toolbar_default = Toolbar;

// node_modules/devextreme/esm/ui/toolbar/ui.toolbar.js
var ui_toolbar_default = m_toolbar_default;

// node_modules/devextreme/esm/ui/toolbar.js
var toolbar_default = ui_toolbar_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/header_panel/m_header_panel.js
var HEADER_PANEL_CLASS = "header-panel";
var TOOLBAR_BUTTON_CLASS3 = "toolbar-button";
var TOOLBAR_ARIA_LABEL = "-ariaToolbar";
var DEFAULT_TOOLBAR_ITEM_NAMES = ["addRowButton", "applyFilterButton", "columnChooserButton", "exportButton", "groupPanel", "revertButton", "saveButton", "searchPanel"];
var HeaderPanel = class extends ColumnsView {
  init() {
    super.init();
    this._editingController = this.getController("editing");
    this._headerFilterController = this.getController("headerFilter");
    this.createAction("onToolbarPreparing", {
      excludeValidators: ["disabled", "readOnly"]
    });
  }
  _getToolbarItems() {
    return [];
  }
  _getButtonContainer() {
    return renderer_default("<div>").addClass(this.addWidgetPrefix(TOOLBAR_BUTTON_CLASS3));
  }
  _getToolbarButtonClass(specificClass) {
    var secondClass = specificClass ? " ".concat(specificClass) : "";
    return this.addWidgetPrefix(TOOLBAR_BUTTON_CLASS3) + secondClass;
  }
  _getToolbarOptions() {
    var userToolbarOptions = this.option("toolbar");
    var options2 = {
      toolbarOptions: {
        items: this._getToolbarItems(),
        visible: null === userToolbarOptions || void 0 === userToolbarOptions ? void 0 : userToolbarOptions.visible,
        disabled: null === userToolbarOptions || void 0 === userToolbarOptions ? void 0 : userToolbarOptions.disabled,
        onItemRendered(e) {
          var itemRenderedCallback = e.itemData.onItemRendered;
          if (itemRenderedCallback) {
            itemRenderedCallback(e);
          }
        }
      }
    };
    var userItems = null === userToolbarOptions || void 0 === userToolbarOptions ? void 0 : userToolbarOptions.items;
    options2.toolbarOptions.items = this._normalizeToolbarItems(options2.toolbarOptions.items, userItems);
    this.executeAction("onToolbarPreparing", options2);
    if (options2.toolbarOptions && !isDefined(options2.toolbarOptions.visible)) {
      var toolbarItems = options2.toolbarOptions.items;
      options2.toolbarOptions.visible = !!(null === toolbarItems || void 0 === toolbarItems ? void 0 : toolbarItems.length);
    }
    return options2.toolbarOptions;
  }
  _normalizeToolbarItems(defaultItems, userItems) {
    defaultItems.forEach((button) => {
      if (!DEFAULT_TOOLBAR_ITEM_NAMES.includes(button.name)) {
        throw new Error("Default toolbar item '".concat(button.name, "' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"));
      }
    });
    var defaultProps = {
      location: "after"
    };
    var isArray2 = Array.isArray(userItems);
    if (!isDefined(userItems)) {
      return defaultItems;
    }
    if (!isArray2) {
      userItems = [userItems];
    }
    var defaultButtonsByNames = {};
    defaultItems.forEach((button) => {
      defaultButtonsByNames[button.name] = button;
    });
    var normalizedItems = userItems.map((button) => {
      if (isString(button)) {
        button = {
          name: button
        };
      }
      if (isDefined(button.name)) {
        if (isDefined(defaultButtonsByNames[button.name])) {
          button = extend(true, {}, defaultButtonsByNames[button.name], button);
        } else if (DEFAULT_TOOLBAR_ITEM_NAMES.includes(button.name)) {
          button = _extends(_extends({}, button), {
            visible: false
          });
        }
      }
      return extend(true, {}, defaultProps, button);
    });
    return isArray2 ? normalizedItems : normalizedItems[0];
  }
  _renderCore() {
    if (!this._toolbar) {
      var $headerPanel = this.element();
      $headerPanel.addClass(this.addWidgetPrefix(HEADER_PANEL_CLASS));
      var label = message_default.format(this.component.NAME + TOOLBAR_ARIA_LABEL);
      var $toolbar = renderer_default("<div>").attr("aria-label", label).appendTo($headerPanel);
      this._toolbar = this._createComponent($toolbar, toolbar_default, this._toolbarOptions);
    } else {
      this._toolbar.option(this._toolbarOptions);
    }
  }
  _columnOptionChanged() {
  }
  _handleDataChanged() {
    if (this._requireReady) {
      this.render();
    }
  }
  _isDisabledDefinedByUser(name2) {
    var _a;
    var userItems = null === (_a = this.option("toolbar")) || void 0 === _a ? void 0 : _a.items;
    var userItem = null === userItems || void 0 === userItems ? void 0 : userItems.find((item) => (null === item || void 0 === item ? void 0 : item.name) === name2);
    return isDefined(null === userItem || void 0 === userItem ? void 0 : userItem.disabled);
  }
  render() {
    this._toolbarOptions = this._getToolbarOptions();
    super.render.apply(this, arguments);
  }
  setToolbarItemDisabled(name2, disabled) {
    var _a;
    var toolbar = this._toolbar;
    var isDefinedByUser = this._isDisabledDefinedByUser(name2);
    if (!toolbar || isDefinedByUser) {
      return;
    }
    var items = null !== (_a = toolbar.option("items")) && void 0 !== _a ? _a : [];
    var itemIndex = items.findIndex((item2) => item2.name === name2);
    if (itemIndex < 0) {
      return;
    }
    var item = toolbar.option("items[".concat(itemIndex, "]"));
    toolbar.option("items[".concat(itemIndex, "].disabled"), disabled);
    if (item.options) {
      toolbar.option("items[".concat(itemIndex, "].options.disabled"), disabled);
    }
  }
  updateToolbarDimensions() {
    var _a;
    null === (_a = this._toolbar) || void 0 === _a ? void 0 : _a.updateDimensions();
  }
  getHeaderPanel() {
    return this.element();
  }
  getHeight() {
    return this.getElementHeight();
  }
  optionChanged(args) {
    var _a, _b, _c;
    if ("onToolbarPreparing" === args.name) {
      this._invalidate();
      args.handled = true;
    }
    if ("toolbar" === args.name) {
      var parts = getPathParts(args.fullName);
      var optionName = args.fullName.replace(/^toolbar\./, "");
      if (1 === parts.length || "visible" === parts[1]) {
        this._invalidate();
      } else if ("items" === parts[1]) {
        if (2 === parts.length) {
          this._invalidate();
        } else if (3 === parts.length) {
          var normalizedItem = this._normalizeToolbarItems(this._getToolbarItems(), args.value);
          null === (_a = this._toolbar) || void 0 === _a ? void 0 : _a.option(optionName, normalizedItem);
        } else if (parts.length >= 4) {
          null === (_b = this._toolbar) || void 0 === _b ? void 0 : _b.option(optionName, args.value);
        }
      } else {
        null === (_c = this._toolbar) || void 0 === _c ? void 0 : _c.option(optionName, args.value);
      }
      args.handled = true;
    }
    super.optionChanged(args);
  }
  isVisible() {
    return !!(this._toolbarOptions && this._toolbarOptions.visible);
  }
  allowDragging() {
  }
  hasGroupedColumns() {
  }
};
var resizing = (Base) => class extends Base {
  _updateDimensionsCore() {
    super._updateDimensionsCore.apply(this, arguments);
    this.getView("headerPanel").updateToolbarDimensions();
  }
};
var headerPanelModule = {
  defaultOptions: () => ({}),
  views: {
    headerPanel: HeaderPanel
  },
  extenders: {
    controllers: {
      resizing
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/header_panel.js
var HeaderPanel2 = headerPanelModule.views.headerPanel;
m_core_default.registerModule("headerPanel", headerPanelModule);

// node_modules/devextreme/esm/__internal/grids/data_grid/m_widget_base.js
var DATAGRID_ROW_SELECTOR = ".dx-row";
var DATAGRID_DEPRECATED_TEMPLATE_WARNING = "Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.";
m_core_default.registerModulesOrder(["stateStoring", "columns", "selection", "editorFactory", "columnChooser", "grouping", "editing", "editingRowBased", "editingFormBased", "editingCellBased", "masterDetail", "validating", "adaptivity", "data", "virtualScrolling", "columnHeaders", "filterRow", "headerPanel", "headerFilter", "sorting", "search", "rows", "pager", "columnsResizingReordering", "contextMenu", "keyboardNavigation", "errorHandling", "summary", "columnFixing", "export", "gridView"]);
var DataGrid = ui_widget_default.inherit({
  _activeStateUnit: DATAGRID_ROW_SELECTOR,
  _getDefaultOptions() {
    var result2 = this.callBase();
    each(m_core_default.modules, function() {
      if (isFunction(this.defaultOptions)) {
        extend(true, result2, this.defaultOptions());
      }
    });
    return result2;
  },
  _setDeprecatedOptions() {
    this.callBase();
    extend(this._deprecatedOptions, {
      useKeyboard: {
        since: "19.2",
        alias: "keyboardNavigation.enabled"
      },
      rowTemplate: {
        since: "21.2",
        message: 'Use the "dataRowTemplate" option instead'
      },
      "columnChooser.allowSearch": {
        since: "23.1",
        message: 'Use the "columnChooser.search.enabled" option instead'
      },
      "columnChooser.searchTimeout": {
        since: "23.1",
        message: 'Use the "columnChooser.search.timeout" option instead'
      }
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: {
        platform: "ios"
      },
      options: {
        showRowLines: true
      }
    }, {
      device: () => isMaterialBased(),
      options: {
        showRowLines: true,
        showColumnLines: false,
        headerFilter: {
          height: 315
        },
        editing: {
          useIcons: true
        },
        selection: {
          showCheckBoxesMode: "always"
        }
      }
    }, {
      device: () => browser_default.webkit,
      options: {
        loadingTimeout: 30,
        loadPanel: {
          animation: {
            show: {
              easing: "cubic-bezier(1, 0, 1, 0)",
              duration: 500,
              from: {
                opacity: 0
              },
              to: {
                opacity: 1
              }
            }
          }
        }
      }
    }, {
      device: (device) => "desktop" !== device.deviceType,
      options: {
        grouping: {
          expandMode: "rowClick"
        }
      }
    }]);
  },
  _init() {
    this.callBase();
    m_utils_default.logHeaderFilterDeprecatedWarningIfNeed(this);
    m_core_default.processModules(this, m_core_default);
    m_core_default.callModuleItemsMethod(this, "init");
  },
  _clean: noop,
  _optionChanged(args) {
    m_core_default.callModuleItemsMethod(this, "optionChanged", [args]);
    if (!args.handled) {
      this.callBase(args);
    }
  },
  _dimensionChanged() {
    this.updateDimensions(true);
  },
  _visibilityChanged(visible) {
    if (visible) {
      this.updateDimensions();
    }
  },
  _initMarkup() {
    this.callBase.apply(this, arguments);
    this.getView("gridView").render(this.$element());
  },
  _renderContentImpl() {
    this.getView("gridView").update();
  },
  _renderContent() {
    var that = this;
    deferRender(() => {
      that._renderContentImpl();
    });
  },
  _getTemplate(templateName) {
    var template = templateName;
    if (isString(template) && template.startsWith("#")) {
      template = renderer_default(templateName);
      logger.warn(DATAGRID_DEPRECATED_TEMPLATE_WARNING);
    }
    return this.callBase(template);
  },
  _dispose() {
    this.callBase();
    m_core_default.callModuleItemsMethod(this, "dispose");
  },
  isReady() {
    return this.getController("data").isReady();
  },
  beginUpdate() {
    this.callBase();
    m_core_default.callModuleItemsMethod(this, "beginUpdate");
  },
  endUpdate() {
    m_core_default.callModuleItemsMethod(this, "endUpdate");
    this.callBase();
  },
  getController(name2) {
    return this._controllers[name2];
  },
  getView(name2) {
    return this._views[name2];
  },
  focus(element) {
    this.getController("keyboardNavigation").focus(element);
  }
});
DataGrid.registerModule = m_core_default.registerModule.bind(m_core_default);
component_registrator_default("dxDataGrid", DataGrid);
var m_widget_base_default = DataGrid;

// node_modules/devextreme/esm/__internal/grids/grid_core/state_storing/m_state_storing_core.js
var DATE_REGEX = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;
var parseDates = function parseDates2(state) {
  if (!state) {
    return;
  }
  each(state, (key, value2) => {
    if (isPlainObject(value2) || Array.isArray(value2)) {
      parseDates2(value2);
    } else if ("string" === typeof value2) {
      var date = DATE_REGEX.exec(value2);
      if (date) {
        state[key] = new Date(Date.UTC(+date[1], +date[2] - 1, +date[3], +date[4], +date[5], +date[6]));
      }
    }
  });
};
var getStorage = function(options2) {
  var storage = "sessionStorage" === options2.type ? getSessionStorage() : getWindow().localStorage;
  if (!storage) {
    throw new Error("E1007");
  }
  return storage;
};
var getUniqueStorageKey = function(options2) {
  return isDefined(options2.storageKey) ? options2.storageKey : "storage";
};
var StateStoringController = class extends m_modules_default.ViewController {
  getDataController() {
    return this.getController("data");
  }
  getExportController() {
    return this.getController("export");
  }
  getColumnsController() {
    return this.getController("columns");
  }
  init() {
    this._state = {};
    this._isLoaded = false;
    this._isLoading = false;
    this._windowUnloadHandler = () => {
      if (void 0 !== this._savingTimeoutID) {
        this._saveState(this.state());
      }
    };
    events_engine_default.on(getWindow(), "visibilitychange", this._windowUnloadHandler);
    return this;
  }
  optionChanged(args) {
    switch (args.name) {
      case "stateStoring":
        if (this.isEnabled() && !this.isLoading()) {
          this.load();
        }
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  dispose() {
    clearTimeout(this._savingTimeoutID);
    events_engine_default.off(getWindow(), "visibilitychange", this._windowUnloadHandler);
  }
  _loadState() {
    var options2 = this.option("stateStoring");
    if ("custom" === options2.type) {
      return options2.customLoad && options2.customLoad();
    }
    try {
      return JSON.parse(getStorage(options2).getItem(getUniqueStorageKey(options2)));
    } catch (e) {
      ui_errors_default.log("W1022", "State storing", e.message);
    }
  }
  _saveState(state) {
    var options2 = this.option("stateStoring");
    if ("custom" === options2.type) {
      options2.customSave && options2.customSave(state);
      return;
    }
    try {
      getStorage(options2).setItem(getUniqueStorageKey(options2), JSON.stringify(state));
    } catch (e) {
      ui_errors_default.log(e.message);
    }
  }
  publicMethods() {
    return ["state"];
  }
  isEnabled() {
    return this.option("stateStoring.enabled");
  }
  isLoaded() {
    return this._isLoaded;
  }
  isLoading() {
    return this._isLoading;
  }
  load() {
    this._isLoading = true;
    var loadResult = fromPromise(this._loadState());
    loadResult.always(() => {
      this._isLoaded = true;
      this._isLoading = false;
    }).done((state) => {
      if (null !== state && !isEmptyObject(state)) {
        this.state(state);
      }
    });
    return loadResult;
  }
  state(state) {
    if (!arguments.length) {
      return extend(true, {}, this._state);
    }
    this._state = extend({}, state);
    parseDates(this._state);
  }
  save() {
    var that = this;
    clearTimeout(that._savingTimeoutID);
    that._savingTimeoutID = setTimeout(() => {
      that._saveState(that.state());
      that._savingTimeoutID = void 0;
    }, that.option("stateStoring.savingTimeout"));
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/state_storing/m_state_storing.js
var getDataState = (that) => {
  var pagerView = that.getView("pagerView");
  var dataController2 = that.getController("data");
  var state = {
    allowedPageSizes: pagerView ? pagerView.getPageSizes() : void 0,
    filterPanel: {
      filterEnabled: that.option("filterPanel.filterEnabled")
    },
    filterValue: that.option("filterValue"),
    focusedRowKey: that.option("focusedRowEnabled") ? that.option("focusedRowKey") : void 0
  };
  return extend(state, dataController2.getUserState());
};
var processLoadState = (that) => {
  var columnsController = that.getController("columns");
  var selectionController = that.getController("selection");
  var exportController = that.getController("export");
  var dataController2 = that.getController("data");
  if (columnsController) {
    columnsController.columnsChanged.add(() => {
      that.updateState({
        columns: columnsController.getUserState()
      });
    });
  }
  if (selectionController) {
    selectionController.selectionChanged.add((e) => {
      that.updateState({
        selectedRowKeys: e.selectedRowKeys,
        selectionFilter: e.selectionFilter
      });
    });
  }
  if (dataController2) {
    that._initialPageSize = that.option("paging.pageSize");
    that._initialFilterValue = that.option("filterValue");
    dataController2.changed.add(() => {
      var state = getDataState(that);
      that.updateState(state);
    });
  }
  if (exportController) {
    exportController.selectionOnlyChanged.add(() => {
      that.updateState({
        exportSelectionOnly: exportController.selectionOnly()
      });
    });
  }
};
var DEFAULT_FILTER_VALUE = null;
var getFilterValue = (that, state) => {
  var filterSyncController = that.getController("filterSync");
  var columnsController = that.getController("columns");
  var hasFilterState = state.columns || void 0 !== state.filterValue;
  if (filterSyncController) {
    if (hasFilterState) {
      return state.filterValue || filterSyncController.getFilterValueFromColumns(state.columns);
    }
    return that._initialFilterValue || filterSyncController.getFilterValueFromColumns(columnsController.getColumns());
  }
  return DEFAULT_FILTER_VALUE;
};
var rowsView = (Base) => class extends Base {
  init() {
    super.init();
    this._dataController.stateLoaded.add(() => {
      if (this._dataController.isLoaded() && !this._dataController.getDataSource()) {
        this.setLoading(false);
        this.renderNoDataText();
        var columnHeadersView8 = this.component.getView("columnHeadersView");
        columnHeadersView8 && columnHeadersView8.render();
        this.component._fireContentReadyAction();
      }
    });
  }
};
var stateStoring = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    processLoadState(this);
    return this;
  }
  isLoading() {
    return super.isLoading() || this.getDataController().isStateLoading();
  }
  state(state) {
    var result2 = super.state.apply(this, arguments);
    if (void 0 !== state) {
      this.applyState(extend(true, {}, state));
    }
    return result2;
  }
  updateState(state) {
    if (this.isEnabled()) {
      var oldState = this.state();
      var newState = extend({}, oldState, state);
      var oldStateHash = getKeyHash(oldState);
      var newStateHash = getKeyHash(newState);
      if (!equalByValue(oldStateHash, newStateHash)) {
        state = extend(true, {}, state);
        extend(this._state, state);
        this.save();
      }
    } else {
      extend(this._state, state);
    }
  }
  applyState(state) {
    var _a, _b;
    var {
      allowedPageSizes
    } = state;
    var {
      searchText
    } = state;
    var {
      selectedRowKeys
    } = state;
    var {
      selectionFilter
    } = state;
    var scrollingMode = this.option("scrolling.mode");
    var isVirtualScrollingMode = "virtual" === scrollingMode || "infinite" === scrollingMode;
    var showPageSizeSelector = true === this.option("pager.visible") && this.option("pager.showPageSizeSelector");
    var hasHeight = null === (_a = this.getView("rowsView")) || void 0 === _a ? void 0 : _a.hasHeight();
    this.component.beginUpdate();
    if (this.getColumnsController()) {
      this.getColumnsController().setUserState(state.columns);
    }
    if (this.getExportController()) {
      this.getExportController().selectionOnly(state.exportSelectionOnly);
    }
    if (!this.option("selection.deferred")) {
      this.option("selectedRowKeys", selectedRowKeys || []);
    }
    this.option("selectionFilter", selectionFilter);
    if (allowedPageSizes && "auto" === this.option("pager.allowedPageSizes")) {
      this.option("pager").allowedPageSizes = allowedPageSizes;
    }
    if (this.option("focusedRowEnabled")) {
      this.option("focusedRowIndex", -1);
      this.option("focusedRowKey", null !== (_b = state.focusedRowKey) && void 0 !== _b ? _b : null);
    }
    this.component.endUpdate();
    this.option("searchPanel.text", searchText || "");
    this.option("filterValue", getFilterValue(this, state));
    this.option("filterPanel.filterEnabled", state.filterPanel ? state.filterPanel.filterEnabled : true);
    this.option("paging.pageIndex", (!isVirtualScrollingMode || hasHeight) && state.pageIndex || 0);
    this.option("paging.pageSize", (!isVirtualScrollingMode || showPageSizeSelector) && isDefined(state.pageSize) ? state.pageSize : this._initialPageSize);
    this.getDataController() && this.getDataController().reset();
  }
};
var columns = (Base) => class extends Base {
  _shouldReturnVisibleColumns() {
    var result2 = super._shouldReturnVisibleColumns.apply(this, arguments);
    return result2 && (!this._stateStoringController.isEnabled() || this._stateStoringController.isLoaded());
  }
};
var data3 = (Base) => class extends Base {
  dispose() {
    clearTimeout(this._restoreStateTimeoutID);
    super.dispose();
  }
  callbackNames() {
    return super.callbackNames().concat(["stateLoaded"]);
  }
  _refreshDataSource() {
    if (this._stateStoringController.isEnabled() && !this._stateStoringController.isLoaded()) {
      clearTimeout(this._restoreStateTimeoutID);
      var deferred = new Deferred();
      this._restoreStateTimeoutID = setTimeout(() => {
        this._stateStoringController.load().always(() => {
          this._restoreStateTimeoutID = null;
        }).done(() => {
          super._refreshDataSource();
          this.stateLoaded.fire();
          deferred.resolve();
        }).fail((error) => {
          this.stateLoaded.fire();
          this._handleLoadError(error || "Unknown error");
          deferred.reject();
        });
      });
      return deferred.promise();
    }
    if (!this.isStateLoading()) {
      super._refreshDataSource();
    }
  }
  isLoading() {
    return super.isLoading() || this._stateStoringController.isLoading();
  }
  isStateLoading() {
    return isDefined(this._restoreStateTimeoutID);
  }
  isLoaded() {
    return super.isLoaded() && !this.isStateLoading();
  }
};
var selection = (Base) => class extends Base {
  _fireSelectionChanged(options2) {
    var isDeferredSelection = this.option("selection.deferred");
    if (this._stateStoringController.isLoading() && isDeferredSelection) {
      return;
    }
    super._fireSelectionChanged.apply(this, arguments);
  }
};
var stateStoringModule = {
  defaultOptions: () => ({
    stateStoring: {
      enabled: false,
      storageKey: null,
      type: "localStorage",
      customLoad: null,
      customSave: null,
      savingTimeout: 2e3
    }
  }),
  controllers: {
    stateStoring: StateStoringController
  },
  extenders: {
    views: {
      rowsView
    },
    controllers: {
      stateStoring,
      columns,
      data: data3,
      selection
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/state_storing.js
m_core_default.registerModule("stateStoring", stateStoringModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/selection/m_selection.js
var EDITOR_CELL_CLASS = "dx-editor-cell";
var ROW_CLASS2 = "dx-row";
var ROW_SELECTION_CLASS = "dx-selection";
var SELECT_CHECKBOX_CLASS = "dx-select-checkbox";
var CHECKBOXES_HIDDEN_CLASS = "dx-select-checkboxes-hidden";
var COMMAND_SELECT_CLASS = "dx-command-select";
var SELECTION_DISABLED_CLASS = "dx-selection-disabled";
var DATA_ROW_CLASS2 = "dx-data-row";
var SHOW_CHECKBOXES_MODE = "selection.showCheckBoxesMode";
var SELECTION_MODE = "selection.mode";
var processLongTap = function(that, dxEvent) {
  var rowsView17 = that.getView("rowsView");
  var selectionController = that.getController("selection");
  var $row = renderer_default(dxEvent.target).closest(".".concat(DATA_ROW_CLASS2));
  var rowIndex = rowsView17.getRowIndex($row);
  if (rowIndex < 0) {
    return;
  }
  if ("onLongTap" === that.option(SHOW_CHECKBOXES_MODE)) {
    if (selectionController.isSelectionWithCheckboxes()) {
      selectionController.stopSelectionWithCheckboxes();
    } else {
      selectionController.startSelectionWithCheckboxes();
    }
  } else {
    if ("onClick" === that.option(SHOW_CHECKBOXES_MODE)) {
      selectionController.startSelectionWithCheckboxes();
    }
    if ("always" !== that.option(SHOW_CHECKBOXES_MODE)) {
      selectionController.changeItemSelection(rowIndex, {
        control: true
      });
    }
  }
};
var isSeveralRowsSelected = function(that, selectionFilter) {
  var keyIndex = 0;
  var store = that._dataController.store();
  var key = store && store.key();
  var isComplexKey = Array.isArray(key);
  if (!selectionFilter.length) {
    return false;
  }
  if (isComplexKey && Array.isArray(selectionFilter[0]) && "and" === selectionFilter[1]) {
    for (var i = 0; i < selectionFilter.length; i++) {
      if (Array.isArray(selectionFilter[i])) {
        if (selectionFilter[i][0] !== key[keyIndex] || "=" !== selectionFilter[i][1]) {
          return true;
        }
        keyIndex++;
      }
    }
    return false;
  }
  return key !== selectionFilter[0];
};
var selectionCellTemplate = (container, options2) => {
  var {
    component
  } = options2;
  var rowsView17 = component.getView("rowsView");
  if (component.option("renderAsync") && !component.option("selection.deferred")) {
    options2.value = component.isRowSelected(options2.row.key);
  }
  rowsView17.renderSelectCheckBoxContainer(renderer_default(container), options2);
};
var selectionHeaderTemplate = (container, options2) => {
  var {
    column
  } = options2;
  var $cellElement = renderer_default(container);
  var columnHeadersView8 = options2.component.getView("columnHeadersView");
  $cellElement.addClass(EDITOR_CELL_CLASS);
  columnHeadersView8._renderSelectAllCheckBox($cellElement, column);
  columnHeadersView8._attachSelectAllCheckBoxClickEvent($cellElement);
};
var SelectionController = class extends m_modules_default.Controller {
  init() {
    var _a;
    var {
      deferred,
      selectAllMode,
      mode
    } = null !== (_a = this.option("selection")) && void 0 !== _a ? _a : {};
    if ("infinite" === this.option("scrolling.mode") && !deferred && "multiple" === mode && "allPages" === selectAllMode) {
      ui_errors_default.log("W1018");
    }
    this._dataController = this.getController("data");
    this._columnsController = this.getController("columns");
    this._stateStoringController = this.getController("stateStoring");
    this._selectionMode = mode;
    this._isSelectionWithCheckboxes = false;
    this._selection = this._createSelection();
    this._updateSelectColumn();
    this.createAction("onSelectionChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
    if (!this._dataPushedHandler) {
      this._dataPushedHandler = this._handleDataPushed.bind(this);
      this._dataController.pushed.add(this._dataPushedHandler);
    }
  }
  _handleDataPushed(changes) {
    this._deselectRemovedOnPush(changes);
    this._updateSelectedOnPush(changes);
  }
  _deselectRemovedOnPush(changes) {
    var isDeferredSelection = this.option("selection.deferred");
    var removedKeys = changes.filter((change) => "remove" === change.type).map((change) => change.key);
    if (isDeferredSelection) {
      var selectedKeys = this._dataController.items().filter((item) => item.isSelected).map((item) => item.key);
      removedKeys = removedKeys.filter((key) => selectedKeys.find((selectedKey) => equalByValue(selectedKey, key)));
    }
    removedKeys.length && this.deselectRows(removedKeys);
  }
  _updateSelectedOnPush(changes) {
    var isDeferredSelection = this.option("selection.deferred");
    if (isDeferredSelection) {
      return;
    }
    var updateChanges = changes.filter((change) => "update" === change.type);
    var data17 = this.getSelectedRowsData();
    applyBatch({
      keyInfo: this._selection.options,
      data: data17,
      changes: updateChanges
    });
  }
  _getSelectionConfig() {
    var _a;
    var dataController2 = this._dataController;
    var columnsController = this._columnsController;
    var selectionOptions = null !== (_a = this.option("selection")) && void 0 !== _a ? _a : {};
    var {
      deferred
    } = selectionOptions;
    var scrollingMode = this.option("scrolling.mode");
    var virtualPaging = "virtual" === scrollingMode || "infinite" === scrollingMode;
    var allowSelectAll = this.option("selection.allowSelectAll");
    var legacyScrollingMode = this.option("scrolling.legacyMode");
    return {
      selectedKeys: this.option("selectedRowKeys"),
      mode: this._selectionMode,
      deferred,
      alwaysSelectByShift: selectionOptions.alwaysSelectByShift,
      maxFilterLengthInRequest: selectionOptions.maxFilterLengthInRequest,
      selectionFilter: this.option("selectionFilter"),
      ignoreDisabledItems: true,
      isVirtualPaging: virtualPaging,
      allowLoadByRange() {
        var hasGroupColumns = columnsController.getGroupColumns().length > 0;
        return virtualPaging && !legacyScrollingMode && !hasGroupColumns && allowSelectAll && !deferred;
      },
      key: () => null === dataController2 || void 0 === dataController2 ? void 0 : dataController2.key(),
      keyOf: (item) => null === dataController2 || void 0 === dataController2 ? void 0 : dataController2.keyOf(item),
      dataFields() {
        var _a2;
        return null === (_a2 = dataController2.dataSource()) || void 0 === _a2 ? void 0 : _a2.select();
      },
      load(options2) {
        var _a2;
        return (null === (_a2 = dataController2.dataSource()) || void 0 === _a2 ? void 0 : _a2.load(options2)) || new Deferred().resolve([]);
      },
      plainItems: (cached) => dataController2.items(true),
      isItemSelected: (item) => item.selected,
      isSelectableItem: (item) => "data" === (null === item || void 0 === item ? void 0 : item.rowType) && !item.isNewRow,
      getItemData: (item) => isDefined(null === item || void 0 === item ? void 0 : item.rowType) ? (null === item || void 0 === item ? void 0 : item.oldData) || (null === item || void 0 === item ? void 0 : item.data) : item,
      filter: () => dataController2.getCombinedFilter(deferred),
      totalCount: () => dataController2.totalCount(),
      getLoadOptions(loadItemIndex, focusedItemIndex, shiftItemIndex) {
        var _a2, _b;
        var {
          sort,
          filter
        } = null !== (_b = null === (_a2 = dataController2.dataSource()) || void 0 === _a2 ? void 0 : _a2.lastLoadOptions()) && void 0 !== _b ? _b : {};
        var minIndex = Math.min(loadItemIndex, focusedItemIndex);
        var maxIndex = Math.max(loadItemIndex, focusedItemIndex);
        if (isDefined(shiftItemIndex)) {
          minIndex = Math.min(shiftItemIndex, minIndex);
          maxIndex = Math.max(shiftItemIndex, maxIndex);
        }
        var take = maxIndex - minIndex + 1;
        return {
          skip: minIndex,
          take,
          filter,
          sort
        };
      },
      onSelectionChanged: this._updateSelectedItems.bind(this)
    };
  }
  _updateSelectColumn() {
    var columnsController = this._columnsController;
    var isSelectColumnVisible = this.isSelectColumnVisible();
    columnsController.addCommandColumn({
      type: "selection",
      command: "select",
      visible: isSelectColumnVisible,
      visibleIndex: -1,
      dataType: "boolean",
      alignment: "center",
      cssClass: COMMAND_SELECT_CLASS,
      width: "auto",
      cellTemplate: selectionCellTemplate,
      headerCellTemplate: selectionHeaderTemplate
    });
    columnsController.columnOption("command:select", "visible", isSelectColumnVisible);
  }
  _createSelection() {
    var options2 = this._getSelectionConfig();
    return new Selection(options2);
  }
  _fireSelectionChanged(options2) {
    var argument = this.option("selection.deferred") ? {
      selectionFilter: this.option("selectionFilter")
    } : {
      selectedRowKeys: this.option("selectedRowKeys")
    };
    this.selectionChanged.fire(argument);
    if (options2) {
      this.executeAction("onSelectionChanged", options2);
    }
  }
  _updateCheckboxesState(options2) {
    var {
      isDeferredMode
    } = options2;
    var {
      selectionFilter
    } = options2;
    var {
      selectedItemKeys
    } = options2;
    var {
      removedItemKeys
    } = options2;
    if ("onClick" === this.option(SHOW_CHECKBOXES_MODE)) {
      if (isDeferredMode ? selectionFilter && isSeveralRowsSelected(this, selectionFilter) : selectedItemKeys.length > 1) {
        this.startSelectionWithCheckboxes();
      } else if (isDeferredMode ? selectionFilter && !selectionFilter.length : 0 === selectedItemKeys.length && removedItemKeys.length) {
        this.stopSelectionWithCheckboxes();
      }
    }
  }
  _updateSelectedItems(args) {
    var selectionChangedOptions;
    var isDeferredMode = this.option("selection.deferred");
    var selectionFilter = this._selection.selectionFilter();
    var dataController2 = this._dataController;
    var items = dataController2.items(true);
    var visibleItems = dataController2.items();
    if (!items) {
      return;
    }
    var isSelectionWithCheckboxes = this.isSelectionWithCheckboxes();
    var changedItemIndexes = this.getChangedItemIndexes(items);
    var visibleChangedItemIndexes = this.getChangedItemIndexes(visibleItems);
    this._updateCheckboxesState({
      selectedItemKeys: args.selectedItemKeys,
      removedItemKeys: args.removedItemKeys,
      selectionFilter,
      isDeferredMode
    });
    if (changedItemIndexes.length || isSelectionWithCheckboxes !== this.isSelectionWithCheckboxes()) {
      dataController2.updateItems({
        changeType: "updateSelection",
        itemIndexes: visibleChangedItemIndexes
      });
    }
    if (isDeferredMode) {
      this.option("selectionFilter", selectionFilter);
      selectionChangedOptions = {};
    } else if (args.addedItemKeys.length || args.removedItemKeys.length) {
      this._selectedItemsInternalChange = true;
      this.option("selectedRowKeys", args.selectedItemKeys.slice(0));
      this._selectedItemsInternalChange = false;
      selectionChangedOptions = {
        selectedRowsData: args.selectedItems.slice(0),
        selectedRowKeys: args.selectedItemKeys.slice(0),
        currentSelectedRowKeys: args.addedItemKeys.slice(0),
        currentDeselectedRowKeys: args.removedItemKeys.slice(0)
      };
    }
    this._fireSelectionChanged(selectionChangedOptions);
  }
  getChangedItemIndexes(items) {
    var itemIndexes = [];
    var isDeferredSelection = this.option("selection.deferred");
    for (var i = 0, {
      length
    } = items; i < length; i++) {
      var row = items[i];
      var isItemSelected = this.isRowSelected(isDeferredSelection ? row.data : row.key);
      if (this._selection.isDataItem(row) && row.isSelected !== isItemSelected) {
        itemIndexes.push(i);
      }
    }
    return itemIndexes;
  }
  callbackNames() {
    return ["selectionChanged"];
  }
  optionChanged(args) {
    super.optionChanged(args);
    switch (args.name) {
      case "selection":
        var oldSelectionMode = this._selectionMode;
        this.init();
        if ("selection.showCheckBoxesMode" !== args.fullName) {
          var selectionMode = this._selectionMode;
          var selectedRowKeys = this.option("selectedRowKeys");
          if (oldSelectionMode !== selectionMode) {
            if ("single" === selectionMode) {
              if (selectedRowKeys.length > 1) {
                selectedRowKeys = [selectedRowKeys[0]];
              }
            } else if ("multiple" !== selectionMode) {
              selectedRowKeys = [];
            }
          }
          this.selectRows(selectedRowKeys).always(() => {
            this._fireSelectionChanged();
          });
        }
        this._columnsController.updateColumns();
        args.handled = true;
        break;
      case "selectionFilter":
        this._selection.selectionFilter(args.value);
        args.handled = true;
        break;
      case "selectedRowKeys":
        var value2 = args.value || [];
        if (Array.isArray(value2) && !this._selectedItemsInternalChange && (this.component.getDataSource() || !value2.length)) {
          this.selectRows(value2);
        }
        args.handled = true;
    }
  }
  publicMethods() {
    return ["selectRows", "deselectRows", "selectRowsByIndexes", "getSelectedRowKeys", "getSelectedRowsData", "clearSelection", "selectAll", "deselectAll", "startSelectionWithCheckboxes", "stopSelectionWithCheckboxes", "isRowSelected"];
  }
  isRowSelected(arg) {
    return this._selection.isItemSelected(arg);
  }
  isSelectColumnVisible() {
    return "multiple" === this.option(SELECTION_MODE) && ("always" === this.option(SHOW_CHECKBOXES_MODE) || "onClick" === this.option(SHOW_CHECKBOXES_MODE) || this._isSelectionWithCheckboxes);
  }
  _isOnePageSelectAll() {
    return "page" === this.option("selection.selectAllMode");
  }
  isSelectAll() {
    return this._selection.getSelectAllState(this._isOnePageSelectAll());
  }
  selectAll() {
    if ("onClick" === this.option(SHOW_CHECKBOXES_MODE)) {
      this.startSelectionWithCheckboxes();
    }
    return this._selection.selectAll(this._isOnePageSelectAll());
  }
  deselectAll() {
    return this._selection.deselectAll(this._isOnePageSelectAll());
  }
  clearSelection() {
    return this.selectedItemKeys([]);
  }
  refresh() {
    var _a;
    var selectedRowKeys = null !== (_a = this.option("selectedRowKeys")) && void 0 !== _a ? _a : [];
    if (!this.option("selection.deferred") && selectedRowKeys.length) {
      return this.selectedItemKeys(selectedRowKeys);
    }
    return new Deferred().resolve().promise();
  }
  selectedItemKeys(value2, preserve, isDeselect, isSelectAll) {
    return this._selection.selectedItemKeys(value2, preserve, isDeselect, isSelectAll);
  }
  getSelectedRowKeys(mode) {
    return this._selection.getSelectedItemKeys();
  }
  selectRows(keys, preserve) {
    return this.selectedItemKeys(keys, preserve);
  }
  deselectRows(keys) {
    return this.selectedItemKeys(keys, true, true);
  }
  selectRowsByIndexes(indexes) {
    var items = this._dataController.items();
    var keys = [];
    if (!Array.isArray(indexes)) {
      indexes = Array.prototype.slice.call(arguments, 0);
    }
    each(indexes, function() {
      var item = items[this];
      if (item && "data" === item.rowType) {
        keys.push(item.key);
      }
    });
    return this.selectRows(keys);
  }
  getSelectedRowsData(mode) {
    return this._selection.getSelectedItems();
  }
  loadSelectedItemsWithFilter() {
    return this._selection.loadSelectedItemsWithFilter();
  }
  changeItemSelection(visibleItemIndex, keys, setFocusOnly) {
    keys = keys || {};
    if (this.isSelectionWithCheckboxes()) {
      keys.control = true;
    }
    var loadedItemIndex = visibleItemIndex + this._dataController.getRowIndexOffset() - this._dataController.getRowIndexOffset(true);
    return this._selection.changeItemSelection(loadedItemIndex, keys, setFocusOnly);
  }
  focusedItemIndex(itemIndex) {
    if (isDefined(itemIndex)) {
      this._selection._focusedItemIndex = itemIndex;
    } else {
      return this._selection._focusedItemIndex;
    }
    return;
  }
  isSelectionWithCheckboxes() {
    return "multiple" === this.option(SELECTION_MODE) && ("always" === this.option(SHOW_CHECKBOXES_MODE) || this._isSelectionWithCheckboxes);
  }
  startSelectionWithCheckboxes() {
    if ("multiple" === this.option(SELECTION_MODE) && !this.isSelectionWithCheckboxes()) {
      this._isSelectionWithCheckboxes = true;
      this._updateSelectColumn();
      return true;
    }
    return false;
  }
  stopSelectionWithCheckboxes() {
    if (this._isSelectionWithCheckboxes) {
      this._isSelectionWithCheckboxes = false;
      this._updateSelectColumn();
      return true;
    }
    return false;
  }
};
var dataSelectionExtenderMixin = (Base) => class extends Base {
  init() {
    var isDeferredMode = this.option("selection.deferred");
    super.init.apply(this, arguments);
    if (isDeferredMode) {
      this._selectionController._updateCheckboxesState({
        isDeferredMode: true,
        selectionFilter: this.option("selectionFilter")
      });
    }
  }
  _loadDataSource() {
    var that = this;
    return super._loadDataSource().always(() => {
      that._selectionController.refresh();
    });
  }
  _processDataItem(item, options2) {
    var hasSelectColumn = this._selectionController.isSelectColumnVisible();
    var isDeferredSelection = options2.isDeferredSelection = void 0 === options2.isDeferredSelection ? this.option("selection.deferred") : options2.isDeferredSelection;
    var dataItem = super._processDataItem.apply(this, arguments);
    dataItem.isSelected = this._selectionController.isRowSelected(isDeferredSelection ? dataItem.data : dataItem.key);
    if (hasSelectColumn && dataItem.values) {
      for (var i = 0; i < options2.visibleColumns.length; i++) {
        if ("select" === options2.visibleColumns[i].command) {
          dataItem.values[i] = dataItem.isSelected;
          break;
        }
      }
    }
    return dataItem;
  }
  refresh(options2) {
    var that = this;
    var d = new Deferred();
    super.refresh.apply(this, arguments).done(() => {
      if (!options2 || options2.selection) {
        that._selectionController.refresh().done(d.resolve).fail(d.reject);
      } else {
        d.resolve();
      }
    }).fail(d.reject);
    return d.promise();
  }
  _handleDataChanged(e) {
    var hasLoadOperation = this.hasLoadOperation();
    super._handleDataChanged.apply(this, arguments);
    if (hasLoadOperation && !this._repaintChangesOnly) {
      this._selectionController.focusedItemIndex(-1);
    }
  }
  _applyChange(change) {
    if (change && "updateSelection" === change.changeType) {
      change.items.forEach((item, index) => {
        var currentItem = this._items[index];
        if (currentItem) {
          currentItem.isSelected = item.isSelected;
          currentItem.values = item.values;
        }
      });
      return;
    }
    return super._applyChange.apply(this, arguments);
  }
  _endUpdateCore() {
    var changes = this._changes;
    var isUpdateSelection = changes.length > 1 && changes.every((change) => "updateSelection" === change.changeType);
    if (isUpdateSelection) {
      var itemIndexes = changes.map((change) => change.itemIndexes || []).reduce((a, b) => a.concat(b));
      this._changes = [{
        changeType: "updateSelection",
        itemIndexes
      }];
    }
    super._endUpdateCore.apply(this, arguments);
  }
};
var contextMenu = (Base) => class extends Base {
  _contextMenuPrepared(options2) {
    var dxEvent = options2.event;
    if (dxEvent.originalEvent && "dxhold" !== dxEvent.originalEvent.type || options2.items && options2.items.length > 0) {
      return;
    }
    processLongTap(this, dxEvent);
  }
};
var columnHeadersSelectionExtenderMixin = (Base) => class extends Base {
  init() {
    super.init();
    this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this));
  }
  _updateSelectAllValue() {
    var $element = this.element();
    var $editor = $element && $element.find(".".concat(SELECT_CHECKBOX_CLASS));
    if ($element && $editor.length && "multiple" === this.option("selection.mode")) {
      var selectAllValue = this._selectionController.isSelectAll();
      var hasSelection = false !== selectAllValue;
      var isVisible = this.option("selection.allowSelectAll") ? !this._dataController.isEmpty() : hasSelection;
      $editor.dxCheckBox("instance").option({
        visible: isVisible,
        value: selectAllValue
      });
    }
  }
  _handleDataChanged(e) {
    super._handleDataChanged(e);
    if (!e || "refresh" === e.changeType || e.repaintChangesOnly && "update" === e.changeType) {
      this.waitAsyncTemplates().done(() => {
        this._updateSelectAllValue();
      });
    }
  }
  _renderSelectAllCheckBox($container, column) {
    var that = this;
    var isEmptyData = that._dataController.isEmpty();
    var groupElement = renderer_default("<div>").appendTo($container).addClass(SELECT_CHECKBOX_CLASS);
    that.setAria("label", message_default.format("dxDataGrid-ariaSelectAll"), groupElement);
    that._editorFactoryController.createEditor(groupElement, extend({}, column, {
      parentType: "headerRow",
      dataType: "boolean",
      value: this._selectionController.isSelectAll(),
      editorOptions: {
        visible: !isEmptyData && (that.option("selection.allowSelectAll") || false !== this._selectionController.isSelectAll())
      },
      tabIndex: that.option("useLegacyKeyboardNavigation") ? -1 : that.option("tabIndex") || 0,
      setValue: (value2, e) => {
        var allowSelectAll = that.option("selection.allowSelectAll");
        e.component.option("visible", allowSelectAll || false !== e.component.option("value"));
        if (!e.event || this._selectionController.isSelectAll() === value2) {
          return;
        }
        if (e.value && !allowSelectAll) {
          e.component.option("value", false);
        } else {
          e.value ? this._selectionController.selectAll() : this._selectionController.deselectAll();
        }
        e.event.preventDefault();
      }
    }));
    return groupElement;
  }
  _attachSelectAllCheckBoxClickEvent($element) {
    events_engine_default.on($element, CLICK_EVENT_NAME, this.createAction((e) => {
      var {
        event
      } = e;
      if (!renderer_default(event.target).closest(".".concat(SELECT_CHECKBOX_CLASS)).length) {
        events_engine_default.trigger(renderer_default(event.currentTarget).children(".".concat(SELECT_CHECKBOX_CLASS)), CLICK_EVENT_NAME);
      }
      event.preventDefault();
    }));
  }
};
var rowsViewSelectionExtenderMixin = (Base) => class extends Base {
  renderSelectCheckBoxContainer($container, options2) {
    if ("data" === options2.rowType && !options2.row.isNewRow) {
      $container.addClass(EDITOR_CELL_CLASS);
      this._attachCheckBoxClickEvent($container);
      this._renderSelectCheckBox($container, options2);
    } else {
      m_utils_default.setEmptyText($container);
    }
  }
  _renderSelectCheckBox(container, options2) {
    var groupElement = renderer_default("<div>").addClass(SELECT_CHECKBOX_CLASS).appendTo(container);
    this.setAria("label", message_default.format("dxDataGrid-ariaSelectRow"), groupElement);
    this._editorFactoryController.createEditor(groupElement, extend({}, options2.column, {
      parentType: "dataRow",
      dataType: "boolean",
      lookup: null,
      value: options2.value,
      setValue(value2, e) {
        var _a;
        if ("keydown" === (null === (_a = null === e || void 0 === e ? void 0 : e.event) || void 0 === _a ? void 0 : _a.type)) {
          events_engine_default.trigger(e.element, CLICK_EVENT_NAME, e);
        }
      },
      row: options2.row
    }));
    return groupElement;
  }
  _attachCheckBoxClickEvent($element) {
    events_engine_default.on($element, CLICK_EVENT_NAME, this.createAction(function(e) {
      var {
        event
      } = e;
      var rowIndex = this.getRowIndex(renderer_default(event.currentTarget).closest(".".concat(ROW_CLASS2)));
      if (rowIndex >= 0) {
        this._selectionController.startSelectionWithCheckboxes();
        this._selectionController.changeItemSelection(rowIndex, {
          shift: event.shiftKey
        });
        if (renderer_default(event.target).closest(".".concat(SELECT_CHECKBOX_CLASS)).length) {
          this._dataController.updateItems({
            changeType: "updateSelection",
            itemIndexes: [rowIndex]
          });
        }
      }
    }));
  }
  _update(change) {
    var that = this;
    var tableElements = that.getTableElements();
    if ("updateSelection" === change.changeType) {
      if (tableElements.length > 0) {
        each(tableElements, (_, tableElement) => {
          each(change.itemIndexes || [], (_2, index) => {
            var $row;
            if (change.items[index]) {
              $row = that._getRowElements(renderer_default(tableElement)).eq(index);
              if ($row.length) {
                var {
                  isSelected
                } = change.items[index];
                $row.toggleClass(ROW_SELECTION_CLASS, void 0 === isSelected ? false : isSelected).find(".".concat(SELECT_CHECKBOX_CLASS)).dxCheckBox("option", "value", isSelected);
                that.setAria("selected", isSelected, $row);
              }
            }
          });
        });
        that._updateCheckboxesClass();
      }
    } else {
      super._update(change);
    }
  }
  _createTable() {
    var that = this;
    var selectionMode = that.option("selection.mode");
    var $table = super._createTable.apply(that, arguments);
    if ("none" !== selectionMode) {
      if ("onLongTap" === that.option(SHOW_CHECKBOXES_MODE) || !touch) {
        events_engine_default.on($table, addNamespace(hold_default.name, "dxDataGridRowsView"), ".".concat(DATA_ROW_CLASS2), that.createAction((e) => {
          processLongTap(that.component, e.event);
          e.event.stopPropagation();
        }));
      }
      events_engine_default.on($table, "mousedown selectstart", that.createAction((e) => {
        var {
          event
        } = e;
        if (event.shiftKey) {
          event.preventDefault();
        }
      }));
    }
    return $table;
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row) {
      var {
        isSelected
      } = row;
      if (isSelected) {
        $row.addClass(ROW_SELECTION_CLASS);
      }
      var selectionMode = this.option(SELECTION_MODE);
      if ("none" !== selectionMode) {
        this.setAria("selected", isSelected, $row);
      }
    }
    return $row;
  }
  _rowClickForTreeList(e) {
    super._rowClick(e);
  }
  _rowClick(e) {
    var dxEvent = e.event;
    var isSelectionDisabled = renderer_default(dxEvent.target).closest(".".concat(SELECTION_DISABLED_CLASS)).length;
    if (!this.isClickableElement(renderer_default(dxEvent.target))) {
      if (!isSelectionDisabled && ("multiple" !== this.option(SELECTION_MODE) || "always" !== this.option(SHOW_CHECKBOXES_MODE))) {
        if (this._selectionController.changeItemSelection(e.rowIndex, {
          control: isCommandKeyPressed(dxEvent),
          shift: dxEvent.shiftKey
        })) {
          dxEvent.preventDefault();
          e.handled = true;
        }
      }
      super._rowClick(e);
    }
  }
  isClickableElement($target) {
    var isCommandSelect = $target.closest(".".concat(COMMAND_SELECT_CLASS)).length;
    return !!isCommandSelect;
  }
  _renderCore(change) {
    var deferred = super._renderCore(change);
    this._updateCheckboxesClass();
    return deferred;
  }
  _updateCheckboxesClass() {
    var tableElements = this.getTableElements();
    var isCheckBoxesHidden = this._selectionController.isSelectColumnVisible() && !this._selectionController.isSelectionWithCheckboxes();
    each(tableElements, (_, tableElement) => {
      renderer_default(tableElement).toggleClass(CHECKBOXES_HIDDEN_CLASS, isCheckBoxesHidden);
    });
  }
};
var selectionModule = {
  defaultOptions: () => ({
    selection: {
      mode: "none",
      showCheckBoxesMode: "onClick",
      allowSelectAll: true,
      selectAllMode: "allPages",
      deferred: false,
      maxFilterLengthInRequest: 1500,
      alwaysSelectByShift: false
    },
    selectionFilter: [],
    selectedRowKeys: []
  }),
  controllers: {
    selection: SelectionController
  },
  extenders: {
    controllers: {
      data: dataSelectionExtenderMixin,
      contextMenu
    },
    views: {
      columnHeadersView: columnHeadersSelectionExtenderMixin,
      rowsView: rowsViewSelectionExtenderMixin
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/selection.js
m_core_default.registerModule("selection", selectionModule);

// node_modules/devextreme/esm/renovation/utils/dom.js
function querySelectorInSameDocument(el, selector) {
  var _el$getRootNode, _el$getRootNode2;
  var root = null !== (_el$getRootNode = null === (_el$getRootNode2 = el.getRootNode) || void 0 === _el$getRootNode2 ? void 0 : _el$getRootNode2.call(el)) && void 0 !== _el$getRootNode ? _el$getRootNode : document;
  return root.querySelector(selector);
}

// node_modules/devextreme/esm/renovation/component_wrapper/editors/editor.js
var INVALID_MESSAGE_AUTO3 = "dx-invalid-message-auto";
var VALIDATION_TARGET2 = "dx-validation-target";
var Editor2 = class extends ComponentWrapper {
  getProps() {
    var props = super.getProps();
    props.onFocusIn = () => {
      var isValidationMessageShownOnFocus = "auto" === this.option("validationMessageMode");
      if (isValidationMessageShownOnFocus) {
        var $validationMessageWrapper = renderer_default(querySelectorInSameDocument(this.element(), ".dx-invalid-message.dx-overlay-wrapper"));
        null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.removeClass(INVALID_MESSAGE_AUTO3);
        if (this.showValidationMessageTimeout) {
          clearTimeout(this.showValidationMessageTimeout);
        }
        this.showValidationMessageTimeout = setTimeout(() => {
          null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.addClass(INVALID_MESSAGE_AUTO3);
        }, 150);
      }
    };
    props.saveValueChangeEvent = (e) => {
      this._valueChangeEventInstance = e;
    };
    return props;
  }
  _createElement(element) {
    super._createElement(element);
    this.showValidationMessageTimeout = void 0;
    this.validationRequest = callbacks_default();
    data(this.$element()[0], VALIDATION_TARGET2, this);
  }
  _render() {
    var _this$option;
    null === (_this$option = this.option("_onMarkupRendered")) || void 0 === _this$option ? void 0 : _this$option();
  }
  _init() {
    super._init();
    this._initialValue = this.option("value");
  }
  _initializeComponent() {
    super._initializeComponent();
    this._valueChangeAction = this._createActionByOption("onValueChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
  }
  _initOptions(options2) {
    super._initOptions(options2);
    this.option(validation_engine_default.initValidationOptions(options2));
  }
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      validationMessageOffset: {
        h: 0,
        v: 0
      },
      validationTooltipOptions: {}
    });
  }
  _bindInnerWidgetOptions(innerWidget, optionsContainer) {
    var innerWidgetOptions = extend({}, innerWidget.option());
    var syncOptions = () => this._silent(optionsContainer, innerWidgetOptions);
    syncOptions();
    innerWidget.on("optionChanged", syncOptions);
  }
  _raiseValidation(value2, previousValue) {
    var areValuesEmpty = !isDefined(value2) && !isDefined(previousValue);
    if (value2 !== previousValue && !areValuesEmpty) {
      this.validationRequest.fire({
        value: value2,
        editor: this
      });
    }
  }
  _raiseValueChangeAction(value2, previousValue) {
    var _this$_valueChangeAct;
    null === (_this$_valueChangeAct = this._valueChangeAction) || void 0 === _this$_valueChangeAct ? void 0 : _this$_valueChangeAct.call(this, {
      element: this.$element(),
      previousValue,
      value: value2,
      event: this._valueChangeEventInstance
    });
    this._valueChangeEventInstance = void 0;
  }
  _optionChanged(option) {
    var {
      name: name2,
      previousValue,
      value: value2
    } = option;
    if (name2 && void 0 !== this._getActionConfigs()[name2]) {
      this._addAction(name2);
    }
    switch (name2) {
      case "value":
        this._raiseValidation(value2, previousValue);
        this.option("isDirty", this._initialValue !== value2);
        this._raiseValueChangeAction(value2, previousValue);
        break;
      case "onValueChanged":
        this._valueChangeAction = this._createActionByOption("onValueChanged", {
          excludeValidators: ["disabled", "readOnly"]
        });
        break;
      case "isValid":
      case "validationError":
      case "validationErrors":
      case "validationStatus":
        this.option(validation_engine_default.synchronizeValidationOptions(option, this.option()));
    }
    super._optionChanged(option);
  }
  clear() {
    var {
      value: value2
    } = this._getDefaultOptions();
    this.option({
      value: value2
    });
  }
  reset() {
    var value2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0;
    if (arguments.length) {
      this._initialValue = value2;
    }
    this.option("value", this._initialValue);
    this.option("isDirty", false);
    this.option("isValid", true);
  }
  _dispose() {
    super._dispose();
    data(this.element(), VALIDATION_TARGET2, null);
    if (this.showValidationMessageTimeout) {
      clearTimeout(this.showValidationMessageTimeout);
    }
  }
};
var prevIsEditor = editor_default.isEditor;
var newIsEditor = (instance) => prevIsEditor(instance) || instance instanceof Editor2;
Editor2.isEditor = newIsEditor;
editor_default.isEditor = newIsEditor;

// node_modules/devextreme/esm/renovation/component_wrapper/editors/check_box.js
var CheckBox = class extends Editor2 {
  _useTemplates() {
    return false;
  }
  _isFocused() {
    var focusTarget = this.$element()[0];
    return focusTarget.classList.contains("dx-state-focused");
  }
  getSupportedKeyNames() {
    return ["space"];
  }
  getProps() {
    var props = super.getProps();
    if (null !== props.value) {
      props.value = Boolean(props.value);
    }
    return props;
  }
};

// node_modules/devextreme/esm/renovation/ui/common/utils/get_updated_options.js
var defaultNotDeepCopyArrays = ["dataSource", "selectedRowKeys"];
var propsToIgnore = {
  integrationOptions: true
};
function getDiffItem(key, value2, previousValue) {
  return {
    path: key,
    value: value2,
    previousValue
  };
}
function compare2(resultPaths, item1, item2, key, fullPropName, notDeepCopyArrays) {
  if (propsToIgnore[key]) {
    return;
  }
  var type1 = type(item1);
  var type2 = type(item2);
  if (item1 === item2) {
    return;
  }
  if (type1 !== type2) {
    resultPaths.push(getDiffItem(key, item2, item1));
  } else if ("object" === type1) {
    if (!isPlainObject(item2)) {
      resultPaths.push(getDiffItem(key, item2, item1));
    } else {
      var diffPaths = objectDiffs(item1, item2, fullPropName, notDeepCopyArrays);
      resultPaths.push(...diffPaths.map((item) => _extends({}, item, {
        path: "".concat(key, ".").concat(item.path)
      })));
    }
  } else if ("array" === type1) {
    var notDeepCopy = notDeepCopyArrays.some((prop) => fullPropName.includes(prop));
    if (notDeepCopy && item1 !== item2) {
      resultPaths.push(getDiffItem(key, item2, item1));
    } else if (item1.length !== item2.length) {
      resultPaths.push(getDiffItem(key, item2, item1));
    } else {
      var _diffPaths = objectDiffs(item1, item2, fullPropName, notDeepCopyArrays);
      [].push.apply(resultPaths, _diffPaths.map((item) => _extends({}, item, {
        path: "".concat(key).concat(item.path)
      })));
    }
  } else {
    resultPaths.push(getDiffItem(key, item2, item1));
  }
}
var objectDiffsFiltered = (propsEnumerator) => (oldProps, props, fullPropName, notDeepCopyArrays) => {
  var resultPaths = [];
  var processItem = !Array.isArray(oldProps) ? (propName) => {
    compare2(resultPaths, oldProps[propName], props[propName], propName, "".concat(fullPropName, ".").concat(propName), notDeepCopyArrays);
  } : (propName) => {
    compare2(resultPaths, oldProps[propName], props[propName], "[".concat(propName, "]"), "".concat(fullPropName, ".").concat(propName), notDeepCopyArrays);
  };
  propsEnumerator(oldProps).forEach(processItem);
  Object.keys(props).filter((propName) => !Object.prototype.hasOwnProperty.call(oldProps, propName) && oldProps[propName] !== props[propName]).forEach((propName) => {
    resultPaths.push({
      path: propName,
      value: props[propName],
      previousValue: oldProps[propName]
    });
  });
  return resultPaths;
};
var objectDiffs = objectDiffsFiltered((oldProps) => Object.keys(oldProps));
var reactProps = {
  key: true,
  ref: true,
  children: true,
  style: true
};
var objectDiffsWithoutReactProps = objectDiffsFiltered((prop) => Object.keys(prop).filter((p2) => !reactProps[p2]));
function getUpdatedOptions(oldProps, props) {
  var notDeepCopyArrays = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : defaultNotDeepCopyArrays;
  return objectDiffsWithoutReactProps(oldProps, props, "", notDeepCopyArrays);
}

// node_modules/devextreme/esm/renovation/ui/common/dom_component_wrapper.js
var _excluded7 = ["valueChange"];
var _excluded22 = ["componentProps", "componentType", "templateNames"];
var normalizeProps2 = (props) => Object.keys(props).reduce((accumulator, key) => {
  if (void 0 !== props[key]) {
    accumulator[key] = props[key];
  }
  return accumulator;
}, {});
var viewFunction6 = (_ref) => {
  var {
    props: {
      componentProps: {
        className
      }
    },
    restAttributes,
    widgetRef
  } = _ref;
  return normalizeProps2(createVNode(1, "div", className, null, 1, _extends({}, restAttributes), null, widgetRef));
};
var DomComponentWrapperProps = {};
var DomComponentWrapper = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.widgetRef = createRef();
    this.getInstance = this.getInstance.bind(this);
    this.setupWidget = this.setupWidget.bind(this);
    this.updateWidget = this.updateWidget.bind(this);
  }
  get config() {
    if (this.context[ConfigContext.id]) {
      return this.context[ConfigContext.id];
    }
    return ConfigContext.defaultValue;
  }
  createEffects() {
    return [new InfernoEffect(this.setupWidget, []), new InfernoEffect(this.updateWidget, [this.props.componentProps, this.config, this.props.templateNames])];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[1]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.componentProps, this.config, this.props.templateNames]);
  }
  setupWidget() {
    var componentInstance = new this.props.componentType(this.widgetRef.current, this.properties);
    this.instance = componentInstance;
    return () => {
      componentInstance.dispose();
      this.instance = null;
    };
  }
  updateWidget() {
    var instance = this.getInstance();
    if (!instance) {
      return;
    }
    var updatedOptions = getUpdatedOptions(this.prevProps || {}, this.properties);
    if (updatedOptions.length) {
      instance.beginUpdate();
      updatedOptions.forEach((_ref2) => {
        var {
          path,
          value: value2
        } = _ref2;
        instance.option(path, value2);
      });
      instance.endUpdate();
    }
    this.prevProps = this.properties;
  }
  get properties() {
    var _this$config;
    var normalizedProps = normalizeProps2(this.props.componentProps);
    var {
      valueChange
    } = normalizedProps, restProps = _objectWithoutPropertiesLoose(normalizedProps, _excluded7);
    var properties = _extends({
      rtlEnabled: !!(null !== (_this$config = this.config) && void 0 !== _this$config && _this$config.rtlEnabled),
      isRenovated: true
    }, restProps);
    if (valueChange) {
      properties.onValueChanged = (_ref3) => {
        var {
          value: value2
        } = _ref3;
        return valueChange(value2);
      };
    }
    var templates = this.props.templateNames;
    templates.forEach((name2) => {
      if (hasTemplate(name2, properties, this)) {
        properties[name2] = (item, index, container) => {
          renderTemplate(this.props.componentProps[name2], {
            item,
            index,
            container
          }, this);
        };
      }
    });
    return properties;
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded22);
    return restProps;
  }
  getInstance() {
    return this.instance;
  }
  render() {
    var props = this.props;
    return viewFunction6({
      props: _extends({}, props),
      widgetRef: this.widgetRef,
      config: this.config,
      properties: this.properties,
      restAttributes: this.restAttributes
    });
  }
};
DomComponentWrapper.defaultProps = DomComponentWrapperProps;

// node_modules/devextreme/esm/renovation/ui/overlays/validation_message.js
var _excluded8 = ["accessKey", "activeStateEnabled", "boundary", "className", "contentId", "disabled", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "mode", "offset", "onClick", "onKeyDown", "positionSide", "rtlEnabled", "tabIndex", "target", "validationErrors", "visible", "visualContainer", "width"];
var viewFunction7 = (_ref) => {
  var {
    componentProps,
    restAttributes
  } = _ref;
  return normalizeProps(createComponentVNode(2, DomComponentWrapper, _extends({
    componentType: validation_message_default,
    componentProps,
    templateNames: []
  }, restAttributes)));
};
var ValidationMessageProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BaseWidgetProps), Object.getOwnPropertyDescriptors({
  mode: "auto",
  positionSide: "top",
  offset: Object.freeze({
    h: 0,
    v: 0
  }),
  isReactComponentWrapper: true
})));
var ValidationMessage2 = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
  }
  get componentProps() {
    return this.props;
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded8);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction7({
      props: _extends({}, props),
      componentProps: this.componentProps,
      restAttributes: this.restAttributes
    });
  }
};
ValidationMessage2.defaultProps = ValidationMessageProps;

// node_modules/devextreme/esm/renovation/ui/editors/common/editor.js
var _excluded9 = ["accessKey", "activeStateEnabled", "aria", "children", "className", "classes", "defaultValue", "disabled", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "inputAttr", "isDirty", "isValid", "name", "onClick", "onFocusIn", "onKeyDown", "readOnly", "rtlEnabled", "tabIndex", "validationError", "validationErrors", "validationMessageMode", "validationMessagePosition", "validationStatus", "value", "valueChange", "visible", "width"];
var getCssClasses2 = (model) => {
  var {
    classes,
    isValid,
    readOnly
  } = model;
  var classesMap = {
    "dx-state-readonly": !!readOnly,
    "dx-invalid": !isValid,
    ["".concat(classes)]: !!classes
  };
  return combineClasses(classesMap);
};
var viewFunction8 = (viewModel) => {
  var {
    aria,
    cssClasses: classes,
    isValidationMessageVisible,
    onFocusIn,
    props: {
      accessKey,
      activeStateEnabled,
      children,
      className,
      disabled,
      focusStateEnabled,
      height,
      hint,
      hoverStateEnabled,
      onClick,
      onKeyDown,
      rtlEnabled,
      tabIndex,
      validationMessageMode,
      validationMessagePosition,
      visible,
      width
    },
    restAttributes,
    rootElementRef,
    validationErrors,
    validationMessageGuid,
    validationMessageTarget,
    widgetRef
  } = viewModel;
  return normalizeProps(createComponentVNode(2, Widget, _extends({
    rootElementRef,
    aria,
    classes,
    activeStateEnabled,
    focusStateEnabled,
    hoverStateEnabled,
    accessKey,
    className,
    rtlEnabled,
    hint,
    disabled,
    height,
    width,
    onFocusIn,
    onClick,
    onKeyDown,
    tabIndex,
    visible
  }, restAttributes, {
    children: createFragment([children, isValidationMessageVisible && createComponentVNode(2, ValidationMessage2, {
      validationErrors,
      mode: validationMessageMode,
      positionSide: validationMessagePosition,
      rtlEnabled,
      target: validationMessageTarget,
      boundary: validationMessageTarget,
      visualContainer: validationMessageTarget,
      contentId: validationMessageGuid
    })], 0)
  }), null, widgetRef));
};
var EditorProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BaseWidgetProps), Object.getOwnPropertyDescriptors({
  readOnly: false,
  name: "",
  validationError: null,
  validationErrors: null,
  validationMessageMode: "auto",
  validationMessagePosition: "bottom",
  validationStatus: "valid",
  isValid: true,
  isDirty: false,
  inputAttr: Object.freeze({}),
  defaultValue: null,
  valueChange: () => {
  }
})));
var EditorPropsType = {
  get readOnly() {
    return EditorProps.readOnly;
  },
  get name() {
    return EditorProps.name;
  },
  get validationError() {
    return EditorProps.validationError;
  },
  get validationErrors() {
    return EditorProps.validationErrors;
  },
  get validationMessageMode() {
    return EditorProps.validationMessageMode;
  },
  get validationMessagePosition() {
    return EditorProps.validationMessagePosition;
  },
  get validationStatus() {
    return EditorProps.validationStatus;
  },
  get isValid() {
    return EditorProps.isValid;
  },
  get isDirty() {
    return EditorProps.isDirty;
  },
  get inputAttr() {
    return EditorProps.inputAttr;
  },
  get defaultValue() {
    return EditorProps.defaultValue;
  },
  get valueChange() {
    return EditorProps.valueChange;
  },
  get className() {
    return EditorProps.className;
  },
  get activeStateEnabled() {
    return EditorProps.activeStateEnabled;
  },
  get disabled() {
    return EditorProps.disabled;
  },
  get focusStateEnabled() {
    return EditorProps.focusStateEnabled;
  },
  get hoverStateEnabled() {
    return EditorProps.hoverStateEnabled;
  },
  get tabIndex() {
    return EditorProps.tabIndex;
  },
  get visible() {
    return EditorProps.visible;
  },
  get aria() {
    return WidgetProps.aria;
  },
  get classes() {
    return WidgetProps.classes;
  }
};
var Editor3 = class extends InfernoWrapperComponent {
  constructor(props) {
    super(props);
    this.widgetRef = createRef();
    this.rootElementRef = createRef();
    this.__getterCache = {};
    this.state = {
      validationMessageGuid: "dx-".concat(new guid_default()),
      isValidationMessageVisible: false,
      value: void 0 !== this.props.value ? this.props.value : this.props.defaultValue
    };
    this.updateValidationMessageVisibility = this.updateValidationMessageVisibility.bind(this);
    this.focus = this.focus.bind(this);
    this.blur = this.blur.bind(this);
    this.onFocusIn = this.onFocusIn.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.updateValidationMessageVisibility, [this.props.isValid, this.props.validationStatus, this.props.validationError, this.props.validationErrors]), createReRenderEffect()];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.isValid, this.props.validationStatus, this.props.validationError, this.props.validationErrors]);
  }
  updateValidationMessageVisibility() {
    this.setState((__state_argument) => ({
      isValidationMessageVisible: this.shouldShowValidationMessage
    }));
  }
  onFocusIn(event) {
    var {
      onFocusIn
    } = this.props;
    null === onFocusIn || void 0 === onFocusIn ? void 0 : onFocusIn(event);
  }
  get cssClasses() {
    return "".concat(getCssClasses2(_extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    })));
  }
  get shouldShowValidationMessage() {
    var _this$validationError;
    var {
      isValid,
      validationStatus
    } = this.props;
    var validationErrors = null !== (_this$validationError = this.validationErrors) && void 0 !== _this$validationError ? _this$validationError : [];
    var isEditorValid = isValid && "invalid" !== validationStatus;
    return !isEditorValid && validationErrors.length > 0;
  }
  get aria() {
    var {
      isValid,
      readOnly
    } = this.props;
    var result2 = {
      readonly: readOnly ? "true" : "false",
      invalid: !isValid ? "true" : "false"
    };
    if (this.shouldShowValidationMessage) {
      result2.describedBy = this.state.validationMessageGuid;
    }
    return _extends({}, result2, this.props.aria);
  }
  get validationErrors() {
    if (void 0 !== this.__getterCache.validationErrors) {
      return this.__getterCache.validationErrors;
    }
    return this.__getterCache.validationErrors = (() => {
      var {
        validationError,
        validationErrors
      } = this.props;
      var allValidationErrors = validationErrors && [...validationErrors];
      if (!allValidationErrors && validationError) {
        allValidationErrors = [_extends({}, validationError)];
      }
      return allValidationErrors;
    })();
  }
  get validationMessageTarget() {
    var _this$rootElementRef;
    return null === (_this$rootElementRef = this.rootElementRef) || void 0 === _this$rootElementRef ? void 0 : _this$rootElementRef.current;
  }
  get restAttributes() {
    var _this$props$value = _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    }), restProps = _objectWithoutPropertiesLoose(_this$props$value, _excluded9);
    return restProps;
  }
  focus() {
    this.widgetRef.current.focus();
  }
  blur() {
    this.widgetRef.current.blur();
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props.validationError !== nextProps.validationError || this.props.validationErrors !== nextProps.validationErrors) {
      this.__getterCache.validationErrors = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction8({
      props: _extends({}, props, {
        value: void 0 !== this.props.value ? this.props.value : this.state.value
      }),
      validationMessageGuid: this.state.validationMessageGuid,
      isValidationMessageVisible: this.state.isValidationMessageVisible,
      rootElementRef: this.rootElementRef,
      widgetRef: this.widgetRef,
      onFocusIn: this.onFocusIn,
      cssClasses: this.cssClasses,
      shouldShowValidationMessage: this.shouldShowValidationMessage,
      aria: this.aria,
      validationErrors: this.validationErrors,
      validationMessageTarget: this.validationMessageTarget,
      restAttributes: this.restAttributes
    });
  }
};
Editor3.defaultProps = EditorPropsType;

// node_modules/devextreme/esm/renovation/utils/get_computed_style.js
function getElementComputedStyle(el) {
  var _window$getComputedSt;
  var window15 = getWindow();
  return el ? null === (_window$getComputedSt = window15.getComputedStyle) || void 0 === _window$getComputedSt ? void 0 : _window$getComputedSt.call(window15, el) : null;
}

// node_modules/devextreme/esm/renovation/ui/editors/check_box/utils.js
var defaultIconSizes = [
  [22, 16],
  [18, 16]
];
var defaultFontSizes = [
  [
    [12, 8],
    [20, 18]
  ],
  [
    [16, 10],
    [16, 14]
  ]
];
function getThemeType() {
  var theme = current();
  return {
    isMaterialTheme: isMaterial(theme),
    isCompactTheme: isCompact(theme)
  };
}
function getDefaultIconSize() {
  var {
    isCompactTheme,
    isMaterialTheme
  } = getThemeType();
  return defaultIconSizes[+isMaterialTheme][+isCompactTheme];
}
function getDefaultFontSize(isChecked) {
  var {
    isCompactTheme,
    isMaterialTheme
  } = getThemeType();
  return defaultFontSizes[+isChecked][+isMaterialTheme][+isCompactTheme];
}
function getFontSizeByIconSize(iconSize, isChecked) {
  var defaultFontSize = getDefaultFontSize(isChecked);
  var defaultIconSize = getDefaultIconSize();
  var fontToIconSizeRatio = defaultFontSize / defaultIconSize;
  return Math.ceil(fontToIconSizeRatio * iconSize);
}

// node_modules/devextreme/esm/renovation/ui/editors/check_box/check_box_icon.js
var _excluded10 = ["isChecked", "size"];
var viewFunction9 = (viewModel) => {
  var {
    cssStyles,
    elementRef
  } = viewModel;
  return createVNode(1, "span", "dx-checkbox-icon", null, 1, {
    style: normalizeStyles(cssStyles)
  }, null, elementRef);
};
var CheckBoxIconProps = {
  isChecked: false
};
var CheckBoxIcon = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.elementRef = createRef();
    this.__getterCache = {};
    this.updateFontSize = this.updateFontSize.bind(this);
    this.setIconFontSize = this.setIconFontSize.bind(this);
    this.getIconSize = this.getIconSize.bind(this);
    this.getComputedIconSize = this.getComputedIconSize.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.updateFontSize, [this.props.isChecked, this.props.size])];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.isChecked, this.props.size]);
  }
  updateFontSize() {
    var {
      isChecked,
      size
    } = this.props;
    if (hasWindow() && size) {
      var newIconSize = this.getIconSize(size);
      var newFontSize = getFontSizeByIconSize(newIconSize, isChecked);
      this.setIconFontSize(newFontSize);
    }
  }
  setIconFontSize(fontSize) {
    var element = this.elementRef.current;
    element.style.fontSize = "".concat(fontSize, "px");
  }
  getIconSize(size) {
    if (isNumeric(size)) {
      return size;
    }
    if (size.endsWith("px")) {
      return parseInt(size, 10);
    }
    return this.getComputedIconSize();
  }
  getComputedIconSize() {
    var element = this.elementRef.current;
    var iconComputedStyle = getElementComputedStyle(element);
    var computedIconSize = parseInt(null === iconComputedStyle || void 0 === iconComputedStyle ? void 0 : iconComputedStyle.width, 10);
    return computedIconSize;
  }
  get cssStyles() {
    if (void 0 !== this.__getterCache.cssStyles) {
      return this.__getterCache.cssStyles;
    }
    return this.__getterCache.cssStyles = (() => {
      var {
        size
      } = this.props;
      var width = normalizeStyleProp("width", size);
      var height = normalizeStyleProp("height", size);
      return {
        height,
        width
      };
    })();
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded10);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props.size !== nextProps.size) {
      this.__getterCache.cssStyles = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction9({
      props: _extends({}, props),
      elementRef: this.elementRef,
      setIconFontSize: this.setIconFontSize,
      getIconSize: this.getIconSize,
      getComputedIconSize: this.getComputedIconSize,
      cssStyles: this.cssStyles,
      restAttributes: this.restAttributes
    });
  }
};
CheckBoxIcon.defaultProps = CheckBoxIconProps;

// node_modules/devextreme/esm/renovation/ui/editors/check_box/check_box.js
var _excluded11 = ["accessKey", "activeStateEnabled", "aria", "className", "defaultValue", "disabled", "enableThreeStateBehavior", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "iconSize", "inputAttr", "isDirty", "isValid", "name", "onClick", "onFocusIn", "onKeyDown", "readOnly", "rtlEnabled", "saveValueChangeEvent", "tabIndex", "text", "validationError", "validationErrors", "validationMessageMode", "validationMessagePosition", "validationStatus", "value", "valueChange", "visible", "width"];
var getCssClasses3 = (model) => {
  var {
    text,
    value: value2
  } = model;
  var checked = value2;
  var indeterminate = null === checked;
  var classesMap = {
    "dx-checkbox": true,
    "dx-checkbox-checked": true === checked,
    "dx-checkbox-has-text": !!text,
    "dx-checkbox-indeterminate": indeterminate
  };
  return combineClasses(classesMap);
};
var viewFunction10 = (viewModel) => {
  var {
    aria,
    cssClasses: classes,
    editorRef,
    keyDown: onKeyDown,
    onWidgetClick: onClick,
    props: {
      accessKey,
      activeStateEnabled,
      className,
      disabled,
      focusStateEnabled,
      height,
      hint,
      hoverStateEnabled,
      iconSize,
      isValid,
      name: name2,
      onFocusIn,
      readOnly,
      rtlEnabled,
      tabIndex,
      text,
      validationError,
      validationErrors,
      validationMessageMode,
      validationMessagePosition,
      validationStatus,
      value: value2,
      visible,
      width
    },
    restAttributes
  } = viewModel;
  return normalizeProps(createComponentVNode(2, Editor3, _extends({
    aria,
    classes,
    onClick,
    onKeyDown,
    accessKey,
    activeStateEnabled,
    focusStateEnabled,
    hoverStateEnabled,
    className,
    disabled,
    readOnly,
    hint,
    height,
    width,
    rtlEnabled,
    tabIndex,
    visible,
    validationError,
    validationErrors,
    validationMessageMode,
    validationMessagePosition,
    validationStatus,
    isValid,
    onFocusIn
  }, restAttributes, {
    children: createFragment([normalizeProps(createVNode(64, "input", null, null, 1, _extends({
      type: "hidden",
      value: "".concat(value2)
    }, name2 && {
      name: name2
    }))), createVNode(1, "div", "dx-checkbox-container", [createComponentVNode(2, CheckBoxIcon, {
      size: iconSize,
      isChecked: true === value2
    }), text && createVNode(1, "span", "dx-checkbox-text", text, 0)], 0)], 4)
  }), null, editorRef));
};
var CheckBoxProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(EditorProps), Object.getOwnPropertyDescriptors({
  text: "",
  enableThreeStateBehavior: false,
  activeStateEnabled: true,
  hoverStateEnabled: true,
  get focusStateEnabled() {
    return "desktop" === devices_default.real().deviceType && !devices_default.isSimulator();
  },
  defaultValue: false,
  valueChange: () => {
  }
})));
var CheckBoxPropsType = {
  get text() {
    return CheckBoxProps.text;
  },
  get enableThreeStateBehavior() {
    return CheckBoxProps.enableThreeStateBehavior;
  },
  get activeStateEnabled() {
    return CheckBoxProps.activeStateEnabled;
  },
  get hoverStateEnabled() {
    return CheckBoxProps.hoverStateEnabled;
  },
  get focusStateEnabled() {
    return CheckBoxProps.focusStateEnabled;
  },
  get defaultValue() {
    return CheckBoxProps.defaultValue;
  },
  get valueChange() {
    return CheckBoxProps.valueChange;
  },
  get readOnly() {
    return CheckBoxProps.readOnly;
  },
  get name() {
    return CheckBoxProps.name;
  },
  get validationError() {
    return CheckBoxProps.validationError;
  },
  get validationErrors() {
    return CheckBoxProps.validationErrors;
  },
  get validationMessageMode() {
    return CheckBoxProps.validationMessageMode;
  },
  get validationMessagePosition() {
    return CheckBoxProps.validationMessagePosition;
  },
  get validationStatus() {
    return CheckBoxProps.validationStatus;
  },
  get isValid() {
    return CheckBoxProps.isValid;
  },
  get isDirty() {
    return CheckBoxProps.isDirty;
  },
  get inputAttr() {
    return CheckBoxProps.inputAttr;
  },
  get className() {
    return CheckBoxProps.className;
  },
  get disabled() {
    return CheckBoxProps.disabled;
  },
  get tabIndex() {
    return CheckBoxProps.tabIndex;
  },
  get visible() {
    return CheckBoxProps.visible;
  },
  get aria() {
    return WidgetProps.aria;
  }
};
var CheckBox2 = class extends InfernoWrapperComponent {
  constructor(props) {
    super(props);
    this.editorRef = createRef();
    this.state = {
      value: void 0 !== this.props.value ? this.props.value : this.props.defaultValue
    };
    this.focus = this.focus.bind(this);
    this.blur = this.blur.bind(this);
    this.onWidgetClick = this.onWidgetClick.bind(this);
    this.keyDown = this.keyDown.bind(this);
  }
  createEffects() {
    return [createReRenderEffect()];
  }
  onWidgetClick(event) {
    var {
      enableThreeStateBehavior,
      readOnly,
      saveValueChangeEvent
    } = this.props;
    if (!readOnly) {
      null === saveValueChangeEvent || void 0 === saveValueChangeEvent ? void 0 : saveValueChangeEvent(event);
      if (enableThreeStateBehavior) {
        var __newValue;
        this.setState((__state_argument) => {
          __newValue = null === (void 0 !== this.props.value ? this.props.value : __state_argument.value) || (!(void 0 !== this.props.value ? this.props.value : __state_argument.value) ? null : false);
          return {
            value: __newValue
          };
        });
        this.props.valueChange(__newValue);
      } else {
        var _newValue;
        this.setState((__state_argument) => {
          var _ref;
          _newValue = !(null !== (_ref = void 0 !== this.props.value ? this.props.value : __state_argument.value) && void 0 !== _ref ? _ref : false);
          return {
            value: _newValue
          };
        });
        this.props.valueChange(_newValue);
      }
    }
  }
  keyDown(e) {
    var {
      onKeyDown
    } = this.props;
    var {
      keyName,
      originalEvent,
      which
    } = e;
    var result2 = null === onKeyDown || void 0 === onKeyDown ? void 0 : onKeyDown(e);
    if (null !== result2 && void 0 !== result2 && result2.cancel) {
      return result2;
    }
    if ("space" === keyName || "space" === which) {
      originalEvent.preventDefault();
      this.onWidgetClick(originalEvent);
    }
    return;
  }
  get cssClasses() {
    return getCssClasses3(_extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    }));
  }
  get aria() {
    var checked = true === (void 0 !== this.props.value ? this.props.value : this.state.value);
    var indeterminate = null === (void 0 !== this.props.value ? this.props.value : this.state.value);
    var result2 = {
      role: "checkbox",
      checked: indeterminate ? "mixed" : "".concat(checked)
    };
    return _extends({}, result2, this.props.aria);
  }
  get restAttributes() {
    var _this$props$value = _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    }), restProps = _objectWithoutPropertiesLoose(_this$props$value, _excluded11);
    return restProps;
  }
  focus() {
    this.editorRef.current.focus();
  }
  blur() {
    this.editorRef.current.blur();
  }
  render() {
    var props = this.props;
    return viewFunction10({
      props: _extends({}, props, {
        value: void 0 !== this.props.value ? this.props.value : this.state.value
      }),
      editorRef: this.editorRef,
      onWidgetClick: this.onWidgetClick,
      keyDown: this.keyDown,
      cssClasses: this.cssClasses,
      aria: this.aria,
      restAttributes: this.restAttributes
    });
  }
};
function __processTwoWayProps(defaultProps) {
  var twoWayProps = ["value"];
  return Object.keys(defaultProps).reduce((props, propName) => {
    var propValue = defaultProps[propName];
    var defaultPropName = twoWayProps.some((p2) => p2 === propName) ? "default" + propName.charAt(0).toUpperCase() + propName.slice(1) : propName;
    props[defaultPropName] = propValue;
    return props;
  }, {});
}
CheckBox2.defaultProps = CheckBoxPropsType;
var __defaultOptionRules2 = [];
function defaultOptions2(rule) {
  __defaultOptionRules2.push(rule);
  CheckBox2.defaultProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(CheckBox2.defaultProps), Object.getOwnPropertyDescriptors(__processTwoWayProps(convertRulesToOptions(__defaultOptionRules2)))));
}

// node_modules/devextreme/esm/renovation/ui/editors/check_box/check_box.j.js
var CheckBox3 = class extends CheckBox {
  getProps() {
    var props = super.getProps();
    props.onKeyDown = this._wrapKeyDownHandler(props.onKeyDown);
    return props;
  }
  focus() {
    var _this$viewRef;
    return null === (_this$viewRef = this.viewRef) || void 0 === _this$viewRef ? void 0 : _this$viewRef.focus(...arguments);
  }
  blur() {
    var _this$viewRef2;
    return null === (_this$viewRef2 = this.viewRef) || void 0 === _this$viewRef2 ? void 0 : _this$viewRef2.blur(...arguments);
  }
  _getActionConfigs() {
    return {
      onFocusIn: {},
      onClick: {}
    };
  }
  get _propsInfo() {
    return {
      twoWay: [
        ["value", "defaultValue", "valueChange"]
      ],
      allowNull: ["defaultValue", "validationError", "validationErrors", "value"],
      elements: [],
      templates: [],
      props: ["text", "iconSize", "enableThreeStateBehavior", "activeStateEnabled", "hoverStateEnabled", "focusStateEnabled", "saveValueChangeEvent", "defaultValue", "valueChange", "readOnly", "name", "validationError", "validationErrors", "validationMessageMode", "validationMessagePosition", "validationStatus", "isValid", "isDirty", "inputAttr", "onFocusIn", "className", "accessKey", "disabled", "height", "hint", "onClick", "onKeyDown", "rtlEnabled", "tabIndex", "visible", "width", "aria", "value"]
    };
  }
  get _viewComponent() {
    return CheckBox2;
  }
};
component_registrator_default("dxCheckBox", CheckBox3);
CheckBox3.defaultOptions = defaultOptions2;

// node_modules/devextreme/esm/ui/check_box.js
var check_box_default = CheckBox3;

// node_modules/devextreme/esm/__internal/ui/tree_view/m_tree_view.base.js
var WIDGET_CLASS = "dx-treeview";
var NODE_CLASS = "".concat(WIDGET_CLASS, "-node");
var NODE_CONTAINER_CLASS = "".concat(NODE_CLASS, "-container");
var NODE_LOAD_INDICATOR_CLASS = "".concat(NODE_CLASS, "-loadindicator");
var OPENED_NODE_CONTAINER_CLASS = "".concat(NODE_CLASS, "-container-opened");
var IS_LEAF = "".concat(NODE_CLASS, "-is-leaf");
var ITEM_CLASS3 = "".concat(WIDGET_CLASS, "-item");
var ITEM_WITH_CHECKBOX_CLASS = "".concat(ITEM_CLASS3, "-with-checkbox");
var ITEM_WITH_CUSTOM_EXPANDER_ICON_CLASS = "".concat(ITEM_CLASS3, "-with-custom-expander-icon");
var CUSTOM_EXPANDER_ICON_ITEM_CONTAINER_CLASS = "".concat(WIDGET_CLASS, "-custom-expander-icon-item-container");
var ITEM_WITHOUT_CHECKBOX_CLASS = "".concat(ITEM_CLASS3, "-without-checkbox");
var ITEM_DATA_KEY2 = "".concat(ITEM_CLASS3, "-data");
var TOGGLE_ITEM_VISIBILITY_CLASS = "".concat(WIDGET_CLASS, "-toggle-item-visibility");
var CUSTOM_COLLAPSE_ICON_CLASS = "".concat(WIDGET_CLASS, "-custom-collapse-icon");
var CUSTOM_EXPAND_ICON_CLASS = "".concat(WIDGET_CLASS, "-custom-expand-icon");
var LOAD_INDICATOR_CLASS = "".concat(WIDGET_CLASS, "-loadindicator");
var LOAD_INDICATOR_WRAPPER_CLASS = "".concat(WIDGET_CLASS, "-loadindicator-wrapper");
var TOGGLE_ITEM_VISIBILITY_OPENED_CLASS = "".concat(WIDGET_CLASS, "-toggle-item-visibility-opened");
var SELECT_ALL_ITEM_CLASS = "".concat(WIDGET_CLASS, "-select-all-item");
var INVISIBLE_STATE_CLASS3 = "dx-state-invisible";
var DISABLED_STATE_CLASS4 = "dx-state-disabled";
var SELECTED_ITEM_CLASS2 = "dx-state-selected";
var EXPAND_EVENT_NAMESPACE = "dxTreeView_expand";
var DATA_ITEM_ID = "data-item-id";
var ITEM_URL_CLASS3 = "dx-item-url";
var CHECK_BOX_CLASS = "dx-checkbox";
var CHECK_BOX_ICON_CLASS = "dx-checkbox-icon";
var ROOT_NODE_CLASS = "".concat(WIDGET_CLASS, "-root-node");
var EXPANDER_ICON_STUB_CLASS = "".concat(WIDGET_CLASS, "-expander-icon-stub");
var TreeViewBase = ui_hierarchical_collection_widget_default.inherit({
  _supportedKeys(e) {
    var click2 = (e2) => {
      var $itemElement = renderer_default(this.option("focusedElement"));
      if (!$itemElement.length) {
        return;
      }
      e2.target = $itemElement;
      e2.currentTarget = $itemElement;
      this._itemClickHandler(e2, $itemElement.children(".".concat(ITEM_CLASS3)));
      var expandEventName = this._getEventNameByOption(this.option("expandEvent"));
      var expandByClick = expandEventName === addNamespace(CLICK_EVENT_NAME, EXPAND_EVENT_NAMESPACE);
      if (expandByClick) {
        this._expandEventHandler(e2);
      }
    };
    var select = (e2) => {
      e2.preventDefault();
      var $focusedElement = renderer_default(this.option("focusedElement"));
      var checkboxInstance = this._getCheckBoxInstance($focusedElement);
      if (!checkboxInstance.option("disabled")) {
        var currentState = checkboxInstance.option("value");
        this._updateItemSelection(!currentState, $focusedElement.find(".".concat(ITEM_CLASS3)).get(0), true);
      }
    };
    var toggleExpandedNestedItems = function(state, e2) {
      if (!this.option("expandAllEnabled")) {
        return;
      }
      e2.preventDefault();
      var $rootElement = renderer_default(this.option("focusedElement"));
      if (!$rootElement.length) {
        return;
      }
      var rootItem = this._getItemData($rootElement.find(".".concat(ITEM_CLASS3)));
      this._toggleExpandedNestedItems([rootItem], state);
    };
    return extend(this.callBase(), {
      enter: this._showCheckboxes() ? select : click2,
      space: this._showCheckboxes() ? select : click2,
      asterisk: toggleExpandedNestedItems.bind(this, true),
      minus: toggleExpandedNestedItems.bind(this, false)
    });
  },
  _toggleExpandedNestedItems(items, state) {
    if (!items) {
      return;
    }
    for (var i = 0, len = items.length; i < len; i++) {
      var item = items[i];
      var node = this._dataAdapter.getNodeByItem(item);
      this._toggleExpandedState(node, state);
      this._toggleExpandedNestedItems(item.items, state);
    }
  },
  _getNodeElement(node, cache) {
    var key = this._encodeString(node.internalFields.key);
    if (cache) {
      if (!cache.$nodeByKey) {
        cache.$nodeByKey = {};
        this.$element().find(".".concat(NODE_CLASS)).each(function() {
          var $node = renderer_default(this);
          var key2 = $node.attr(DATA_ITEM_ID);
          cache.$nodeByKey[key2] = $node;
        });
      }
      return cache.$nodeByKey[key] || renderer_default();
    }
    var element = this.$element().get(0).querySelector("[".concat(DATA_ITEM_ID, '="').concat(key, '"]'));
    return renderer_default(element);
  },
  _activeStateUnit: ".".concat(ITEM_CLASS3),
  _widgetClass: () => WIDGET_CLASS,
  _getDefaultOptions() {
    var defaultOptions3 = extend(this.callBase(), {
      animationEnabled: true,
      dataStructure: "tree",
      deferRendering: true,
      expandAllEnabled: false,
      hasItemsExpr: "hasItems",
      selectNodesRecursive: true,
      expandNodesRecursive: true,
      showCheckBoxesMode: "none",
      expandIcon: null,
      collapseIcon: null,
      selectAllText: message_default.format("dxList-selectAll"),
      onItemSelectionChanged: null,
      onItemExpanded: null,
      onItemCollapsed: null,
      scrollDirection: "vertical",
      useNativeScrolling: true,
      virtualModeEnabled: false,
      rootValue: 0,
      focusStateEnabled: false,
      selectionMode: "multiple",
      expandEvent: "dblclick",
      selectByClick: false,
      createChildren: null,
      onSelectAllValueChanged: null,
      _supportItemUrl: false
    });
    return extend(true, defaultOptions3, {
      integrationOptions: {
        useDeferUpdateForTemplates: false
      }
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => !nativeScrolling,
      options: {
        useNativeScrolling: false
      }
    }]);
  },
  _initSelectedItems: noop,
  _syncSelectionOptions: asyncNoop,
  _fireSelectionChanged() {
    var selectionChangePromise = this._selectionChangePromise;
    when(selectionChangePromise).done(() => {
      this._createActionByOption("onSelectionChanged", {
        excludeValidators: ["disabled", "readOnly"]
      })();
    });
  },
  _createSelectAllValueChangedAction() {
    this._selectAllValueChangedAction = this._createActionByOption("onSelectAllValueChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _fireSelectAllValueChanged(value2) {
    this._selectAllValueChangedAction({
      value: value2
    });
  },
  _checkBoxModeChange(value2, previousValue) {
    var searchEnabled = this.option("searchEnabled");
    var previousSelectAllEnabled = this._selectAllEnabled(previousValue);
    var previousItemsContainer = this._itemContainer(searchEnabled, previousSelectAllEnabled);
    this._detachClickEvent(previousItemsContainer);
    this._detachExpandEvent(previousItemsContainer);
    if ("none" === previousValue || "none" === value2) {
      return;
    }
    var selectAllExists = this._$selectAllItem && this._$selectAllItem.length;
    switch (value2) {
      case "selectAll":
        if (!selectAllExists) {
          this._createSelectAllValueChangedAction();
          this._renderSelectAllItem();
        }
        break;
      case "normal":
        if (selectAllExists) {
          this._$selectAllItem.remove();
          delete this._$selectAllItem;
        }
    }
  },
  _removeSelection() {
    var that = this;
    each(this._dataAdapter.getFullData(), (_, node) => {
      if (!that._hasChildren(node)) {
        return;
      }
      that._dataAdapter.toggleSelection(node.internalFields.key, false, true);
    });
  },
  _optionChanged(args) {
    var {
      name: name2,
      value: value2,
      previousValue
    } = args;
    switch (name2) {
      case "selectAllText":
        if (this._$selectAllItem) {
          this._$selectAllItem.dxCheckBox("instance").option("text", value2);
        }
        break;
      case "showCheckBoxesMode":
        this._checkBoxModeChange(value2, previousValue);
        this._invalidate();
        break;
      case "scrollDirection":
        this.getScrollable().option("direction", value2);
        break;
      case "useNativeScrolling":
        this.getScrollable().option("useNative", value2);
        break;
      case "items":
        delete this._$selectAllItem;
        this.callBase(args);
        break;
      case "dataSource":
        this.callBase(args);
        this._initDataAdapter();
        this._filter = {};
        break;
      case "hasItemsExpr":
        this._initAccessors();
        this.repaint();
        break;
      case "expandEvent":
        this._attachExpandEvent();
        break;
      case "deferRendering":
      case "dataStructure":
      case "rootValue":
      case "createChildren":
      case "expandNodesRecursive":
      case "onItemSelectionChanged":
      case "onItemExpanded":
      case "onItemCollapsed":
      case "expandAllEnabled":
      case "animationEnabled":
      case "virtualModeEnabled":
      case "selectByClick":
      case "_supportItemUrl":
        break;
      case "selectionMode":
        this._initDataAdapter();
        this.callBase(args);
        break;
      case "onSelectAllValueChanged":
        this._createSelectAllValueChangedAction();
        break;
      case "selectNodesRecursive":
        this._dataAdapter.setOption("recursiveSelection", args.value);
        this.repaint();
        break;
      case "expandIcon":
      case "collapseIcon":
        this.repaint();
        break;
      default:
        this.callBase(args);
    }
  },
  _initDataSource() {
    if (this._useCustomChildrenLoader()) {
      this._loadChildrenByCustomLoader(null).done((newItems) => {
        if (newItems && newItems.length) {
          this.option("items", newItems);
        }
      });
    } else {
      this.callBase();
      this._isVirtualMode() && this._initVirtualMode();
    }
  },
  _initVirtualMode() {
    var filter = this._filter;
    if (!filter.custom) {
      filter.custom = this._dataSource.filter();
    }
    if (!filter.internal) {
      filter.internal = [this.option("parentIdExpr"), this.option("rootValue")];
    }
  },
  _useCustomChildrenLoader() {
    return isFunction(this.option("createChildren")) && this._isDataStructurePlain();
  },
  _loadChildrenByCustomLoader(parentNode) {
    var invocationResult = this.option("createChildren").call(this, parentNode);
    if (Array.isArray(invocationResult)) {
      return Deferred().resolve(invocationResult).promise();
    }
    if (invocationResult && isFunction(invocationResult.then)) {
      return fromPromise(invocationResult);
    }
    return Deferred().resolve([]).promise();
  },
  _combineFilter() {
    if (!this._filter.custom || !this._filter.custom.length) {
      return this._filter.internal;
    }
    return [this._filter.custom, this._filter.internal];
  },
  _dataSourceLoadErrorHandler() {
    this._renderEmptyMessage();
  },
  _init() {
    this._filter = {};
    this.callBase();
    this._initStoreChangeHandlers();
  },
  _dataSourceChangedHandler(newItems) {
    var items = this.option("items");
    if (this._initialized && this._isVirtualMode() && items.length) {
      return;
    }
    this.option("items", newItems);
  },
  _removeTreeViewLoadIndicator() {
    if (!this._treeViewLoadIndicator) {
      return;
    }
    this._treeViewLoadIndicator.remove();
    this._treeViewLoadIndicator = null;
  },
  _createTreeViewLoadIndicator() {
    this._treeViewLoadIndicator = renderer_default("<div>").addClass(LOAD_INDICATOR_CLASS);
    this._createComponent(this._treeViewLoadIndicator, load_indicator_default, {});
    return this._treeViewLoadIndicator;
  },
  _dataSourceLoadingChangedHandler(isLoading) {
    var resultFilter;
    if (this._isVirtualMode()) {
      resultFilter = this._combineFilter();
      this._dataSource.filter(resultFilter);
    }
    if (isLoading && !this._dataSource.isLoaded()) {
      this.option("items", []);
      var $wrapper = renderer_default("<div>").addClass(LOAD_INDICATOR_WRAPPER_CLASS);
      this._createTreeViewLoadIndicator().appendTo($wrapper);
      this.itemsContainer().append($wrapper);
      if (this._isVirtualMode() && this._dataSource.filter() !== resultFilter) {
        this._dataSource.filter([]);
      }
    } else {
      this._removeTreeViewLoadIndicator();
    }
  },
  _initStoreChangeHandlers() {
    if ("plain" !== this.option("dataStructure")) {
      return;
    }
    this._dataSource && this._dataSource.store().on("inserted", (newItem) => {
      this.option().items = this.option("items").concat(newItem);
      this._dataAdapter.addItem(newItem);
      if (!this._dataAdapter.isFiltered(newItem)) {
        return;
      }
      this._updateLevel(this._parentIdGetter(newItem));
    }).on("removed", (removedKey) => {
      var node = this._dataAdapter.getNodeByKey(removedKey);
      if (isDefined(node)) {
        this.option("items")[this._dataAdapter.getIndexByKey(node.internalFields.key)] = 0;
        this._markChildrenItemsToRemove(node);
        this._removeItems();
        this._dataAdapter.removeItem(removedKey);
        this._updateLevel(this._parentIdGetter(node));
      }
    });
  },
  _markChildrenItemsToRemove(node) {
    var keys = node.internalFields.childrenKeys;
    each(keys, (_, key) => {
      this.option("items")[this._dataAdapter.getIndexByKey(key)] = 0;
      this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(key));
    });
  },
  _removeItems() {
    var items = extend(true, [], this.option("items"));
    var counter = 0;
    each(items, (index, item) => {
      if (!item) {
        this.option("items").splice(index - counter, 1);
        counter++;
      }
    });
  },
  _updateLevel(parentId) {
    var $container = this._getContainerByParentKey(parentId);
    this._renderItems($container, this._dataAdapter.getChildrenNodes(parentId));
  },
  _getOldContainer($itemElement) {
    if ($itemElement.length) {
      return $itemElement.children(".".concat(NODE_CONTAINER_CLASS));
    }
    var scrollable = this.getScrollable();
    if (scrollable) {
      return renderer_default(scrollable.content()).children();
    }
    return renderer_default();
  },
  _getContainerByParentKey(parentId) {
    var node = this._dataAdapter.getNodeByKey(parentId);
    var $itemElement = node ? this._getNodeElement(node) : [];
    this._getOldContainer($itemElement).remove();
    var $container = this._renderNodeContainer($itemElement);
    if (this._isRootLevel(parentId)) {
      var scrollable = this.getScrollable();
      if (!scrollable) {
        this._renderScrollableContainer();
      }
      renderer_default(scrollable.content()).append($container);
    }
    return $container;
  },
  _isRootLevel(parentId) {
    return parentId === this.option("rootValue");
  },
  _getAccessors() {
    var accessors = this.callBase();
    accessors.push("hasItems");
    return accessors;
  },
  _getDataAdapterOptions() {
    var _a, _b, _c;
    return {
      rootValue: this.option("rootValue"),
      multipleSelection: !this._isSingleSelection(),
      recursiveSelection: this._isRecursiveSelection(),
      recursiveExpansion: this.option("expandNodesRecursive"),
      selectionRequired: this.option("selectionRequired"),
      dataType: this.option("dataStructure"),
      sort: this._dataSource && this._dataSource.sort(),
      langParams: null === (_c = null === (_b = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.loadOptions) || void 0 === _b ? void 0 : _b.call(_a)) || void 0 === _c ? void 0 : _c.langParams
    };
  },
  _initMarkup() {
    this._renderScrollableContainer();
    this._renderEmptyMessage(this._dataAdapter.getRootNodes());
    this.callBase();
    this._setAriaRole();
  },
  _setAriaRole() {
    var {
      items
    } = this.option();
    if (null === items || void 0 === items ? void 0 : items.length) {
      this.setAria({
        role: "tree"
      });
    }
  },
  _renderContentImpl() {
    var $nodeContainer = this._renderNodeContainer();
    renderer_default(this.getScrollable().content()).append($nodeContainer);
    if (!this.option("items") || !this.option("items").length) {
      return;
    }
    this._renderItems($nodeContainer, this._dataAdapter.getRootNodes());
    this._attachExpandEvent();
    if (this._selectAllEnabled()) {
      this._createSelectAllValueChangedAction();
      this._renderSelectAllItem($nodeContainer);
    }
  },
  _isVirtualMode() {
    return this.option("virtualModeEnabled") && this._isDataStructurePlain() && !!this.option("dataSource");
  },
  _isDataStructurePlain() {
    return "plain" === this.option("dataStructure");
  },
  _fireContentReadyAction() {
    var dataSource = this.getDataSource();
    var skipContentReadyAction = dataSource && !dataSource.isLoaded() || this._skipContentReadyAndItemExpanded;
    var scrollable = this.getScrollable();
    if (scrollable && hasWindow()) {
      scrollable.update();
    }
    if (!skipContentReadyAction) {
      this.callBase();
    }
    if (scrollable && hasWindow()) {
      scrollable.update();
    }
  },
  _renderScrollableContainer() {
    this._scrollable = this._createComponent(renderer_default("<div>").appendTo(this.$element()), ui_scrollable_default, {
      useNative: this.option("useNativeScrolling"),
      direction: this.option("scrollDirection"),
      useKeyboard: false
    });
  },
  _renderNodeContainer($parent) {
    var $container = renderer_default("<ul>").addClass(NODE_CONTAINER_CLASS);
    this.setAria("role", "group", $container);
    if ($parent && $parent.length) {
      var itemData = this._getItemData($parent.children(".".concat(ITEM_CLASS3)));
      if (this._expandedGetter(itemData)) {
        $container.addClass(OPENED_NODE_CONTAINER_CLASS);
      }
      $container.appendTo($parent);
    }
    return $container;
  },
  _createDOMElement($nodeContainer, node) {
    var _a, _b;
    var $node = renderer_default("<li>").addClass(NODE_CLASS).attr(DATA_ITEM_ID, this._encodeString(node.internalFields.key)).prependTo($nodeContainer);
    var attrs = {
      role: "treeitem",
      label: this._displayGetter(node.internalFields.item) || "",
      level: this._getLevel($nodeContainer)
    };
    var hasChildNodes = !!(null === (_b = null === (_a = null === node || void 0 === node ? void 0 : node.internalFields) || void 0 === _a ? void 0 : _a.childrenKeys) || void 0 === _b ? void 0 : _b.length);
    if (hasChildNodes) {
      attrs.expanded = node.internalFields.expanded || false;
    }
    this.setAria(attrs, $node);
    return $node;
  },
  _getLevel($nodeContainer) {
    var parent = $nodeContainer.parent();
    return parent.hasClass("dx-scrollable-content") ? 1 : parseInt(parent.attr("aria-level")) + 1;
  },
  _showCheckboxes() {
    return "none" !== this.option("showCheckBoxesMode");
  },
  _hasCustomExpanderIcons() {
    return this.option("expandIcon") || this.option("collapseIcon");
  },
  _selectAllEnabled(showCheckBoxesMode) {
    var mode = null !== showCheckBoxesMode && void 0 !== showCheckBoxesMode ? showCheckBoxesMode : this.option("showCheckBoxesMode");
    return "selectAll" === mode && !this._isSingleSelection();
  },
  _renderItems($nodeContainer, nodes) {
    var length = nodes.length - 1;
    for (var i = length; i >= 0; i--) {
      this._renderItem(i, nodes[i], $nodeContainer);
    }
    this._renderedItemsCount += nodes.length;
  },
  _renderItem(nodeIndex, node, $nodeContainer) {
    var $node = this._createDOMElement($nodeContainer, node);
    var nodeData = node.internalFields;
    var showCheckBox = this._showCheckboxes();
    $node.addClass(showCheckBox ? ITEM_WITH_CHECKBOX_CLASS : ITEM_WITHOUT_CHECKBOX_CLASS);
    $node.toggleClass(INVISIBLE_STATE_CLASS3, false === nodeData.item.visible);
    if (this._hasCustomExpanderIcons()) {
      $node.addClass(ITEM_WITH_CUSTOM_EXPANDER_ICON_CLASS);
      $nodeContainer.addClass(CUSTOM_EXPANDER_ICON_ITEM_CONTAINER_CLASS);
    }
    this.setAria("selected", nodeData.selected, $node);
    this._toggleSelectedClass($node, nodeData.selected);
    if (nodeData.disabled) {
      this.setAria("disabled", nodeData.disabled, $node);
    }
    this.callBase(this._renderedItemsCount + nodeIndex, nodeData.item, $node);
    var parent = this._getNode(node.internalFields.parentKey);
    if (!parent) {
      $node.addClass(ROOT_NODE_CLASS);
    }
    if (false !== nodeData.item.visible) {
      this._renderChildren($node, node);
    }
  },
  _setAriaSelectionAttribute: noop,
  _renderChildren($node, node) {
    if (!this._hasChildren(node)) {
      this._addLeafClass($node);
      renderer_default("<div>").addClass(EXPANDER_ICON_STUB_CLASS).appendTo(this._getItem($node));
      return;
    }
    if (this._hasCustomExpanderIcons()) {
      this._renderCustomExpanderIcons($node, node);
    } else {
      this._renderDefaultExpanderIcons($node, node);
    }
    if (this._shouldRenderSublevel(node.internalFields.expanded)) {
      this._loadSublevel(node).done((childNodes) => {
        this._renderSublevel($node, this._getActualNode(node), childNodes);
      });
    }
  },
  _shouldRenderSublevel(expanded) {
    return expanded || !this.option("deferRendering");
  },
  _getActualNode(cachedNode) {
    return this._dataAdapter.getNodeByKey(cachedNode.internalFields.key);
  },
  _hasChildren(node) {
    if (this._isVirtualMode() || this._useCustomChildrenLoader()) {
      return false !== this._hasItemsGetter(node.internalFields.item);
    }
    return this.callBase(node);
  },
  _loadSublevel(node) {
    var deferred = Deferred();
    var childrenNodes = this._getChildNodes(node);
    if (childrenNodes.length) {
      deferred.resolve(childrenNodes);
    } else {
      this._loadNestedItems(node).done((items) => {
        deferred.resolve(this._dataAdapter.getNodesByItems(items));
      });
    }
    return deferred.promise();
  },
  _getItemExtraPropNames: () => ["url", "linkAttr"],
  _addContent($container, itemData) {
    var {
      html,
      url
    } = itemData;
    if (this.option("_supportItemUrl") && url) {
      $container.html(html);
      var link = this._getLinkContainer(this._getIconContainer(itemData), this._getTextContainer(itemData), itemData);
      $container.append(link);
    } else {
      this.callBase($container, itemData);
    }
  },
  _postprocessRenderItem(args) {
    var {
      itemData,
      itemElement
    } = args;
    if (this._showCheckboxes()) {
      this._renderCheckBox(itemElement, this._getNode(itemData));
    }
    this.callBase(args);
  },
  _renderSublevel($node, node, childNodes) {
    var $nestedNodeContainer = this._renderNodeContainer($node, node);
    var childNodesByChildrenKeys = childNodes.filter((childNode) => -1 !== node.internalFields.childrenKeys.indexOf(childNode.internalFields.key));
    this._renderItems($nestedNodeContainer, childNodesByChildrenKeys);
    if (childNodesByChildrenKeys.length && !node.internalFields.selected) {
      var firstChild = childNodesByChildrenKeys[0];
      this._updateParentsState(firstChild, this._getNodeElement(firstChild));
    }
    this._normalizeIconState($node, childNodesByChildrenKeys.length);
    if (node.internalFields.expanded) {
      $nestedNodeContainer.addClass(OPENED_NODE_CONTAINER_CLASS);
    }
  },
  _executeItemRenderAction(itemIndex, itemData, itemElement) {
    var node = this._getNode(itemElement);
    this._getItemRenderAction()({
      itemElement,
      itemIndex,
      itemData,
      node: this._dataAdapter.getPublicNode(node)
    });
  },
  _addLeafClass($node) {
    $node.addClass(IS_LEAF);
  },
  _expandEventHandler(e) {
    var $nodeElement = renderer_default(e.currentTarget.parentNode);
    if (!$nodeElement.hasClass(IS_LEAF)) {
      this._toggleExpandedState(e.currentTarget, void 0, e);
    }
  },
  _attachExpandEvent() {
    var expandedEventName = this._getEventNameByOption(this.option("expandEvent"));
    var $itemsContainer = this._itemContainer();
    this._detachExpandEvent($itemsContainer);
    events_engine_default.on($itemsContainer, expandedEventName, this._itemSelector(), this._expandEventHandler.bind(this));
  },
  _detachExpandEvent(itemsContainer) {
    events_engine_default.off(itemsContainer, ".".concat(EXPAND_EVENT_NAMESPACE), this._itemSelector());
  },
  _getEventNameByOption(name2) {
    var event = "click" === name2 ? CLICK_EVENT_NAME : DBLCLICK_EVENT_NAME;
    return addNamespace(event, EXPAND_EVENT_NAMESPACE);
  },
  _getNode(identifier) {
    if (!isDefined(identifier)) {
      return null;
    }
    if (identifier.internalFields) {
      return identifier;
    }
    if (isPrimitive(identifier)) {
      return this._dataAdapter.getNodeByKey(identifier);
    }
    var itemElement = renderer_default(identifier).get(0);
    if (!itemElement) {
      return null;
    }
    if (dom_adapter_default.isElementNode(itemElement)) {
      return this._getNodeByElement(itemElement);
    }
    return this._dataAdapter.getNodeByItem(itemElement);
  },
  _getNodeByElement(itemElement) {
    var $node = renderer_default(itemElement).closest(".".concat(NODE_CLASS));
    var key = this._decodeString($node.attr(DATA_ITEM_ID));
    return this._dataAdapter.getNodeByKey(key);
  },
  _toggleExpandedState(itemElement, state, e) {
    var node = this._getNode(itemElement);
    if (!node) {
      return Deferred().reject().promise();
    }
    if (node.internalFields.disabled) {
      return Deferred().reject().promise();
    }
    var currentState = node.internalFields.expanded;
    if (currentState === state) {
      return Deferred().resolve().promise();
    }
    if (this._hasChildren(node)) {
      var $node = this._getNodeElement(node);
      if ($node.find(".".concat(NODE_LOAD_INDICATOR_CLASS, ":not(.").concat(INVISIBLE_STATE_CLASS3, ")")).length) {
        return Deferred().reject().promise();
      }
      if (!currentState && !this._nodeHasRenderedChildren($node)) {
        this._createLoadIndicator($node);
      }
    }
    if (!isDefined(state)) {
      state = !currentState;
    }
    this._dataAdapter.toggleExpansion(node.internalFields.key, state);
    return this._updateExpandedItemsUI(node, state, e);
  },
  _nodeHasRenderedChildren($node) {
    var $nodeContainer = $node.children(".".concat(NODE_CONTAINER_CLASS));
    return $nodeContainer.not(":empty").length;
  },
  _getItem: ($node) => $node.children(".".concat(ITEM_CLASS3)).eq(0),
  _createLoadIndicator($node) {
    var $treeviewItem = this._getItem($node);
    this._createComponent(renderer_default("<div>").addClass(NODE_LOAD_INDICATOR_CLASS), load_indicator_default, {}).$element().appendTo($treeviewItem);
    var $icon = $treeviewItem.children(".".concat(TOGGLE_ITEM_VISIBILITY_CLASS, ",.").concat(CUSTOM_EXPAND_ICON_CLASS));
    $icon.hide();
  },
  _renderExpanderIcon($node, node, $icon, iconClass) {
    $icon.appendTo(this._getItem($node));
    $icon.addClass(iconClass);
    if (node.internalFields.disabled) {
      $icon.addClass(DISABLED_STATE_CLASS4);
    }
    this._renderToggleItemVisibilityIconClick($icon, node);
  },
  _renderDefaultExpanderIcons($node, node) {
    var $treeViewItem = this._getItem($node);
    var $icon = renderer_default("<div>").addClass(TOGGLE_ITEM_VISIBILITY_CLASS).appendTo($treeViewItem);
    if (node.internalFields.expanded) {
      $icon.addClass(TOGGLE_ITEM_VISIBILITY_OPENED_CLASS);
      $node.parent().addClass(OPENED_NODE_CONTAINER_CLASS);
    }
    if (node.internalFields.disabled) {
      $icon.addClass(DISABLED_STATE_CLASS4);
    }
    this._renderToggleItemVisibilityIconClick($icon, node);
  },
  _renderCustomExpanderIcons($node, node) {
    var {
      expandIcon,
      collapseIcon
    } = this.option();
    var $expandIcon = getImageContainer(null !== expandIcon && void 0 !== expandIcon ? expandIcon : collapseIcon);
    var $collapseIcon = getImageContainer(null !== collapseIcon && void 0 !== collapseIcon ? collapseIcon : expandIcon);
    this._renderExpanderIcon($node, node, $expandIcon, CUSTOM_EXPAND_ICON_CLASS);
    this._renderExpanderIcon($node, node, $collapseIcon, CUSTOM_COLLAPSE_ICON_CLASS);
    var isNodeExpanded = node.internalFields.expanded;
    if (isNodeExpanded) {
      $node.parent().addClass(OPENED_NODE_CONTAINER_CLASS);
    }
    this._toggleCustomExpanderIcons($expandIcon, $collapseIcon, isNodeExpanded);
  },
  _renderToggleItemVisibilityIconClick($icon, node) {
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    events_engine_default.off($icon, eventName);
    events_engine_default.on($icon, eventName, (e) => {
      this._toggleExpandedState(node.internalFields.key, void 0, e);
      return false;
    });
  },
  _toggleCustomExpanderIcons($expandIcon, $collapseIcon, isNodeExpanded) {
    $collapseIcon.toggle(isNodeExpanded);
    $expandIcon.toggle(!isNodeExpanded);
  },
  _updateExpandedItemsUI(node, state, e) {
    var $node = this._getNodeElement(node);
    var isHiddenNode = !$node.length || state && $node.is(":hidden");
    if (this.option("expandNodesRecursive") && isHiddenNode) {
      var parentNode = this._getNode(node.internalFields.parentKey);
      if (parentNode) {
        this._updateExpandedItemsUI(parentNode, state, e);
      }
    }
    if (!this._hasCustomExpanderIcons()) {
      var $icon = this._getItem($node).children(".".concat(TOGGLE_ITEM_VISIBILITY_CLASS));
      $icon.toggleClass(TOGGLE_ITEM_VISIBILITY_OPENED_CLASS, state);
    } else if (this._nodeHasRenderedChildren($node)) {
      var $item = this._getItem($node);
      var $childExpandIcons = $item.children(".".concat(CUSTOM_EXPAND_ICON_CLASS));
      var $childCollapseIcons = $item.children(".".concat(CUSTOM_COLLAPSE_ICON_CLASS));
      this._toggleCustomExpanderIcons($childExpandIcons, $childCollapseIcons, state);
    }
    var $nodeContainer = $node.children(".".concat(NODE_CONTAINER_CLASS));
    var nodeContainerExists = $nodeContainer.length > 0;
    var completionCallback = Deferred();
    if (!state || nodeContainerExists && !$nodeContainer.is(":empty")) {
      this._animateNodeContainer(node, state, e, completionCallback);
      return completionCallback.promise();
    }
    if (0 === node.internalFields.childrenKeys.length && (this._isVirtualMode() || this._useCustomChildrenLoader())) {
      this._loadNestedItemsWithUpdate(node, state, e, completionCallback);
      return completionCallback.promise();
    }
    this._renderSublevel($node, node, this._getChildNodes(node));
    this._fireContentReadyAction();
    this._animateNodeContainer(node, state, e, completionCallback);
    return completionCallback.promise();
  },
  _loadNestedItemsWithUpdate(node, state, e, completionCallback) {
    var $node = this._getNodeElement(node);
    this._loadNestedItems(node).done((items) => {
      var actualNodeData = this._getActualNode(node);
      this._renderSublevel($node, actualNodeData, this._dataAdapter.getNodesByItems(items));
      if (!items || !items.length) {
        completionCallback.resolve();
        return;
      }
      this._fireContentReadyAction();
      this._animateNodeContainer(actualNodeData, state, e, completionCallback);
    });
  },
  _loadNestedItems(node) {
    if (this._useCustomChildrenLoader()) {
      var publicNode = this._dataAdapter.getPublicNode(node);
      return this._loadChildrenByCustomLoader(publicNode).done((newItems) => {
        if (!this._areNodesExists(newItems)) {
          this._appendItems(newItems);
        }
      });
    }
    if (!this._isVirtualMode()) {
      return Deferred().resolve([]).promise();
    }
    this._filter.internal = [this.option("parentIdExpr"), node.internalFields.key];
    this._dataSource.filter(this._combineFilter());
    return this._dataSource.load().done((newItems) => {
      if (!this._areNodesExists(newItems)) {
        this._appendItems(newItems);
      }
    });
  },
  _areNodesExists(newItems, items) {
    var keyOfRootItem = this.keyOf(newItems[0]);
    var fullData = this._dataAdapter.getFullData();
    return !!this._dataAdapter.getNodeByKey(keyOfRootItem, fullData);
  },
  _appendItems(newItems) {
    this.option().items = this.option("items").concat(newItems);
    this._initDataAdapter();
  },
  _animateNodeContainer(node, state, e, completionCallback) {
    var $node = this._getNodeElement(node);
    var $nodeContainer = $node.children(".".concat(NODE_CONTAINER_CLASS));
    if (node && completionCallback && 0 === $nodeContainer.length) {
      completionCallback.resolve();
    }
    $nodeContainer.addClass(OPENED_NODE_CONTAINER_CLASS);
    var nodeHeight = getHeight($nodeContainer);
    fx_default.stop($nodeContainer, true);
    fx_default.animate($nodeContainer, {
      type: "custom",
      duration: this.option("animationEnabled") ? 400 : 0,
      from: {
        maxHeight: state ? 0 : nodeHeight
      },
      to: {
        maxHeight: state ? nodeHeight : 0
      },
      complete: (function() {
        $nodeContainer.css("maxHeight", "none");
        $nodeContainer.toggleClass(OPENED_NODE_CONTAINER_CLASS, state);
        this.setAria("expanded", state, $node);
        this.getScrollable().update();
        this._fireExpandedStateUpdatedEvent(state, node, e);
        if (completionCallback) {
          completionCallback.resolve();
        }
      }).bind(this)
    });
  },
  _fireExpandedStateUpdatedEvent(isExpanded, node, e) {
    if (!this._hasChildren(node) || this._skipContentReadyAndItemExpanded) {
      return;
    }
    var optionName = isExpanded ? "onItemExpanded" : "onItemCollapsed";
    if (isDefined(e)) {
      this._itemDXEventHandler(e, optionName, {
        node: this._dataAdapter.getPublicNode(node)
      });
    } else {
      var target = this._getNodeElement(node);
      this._itemEventHandler(target, optionName, {
        event: e,
        node: this._dataAdapter.getPublicNode(node)
      });
    }
  },
  _normalizeIconState($node, hasNewItems) {
    var _a;
    var $loadIndicator = $node.find(".".concat(NODE_LOAD_INDICATOR_CLASS));
    if ($loadIndicator.length) {
      null === (_a = load_indicator_default.getInstance($loadIndicator)) || void 0 === _a ? void 0 : _a.option("visible", false);
    }
    var $treeViewItem = this._getItem($node);
    var $toggleItem = $treeViewItem.children(".".concat(CUSTOM_COLLAPSE_ICON_CLASS, ",.").concat(TOGGLE_ITEM_VISIBILITY_CLASS));
    if (hasNewItems) {
      $toggleItem.show();
      return;
    }
    $toggleItem.removeClass(TOGGLE_ITEM_VISIBILITY_CLASS);
    $node.addClass(IS_LEAF);
  },
  _emptyMessageContainer() {
    var scrollable = this.getScrollable();
    return scrollable ? renderer_default(scrollable.content()) : this.callBase();
  },
  _renderContent() {
    var items = this.option("items");
    if (items && items.length) {
      this._contentAlreadyRendered = true;
    }
    this.callBase();
  },
  _renderSelectAllItem($container) {
    var {
      selectAllText,
      focusStateEnabled
    } = this.option();
    $container = $container || this.$element().find(".".concat(NODE_CONTAINER_CLASS)).first();
    this._$selectAllItem = renderer_default("<div>").addClass(SELECT_ALL_ITEM_CLASS);
    var value2 = this._dataAdapter.isAllSelected();
    this._createComponent(this._$selectAllItem, check_box_default, {
      value: value2,
      elementAttr: {
        "aria-label": "Select All"
      },
      text: selectAllText,
      focusStateEnabled,
      onValueChanged: this._onSelectAllCheckboxValueChanged.bind(this),
      onInitialized: (_ref) => {
        var {
          component
        } = _ref;
        component.registerKeyHandler("enter", () => {
          component.option("value", !component.option("value"));
        });
      }
    });
    this._toggleSelectedClass(this._$selectAllItem, value2);
    $container.before(this._$selectAllItem);
  },
  _onSelectAllCheckboxValueChanged(args) {
    this._toggleSelectAll(args);
    this._fireSelectAllValueChanged(args.value);
  },
  _toggleSelectAll(args) {
    this._dataAdapter.toggleSelectAll(args.value);
    this._updateItemsUI();
    this._fireSelectionChanged();
  },
  _renderCheckBox($node, node) {
    var $checkbox = renderer_default("<div>").appendTo($node);
    this._createComponent($checkbox, check_box_default, {
      value: node.internalFields.selected,
      onValueChanged: this._changeCheckboxValue.bind(this),
      focusStateEnabled: false,
      elementAttr: {
        "aria-label": message_default.format("CheckState")
      },
      disabled: this._disabledGetter(node)
    });
  },
  _toggleSelectedClass($node, value2) {
    $node.toggleClass(SELECTED_ITEM_CLASS2, !!value2);
  },
  _toggleNodeDisabledState(node, state) {
    var $node = this._getNodeElement(node);
    var $item = $node.find(".".concat(ITEM_CLASS3)).eq(0);
    this._dataAdapter.toggleNodeDisabledState(node.internalFields.key, state);
    $item.toggleClass(DISABLED_STATE_CLASS4, !!state);
    if (this._showCheckboxes()) {
      var checkbox = this._getCheckBoxInstance($node);
      checkbox.option("disabled", !!state);
    }
  },
  _itemOptionChanged(item, property, value2) {
    var node = this._dataAdapter.getNodeByItem(item);
    if (property === this.option("disabledExpr")) {
      this._toggleNodeDisabledState(node, value2);
    }
  },
  _changeCheckboxValue(e) {
    var $node = renderer_default(e.element).closest(".".concat(NODE_CLASS));
    var $item = this._getItem($node);
    var item = this._getItemData($item);
    var node = this._getNodeByElement($item);
    var {
      value: value2
    } = e;
    if (node && node.internalFields.selected === value2) {
      return;
    }
    this._updateItemSelection(value2, item, e.event);
  },
  _isSingleSelection() {
    return "single" === this.option("selectionMode");
  },
  _isRecursiveSelection() {
    return this.option("selectNodesRecursive") && "single" !== this.option("selectionMode");
  },
  _isLastSelectedBranch(publicNode, selectedNodesKeys, deep) {
    var keyIndex = selectedNodesKeys.indexOf(publicNode.key);
    if (keyIndex >= 0) {
      selectedNodesKeys.splice(keyIndex, 1);
    }
    if (deep) {
      each(publicNode.children, (_, childNode) => {
        this._isLastSelectedBranch(childNode, selectedNodesKeys, true);
      });
    }
    if (publicNode.parent) {
      this._isLastSelectedBranch(publicNode.parent, selectedNodesKeys);
    }
    return 0 === selectedNodesKeys.length;
  },
  _isLastRequired(node) {
    var selectionRequired = this.option("selectionRequired");
    var isSingleMode = this._isSingleSelection();
    var selectedNodesKeys = this.getSelectedNodeKeys();
    if (!selectionRequired) {
      return;
    }
    if (isSingleMode) {
      return 1 === selectedNodesKeys.length;
    }
    return this._isLastSelectedBranch(node.internalFields.publicNode, selectedNodesKeys.slice(), true);
  },
  _updateItemSelection(value2, itemElement, dxEvent) {
    var node = this._getNode(itemElement);
    if (!node || false === node.visible) {
      return false;
    }
    if (node.internalFields.selected === value2) {
      return true;
    }
    if (!value2 && this._isLastRequired(node)) {
      if (this._showCheckboxes()) {
        var $node = this._getNodeElement(node);
        this._getCheckBoxInstance($node).option("value", true);
      }
      return false;
    }
    if (value2 && this._isSingleSelection()) {
      var selectedKeys = this.getSelectedNodeKeys();
      each(selectedKeys, (index, key) => {
        this._dataAdapter.toggleSelection(key, false);
        this._updateItemsUI();
        this._fireItemSelectionChanged(this._getNode(key));
      });
    }
    this._dataAdapter.toggleSelection(node.internalFields.key, value2);
    var isAllSelected = this._dataAdapter.isAllSelected();
    var needFireSelectAllChanged = this._selectAllEnabled() && this._$selectAllItem.dxCheckBox("instance").option("value") !== isAllSelected;
    this._updateItemsUI();
    this._fireItemSelectionChanged(node, dxEvent);
    this._fireSelectionChanged();
    if (needFireSelectAllChanged) {
      this._fireSelectAllValueChanged(isAllSelected);
    }
    return true;
  },
  _fireItemSelectionChanged(node, dxEvent) {
    var initiator = dxEvent || this._findItemElementByItem(node.internalFields.item);
    var handler = dxEvent ? this._itemDXEventHandler : this._itemEventHandler;
    handler.call(this, initiator, "onItemSelectionChanged", {
      node: this._dataAdapter.getPublicNode(node),
      itemData: node.internalFields.item
    });
  },
  _getCheckBoxInstance($node) {
    var $treeViewItem = this._getItem($node);
    return $treeViewItem.children(".".concat(CHECK_BOX_CLASS)).dxCheckBox("instance");
  },
  _updateItemsUI() {
    var cache = {};
    each(this._dataAdapter.getData(), (_, node) => {
      var $node = this._getNodeElement(node, cache);
      var nodeSelection = node.internalFields.selected;
      if (!$node.length) {
        return;
      }
      this._toggleSelectedClass($node, nodeSelection);
      this.setAria("selected", nodeSelection, $node);
      if (this._showCheckboxes()) {
        this._getCheckBoxInstance($node).option("value", nodeSelection);
      }
    });
    if (this._selectAllEnabled()) {
      var selectAllCheckbox = this._$selectAllItem.dxCheckBox("instance");
      selectAllCheckbox.option("onValueChanged", void 0);
      selectAllCheckbox.option("value", this._dataAdapter.isAllSelected());
      selectAllCheckbox.option("onValueChanged", this._onSelectAllCheckboxValueChanged.bind(this));
    }
  },
  _updateParentsState(node, $node) {
    if (!$node) {
      return;
    }
    var parentNode = this._dataAdapter.getNodeByKey(node.internalFields.parentKey);
    var $parentNode = renderer_default($node.parents(".".concat(NODE_CLASS))[0]);
    if (this._showCheckboxes()) {
      var parentValue = parentNode.internalFields.selected;
      this._getCheckBoxInstance($parentNode).option("value", parentValue);
      this._toggleSelectedClass($parentNode, parentValue);
    }
    if (parentNode.internalFields.parentKey !== this.option("rootValue")) {
      this._updateParentsState(parentNode, $parentNode);
    }
  },
  _itemEventHandlerImpl(initiator, action, actionArgs) {
    var $itemElement = renderer_default(initiator).closest(".".concat(NODE_CLASS)).children(".".concat(ITEM_CLASS3));
    return action(extend(this._extendActionArgs($itemElement), actionArgs));
  },
  _itemContextMenuHandler(e) {
    this._createEventHandler("onItemContextMenu", e);
  },
  _itemHoldHandler(e) {
    this._createEventHandler("onItemHold", e);
  },
  _createEventHandler(eventName, e) {
    var node = this._getNodeByElement(e.currentTarget);
    this._itemDXEventHandler(e, eventName, {
      node: this._dataAdapter.getPublicNode(node)
    });
  },
  _itemClass: () => ITEM_CLASS3,
  _itemDataKey: () => ITEM_DATA_KEY2,
  _attachClickEvent() {
    var $itemContainer = this._itemContainer();
    this._detachClickEvent($itemContainer);
    var {
      clickEventNamespace,
      itemSelector,
      pointerDownEventNamespace,
      nodeSelector
    } = this._getItemClickEventData();
    events_engine_default.on($itemContainer, clickEventNamespace, itemSelector, (e) => {
      if (renderer_default(e.target).hasClass(CHECK_BOX_ICON_CLASS) || renderer_default(e.target).hasClass(CHECK_BOX_CLASS)) {
        return;
      }
      this._itemClickHandler(e, renderer_default(e.currentTarget));
    });
    events_engine_default.on($itemContainer, pointerDownEventNamespace, nodeSelector, (e) => {
      this._itemPointerDownHandler(e);
    });
  },
  _detachClickEvent(itemsContainer) {
    var {
      clickEventNamespace,
      itemSelector,
      pointerDownEventNamespace,
      nodeSelector
    } = this._getItemClickEventData();
    events_engine_default.off(itemsContainer, clickEventNamespace, itemSelector);
    events_engine_default.off(itemsContainer, pointerDownEventNamespace, nodeSelector);
  },
  _getItemClickEventData() {
    var itemSelector = ".".concat(this._itemClass());
    var nodeSelector = ".".concat(NODE_CLASS, ", .").concat(SELECT_ALL_ITEM_CLASS);
    var clickEventNamespace = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var pointerDownEventNamespace = addNamespace(pointer_default.down, this.NAME);
    return {
      clickEventNamespace,
      itemSelector,
      pointerDownEventNamespace,
      nodeSelector
    };
  },
  _itemClick(actionArgs) {
    var args = actionArgs.args[0];
    var target = args.event.target[0] || args.event.target;
    var link = target.getElementsByClassName(ITEM_URL_CLASS3)[0];
    if (args.itemData.url && link) {
      link.click();
    }
  },
  _itemClickHandler(e, $item) {
    var itemData = this._getItemData($item);
    var node = this._getNodeByElement($item);
    this._itemDXEventHandler(e, "onItemClick", {
      node: this._dataAdapter.getPublicNode(node)
    }, {
      beforeExecute: this._itemClick
    });
    if (this.option("selectByClick") && !e.isDefaultPrevented()) {
      this._updateItemSelection(!node.internalFields.selected, itemData, e);
    }
  },
  _updateSelectionToFirstItem($items, startIndex) {
    var itemIndex = startIndex;
    while (itemIndex >= 0) {
      var $item = renderer_default($items[itemIndex]);
      this._updateItemSelection(true, $item.find(".".concat(ITEM_CLASS3)).get(0));
      itemIndex--;
    }
  },
  _updateSelectionToLastItem($items, startIndex) {
    var {
      length
    } = $items;
    var itemIndex = startIndex;
    while (itemIndex < length) {
      var $item = renderer_default($items[itemIndex]);
      this._updateItemSelection(true, $item.find(".".concat(ITEM_CLASS3)).get(0));
      itemIndex++;
    }
  },
  focus() {
    if (this._selectAllEnabled()) {
      events_engine_default.trigger(this._$selectAllItem, "focus");
      return;
    }
    this.callBase();
  },
  _focusInHandler(e) {
    this._updateFocusState(e, true);
    var isSelectAllItem = renderer_default(e.target).hasClass(SELECT_ALL_ITEM_CLASS);
    if (isSelectAllItem || this.option("focusedElement")) {
      clearTimeout(this._setFocusedItemTimeout);
      this._setFocusedItemTimeout = setTimeout(() => {
        var element = isSelectAllItem ? getPublicElement(this._$selectAllItem) : renderer_default(this.option("focusedElement"));
        this._setFocusedItem(element);
      });
      return;
    }
    var $activeItem = this._getActiveItem();
    this.option("focusedElement", getPublicElement($activeItem.closest(".".concat(NODE_CLASS))));
  },
  _itemPointerDownHandler(e) {
    if (!this.option("focusStateEnabled")) {
      return;
    }
    var $target = renderer_default(e.target).closest(".".concat(NODE_CLASS, ", .").concat(SELECT_ALL_ITEM_CLASS));
    if (!$target.length) {
      return;
    }
    var itemElement = $target.hasClass(DISABLED_STATE_CLASS4) ? null : $target;
    this.option("focusedElement", getPublicElement(itemElement));
  },
  _findNonDisabledNodes: ($nodes) => $nodes.not(function() {
    return renderer_default(this).children(".".concat(ITEM_CLASS3)).hasClass(DISABLED_STATE_CLASS4);
  }),
  _moveFocus(location, e) {
    var FOCUS_LEFT4 = this.option("rtlEnabled") ? "right" : "left";
    var FOCUS_RIGHT4 = this.option("rtlEnabled") ? "left" : "right";
    this.$element().find(".".concat(NODE_CONTAINER_CLASS)).each(function() {
      fx_default.stop(this, true);
    });
    var $items = this._nodeElements();
    if (!$items || !$items.length) {
      return;
    }
    switch (location) {
      case "up":
        var $prevItem = this._prevItem($items);
        this.option("focusedElement", getPublicElement($prevItem));
        var prevItemElement = this._getNodeItemElement($prevItem);
        this.getScrollable().scrollToElement(prevItemElement);
        if (e.shiftKey && this._showCheckboxes()) {
          this._updateItemSelection(true, prevItemElement);
        }
        break;
      case "down":
        var $nextItem = this._nextItem($items);
        this.option("focusedElement", getPublicElement($nextItem));
        var nextItemElement = this._getNodeItemElement($nextItem);
        this.getScrollable().scrollToElement(nextItemElement);
        if (e.shiftKey && this._showCheckboxes()) {
          this._updateItemSelection(true, nextItemElement);
        }
        break;
      case "first":
        var $firstItem = $items.first();
        if (e.shiftKey && this._showCheckboxes()) {
          this._updateSelectionToFirstItem($items, $items.index(this._prevItem($items)));
        }
        this.option("focusedElement", getPublicElement($firstItem));
        this.getScrollable().scrollToElement(this._getNodeItemElement($firstItem));
        break;
      case "last":
        var $lastItem = $items.last();
        if (e.shiftKey && this._showCheckboxes()) {
          this._updateSelectionToLastItem($items, $items.index(this._nextItem($items)));
        }
        this.option("focusedElement", getPublicElement($lastItem));
        this.getScrollable().scrollToElement(this._getNodeItemElement($lastItem));
        break;
      case FOCUS_RIGHT4:
        this._expandFocusedContainer();
        break;
      case FOCUS_LEFT4:
        this._collapseFocusedContainer();
        break;
      default:
        this.callBase.apply(this, arguments);
    }
  },
  _getNodeItemElement: ($node) => $node.find(".".concat(ITEM_CLASS3)).get(0),
  _nodeElements() {
    return this.$element().find(".".concat(NODE_CLASS)).not(":hidden");
  },
  _expandFocusedContainer() {
    var $focusedNode = renderer_default(this.option("focusedElement"));
    if (!$focusedNode.length || $focusedNode.hasClass(IS_LEAF)) {
      return;
    }
    var $node = $focusedNode.find(".".concat(NODE_CONTAINER_CLASS)).eq(0);
    if ($node.hasClass(OPENED_NODE_CONTAINER_CLASS)) {
      var $nextItem = this._nextItem(this._findNonDisabledNodes(this._nodeElements()));
      this.option("focusedElement", getPublicElement($nextItem));
      this.getScrollable().scrollToElement(this._getNodeItemElement($nextItem));
      return;
    }
    var node = this._getNodeByElement(this._getItem($focusedNode));
    this._toggleExpandedState(node, true);
  },
  _getClosestNonDisabledNode($node) {
    do {
      $node = $node.parent().closest(".".concat(NODE_CLASS));
    } while ($node.children(".dx-treeview-item.dx-state-disabled").length);
    return $node;
  },
  _collapseFocusedContainer() {
    var $focusedNode = renderer_default(this.option("focusedElement"));
    if (!$focusedNode.length) {
      return;
    }
    var nodeElement = $focusedNode.find(".".concat(NODE_CONTAINER_CLASS)).eq(0);
    if (!$focusedNode.hasClass(IS_LEAF) && nodeElement.hasClass(OPENED_NODE_CONTAINER_CLASS)) {
      var node = this._getNodeByElement(this._getItem($focusedNode));
      this._toggleExpandedState(node, false);
    } else {
      var collapsedNode = this._getClosestNonDisabledNode($focusedNode);
      collapsedNode.length && this.option("focusedElement", getPublicElement(collapsedNode));
      this.getScrollable().scrollToElement(this._getNodeItemElement(collapsedNode));
    }
  },
  _encodeString: (value2) => isString(value2) ? encodeURI(value2) : value2,
  _decodeString: (value2) => isString(value2) ? decodeURI(value2) : value2,
  getScrollable() {
    return this._scrollable;
  },
  updateDimensions() {
    var deferred = Deferred();
    var scrollable = this.getScrollable();
    if (scrollable) {
      scrollable.update().done(() => {
        deferred.resolveWith(this);
      });
    } else {
      deferred.resolveWith(this);
    }
    return deferred.promise();
  },
  selectItem(itemElement) {
    return this._updateItemSelection(true, itemElement);
  },
  unselectItem(itemElement) {
    return this._updateItemSelection(false, itemElement);
  },
  expandItem(itemElement) {
    return this._toggleExpandedState(itemElement, true);
  },
  collapseItem(itemElement) {
    return this._toggleExpandedState(itemElement, false);
  },
  getNodes() {
    return this._dataAdapter.getTreeNodes();
  },
  getSelectedNodes() {
    return this.getSelectedNodeKeys().map((key) => {
      var node = this._dataAdapter.getNodeByKey(key);
      return this._dataAdapter.getPublicNode(node);
    });
  },
  getSelectedNodeKeys() {
    return this._dataAdapter.getSelectedNodesKeys();
  },
  selectAll() {
    if (this._selectAllEnabled()) {
      this._$selectAllItem.dxCheckBox("instance").option("value", true);
    } else {
      this._toggleSelectAll({
        value: true
      });
    }
  },
  unselectAll() {
    if (this._selectAllEnabled()) {
      this._$selectAllItem.dxCheckBox("instance").option("value", false);
    } else {
      this._toggleSelectAll({
        value: false
      });
    }
  },
  _allItemsExpandedHandler() {
    this._skipContentReadyAndItemExpanded = false;
    this._fireContentReadyAction();
  },
  expandAll() {
    var nodes = this._dataAdapter.getData();
    var expandingPromises = [];
    this._skipContentReadyAndItemExpanded = true;
    nodes.forEach((node) => expandingPromises.push(this._toggleExpandedState(node.internalFields.key, true)));
    Promise.allSettled(expandingPromises).then(() => {
      var _a;
      return null === (_a = this._allItemsExpandedHandler) || void 0 === _a ? void 0 : _a.call(this);
    });
  },
  collapseAll() {
    each(this._dataAdapter.getExpandedNodesKeys(), (_, key) => {
      this._toggleExpandedState(key, false);
    });
  },
  scrollToItem(keyOrItemOrElement) {
    var node = this._getNode(keyOrItemOrElement);
    if (!node) {
      return Deferred().reject().promise();
    }
    var nodeKeysToExpand = [];
    var parentNode = node.internalFields.publicNode.parent;
    while (null != parentNode) {
      if (!parentNode.expanded) {
        nodeKeysToExpand.push(parentNode.key);
      }
      parentNode = parentNode.parent;
    }
    var scrollCallback = Deferred();
    this._expandNodes(nodeKeysToExpand.reverse()).always(() => {
      var $element = this._getNodeElement(node);
      if ($element && $element.length) {
        this.scrollToElementTopLeft($element.get(0));
        scrollCallback.resolve();
      } else {
        scrollCallback.reject();
      }
    });
    return scrollCallback.promise();
  },
  scrollToElementTopLeft(targetElement) {
    var scrollable = this.getScrollable();
    var {
      scrollDirection,
      rtlEnabled
    } = this.option();
    var targetLocation = {
      top: 0,
      left: 0
    };
    var relativeOffset = getRelativeOffset(SCROLLABLE_CONTENT_CLASS, targetElement);
    if (scrollDirection !== DIRECTION_VERTICAL) {
      var containerElement = renderer_default(scrollable.container()).get(0);
      targetLocation.left = rtlEnabled ? relativeOffset.left + targetElement.offsetWidth - containerElement.clientWidth : relativeOffset.left;
    }
    if (scrollDirection !== DIRECTION_HORIZONTAL) {
      targetLocation.top = relativeOffset.top;
    }
    scrollable.scrollTo(targetLocation);
  },
  _expandNodes(keysToExpand) {
    if (!keysToExpand || 0 === keysToExpand.length) {
      return Deferred().resolve().promise();
    }
    var resultCallback = Deferred();
    var callbacksByNodes = keysToExpand.map((key) => this.expandItem(key));
    when.apply(renderer_default, callbacksByNodes).done(() => resultCallback.resolve()).fail(() => resultCallback.reject());
    return resultCallback.promise();
  },
  _dispose() {
    this.callBase();
    clearTimeout(this._setFocusedItemTimeout);
    this._allItemsExpandedHandler = null;
  }
});
var m_tree_view_base_default = TreeViewBase;

// node_modules/devextreme/esm/__internal/ui/tree_view/m_tree_view.search.js
ui_search_box_mixin_default.setEditorClass(text_box_default2);
var WIDGET_CLASS2 = "dx-treeview";
var NODE_CONTAINER_CLASS2 = "".concat(WIDGET_CLASS2, "-node-container");
var TreeViewSearch = m_tree_view_base_default.inherit(ui_search_box_mixin_default).inherit({
  _addWidgetPrefix: (className) => "".concat(WIDGET_CLASS2, "-").concat(className),
  _optionChanged(args) {
    switch (args.name) {
      case "searchValue":
        if (this._showCheckboxes() && this._isRecursiveSelection()) {
          this._removeSelection();
        }
        this._initDataAdapter();
        this._updateSearch();
        this._repaintContainer();
        this.option("focusedElement", null);
        break;
      case "searchExpr":
        this._initDataAdapter();
        this.repaint();
        break;
      case "searchMode":
        this.option("expandNodesRecursive") ? this._updateDataAdapter() : this._initDataAdapter();
        this.repaint();
        break;
      default:
        this.callBase(args);
    }
  },
  _updateDataAdapter() {
    this._setOptionWithoutOptionChange("expandNodesRecursive", false);
    this._initDataAdapter();
    this._setOptionWithoutOptionChange("expandNodesRecursive", true);
  },
  _getDataAdapterOptions() {
    return extend(this.callBase(), {
      searchValue: this.option("searchValue"),
      searchMode: this.option("searchMode") || "contains",
      searchExpr: this.option("searchExpr")
    });
  },
  _getNodeContainer() {
    return this.$element().find(".".concat(NODE_CONTAINER_CLASS2)).first();
  },
  _updateSearch() {
    if (this._searchEditor) {
      var editorOptions = this._getSearchEditorOptions();
      this._searchEditor.option(editorOptions);
    }
  },
  _repaintContainer() {
    var $container = this._getNodeContainer();
    var rootNodes;
    if ($container.length) {
      $container.empty();
      rootNodes = this._dataAdapter.getRootNodes();
      this._renderEmptyMessage(rootNodes);
      this._renderItems($container, rootNodes);
      this._fireContentReadyAction();
    }
  },
  _focusTarget() {
    return this._itemContainer(this.option("searchEnabled"));
  },
  _cleanItemContainer() {
    this.$element().empty();
  },
  _itemContainer(isSearchMode, selectAllEnabled) {
    null !== selectAllEnabled && void 0 !== selectAllEnabled ? selectAllEnabled : selectAllEnabled = this._selectAllEnabled();
    if (selectAllEnabled) {
      return this._getNodeContainer();
    }
    if (this._scrollable && isSearchMode) {
      return renderer_default(this._scrollable.content());
    }
    return this.callBase();
  },
  _addWidgetClass() {
    this.$element().addClass(this._widgetClass());
  },
  _clean() {
    this.callBase();
    this._removeSearchBox();
  }
});
component_registrator_default("dxTreeView", TreeViewSearch);
var m_tree_view_search_default = TreeViewSearch;

// node_modules/devextreme/esm/ui/tree_view.js
var tree_view_default = m_tree_view_search_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/column_chooser/m_column_chooser.js
var COLUMN_CHOOSER_CLASS = "column-chooser";
var COLUMN_CHOOSER_BUTTON_CLASS = "column-chooser-button";
var NOTOUCH_ACTION_CLASS = "notouch-action";
var COLUMN_CHOOSER_LIST_CLASS = "column-chooser-list";
var COLUMN_CHOOSER_PLAIN_CLASS = "column-chooser-plain";
var COLUMN_CHOOSER_DRAG_CLASS = "column-chooser-mode-drag";
var COLUMN_CHOOSER_SELECT_CLASS = "column-chooser-mode-select";
var COLUMN_CHOOSER_ICON_NAME = "column-chooser";
var COLUMN_CHOOSER_ITEM_CLASS = "dx-column-chooser-item";
var COLUMN_OPTIONS_USED_IN_ITEMS = ["showInColumnChooser", "caption", "allowHiding", "visible", "cssClass", "ownerBand"];
var processItems = function(that, chooserColumns) {
  var items = [];
  var isSelectMode = that.isSelectMode();
  var isRecursive = that.option("columnChooser.selection.recursive");
  if (chooserColumns.length) {
    each(chooserColumns, (index, column) => {
      var item = {
        text: column.caption,
        cssClass: column.cssClass,
        allowHiding: column.allowHiding,
        expanded: true,
        id: column.index,
        disabled: false === column.allowHiding,
        parentId: isDefined(column.ownerBand) ? column.ownerBand : null
      };
      var isRecursiveWithColumns = isRecursive && column.hasColumns;
      if (isSelectMode && !isRecursiveWithColumns) {
        item.selected = column.visible;
      }
      items.push(item);
    });
  }
  return items;
};
var ColumnChooserController = class extends m_modules_default.ViewController {
  init() {
    super.init();
    this._rowsView = this.getView("rowsView");
  }
  renderShowColumnChooserButton($element) {
    var that = this;
    var columnChooserButtonClass = that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS);
    var columnChooserEnabled = that.option("columnChooser.enabled");
    var $showColumnChooserButton = $element.find(".".concat(columnChooserButtonClass));
    var $columnChooserButton;
    if (columnChooserEnabled) {
      if (!$showColumnChooserButton.length) {
        $columnChooserButton = renderer_default("<div>").addClass(columnChooserButtonClass).appendTo($element);
        that._createComponent($columnChooserButton, button_default, {
          icon: COLUMN_CHOOSER_ICON_NAME,
          onClick() {
            that.getView("columnChooserView").showColumnChooser();
          },
          hint: that.option("columnChooser.title"),
          integrationOptions: {}
        });
      } else {
        $showColumnChooserButton.show();
      }
    } else {
      $showColumnChooserButton.hide();
    }
  }
  getPosition() {
    var position2 = this.option("columnChooser.position");
    return isDefined(position2) ? position2 : {
      my: "right bottom",
      at: "right bottom",
      of: this._rowsView && this._rowsView.element(),
      collision: "fit",
      offset: "-2 -2",
      boundaryOffset: "2 2"
    };
  }
};
var ColumnChooserView = class extends ColumnsView {
  optionChanged(args) {
    switch (args.name) {
      case "columnChooser":
        this._initializePopupContainer();
        this.render(null, "full");
        break;
      default:
        super.optionChanged(args);
    }
  }
  publicMethods() {
    return ["showColumnChooser", "hideColumnChooser"];
  }
  _resizeCore() {
  }
  _isWinDevice() {
    return !!devices_default.real().win;
  }
  _initializePopupContainer() {
    var that = this;
    var columnChooserClass = that.addWidgetPrefix(COLUMN_CHOOSER_CLASS);
    var $element = that.element().addClass(columnChooserClass);
    var columnChooserOptions = that.option("columnChooser");
    var popupPosition = this._columnChooserController.getPosition();
    var themeName = current();
    var isGenericTheme = isGeneric(themeName);
    var isMaterial2 = isMaterial(themeName);
    var dxPopupOptions = {
      visible: false,
      shading: false,
      showCloseButton: false,
      dragEnabled: true,
      resizeEnabled: true,
      wrapperAttr: {
        class: columnChooserClass
      },
      toolbarItems: [{
        text: columnChooserOptions.title,
        toolbar: "top",
        location: isGenericTheme || isMaterial2 ? "before" : "center"
      }],
      position: popupPosition,
      width: columnChooserOptions.width,
      height: columnChooserOptions.height,
      rtlEnabled: that.option("rtlEnabled"),
      onHidden() {
        if (that._isWinDevice()) {
          renderer_default("body").removeClass(that.addWidgetPrefix(NOTOUCH_ACTION_CLASS));
        }
      },
      container: columnChooserOptions.container
    };
    if (isGenericTheme || isMaterial2) {
      extend(dxPopupOptions, {
        showCloseButton: true
      });
    } else {
      dxPopupOptions.toolbarItems[dxPopupOptions.toolbarItems.length] = {
        shortcut: "cancel"
      };
    }
    if (!isDefined(this._popupContainer)) {
      that._popupContainer = that._createComponent($element, ui_popup_default, dxPopupOptions);
      that._popupContainer.on("optionChanged", (args) => {
        if ("visible" === args.name) {
          that.renderCompleted.fire();
        }
      });
    } else {
      this._popupContainer.option(dxPopupOptions);
    }
    this.setPopupAttributes();
  }
  setPopupAttributes() {
    var isSelectMode = this.isSelectMode();
    var isBandColumnsUsed = this._columnsController.isBandColumnsUsed();
    this._popupContainer.setAria({
      role: "dialog",
      label: message_default.format("dxDataGrid-columnChooserTitle")
    });
    this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_DRAG_CLASS), !isSelectMode).toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_SELECT_CLASS), isSelectMode);
    this._popupContainer.$content().addClass(this.addWidgetPrefix(COLUMN_CHOOSER_LIST_CLASS));
    if (isSelectMode && !isBandColumnsUsed) {
      this._popupContainer.$content().addClass(this.addWidgetPrefix(COLUMN_CHOOSER_PLAIN_CLASS));
    }
  }
  _renderCore(change) {
    if (this._popupContainer) {
      var isDragMode = !this.isSelectMode();
      if (!this._columnChooserList || "full" === change) {
        this._renderTreeView();
      } else if (isDragMode) {
        this._updateItems();
      }
    }
  }
  _renderTreeView() {
    var _a, _b, _c;
    var that = this;
    var $container = this._popupContainer.$content();
    var columnChooser = this.option("columnChooser");
    var isSelectMode = this.isSelectMode();
    var searchEnabled = isDefined(columnChooser.allowSearch) ? columnChooser.allowSearch : null === (_a = columnChooser.search) || void 0 === _a ? void 0 : _a.enabled;
    var searchTimeout = isDefined(columnChooser.searchTimeout) ? columnChooser.searchTimeout : null === (_b = columnChooser.search) || void 0 === _b ? void 0 : _b.timeout;
    var treeViewConfig = {
      dataStructure: "plain",
      activeStateEnabled: true,
      focusStateEnabled: true,
      hoverStateEnabled: true,
      itemTemplate: "item",
      showCheckBoxesMode: "none",
      rootValue: null,
      searchEnabled,
      searchTimeout,
      searchEditorOptions: null === (_c = columnChooser.search) || void 0 === _c ? void 0 : _c.editorOptions
    };
    if (this._isWinDevice()) {
      treeViewConfig.useNativeScrolling = false;
    }
    extend(treeViewConfig, isSelectMode ? this._prepareSelectModeConfig() : this._prepareDragModeConfig());
    if (this._columnChooserList) {
      if (!treeViewConfig.searchEnabled) {
        treeViewConfig.searchValue = "";
      }
      this._columnChooserList.option(treeViewConfig);
      this._updateItems();
    } else {
      this._columnChooserList = this._createComponent($container, tree_view_default, treeViewConfig);
      this._updateItems();
      var scrollTop = 0;
      this._columnChooserList.on("optionChanged", (e) => {
        var scrollable = e.component.getScrollable();
        scrollTop = scrollable.scrollTop();
      });
      this._columnChooserList.on("contentReady", (e) => {
        deferUpdate(() => {
          var scrollable = e.component.getScrollable();
          scrollable.scrollTo({
            y: scrollTop
          });
          that.renderCompleted.fire();
        });
      });
    }
  }
  _prepareDragModeConfig() {
    var columnChooserOptions = this.option("columnChooser");
    return {
      noDataText: columnChooserOptions.emptyPanelText,
      activeStateEnabled: false,
      hoverStateEnabled: false,
      itemTemplate(data17, index, item) {
        renderer_default(item).text(data17.text).parent().addClass(data17.cssClass).addClass(COLUMN_CHOOSER_ITEM_CLASS);
      }
    };
  }
  _prepareSelectModeConfig() {
    var _a;
    var that = this;
    var selectionOptions = null !== (_a = this.option("columnChooser.selection")) && void 0 !== _a ? _a : {};
    var isUpdatingSelection = false;
    return {
      selectByClick: selectionOptions.selectByClick,
      selectNodesRecursive: selectionOptions.recursive,
      showCheckBoxesMode: selectionOptions.allowSelectAll ? "selectAll" : "normal",
      onSelectionChanged: (e) => {
        if (isUpdatingSelection) {
          return;
        }
        var nodes = ((nodes2) => {
          var addNodesToArray = (nodes3, flatNodesArray) => nodes3.reduce((result2, node) => {
            result2.push(node);
            if (node.children.length) {
              addNodesToArray(node.children, result2);
            }
            return result2;
          }, flatNodesArray);
          return addNodesToArray(nodes2, []);
        })(e.component.getNodes());
        e.component.beginUpdate();
        isUpdatingSelection = true;
        ((e2, nodes2) => {
          nodes2.filter((node) => false === node.itemData.allowHiding).forEach((node) => e2.component.selectItem(node.key));
        })(e, nodes);
        e.component.endUpdate();
        isUpdatingSelection = false;
        that.component.beginUpdate();
        this._isUpdatingColumnVisibility = true;
        ((nodes2) => {
          nodes2.forEach((node) => {
            var columnIndex = node.itemData.id;
            var isVisible = false !== node.selected;
            that._columnsController.columnOption(columnIndex, "visible", isVisible);
          });
        })(nodes);
        that.component.endUpdate();
        this._isUpdatingColumnVisibility = false;
      }
    };
  }
  _updateItems() {
    var isSelectMode = this.isSelectMode();
    var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);
    var items = processItems(this, chooserColumns);
    this._columnChooserList.option("items", items);
  }
  _updateItemsSelection(columnIndices) {
    var changedColumns = null === columnIndices || void 0 === columnIndices ? void 0 : columnIndices.map((columnIndex) => this._columnsController.columnOption(columnIndex));
    this._columnChooserList.beginUpdate();
    null === changedColumns || void 0 === changedColumns ? void 0 : changedColumns.forEach((_ref) => {
      var {
        visible,
        index
      } = _ref;
      if (visible) {
        this._columnChooserList.selectItem(index);
      } else {
        this._columnChooserList.unselectItem(index);
      }
    });
    this._columnChooserList.endUpdate();
  }
  _columnOptionChanged(e) {
    super._columnOptionChanged(e);
    var isSelectMode = this.isSelectMode();
    if (isSelectMode && this._columnChooserList && !this._isUpdatingColumnVisibility) {
      var {
        optionNames
      } = e;
      var onlyVisibleChanged = optionNames.visible && 1 === optionNames.length;
      var columnIndices = isDefined(e.columnIndex) ? [e.columnIndex] : e.columnIndices;
      var needUpdate = COLUMN_OPTIONS_USED_IN_ITEMS.some((optionName) => optionNames[optionName]) || e.changeTypes.columns && optionNames.all;
      if (needUpdate) {
        this._updateItemsSelection(columnIndices);
        if (!onlyVisibleChanged) {
          this._updateItems();
        }
      }
    }
  }
  getColumnElements() {
    var result2 = [];
    var isSelectMode = this.isSelectMode();
    var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);
    var $content = this._popupContainer && this._popupContainer.$content();
    var $nodes = $content && $content.find(".dx-treeview-node");
    if ($nodes) {
      chooserColumns.forEach((column) => {
        var $node = $nodes.filter("[data-item-id = '".concat(column.index, "']"));
        var item = $node.length ? $node.children(".".concat(COLUMN_CHOOSER_ITEM_CLASS)).get(0) : null;
        result2.push(item);
      });
    }
    return renderer_default(result2);
  }
  getName() {
    return "columnChooser";
  }
  getColumns() {
    return this._columnsController.getChooserColumns();
  }
  allowDragging(column) {
    var isParentColumnVisible = this._columnsController.isParentColumnVisible(column.index);
    var isColumnHidden = !column.visible && column.allowHiding;
    return this.isColumnChooserVisible() && isParentColumnVisible && isColumnHidden;
  }
  allowColumnHeaderDragging(column) {
    var isDragMode = !this.isSelectMode();
    return isDragMode && this.isColumnChooserVisible() && column.allowHiding;
  }
  getBoundingRect() {
    var container = this._popupContainer && this._popupContainer.$overlayContent();
    if (container && container.is(":visible")) {
      var offset = container.offset();
      return {
        left: offset.left,
        top: offset.top,
        right: offset.left + getOuterWidth(container),
        bottom: offset.top + getOuterHeight(container)
      };
    }
    return null;
  }
  showColumnChooser() {
    if (!this._popupContainer) {
      this._initializePopupContainer();
      this.render();
    }
    this._popupContainer.show();
    if (this._isWinDevice()) {
      renderer_default("body").addClass(this.addWidgetPrefix(NOTOUCH_ACTION_CLASS));
    }
  }
  hideColumnChooser() {
    if (this._popupContainer) {
      this._popupContainer.hide();
    }
  }
  isColumnChooserVisible() {
    var popupContainer = this._popupContainer;
    return popupContainer && popupContainer.option("visible");
  }
  isSelectMode() {
    return "select" === this.option("columnChooser.mode");
  }
  hasHiddenColumns() {
    var isEnabled = this.option("columnChooser.enabled");
    var hiddenColumns = this.getColumns().filter((column) => !column.visible);
    return isEnabled && hiddenColumns.length;
  }
};
var headerPanel2 = (Base) => class extends Base {
  _getToolbarItems() {
    var items = super._getToolbarItems();
    return this._appendColumnChooserItem(items);
  }
  _appendColumnChooserItem(items) {
    var that = this;
    var columnChooserEnabled = that.option("columnChooser.enabled");
    if (columnChooserEnabled) {
      var hintText = that.option("columnChooser.title");
      var toolbarItem = {
        widget: "dxButton",
        options: {
          icon: COLUMN_CHOOSER_ICON_NAME,
          onClick: function() {
            that.component.getView("columnChooserView").showColumnChooser();
          },
          hint: hintText,
          text: hintText,
          onInitialized: function(e) {
            renderer_default(e.element).addClass(that._getToolbarButtonClass(that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS)));
          },
          elementAttr: {
            "aria-haspopup": "dialog"
          }
        },
        showText: "inMenu",
        location: "after",
        name: "columnChooserButton",
        locateInMenu: "auto",
        sortIndex: 40
      };
      items.push(toolbarItem);
    }
    return items;
  }
  optionChanged(args) {
    switch (args.name) {
      case "columnChooser":
        this._invalidate();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
};
var columns2 = (Base) => class extends Base {
  allowMoveColumn(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation) {
    var isSelectMode = "select" === this.option("columnChooser.mode");
    var isMoveColumnDisallowed = isSelectMode && "columnChooser" === targetLocation;
    return isMoveColumnDisallowed ? false : super.allowMoveColumn(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation);
  }
};
var columnHeadersView2 = (Base) => class extends Base {
  allowDragging(column) {
    var isDragMode = !this._columnChooserView.isSelectMode();
    var isColumnChooserVisible = this._columnChooserView.isColumnChooserVisible();
    return isDragMode && isColumnChooserVisible && column.allowHiding || super.allowDragging(column);
  }
};
var columnChooserModule = {
  defaultOptions: () => ({
    columnChooser: {
      enabled: false,
      search: {
        enabled: false,
        timeout: 500,
        editorOptions: {}
      },
      selection: {
        allowSelectAll: false,
        selectByClick: false,
        recursive: false
      },
      position: void 0,
      mode: "dragAndDrop",
      width: 250,
      height: 260,
      title: message_default.format("dxDataGrid-columnChooserTitle"),
      emptyPanelText: message_default.format("dxDataGrid-columnChooserEmptyText"),
      container: void 0
    }
  }),
  controllers: {
    columnChooser: ColumnChooserController
  },
  views: {
    columnChooserView: ColumnChooserView
  },
  extenders: {
    views: {
      headerPanel: headerPanel2,
      columnHeadersView: columnHeadersView2
    },
    controllers: {
      columns: columns2
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/column_chooser.js
var ColumnChooserController2 = columnChooserModule.controllers.columnChooser;
var ColumnChooserView2 = columnChooserModule.views.columnChooserView;
m_core_default.registerModule("columnChooser", columnChooserModule);

// node_modules/devextreme/esm/__internal/grids/data_grid/m_utils.js
function createGroupFilter(path, storeLoadOptions) {
  var groups = normalizeSortingInfo(storeLoadOptions.group);
  var filter = [];
  for (var i = 0; i < path.length; i++) {
    filter.push([groups[i].selector, "=", path[i]]);
  }
  if (storeLoadOptions.filter) {
    filter.push(storeLoadOptions.filter);
  }
  return m_utils_default.combineFilters(filter);
}

// node_modules/devextreme/esm/__internal/grids/data_grid/grouping/m_grouping_core.js
function createOffsetFilter(path, storeLoadOptions, lastLevelOnly) {
  var groups = normalizeSortingInfo(storeLoadOptions.group);
  var filter = [];
  for (var i = lastLevelOnly ? path.length - 1 : 0; i < path.length; i++) {
    var filterElement = [];
    for (var j = 0; j <= i; j++) {
      var {
        selector
      } = groups[j];
      if (i === j && (null === path[j] || false === path[j] || true === path[j])) {
        if (false === path[j]) {
          filterElement.push([selector, "=", groups[j].desc ? true : null]);
        } else if (path[j] ? !groups[j].desc : groups[j].desc) {
          filterElement.push([selector, "<>", path[j]]);
        } else {
          filterElement.push([selector, "<>", null]);
          filterElement.push([selector, "=", null]);
        }
      } else {
        var currentFilter = [selector, i === j ? groups[j].desc ? ">" : "<" : "=", path[j]];
        if ("<" === currentFilter[1]) {
          filterElement.push([currentFilter, "or", [selector, "=", null]]);
        } else {
          filterElement.push(currentFilter);
        }
      }
    }
    filter.push(m_core_default.combineFilters(filterElement));
  }
  filter = m_core_default.combineFilters(filter, "or");
  return m_core_default.combineFilters([filter, storeLoadOptions.filter]);
}
var findGroupInfoByKey = function(groupsInfo, key) {
  var {
    hash
  } = groupsInfo;
  return hash && hash[JSON.stringify(key)];
};
var getGroupInfoIndexByOffset = function(groupsInfo, offset) {
  var leftIndex = 0;
  var rightIndex = groupsInfo.length - 1;
  if (!groupsInfo.length) {
    return 0;
  }
  do {
    var middleIndex = rightIndex + leftIndex >> 1;
    if (groupsInfo[middleIndex].offset > offset) {
      rightIndex = middleIndex;
    } else {
      leftIndex = middleIndex;
    }
  } while (rightIndex - leftIndex > 1);
  var index;
  for (index = leftIndex; index <= rightIndex; index++) {
    if (groupsInfo[index].offset > offset) {
      break;
    }
  }
  return index;
};
var cleanGroupsInfo = function cleanGroupsInfo2(groupsInfo, groupIndex, groupsCount) {
  for (var i = 0; i < groupsInfo.length; i++) {
    if (groupIndex + 1 >= groupsCount) {
      groupsInfo[i].children = [];
    } else {
      cleanGroupsInfo2(groupsInfo[i].children, groupIndex + 1, groupsCount);
    }
  }
};
var calculateItemsCount = function calculateItemsCount2(that, items, groupsCount) {
  var result2 = 0;
  if (items) {
    if (!groupsCount) {
      result2 = items.length;
    } else {
      for (var i = 0; i < items.length; i++) {
        if (that.isGroupItemCountable(items[i])) {
          result2++;
        }
        result2 += calculateItemsCount2(that, items[i].items, groupsCount - 1);
      }
    }
  }
  return result2;
};
var GroupingHelper = class {
  constructor(dataSourceAdapter) {
    this._dataSource = dataSourceAdapter;
    this.reset();
  }
  reset() {
    this._groupsInfo = [];
    this._totalCountCorrection = 0;
  }
  totalCountCorrection() {
    return this._totalCountCorrection;
  }
  updateTotalItemsCount(totalCountCorrection) {
    this._totalCountCorrection = totalCountCorrection || 0;
  }
  isGroupItemCountable(item) {
    return !this._isVirtualPaging() || !item.isContinuation;
  }
  _isVirtualPaging() {
    var scrollingMode = this._dataSource.option("scrolling.mode");
    return "virtual" === scrollingMode || "infinite" === scrollingMode;
  }
  itemsCount() {
    var dataSourceAdapter = this._dataSource;
    var dataSource = dataSourceAdapter._dataSource;
    var groupCount = m_core_default.normalizeSortingInfo(dataSource.group() || []).length;
    var itemsCount = calculateItemsCount(this, dataSource.items(), groupCount);
    return itemsCount;
  }
  foreachGroups(callback, childrenAtFirst, foreachCollapsedGroups2, updateOffsets, updateParentOffsets) {
    var that = this;
    return function foreachGroupsCore(groupsInfo, callback2, childrenAtFirst2, parents) {
      var callbackResults = [];
      function executeCallback(callback3, data17, parents2, callbackResults2) {
        var callbackResult2 = data17 && callback3(data17, parents2);
        callbackResult2 && callbackResults2.push(callbackResult2);
        return callbackResult2;
      }
      for (var i = 0; i < groupsInfo.length; i++) {
        parents.push(groupsInfo[i].data);
        if (!childrenAtFirst2 && false === executeCallback(callback2, groupsInfo[i].data, parents, callbackResults)) {
          return false;
        }
        if (!groupsInfo[i].data || groupsInfo[i].data.isExpanded || foreachCollapsedGroups2) {
          var {
            children
          } = groupsInfo[i];
          var callbackResult = children.length && foreachGroupsCore(children, callback2, childrenAtFirst2, parents);
          callbackResult && callbackResults.push(callbackResult);
          if (false === callbackResult) {
            return false;
          }
        }
        if (childrenAtFirst2 && false === executeCallback(callback2, groupsInfo[i].data, parents, callbackResults)) {
          return false;
        }
        if (!groupsInfo[i].data || groupsInfo[i].data.offset !== groupsInfo[i].offset) {
          updateOffsets = true;
        }
        parents.pop();
      }
      var currentParents = updateParentOffsets && parents.slice(0);
      return updateOffsets && when.apply(renderer_default, callbackResults).always(() => {
        that._updateGroupInfoOffsets(groupsInfo, currentParents);
      });
    }(that._groupsInfo, callback, childrenAtFirst, []);
  }
  _updateGroupInfoOffsets(groupsInfo, parents) {
    parents = parents || [];
    for (var index = 0; index < groupsInfo.length; index++) {
      var groupInfo = groupsInfo[index];
      if (groupInfo.data && groupInfo.data.offset !== groupInfo.offset) {
        groupInfo.offset = groupInfo.data.offset;
        for (var parentIndex = 0; parentIndex < parents.length; parentIndex++) {
          parents[parentIndex].offset = groupInfo.offset;
        }
      }
    }
    groupsInfo.sort((a, b) => a.offset - b.offset);
  }
  findGroupInfo(path) {
    var groupInfo;
    var groupsInfo = this._groupsInfo;
    for (var pathIndex = 0; groupsInfo && pathIndex < path.length; pathIndex++) {
      groupInfo = findGroupInfoByKey(groupsInfo, path[pathIndex]);
      groupsInfo = groupInfo && groupInfo.children;
    }
    return groupInfo && groupInfo.data;
  }
  addGroupInfo(groupInfoData) {
    var groupInfo;
    var {
      path
    } = groupInfoData;
    var groupsInfo = this._groupsInfo;
    for (var pathIndex = 0; pathIndex < path.length; pathIndex++) {
      groupInfo = findGroupInfoByKey(groupsInfo, path[pathIndex]);
      if (!groupInfo) {
        groupInfo = {
          key: path[pathIndex],
          offset: groupInfoData.offset,
          data: {
            offset: groupInfoData.offset,
            isExpanded: true,
            path: path.slice(0, pathIndex + 1)
          },
          children: []
        };
        var index = getGroupInfoIndexByOffset(groupsInfo, groupInfoData.offset);
        groupsInfo.splice(index, 0, groupInfo);
        groupsInfo.hash = groupsInfo.hash || {};
        groupsInfo.hash[JSON.stringify(groupInfo.key)] = groupInfo;
      }
      if (pathIndex === path.length - 1) {
        groupInfo.data = groupInfoData;
        if (groupInfo.offset !== groupInfoData.offset) {
          this._updateGroupInfoOffsets(groupsInfo);
        }
      }
      groupsInfo = groupInfo.children;
    }
  }
  allowCollapseAll() {
    return true;
  }
  refresh(options2) {
    var {
      storeLoadOptions
    } = options2;
    var groups = normalizeSortingInfo(storeLoadOptions.group || []);
    var oldGroups = "_group" in this ? normalizeSortingInfo(this._group || []) : groups;
    var groupsCount = Math.min(oldGroups.length, groups.length);
    this._group = storeLoadOptions.group;
    for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {
      if (oldGroups[groupIndex].selector !== groups[groupIndex].selector) {
        groupsCount = groupIndex;
        break;
      }
    }
    if (!groupsCount) {
      this.reset();
    } else {
      cleanGroupsInfo(this._groupsInfo, 0, groupsCount);
    }
  }
  handleDataLoading() {
  }
  handleDataLoaded(options2, callBase) {
    callBase(options2);
  }
  handleDataLoadedCore(options2, callBase) {
    callBase(options2);
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/grouping/m_grouping_collapsed.js
function getContinuationGroupCount(groupOffset, pageSize, groupSize, groupIndex) {
  groupIndex = groupIndex || 0;
  if (pageSize > 1 && groupSize > 0) {
    var pageOffset = groupOffset - Math.floor(groupOffset / pageSize) * pageSize || pageSize;
    pageOffset += groupSize - groupIndex - 2;
    if (pageOffset < 0) {
      pageOffset += pageSize;
    }
    return Math.floor(pageOffset / (pageSize - groupIndex - 1));
  }
  return 0;
}
var foreachExpandedGroups = function(that, callback, updateGroups) {
  return that.foreachGroups((groupInfo, parents) => {
    if (groupInfo.isExpanded) {
      return callback(groupInfo, parents);
    }
  }, true, false, updateGroups, updateGroups);
};
var processGroupItems = function processGroupItems2(that, items, groupsCount, expandedInfo, path, isCustomLoading, isLastGroupExpanded) {
  var isExpanded;
  expandedInfo.items = expandedInfo.items || [];
  expandedInfo.paths = expandedInfo.paths || [];
  expandedInfo.count = expandedInfo.count || 0;
  expandedInfo.lastCount = expandedInfo.lastCount || 0;
  if (!groupsCount) {
    return;
  }
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    if (void 0 !== item.items) {
      path.push(item.key);
      if (isCustomLoading) {
        isExpanded = true;
      } else {
        var groupInfo = that.findGroupInfo(path);
        isExpanded = groupInfo && groupInfo.isExpanded;
      }
      if (!isExpanded) {
        item.collapsedItems = item.items;
        item.items = null;
      } else if (item.items) {
        processGroupItems2(that, item.items, groupsCount - 1, expandedInfo, path, isCustomLoading, isLastGroupExpanded);
      } else if (1 === groupsCount && item.count && (!isCustomLoading || isLastGroupExpanded)) {
        expandedInfo.items.push(item);
        expandedInfo.paths.push(path.slice(0));
        expandedInfo.count += expandedInfo.lastCount;
        expandedInfo.lastCount = item.count;
      }
      path.pop();
    }
  }
};
var updateGroupInfoItem = function(that, item, isLastGroupLevel, path, offset) {
  var groupInfo = that.findGroupInfo(path);
  var count;
  if (!groupInfo) {
    if (isLastGroupLevel) {
      count = item.count > 0 ? item.count : item.items.length;
    }
    that.addGroupInfo({
      isExpanded: that._isGroupExpanded(path.length - 1),
      path: path.slice(0),
      offset,
      count: count || 0
    });
  } else {
    if (isLastGroupLevel) {
      groupInfo.count = item.count > 0 ? item.count : item.items && item.items.length || 0;
    } else {
      item.count = groupInfo.count || item.count;
    }
    groupInfo.offset = offset;
  }
};
var updateGroupInfos = function updateGroupInfos2(that, options2, items, loadedGroupCount, groupIndex, path, parentIndex) {
  var groupCount = options2.group ? options2.group.length : 0;
  var isLastGroupLevel = groupCount === loadedGroupCount;
  var remotePaging = options2.remoteOperations.paging;
  var offset = 0;
  var totalCount = 0;
  var count;
  groupIndex = groupIndex || 0;
  path = path || [];
  if (remotePaging && !parentIndex) {
    offset = 0 === groupIndex ? options2.skip || 0 : options2.skips[groupIndex - 1] || 0;
  }
  if (groupIndex >= loadedGroupCount) {
    return items.length;
  }
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    if (item) {
      path.push(item.key);
      if (!item.count && !item.items || void 0 === item.items) {
        return -1;
      }
      updateGroupInfoItem(that, item, isLastGroupLevel, path, offset + i);
      count = item.items ? updateGroupInfos2(that, options2, item.items, loadedGroupCount, groupIndex + 1, path, i) : item.count || -1;
      if (count < 0) {
        return -1;
      }
      totalCount += count;
      path.pop();
    }
  }
  return totalCount;
};
var isGroupExpanded = function(groups, groupIndex) {
  return groups && groups.length && groups[groupIndex] && !!groups[groupIndex].isExpanded;
};
var getTotalOffset = function(groupInfos, pageSize, offset) {
  var groupSize;
  var totalOffset = offset;
  for (var groupIndex = 0; groupIndex < groupInfos.length; groupIndex++) {
    groupSize = groupInfos[groupIndex].offset + 1;
    if (groupIndex > 0) {
      groupSize += groupInfos[groupIndex - 1].childrenTotalCount;
      if (pageSize) {
        groupSize += getContinuationGroupCount(totalOffset, pageSize, groupSize, groupIndex - 1) * groupIndex;
      }
    }
    totalOffset += groupSize;
  }
  return totalOffset;
};
function applyContinuationToGroupItem(options2, expandedInfo, groupLevel, expandedItemIndex) {
  var item = expandedInfo.items[expandedItemIndex];
  var skip = options2.skips && options2.skips[groupLevel];
  var take = options2.takes && options2.takes[groupLevel];
  var isLastExpandedItem = expandedItemIndex === expandedInfo.items.length - 1;
  var isFirstExpandedItem = 0 === expandedItemIndex;
  var lastExpandedItemSkip = isFirstExpandedItem && skip || 0;
  var isItemsTruncatedByTake = item.count > take + lastExpandedItemSkip;
  if (isFirstExpandedItem && void 0 !== skip) {
    item.isContinuation = true;
  }
  if (isLastExpandedItem && void 0 !== take && isItemsTruncatedByTake) {
    item.isContinuationOnNextPage = true;
  }
}
function fillSkipTakeInExpandedInfo(options2, expandedInfo, currentGroupCount) {
  var currentGroupIndex = currentGroupCount - 1;
  var groupCount = options2.group ? options2.group.length : 0;
  expandedInfo.skip = options2.skips && options2.skips[currentGroupIndex];
  if (options2.takes && void 0 !== options2.takes[currentGroupIndex]) {
    if (groupCount === currentGroupCount) {
      expandedInfo.take = expandedInfo.count ? expandedInfo.count - (expandedInfo.skip || 0) : 0;
    } else {
      expandedInfo.take = 0;
    }
    expandedInfo.take += options2.takes[currentGroupIndex];
  }
}
function isDataDeferred(data17) {
  return !Array.isArray(data17);
}
function makeDataDeferred(options2) {
  if (!isDataDeferred(options2.data)) {
    options2.data = new Deferred();
  }
}
function loadGroupItems(that, options2, loadedGroupCount, expandedInfo, groupLevel, data17) {
  if (!options2.isCustomLoading) {
    expandedInfo = {};
    processGroupItems(that, data17, loadedGroupCount, expandedInfo, []);
    fillSkipTakeInExpandedInfo(options2, expandedInfo, loadedGroupCount);
  }
  var groupCount = options2.group ? options2.group.length : 0;
  if (expandedInfo.paths.length && groupCount - loadedGroupCount > 0) {
    makeDataDeferred(options2);
    loadExpandedGroups(that, options2, expandedInfo, loadedGroupCount, groupLevel, data17);
  } else if (expandedInfo.paths.length && options2.storeLoadOptions.group) {
    makeDataDeferred(options2);
    loadLastLevelGroupItems(that, options2, expandedInfo, data17);
  } else if (isDataDeferred(options2.data)) {
    options2.data.resolve(data17);
  }
}
function loadExpandedGroups(that, options2, expandedInfo, loadedGroupCount, groupLevel, data17) {
  var groups = options2.group || [];
  var currentGroup = groups[groupLevel + 1];
  var deferreds = [];
  each(expandedInfo.paths, (expandedItemIndex) => {
    var _a;
    var loadOptions = {
      requireTotalCount: false,
      requireGroupCount: true,
      group: [currentGroup],
      groupSummary: options2.storeLoadOptions.groupSummary,
      filter: createGroupFilter(expandedInfo.paths[expandedItemIndex], {
        filter: options2.storeLoadOptions.filter,
        group: groups
      }),
      select: options2.storeLoadOptions.select,
      langParams: null === (_a = options2.storeLoadOptions) || void 0 === _a ? void 0 : _a.langParams
    };
    if (0 === expandedItemIndex) {
      loadOptions.skip = expandedInfo.skip || 0;
    }
    if (expandedItemIndex === expandedInfo.paths.length - 1) {
      loadOptions.take = expandedInfo.take;
    }
    var loadResult = 0 === loadOptions.take ? [] : that._dataSource.loadFromStore(loadOptions);
    when(loadResult).done((data18) => {
      var item = expandedInfo.items[expandedItemIndex];
      applyContinuationToGroupItem(options2, expandedInfo, groupLevel, expandedItemIndex);
      item.items = data18;
    });
    deferreds.push(loadResult);
  });
  when.apply(null, deferreds).done(() => {
    updateGroupInfos(that, options2, data17, loadedGroupCount + 1);
    loadGroupItems(that, options2, loadedGroupCount + 1, expandedInfo, groupLevel + 1, data17);
  });
}
function loadLastLevelGroupItems(that, options2, expandedInfo, data17) {
  var expandedFilters = [];
  var groups = options2.group || [];
  each(expandedInfo.paths, (_, expandedPath) => {
    expandedFilters.push(createGroupFilter(expandedPath, {
      group: options2.isCustomLoading ? options2.storeLoadOptions.group : groups
    }));
  });
  var {
    filter
  } = options2.storeLoadOptions;
  if (!options2.storeLoadOptions.isLoadingAll) {
    filter = m_core_default.combineFilters([filter, m_core_default.combineFilters(expandedFilters, "or")]);
  }
  var loadOptions = extend({}, options2.storeLoadOptions, {
    requireTotalCount: false,
    requireGroupCount: false,
    group: null,
    sort: groups.concat(m_core_default.normalizeSortingInfo(options2.storeLoadOptions.sort || [])),
    filter
  });
  var isPagingLocal = that._dataSource.isLastLevelGroupItemsPagingLocal();
  if (!isPagingLocal) {
    loadOptions.skip = expandedInfo.skip;
    loadOptions.take = expandedInfo.take;
  }
  when(0 === expandedInfo.take ? [] : that._dataSource.loadFromStore(loadOptions)).done((items) => {
    if (isPagingLocal) {
      items = that._dataSource.sortLastLevelGroupItems(items, groups, expandedInfo.paths);
      items = expandedInfo.skip ? items.slice(expandedInfo.skip) : items;
      items = expandedInfo.take ? items.slice(0, expandedInfo.take) : items;
    }
    each(expandedInfo.items, (index, item) => {
      var itemCount = item.count - (0 === index && expandedInfo.skip || 0);
      var expandedItems = items.splice(0, itemCount);
      applyContinuationToGroupItem(options2, expandedInfo, groups.length - 1, index);
      item.items = expandedItems;
    });
    options2.data.resolve(data17);
  }).fail(options2.data.reject);
}
var loadGroupTotalCount = function(dataSource, options2) {
  var d = new Deferred();
  var isGrouping = !!(options2.group && options2.group.length);
  var loadOptions = extend({
    skip: 0,
    take: 1,
    requireGroupCount: isGrouping,
    requireTotalCount: !isGrouping
  }, options2, {
    group: isGrouping ? options2.group : null
  });
  dataSource.load(loadOptions).done((data17, extra) => {
    var count = extra && (isGrouping ? extra.groupCount : extra.totalCount);
    if (!isFinite(count)) {
      d.reject(errors.Error(isGrouping ? "E4022" : "E4021"));
      return;
    }
    d.resolve(count);
  }).fail(d.reject.bind(d));
  return d;
};
var GroupingHelper2 = class extends GroupingHelper {
  updateTotalItemsCount(options2) {
    var totalItemsCount = 0;
    var totalCount = options2.extra && options2.extra.totalCount || 0;
    var groupCount = options2.extra && options2.extra.groupCount || 0;
    var pageSize = this._dataSource.pageSize();
    var isVirtualPaging2 = this._isVirtualPaging();
    foreachExpandedGroups(this, (groupInfo) => {
      groupInfo.childrenTotalCount = 0;
    });
    foreachExpandedGroups(this, (groupInfo, parents) => {
      var totalOffset = getTotalOffset(parents, isVirtualPaging2 ? 0 : pageSize, totalItemsCount);
      var count = groupInfo.count + groupInfo.childrenTotalCount;
      if (!isVirtualPaging2) {
        count += getContinuationGroupCount(totalOffset, pageSize, count, parents.length - 1);
      }
      if (parents[parents.length - 2]) {
        parents[parents.length - 2].childrenTotalCount += count;
      } else {
        totalItemsCount += count;
      }
    });
    super.updateTotalItemsCount(totalItemsCount - totalCount + groupCount);
  }
  _isGroupExpanded(groupIndex) {
    var groups = this._dataSource.group();
    return isGroupExpanded(groups, groupIndex);
  }
  _updatePagingOptions(options2, callback) {
    var isVirtualPaging2 = this._isVirtualPaging();
    var pageSize = this._dataSource.pageSize();
    var skips = [];
    var takes = [];
    var skipChildrenTotalCount = 0;
    var childrenTotalCount = 0;
    if (options2.take) {
      foreachExpandedGroups(this, (groupInfo) => {
        groupInfo.childrenTotalCount = 0;
        groupInfo.skipChildrenTotalCount = 0;
      });
      foreachExpandedGroups(this, (groupInfo, parents) => {
        var take;
        var takeCorrection = 0;
        var parentTakeCorrection = 0;
        var totalOffset = getTotalOffset(parents, isVirtualPaging2 ? 0 : pageSize, childrenTotalCount);
        var continuationGroupCount = 0;
        var skipContinuationGroupCount = 0;
        var groupInfoCount = groupInfo.count + groupInfo.childrenTotalCount;
        var childrenGroupInfoCount = groupInfoCount;
        callback && callback(groupInfo, totalOffset);
        var skip = options2.skip - totalOffset;
        if (totalOffset <= options2.skip + options2.take && groupInfoCount) {
          take = options2.take;
          if (!isVirtualPaging2) {
            continuationGroupCount = getContinuationGroupCount(totalOffset, pageSize, groupInfoCount, parents.length - 1);
            groupInfoCount += continuationGroupCount * parents.length;
            childrenGroupInfoCount += continuationGroupCount;
            if (pageSize && skip >= 0) {
              takeCorrection = parents.length;
              parentTakeCorrection = parents.length - 1;
              skipContinuationGroupCount = Math.floor(skip / pageSize);
            }
          }
          if (skip >= 0) {
            if (totalOffset + groupInfoCount > options2.skip) {
              skips.unshift(skip - skipContinuationGroupCount * takeCorrection - groupInfo.skipChildrenTotalCount);
            }
            if (totalOffset + groupInfoCount >= options2.skip + take) {
              takes.unshift(take - takeCorrection - groupInfo.childrenTotalCount + groupInfo.skipChildrenTotalCount);
            }
          } else if (totalOffset + groupInfoCount >= options2.skip + take) {
            takes.unshift(take + skip - groupInfo.childrenTotalCount);
          }
        }
        if (totalOffset <= options2.skip) {
          if (parents[parents.length - 2]) {
            parents[parents.length - 2].skipChildrenTotalCount += Math.min(childrenGroupInfoCount, skip + 1 - skipContinuationGroupCount * parentTakeCorrection);
          } else {
            skipChildrenTotalCount += Math.min(childrenGroupInfoCount, skip + 1);
          }
        }
        if (totalOffset <= options2.skip + take) {
          groupInfoCount = Math.min(childrenGroupInfoCount, skip + take - (skipContinuationGroupCount + 1) * parentTakeCorrection);
          if (parents[parents.length - 2]) {
            parents[parents.length - 2].childrenTotalCount += groupInfoCount;
          } else {
            childrenTotalCount += groupInfoCount;
          }
        }
      });
      options2.skip -= skipChildrenTotalCount;
      options2.take -= childrenTotalCount - skipChildrenTotalCount;
    }
    options2.skips = skips;
    options2.takes = takes;
  }
  changeRowExpand(path) {
    var groupInfo = this.findGroupInfo(path);
    var dataSource = this._dataSource;
    var remoteGroupPaging = dataSource.remoteOperations().groupPaging;
    var groups = m_core_default.normalizeSortingInfo(dataSource.group());
    if (groupInfo) {
      groupInfo.isExpanded = !groupInfo.isExpanded;
      if (remoteGroupPaging && groupInfo.isExpanded && path.length < groups.length) {
        return loadGroupTotalCount(dataSource, {
          filter: createGroupFilter(path, {
            filter: dataSource.lastLoadOptions().filter,
            group: dataSource.group()
          }),
          group: [groups[path.length]],
          select: dataSource.select()
        }).done((groupCount) => {
          groupInfo.count = groupCount;
        });
      }
      return new Deferred().resolve();
    }
    return new Deferred().reject();
  }
  handleDataLoading(options2) {
    var {
      storeLoadOptions
    } = options2;
    var groups = m_core_default.normalizeSortingInfo(storeLoadOptions.group || options2.loadOptions.group);
    if (options2.isCustomLoading || !groups.length) {
      return;
    }
    if (options2.remoteOperations.grouping) {
      var remotePaging = this._dataSource.remoteOperations().paging;
      storeLoadOptions.group = m_core_default.normalizeSortingInfo(storeLoadOptions.group);
      storeLoadOptions.group.forEach((group, index) => {
        var isLastGroup = index === storeLoadOptions.group.length - 1;
        group.isExpanded = !remotePaging || !isLastGroup;
      });
    }
    options2.group = options2.group || groups;
    if (options2.remoteOperations.paging) {
      options2.skip = storeLoadOptions.skip;
      options2.take = storeLoadOptions.take;
      storeLoadOptions.requireGroupCount = true;
      storeLoadOptions.group = groups.slice(0, 1);
      this._updatePagingOptions(options2);
      storeLoadOptions.skip = options2.skip;
      storeLoadOptions.take = options2.take;
    } else {
      options2.skip = options2.loadOptions.skip;
      options2.take = options2.loadOptions.take;
      this._updatePagingOptions(options2);
    }
  }
  handleDataLoadedCore(options2, callBase) {
    var loadedGroupCount = m_core_default.normalizeSortingInfo(options2.storeLoadOptions.group || options2.loadOptions.group).length;
    var groupCount = options2.group ? options2.group.length : 0;
    var totalCount;
    var expandedInfo = {};
    if (options2.isCustomLoading) {
      callBase(options2);
      processGroupItems(this, options2.data, loadedGroupCount, expandedInfo, [], options2.isCustomLoading, options2.storeLoadOptions.isLoadingAll);
    } else {
      if (!options2.remoteOperations.paging) {
        this.foreachGroups((groupInfo) => {
          groupInfo.count = 0;
        });
      }
      totalCount = updateGroupInfos(this, options2, options2.data, loadedGroupCount);
      if (totalCount < 0) {
        options2.data = new Deferred().reject(ui_errors_default.Error("E1037"));
        return;
      }
      if (!options2.remoteOperations.paging) {
        if (loadedGroupCount && options2.extra && options2.loadOptions.requireTotalCount) {
          options2.extra.totalCount = totalCount;
          options2.extra.groupCount = options2.data.length;
        }
      }
      if (groupCount && options2.storeLoadOptions.requireGroupCount && !isFinite(options2.extra.groupCount)) {
        options2.data = new Deferred().reject(errors.Error("E4022"));
        return;
      }
      this.updateTotalItemsCount(options2);
      if (!options2.remoteOperations.paging) {
        this._updatePagingOptions(options2);
        options2.lastLoadOptions.skips = options2.skips;
        options2.lastLoadOptions.takes = options2.takes;
      }
      callBase(options2);
      if (!options2.remoteOperations.paging) {
        this._processPaging(options2, loadedGroupCount);
      }
    }
    loadGroupItems(this, options2, loadedGroupCount, expandedInfo, 0, options2.data);
  }
  _processSkips(items, skips, groupCount) {
    if (!groupCount) {
      return;
    }
    var firstItem = items[0];
    var skip = skips[0];
    var children = firstItem && firstItem.items;
    if (void 0 !== skip) {
      firstItem.isContinuation = true;
      if (children) {
        firstItem.items = children.slice(skip);
        this._processSkips(firstItem.items, skips.slice(1), groupCount - 1);
      }
    }
  }
  _processTakes(items, skips, takes, groupCount, parents) {
    if (!groupCount || !items) {
      return;
    }
    parents = parents || [];
    var lastItem = items[items.length - 1];
    var children = lastItem && lastItem.items;
    var take = takes[0];
    var skip = skips[0];
    if (lastItem) {
      var maxTakeCount = lastItem.count - (lastItem.isContinuation && skip || 0) || children.length;
      if (void 0 !== take && maxTakeCount > take) {
        lastItem.isContinuationOnNextPage = true;
        parents.forEach((parent) => {
          parent.isContinuationOnNextPage = true;
        });
        if (children) {
          children = children.slice(0, take);
          lastItem.items = children;
        }
      }
      parents.push(lastItem);
      this._processTakes(children, skips.slice(1), takes.slice(1), groupCount - 1, parents);
    }
  }
  _processPaging(options2, groupCount) {
    this._processSkips(options2.data, options2.skips, groupCount);
    this._processTakes(options2.data, options2.skips, options2.takes, groupCount);
  }
  isLastLevelGroupItemsPagingLocal() {
    return false;
  }
  sortLastLevelGroupItems(items) {
    return items;
  }
  refresh(options2, operationTypes) {
    var that = this;
    var dataSource = that._dataSource;
    var {
      storeLoadOptions
    } = options2;
    var group = options2.group || options2.storeLoadOptions.group;
    var oldGroups = m_core_default.normalizeSortingInfo(that._group);
    var isExpanded;
    var groupIndex;
    function handleGroup(groupInfo, parents) {
      if (parents.length === groupIndex + 1) {
        groupInfo.isExpanded = isExpanded;
      }
    }
    for (groupIndex = 0; groupIndex < oldGroups.length; groupIndex++) {
      isExpanded = isGroupExpanded(group, groupIndex);
      if (isGroupExpanded(that._group, groupIndex) !== isExpanded) {
        that.foreachGroups(handleGroup);
      }
    }
    super.refresh.apply(this, arguments);
    if (group && options2.remoteOperations.paging && operationTypes.reload) {
      return foreachExpandedGroups(that, (groupInfo) => {
        var groupCountQuery = loadGroupTotalCount(dataSource, {
          filter: createGroupFilter(groupInfo.path, {
            filter: storeLoadOptions.filter,
            group
          }),
          group: group.slice(groupInfo.path.length),
          select: storeLoadOptions.select
        });
        var groupOffsetQuery = loadGroupTotalCount(dataSource, {
          filter: createOffsetFilter(groupInfo.path, {
            filter: storeLoadOptions.filter,
            group
          }, true),
          group: group.slice(groupInfo.path.length - 1, groupInfo.path.length),
          select: storeLoadOptions.select
        });
        return when(groupOffsetQuery, groupCountQuery).done((offset, count) => {
          offset = parseInt(offset.length ? offset[0] : offset);
          count = parseInt(count.length ? count[0] : count);
          groupInfo.offset = offset;
          if (groupInfo.count !== count) {
            groupInfo.count = count;
            that.updateTotalItemsCount(options2);
          }
        });
      }, true);
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/grouping/m_grouping_expanded.js
var loadTotalCount = function(dataSource, options2) {
  var d = new Deferred();
  var loadOptions = extend({
    skip: 0,
    take: 1,
    requireTotalCount: true
  }, options2);
  dataSource.load(loadOptions).done((data17, extra) => {
    d.resolve(extra && extra.totalCount);
  }).fail(d.reject.bind(d));
  return d;
};
var foreachCollapsedGroups = function(that, callback, updateOffsets) {
  return that.foreachGroups((groupInfo) => {
    if (!groupInfo.isExpanded) {
      return callback(groupInfo);
    }
  }, false, false, updateOffsets, true);
};
var correctSkipLoadOption = function(that, skip) {
  var skipCorrection = 0;
  var resultSkip = skip || 0;
  if (skip) {
    foreachCollapsedGroups(that, (groupInfo) => {
      if (groupInfo.offset - skipCorrection >= skip) {
        return false;
      }
      skipCorrection += groupInfo.count - 1;
    });
    resultSkip += skipCorrection;
  }
  return resultSkip;
};
var processGroupItems3 = function processGroupItems4(that, items, path, offset, skipFirstItem, take) {
  var removeLastItemsCount = 0;
  var needRemoveFirstItem = false;
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    if (void 0 !== item.items) {
      path.push(item.key);
      var groupInfo = that.findGroupInfo(path);
      if (groupInfo && !groupInfo.isExpanded) {
        item.collapsedItems = item.items;
        item.items = null;
        offset += groupInfo.count;
        take--;
        if (take < 0) {
          removeLastItemsCount++;
        }
        if (skipFirstItem) {
          needRemoveFirstItem = true;
        }
      } else if (item.items) {
        var offsetInfo = processGroupItems4(that, item.items, path, offset, skipFirstItem, take);
        if (skipFirstItem) {
          if (offsetInfo.offset - offset > 1) {
            item.isContinuation = true;
          } else {
            needRemoveFirstItem = true;
          }
        }
        offset = offsetInfo.offset;
        take = offsetInfo.take;
        if (take < 0) {
          if (item.items.length) {
            item.isContinuationOnNextPage = true;
          } else {
            removeLastItemsCount++;
          }
        }
      }
      path.pop();
    } else {
      if (skipFirstItem) {
        needRemoveFirstItem = true;
      }
      offset++;
      take--;
      if (take < 0) {
        removeLastItemsCount++;
      }
    }
    skipFirstItem = false;
  }
  if (needRemoveFirstItem) {
    items.splice(0, 1);
  }
  if (removeLastItemsCount) {
    items.splice(-removeLastItemsCount, removeLastItemsCount);
  }
  return {
    offset,
    take
  };
};
var pathEquals = function(path1, path2) {
  if (path1.length !== path2.length) {
    return false;
  }
  for (var i = 0; i < path1.length; i++) {
    if (!keysEqual(null, path1[i], path2[i])) {
      return false;
    }
  }
  return true;
};
var updateGroupOffsets = function updateGroupOffsets2(that, items, path, offset, additionalGroupInfo) {
  if (!items) {
    return;
  }
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    if ("key" in item && void 0 !== item.items) {
      path.push(item.key);
      if (additionalGroupInfo && pathEquals(additionalGroupInfo.path, path) && !item.isContinuation) {
        additionalGroupInfo.offset = offset;
      }
      var groupInfo = that.findGroupInfo(path);
      if (groupInfo && !item.isContinuation) {
        groupInfo.offset = offset;
      }
      if (groupInfo && !groupInfo.isExpanded) {
        offset += groupInfo.count;
      } else {
        offset = updateGroupOffsets2(that, item.items, path, offset, additionalGroupInfo);
      }
      path.pop();
    } else {
      offset++;
    }
  }
  return offset;
};
var removeGroupLoadOption = function(storeLoadOptions, loadOptions) {
  if (loadOptions.group) {
    var groups = m_core_default.normalizeSortingInfo(loadOptions.group);
    var sorts = m_core_default.normalizeSortingInfo(storeLoadOptions.sort);
    storeLoadOptions.sort = store_helper_default.arrangeSortingInfo(groups, sorts);
    delete loadOptions.group;
  }
};
var createNotGroupFilter = function(path, storeLoadOptions, group) {
  var groups = m_core_default.normalizeSortingInfo(group || storeLoadOptions.group);
  var filter = [];
  for (var i = 0; i < path.length; i++) {
    var filterElement = [];
    for (var j = 0; j <= i; j++) {
      filterElement.push([groups[j].selector, i === j ? "<>" : "=", path[j]]);
    }
    filter.push(m_core_default.combineFilters(filterElement));
  }
  filter = m_core_default.combineFilters(filter, "or");
  return m_core_default.combineFilters([filter, storeLoadOptions.filter]);
};
var getGroupCount = function getGroupCount2(item, groupCount) {
  var count = item.count || item.items.length;
  if (!item.count && groupCount > 1) {
    count = 0;
    for (var i = 0; i < item.items.length; i++) {
      count += getGroupCount2(item.items[i], groupCount - 1);
    }
  }
  return count;
};
var GroupingHelper3 = class extends GroupingHelper {
  handleDataLoading(options2) {
    var {
      storeLoadOptions
    } = options2;
    var collapsedGroups = [];
    var collapsedItemsCount = 0;
    var skipFirstItem = false;
    var take;
    var {
      group
    } = options2.loadOptions;
    var skipCorrection = 0;
    removeGroupLoadOption(storeLoadOptions, options2.loadOptions);
    options2.group = options2.group || group;
    if (options2.isCustomLoading) {
      return;
    }
    var loadOptions = extend({}, storeLoadOptions);
    loadOptions.skip = correctSkipLoadOption(this, storeLoadOptions.skip);
    if (loadOptions.skip && loadOptions.take && group) {
      loadOptions.skip--;
      loadOptions.take++;
      skipFirstItem = true;
    }
    if (loadOptions.take && group) {
      take = loadOptions.take;
      loadOptions.take++;
    }
    foreachCollapsedGroups(this, (groupInfo) => {
      if (groupInfo.offset >= loadOptions.skip + loadOptions.take + skipCorrection) {
        return false;
      }
      if (groupInfo.offset >= loadOptions.skip + skipCorrection && groupInfo.count) {
        skipCorrection += groupInfo.count - 1;
        collapsedGroups.push(groupInfo);
        collapsedItemsCount += groupInfo.count;
      }
    });
    each(collapsedGroups, function() {
      loadOptions.filter = createNotGroupFilter(this.path, loadOptions, group);
    });
    options2.storeLoadOptions = loadOptions;
    options2.collapsedGroups = collapsedGroups;
    options2.collapsedItemsCount = collapsedItemsCount;
    options2.skip = loadOptions.skip || 0;
    options2.skipFirstItem = skipFirstItem;
    options2.take = take;
  }
  handleDataLoaded(options2, callBase) {
    var {
      collapsedGroups
    } = options2;
    var groups = m_core_default.normalizeSortingInfo(options2.group);
    var groupCount = groups.length;
    function appendCollapsedPath(data18, path, groups2, collapsedGroup, offset) {
      if (!data18 || !path.length || !groups2.length) {
        return;
      }
      var keyValue;
      var i;
      var pathValue = toComparable(path[0], true);
      for (i = 0; i < data18.length; i++) {
        keyValue = toComparable(data18[i].key, true);
        if (offset >= collapsedGroup.offset || pathValue === keyValue) {
          break;
        } else {
          offset += getGroupCount(data18[i], groups2.length);
        }
      }
      if (!data18.length || pathValue !== keyValue) {
        data18.splice(i, 0, {
          key: path[0],
          items: [],
          count: 1 === path.length ? collapsedGroup.count : void 0
        });
      }
      appendCollapsedPath(data18[i].items, path.slice(1), groups2.slice(1), collapsedGroup, offset);
    }
    if (options2.collapsedItemsCount && options2.extra && options2.extra.totalCount >= 0) {
      if (!options2.extra._totalCountWasIncreasedByCollapsedItems) {
        options2.extra.totalCount += options2.collapsedItemsCount;
        options2.extra._totalCountWasIncreasedByCollapsedItems = true;
      }
    }
    callBase(options2);
    if (groupCount) {
      var {
        data: data17
      } = options2;
      var query = query_default(data17);
      store_helper_default.multiLevelGroup(query, groups).enumerate().done((groupedData) => {
        data17 = groupedData;
      });
      if (collapsedGroups) {
        for (var pathIndex = 0; pathIndex < collapsedGroups.length; pathIndex++) {
          appendCollapsedPath(data17, collapsedGroups[pathIndex].path, groups, collapsedGroups[pathIndex], options2.skip);
        }
      }
      if (!options2.isCustomLoading) {
        processGroupItems3(this, data17, [], options2.skip, options2.skipFirstItem, options2.take);
      }
      options2.data = data17;
    }
  }
  isGroupItemCountable(item) {
    return null === item.items;
  }
  updateTotalItemsCount() {
    var itemsCountCorrection = 0;
    foreachCollapsedGroups(this, (groupInfo) => {
      if (groupInfo.count) {
        itemsCountCorrection -= groupInfo.count - 1;
      }
    });
    super.updateTotalItemsCount(itemsCountCorrection);
  }
  changeRowExpand(path) {
    var that = this;
    var dataSource = that._dataSource;
    var beginPageIndex = dataSource.beginPageIndex ? dataSource.beginPageIndex() : dataSource.pageIndex();
    var dataSourceItems = dataSource.items();
    var offset = correctSkipLoadOption(that, beginPageIndex * dataSource.pageSize());
    var groupInfo = that.findGroupInfo(path);
    var groupCountQuery;
    if (groupInfo && !groupInfo.isExpanded) {
      groupCountQuery = new Deferred().resolve(groupInfo.count);
    } else {
      groupCountQuery = loadTotalCount(dataSource, {
        filter: createGroupFilter(path, {
          filter: dataSource.filter(),
          group: dataSource.group()
        })
      });
    }
    return when(groupCountQuery).done((count) => {
      count = parseInt(count.length ? count[0] : count);
      if (groupInfo) {
        updateGroupOffsets(that, dataSourceItems, [], offset);
        groupInfo.isExpanded = !groupInfo.isExpanded;
        groupInfo.count = count;
      } else {
        groupInfo = {
          offset: -1,
          count,
          path,
          isExpanded: false
        };
        updateGroupOffsets(that, dataSourceItems, [], offset, groupInfo);
        if (groupInfo.offset >= 0) {
          that.addGroupInfo(groupInfo);
        }
      }
      that.updateTotalItemsCount();
    }).fail(function() {
      dataSource._eventsStrategy.fireEvent("loadError", arguments);
    });
  }
  allowCollapseAll() {
    return false;
  }
  refresh(options2, operationTypes) {
    var that = this;
    var {
      storeLoadOptions
    } = options2;
    var dataSource = that._dataSource;
    super.refresh.apply(this, arguments);
    if (operationTypes.reload) {
      return foreachCollapsedGroups(that, (groupInfo) => {
        var groupCountQuery = loadTotalCount(dataSource, {
          filter: createGroupFilter(groupInfo.path, storeLoadOptions)
        });
        var groupOffsetQuery = loadTotalCount(dataSource, {
          filter: createOffsetFilter(groupInfo.path, storeLoadOptions)
        });
        return when(groupOffsetQuery, groupCountQuery).done((offset, count) => {
          offset = parseInt(offset.length ? offset[0] : offset);
          count = parseInt(count.length ? count[0] : count);
          groupInfo.offset = offset;
          if (groupInfo.count !== count) {
            groupInfo.count = count;
            that.updateTotalItemsCount();
          }
        });
      }, true);
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/grouping/m_grouping.js
var DATAGRID_GROUP_PANEL_CLASS = "dx-datagrid-group-panel";
var DATAGRID_GROUP_PANEL_MESSAGE_CLASS = "dx-group-panel-message";
var DATAGRID_GROUP_PANEL_ITEM_CLASS = "dx-group-panel-item";
var DATAGRID_GROUP_PANEL_LABEL_CLASS = "dx-toolbar-label";
var DATAGRID_GROUP_PANEL_CONTAINER_CLASS = "dx-toolbar-item";
var DATAGRID_EXPAND_CLASS = "dx-datagrid-expand";
var DATAGRID_GROUP_ROW_CLASS = "dx-group-row";
var HEADER_FILTER_CLASS_SELECTOR2 = ".dx-header-filter";
var dataSourceAdapterExtender = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    this._initGroupingHelper();
  }
  _initGroupingHelper(options2) {
    var grouping = this._grouping;
    var isAutoExpandAll = this.option("grouping.autoExpandAll");
    var isFocusedRowEnabled = this.option("focusedRowEnabled");
    var remoteOperations = options2 ? options2.remoteOperations : this.remoteOperations();
    var isODataRemoteOperations = remoteOperations.filtering && remoteOperations.sorting && remoteOperations.paging;
    if (isODataRemoteOperations && !remoteOperations.grouping && (isAutoExpandAll || !isFocusedRowEnabled)) {
      if (!grouping || grouping instanceof GroupingHelper2) {
        this._grouping = new GroupingHelper3(this);
      }
    } else if (!grouping || grouping instanceof GroupingHelper3) {
      this._grouping = new GroupingHelper2(this);
    }
  }
  totalItemsCount() {
    var totalCount = super.totalItemsCount();
    return totalCount > 0 && this._dataSource.group() && this._dataSource.requireTotalCount() ? totalCount + this._grouping.totalCountCorrection() : totalCount;
  }
  itemsCount() {
    return this._dataSource.group() ? this._grouping.itemsCount() || 0 : super.itemsCount.apply(this, arguments);
  }
  allowCollapseAll() {
    return this._grouping.allowCollapseAll();
  }
  isGroupItemCountable(item) {
    return this._grouping.isGroupItemCountable(item);
  }
  isRowExpanded(key) {
    var groupInfo = this._grouping.findGroupInfo(key);
    return groupInfo ? groupInfo.isExpanded : !this._grouping.allowCollapseAll();
  }
  collapseAll(groupIndex) {
    return this._collapseExpandAll(groupIndex, false);
  }
  expandAll(groupIndex) {
    return this._collapseExpandAll(groupIndex, true);
  }
  _collapseExpandAll(groupIndex, isExpand) {
    var dataSource = this._dataSource;
    var group = dataSource.group();
    var groups = m_core_default.normalizeSortingInfo(group || []);
    if (groups.length) {
      for (var i = 0; i < groups.length; i++) {
        if (void 0 === groupIndex || groupIndex === i) {
          groups[i].isExpanded = isExpand;
        } else if (group && group[i]) {
          groups[i].isExpanded = group[i].isExpanded;
        }
      }
      dataSource.group(groups);
      this._grouping.foreachGroups((groupInfo, parents) => {
        if (void 0 === groupIndex || groupIndex === parents.length - 1) {
          groupInfo.isExpanded = isExpand;
        }
      }, false, true);
      this.resetPagesCache();
    }
    return true;
  }
  refresh() {
    super.refresh.apply(this, arguments);
    return this._grouping.refresh.apply(this._grouping, arguments);
  }
  changeRowExpand(path) {
    var dataSource = this._dataSource;
    if (dataSource.group()) {
      dataSource.beginLoading();
      if (this._lastLoadOptions) {
        this._lastLoadOptions.groupExpand = true;
      }
      return this._changeRowExpandCore(path).always(() => {
        dataSource.endLoading();
      });
    }
  }
  _changeRowExpandCore(path) {
    return this._grouping.changeRowExpand(path);
  }
  _hasGroupLevelsExpandState(group, isExpanded) {
    if (group && Array.isArray(group)) {
      for (var i = 0; i < group.length; i++) {
        if (group[i].isExpanded === isExpanded) {
          return true;
        }
      }
    }
  }
  _customizeRemoteOperations(options2, operationTypes) {
    var {
      remoteOperations
    } = options2;
    if (options2.storeLoadOptions.group) {
      if (remoteOperations.grouping && !options2.isCustomLoading) {
        if (!remoteOperations.groupPaging || this._hasGroupLevelsExpandState(options2.storeLoadOptions.group, true)) {
          remoteOperations.paging = false;
        }
      }
      if (!remoteOperations.grouping && (!remoteOperations.sorting || !remoteOperations.filtering || options2.isCustomLoading || this._hasGroupLevelsExpandState(options2.storeLoadOptions.group, false))) {
        remoteOperations.paging = false;
      }
    } else if (!options2.isCustomLoading && remoteOperations.paging && operationTypes.grouping) {
      this.resetCache();
    }
    super._customizeRemoteOperations.apply(this, arguments);
  }
  _handleDataLoading(options2) {
    super._handleDataLoading(options2);
    this._initGroupingHelper(options2);
    return this._grouping.handleDataLoading(options2);
  }
  _handleDataLoaded(options2) {
    return this._grouping.handleDataLoaded(options2, super._handleDataLoaded.bind(this));
  }
  _handleDataLoadedCore(options2) {
    return this._grouping.handleDataLoadedCore(options2, super._handleDataLoadedCore.bind(this));
  }
};
m_data_source_adapter_default.extend(dataSourceAdapterExtender);
var GroupingDataControllerExtender = (Base) => class extends Base {
  init() {
    super.init();
    this.createAction("onRowExpanding");
    this.createAction("onRowExpanded");
    this.createAction("onRowCollapsing");
    this.createAction("onRowCollapsed");
  }
  _beforeProcessItems(items) {
    var groupColumns = this._columnsController.getGroupColumns();
    items = super._beforeProcessItems(items);
    if (items.length && groupColumns.length) {
      items = this._processGroupItems(items, groupColumns.length);
    }
    return items;
  }
  _processItem(item, options2) {
    if (isDefined(item.groupIndex) && isString(item.rowType) && 0 === item.rowType.indexOf("group")) {
      item = this._processGroupItem(item, options2);
      options2.dataIndex = 0;
    } else {
      item = super._processItem.apply(this, arguments);
    }
    return item;
  }
  _processGroupItem(item, options2) {
    return item;
  }
  _processGroupItems(items, groupsCount, options2) {
    var groupedColumns = this._columnsController.getGroupColumns();
    var column = groupedColumns[groupedColumns.length - groupsCount];
    if (!options2) {
      var scrollingMode = this.option("scrolling.mode");
      options2 = {
        collectContinuationItems: "virtual" !== scrollingMode && "infinite" !== scrollingMode,
        resultItems: [],
        path: [],
        values: []
      };
    }
    var {
      resultItems
    } = options2;
    if (options2.data) {
      if (options2.collectContinuationItems || !options2.data.isContinuation) {
        resultItems.push({
          rowType: "group",
          data: options2.data,
          groupIndex: options2.path.length - 1,
          isExpanded: !!options2.data.items,
          key: options2.path.slice(0),
          values: options2.values.slice(0)
        });
      }
    }
    if (items) {
      if (0 === groupsCount) {
        resultItems.push.apply(resultItems, items);
      } else {
        for (var i = 0; i < items.length; i++) {
          var item = items[i];
          if (item && "items" in item) {
            options2.data = item;
            options2.path.push(item.key);
            options2.values.push(column && column.deserializeValue && !column.calculateDisplayValue ? column.deserializeValue(item.key) : item.key);
            this._processGroupItems(item.items, groupsCount - 1, options2);
            options2.data = void 0;
            options2.path.pop();
            options2.values.pop();
          } else {
            resultItems.push(item);
          }
        }
      }
    }
    return resultItems;
  }
  publicMethods() {
    return super.publicMethods().concat(["collapseAll", "expandAll", "isRowExpanded", "expandRow", "collapseRow"]);
  }
  collapseAll(groupIndex) {
    var dataSource = this._dataSource;
    if (dataSource && dataSource.collapseAll(groupIndex)) {
      dataSource.pageIndex(0);
      dataSource.reload();
    }
  }
  expandAll(groupIndex) {
    var dataSource = this._dataSource;
    if (dataSource && dataSource.expandAll(groupIndex)) {
      dataSource.pageIndex(0);
      dataSource.reload();
    }
  }
  changeRowExpand(key) {
    var that = this;
    var expanded = that.isRowExpanded(key);
    var args = {
      key,
      expanded
    };
    that.executeAction(expanded ? "onRowCollapsing" : "onRowExpanding", args);
    if (!args.cancel) {
      return when(that._changeRowExpandCore(key)).done(() => {
        args.expanded = !expanded;
        that.executeAction(expanded ? "onRowCollapsed" : "onRowExpanded", args);
      });
    }
    return new Deferred().resolve();
  }
  _changeRowExpandCore(key) {
    var that = this;
    var dataSource = this._dataSource;
    var d = new Deferred();
    if (!dataSource) {
      d.resolve();
    } else {
      when(dataSource.changeRowExpand(key)).done(() => {
        that.load().done(d.resolve).fail(d.reject);
      }).fail(d.reject);
    }
    return d;
  }
  isRowExpanded(key) {
    var dataSource = this._dataSource;
    return dataSource && dataSource.isRowExpanded(key);
  }
  expandRow(key) {
    if (!this.isRowExpanded(key)) {
      return this.changeRowExpand(key);
    }
    return new Deferred().resolve();
  }
  collapseRow(key) {
    if (this.isRowExpanded(key)) {
      return this.changeRowExpand(key);
    }
    return new Deferred().resolve();
  }
  optionChanged(args) {
    if ("grouping" === args.name) {
      args.name = "dataSource";
    }
    super.optionChanged(args);
  }
};
var onGroupingMenuItemClick = function(column, params) {
  var columnsController = this._columnsController;
  switch (params.itemData.value) {
    case "group":
      var groups = columnsController._dataSource.group() || [];
      columnsController.columnOption(column.dataField, "groupIndex", groups.length);
      break;
    case "ungroup":
      columnsController.columnOption(column.dataField, "groupIndex", -1);
      break;
    case "ungroupAll":
      this.component.clearGrouping();
  }
};
var isGroupPanelVisible = (groupPanelOptions) => {
  var visible = null === groupPanelOptions || void 0 === groupPanelOptions ? void 0 : groupPanelOptions.visible;
  return "auto" === visible ? "desktop" === devices_default.current().deviceType : !!visible;
};
var allowDragging = (groupPanelOptions, column) => {
  var isVisible = isGroupPanelVisible(groupPanelOptions);
  var canDrag = (null === groupPanelOptions || void 0 === groupPanelOptions ? void 0 : groupPanelOptions.allowColumnDragging) && column.allowGrouping;
  return isVisible && !!canDrag;
};
var GroupingHeaderPanelExtender = (Base) => class extends Base {
  _getToolbarItems() {
    var items = super._getToolbarItems();
    return this._appendGroupingItem(items);
  }
  _appendGroupingItem(items) {
    if (this._isGroupPanelVisible()) {
      var isRendered = false;
      var toolbarItem = {
        template: () => {
          var $groupPanel = renderer_default("<div>").addClass(DATAGRID_GROUP_PANEL_CLASS);
          this._updateGroupPanelContent($groupPanel);
          registerKeyboardAction2("groupPanel", this, $groupPanel, void 0, this._handleActionKeyDown.bind(this));
          return $groupPanel;
        },
        name: "groupPanel",
        onItemRendered: () => {
          isRendered && this.renderCompleted.fire();
          isRendered = true;
        },
        location: "before",
        locateInMenu: "never",
        sortIndex: 1
      };
      items.push(toolbarItem);
      this.updateToolbarDimensions();
    }
    return items;
  }
  _handleActionKeyDown(args) {
    var {
      event
    } = args;
    var $target = renderer_default(event.target);
    var groupColumnIndex = $target.closest(".".concat(DATAGRID_GROUP_PANEL_ITEM_CLASS)).index();
    var column = this._columnsController.getGroupColumns()[groupColumnIndex];
    var columnIndex = column && column.index;
    if ($target.is(HEADER_FILTER_CLASS_SELECTOR2)) {
      this._headerFilterController.showHeaderFilterMenu(columnIndex, true);
    } else {
      this._processGroupItemAction(columnIndex);
    }
    event.preventDefault();
  }
  _isGroupPanelVisible() {
    return isGroupPanelVisible(this.option("groupPanel"));
  }
  _renderGroupPanelItems($groupPanel, groupColumns) {
    var that = this;
    $groupPanel.empty();
    each(groupColumns, (index, groupColumn) => {
      that._createGroupPanelItem($groupPanel, groupColumn);
    });
    restoreFocus(this);
  }
  _createGroupPanelItem($rootElement, groupColumn) {
    var $groupPanelItem = renderer_default("<div>").addClass(groupColumn.cssClass).addClass(DATAGRID_GROUP_PANEL_ITEM_CLASS).data("columnData", groupColumn).appendTo($rootElement).text(groupColumn.caption);
    setTabIndex(this, $groupPanelItem);
    return $groupPanelItem;
  }
  _columnOptionChanged(e) {
    if (!this._requireReady && !m_core_default.checkChanges(e.optionNames, ["width", "visibleWidth"])) {
      var $toolbarElement = this.element();
      var $groupPanel = $toolbarElement && $toolbarElement.find(".".concat(DATAGRID_GROUP_PANEL_CLASS));
      if ($groupPanel && $groupPanel.length) {
        this._updateGroupPanelContent($groupPanel);
        this.updateToolbarDimensions();
        this.renderCompleted.fire();
      }
    }
    super._columnOptionChanged();
  }
  _updateGroupPanelContent($groupPanel) {
    var groupColumns = this.getColumns();
    var groupPanelOptions = this.option("groupPanel");
    this._renderGroupPanelItems($groupPanel, groupColumns);
    if (groupPanelOptions.allowColumnDragging && !groupColumns.length) {
      renderer_default("<div>").addClass(DATAGRID_GROUP_PANEL_MESSAGE_CLASS).text(groupPanelOptions.emptyPanelText).appendTo($groupPanel);
      $groupPanel.closest(".".concat(DATAGRID_GROUP_PANEL_CONTAINER_CLASS)).addClass(DATAGRID_GROUP_PANEL_LABEL_CLASS);
      $groupPanel.closest(".".concat(DATAGRID_GROUP_PANEL_LABEL_CLASS)).css("maxWidth", "none");
    }
  }
  allowDragging(column) {
    var groupPanelOptions = this.option("groupPanel");
    return allowDragging(groupPanelOptions, column);
  }
  getColumnElements() {
    var $element = this.element();
    return $element && $element.find(".".concat(DATAGRID_GROUP_PANEL_ITEM_CLASS));
  }
  getColumns() {
    return this._columnsController.getGroupColumns();
  }
  getBoundingRect() {
    var $element = this.element();
    if ($element && $element.find(".".concat(DATAGRID_GROUP_PANEL_CLASS)).length) {
      var offset = $element.offset();
      return {
        top: offset.top,
        bottom: offset.top + getHeight($element)
      };
    }
    return null;
  }
  getName() {
    return "group";
  }
  getContextMenuItems(options2) {
    var contextMenuEnabled = this.option("grouping.contextMenuEnabled");
    var $groupedColumnElement = renderer_default(options2.targetElement).closest(".".concat(DATAGRID_GROUP_PANEL_ITEM_CLASS));
    var items;
    if ($groupedColumnElement.length) {
      options2.column = $groupedColumnElement.data("columnData");
    }
    if (contextMenuEnabled && options2.column) {
      var {
        column
      } = options2;
      var isGroupingAllowed = isDefined(column.allowGrouping) ? column.allowGrouping : true;
      if (isGroupingAllowed) {
        var isColumnGrouped = isDefined(column.groupIndex) && column.groupIndex > -1;
        var groupingTexts = this.option("grouping.texts");
        var onItemClick = onGroupingMenuItemClick.bind(this, column);
        items = [{
          text: groupingTexts.ungroup,
          value: "ungroup",
          disabled: !isColumnGrouped,
          onItemClick
        }, {
          text: groupingTexts.ungroupAll,
          value: "ungroupAll",
          onItemClick
        }];
      }
    }
    return items;
  }
  hasGroupedColumns() {
    return this._isGroupPanelVisible() && !!this.getColumns().length;
  }
  optionChanged(args) {
    if ("groupPanel" === args.name) {
      this._invalidate();
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
};
var GroupingRowsViewExtender = (Base) => class extends Base {
  getContextMenuItems(options2) {
    var contextMenuEnabled = this.option("grouping.contextMenuEnabled");
    var items;
    if (contextMenuEnabled && options2.row && "group" === options2.row.rowType) {
      var columnsController = this._columnsController;
      var column = columnsController.columnOption("groupIndex:".concat(options2.row.groupIndex));
      if (column && column.allowGrouping) {
        var groupingTexts = this.option("grouping.texts");
        var onItemClick = onGroupingMenuItemClick.bind(this, column);
        items = [];
        items.push({
          text: groupingTexts.ungroup,
          value: "ungroup",
          onItemClick
        }, {
          text: groupingTexts.ungroupAll,
          value: "ungroupAll",
          onItemClick
        });
      }
    }
    return items;
  }
  _rowClick(e) {
    var expandMode = this.option("grouping.expandMode");
    var scrollingMode = this.option("scrolling.mode");
    var isGroupRowStateChanged = "infinite" !== scrollingMode && "rowClick" === expandMode && renderer_default(e.event.target).closest(".".concat(DATAGRID_GROUP_ROW_CLASS)).length;
    var isExpandButtonClicked = renderer_default(e.event.target).closest(".".concat(DATAGRID_EXPAND_CLASS)).length;
    if (isGroupRowStateChanged || isExpandButtonClicked) {
      this._changeGroupRowState(e);
    }
    super._rowClick(e);
  }
  _changeGroupRowState(e) {
    var row = this._dataController.items()[e.rowIndex];
    var allowCollapsing = this._columnsController.columnOption("groupIndex:".concat(row.groupIndex), "allowCollapsing");
    if ("data" === row.rowType || "group" === row.rowType && false !== allowCollapsing) {
      this._dataController.changeRowExpand(row.key, true);
      e.event.preventDefault();
      e.handled = true;
    }
  }
};
var columnHeadersViewExtender = (Base) => class extends Base {
  getContextMenuItems(options2) {
    var contextMenuEnabled = this.option("grouping.contextMenuEnabled");
    var items = super.getContextMenuItems(options2);
    if (contextMenuEnabled && options2.row && ("header" === options2.row.rowType || "detailAdaptive" === options2.row.rowType)) {
      var {
        column
      } = options2;
      if (!column.command && (!isDefined(column.allowGrouping) || column.allowGrouping)) {
        var groupingTexts = this.option("grouping.texts");
        var isColumnGrouped = isDefined(column.groupIndex) && column.groupIndex > -1;
        var onItemClick = onGroupingMenuItemClick.bind(this, column);
        items = items || [];
        items.push({
          text: groupingTexts.groupByThisColumn,
          value: "group",
          beginGroup: true,
          disabled: isColumnGrouped,
          onItemClick
        });
        if (column.showWhenGrouped) {
          items.push({
            text: groupingTexts.ungroup,
            value: "ungroup",
            disabled: !isColumnGrouped,
            onItemClick
          });
        }
        items.push({
          text: groupingTexts.ungroupAll,
          value: "ungroupAll",
          onItemClick
        });
      }
    }
    return items;
  }
  allowDragging(column) {
    var groupPanelOptions = this.option("groupPanel");
    return allowDragging(groupPanelOptions, column) || super.allowDragging(column);
  }
};
m_core_default.registerModule("grouping", {
  defaultOptions: () => ({
    grouping: {
      autoExpandAll: true,
      allowCollapsing: true,
      contextMenuEnabled: false,
      expandMode: "buttonClick",
      texts: {
        groupContinuesMessage: message_default.format("dxDataGrid-groupContinuesMessage"),
        groupContinuedMessage: message_default.format("dxDataGrid-groupContinuedMessage"),
        groupByThisColumn: message_default.format("dxDataGrid-groupHeaderText"),
        ungroup: message_default.format("dxDataGrid-ungroupHeaderText"),
        ungroupAll: message_default.format("dxDataGrid-ungroupAllText")
      }
    },
    groupPanel: {
      visible: false,
      emptyPanelText: message_default.format("dxDataGrid-groupPanelEmptyText"),
      allowColumnDragging: true
    }
  }),
  extenders: {
    controllers: {
      data: GroupingDataControllerExtender,
      columns: (Base) => class extends Base {
        _getExpandColumnOptions() {
          var options2 = super._getExpandColumnOptions.apply(this, arguments);
          options2.cellTemplate = m_core_default.getExpandCellTemplate();
          return options2;
        }
      },
      editing: (Base) => class extends Base {
        _isProcessedItem(item) {
          return isDefined(item.groupIndex) && isString(item.rowType) && 0 === item.rowType.indexOf("group");
        }
      }
    },
    views: {
      headerPanel: GroupingHeaderPanelExtender,
      rowsView: GroupingRowsViewExtender,
      columnHeadersView: columnHeadersViewExtender
    }
  }
});

// node_modules/devextreme/esm/__internal/grids/grid_core/master_detail/m_master_detail.js
var MASTER_DETAIL_CELL_CLASS = "dx-master-detail-cell";
var MASTER_DETAIL_ROW_CLASS = "dx-master-detail-row";
var CELL_FOCUS_DISABLED_CLASS2 = "dx-cell-focus-disabled";
var ROW_LINES_CLASS2 = "dx-row-lines";
var columns3 = (Base) => class extends Base {
  _getExpandColumnsCore() {
    var expandColumns = super._getExpandColumnsCore();
    if (this.option("masterDetail.enabled")) {
      expandColumns.push({
        type: "detailExpand",
        cellTemplate: m_utils_default.getExpandCellTemplate()
      });
    }
    return expandColumns;
  }
};
var initMasterDetail = function(that) {
  that._expandedItems = [];
  that._isExpandAll = that.option("masterDetail.autoExpandAll");
};
var dataMasterDetailExtenderMixin = (Base) => class extends Base {
  init() {
    initMasterDetail(this);
    super.init();
  }
  expandAll(groupIndex) {
    if (groupIndex < 0) {
      this._isExpandAll = true;
      this._expandedItems = [];
      this.updateItems();
    } else {
      super.expandAll.apply(this, arguments);
    }
  }
  collapseAll(groupIndex) {
    if (groupIndex < 0) {
      this._isExpandAll = false;
      this._expandedItems = [];
      this.updateItems();
    } else {
      super.collapseAll.apply(this, arguments);
    }
  }
  isRowExpandedHack() {
    return super.isRowExpanded.apply(this, arguments);
  }
  isRowExpanded(key) {
    var expandIndex = m_utils_default.getIndexByKey(key, this._expandedItems);
    if (Array.isArray(key)) {
      return super.isRowExpanded.apply(this, arguments);
    }
    return !!(this._isExpandAll ^ (expandIndex >= 0 && this._expandedItems[expandIndex].visible));
  }
  _getRowIndicesForExpand(key) {
    var rowIndex = this.getRowIndexByKey(key);
    return [rowIndex, rowIndex + 1];
  }
  _changeRowExpandCore(key) {
    var result2;
    if (Array.isArray(key)) {
      result2 = super._changeRowExpandCore.apply(this, arguments);
    } else {
      var expandIndex = m_utils_default.getIndexByKey(key, this._expandedItems);
      if (expandIndex >= 0) {
        var {
          visible
        } = this._expandedItems[expandIndex];
        this._expandedItems[expandIndex].visible = !visible;
      } else {
        this._expandedItems.push({
          key,
          visible: true
        });
      }
      this.updateItems({
        changeType: "update",
        rowIndices: this._getRowIndicesForExpand(key)
      });
      result2 = new Deferred().resolve();
    }
    return result2;
  }
  _processDataItemHack() {
    return super._processDataItem.apply(this, arguments);
  }
  _processDataItem(data17, options2) {
    var dataItem = super._processDataItem.apply(this, arguments);
    dataItem.isExpanded = this.isRowExpanded(dataItem.key);
    if (void 0 === options2.detailColumnIndex) {
      options2.detailColumnIndex = -1;
      each(options2.visibleColumns, (index, column) => {
        if ("expand" === column.command && !isDefined(column.groupIndex)) {
          options2.detailColumnIndex = index;
          return false;
        }
        return;
      });
    }
    if (options2.detailColumnIndex >= 0) {
      dataItem.values[options2.detailColumnIndex] = dataItem.isExpanded;
    }
    return dataItem;
  }
  _processItemsHack() {
    return super._processItems.apply(this, arguments);
  }
  _processItems(items, change) {
    var that = this;
    var {
      changeType
    } = change;
    var result2 = [];
    items = super._processItems.apply(that, arguments);
    if ("loadingAll" === changeType) {
      return items;
    }
    if ("refresh" === changeType) {
      that._expandedItems = grep(that._expandedItems, (item) => item.visible);
    }
    each(items, (index, item) => {
      result2.push(item);
      var expandIndex = m_utils_default.getIndexByKey(item.key, that._expandedItems);
      if ("data" === item.rowType && (item.isExpanded || expandIndex >= 0) && !item.isNewRow) {
        result2.push({
          visible: item.isExpanded,
          rowType: "detail",
          key: item.key,
          data: item.data,
          values: []
        });
      }
    });
    return result2;
  }
  optionChanged(args) {
    var isEnabledChanged;
    var isAutoExpandAllChanged;
    if ("masterDetail" === args.name) {
      args.name = "dataSource";
      switch (args.fullName) {
        case "masterDetail":
          var value2 = args.value || {};
          var previousValue = args.previousValue || {};
          isEnabledChanged = value2.enabled !== previousValue.enabled;
          isAutoExpandAllChanged = value2.autoExpandAll !== previousValue.autoExpandAll;
          break;
        case "masterDetail.template":
          initMasterDetail(this);
          break;
        case "masterDetail.enabled":
          isEnabledChanged = true;
          break;
        case "masterDetail.autoExpandAll":
          isAutoExpandAllChanged = true;
      }
      if (isEnabledChanged || isAutoExpandAllChanged) {
        initMasterDetail(this);
      }
    }
    super.optionChanged(args);
  }
};
var resizing2 = (Base) => class extends Base {
  fireContentReadyAction() {
    super.fireContentReadyAction.apply(this, arguments);
    this._updateParentDataGrids(this.component.$element());
  }
  _updateParentDataGrids($element) {
    var $masterDetailRow = $element.closest(".".concat(MASTER_DETAIL_ROW_CLASS));
    if ($masterDetailRow.length) {
      when(this._updateMasterDataGrid($masterDetailRow, $element)).done(() => {
        this._updateParentDataGrids($masterDetailRow.parent());
      });
    }
  }
  _updateMasterDataGrid($masterDetailRow, $detailElement) {
    var masterRowOptions = renderer_default($masterDetailRow).data("options");
    var masterDataGrid = renderer_default($masterDetailRow).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");
    if (masterRowOptions && masterDataGrid) {
      return this._updateMasterDataGridCore(masterDataGrid, masterRowOptions);
    }
    return;
  }
  _updateMasterDataGridCore(masterDataGrid, masterRowOptions) {
    var d = Deferred();
    if (masterDataGrid.getView("rowsView").isFixedColumns()) {
      this._updateFixedMasterDetailGrids(masterDataGrid, masterRowOptions.rowIndex, renderer_default(masterRowOptions.rowElement)).done(d.resolve);
    } else {
      if (true === masterDataGrid.option("scrolling.useNative")) {
        masterDataGrid.updateDimensions().done(() => d.resolve(true));
        return;
      }
      var scrollable = masterDataGrid.getScrollable();
      if (scrollable) {
        null === scrollable || void 0 === scrollable ? void 0 : scrollable.update().done(() => d.resolve());
      } else {
        d.resolve();
      }
    }
    return d.promise();
  }
  _updateFixedMasterDetailGrids(masterDataGrid, masterRowIndex, $detailElement) {
    var d = Deferred();
    var $rows = renderer_default(masterDataGrid.getRowElement(masterRowIndex));
    var $tables = renderer_default(masterDataGrid.getView("rowsView").getTableElements());
    var rowsNotEqual = 2 === (null === $rows || void 0 === $rows ? void 0 : $rows.length) && getHeight($rows.eq(0)) !== getHeight($rows.eq(1));
    var tablesNotEqual = 2 === (null === $tables || void 0 === $tables ? void 0 : $tables.length) && getHeight($tables.eq(0)) !== getHeight($tables.eq(1));
    if (rowsNotEqual || tablesNotEqual) {
      var detailElementWidth = getWidth($detailElement);
      masterDataGrid.updateDimensions().done(() => {
        var isDetailHorizontalScrollCanBeShown = this.option("columnAutoWidth") && true === masterDataGrid.option("scrolling.useNative");
        var isDetailGridWidthChanged = isDetailHorizontalScrollCanBeShown && detailElementWidth !== getWidth($detailElement);
        if (isDetailHorizontalScrollCanBeShown && isDetailGridWidthChanged) {
          this.updateDimensions().done(() => d.resolve(true));
        } else {
          d.resolve(true);
        }
      });
      return d.promise();
    }
    return Deferred().resolve();
  }
  _toggleBestFitMode(isBestFit) {
    super._toggleBestFitMode.apply(this, arguments);
    if (this.option("masterDetail.template")) {
      var $rowsTable = this._rowsView.getTableElement();
      if ($rowsTable) {
        $rowsTable.find(".dx-master-detail-cell").css("maxWidth", isBestFit ? 0 : "");
      }
    }
  }
};
var rowsView2 = (Base) => class extends Base {
  _getCellTemplate(options2) {
    var {
      column
    } = options2;
    var editingController = this._editingController;
    var isEditRow = editingController && editingController.isEditRow(options2.rowIndex);
    var template;
    if ("detail" === column.command && !isEditRow) {
      template = this.option("masterDetail.template") || {
        allowRenderToDetachedContainer: false,
        render: this._getDefaultTemplate(column)
      };
    } else {
      template = super._getCellTemplate.apply(this, arguments);
    }
    return template;
  }
  _isDetailRow(row) {
    return row && row.rowType && 0 === row.rowType.indexOf("detail");
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row && this._isDetailRow(row)) {
      this.option("showRowLines") && $row.addClass(ROW_LINES_CLASS2);
      $row.addClass(MASTER_DETAIL_ROW_CLASS);
      if (isDefined(row.visible)) {
        $row.toggle(row.visible);
      }
    }
    return $row;
  }
  _renderCells($row, options2) {
    var {
      row
    } = options2;
    var $detailCell;
    var visibleColumns = this._columnsController.getVisibleColumns();
    if (row.rowType && this._isDetailRow(row)) {
      if (this._needRenderCell(0, options2.columnIndices)) {
        $detailCell = this._renderCell($row, {
          value: null,
          row,
          rowIndex: row.rowIndex,
          column: {
            command: "detail"
          },
          columnIndex: 0,
          change: options2.change
        });
        $detailCell.addClass(CELL_FOCUS_DISABLED_CLASS2).addClass(MASTER_DETAIL_CELL_CLASS).attr("colSpan", visibleColumns.length);
      }
    } else {
      super._renderCells.apply(this, arguments);
    }
  }
};
var masterDetailModule = {
  defaultOptions: () => ({
    masterDetail: {
      enabled: false,
      autoExpandAll: false,
      template: null
    }
  }),
  extenders: {
    controllers: {
      columns: columns3,
      data: dataMasterDetailExtenderMixin,
      resizing: resizing2
    },
    views: {
      rowsView: rowsView2
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/master_detail.js
m_core_default.registerModule("masterDetail", masterDetailModule);

// node_modules/devextreme/esm/ui/text_box/ui.text_editor.js
var ui_text_editor_default = m_text_editor_default;

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.spin.js
var SPIN_CLASS = "dx-numberbox-spin";
var SPIN_BUTTON_CLASS = "dx-numberbox-spin-button";
var SPIN_HOLD_DELAY = 100;
var NUMBER_BOX = "dxNumberBox";
var POINTERUP_EVENT_NAME = addNamespace(pointer_default.up, NUMBER_BOX);
var POINTERCANCEL_EVENT_NAME = addNamespace(pointer_default.cancel, NUMBER_BOX);
var SpinButton = ui_widget_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      direction: "up",
      onChange: null,
      activeStateEnabled: true,
      hoverStateEnabled: true
    });
  },
  _initMarkup() {
    this.callBase();
    var direction = "".concat(SPIN_CLASS, "-").concat(this.option("direction"));
    this.$element().addClass(SPIN_BUTTON_CLASS).addClass(direction);
    this._spinIcon = renderer_default("<div>").addClass("".concat(direction, "-icon")).appendTo(this.$element());
  },
  _render() {
    this.callBase();
    var eventName = addNamespace(pointer_default.down, this.NAME);
    var $element = this.$element();
    events_engine_default.off($element, eventName);
    events_engine_default.on($element, eventName, this._spinDownHandler.bind(this));
    this._spinChangeHandler = this._createActionByOption("onChange");
  },
  _spinDownHandler(e) {
    e.preventDefault();
    this._clearTimer();
    events_engine_default.on(this.$element(), hold_default.name, () => {
      this._feedBackDeferred = Deferred();
      lock(this._feedBackDeferred);
      this._spinChangeHandler({
        event: e
      });
      this._holdTimer = setInterval(this._spinChangeHandler, SPIN_HOLD_DELAY, {
        event: e
      });
    });
    var document2 = dom_adapter_default.getDocument();
    events_engine_default.on(document2, POINTERUP_EVENT_NAME, this._clearTimer.bind(this));
    events_engine_default.on(document2, POINTERCANCEL_EVENT_NAME, this._clearTimer.bind(this));
    this._spinChangeHandler({
      event: e
    });
  },
  _dispose() {
    this._clearTimer();
    this.callBase();
  },
  _clearTimer() {
    events_engine_default.off(this.$element(), hold_default.name);
    var document2 = dom_adapter_default.getDocument();
    events_engine_default.off(document2, POINTERUP_EVENT_NAME);
    events_engine_default.off(document2, POINTERCANCEL_EVENT_NAME);
    if (this._feedBackDeferred) {
      this._feedBackDeferred.resolve();
    }
    if (this._holdTimer) {
      clearInterval(this._holdTimer);
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "onChange":
      case "direction":
        this._invalidate();
        break;
      default:
        this.callBase(args);
    }
  }
});
var m_number_box_spin_default = SpinButton;

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.spins.js
var SPIN_CLASS2 = "dx-numberbox-spin";
var SPIN_CONTAINER_CLASS = "dx-numberbox-spin-container";
var SPIN_TOUCH_FRIENDLY_CLASS = "dx-numberbox-spin-touch-friendly";
var SpinButtons = class extends TextEditorButton {
  _attachEvents(instance, $spinContainer) {
    var {
      editor
    } = this;
    var eventName = addNamespace(pointer_default.down, editor.NAME);
    var $spinContainerChildren = $spinContainer.children();
    var pointerDownAction = editor._createAction((e) => editor._spinButtonsPointerDownHandler(e));
    events_engine_default.off($spinContainer, eventName);
    events_engine_default.on($spinContainer, eventName, (e) => pointerDownAction({
      event: e
    }));
    m_number_box_spin_default.getInstance($spinContainerChildren.eq(0)).option("onChange", (e) => editor._spinUpChangeHandler(e));
    m_number_box_spin_default.getInstance($spinContainerChildren.eq(1)).option("onChange", (e) => editor._spinDownChangeHandler(e));
  }
  _create() {
    var {
      editor
    } = this;
    var $spinContainer = renderer_default("<div>").addClass(SPIN_CONTAINER_CLASS);
    var $spinUp = renderer_default("<div>").appendTo($spinContainer);
    var $spinDown = renderer_default("<div>").appendTo($spinContainer);
    var options2 = this._getOptions();
    this._addToContainer($spinContainer);
    editor._createComponent($spinUp, m_number_box_spin_default, extend({
      direction: "up"
    }, options2));
    editor._createComponent($spinDown, m_number_box_spin_default, extend({
      direction: "down"
    }, options2));
    this._legacyRender(editor.$element(), this._isTouchFriendly(), options2.visible);
    return {
      instance: $spinContainer,
      $element: $spinContainer
    };
  }
  _getOptions() {
    var {
      editor
    } = this;
    var visible = this._isVisible();
    var disabled = editor.option("disabled");
    return {
      visible,
      disabled
    };
  }
  _isVisible() {
    var {
      editor
    } = this;
    return super._isVisible() && editor.option("showSpinButtons");
  }
  _isTouchFriendly() {
    var {
      editor
    } = this;
    return editor.option("showSpinButtons") && editor.option("useLargeSpinButtons");
  }
  _legacyRender($editor, isTouchFriendly, isVisible) {
    $editor.toggleClass(SPIN_TOUCH_FRIENDLY_CLASS, isTouchFriendly);
    $editor.toggleClass(SPIN_CLASS2, isVisible);
  }
  update() {
    var shouldUpdate = super.update();
    if (shouldUpdate) {
      var {
        editor,
        instance
      } = this;
      var $editor = editor.$element();
      var isVisible = this._isVisible();
      var isTouchFriendly = this._isTouchFriendly();
      var $spinButtons = instance.children();
      var spinUp = m_number_box_spin_default.getInstance($spinButtons.eq(0));
      var spinDown = m_number_box_spin_default.getInstance($spinButtons.eq(1));
      var options2 = this._getOptions();
      spinUp.option(options2);
      spinDown.option(options2);
      this._legacyRender($editor, isTouchFriendly, isVisible);
    }
  }
};

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.base.js
var math2 = Math;
var WIDGET_CLASS3 = "dx-numberbox";
var FIREFOX_CONTROL_KEYS = ["tab", "del", "backspace", "leftArrow", "rightArrow", "home", "end", "enter"];
var FORCE_VALUECHANGE_EVENT_NAMESPACE = "NumberBoxForceValueChange";
var NumberBoxBase = ui_text_editor_default.inherit({
  _supportedKeys() {
    return extend(this.callBase(), {
      upArrow(e) {
        if (!isCommandKeyPressed(e)) {
          e.preventDefault();
          e.stopPropagation();
          this._spinUpChangeHandler(e);
        }
      },
      downArrow(e) {
        if (!isCommandKeyPressed(e)) {
          e.preventDefault();
          e.stopPropagation();
          this._spinDownChangeHandler(e);
        }
      },
      enter() {
      }
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      value: 0,
      min: void 0,
      max: void 0,
      step: 1,
      showSpinButtons: false,
      useLargeSpinButtons: true,
      mode: "text",
      invalidValueMessage: message_default.format("dxNumberBox-invalidValueMessage"),
      buttons: void 0
    });
  },
  _useTemplates: () => false,
  _getDefaultButtons() {
    return this.callBase().concat([{
      name: "spins",
      Ctor: SpinButtons
    }]);
  },
  _isSupportInputMode() {
    var version = parseFloat(browser_default.version);
    return browser_default.chrome && version >= 66 || browser_default.safari && version >= 12;
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => devices_default.real().generic && !devices_default.isSimulator(),
      options: {
        useLargeSpinButtons: false
      }
    }, {
      device: (function() {
        return "desktop" !== devices_default.real().deviceType && !this._isSupportInputMode();
      }).bind(this),
      options: {
        mode: "number"
      }
    }]);
  },
  _initMarkup() {
    this._renderSubmitElement();
    this.$element().addClass(WIDGET_CLASS3);
    this.callBase();
  },
  _getDefaultAttributes() {
    var attributes = this.callBase();
    attributes.inputmode = "decimal";
    return attributes;
  },
  _renderContentImpl() {
    this.option("isValid") && this._validateValue(this.option("value"));
    this.setAria("role", "spinbutton");
  },
  _renderSubmitElement() {
    this._$submitElement = renderer_default("<input>").attr("type", "hidden").appendTo(this.$element());
    this._setSubmitValue(this.option("value"));
  },
  _setSubmitValue(value2) {
    this._getSubmitElement().val(applyServerDecimalSeparator(value2));
  },
  _getSubmitElement() {
    return this._$submitElement;
  },
  _keyPressHandler(e) {
    this.callBase(e);
    var char = getChar(e);
    var isInputCharValid = /[\d.,eE\-+]/.test(char);
    if (!isInputCharValid) {
      var keyName = normalizeKeyName(e);
      if (isCommandKeyPressed(e) || keyName && FIREFOX_CONTROL_KEYS.includes(keyName)) {
        return;
      }
      e.preventDefault();
      return false;
    }
    this._keyPressed = true;
  },
  _onMouseWheel(dxEvent) {
    dxEvent.delta > 0 ? this._spinValueChange(1, dxEvent) : this._spinValueChange(-1, dxEvent);
  },
  _renderValue() {
    var inputValue = this._input().val();
    var value2 = this.option("value");
    if (!inputValue.length || Number(inputValue) !== value2) {
      this._forceValueRender();
      this._toggleEmptinessEventHandler();
    }
    var valueText = isDefined(value2) ? null : message_default.format("dxNumberBox-noDataText");
    this.setAria({
      valuenow: ensureDefined(value2, ""),
      valuetext: valueText
    });
    this.option("text", this._input().val());
    this._updateButtons();
    return Deferred().resolve();
  },
  _forceValueRender() {
    var value2 = this.option("value");
    var number2 = Number(value2);
    var formattedValue = isNaN(number2) ? "" : this._applyDisplayValueFormatter(value2);
    this._renderDisplayText(formattedValue);
  },
  _applyDisplayValueFormatter(value2) {
    return this.option("displayValueFormatter")(value2);
  },
  _renderProps() {
    this._input().prop({
      min: this.option("min"),
      max: this.option("max"),
      step: this.option("step")
    });
    this.setAria({
      valuemin: ensureDefined(this.option("min"), ""),
      valuemax: ensureDefined(this.option("max"), "")
    });
  },
  _spinButtonsPointerDownHandler() {
    var $input = this._input();
    if (!this.option("useLargeSpinButtons") && dom_adapter_default.getActiveElement() !== $input[0]) {
      events_engine_default.trigger($input, "focus");
    }
  },
  _spinUpChangeHandler(e) {
    if (!this.option("readOnly")) {
      this._spinValueChange(1, e.event || e);
    }
  },
  _spinDownChangeHandler(e) {
    if (!this.option("readOnly")) {
      this._spinValueChange(-1, e.event || e);
    }
  },
  _spinValueChange(sign2, dxEvent) {
    var step = parseFloat(this.option("step"));
    if (0 === step) {
      return;
    }
    var value2 = parseFloat(this._normalizeInputValue()) || 0;
    value2 = this._correctRounding(value2, step * sign2);
    var min = this.option("min");
    var max = this.option("max");
    if (isDefined(min)) {
      value2 = Math.max(min, value2);
    }
    if (isDefined(max)) {
      value2 = Math.min(max, value2);
    }
    this._saveValueChangeEvent(dxEvent);
    this.option("value", value2);
  },
  _correctRounding(value2, step) {
    var regex = /[,.](.*)/;
    var isFloatValue = regex.test(value2);
    var isFloatStep = regex.test(step);
    if (isFloatValue || isFloatStep) {
      var valueAccuracy = isFloatValue ? regex.exec(value2)[0].length : 0;
      var stepAccuracy = isFloatStep ? regex.exec(step)[0].length : 0;
      var accuracy = math2.max(valueAccuracy, stepAccuracy);
      value2 = this._round(value2 + step, accuracy);
      return value2;
    }
    return value2 + step;
  },
  _round(value2, precision) {
    precision = precision || 0;
    var multiplier = 10 ** precision;
    value2 *= multiplier;
    value2 = Math.round(value2) / multiplier;
    return value2;
  },
  _renderValueChangeEvent() {
    this.callBase();
    var forceValueChangeEvent = addNamespace("focusout", FORCE_VALUECHANGE_EVENT_NAMESPACE);
    events_engine_default.off(this.element(), forceValueChangeEvent);
    events_engine_default.on(this.element(), forceValueChangeEvent, this._forceRefreshInputValue.bind(this));
  },
  _forceRefreshInputValue() {
    if ("number" === this.option("mode")) {
      return;
    }
    var $input = this._input();
    var formattedValue = this._applyDisplayValueFormatter(this.option("value"));
    $input.val(null);
    $input.val(formattedValue);
  },
  _valueChangeEventHandler(e) {
    var $input = this._input();
    var inputValue = this._normalizeText();
    var value2 = this._parseValue(inputValue);
    var valueHasDigits = "." !== inputValue && "-" !== inputValue;
    if (this._isValueValid() && !this._validateValue(value2)) {
      $input.val(this._applyDisplayValueFormatter(value2));
      return;
    }
    if (valueHasDigits) {
      this.callBase(e, isNaN(value2) ? null : value2);
    }
    this._applyValueBoundaries(inputValue, value2);
    this.validationRequest.fire({
      value: value2,
      editor: this
    });
  },
  _applyValueBoundaries(inputValue, parsedValue) {
    var isValueIncomplete = this._isValueIncomplete(inputValue);
    var isValueCorrect = this._isValueInRange(inputValue);
    if (!isValueIncomplete && !isValueCorrect && null !== parsedValue) {
      if (Number(inputValue) !== parsedValue) {
        this._input().val(this._applyDisplayValueFormatter(parsedValue));
      }
    }
  },
  _replaceCommaWithPoint: (value2) => value2.replace(",", "."),
  _inputIsInvalid() {
    var isNumberMode = "number" === this.option("mode");
    var validityState = this._input().get(0).validity;
    return isNumberMode && validityState && validityState.badInput;
  },
  _renderDisplayText(text) {
    if (this._inputIsInvalid()) {
      return;
    }
    this.callBase(text);
  },
  _isValueIncomplete: (value2) => /(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(value2),
  _isValueInRange(value2) {
    return inRange(value2, this.option("min"), this.option("max"));
  },
  _isNumber(value2) {
    return null !== this._parseValue(value2);
  },
  _validateValue(value2) {
    var inputValue = this._normalizeText();
    var isValueValid = this._isValueValid();
    var isValid = true;
    var isNumber2 = this._isNumber(inputValue);
    if (isNaN(Number(value2))) {
      isValid = false;
    }
    if (!value2 && isValueValid) {
      isValid = true;
    } else if (!isNumber2 && !isValueValid) {
      isValid = false;
    }
    this.option({
      isValid,
      validationError: isValid ? null : {
        editorSpecific: true,
        message: this.option("invalidValueMessage")
      }
    });
    return isValid;
  },
  _normalizeInputValue() {
    return this._parseValue(this._normalizeText());
  },
  _normalizeText() {
    var value2 = this._input().val().trim();
    return this._replaceCommaWithPoint(value2);
  },
  _parseValue(value2) {
    var number2 = parseFloat(value2);
    if (isNaN(number2)) {
      return null;
    }
    return fitIntoRange(number2, this.option("min"), this.option("max"));
  },
  _clearValue() {
    if (this._inputIsInvalid()) {
      this._input().val("");
      this._validateValue();
    }
    this.callBase();
  },
  clear() {
    if (null === this.option("value")) {
      this.option("text", "");
      if (this._input().length) {
        this._renderValue();
      }
    } else {
      this.option("value", null);
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "value":
        this._validateValue(args.value);
        this._setSubmitValue(args.value);
        this.callBase(args);
        this._resumeValueChangeAction();
        break;
      case "step":
        this._renderProps();
        break;
      case "min":
      case "max":
        this._renderProps();
        this.option("value", this._parseValue(this.option("value")));
        break;
      case "showSpinButtons":
      case "useLargeSpinButtons":
        this._updateButtons(["spins"]);
        break;
      case "invalidValueMessage":
        break;
      default:
        this.callBase(args);
    }
  }
});
var m_number_box_base_default = NumberBoxBase;

// node_modules/devextreme/esm/__internal/ui/number_box/m_utils.js
var getRealSeparatorIndex = function(str) {
  var quoteBalance = 0;
  var separatorCount = 0;
  for (var i = 0; i < str.length; ++i) {
    if ("'" === str[i]) {
      quoteBalance++;
    }
    if ("." === str[i]) {
      ++separatorCount;
      if (quoteBalance % 2 === 0) {
        return {
          occurrence: separatorCount,
          index: i
        };
      }
    }
  }
  return {
    occurrence: 1,
    index: -1
  };
};
var getNthOccurrence = function(str, c, n) {
  var i = -1;
  while (n-- && i++ < str.length) {
    i = str.indexOf(c, i);
  }
  return i;
};
var splitByIndex = function(str, index) {
  if (-1 === index) {
    return [str];
  }
  return [str.slice(0, index), str.slice(index + 1)];
};
var adjustPercentValue = function(rawValue, precision) {
  return rawValue && adjust(rawValue / 100, precision);
};

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.caret.js
var getCaretBoundaries = function(text, format2) {
  if ("string" === typeof format2) {
    var signParts = format2.split(";");
    var sign2 = number_default.getSign(text, format2);
    signParts[1] = signParts[1] || "-".concat(signParts[0]);
    format2 = signParts[sign2 < 0 ? 1 : 0];
    format2 = (str = format2, str.replace(/'([^']*)'/g, (str2) => str2.split("").map(() => " ").join("").substr(2)));
    var prefixStubLength = /^[^#0.,]*/.exec(format2)[0].length;
    var postfixStubLength = /[^#0.,]*$/.exec(format2)[0].length;
    return {
      start: prefixStubLength,
      end: text.length - postfixStubLength
    };
  }
  var str;
  return {
    start: 0,
    end: text.length
  };
};
var _getDigitCountBeforeIndex = function(index, text) {
  var decimalSeparator = number_default.getDecimalSeparator();
  var regExp = new RegExp("[^0-9".concat(escapeRegExp(decimalSeparator), "]"), "g");
  var textBeforePosition = text.slice(0, index);
  return textBeforePosition.replace(regExp, "").length;
};
var _reverseText = function(text) {
  return text.split("").reverse().join("");
};
var _getDigitPositionByIndex = function(digitIndex, text) {
  if (!digitIndex) {
    return -1;
  }
  var regExp = /[0-9]/g;
  var counter = 1;
  var index = null;
  var result2 = regExp.exec(text);
  while (result2) {
    index = result2.index;
    if (counter >= digitIndex) {
      return index;
    }
    counter++;
    result2 = regExp.exec(text);
  }
  return null === index ? text.length : index;
};
var _trimNonNumericCharsFromEnd = function(text) {
  return text.replace(/[^0-9e]+$/, "");
};
var getCaretWithOffset = function(caret3, offset) {
  if (void 0 === caret3.start) {
    caret3 = {
      start: caret3,
      end: caret3
    };
  }
  return {
    start: caret3.start + offset,
    end: caret3.end + offset
  };
};
var getCaretAfterFormat = function(text, formatted, caret3, format2) {
  caret3 = getCaretWithOffset(caret3, 0);
  var point = number_default.getDecimalSeparator();
  var isSeparatorBasedText = isSeparatorBasedString(text);
  var realSeparatorOccurrenceIndex = getRealSeparatorIndex(format2).occurrence;
  var pointPosition = isSeparatorBasedText ? 0 : getNthOccurrence(text, point, realSeparatorOccurrenceIndex);
  var newPointPosition = getNthOccurrence(formatted, point, realSeparatorOccurrenceIndex);
  var textParts = splitByIndex(text, pointPosition);
  var formattedParts = splitByIndex(formatted, newPointPosition);
  var isCaretOnFloat = -1 !== pointPosition && caret3.start > pointPosition;
  if (isCaretOnFloat) {
    var relativeIndex = caret3.start - pointPosition - 1;
    var digitsBefore = _getDigitCountBeforeIndex(relativeIndex, textParts[1]);
    var newPosition = formattedParts[1] ? newPointPosition + 1 + _getDigitPositionByIndex(digitsBefore, formattedParts[1]) + 1 : formatted.length;
    return getCaretInBoundaries(newPosition, formatted, format2);
  }
  var formattedIntPart = _trimNonNumericCharsFromEnd(formattedParts[0]);
  var positionFromEnd = textParts[0].length - caret3.start;
  var digitsFromEnd = _getDigitCountBeforeIndex(positionFromEnd, _reverseText(textParts[0]));
  var newPositionFromEnd = _getDigitPositionByIndex(digitsFromEnd, _reverseText(formattedIntPart));
  var newPositionFromBegin = formattedIntPart.length - (newPositionFromEnd + 1);
  return getCaretInBoundaries(newPositionFromBegin, formatted, format2);
};
function isSeparatorBasedString(text) {
  return 1 === text.length && !!text.match(/^[,.][0-9]*$/g);
}
var isCaretInBoundaries = function(caret3, text, format2) {
  caret3 = getCaretWithOffset(caret3, 0);
  var boundaries = getCaretInBoundaries(caret3, text, format2);
  return caret3.start >= boundaries.start && caret3.end <= boundaries.end;
};
function getCaretInBoundaries(caret3, text, format2) {
  caret3 = getCaretWithOffset(caret3, 0);
  var boundaries = getCaretBoundaries(text, format2);
  var adjustedCaret = {
    start: fitIntoRange(caret3.start, boundaries.start, boundaries.end),
    end: fitIntoRange(caret3.end, boundaries.start, boundaries.end)
  };
  return adjustedCaret;
}
var getCaretOffset = function(previousText, newText, format2) {
  var previousBoundaries = getCaretBoundaries(previousText, format2);
  var newBoundaries = getCaretBoundaries(newText, format2);
  return newBoundaries.start - previousBoundaries.start;
};

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.mask.js
var NUMBER_FORMATTER_NAMESPACE = "dxNumberFormatter";
var MOVE_FORWARD = 1;
var MOVE_BACKWARD = -1;
var MINUS = "-";
var MINUS_KEY = "minus";
var INPUT_EVENT = "input";
var NUMPAD_DOT_KEY_CODE = 110;
var CARET_TIMEOUT_DURATION = 0;
var NumberBoxMask = m_number_box_base_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      useMaskBehavior: true,
      format: null
    });
  },
  _isDeleteKey: (key) => "del" === key,
  _supportedKeys() {
    if (!this._useMaskBehavior()) {
      return this.callBase();
    }
    return extend(this.callBase(), {
      minus: this._revertSign.bind(this),
      del: this._removeHandler.bind(this),
      backspace: this._removeHandler.bind(this),
      leftArrow: this._arrowHandler.bind(this, MOVE_BACKWARD),
      rightArrow: this._arrowHandler.bind(this, MOVE_FORWARD),
      home: this._moveCaretToBoundaryEventHandler.bind(this, MOVE_FORWARD),
      enter: this._updateFormattedValue.bind(this),
      end: this._moveCaretToBoundaryEventHandler.bind(this, MOVE_BACKWARD)
    });
  },
  _getTextSeparatorIndex(text) {
    var decimalSeparator = number_default.getDecimalSeparator();
    var realSeparatorOccurrenceIndex = getRealSeparatorIndex(this.option("format")).occurrence;
    return getNthOccurrence(text, decimalSeparator, realSeparatorOccurrenceIndex);
  },
  _focusInHandler(e) {
    if (!this._preventNestedFocusEvent(e)) {
      this.clearCaretTimeout();
      this._caretTimeout = setTimeout(() => {
        this._caretTimeout = void 0;
        var caret3 = this._caret();
        if (caret3.start === caret3.end && this._useMaskBehavior()) {
          var text = this._getInputVal();
          var decimalSeparatorIndex = this._getTextSeparatorIndex(text);
          if (decimalSeparatorIndex >= 0) {
            this._caret({
              start: decimalSeparatorIndex,
              end: decimalSeparatorIndex
            });
          } else {
            this._moveCaretToBoundaryEventHandler(MOVE_BACKWARD, e);
          }
        }
      }, CARET_TIMEOUT_DURATION);
    }
    this.callBase(e);
  },
  _focusOutHandler(e) {
    var shouldHandleEvent = !this._preventNestedFocusEvent(e);
    if (shouldHandleEvent) {
      this._focusOutOccurs = true;
      if (this._useMaskBehavior()) {
        this._updateFormattedValue();
      }
    }
    this.callBase(e);
    if (shouldHandleEvent) {
      this._focusOutOccurs = false;
    }
  },
  _hasValueBeenChanged(inputValue) {
    var format2 = this._getFormatPattern();
    var value2 = this.option("value");
    var formatted = this._format(value2, format2) || "";
    return formatted !== inputValue;
  },
  _updateFormattedValue() {
    var inputValue = this._getInputVal();
    if (this._hasValueBeenChanged(inputValue)) {
      this._updateParsedValue();
      this._adjustParsedValue();
      this._setTextByParsedValue();
      if (this._parsedValue !== this.option("value")) {
        events_engine_default.trigger(this._input(), "change");
      }
    }
  },
  _arrowHandler(step, e) {
    if (!this._useMaskBehavior()) {
      return;
    }
    var text = this._getInputVal();
    var format2 = this._getFormatPattern();
    var nextCaret = getCaretWithOffset(this._caret(), step);
    if (!isCaretInBoundaries(nextCaret, text, format2)) {
      nextCaret = step === MOVE_FORWARD ? nextCaret.end : nextCaret.start;
      e.preventDefault();
      this._caret(getCaretInBoundaries(nextCaret, text, format2));
    }
  },
  _moveCaretToBoundary(direction) {
    var boundaries = getCaretBoundaries(this._getInputVal(), this._getFormatPattern());
    var newCaret = getCaretWithOffset(direction === MOVE_FORWARD ? boundaries.start : boundaries.end, 0);
    this._caret(newCaret);
  },
  _moveCaretToBoundaryEventHandler(direction, e) {
    if (!this._useMaskBehavior() || e && e.shiftKey) {
      return;
    }
    this._moveCaretToBoundary(direction);
    e && e.preventDefault();
  },
  _shouldMoveCaret(text, caret3) {
    var decimalSeparator = number_default.getDecimalSeparator();
    var isDecimalSeparatorNext = text.charAt(caret3.end) === decimalSeparator;
    var moveToFloat = (this._lastKey === decimalSeparator || "." === this._lastKey || "," === this._lastKey) && isDecimalSeparatorNext;
    return moveToFloat;
  },
  _getInputVal() {
    return number_default.convertDigits(this._input().val(), true);
  },
  _keyboardHandler(e) {
    this.clearCaretTimeout();
    this._lastKey = number_default.convertDigits(getChar(e), true);
    this._lastKeyName = normalizeKeyName(e);
    if (!this._shouldHandleKey(e.originalEvent)) {
      return this.callBase(e);
    }
    var normalizedText = this._getInputVal();
    var caret3 = this._caret();
    var enteredChar;
    if (this._lastKeyName === MINUS_KEY) {
      enteredChar = "";
    } else {
      enteredChar = e.which === NUMPAD_DOT_KEY_CODE ? number_default.getDecimalSeparator() : this._lastKey;
    }
    var newValue = this._tryParse(normalizedText, caret3, enteredChar);
    if (this._shouldMoveCaret(normalizedText, caret3)) {
      this._moveCaret(1);
      e.originalEvent.preventDefault();
    }
    if (void 0 === newValue) {
      if (this._lastKeyName !== MINUS_KEY) {
        e.originalEvent.preventDefault();
      }
    } else {
      this._parsedValue = newValue;
    }
    return this.callBase(e);
  },
  _keyPressHandler(e) {
    if (!this._useMaskBehavior()) {
      this.callBase(e);
    }
  },
  _removeHandler(e) {
    var caret3 = this._caret();
    var text = this._getInputVal();
    var {
      start
    } = caret3;
    var {
      end
    } = caret3;
    this._lastKey = getChar(e);
    this._lastKeyName = normalizeKeyName(e);
    var isDeleteKey = this._isDeleteKey(this._lastKeyName);
    var isBackspaceKey = !isDeleteKey;
    if (start === end) {
      var caretPosition = start;
      var canDelete = isBackspaceKey && caretPosition > 0 || isDeleteKey && caretPosition < text.length;
      if (canDelete) {
        isDeleteKey && end++;
        isBackspaceKey && start--;
      } else {
        e.preventDefault();
        return;
      }
    }
    var char = text.slice(start, end);
    if (this._isStub(char)) {
      this._moveCaret(isDeleteKey ? 1 : -1);
      if (this._parsedValue < 0 || 1 / this._parsedValue === -1 / 0) {
        this._revertSign(e);
        this._setTextByParsedValue();
        var shouldTriggerInputEvent = this.option("valueChangeEvent").split(" ").includes("input");
        if (shouldTriggerInputEvent) {
          events_engine_default.trigger(this._input(), "input");
        }
      }
      e.preventDefault();
      return;
    }
    var decimalSeparator = number_default.getDecimalSeparator();
    if (char === decimalSeparator) {
      var decimalSeparatorIndex = text.indexOf(decimalSeparator);
      if (this._isNonStubAfter(decimalSeparatorIndex + 1)) {
        this._moveCaret(isDeleteKey ? 1 : -1);
        e.preventDefault();
      }
      return;
    }
    if (end - start < text.length) {
      var editedText = this._replaceSelectedText(text, {
        start,
        end
      }, "");
      var noDigits = editedText.search(/[0-9]/) < 0;
      if (noDigits && this._isValueInRange(0)) {
        this._parsedValue = this._parsedValue < 0 || 1 / this._parsedValue === -1 / 0 ? -0 : 0;
        return;
      }
    }
    var valueAfterRemoving = this._tryParse(text, {
      start,
      end
    }, "");
    if (void 0 === valueAfterRemoving) {
      e.preventDefault();
    } else {
      this._parsedValue = valueAfterRemoving;
    }
  },
  _isPercentFormat() {
    var format2 = this._getFormatPattern();
    var noEscapedFormat = format2.replace(/'[^']+'/g, "");
    return -1 !== noEscapedFormat.indexOf("%");
  },
  _parse(text, format2) {
    var formatOption = this.option("format");
    var isCustomParser = isFunction(formatOption.parser);
    var parser = isCustomParser ? formatOption.parser : number_default.parse;
    var integerPartStartIndex = 0;
    if (!isCustomParser) {
      var formatPointIndex = getRealSeparatorIndex(format2).index;
      var textPointIndex = this._getTextSeparatorIndex(text);
      var formatIntegerPartLength = -1 !== formatPointIndex ? formatPointIndex : format2.length;
      var textIntegerPartLength = -1 !== textPointIndex ? textPointIndex : text.length;
      if (textIntegerPartLength > formatIntegerPartLength && -1 === format2.indexOf("#")) {
        integerPartStartIndex = textIntegerPartLength - formatIntegerPartLength;
      }
    }
    text = text.substr(integerPartStartIndex);
    return parser(text, format2);
  },
  _format(value2, format2) {
    var formatOption = this.option("format");
    var customFormatter = (null === formatOption || void 0 === formatOption ? void 0 : formatOption.formatter) || formatOption;
    var formatter = isFunction(customFormatter) ? customFormatter : number_default.format;
    var formattedValue = null === value2 ? "" : formatter(value2, format2);
    return formattedValue;
  },
  _getFormatPattern() {
    if (!this._currentFormat) {
      this._updateFormat();
    }
    return this._currentFormat;
  },
  _updateFormat() {
    var format2 = this.option("format");
    var isCustomParser = isFunction(null === format2 || void 0 === format2 ? void 0 : format2.parser);
    var isLDMLPattern = isString(format2) && (format2.includes("0") || format2.includes("#"));
    var isExponentialFormat = "exponential" === format2 || "exponential" === (null === format2 || void 0 === format2 ? void 0 : format2.type);
    var shouldUseFormatAsIs = isCustomParser || isLDMLPattern || isExponentialFormat;
    this._currentFormat = shouldUseFormatAsIs ? format2 : getFormat((value2) => {
      var text = this._format(value2, format2);
      return number_default.convertDigits(text, true);
    });
  },
  _getFormatForSign(text) {
    var format2 = this._getFormatPattern();
    if (isString(format2)) {
      var signParts = format2.split(";");
      var _sign = number_default.getSign(text, format2);
      signParts[1] = signParts[1] || "-".concat(signParts[0]);
      return _sign < 0 ? signParts[1] : signParts[0];
    }
    var sign2 = number_default.getSign(text);
    return sign2 < 0 ? "-" : "";
  },
  _removeStubs(text, excludeComma) {
    var format2 = this._getFormatForSign(text);
    var thousandsSeparator = number_default.getThousandsSeparator();
    var stubs = this._getStubs(format2);
    var result2 = text;
    if (stubs.length) {
      var prefixStubs = stubs[0];
      var postfixRegex = new RegExp("(".concat(escapeRegExp(stubs[1] || ""), ")$"), "g");
      var decoratorsRegex = new RegExp("[-".concat(escapeRegExp(excludeComma ? "" : thousandsSeparator), "]"), "g");
      result2 = result2.replace(prefixStubs, "").replace(postfixRegex, "").replace(decoratorsRegex, "");
    }
    return result2;
  },
  _getStubs(format2) {
    var regExpResult = /[^']([#0.,]+)/g.exec(format2);
    var pattern = regExpResult && regExpResult[0].trim();
    return format2.split(pattern).map((stub) => stub.replace(/'/g, ""));
  },
  _truncateToPrecision(value2, maxPrecision) {
    if (isDefined(value2)) {
      var strValue = value2.toString();
      var decimalSeparatorIndex = strValue.indexOf(".");
      if (strValue && decimalSeparatorIndex > -1) {
        var parsedValue = parseFloat(strValue.substr(0, decimalSeparatorIndex + maxPrecision + 1));
        return isNaN(parsedValue) ? value2 : parsedValue;
      }
    }
    return value2;
  },
  _tryParse(text, selection2, char) {
    var isTextSelected = selection2.start !== selection2.end;
    var isWholeTextSelected = isTextSelected && 0 === selection2.start && selection2.end === text.length;
    var decimalSeparator = number_default.getDecimalSeparator();
    if (isWholeTextSelected && char === decimalSeparator) {
      return 0;
    }
    var editedText = this._replaceSelectedText(text, selection2, char);
    var format2 = this._getFormatPattern();
    var parsedValue = this._getParsedValue(editedText, format2);
    var maxPrecision = !format2.parser && this._getPrecisionLimits(editedText).max;
    var isValueChanged = parsedValue !== this._parsedValue;
    var isDecimalPointRestricted = char === decimalSeparator && 0 === maxPrecision;
    var isUselessCharRestricted = !isTextSelected && !isValueChanged && char !== MINUS && this._isStub(char);
    if (isDecimalPointRestricted || isUselessCharRestricted) {
      return;
    }
    if ("" === this._removeStubs(editedText)) {
      parsedValue = Math.abs(0 * this._parsedValue);
    }
    if (isNaN(parsedValue)) {
      return;
    }
    var value2 = null === parsedValue ? this._parsedValue : parsedValue;
    parsedValue = maxPrecision ? this._truncateToPrecision(value2, maxPrecision) : parsedValue;
    return !format2.parser && this._isPercentFormat() ? adjustPercentValue(parsedValue, maxPrecision) : parsedValue;
  },
  _getParsedValue(text, format2) {
    var sign2 = number_default.getSign(text, (null === format2 || void 0 === format2 ? void 0 : format2.formatter) || format2);
    var textWithoutStubs = this._removeStubs(text, true);
    var parsedValue = this._parse(textWithoutStubs, format2);
    var parsedValueSign = parsedValue < 0 ? -1 : 1;
    var parsedValueWithSign = isNumeric(parsedValue) && sign2 !== parsedValueSign ? sign2 * parsedValue : parsedValue;
    return parsedValueWithSign;
  },
  _isValueIncomplete(text) {
    if (!this._useMaskBehavior()) {
      return this.callBase(text);
    }
    var caret3 = this._caret();
    var point = number_default.getDecimalSeparator();
    var pointIndex = this._getTextSeparatorIndex(text);
    var isCaretOnFloat = pointIndex >= 0 && pointIndex < caret3.start;
    var textParts = this._removeStubs(text, true).split(point);
    if (!isCaretOnFloat || 2 !== textParts.length) {
      return false;
    }
    var floatLength = textParts[1].length;
    var format2 = this._getFormatPattern();
    var isCustomParser = !!format2.parser;
    var precision = !isCustomParser && this._getPrecisionLimits(this._getFormatPattern(), text);
    var isPrecisionInRange = isCustomParser ? true : inRange(floatLength, precision.min, precision.max);
    var endsWithZero = "0" === textParts[1].charAt(floatLength - 1);
    return isPrecisionInRange && (endsWithZero || !floatLength);
  },
  _isValueInRange(value2) {
    var min = ensureDefined(this.option("min"), -1 / 0);
    var max = ensureDefined(this.option("max"), 1 / 0);
    return inRange(value2, min, max);
  },
  _setInputText(text) {
    var normalizedText = number_default.convertDigits(text, true);
    var newCaret = getCaretAfterFormat(this._getInputVal(), normalizedText, this._caret(), this._getFormatPattern());
    this._input().val(text);
    this._toggleEmptinessEventHandler();
    this._formattedValue = text;
    if (!this._focusOutOccurs) {
      this._caret(newCaret);
    }
  },
  _useMaskBehavior() {
    return !!this.option("format") && this.option("useMaskBehavior");
  },
  _renderInputType() {
    var isNumberType = "number" === this.option("mode");
    var isDesktop = "desktop" === devices_default.real().deviceType;
    if (this._useMaskBehavior() && isNumberType) {
      this._setInputType(isDesktop || this._isSupportInputMode() ? "text" : "tel");
    } else {
      this.callBase();
    }
  },
  _isChar: (str) => isString(str) && 1 === str.length,
  _moveCaret(offset) {
    if (!offset) {
      return;
    }
    var newCaret = getCaretWithOffset(this._caret(), offset);
    var adjustedCaret = getCaretInBoundaries(newCaret, this._getInputVal(), this._getFormatPattern());
    this._caret(adjustedCaret);
  },
  _shouldHandleKey(e) {
    var keyName = normalizeKeyName(e);
    var isSpecialChar = isCommandKeyPressed(e) || e.altKey || e.shiftKey || !this._isChar(keyName);
    var isMinusKey = keyName === MINUS_KEY;
    var useMaskBehavior = this._useMaskBehavior();
    return useMaskBehavior && !isSpecialChar && !isMinusKey;
  },
  _renderInput() {
    this.callBase();
    this._renderFormatter();
  },
  _renderFormatter() {
    this._clearCache();
    this._detachFormatterEvents();
    if (this._useMaskBehavior()) {
      this._attachFormatterEvents();
    }
  },
  _detachFormatterEvents() {
    events_engine_default.off(this._input(), ".".concat(NUMBER_FORMATTER_NAMESPACE));
  },
  _isInputFromPaste(e) {
    var inputType2 = e.originalEvent && e.originalEvent.inputType;
    if (isDefined(inputType2)) {
      return "insertFromPaste" === inputType2;
    }
    return this._isValuePasted;
  },
  _attachFormatterEvents() {
    var $input = this._input();
    events_engine_default.on($input, addNamespace(INPUT_EVENT, NUMBER_FORMATTER_NAMESPACE), (e) => {
      this._formatValue(e);
      this._isValuePasted = false;
    });
    events_engine_default.on($input, addNamespace("dxclick", NUMBER_FORMATTER_NAMESPACE), () => {
      if (!this._caretTimeout) {
        this._caretTimeout = setTimeout(() => {
          this._caretTimeout = void 0;
          this._caret(getCaretInBoundaries(this._caret(), this._getInputVal(), this._getFormatPattern()));
        }, CARET_TIMEOUT_DURATION);
      }
    });
    events_engine_default.on($input, DBLCLICK_EVENT_NAME, () => {
      this.clearCaretTimeout();
    });
  },
  clearCaretTimeout() {
    clearTimeout(this._caretTimeout);
    this._caretTimeout = void 0;
  },
  _forceRefreshInputValue() {
    if (!this._useMaskBehavior()) {
      return this.callBase();
    }
  },
  _isNonStubAfter(index) {
    var text = this._getInputVal().slice(index);
    return text && !this._isStub(text, true);
  },
  _isStub(str, isString4) {
    var escapedDecimalSeparator = escapeRegExp(number_default.getDecimalSeparator());
    var regExpString = "^[^0-9".concat(escapedDecimalSeparator, "]+$");
    var stubRegExp = new RegExp(regExpString, "g");
    return stubRegExp.test(str) && (isString4 || this._isChar(str));
  },
  _parseValue(text) {
    if (!this._useMaskBehavior()) {
      return this.callBase(text);
    }
    return this._parsedValue;
  },
  _getPrecisionLimits(text) {
    var currentFormat = this._getFormatForSign(text);
    var realSeparatorIndex = getRealSeparatorIndex(currentFormat).index;
    var floatPart = (splitByIndex(currentFormat, realSeparatorIndex)[1] || "").replace(/[^#0]/g, "");
    var minPrecision = floatPart.replace(/^(0*)#*/, "$1").length;
    var maxPrecision = floatPart.length;
    return {
      min: minPrecision,
      max: maxPrecision
    };
  },
  _revertSign(e) {
    if (!this._useMaskBehavior()) {
      return;
    }
    var caret3 = this._caret();
    if (caret3.start !== caret3.end) {
      if (normalizeKeyName(e) === MINUS_KEY) {
        this._applyRevertedSign(e, caret3, true);
        return;
      }
      this._caret(getCaretInBoundaries(0, this._getInputVal(), this._getFormatPattern()));
    }
    this._applyRevertedSign(e, caret3);
  },
  _applyRevertedSign(e, caret3, preserveSelectedText) {
    var newValue = -1 * ensureDefined(this._parsedValue, null);
    if (this._isValueInRange(newValue) || 0 === newValue) {
      this._parsedValue = newValue;
      if (preserveSelectedText) {
        var format2 = this._getFormatPattern();
        var previousText = this._getInputVal();
        this._setTextByParsedValue();
        e.preventDefault();
        var currentText = this._getInputVal();
        var offset = getCaretOffset(previousText, currentText, format2);
        caret3 = getCaretWithOffset(caret3, offset);
        var caretInBoundaries = getCaretInBoundaries(caret3, currentText, format2);
        this._caret(caretInBoundaries);
      }
    }
  },
  _removeMinusFromText(text, caret3) {
    var isMinusPressed = this._lastKeyName === MINUS_KEY && text.charAt(caret3.start - 1) === MINUS;
    return isMinusPressed ? this._replaceSelectedText(text, {
      start: caret3.start - 1,
      end: caret3.start
    }, "") : text;
  },
  _setTextByParsedValue() {
    var format2 = this._getFormatPattern();
    var parsed = this._parseValue();
    var formatted = this._format(parsed, format2) || "";
    this._setInputText(formatted);
  },
  _formatValue(e) {
    var normalizedText = this._getInputVal();
    var caret3 = this._caret();
    var textWithoutMinus = this._removeMinusFromText(normalizedText, caret3);
    var wasMinusRemoved = textWithoutMinus !== normalizedText;
    normalizedText = textWithoutMinus;
    if (!this._isInputFromPaste(e) && this._isValueIncomplete(textWithoutMinus)) {
      this._formattedValue = normalizedText;
      if (wasMinusRemoved) {
        this._setTextByParsedValue();
      }
      return;
    }
    var textWasChanged = number_default.convertDigits(this._formattedValue, true) !== normalizedText;
    if (textWasChanged) {
      var value2 = this._tryParse(normalizedText, caret3, "");
      if (isDefined(value2)) {
        this._parsedValue = value2;
      }
    }
    this._setTextByParsedValue();
  },
  _renderDisplayText() {
    if (this._useMaskBehavior()) {
      this._toggleEmptinessEventHandler();
    } else {
      this.callBase.apply(this, arguments);
    }
  },
  _renderValue() {
    if (this._useMaskBehavior()) {
      this._parsedValue = this.option("value");
      this._setTextByParsedValue();
    }
    return this.callBase();
  },
  _updateParsedValue() {
    var inputValue = this._getInputVal();
    this._parsedValue = this._tryParse(inputValue, this._caret());
  },
  _adjustParsedValue() {
    if (!this._useMaskBehavior()) {
      return;
    }
    var clearedText = this._removeStubs(this._getInputVal());
    var parsedValue = clearedText ? this._parseValue() : null;
    if (!isNumeric(parsedValue)) {
      this._parsedValue = parsedValue;
      return;
    }
    this._parsedValue = fitIntoRange(parsedValue, this.option("min"), this.option("max"));
  },
  _valueChangeEventHandler(e) {
    if (!this._useMaskBehavior()) {
      return this.callBase(e);
    }
    var caret3 = this._caret();
    this._saveValueChangeEvent(e);
    this._lastKey = null;
    this._lastKeyName = null;
    this._updateParsedValue();
    this._adjustParsedValue();
    this.option("value", this._parsedValue);
    if (caret3) {
      this._caret(caret3);
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "format":
      case "useMaskBehavior":
        this._renderInputType();
        this._updateFormat();
        this._renderFormatter();
        this._renderValue();
        this._refreshValueChangeEvent();
        this._refreshEvents();
        break;
      case "min":
      case "max":
        this._adjustParsedValue();
        this.callBase(args);
        break;
      default:
        this.callBase(args);
    }
  },
  _clearCache() {
    delete this._formattedValue;
    delete this._lastKey;
    delete this._lastKeyName;
    delete this._parsedValue;
    delete this._focusOutOccurs;
    clearTimeout(this._caretTimeout);
    delete this._caretTimeout;
  },
  _clean() {
    this._clearCache();
    this.callBase();
  }
});
var m_number_box_mask_default = NumberBoxMask;

// node_modules/devextreme/esm/__internal/ui/number_box/m_number_box.js
component_registrator_default("dxNumberBox", m_number_box_mask_default);
var m_number_box_default = m_number_box_mask_default;

// node_modules/devextreme/esm/ui/number_box.js
var number_box_default = m_number_box_default;

// node_modules/devextreme/esm/__internal/ui/radio_group/m_radio_button.js
var RADIO_BUTTON_CLASS = "dx-radiobutton";
var RADIO_BUTTON_ICON_CLASS = "dx-radiobutton-icon";
var RADIO_BUTTON_ICON_DOT_CLASS = "dx-radiobutton-icon-dot";
var RADIO_BUTTON_CHECKED_CLASS = "dx-radiobutton-checked";
var RADIO_BUTTON_ICON_CHECKED_CLASS = "dx-radiobutton-icon-checked";
var RadioButton = editor_default.inherit({
  _supportedKeys() {
    return extend(this.callBase(), {
      space: function(e) {
        e.preventDefault();
        this._clickAction({
          event: e
        });
      }
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      hoverStateEnabled: true,
      activeStateEnabled: true,
      value: false
    });
  },
  _canValueBeChangedByClick: () => true,
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }]);
  },
  _init() {
    this.callBase();
    this.$element().addClass(RADIO_BUTTON_CLASS);
  },
  _initMarkup() {
    this.callBase();
    this._renderIcon();
    this._renderCheckedState(this.option("value"));
    this._renderClick();
    this.setAria("role", "radio");
  },
  _renderIcon() {
    this._$icon = renderer_default("<div>").addClass(RADIO_BUTTON_ICON_CLASS);
    renderer_default("<div>").addClass(RADIO_BUTTON_ICON_DOT_CLASS).appendTo(this._$icon);
    this.$element().append(this._$icon);
  },
  _renderCheckedState(checked) {
    this.$element().toggleClass(RADIO_BUTTON_CHECKED_CLASS, checked).find(".".concat(RADIO_BUTTON_ICON_CLASS)).toggleClass(RADIO_BUTTON_ICON_CHECKED_CLASS, checked);
    this.setAria("checked", checked);
  },
  _renderClick() {
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    this._clickAction = this._createAction((args) => {
      this._clickHandler(args.event);
    });
    events_engine_default.off(this.$element(), eventName);
    events_engine_default.on(this.$element(), eventName, (e) => {
      this._clickAction({
        event: e
      });
    });
  },
  _clickHandler(e) {
    this._saveValueChangeEvent(e);
    this.option("value", true);
  },
  _optionChanged(args) {
    switch (args.name) {
      case "value":
        this._renderCheckedState(args.value);
        this.callBase(args);
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxRadioButton", RadioButton);
var m_radio_button_default = RadioButton;

// node_modules/devextreme/esm/ui/radio_group/radio_button.js
var radio_button_default = m_radio_button_default;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.decorator.js
var LIST_EDIT_DECORATOR = "dxListEditDecorator";
var SWIPE_START_EVENT_NAME = addNamespace(SWIPE_START_EVENT, LIST_EDIT_DECORATOR);
var SWIPE_UPDATE_EVENT_NAME = addNamespace(SWIPE_EVENT, LIST_EDIT_DECORATOR);
var SWIPE_END_EVENT_NAME = addNamespace(SWIPE_END_EVENT, LIST_EDIT_DECORATOR);
var EditDecorator = class_default.inherit({
  ctor(list) {
    this._list = list;
    this._init();
  },
  _init: noop,
  _shouldHandleSwipe: false,
  _attachSwipeEvent(config2) {
    var swipeConfig = {
      itemSizeFunc: (function() {
        if (this._clearSwipeCache) {
          this._itemWidthCache = getWidth(this._list.$element());
          this._clearSwipeCache = false;
        }
        return this._itemWidthCache;
      }).bind(this)
    };
    events_engine_default.on(config2.$itemElement, SWIPE_START_EVENT_NAME, swipeConfig, this._itemSwipeStartHandler.bind(this));
    events_engine_default.on(config2.$itemElement, SWIPE_UPDATE_EVENT_NAME, this._itemSwipeUpdateHandler.bind(this));
    events_engine_default.on(config2.$itemElement, SWIPE_END_EVENT_NAME, this._itemSwipeEndHandler.bind(this));
  },
  _itemSwipeStartHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    if ($itemElement.is(".dx-state-disabled, .dx-state-disabled *")) {
      e.cancel = true;
      return;
    }
    clearTimeout(this._list._inkRippleTimer);
    this._swipeStartHandler($itemElement, e);
  },
  _itemSwipeUpdateHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    this._swipeUpdateHandler($itemElement, e);
  },
  _itemSwipeEndHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    this._swipeEndHandler($itemElement, e);
    this._clearSwipeCache = true;
  },
  beforeBag: noop,
  afterBag: noop,
  _commonOptions() {
    return {
      activeStateEnabled: this._list.option("activeStateEnabled"),
      hoverStateEnabled: this._list.option("hoverStateEnabled"),
      focusStateEnabled: this._list.option("focusStateEnabled")
    };
  },
  modifyElement(config2) {
    if (this._shouldHandleSwipe) {
      this._attachSwipeEvent(config2);
      this._clearSwipeCache = true;
    }
  },
  afterRender: noop,
  handleClick: noop,
  handleKeyboardEvents: noop,
  handleEnterPressing: noop,
  handleContextMenu: noop,
  _swipeStartHandler: noop,
  _swipeUpdateHandler: noop,
  _swipeEndHandler: noop,
  visibilityChange: noop,
  getExcludedSelectors: noop,
  dispose: noop
});
var m_list_edit_decorator_default = EditDecorator;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.decorator_registry.js
var registry = {};
function register(option, type2, decoratorClass) {
  var decoratorsRegistry = registry;
  var decoratorConfig = {};
  decoratorConfig[option] = decoratorsRegistry[option] ? decoratorsRegistry[option] : {};
  decoratorConfig[option][type2] = decoratorClass;
  extend(decoratorsRegistry, decoratorConfig);
}

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.decorator.selection.js
var SELECT_DECORATOR_ENABLED_CLASS = "dx-list-select-decorator-enabled";
var SELECT_DECORATOR_SELECT_ALL_CLASS = "dx-list-select-all";
var SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS = "dx-list-select-all-checkbox";
var SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS = "dx-list-select-all-label";
var SELECT_CHECKBOX_CONTAINER_CLASS = "dx-list-select-checkbox-container";
var SELECT_CHECKBOX_CLASS2 = "dx-list-select-checkbox";
var SELECT_RADIO_BUTTON_CONTAINER_CLASS = "dx-list-select-radiobutton-container";
var SELECT_RADIO_BUTTON_CLASS = "dx-list-select-radiobutton";
var FOCUSED_STATE_CLASS = "dx-state-focused";
var CLICK_EVENT_NAME2 = addNamespace(CLICK_EVENT_NAME, "dxListEditDecorator");
register("selection", "default", m_list_edit_decorator_default.inherit({
  _init() {
    this.callBase.apply(this, arguments);
    var selectionMode = this._list.option("selectionMode");
    this._singleStrategy = "single" === selectionMode;
    this._containerClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CONTAINER_CLASS : SELECT_CHECKBOX_CONTAINER_CLASS;
    this._controlClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CLASS : SELECT_CHECKBOX_CLASS2;
    this._controlWidget = this._singleStrategy ? radio_button_default : check_box_default;
    this._list.$element().addClass(SELECT_DECORATOR_ENABLED_CLASS);
  },
  beforeBag(config2) {
    var {
      $itemElement
    } = config2;
    var $container = config2.$container.addClass(this._containerClass);
    var $control = renderer_default("<div>").addClass(this._controlClass).appendTo($container);
    new this._controlWidget($control, extend(this._commonOptions(), {
      value: this._isSelected($itemElement),
      elementAttr: {
        "aria-label": message_default.format("CheckState")
      },
      focusStateEnabled: false,
      hoverStateEnabled: false,
      onValueChanged: (function(e) {
        e.event && this._list._saveSelectionChangeEvent(e.event);
        this._processCheckedState($itemElement, e.value);
        e.event && e.event.stopPropagation();
      }).bind(this)
    }));
  },
  modifyElement(config2) {
    this.callBase.apply(this, arguments);
    var {
      $itemElement
    } = config2;
    var control = this._controlWidget.getInstance($itemElement.find(".".concat(this._controlClass)));
    events_engine_default.on($itemElement, "stateChanged", (e, state) => {
      control.option("value", state);
    });
  },
  _updateSelectAllState() {
    if (!this._$selectAll) {
      return;
    }
    this._selectAllCheckBox.option("value", this._list.isSelectAll());
  },
  afterRender() {
    if ("all" !== this._list.option("selectionMode")) {
      return;
    }
    if (!this._$selectAll) {
      this._renderSelectAll();
    } else {
      this._updateSelectAllState();
    }
  },
  handleKeyboardEvents(currentFocusedIndex, moveFocusUp) {
    var moveFocusDown = !moveFocusUp;
    var list = this._list;
    var $selectAll = this._$selectAll;
    var lastItemIndex = list._getLastItemIndex();
    var isFocusOutOfList = moveFocusUp && 0 === currentFocusedIndex || moveFocusDown && currentFocusedIndex === lastItemIndex;
    var hasSelectAllItem = !!$selectAll;
    if (hasSelectAllItem && isFocusOutOfList) {
      list.option("focusedElement", $selectAll);
      list.scrollToItem(list.option("focusedElement"));
      return true;
    }
    return false;
  },
  handleEnterPressing(e) {
    if (this._$selectAll && this._$selectAll.hasClass(FOCUSED_STATE_CLASS)) {
      e.target = this._$selectAll.get(0);
      this._list._saveSelectionChangeEvent(e);
      this._selectAllCheckBox.option("value", !this._selectAllCheckBox.option("value"));
      return true;
    }
  },
  _renderSelectAll() {
    var $selectAll = this._$selectAll = renderer_default("<div>").addClass(SELECT_DECORATOR_SELECT_ALL_CLASS);
    var list = this._list;
    var downArrowHandler = list._supportedKeys().downArrow.bind(list);
    this._selectAllCheckBox = list._createComponent(renderer_default("<div>").addClass(SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS).appendTo($selectAll), check_box_default, {
      elementAttr: {
        "aria-label": "Select All"
      },
      focusStateEnabled: false,
      hoverStateEnabled: false
    });
    this._selectAllCheckBox.registerKeyHandler("downArrow", downArrowHandler);
    renderer_default("<div>").addClass(SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS).text(this._list.option("selectAllText")).appendTo($selectAll);
    this._list.itemsContainer().prepend($selectAll);
    this._updateSelectAllState();
    this._attachSelectAllHandler();
  },
  _attachSelectAllHandler() {
    this._selectAllCheckBox.option("onValueChanged", this._selectAllHandler.bind(this));
    events_engine_default.off(this._$selectAll, CLICK_EVENT_NAME2);
    events_engine_default.on(this._$selectAll, CLICK_EVENT_NAME2, this._selectAllClickHandler.bind(this));
  },
  _selectAllHandler(e) {
    e.event && e.event.stopPropagation();
    var isSelectedAll = this._selectAllCheckBox.option("value");
    e.event && this._list._saveSelectionChangeEvent(e.event);
    if (true === isSelectedAll) {
      this._selectAllItems();
    } else if (false === isSelectedAll) {
      this._unselectAllItems();
    }
    this._list._createActionByOption("onSelectAllValueChanged")({
      value: isSelectedAll
    });
  },
  _checkSelectAllCapability() {
    var list = this._list;
    var dataController2 = list._dataController;
    if ("allPages" === list.option("selectAllMode") && list.option("grouped") && !dataController2.group()) {
      ui_errors_default.log("W1010");
      return false;
    }
    return true;
  },
  _selectAllItems() {
    if (!this._checkSelectAllCapability()) {
      return;
    }
    this._list._selection.selectAll("page" === this._list.option("selectAllMode"));
  },
  _unselectAllItems() {
    if (!this._checkSelectAllCapability()) {
      return;
    }
    this._list._selection.deselectAll("page" === this._list.option("selectAllMode"));
  },
  _selectAllClickHandler(e) {
    this._list._saveSelectionChangeEvent(e);
    this._selectAllCheckBox.option("value", !this._selectAllCheckBox.option("value"));
  },
  _isSelected($itemElement) {
    return this._list.isItemSelected($itemElement);
  },
  _processCheckedState($itemElement, checked) {
    if (checked) {
      this._list.selectItem($itemElement);
    } else {
      this._list.unselectItem($itemElement);
    }
  },
  dispose() {
    this._disposeSelectAll();
    this._list.$element().removeClass(SELECT_DECORATOR_ENABLED_CLASS);
    this.callBase.apply(this, arguments);
  },
  _disposeSelectAll() {
    if (this._$selectAll) {
      this._$selectAll.remove();
      this._$selectAll = null;
    }
  }
}));

// node_modules/devextreme/esm/__internal/ui/editor/m_data_expression.js
var DataExpressionMixin = extend({}, data_helper_default, {
  _dataExpressionDefaultOptions: () => ({
    items: [],
    dataSource: null,
    itemTemplate: "item",
    value: null,
    valueExpr: "this",
    displayExpr: void 0
  }),
  _initDataExpressions() {
    this._compileValueGetter();
    this._compileDisplayGetter();
    this._initDynamicTemplates();
    this._initDataSource();
    this._itemsToDataSource();
  },
  _itemsToDataSource() {
    if (!this.option("dataSource")) {
      this._dataSource = new DataSource({
        store: new array_store_default(this.option("items")),
        pageSize: 0
      });
      this._initDataController();
    }
  },
  _compileDisplayGetter() {
    this._displayGetter = compileGetter(this._displayGetterExpr());
  },
  _displayGetterExpr() {
    return this.option("displayExpr");
  },
  _compileValueGetter() {
    this._valueGetter = compileGetter(this._valueGetterExpr());
  },
  _valueGetterExpr() {
    return this.option("valueExpr") || "this";
  },
  _loadValue(value2) {
    var deferred = Deferred();
    value2 = this._unwrappedValue(value2);
    if (!isDefined(value2)) {
      return deferred.reject().promise();
    }
    this._loadSingle(this._valueGetterExpr(), value2).done((item) => {
      this._isValueEquals(this._valueGetter(item), value2) ? deferred.resolve(item) : deferred.reject();
    }).fail(() => {
      deferred.reject();
    });
    this._loadValueDeferred = deferred;
    return deferred.promise();
  },
  _rejectValueLoading() {
    var _a;
    null === (_a = this._loadValueDeferred) || void 0 === _a ? void 0 : _a.reject({
      shouldSkipCallback: true
    });
  },
  _getCurrentValue() {
    return this.option("value");
  },
  _unwrappedValue(value2) {
    value2 = null !== value2 && void 0 !== value2 ? value2 : this._getCurrentValue();
    if (value2 && this._dataSource && "this" === this._valueGetterExpr()) {
      value2 = this._getItemKey(value2);
    }
    return variable_wrapper_default.unwrap(value2);
  },
  _getItemKey(value2) {
    var key = this._dataSource.key();
    if (Array.isArray(key)) {
      var result2 = {};
      for (var i = 0, n = key.length; i < n; i++) {
        result2[key[i]] = value2[key[i]];
      }
      return result2;
    }
    if (key && "object" === typeof value2) {
      value2 = value2[key];
    }
    return value2;
  },
  _isValueEquals(value1, value2) {
    var dataSourceKey = this._dataSource && this._dataSource.key();
    var result2 = this._compareValues(value1, value2);
    if (!result2 && dataSourceKey && isDefined(value1) && isDefined(value2)) {
      if (Array.isArray(dataSourceKey)) {
        result2 = this._compareByCompositeKey(value1, value2, dataSourceKey);
      } else {
        result2 = this._compareByKey(value1, value2, dataSourceKey);
      }
    }
    return result2;
  },
  _compareByCompositeKey(value1, value2, key) {
    var isObject2 = isObject;
    if (!isObject2(value1) || !isObject2(value2)) {
      return false;
    }
    for (var i = 0, n = key.length; i < n; i++) {
      if (value1[key[i]] !== value2[key[i]]) {
        return false;
      }
    }
    return true;
  },
  _compareByKey(value1, value2, key) {
    var unwrapObservable = variable_wrapper_default.unwrap;
    var valueKey1 = ensureDefined(unwrapObservable(value1[key]), value1);
    var valueKey2 = ensureDefined(unwrapObservable(value2[key]), value2);
    return this._compareValues(valueKey1, valueKey2);
  },
  _compareValues: (value1, value2) => toComparable(value1, true) === toComparable(value2, true),
  _initDynamicTemplates: noop,
  _setCollectionWidgetItemTemplate() {
    this._initDynamicTemplates();
    this._setCollectionWidgetOption("itemTemplate", this.option("itemTemplate"));
  },
  _getCollectionKeyExpr() {
    var valueExpr = this.option("valueExpr");
    var isValueExprField = isString(valueExpr) && "this" !== valueExpr || isFunction(valueExpr);
    return isValueExprField ? valueExpr : null;
  },
  _dataExpressionOptionChanged(args) {
    switch (args.name) {
      case "items":
        this._itemsToDataSource();
        this._setCollectionWidgetOption("items");
        break;
      case "dataSource":
        this._initDataSource();
        break;
      case "itemTemplate":
        this._setCollectionWidgetItemTemplate();
        break;
      case "valueExpr":
        this._compileValueGetter();
        break;
      case "displayExpr":
        this._compileDisplayGetter();
        this._initDynamicTemplates();
        this._setCollectionWidgetOption("displayExpr");
    }
  }
});
var m_data_expression_default = DataExpressionMixin;

// node_modules/devextreme/esm/ui/editor/ui.data_expression.js
var ui_data_expression_default = m_data_expression_default;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.provider.js
var editOptionsRegistry = [];
var registerOption = function(enabledFunc, decoratorTypeFunc, decoratorSubTypeFunc) {
  editOptionsRegistry.push({
    enabled: enabledFunc,
    decoratorType: decoratorTypeFunc,
    decoratorSubType: decoratorSubTypeFunc
  });
};
registerOption(function() {
  return this.option("menuItems").length;
}, () => "menu", function() {
  return this.option("menuMode");
});
registerOption(function() {
  return !this.option("menuItems").length && this.option("allowItemDeleting");
}, function() {
  var mode = this.option("itemDeleteMode");
  return "toggle" === mode || "slideButton" === mode || "swipe" === mode || "static" === mode ? "delete" : "menu";
}, function() {
  var mode = this.option("itemDeleteMode");
  if ("slideItem" === mode) {
    mode = "slide";
  }
  return mode;
});
registerOption(function() {
  return "none" !== this.option("selectionMode") && this.option("showSelectionControls");
}, () => "selection", () => "default");
registerOption(function() {
  return this.option("itemDragging.allowReordering") || this.option("itemDragging.allowDropInsideItem") || this.option("itemDragging.group");
}, () => "reorder", () => "default");
var LIST_ITEM_BEFORE_BAG_CLASS = "dx-list-item-before-bag";
var LIST_ITEM_AFTER_BAG_CLASS = "dx-list-item-after-bag";
var DECORATOR_BEFORE_BAG_CREATE_METHOD = "beforeBag";
var DECORATOR_AFTER_BAG_CREATE_METHOD = "afterBag";
var DECORATOR_MODIFY_ELEMENT_METHOD = "modifyElement";
var DECORATOR_AFTER_RENDER_METHOD = "afterRender";
var DECORATOR_GET_EXCLUDED_SELECTORS_METHOD = "getExcludedSelectors";
var EditProvider = class_default.inherit({
  ctor(list) {
    this._list = list;
    this._fetchRequiredDecorators();
  },
  dispose() {
    if (this._decorators && this._decorators.length) {
      each(this._decorators, (_, decorator) => {
        decorator.dispose();
      });
    }
  },
  _fetchRequiredDecorators() {
    this._decorators = [];
    each(editOptionsRegistry, (_, option) => {
      var optionEnabled = option.enabled.call(this._list);
      if (optionEnabled) {
        var decoratorType = option.decoratorType.call(this._list);
        var decoratorSubType = option.decoratorSubType.call(this._list);
        var decorator = this._createDecorator(decoratorType, decoratorSubType);
        this._decorators.push(decorator);
      }
    });
  },
  _createDecorator(type2, subType) {
    var decoratorClass = this._findDecorator(type2, subType);
    return new decoratorClass(this._list);
  },
  _findDecorator(type2, subType) {
    var _a;
    var foundDecorator = null === (_a = registry[type2]) || void 0 === _a ? void 0 : _a[subType];
    if (!foundDecorator) {
      throw ui_errors_default.Error("E1012", type2, subType);
    }
    return foundDecorator;
  },
  modifyItemElement(args) {
    var $itemElement = renderer_default(args.itemElement);
    var config2 = {
      $itemElement
    };
    this._prependBeforeBags($itemElement, config2);
    this._appendAfterBags($itemElement, config2);
    this._applyDecorators(DECORATOR_MODIFY_ELEMENT_METHOD, config2);
  },
  afterItemsRendered() {
    this._applyDecorators(DECORATOR_AFTER_RENDER_METHOD);
  },
  _prependBeforeBags($itemElement, config2) {
    var $beforeBags = this._collectDecoratorsMarkup(DECORATOR_BEFORE_BAG_CREATE_METHOD, config2, LIST_ITEM_BEFORE_BAG_CLASS);
    $itemElement.prepend($beforeBags);
  },
  _appendAfterBags($itemElement, config2) {
    var $afterBags = this._collectDecoratorsMarkup(DECORATOR_AFTER_BAG_CREATE_METHOD, config2, LIST_ITEM_AFTER_BAG_CLASS);
    $itemElement.append($afterBags);
  },
  _collectDecoratorsMarkup(method, config2, containerClass) {
    var $collector = renderer_default("<div>");
    each(this._decorators, function() {
      var $container = renderer_default("<div>").addClass(containerClass);
      this[method](extend({
        $container
      }, config2));
      if ($container.children().length) {
        $collector.append($container);
      }
    });
    return $collector.children();
  },
  _applyDecorators(method, config2) {
    each(this._decorators, function() {
      this[method](config2);
    });
  },
  _handlerExists(name2) {
    if (!this._decorators) {
      return false;
    }
    var decorators = this._decorators;
    var {
      length
    } = decorators;
    for (var i = 0; i < length; i++) {
      if (decorators[i][name2] !== noop) {
        return true;
      }
    }
    return false;
  },
  _eventHandler(name2, $itemElement, e) {
    if (!this._decorators) {
      return false;
    }
    var response = false;
    var decorators = this._decorators;
    var {
      length
    } = decorators;
    for (var i = 0; i < length; i++) {
      response = decorators[i][name2]($itemElement, e);
      if (response) {
        break;
      }
    }
    return response;
  },
  handleClick($itemElement, e) {
    return this._eventHandler("handleClick", $itemElement, e);
  },
  handleKeyboardEvents(currentFocusedIndex, moveFocusUp) {
    return this._eventHandler("handleKeyboardEvents", currentFocusedIndex, moveFocusUp);
  },
  handleEnterPressing(e) {
    return this._eventHandler("handleEnterPressing", e);
  },
  contextMenuHandlerExists() {
    return this._handlerExists("handleContextMenu");
  },
  handleContextMenu($itemElement, e) {
    return this._eventHandler("handleContextMenu", $itemElement, e);
  },
  getExcludedItemSelectors() {
    var excludedSelectors = [];
    this._applyDecorators(DECORATOR_GET_EXCLUDED_SELECTORS_METHOD, excludedSelectors);
    return excludedSelectors.join(",");
  }
});
var m_list_edit_provider_default = EditProvider;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.strategy.grouped.js
var LIST_ITEM_CLASS2 = "dx-list-item";
var LIST_GROUP_CLASS2 = "dx-list-group";
var SELECTION_SHIFT = 20;
var SELECTION_MASK = (1 << SELECTION_SHIFT) - 1;
var combineIndex = function(indices) {
  return (indices.group << SELECTION_SHIFT) + indices.item;
};
var splitIndex = function(combinedIndex) {
  return {
    group: combinedIndex >> SELECTION_SHIFT,
    item: combinedIndex & SELECTION_MASK
  };
};
var GroupedEditStrategy = m_collection_widget_edit_strategy_plain_default.inherit({
  _groupElements() {
    return this._collectionWidget._itemContainer().find(".".concat(LIST_GROUP_CLASS2));
  },
  _groupItemElements: ($group) => $group.find(".".concat(LIST_ITEM_CLASS2)),
  getIndexByItemData(itemData) {
    var groups = this._collectionWidget.option("items");
    var index = false;
    if (!itemData) {
      return false;
    }
    if (itemData.items && itemData.items.length) {
      itemData = itemData.items[0];
    }
    each(groups, (groupIndex, group) => {
      if (!group.items) {
        return false;
      }
      each(group.items, (itemIndex, item) => {
        if (item !== itemData) {
          return true;
        }
        index = {
          group: groupIndex,
          item: itemIndex
        };
        return false;
      });
      if (index) {
        return false;
      }
    });
    return index;
  },
  getItemDataByIndex(index) {
    var items = this._collectionWidget.option("items");
    if (isNumeric(index)) {
      return this.itemsGetter()[index];
    }
    return index && items[index.group] && items[index.group].items[index.item] || null;
  },
  itemsGetter() {
    var resultItems = [];
    var items = this._collectionWidget.option("items");
    for (var i = 0; i < items.length; i++) {
      if (items[i] && items[i].items) {
        resultItems = resultItems.concat(items[i].items);
      } else {
        resultItems.push(items[i]);
      }
    }
    return resultItems;
  },
  deleteItemAtIndex(index) {
    var indices = splitIndex(index);
    var itemGroup = this._collectionWidget.option("items")[indices.group].items;
    itemGroup.splice(indices.item, 1);
  },
  getKeysByItems(items) {
    var plainItems = [];
    var i;
    for (i = 0; i < items.length; i++) {
      if (items[i] && items[i].items) {
        plainItems = plainItems.concat(items[i].items);
      } else {
        plainItems.push(items[i]);
      }
    }
    var result2 = [];
    for (i = 0; i < plainItems.length; i++) {
      result2.push(this._collectionWidget.keyOf(plainItems[i]));
    }
    return result2;
  },
  getIndexByKey(key, items) {
    var groups = items || this._collectionWidget.option("items");
    var index = -1;
    var that = this;
    each(groups, (groupIndex, group) => {
      if (!group.items) {
        return;
      }
      each(group.items, (itemIndex, item) => {
        var itemKey = that._collectionWidget.keyOf(item);
        if (that._equalKeys(itemKey, key)) {
          index = {
            group: groupIndex,
            item: itemIndex
          };
          return false;
        }
      });
      if (-1 !== index) {
        return false;
      }
    });
    return index;
  },
  _getGroups(items) {
    var dataController2 = this._collectionWidget._dataController;
    var group = dataController2.group();
    if (group) {
      return store_helper_default.queryByOptions(query_default(items), {
        group
      }).toArray();
    }
    return this._collectionWidget.option("items");
  },
  getItemsByKeys(keys, items) {
    var result2 = [];
    var groups = this._getGroups(items);
    var groupItemByKeyMap = {};
    var getItemMeta = (key) => {
      var index = this.getIndexByKey(key, groups);
      var group = index && groups[index.group];
      if (!group) {
        return;
      }
      return {
        groupKey: group.key,
        item: group.items[index.item]
      };
    };
    each(keys, (_, key) => {
      var itemMeta = getItemMeta(key);
      if (!itemMeta) {
        return;
      }
      var {
        groupKey
      } = itemMeta;
      var {
        item
      } = itemMeta;
      var selectedGroup = groupItemByKeyMap[groupKey];
      if (!selectedGroup) {
        selectedGroup = {
          key: groupKey,
          items: []
        };
        groupItemByKeyMap[groupKey] = selectedGroup;
        result2.push(selectedGroup);
      }
      selectedGroup.items.push(item);
    });
    return result2;
  },
  moveItemAtIndexToIndex(movingIndex, destinationIndex) {
    var items = this._collectionWidget.option("items");
    var movingIndices = splitIndex(movingIndex);
    var destinationIndices = splitIndex(destinationIndex);
    var movingItemGroup = items[movingIndices.group].items;
    var destinationItemGroup = items[destinationIndices.group].items;
    var movedItemData = movingItemGroup[movingIndices.item];
    movingItemGroup.splice(movingIndices.item, 1);
    destinationItemGroup.splice(destinationIndices.item, 0, movedItemData);
  },
  _isItemIndex: (index) => index && isNumeric(index.group) && isNumeric(index.item),
  _getNormalizedItemIndex(itemElement) {
    var $item = renderer_default(itemElement);
    var $group = $item.closest(".".concat(LIST_GROUP_CLASS2));
    if (!$group.length) {
      return -1;
    }
    return combineIndex({
      group: this._groupElements().index($group),
      item: this._groupItemElements($group).index($item)
    });
  },
  _normalizeItemIndex: (index) => combineIndex(index),
  _denormalizeItemIndex: (index) => splitIndex(index),
  _getItemByNormalizedIndex(index) {
    var indices = splitIndex(index);
    var $group = this._groupElements().eq(indices.group);
    return this._groupItemElements($group).eq(indices.item);
  },
  _itemsFromSameParent: (firstIndex, secondIndex) => splitIndex(firstIndex).group === splitIndex(secondIndex).group
});
var m_list_edit_strategy_grouped_default = GroupedEditStrategy;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.js
var LIST_ITEM_SELECTED_CLASS = "dx-list-item-selected";
var LIST_ITEM_RESPONSE_WAIT_CLASS = "dx-list-item-response-wait";
var ListEdit = ListBase.inherit({
  _supportedKeys() {
    var that = this;
    var parent = this.callBase();
    var moveFocusedItem = (e, moveUp) => {
      var editStrategy = this._editStrategy;
      var focusedElement = this.option("focusedElement");
      var focusedItemIndex = editStrategy.getNormalizedIndex(focusedElement);
      var isLastIndexFocused = focusedItemIndex === this._getLastItemIndex();
      if (isLastIndexFocused && this._dataController.isLoading()) {
        return;
      }
      if (e.shiftKey && that.option("itemDragging.allowReordering")) {
        var nextItemIndex = focusedItemIndex + (moveUp ? -1 : 1);
        var $nextItem = editStrategy.getItemElement(nextItemIndex);
        this.reorderItem(focusedElement, $nextItem);
        this.scrollToItem(focusedElement);
        e.preventDefault();
      } else {
        var editProvider = this._editProvider;
        var isInternalMoving = editProvider.handleKeyboardEvents(focusedItemIndex, moveUp);
        if (!isInternalMoving) {
          moveUp ? parent.upArrow(e) : parent.downArrow(e);
        }
      }
    };
    return extend({}, parent, {
      del: (e) => {
        if (that.option("allowItemDeleting")) {
          e.preventDefault();
          that.deleteItem(that.option("focusedElement"));
        }
      },
      upArrow: (e) => moveFocusedItem(e, true),
      downArrow: (e) => moveFocusedItem(e),
      enter: function(e) {
        if (!this._editProvider.handleEnterPressing(e)) {
          parent.enter.apply(this, arguments);
        }
      },
      space: function(e) {
        if (!this._editProvider.handleEnterPressing(e)) {
          parent.space.apply(this, arguments);
        }
      }
    });
  },
  _updateSelection() {
    this._editProvider.afterItemsRendered();
    this.callBase();
  },
  _getLastItemIndex() {
    return this._itemElements().length - 1;
  },
  _refreshItemElements() {
    this.callBase();
    var excludedSelectors = this._editProvider.getExcludedItemSelectors();
    if (excludedSelectors.length) {
      this._itemElementsCache = this._itemElementsCache.not(excludedSelectors);
    }
  },
  _isItemStrictEquals(item1, item2) {
    var privateKey = item1 && item1.__dx_key__;
    if (privateKey && !this.key() && this._selection.isItemSelected(privateKey)) {
      return false;
    }
    return this.callBase(item1, item2);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      showSelectionControls: false,
      selectionMode: "none",
      selectAllMode: "page",
      onSelectAllValueChanged: null,
      selectAllText: message_default.format("dxList-selectAll"),
      menuItems: [],
      menuMode: "context",
      allowItemDeleting: false,
      itemDeleteMode: "static",
      itemDragging: {}
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: (_device) => "ios" === _device.platform,
      options: {
        menuMode: "slide",
        itemDeleteMode: "slideItem"
      }
    }, {
      device: {
        platform: "android"
      },
      options: {
        itemDeleteMode: "swipe"
      }
    }]);
  },
  _init() {
    this.callBase();
    this._initEditProvider();
  },
  _initDataSource() {
    this.callBase();
    if (!this._isPageSelectAll()) {
      this._dataSource && this._dataSource.requireTotalCount(true);
    }
  },
  _isPageSelectAll() {
    return "page" === this.option("selectAllMode");
  },
  _initEditProvider() {
    this._editProvider = new m_list_edit_provider_default(this);
  },
  _disposeEditProvider() {
    if (this._editProvider) {
      this._editProvider.dispose();
    }
  },
  _refreshEditProvider() {
    this._disposeEditProvider();
    this._initEditProvider();
  },
  _initEditStrategy() {
    if (this.option("grouped")) {
      this._editStrategy = new m_list_edit_strategy_grouped_default(this);
    } else {
      this.callBase();
    }
  },
  _initMarkup() {
    this._refreshEditProvider();
    this.callBase();
  },
  _renderItems() {
    this.callBase(...arguments);
    this._editProvider.afterItemsRendered();
  },
  _selectedItemClass: () => LIST_ITEM_SELECTED_CLASS,
  _itemResponseWaitClass: () => LIST_ITEM_RESPONSE_WAIT_CLASS,
  _itemClickHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    if ($itemElement.is(".dx-state-disabled, .dx-state-disabled *")) {
      return;
    }
    var handledByEditProvider = this._editProvider.handleClick($itemElement, e);
    if (handledByEditProvider) {
      return;
    }
    this._saveSelectionChangeEvent(e);
    this.callBase(...arguments);
  },
  _shouldFireContextMenuEvent() {
    return this.callBase(...arguments) || this._editProvider.contextMenuHandlerExists();
  },
  _itemHoldHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    if ($itemElement.is(".dx-state-disabled, .dx-state-disabled *")) {
      return;
    }
    var handledByEditProvider = isTouchEvent(e) && this._editProvider.handleContextMenu($itemElement, e);
    if (handledByEditProvider) {
      e.handledByEditProvider = true;
      return;
    }
    this.callBase(...arguments);
  },
  _getItemContainer(changeData) {
    var _a;
    if (this.option("grouped")) {
      var groupIndex = null === (_a = this._editStrategy.getIndexByItemData(changeData)) || void 0 === _a ? void 0 : _a.group;
      return this._getGroupContainerByIndex(groupIndex);
    }
    return this.callBase(changeData);
  },
  _itemContextMenuHandler(e) {
    var $itemElement = renderer_default(e.currentTarget);
    if ($itemElement.is(".dx-state-disabled, .dx-state-disabled *")) {
      return;
    }
    var handledByEditProvider = !e.handledByEditProvider && this._editProvider.handleContextMenu($itemElement, e);
    if (handledByEditProvider) {
      e.preventDefault();
      return;
    }
    this.callBase(...arguments);
  },
  _postprocessRenderItem(args) {
    this.callBase(...arguments);
    this._editProvider.modifyItemElement(args);
  },
  _clean() {
    this._disposeEditProvider();
    this.callBase();
  },
  focusListItem(index) {
    var $item = this._editStrategy.getItemElement(index);
    this.option("focusedElement", $item);
    this.focus();
    this.scrollToItem(this.option("focusedElement"));
  },
  _optionChanged(args) {
    switch (args.name) {
      case "selectAllMode":
        this._initDataSource();
        this._dataController.pageIndex(0);
        this._dataController.load();
        break;
      case "grouped":
        this._clearSelectedItems();
        delete this._renderingGroupIndex;
        this._initEditStrategy();
        this.callBase(args);
        break;
      case "showSelectionControls":
      case "menuItems":
      case "menuMode":
      case "allowItemDeleting":
      case "itemDeleteMode":
      case "itemDragging":
      case "selectAllText":
        this._invalidate();
        break;
      case "onSelectAllValueChanged":
        break;
      default:
        this.callBase(args);
    }
  },
  selectAll() {
    return this._selection.selectAll(this._isPageSelectAll());
  },
  unselectAll() {
    return this._selection.deselectAll(this._isPageSelectAll());
  },
  isSelectAll() {
    return this._selection.getSelectAllState(this._isPageSelectAll());
  },
  getFlatIndexByItemElement(itemElement) {
    return this._itemElements().index(itemElement);
  },
  getItemElementByFlatIndex(flatIndex) {
    var $itemElements = this._itemElements();
    if (flatIndex < 0 || flatIndex >= $itemElements.length) {
      return renderer_default();
    }
    return $itemElements.eq(flatIndex);
  },
  getItemByIndex(index) {
    return this._editStrategy.getItemDataByIndex(index);
  },
  deleteItem(itemElement) {
    var editStrategy = this._editStrategy;
    var deletingElementIndex = editStrategy.getNormalizedIndex(itemElement);
    var focusedElement = this.option("focusedElement");
    var focusStateEnabled = this.option("focusStateEnabled");
    var focusedItemIndex = focusedElement ? editStrategy.getNormalizedIndex(focusedElement) : deletingElementIndex;
    var isLastIndexFocused = focusedItemIndex === this._getLastItemIndex();
    var nextFocusedItem = isLastIndexFocused || deletingElementIndex < focusedItemIndex ? focusedItemIndex - 1 : focusedItemIndex;
    var promise = this.callBase(itemElement);
    return promise.done(function() {
      if (focusStateEnabled) {
        this.focusListItem(nextFocusedItem);
      }
    });
  }
});
var m_list_edit_default = ListEdit;

// node_modules/devextreme/esm/__internal/ui/list/m_list.edit.search.js
var ListSearch = m_list_edit_default.inherit(ui_search_box_mixin_default).inherit({
  _addWidgetPrefix: (className) => "dx-list-".concat(className),
  _getCombinedFilter() {
    var dataController2 = this._dataController;
    var storeLoadOptions = {
      filter: dataController2.filter()
    };
    dataController2.addSearchFilter(storeLoadOptions);
    var {
      filter
    } = storeLoadOptions;
    return filter;
  },
  _initDataSource() {
    var value2 = this.option("searchValue");
    var expr = this.option("searchExpr");
    var mode = this.option("searchMode");
    this.callBase();
    var dataController2 = this._dataController;
    value2 && value2.length && dataController2.searchValue(value2);
    mode.length && dataController2.searchOperation(ui_search_box_mixin_default.getOperationBySearchMode(mode));
    expr && dataController2.searchExpr(expr);
  }
});
var m_list_edit_search_default = ListSearch;

// node_modules/devextreme/esm/ui/list_light.js
component_registrator_default("dxList", m_list_edit_search_default);
var list_light_default = m_list_edit_search_default;

// node_modules/devextreme/esm/__internal/ui/drop_down_editor/m_drop_down_button.js
var DROP_DOWN_EDITOR_BUTTON_CLASS = "dx-dropdowneditor-button";
var DROP_DOWN_EDITOR_BUTTON_VISIBLE = "dx-dropdowneditor-button-visible";
var BUTTON_MESSAGE = "dxDropDownEditor-selectLabel";
var DropDownButton = class extends TextEditorButton {
  constructor(name2, editor, options2) {
    super(name2, editor, options2);
    this.currentTemplate = null;
  }
  _attachEvents(instance) {
    var {
      editor
    } = this;
    instance.option("onClick", (e) => {
      var _a;
      if (null === (_a = editor._shouldCallOpenHandler) || void 0 === _a ? void 0 : _a.call(editor)) {
        editor._openHandler(e);
        return;
      }
      !editor.option("openOnFieldClick") && editor._openHandler(e);
    });
    events_engine_default.on(instance.$element(), "mousedown", (e) => {
      if (editor.$element().is(".dx-state-focused")) {
        e.preventDefault();
      }
    });
  }
  _create() {
    var {
      editor
    } = this;
    var $element = renderer_default("<div>");
    var options2 = this._getOptions();
    this._addToContainer($element);
    var instance = editor._createComponent($element, button_default, extend({}, options2, {
      elementAttr: {
        "aria-label": message_default.format(BUTTON_MESSAGE)
      }
    }));
    this._legacyRender(editor.$element(), $element, options2.visible);
    return {
      $element,
      instance
    };
  }
  _getOptions() {
    var {
      editor
    } = this;
    var visible = this._isVisible();
    var isReadOnly = editor.option("readOnly");
    var options2 = {
      focusStateEnabled: false,
      hoverStateEnabled: false,
      activeStateEnabled: false,
      useInkRipple: false,
      disabled: isReadOnly,
      visible
    };
    this._addTemplate(options2);
    return options2;
  }
  _isVisible() {
    var {
      editor
    } = this;
    return super._isVisible() && editor.option("showDropDownButton");
  }
  _legacyRender($editor, $element, isVisible) {
    $editor.toggleClass(DROP_DOWN_EDITOR_BUTTON_VISIBLE, isVisible);
    if ($element) {
      $element.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass(DROP_DOWN_EDITOR_BUTTON_CLASS);
    }
  }
  _isSameTemplate() {
    return this.editor.option("dropDownButtonTemplate") === this.currentTemplate;
  }
  _addTemplate(options2) {
    if (!this._isSameTemplate()) {
      options2.template = this.editor._getTemplateByOption("dropDownButtonTemplate");
      this.currentTemplate = this.editor.option("dropDownButtonTemplate");
    }
  }
  update() {
    var shouldUpdate = super.update();
    if (shouldUpdate) {
      var {
        editor,
        instance
      } = this;
      var $editor = editor.$element();
      var options2 = this._getOptions();
      null === instance || void 0 === instance ? void 0 : instance.option(options2);
      this._legacyRender($editor, null === instance || void 0 === instance ? void 0 : instance.$element(), options2.visible);
    }
  }
};

// node_modules/devextreme/esm/__internal/ui/drop_down_editor/m_utils.js
var getElementWidth = function($element) {
  if (hasWindow()) {
    return getOuterWidth($element);
  }
};
var getSizeValue = function(size) {
  if (null === size) {
    size = void 0;
  }
  if ("function" === typeof size) {
    size = size();
  }
  return size;
};

// node_modules/devextreme/esm/__internal/ui/drop_down_editor/m_drop_down_editor.js
var DROP_DOWN_EDITOR_CLASS = "dx-dropdowneditor";
var DROP_DOWN_EDITOR_INPUT_WRAPPER = "dx-dropdowneditor-input-wrapper";
var DROP_DOWN_EDITOR_BUTTON_ICON = "dx-dropdowneditor-icon";
var DROP_DOWN_EDITOR_OVERLAY = "dx-dropdowneditor-overlay";
var DROP_DOWN_EDITOR_OVERLAY_FLIPPED = "dx-dropdowneditor-overlay-flipped";
var DROP_DOWN_EDITOR_ACTIVE = "dx-dropdowneditor-active";
var DROP_DOWN_EDITOR_FIELD_CLICKABLE = "dx-dropdowneditor-field-clickable";
var DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = "dx-dropdowneditor-field-template-wrapper";
var isIOs = "ios" === devices_default.current().platform;
var DropDownEditor = text_box_default2.inherit({
  _supportedKeys() {
    return extend({}, this.callBase(), {
      tab(e) {
        if (!this.option("opened")) {
          return;
        }
        if (!this._popup.getFocusableElements().length) {
          this.close();
          return;
        }
        var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();
        if ($focusableElement) {
          events_engine_default.trigger($focusableElement, "focus");
          $focusableElement.select();
        }
        e.preventDefault();
      },
      escape(e) {
        if (this.option("opened")) {
          e.preventDefault();
        }
        this.close();
        return true;
      },
      upArrow(e) {
        if (!isCommandKeyPressed(e)) {
          e.preventDefault();
          e.stopPropagation();
          if (e.altKey) {
            this.close();
            return false;
          }
        }
        return true;
      },
      downArrow(e) {
        if (!isCommandKeyPressed(e)) {
          e.preventDefault();
          e.stopPropagation();
          if (e.altKey) {
            this._validatedOpening();
            return false;
          }
        }
        return true;
      },
      enter(e) {
        if (this.option("opened")) {
          e.preventDefault();
          this._valueChangeEventHandler(e);
        }
        return true;
      }
    });
  },
  _getDefaultButtons() {
    return this.callBase().concat([{
      name: "dropDown",
      Ctor: DropDownButton
    }]);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      value: null,
      onOpened: null,
      onClosed: null,
      opened: false,
      acceptCustomValue: true,
      applyValueMode: "instantly",
      deferRendering: true,
      activeStateEnabled: true,
      dropDownButtonTemplate: "dropDownButton",
      fieldTemplate: null,
      openOnFieldClick: false,
      showDropDownButton: true,
      buttons: void 0,
      dropDownOptions: {
        showTitle: false
      },
      popupPosition: this._getDefaultPopupPosition(),
      onPopupInitialized: null,
      applyButtonText: message_default.format("OK"),
      cancelButtonText: message_default.format("Cancel"),
      buttonsLocation: "default",
      useHiddenSubmitElement: false,
      validationMessagePosition: "auto"
    });
  },
  _useTemplates: () => true,
  _getDefaultPopupPosition(isRtlEnabled) {
    var position2 = getDefaultAlignment(isRtlEnabled);
    return {
      offset: {
        h: 0,
        v: -1
      },
      my: "".concat(position2, " top"),
      at: "".concat(position2, " bottom"),
      collision: "flip flip"
    };
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device(device) {
        var isGeneric2 = "generic" === device.platform;
        return isGeneric2;
      },
      options: {
        popupPosition: {
          offset: {
            v: 0
          }
        }
      }
    }]);
  },
  _inputWrapper() {
    return this.$element().find(".".concat(DROP_DOWN_EDITOR_INPUT_WRAPPER)).first();
  },
  _init() {
    this.callBase();
    this._initVisibilityActions();
    this._initPopupInitializedAction();
    this._updatePopupPosition(this.option("rtlEnabled"));
    this._options.cache("dropDownOptions", this.option("dropDownOptions"));
  },
  _updatePopupPosition(isRtlEnabled) {
    var {
      my,
      at
    } = this._getDefaultPopupPosition(isRtlEnabled);
    var currentPosition = this.option("popupPosition");
    this.option("popupPosition", extend({}, currentPosition, {
      my,
      at
    }));
  },
  _initVisibilityActions() {
    this._openAction = this._createActionByOption("onOpened", {
      excludeValidators: ["disabled", "readOnly"]
    });
    this._closeAction = this._createActionByOption("onClosed", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _initPopupInitializedAction() {
    this._popupInitializedAction = this._createActionByOption("onPopupInitialized", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _initMarkup() {
    this._renderSubmitElement();
    this.callBase();
    this.$element().addClass(DROP_DOWN_EDITOR_CLASS);
    this.setAria("role", this._getAriaRole());
  },
  _render() {
    this._detachFocusEvents();
    this.callBase();
    this._renderOpenHandler();
    this._attachFocusOutHandler();
    this._renderOpenedState();
  },
  _renderContentImpl() {
    if (!this.option("deferRendering")) {
      this._createPopup();
    }
  },
  _renderInput() {
    this.callBase();
    this._renderTemplateWrapper();
    this._wrapInput();
    this._setDefaultAria();
  },
  _wrapInput() {
    this._$container = this.$element().wrapInner(renderer_default("<div>").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER)).children().eq(0);
  },
  _getAriaHasPopup: () => "true",
  _getAriaAutocomplete: () => "list",
  _getAriaRole: () => "combobox",
  _setDefaultAria() {
    this.setAria({
      haspopup: this._getAriaHasPopup(),
      autocomplete: this._getAriaAutocomplete(),
      role: this._getAriaRole()
    });
  },
  _readOnlyPropValue() {
    return !this._isEditable() || this.callBase();
  },
  _cleanFocusState() {
    this.callBase();
    if (this.option("fieldTemplate")) {
      this._detachFocusEvents();
    }
  },
  _getFieldTemplate() {
    return this.option("fieldTemplate") && this._getTemplateByOption("fieldTemplate");
  },
  _renderMask() {
    if (this.option("fieldTemplate")) {
      return;
    }
    this.callBase();
  },
  _renderField() {
    var fieldTemplate = this._getFieldTemplate();
    if (fieldTemplate) {
      this._renderTemplatedField(fieldTemplate, this._fieldRenderData());
    }
  },
  _renderPlaceholder() {
    var hasFieldTemplate = !!this._getFieldTemplate();
    if (!hasFieldTemplate) {
      this.callBase();
    }
  },
  _renderValue() {
    if (this.option("useHiddenSubmitElement")) {
      this._setSubmitValue();
    }
    var promise = this.callBase();
    promise.always(this._renderField.bind(this));
  },
  _getButtonsContainer() {
    var fieldTemplate = this._getFieldTemplate();
    return fieldTemplate ? this._$container : this._$textEditorContainer;
  },
  _renderTemplateWrapper() {
    var fieldTemplate = this._getFieldTemplate();
    if (!fieldTemplate) {
      return;
    }
    if (!this._$templateWrapper) {
      this._$templateWrapper = renderer_default("<div>").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).prependTo(this.$element());
    }
  },
  _renderTemplatedField(fieldTemplate, data17) {
    var isFocused = focused(this._input());
    this._detachKeyboardEvents();
    this._detachFocusEvents();
    this._$textEditorContainer.remove();
    this._$templateWrapper.empty();
    var $templateWrapper = this._$templateWrapper;
    var currentRenderContext = Symbol("renderContext");
    this._activeRenderContext = currentRenderContext;
    fieldTemplate.render({
      model: data17,
      container: getPublicElement($templateWrapper),
      onRendered: () => {
        if (this._activeRenderContext !== currentRenderContext) {
          return;
        }
        var isRenderedInRoot = !!this.$element().find($templateWrapper).length;
        if (!isRenderedInRoot) {
          return;
        }
        var $input = this._input();
        if (!$input.length) {
          throw ui_errors_default.Error("E1010");
        }
        this._integrateInput();
        isFocused && events_engine_default.trigger($input, "focus");
      }
    });
  },
  _integrateInput() {
    var _a;
    var {
      isValid
    } = this.option();
    this._renderFocusState();
    this._refreshValueChangeEvent();
    this._refreshEvents();
    this._refreshEmptinessEvent();
    this._setDefaultAria();
    this._setFieldAria();
    this._toggleValidationClasses(!isValid);
    null === (_a = this.option("_onMarkupRendered")) || void 0 === _a ? void 0 : _a();
  },
  _refreshEmptinessEvent() {
    events_engine_default.off(this._input(), "input blur", this._toggleEmptinessEventHandler);
    this._renderEmptinessEvent();
  },
  _fieldRenderData() {
    return this.option("value");
  },
  _initTemplates() {
    this._templateManager.addDefaultTemplates({
      dropDownButton: new FunctionTemplate((options2) => {
        var $icon = renderer_default("<div>").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);
        renderer_default(options2.container).append($icon);
      })
    });
    this.callBase();
  },
  _renderOpenHandler() {
    var $inputWrapper = this._inputWrapper();
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var openOnFieldClick = this.option("openOnFieldClick");
    events_engine_default.off($inputWrapper, eventName);
    events_engine_default.on($inputWrapper, eventName, this._getInputClickHandler(openOnFieldClick));
    this.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);
    if (openOnFieldClick) {
      this._openOnFieldClickAction = this._createAction(this._openHandler.bind(this));
    }
  },
  _attachFocusOutHandler() {
    if (isIOs) {
      this._detachFocusOutEvents();
      events_engine_default.on(this._inputWrapper(), addNamespace("focusout", this.NAME), (event) => {
        var newTarget = event.relatedTarget;
        if (newTarget && this.option("opened")) {
          var isNewTargetOutside = this._isTargetOutOfComponent(newTarget);
          if (isNewTargetOutside) {
            this.close();
          }
        }
      });
    }
  },
  _isTargetOutOfComponent(newTarget) {
    var popupWrapper = this.content ? renderer_default(this.content()).closest(".".concat(DROP_DOWN_EDITOR_OVERLAY)) : this._$popup;
    var isTargetOutsidePopup = 0 === renderer_default(newTarget).closest(".".concat(DROP_DOWN_EDITOR_OVERLAY), popupWrapper).length;
    return isTargetOutsidePopup;
  },
  _detachFocusOutEvents() {
    isIOs && events_engine_default.off(this._inputWrapper(), addNamespace("focusout", this.NAME));
  },
  _getInputClickHandler(openOnFieldClick) {
    return openOnFieldClick ? (e) => {
      this._executeOpenAction(e);
    } : () => {
      this._focusInput();
    };
  },
  _openHandler() {
    this._toggleOpenState();
  },
  _executeOpenAction(e) {
    this._openOnFieldClickAction({
      event: e
    });
  },
  _keyboardEventBindingTarget() {
    return this._input();
  },
  _focusInput() {
    if (this.option("disabled")) {
      return false;
    }
    if (this.option("focusStateEnabled") && !focused(this._input())) {
      this._resetCaretPosition();
      events_engine_default.trigger(this._input(), "focus");
    }
    return true;
  },
  _resetCaretPosition() {
    var ignoreEditable = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : false;
    var inputElement = this._input().get(0);
    if (inputElement) {
      var {
        value: value2
      } = inputElement;
      var caretPosition = isDefined(value2) && (ignoreEditable || this._isEditable()) ? value2.length : 0;
      this._caret({
        start: caretPosition,
        end: caretPosition
      }, true);
    }
  },
  _isEditable() {
    return this.option("acceptCustomValue");
  },
  _toggleOpenState(isVisible) {
    if (!this._focusInput()) {
      return;
    }
    if (!this.option("readOnly")) {
      isVisible = arguments.length ? isVisible : !this.option("opened");
      this.option("opened", isVisible);
    }
  },
  _getControlsAria() {
    return this._popup && this._popupContentId;
  },
  _renderOpenedState() {
    var opened = this.option("opened");
    if (opened) {
      this._createPopup();
    }
    this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);
    this._setPopupOption("visible", opened);
    var arias = {
      expanded: opened,
      controls: this._getControlsAria()
    };
    this.setAria(arias);
    this.setAria("owns", opened ? this._popupContentId : void 0, this.$element());
  },
  _createPopup() {
    if (this._$popup) {
      return;
    }
    this._$popup = renderer_default("<div>").addClass(DROP_DOWN_EDITOR_OVERLAY).appendTo(this.$element());
    this._renderPopup();
    this._renderPopupContent();
  },
  _renderPopupContent: noop,
  _renderPopup() {
    var popupConfig = extend(this._popupConfig(), this._options.cache("dropDownOptions"));
    delete popupConfig.closeOnOutsideClick;
    if (popupConfig.elementAttr && !Object.keys(popupConfig.elementAttr).length) {
      delete popupConfig.elementAttr;
    }
    this._popup = this._createComponent(this._$popup, ui_popup_default, popupConfig);
    this._popup.on({
      showing: this._popupShowingHandler.bind(this),
      shown: this._popupShownHandler.bind(this),
      hiding: this._popupHidingHandler.bind(this),
      hidden: this._popupHiddenHandler.bind(this),
      contentReady: this._contentReadyHandler.bind(this)
    });
    this._attachPopupKeyHandler();
    this._contentReadyHandler();
    this._setPopupContentId(this._popup.$content());
    this._bindInnerWidgetOptions(this._popup, "dropDownOptions");
  },
  _attachPopupKeyHandler() {
    events_engine_default.on(this._popup.$overlayContent(), addNamespace("keydown", this.NAME), (e) => this._popupKeyHandler(e));
  },
  _popupKeyHandler(e) {
    switch (normalizeKeyName(e)) {
      case "tab":
        this._popupTabHandler(e);
        break;
      case "escape":
        this._popupEscHandler(e);
    }
  },
  _popupTabHandler(e) {
    var $target = renderer_default(e.target);
    var moveBackward = e.shiftKey && $target.is(this._getFirstPopupElement());
    var moveForward = !e.shiftKey && $target.is(this._getLastPopupElement());
    if (moveForward || moveBackward) {
      events_engine_default.trigger(this.field(), "focus");
      e.preventDefault();
    }
  },
  _popupEscHandler() {
    events_engine_default.trigger(this._input(), "focus");
    this.close();
  },
  _setPopupContentId($popupContent) {
    this._popupContentId = "dx-".concat(new guid_default());
    this.setAria("id", this._popupContentId, $popupContent);
  },
  _contentReadyHandler: noop,
  _popupConfig() {
    return {
      onInitialized: this._getPopupInitializedHandler(),
      position: extend(this.option("popupPosition"), {
        of: this.$element()
      }),
      showTitle: this.option("dropDownOptions.showTitle"),
      _ignoreFunctionValueDeprecation: true,
      width: () => getElementWidth(this.$element()),
      height: "auto",
      shading: false,
      hideOnParentScroll: true,
      hideOnOutsideClick: (e) => this._closeOutsideDropDownHandler(e),
      animation: {
        show: {
          type: "fade",
          duration: 0,
          from: 0,
          to: 1
        },
        hide: {
          type: "fade",
          duration: 400,
          from: 1,
          to: 0
        }
      },
      deferRendering: false,
      focusStateEnabled: false,
      showCloseButton: false,
      dragEnabled: false,
      toolbarItems: this._getPopupToolbarItems(),
      onPositioned: this._popupPositionedHandler.bind(this),
      fullScreen: false,
      contentTemplate: null,
      _hideOnParentScrollTarget: this.$element(),
      _wrapperClassExternal: DROP_DOWN_EDITOR_OVERLAY,
      _ignorePreventScrollEventsDeprecation: true
    };
  },
  _popupInitializedHandler: noop,
  _getPopupInitializedHandler() {
    var onPopupInitialized = this.option("onPopupInitialized");
    return (e) => {
      this._popupInitializedHandler(e);
      if (onPopupInitialized) {
        this._popupInitializedAction({
          popup: e.component
        });
      }
    };
  },
  _dimensionChanged() {
    if (hasWindow() && !this.$element().is(":visible")) {
      this.close();
      return;
    }
    this._updatePopupWidth();
  },
  _updatePopupWidth() {
    var popupWidth = getSizeValue(this.option("dropDownOptions.width"));
    if (void 0 === popupWidth) {
      this._setPopupOption("width", () => getElementWidth(this.$element()));
    }
  },
  _popupPositionedHandler(e) {
    var _a, _b;
    var {
      labelMode,
      stylingMode
    } = this.option();
    if (!this._popup) {
      return;
    }
    var $popupOverlayContent = this._popup.$overlayContent();
    var isOverlayFlipped = null === (_b = null === (_a = e.position) || void 0 === _a ? void 0 : _a.v) || void 0 === _b ? void 0 : _b.flip;
    var shouldIndentForLabel = "hidden" !== labelMode && "outside" !== labelMode && "outlined" === stylingMode;
    if (e.position) {
      $popupOverlayContent.toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, isOverlayFlipped);
    }
    if (isOverlayFlipped && shouldIndentForLabel && this._label.isVisible()) {
      var $label = this._label.$element();
      move($popupOverlayContent, {
        top: locate($popupOverlayContent).top - parseInt($label.css("fontSize"))
      });
    }
  },
  _popupShowingHandler: noop,
  _popupHidingHandler() {
    this.option("opened", false);
  },
  _popupShownHandler() {
    var _a;
    this._openAction();
    null === (_a = this._validationMessage) || void 0 === _a ? void 0 : _a.option("positionSide", this._getValidationMessagePositionSide());
  },
  _popupHiddenHandler() {
    var _a;
    this._closeAction();
    null === (_a = this._validationMessage) || void 0 === _a ? void 0 : _a.option("positionSide", this._getValidationMessagePositionSide());
  },
  _getValidationMessagePositionSide() {
    var validationMessagePosition = this.option("validationMessagePosition");
    if ("auto" !== validationMessagePosition) {
      return validationMessagePosition;
    }
    var positionSide = "bottom";
    if (this._popup && this._popup.option("visible")) {
      var {
        top: myTop
      } = position_default.setup(this.$element());
      var {
        top: popupTop
      } = position_default.setup(this._popup.$content());
      positionSide = myTop + this.option("popupPosition").offset.v > popupTop ? "bottom" : "top";
    }
    return positionSide;
  },
  _closeOutsideDropDownHandler(_ref) {
    var {
      target
    } = _ref;
    var $target = renderer_default(target);
    var dropDownButton = this.getButton("dropDown");
    var $dropDownButton = dropDownButton && dropDownButton.$element();
    var isInputClicked = !!$target.closest(this.$element()).length;
    var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;
    var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;
    return isOutsideClick;
  },
  _clean() {
    delete this._openOnFieldClickAction;
    delete this._$templateWrapper;
    if (this._$popup) {
      this._$popup.remove();
      delete this._$popup;
      delete this._popup;
    }
    this.callBase();
  },
  _setPopupOption(optionName, value2) {
    this._setWidgetOption("_popup", arguments);
  },
  _validatedOpening() {
    if (!this.option("readOnly")) {
      this._toggleOpenState(true);
    }
  },
  _getPopupToolbarItems() {
    return "useButtons" === this.option("applyValueMode") ? this._popupToolbarItemsConfig() : [];
  },
  _getFirstPopupElement() {
    return renderer_default(this._popup.getFocusableElements()).first();
  },
  _getLastPopupElement() {
    return renderer_default(this._popup.getFocusableElements()).last();
  },
  _popupToolbarItemsConfig() {
    var buttonsConfig = [{
      shortcut: "done",
      options: {
        onClick: this._applyButtonHandler.bind(this),
        text: this.option("applyButtonText")
      }
    }, {
      shortcut: "cancel",
      options: {
        onClick: this._cancelButtonHandler.bind(this),
        text: this.option("cancelButtonText")
      }
    }];
    return this._applyButtonsLocation(buttonsConfig);
  },
  _applyButtonsLocation(buttonsConfig) {
    var buttonsLocation = this.option("buttonsLocation");
    var resultConfig = buttonsConfig;
    if ("default" !== buttonsLocation) {
      var position2 = splitPair(buttonsLocation);
      each(resultConfig, (_, element) => {
        extend(element, {
          toolbar: position2[0],
          location: position2[1]
        });
      });
    }
    return resultConfig;
  },
  _applyButtonHandler() {
    this.close();
    this.option("focusStateEnabled") && this.focus();
  },
  _cancelButtonHandler() {
    this.close();
    this.option("focusStateEnabled") && this.focus();
  },
  _popupOptionChanged(args) {
    var options2 = ui_widget_default.getOptionsFromContainer(args);
    this._setPopupOption(options2);
    var optionsKeys = Object.keys(options2);
    if (optionsKeys.includes("width") || optionsKeys.includes("height")) {
      this._dimensionChanged();
    }
  },
  _renderSubmitElement() {
    if (this.option("useHiddenSubmitElement")) {
      this._$submitElement = renderer_default("<input>").attr("type", "hidden").appendTo(this.$element());
    }
  },
  _setSubmitValue() {
    this._getSubmitElement().val(this.option("value"));
  },
  _getSubmitElement() {
    if (this.option("useHiddenSubmitElement")) {
      return this._$submitElement;
    }
    return this.callBase();
  },
  _dispose() {
    this._detachFocusOutEvents();
    this.callBase();
  },
  _optionChanged(args) {
    var _a;
    switch (args.name) {
      case "width":
      case "height":
        this.callBase(args);
        null === (_a = this._popup) || void 0 === _a ? void 0 : _a.repaint();
        break;
      case "opened":
        this._renderOpenedState();
        break;
      case "onOpened":
      case "onClosed":
        this._initVisibilityActions();
        break;
      case "onPopupInitialized":
        this._initPopupInitializedAction();
        break;
      case "fieldTemplate":
      case "acceptCustomValue":
      case "openOnFieldClick":
        this._invalidate();
        break;
      case "dropDownButtonTemplate":
      case "showDropDownButton":
        this._updateButtons(["dropDown"]);
        break;
      case "dropDownOptions":
        this._popupOptionChanged(args);
        this._options.cache("dropDownOptions", this.option("dropDownOptions"));
        break;
      case "popupPosition":
        break;
      case "deferRendering":
        if (hasWindow()) {
          this._createPopup();
        }
        break;
      case "applyValueMode":
      case "applyButtonText":
      case "cancelButtonText":
      case "buttonsLocation":
        this._setPopupOption("toolbarItems", this._getPopupToolbarItems());
        break;
      case "useHiddenSubmitElement":
        if (this._$submitElement) {
          this._$submitElement.remove();
          this._$submitElement = void 0;
        }
        this._renderSubmitElement();
        break;
      case "rtlEnabled":
        this._updatePopupPosition(args.value);
        this.callBase(args);
        break;
      default:
        this.callBase(args);
    }
  },
  open() {
    this.option("opened", true);
  },
  close() {
    this.option("opened", false);
  },
  field() {
    return getPublicElement(this._input());
  },
  content() {
    return this._popup ? this._popup.content() : null;
  }
});
component_registrator_default("dxDropDownEditor", DropDownEditor);
var m_drop_down_editor_default = DropDownEditor;

// node_modules/devextreme/esm/__internal/ui/drop_down_editor/m_drop_down_list.js
var window7 = getWindow();
var LIST_ITEM_SELECTOR2 = ".dx-list-item";
var LIST_ITEM_DATA_KEY2 = "dxListItemData";
var DROPDOWNLIST_POPUP_WRAPPER_CLASS = "dx-dropdownlist-popup-wrapper";
var SEARCH_EVENT = "input";
var SEARCH_MODES = ["startswith", "contains", "endwith", "notcontains"];
var useCompositionEvents = "android" !== devices_default.real().platform;
var DropDownList = m_drop_down_editor_default.inherit({
  _supportedKeys() {
    var parent = this.callBase();
    return extend({}, parent, {
      tab(e) {
        if (this._allowSelectItemByTab()) {
          this._saveValueChangeEvent(e);
          var $focusedItem = renderer_default(this._list.option("focusedElement"));
          $focusedItem.length && this._setSelectedElement($focusedItem);
        }
        parent.tab.apply(this, arguments);
      },
      space: noop,
      home: noop,
      end: noop
    });
  },
  _allowSelectItemByTab() {
    return this.option("opened") && "instantly" === this.option("applyValueMode");
  },
  _setSelectedElement($element) {
    var value2 = this._valueGetter(this._list._getItemData($element));
    this._setValue(value2);
  },
  _setValue(value2) {
    this.option("value", value2);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), extend(ui_data_expression_default._dataExpressionDefaultOptions(), {
      displayValue: void 0,
      searchEnabled: false,
      searchMode: "contains",
      searchTimeout: 500,
      minSearchLength: 0,
      searchExpr: null,
      valueChangeEvent: "input change keyup",
      selectedItem: null,
      noDataText: message_default.format("dxCollectionWidget-noDataText"),
      encodeNoDataText: false,
      onSelectionChanged: null,
      onItemClick: noop,
      showDataBeforeSearch: false,
      grouped: false,
      groupTemplate: "group",
      popupPosition: {
        my: "left top",
        at: "left bottom",
        offset: {
          h: 0,
          v: 0
        },
        collision: "flip"
      },
      wrapItemText: false,
      useItemTextAsTitle: false
    }));
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: {
        platform: "ios"
      },
      options: {
        popupPosition: {
          offset: {
            v: -1
          }
        }
      }
    }, {
      device: {
        platform: "generic"
      },
      options: {
        buttonsLocation: "bottom center"
      }
    }]);
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      value: true,
      selectedItem: true,
      displayValue: true
    });
  },
  _init() {
    this.callBase();
    this._initDataExpressions();
    this._initActions();
    this._setListDataSource();
    this._validateSearchMode();
    this._clearSelectedItem();
    this._initItems();
  },
  _setListFocusedElementOptionChange() {
    this._list._updateParentActiveDescendant = this._updateActiveDescendant.bind(this);
  },
  _initItems() {
    var {
      items
    } = this.option();
    if (items && !items.length && this._dataSource) {
      this.option().items = this._dataSource.items();
    }
  },
  _initActions() {
    this._initContentReadyAction();
    this._initSelectionChangedAction();
    this._initItemClickAction();
  },
  _initContentReadyAction() {
    this._contentReadyAction = this._createActionByOption("onContentReady", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _initSelectionChangedAction() {
    this._selectionChangedAction = this._createActionByOption("onSelectionChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
  },
  _initItemClickAction() {
    this._itemClickAction = this._createActionByOption("onItemClick");
  },
  _initTemplates() {
    this.callBase();
    this._templateManager.addDefaultTemplates({
      item: new ChildDefaultTemplate("item")
    });
  },
  _isEditable() {
    return this.callBase() || this.option("searchEnabled");
  },
  _saveFocusOnWidget() {
    if (this._list && this._list.initialOption("focusStateEnabled")) {
      this._focusInput();
    }
  },
  _fitIntoRange(value2, start, end) {
    if (value2 > end) {
      return start;
    }
    if (value2 < start) {
      return end;
    }
    return value2;
  },
  _items() {
    var items = this._getPlainItems(!this._list && this._dataSource.items());
    var availableItems = new query_default(items).filter("disabled", "<>", true).toArray();
    return availableItems;
  },
  _calcNextItem(step) {
    var items = this._items();
    var nextIndex = this._fitIntoRange(this._getSelectedIndex() + step, 0, items.length - 1);
    return items[nextIndex];
  },
  _getSelectedIndex() {
    var items = this._items();
    var selectedItem = this.option("selectedItem");
    var result2 = -1;
    each(items, (index, item) => {
      if (this._isValueEquals(item, selectedItem)) {
        result2 = index;
        return false;
      }
    });
    return result2;
  },
  _createPopup() {
    this.callBase();
    this._updateCustomBoundaryContainer();
    this._popup.$wrapper().addClass(this._popupWrapperClass());
    var $popupContent = this._popup.$content();
    events_engine_default.off($popupContent, "mouseup");
    events_engine_default.on($popupContent, "mouseup", this._saveFocusOnWidget.bind(this));
  },
  _updateCustomBoundaryContainer() {
    var customContainer = this.option("dropDownOptions.container");
    var $container = customContainer && renderer_default(customContainer);
    if ($container && $container.length && !isWindow($container.get(0))) {
      var $containerWithParents = [].slice.call($container.parents());
      $containerWithParents.unshift($container.get(0));
      each($containerWithParents, (i, parent) => {
        if (parent === renderer_default("body").get(0)) {
          return false;
        }
        if ("hidden" === window7.getComputedStyle(parent).overflowY) {
          this._$customBoundaryContainer = renderer_default(parent);
          return false;
        }
      });
    }
  },
  _popupWrapperClass: () => DROPDOWNLIST_POPUP_WRAPPER_CLASS,
  _renderInputValue() {
    var value2 = this._getCurrentValue();
    this._rejectValueLoading();
    return this._loadInputValue(value2, this._setSelectedItem.bind(this)).always(this.callBase.bind(this, value2));
  },
  _loadInputValue(value2, callback) {
    return this._loadItem(value2).always(callback);
  },
  _getItemFromPlain(value2, cache) {
    var plainItems;
    var selectedItem;
    if (cache && "object" !== typeof value2) {
      if (!cache.itemByValue) {
        cache.itemByValue = {};
        plainItems = this._getPlainItems();
        plainItems.forEach(function(item) {
          cache.itemByValue[this._valueGetter(item)] = item;
        }, this);
      }
      selectedItem = cache.itemByValue[value2];
    }
    if (!selectedItem) {
      plainItems = this._getPlainItems();
      selectedItem = grep(plainItems, (item) => this._isValueEquals(this._valueGetter(item), value2))[0];
    }
    return selectedItem;
  },
  _loadItem(value2, cache) {
    var selectedItem = this._getItemFromPlain(value2, cache);
    return void 0 !== selectedItem ? Deferred().resolve(selectedItem).promise() : this._loadValue(value2);
  },
  _getPlainItems(items) {
    var plainItems = [];
    items = items || this.option("items") || this._dataSource.items() || [];
    for (var i = 0; i < items.length; i++) {
      if (items[i] && items[i].items) {
        plainItems = plainItems.concat(items[i].items);
      } else {
        plainItems.push(items[i]);
      }
    }
    return plainItems;
  },
  _updateActiveDescendant($target) {
    var _a;
    var opened = this.option("opened");
    var listFocusedItemId = null === (_a = this._list) || void 0 === _a ? void 0 : _a.getFocusedItemId();
    var isElementOnDom = renderer_default("#".concat(listFocusedItemId)).length > 0;
    var activedescendant = opened && isElementOnDom && listFocusedItemId;
    this.setAria({
      activedescendant: activedescendant || null
    }, $target);
  },
  _setSelectedItem(item) {
    var displayValue = this._displayValue(item);
    this.option("selectedItem", ensureDefined(item, null));
    this.option("displayValue", displayValue);
  },
  _displayValue(item) {
    return this._displayGetter(item);
  },
  _refreshSelected() {
    var cache = {};
    this._listItemElements().each((_, itemElement) => {
      var $itemElement = renderer_default(itemElement);
      var itemValue = this._valueGetter($itemElement.data(LIST_ITEM_DATA_KEY2));
      var isItemSelected = this._isSelectedValue(itemValue, cache);
      if (isItemSelected) {
        this._list.selectItem($itemElement);
      } else {
        this._list.unselectItem($itemElement);
      }
    });
  },
  _popupShownHandler() {
    this.callBase();
    this._setFocusPolicy();
  },
  _setFocusPolicy() {
    if (!this.option("focusStateEnabled") || !this._list) {
      return;
    }
    this._list.option("focusedElement", null);
  },
  _isSelectedValue(value2) {
    return this._isValueEquals(value2, this.option("value"));
  },
  _validateSearchMode() {
    var searchMode = this.option("searchMode");
    var normalizedSearchMode = searchMode.toLowerCase();
    if (!SEARCH_MODES.includes(normalizedSearchMode)) {
      throw ui_errors_default.Error("E1019", searchMode);
    }
  },
  _clearSelectedItem() {
    this.option("selectedItem", null);
  },
  _processDataSourceChanging() {
    this._initDataController();
    this._setListOption("_dataController", this._dataController);
    this._setListDataSource();
    this._renderInputValue().fail(() => {
      if (this._isCustomValueAllowed()) {
        return;
      }
      this._clearSelectedItem();
    });
  },
  _isCustomValueAllowed() {
    return this.option("displayCustomValue");
  },
  clear() {
    this.callBase();
    this._clearFilter();
    this._clearSelectedItem();
  },
  _listItemElements() {
    return this._$list ? this._$list.find(LIST_ITEM_SELECTOR2) : renderer_default();
  },
  _popupConfig() {
    return extend(this.callBase(), {
      templatesRenderAsynchronously: false,
      autoResizeEnabled: false,
      maxHeight: this._getMaxHeight.bind(this)
    });
  },
  _renderPopupContent() {
    this.callBase();
    this._renderList();
  },
  _getKeyboardListeners() {
    var canListHaveFocus = this._canListHaveFocus();
    return this.callBase().concat([!canListHaveFocus && this._list]);
  },
  _renderList() {
    this._listId = "dx-".concat(new guid_default()._value);
    var $list = renderer_default("<div>").attr("id", this._listId).appendTo(this._popup.$content());
    this._$list = $list;
    this._list = this._createComponent($list, list_light_default, this._listConfig());
    this._refreshList();
    this._renderPreventBlurOnListClick();
    this._setListFocusedElementOptionChange();
  },
  _renderPreventBlurOnListClick() {
    var eventName = addNamespace("mousedown", "dxDropDownList");
    events_engine_default.off(this._$list, eventName);
    events_engine_default.on(this._$list, eventName, (e) => e.preventDefault());
  },
  _getControlsAria() {
    return this._list && this._listId;
  },
  _renderOpenedState() {
    this.callBase();
    this._list && this._updateActiveDescendant();
    this.setAria("owns", this._popup && this._popupContentId);
  },
  _getAriaHasPopup: () => "listbox",
  _refreshList() {
    if (this._list && this._shouldRefreshDataSource()) {
      this._setListDataSource();
    }
  },
  _shouldRefreshDataSource() {
    var dataSourceProvided = !!this._list.option("dataSource");
    return dataSourceProvided !== this._needPassDataSourceToList();
  },
  _isDesktopDevice: () => "desktop" === devices_default.real().deviceType,
  _listConfig() {
    var options2 = {
      selectionMode: "single",
      _templates: this.option("_templates"),
      templateProvider: this.option("templateProvider"),
      noDataText: this.option("noDataText"),
      encodeNoDataText: this.option("encodeNoDataText"),
      grouped: this.option("grouped"),
      wrapItemText: this.option("wrapItemText"),
      useItemTextAsTitle: this.option("useItemTextAsTitle"),
      onContentReady: this._listContentReadyHandler.bind(this),
      itemTemplate: this.option("itemTemplate"),
      indicateLoading: false,
      keyExpr: this._getCollectionKeyExpr(),
      displayExpr: this._displayGetterExpr(),
      groupTemplate: this.option("groupTemplate"),
      onItemClick: this._listItemClickAction.bind(this),
      dataSource: this._getDataSource(),
      _dataController: this._dataController,
      hoverStateEnabled: this._isDesktopDevice() ? this.option("hoverStateEnabled") : false,
      focusStateEnabled: this._isDesktopDevice() ? this.option("focusStateEnabled") : false
    };
    if (!this._canListHaveFocus()) {
      options2.tabIndex = null;
    }
    return options2;
  },
  _canListHaveFocus: () => false,
  _getDataSource() {
    return this._needPassDataSourceToList() ? this._dataSource : null;
  },
  _dataSourceOptions: () => ({
    paginate: false
  }),
  _getGroupedOption() {
    return this.option("grouped");
  },
  _dataSourceFromUrlLoadMode: () => "raw",
  _listContentReadyHandler() {
    this._list = this._list || this._$list.dxList("instance");
    if (!this.option("deferRendering")) {
      this._refreshSelected();
    }
    this._updatePopupWidth();
    this._updateListDimensions();
    this._contentReadyAction();
  },
  _setListOption(optionName, value2) {
    this._setWidgetOption("_list", arguments);
  },
  _listItemClickAction(e) {
    this._listItemClickHandler(e);
    this._itemClickAction(e);
  },
  _listItemClickHandler: noop,
  _setListDataSource() {
    if (!this._list) {
      return;
    }
    this._setListOption("dataSource", this._getDataSource());
    if (!this._needPassDataSourceToList()) {
      this._setListOption("items", []);
    }
  },
  _needPassDataSourceToList() {
    return this.option("showDataBeforeSearch") || this._isMinSearchLengthExceeded();
  },
  _isMinSearchLengthExceeded() {
    return this._searchValue().toString().length >= this.option("minSearchLength");
  },
  _needClearFilter() {
    return this._canKeepDataSource() ? false : this._needPassDataSourceToList();
  },
  _canKeepDataSource() {
    var isMinSearchLengthExceeded = this._isMinSearchLengthExceeded();
    return this._dataController.isLoaded() && this.option("showDataBeforeSearch") && this.option("minSearchLength") && !isMinSearchLengthExceeded && !this._isLastMinSearchLengthExceeded;
  },
  _searchValue() {
    return this._input().val() || "";
  },
  _getSearchEvent() {
    return addNamespace(SEARCH_EVENT, "".concat(this.NAME, "Search"));
  },
  _getCompositionStartEvent() {
    return addNamespace("compositionstart", "".concat(this.NAME, "CompositionStart"));
  },
  _getCompositionEndEvent() {
    return addNamespace("compositionend", "".concat(this.NAME, "CompositionEnd"));
  },
  _getSetFocusPolicyEvent() {
    return addNamespace("input", "".concat(this.NAME, "FocusPolicy"));
  },
  _renderEvents() {
    this.callBase();
    events_engine_default.on(this._input(), this._getSetFocusPolicyEvent(), () => {
      this._setFocusPolicy();
    });
    if (this._shouldRenderSearchEvent()) {
      events_engine_default.on(this._input(), this._getSearchEvent(), (e) => {
        this._searchHandler(e);
      });
      if (useCompositionEvents) {
        events_engine_default.on(this._input(), this._getCompositionStartEvent(), () => {
          this._isTextCompositionInProgress(true);
        });
        events_engine_default.on(this._input(), this._getCompositionEndEvent(), (e) => {
          this._isTextCompositionInProgress(void 0);
          this._searchHandler(e, this._searchValue());
        });
      }
    }
  },
  _shouldRenderSearchEvent() {
    return this.option("searchEnabled");
  },
  _refreshEvents() {
    events_engine_default.off(this._input(), this._getSearchEvent());
    events_engine_default.off(this._input(), this._getSetFocusPolicyEvent());
    if (useCompositionEvents) {
      events_engine_default.off(this._input(), this._getCompositionStartEvent());
      events_engine_default.off(this._input(), this._getCompositionEndEvent());
    }
    this.callBase();
  },
  _isTextCompositionInProgress(value2) {
    if (arguments.length) {
      this._isTextComposition = value2;
    } else {
      return this._isTextComposition;
    }
  },
  _searchHandler(e, searchValue) {
    if (this._isTextCompositionInProgress()) {
      return;
    }
    if (!this._isMinSearchLengthExceeded()) {
      this._searchCanceled();
      return;
    }
    var searchTimeout = this.option("searchTimeout");
    if (searchTimeout) {
      this._clearSearchTimer();
      this._searchTimer = setTimeout(() => {
        this._searchDataSource(searchValue);
      }, searchTimeout);
    } else {
      this._searchDataSource(searchValue);
    }
  },
  _searchCanceled() {
    this._clearSearchTimer();
    if (this._needClearFilter()) {
      this._filterDataSource(null);
    }
    this._refreshList();
  },
  _searchDataSource() {
    var searchValue = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._searchValue();
    this._filterDataSource(searchValue);
  },
  _filterDataSource(searchValue) {
    this._clearSearchTimer();
    var dataController2 = this._dataController;
    dataController2.searchExpr(this.option("searchExpr") || this._displayGetterExpr());
    dataController2.searchOperation(this.option("searchMode"));
    dataController2.searchValue(searchValue);
    dataController2.load().done(this._dataSourceFiltered.bind(this, searchValue));
  },
  _clearFilter() {
    var dataController2 = this._dataController;
    dataController2.searchValue() && dataController2.searchValue(null);
  },
  _dataSourceFiltered() {
    this._isLastMinSearchLengthExceeded = this._isMinSearchLengthExceeded();
    this._refreshList();
    this._refreshPopupVisibility();
  },
  _shouldOpenPopup() {
    return this._hasItemsToShow();
  },
  _refreshPopupVisibility() {
    if (this.option("readOnly") || !this._searchValue()) {
      return;
    }
    var shouldOpenPopup = this._shouldOpenPopup();
    if (shouldOpenPopup && !this._isFocused()) {
      return;
    }
    this.option("opened", shouldOpenPopup);
    if (shouldOpenPopup) {
      this._updatePopupWidth();
      this._updateListDimensions();
    }
  },
  _dataSourceChangedHandler(newItems) {
    if (0 === this._dataController.pageIndex()) {
      this.option().items = newItems;
    } else {
      this.option().items = this.option().items.concat(newItems);
    }
  },
  _hasItemsToShow() {
    var dataController2 = this._dataController;
    var resultItems = dataController2.items() || [];
    var resultAmount = resultItems.length;
    var isMinSearchLengthExceeded = this._needPassDataSourceToList();
    return !!(isMinSearchLengthExceeded && resultAmount);
  },
  _clearSearchTimer() {
    clearTimeout(this._searchTimer);
    delete this._searchTimer;
  },
  _popupShowingHandler() {
    this._updatePopupWidth();
    this._updateListDimensions();
  },
  _dimensionChanged() {
    this.callBase();
    this._updateListDimensions();
  },
  _needPopupRepaint() {
    var dataController2 = this._dataController;
    var currentPageIndex = dataController2.pageIndex();
    var needRepaint = isDefined(this._pageIndex) && currentPageIndex <= this._pageIndex || dataController2.isLastPage() && !this._list._scrollViewIsFull();
    this._pageIndex = currentPageIndex;
    return needRepaint;
  },
  _updateListDimensions() {
    if (!this._popup) {
      return;
    }
    if (this._needPopupRepaint()) {
      this._popup.repaint();
    }
    this._list && this._list.updateDimensions();
  },
  _getMaxHeight() {
    var $element = this.$element();
    var $customBoundaryContainer = this._$customBoundaryContainer;
    var offsetTop = $element.offset().top - ($customBoundaryContainer ? $customBoundaryContainer.offset().top : 0);
    var windowHeight = getOuterHeight(window7);
    var containerHeight = $customBoundaryContainer ? Math.min(getOuterHeight($customBoundaryContainer), windowHeight) : windowHeight;
    var maxHeight = Math.max(offsetTop, containerHeight - offsetTop - getOuterHeight($element));
    return Math.min(0.5 * containerHeight, maxHeight);
  },
  _clean() {
    if (this._list) {
      delete this._list;
    }
    delete this._isLastMinSearchLengthExceeded;
    this.callBase();
  },
  _dispose() {
    this._clearSearchTimer();
    this.callBase();
  },
  _setCollectionWidgetOption() {
    this._setListOption.apply(this, arguments);
  },
  _setSubmitValue() {
    var value2 = this.option("value");
    var submitValue = this._shouldUseDisplayValue(value2) ? this._displayGetter(value2) : value2;
    this._getSubmitElement().val(submitValue);
  },
  _shouldUseDisplayValue(value2) {
    return "this" === this.option("valueExpr") && isObject(value2);
  },
  _optionChanged(args) {
    this._dataExpressionOptionChanged(args);
    switch (args.name) {
      case "hoverStateEnabled":
      case "focusStateEnabled":
        this._isDesktopDevice() && this._setListOption(args.name, args.value);
        this.callBase(args);
        break;
      case "items":
        if (!this.option("dataSource")) {
          this._processDataSourceChanging();
        }
        break;
      case "dataSource":
        this._processDataSourceChanging();
        break;
      case "valueExpr":
        this._renderValue();
        this._setListOption("keyExpr", this._getCollectionKeyExpr());
        break;
      case "displayExpr":
        this._renderValue();
        this._setListOption("displayExpr", this._displayGetterExpr());
        break;
      case "searchMode":
        this._validateSearchMode();
        break;
      case "minSearchLength":
        this._refreshList();
        break;
      case "searchEnabled":
      case "showDataBeforeSearch":
      case "searchExpr":
        this._invalidate();
        break;
      case "onContentReady":
        this._initContentReadyAction();
        break;
      case "onSelectionChanged":
        this._initSelectionChangedAction();
        break;
      case "onItemClick":
        this._initItemClickAction();
        break;
      case "grouped":
      case "groupTemplate":
      case "wrapItemText":
      case "noDataText":
      case "encodeNoDataText":
      case "useItemTextAsTitle":
        this._setListOption(args.name);
        break;
      case "displayValue":
        this.option("text", args.value);
        break;
      case "itemTemplate":
      case "searchTimeout":
        break;
      case "selectedItem":
        if (args.previousValue !== args.value) {
          this._selectionChangedAction({
            selectedItem: args.value
          });
        }
        break;
      default:
        this.callBase(args);
    }
  }
}).include(ui_data_expression_default, m_grouped_data_converter_mixin_default);
component_registrator_default("dxDropDownList", DropDownList);
var m_drop_down_list_default = DropDownList;

// node_modules/devextreme/esm/ui/drop_down_editor/ui.drop_down_list.js
var ui_drop_down_list_default = m_drop_down_list_default;

// node_modules/devextreme/esm/__internal/ui/m_select_box.js
var DISABLED_STATE_SELECTOR = ".dx-state-disabled";
var SELECTBOX_CLASS = "dx-selectbox";
var SELECTBOX_POPUP_CLASS = "dx-selectbox-popup";
var SELECTBOX_CONTAINER_CLASS = "dx-selectbox-container";
var SELECTBOX_POPUP_WRAPPER_CLASS = "dx-selectbox-popup-wrapper";
var SelectBox = ui_drop_down_list_default.inherit({
  _supportedKeys() {
    var that = this;
    var parent = this.callBase();
    var clearSelectBox = function(e) {
      var isEditable2 = this._isEditable();
      if (!isEditable2) {
        if (this.option("showClearButton")) {
          e.preventDefault();
          this.clear();
        }
      } else if (this._valueSubstituted()) {
        this._preventFiltering = true;
      }
      this._savedTextRemoveEvent = e;
      this._preventSubstitution = true;
    };
    var searchIfNeeded = function() {
      if (that.option("searchEnabled") && that._valueSubstituted()) {
        that._searchHandler();
      }
    };
    return extend({}, parent, {
      tab() {
        var {
          opened
        } = this.option();
        var popupHasFocusableElements = opened && !!this._popup.getFocusableElements().length;
        if (!popupHasFocusableElements) {
          this._resetCaretPosition(true);
        }
        parent.tab && parent.tab.apply(this, arguments);
        if (!popupHasFocusableElements) {
          this._cancelSearchIfNeed();
        }
      },
      upArrow(e) {
        if (parent.upArrow.apply(this, arguments)) {
          if (!this.option("opened")) {
            this._setNextValue(e);
          }
          return true;
        }
        return;
      },
      downArrow(e) {
        if (parent.downArrow.apply(this, arguments)) {
          if (!this.option("opened")) {
            this._setNextValue(e);
          }
          return true;
        }
        return;
      },
      leftArrow() {
        var _a;
        searchIfNeeded();
        null === (_a = parent.leftArrow) || void 0 === _a ? void 0 : _a.apply(this, arguments);
      },
      rightArrow() {
        searchIfNeeded();
        parent.rightArrow && parent.rightArrow.apply(this, arguments);
      },
      home() {
        searchIfNeeded();
        parent.home && parent.home.apply(this, arguments);
      },
      end() {
        searchIfNeeded();
        parent.end && parent.end.apply(this, arguments);
      },
      escape() {
        var result2 = parent.escape && parent.escape.apply(this, arguments);
        this._cancelEditing();
        return null !== result2 && void 0 !== result2 ? result2 : true;
      },
      enter(e) {
        var isOpened = this.option("opened");
        var inputText = this._input().val().trim();
        var isCustomText = inputText && this._list && !this._list.option("focusedElement");
        if (!inputText && isDefined(this.option("value")) && this.option("allowClearing")) {
          this._saveValueChangeEvent(e);
          this.option({
            selectedItem: null,
            value: null
          });
          this.close();
        } else {
          if (this.option("acceptCustomValue")) {
            e.preventDefault();
            if (isCustomText) {
              if (isOpened) {
                this._toggleOpenState();
              }
              this._valueChangeEventHandler(e);
            }
            return isOpened;
          }
          if (parent.enter && parent.enter.apply(this, arguments)) {
            return isOpened;
          }
        }
      },
      space(e) {
        var isOpened = this.option("opened");
        var isSearchEnabled = this.option("searchEnabled");
        var acceptCustomValue = this.option("acceptCustomValue");
        if (!isOpened || isSearchEnabled || acceptCustomValue) {
          return;
        }
        e.preventDefault();
        this._valueChangeEventHandler(e);
        return true;
      },
      backspace: clearSelectBox,
      del: clearSelectBox
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      placeholder: message_default.format("Select"),
      fieldTemplate: null,
      customItemCreateEvent: "change",
      valueChangeEvent: "change",
      acceptCustomValue: false,
      onCustomItemCreating(e) {
        if (!isDefined(e.customItem)) {
          e.customItem = e.text;
        }
      },
      showSelectionControls: false,
      allowClearing: true,
      tooltipEnabled: false,
      openOnFieldClick: true,
      showDropDownButton: true,
      displayCustomValue: false,
      useHiddenSubmitElement: true
    });
  },
  _init() {
    this.callBase();
    this._initCustomItemCreatingAction();
  },
  _initMarkup() {
    this.$element().addClass(SELECTBOX_CLASS);
    this._renderTooltip();
    this.callBase();
    this._$container.addClass(SELECTBOX_CONTAINER_CLASS);
  },
  _createPopup() {
    this.callBase();
    this._popup.$element().addClass(SELECTBOX_POPUP_CLASS);
    this._popup.$overlayContent().attr("tabindex", -1);
  },
  _popupWrapperClass() {
    return "".concat(this.callBase(), " ").concat(SELECTBOX_POPUP_WRAPPER_CLASS);
  },
  _setDeprecatedOptions() {
    this.callBase();
    extend(this._deprecatedOptions, {
      valueChangeEvent: {
        since: "22.2",
        alias: "customItemCreateEvent"
      }
    });
  },
  _cancelEditing() {
    if (!this.option("searchEnabled") && this._list) {
      this._focusListElement(null);
      this._updateField(this.option("selectedItem"));
    }
  },
  _renderOpenedState() {
    this.callBase();
    if (this.option("opened")) {
      this._scrollToSelectedItem();
      this._focusSelectedElement();
    }
  },
  _focusSelectedElement() {
    var _a;
    var searchValue = this._searchValue();
    if (!searchValue) {
      this._focusListElement(null);
      return;
    }
    var {
      items,
      selectedItem
    } = this.option();
    var $listItems = this._list._itemElements();
    var index = null !== (_a = null === items || void 0 === items ? void 0 : items.indexOf(selectedItem)) && void 0 !== _a ? _a : -1;
    var focusedElement = -1 !== index && !this._isCustomItemSelected() ? $listItems.eq(index) : null;
    this._focusListElement(focusedElement);
  },
  _renderFocusedElement() {
    if (!this._list) {
      return;
    }
    var searchValue = this._searchValue();
    if (!searchValue || this.option("acceptCustomValue")) {
      this._focusListElement(null);
      return;
    }
    var $listItems = this._list._itemElements();
    var focusedElement = $listItems.not(DISABLED_STATE_SELECTOR).eq(0);
    this._focusListElement(focusedElement);
  },
  _focusListElement(element) {
    this._preventInputValueRender = true;
    this._list.option("focusedElement", getPublicElement(element));
    delete this._preventInputValueRender;
  },
  _scrollToSelectedItem() {
    this._list && this._list.scrollToItem(this._list.option("selectedItem"));
  },
  _listContentReadyHandler() {
    this.callBase();
    var isPaginate = this._dataController.paginate();
    if (isPaginate && this._needPopupRepaint()) {
      return;
    }
    this._scrollToSelectedItem();
  },
  _renderValue() {
    this._renderInputValue();
    this._setSubmitValue();
    return Deferred().resolve();
  },
  _renderInputValue() {
    return this.callBase().always(() => {
      this._renderInputValueAsync();
    });
  },
  _renderInputValueAsync() {
    this._renderTooltip();
    this._renderInputValueImpl().always(() => {
      this._refreshSelected();
    });
  },
  _renderInputValueImpl() {
    this._renderField();
    return Deferred().resolve();
  },
  _setNextItem(step) {
    var item = this._calcNextItem(step);
    var value2 = this._valueGetter(item);
    this._setValue(value2);
  },
  _setNextValue(e) {
    var dataSourceIsLoaded = this._dataController.isLoaded() ? Deferred().resolve() : this._dataController.load();
    dataSourceIsLoaded.done(() => {
      var selectedIndex = this._getSelectedIndex();
      var hasPages = this._dataController.pageSize();
      var isLastPage = this._dataController.isLastPage();
      var isLastItem = selectedIndex === this._items().length - 1;
      this._saveValueChangeEvent(e);
      var step = "downArrow" === normalizeKeyName(e) ? 1 : -1;
      if (hasPages && !isLastPage && isLastItem && step > 0) {
        if (!this._popup) {
          this._createPopup();
        }
        if (!this._dataController.isLoading()) {
          this._list._loadNextPage().done(this._setNextItem.bind(this, step));
        }
      } else {
        this._setNextItem(step);
      }
    });
  },
  _setSelectedItem(item) {
    var isUnknownItem = !this._isCustomValueAllowed() && void 0 === item;
    this.callBase(isUnknownItem ? null : item);
    if (!isUnknownItem && (!this._isEditable() || this._isCustomItemSelected())) {
      this._setListOption("selectedItem", this.option("selectedItem"));
    }
  },
  _isCustomValueAllowed() {
    return this.option("acceptCustomValue") || this.callBase();
  },
  _displayValue(item) {
    item = !isDefined(item) && this._isCustomValueAllowed() ? this.option("value") : item;
    return this.callBase(item);
  },
  _listConfig() {
    var result2 = extend(this.callBase(), {
      pageLoadMode: "scrollBottom",
      onSelectionChanged: this._getSelectionChangeHandler(),
      selectedItem: this.option("selectedItem"),
      onFocusedItemChanged: this._listFocusedItemChangeHandler.bind(this)
    });
    if (this.option("showSelectionControls")) {
      extend(result2, {
        showSelectionControls: true,
        selectByClick: true
      });
    }
    return result2;
  },
  _listFocusedItemChangeHandler(e) {
    if (this._preventInputValueRender) {
      return;
    }
    var list = e.component;
    var focusedElement = renderer_default(list.option("focusedElement"));
    var focusedItem = list._getItemData(focusedElement);
    this._updateField(focusedItem);
  },
  _updateField(item) {
    var fieldTemplate = this._getTemplateByOption("fieldTemplate");
    if (!(fieldTemplate && this.option("fieldTemplate"))) {
      var text = this._displayGetter(item);
      this.option("text", text);
      this._renderDisplayText(text);
      return;
    }
    this._renderField();
  },
  _getSelectionChangeHandler() {
    return this.option("showSelectionControls") ? this._selectionChangeHandler.bind(this) : noop;
  },
  _selectionChangeHandler(e) {
    each(e.addedItems || [], (_, addedItem) => {
      this._setValue(this._valueGetter(addedItem));
    });
  },
  _getActualSearchValue() {
    return this._dataController.searchValue();
  },
  _toggleOpenState(isVisible) {
    if (this.option("disabled")) {
      return;
    }
    isVisible = arguments.length ? isVisible : !this.option("opened");
    if (!isVisible && !this._shouldClearFilter()) {
      this._restoreInputText(true);
    }
    if (this._wasSearch() && isVisible) {
      this._wasSearch(false);
      var showDataImmediately = this.option("showDataBeforeSearch") || this._isMinSearchLengthExceeded();
      if (showDataImmediately && this._dataController.getDataSource()) {
        if (this._searchTimer) {
          return;
        }
        var searchValue = this._getActualSearchValue();
        searchValue && this._wasSearch(true);
        this._filterDataSource(searchValue || null);
      } else {
        this._setListOption("items", []);
      }
    }
    if (isVisible) {
      this._scrollToSelectedItem();
    }
    this.callBase(isVisible);
  },
  _renderTooltip() {
    if (this.option("tooltipEnabled")) {
      this.$element().attr("title", this.option("displayValue"));
    }
  },
  _renderDimensions() {
    this.callBase();
    this._updatePopupWidth();
    this._updateListDimensions();
  },
  _isValueEqualInputText() {
    var initialSelectedItem = this.option("selectedItem");
    if (null === initialSelectedItem) {
      return false;
    }
    var value2 = this._displayGetter(initialSelectedItem);
    var displayValue = value2 ? String(value2) : "";
    var inputText = this._searchValue();
    return displayValue === inputText;
  },
  _popupHidingHandler() {
    if (this._isValueEqualInputText()) {
      this._cancelEditing();
    }
    this.callBase();
  },
  _popupHiddenHandler() {
    this.callBase();
    if (this._shouldCancelSearch()) {
      this._wasSearch(false);
      this._searchCanceled();
      this._shouldCancelSearch(false);
    }
  },
  _restoreInputText(saveEditingValue) {
    if (this.option("readOnly")) {
      return;
    }
    this._loadItemDeferred && this._loadItemDeferred.always(() => {
      var {
        acceptCustomValue,
        text,
        selectedItem: initialSelectedItem
      } = this.option();
      if (acceptCustomValue) {
        if (!saveEditingValue && !this._isValueChanging) {
          this._updateField(null !== initialSelectedItem && void 0 !== initialSelectedItem ? initialSelectedItem : this._createCustomItem(text));
          this._clearFilter();
        }
        return;
      }
      if (this.option("searchEnabled")) {
        if (!this._searchValue() && this.option("allowClearing")) {
          this._clearTextValue();
          return;
        }
      }
      if (this._isValueEqualInputText()) {
        return;
      }
      this._renderInputValue().always((selectedItem) => {
        var newSelectedItem = ensureDefined(selectedItem, initialSelectedItem);
        this._setSelectedItem(newSelectedItem);
        this._updateField(newSelectedItem);
        this._clearFilter();
      });
    });
  },
  _valueChangeEventIncludesBlur() {
    var valueChangeEvent = this.option(this._getValueChangeEventOptionName());
    return valueChangeEvent.includes("blur");
  },
  _isPreventedFocusOutEvent(e) {
    return this._preventNestedFocusEvent(e) || this._valueChangeEventIncludesBlur();
  },
  _focusOutHandler(e) {
    if (!this._isPreventedFocusOutEvent(e)) {
      var isOverlayTarget = this._isOverlayNestedTarget(e.relatedTarget);
      if (!isOverlayTarget) {
        this._restoreInputText();
        this._clearSearchTimer();
      }
      this._cancelSearchIfNeed(e);
    }
    e.target = this._input().get(0);
    this.callBase(e);
  },
  _cancelSearchIfNeed(e) {
    var _a;
    var {
      searchEnabled
    } = this.option();
    var isOverlayTarget = this._isOverlayNestedTarget(null === e || void 0 === e ? void 0 : e.relatedTarget);
    var shouldCancelSearch = this._wasSearch() && searchEnabled && !isOverlayTarget;
    if (shouldCancelSearch) {
      var isPopupVisible = null === (_a = this._popup) || void 0 === _a ? void 0 : _a._hideAnimationProcessing;
      this._clearSearchTimer();
      if (isPopupVisible) {
        this._shouldCancelSearch(true);
      } else {
        this._wasSearch(false);
        this._searchCanceled();
      }
    }
  },
  _shouldCancelSearch(value2) {
    if (!arguments.length) {
      return this._shouldCancelSearchValue;
    }
    this._shouldCancelSearchValue = value2;
  },
  _isOverlayNestedTarget: (target) => !!renderer_default(target).closest(".".concat(SELECTBOX_POPUP_WRAPPER_CLASS)).length,
  _clearTextValue() {
    var selectedItem = this.option("selectedItem");
    var selectedItemText = this._displayGetter(selectedItem);
    var shouldRestoreValue = selectedItem && "" !== selectedItemText;
    if (shouldRestoreValue) {
      if (this._savedTextRemoveEvent) {
        this._saveValueChangeEvent(this._savedTextRemoveEvent);
      }
      this.option("value", null);
    }
    delete this._savedTextRemoveEvent;
  },
  _shouldOpenPopup() {
    return this._needPassDataSourceToList() && this._wasSearch();
  },
  _isFocused() {
    var activeElement = dom_adapter_default.getActiveElement(this.element());
    return this.callBase() && renderer_default(activeElement).closest(this._input()).length > 0;
  },
  _getValueChangeEventOptionName: () => "customItemCreateEvent",
  _renderValueChangeEvent() {
    if (this._isEditable()) {
      this.callBase();
    }
  },
  _fieldRenderData() {
    var $listFocused = this._list && this.option("opened") && renderer_default(this._list.option("focusedElement"));
    if ($listFocused && $listFocused.length) {
      return this._list._getItemData($listFocused);
    }
    return this.option("selectedItem");
  },
  _isSelectedValue(value2) {
    return this._isValueEquals(value2, this.option("value"));
  },
  _shouldCloseOnItemClick() {
    return !(this.option("showSelectionControls") && "single" !== this.option("selectionMode"));
  },
  _listItemClickHandler(e) {
    var previousValue = this._getCurrentValue();
    this._focusListElement(renderer_default(e.itemElement));
    this._saveValueChangeEvent(e.event);
    this._completeSelection(this._valueGetter(e.itemData));
    if (this._shouldCloseOnItemClick()) {
      this.option("opened", false);
    }
    if (this.option("searchEnabled") && previousValue === this._valueGetter(e.itemData)) {
      this._updateField(e.itemData);
    }
    if (this._shouldClearFilter()) {
      this._cancelSearchIfNeed();
    }
  },
  _shouldClearFilter() {
    return this._wasSearch();
  },
  _completeSelection(value2) {
    this._setValue(value2);
  },
  _loadItem(value2, cache) {
    var that = this;
    var deferred = Deferred();
    this.callBase(value2, cache).done((item) => {
      deferred.resolve(item);
    }).fail((args) => {
      if (null === args || void 0 === args ? void 0 : args.shouldSkipCallback) {
        return;
      }
      var selectedItem = that.option("selectedItem");
      if (that.option("acceptCustomValue") && value2 === that._valueGetter(selectedItem)) {
        deferred.resolve(selectedItem);
      } else {
        deferred.reject();
      }
    });
    return deferred.promise();
  },
  _loadInputValue(value2, callback) {
    this._loadItemDeferred = this._loadItem(value2).always(callback);
    return this._loadItemDeferred;
  },
  _isCustomItemSelected() {
    var selectedItem = this.option("selectedItem");
    var searchValue = this._searchValue();
    var selectedItemText = this._displayGetter(selectedItem);
    return !selectedItemText || searchValue !== selectedItemText.toString();
  },
  _valueChangeEventHandler(e) {
    if (this.option("acceptCustomValue") && this._isCustomItemSelected() && !this._isValueChanging) {
      this._isValueChanging = true;
      this._customItemAddedHandler(e);
    }
  },
  _initCustomItemCreatingAction() {
    this._customItemCreatingAction = this._createActionByOption("onCustomItemCreating");
  },
  _createCustomItem(text) {
    var params = {
      text
    };
    var actionResult = this._customItemCreatingAction(params);
    var item = ensureDefined(actionResult, params.customItem);
    if (isDefined(actionResult)) {
      errors_default.log("W0015", "onCustomItemCreating", "customItem");
    }
    return item;
  },
  _customItemAddedHandler(e) {
    var searchValue = this._searchValue();
    var item = this._createCustomItem(searchValue);
    this._saveValueChangeEvent(e);
    if (void 0 === item) {
      this._renderValue();
      throw errors_default.Error("E0121");
    }
    if (isPromise(item)) {
      fromPromise(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this, null));
    } else {
      this._setCustomItem(item);
    }
  },
  _setCustomItem(item) {
    if (this._disposed) {
      return;
    }
    item = item || null;
    this.option("selectedItem", item);
    this._cancelSearchIfNeed();
    this._setValue(this._valueGetter(item));
    this._renderDisplayText(this._displayGetter(item));
    this._isValueChanging = false;
  },
  _clearValueHandler(e) {
    this._preventFiltering = true;
    this.callBase(e);
    this._searchCanceled();
    return false;
  },
  _wasSearch(value2) {
    if (!arguments.length) {
      return !!this._wasSearchValue;
    }
    this._wasSearchValue = value2;
    return;
  },
  _searchHandler() {
    if (this._preventFiltering) {
      delete this._preventFiltering;
      return;
    }
    if (this._needPassDataSourceToList()) {
      this._wasSearch(true);
    }
    this.callBase(arguments);
  },
  _dataSourceFiltered(searchValue) {
    this.callBase();
    if (null !== searchValue) {
      this._renderInputSubstitution();
      this._renderFocusedElement();
    }
  },
  _valueSubstituted() {
    var input = this._input().get(0);
    var currentSearchLength = this._searchValue().length;
    var isAllSelected = 0 === input.selectionStart && input.selectionEnd === currentSearchLength;
    var inputHasSelection = input.selectionStart !== input.selectionEnd;
    var isLastSymbolSelected = currentSearchLength === input.selectionEnd;
    return this._wasSearch() && inputHasSelection && !isAllSelected && isLastSymbolSelected && this._shouldSubstitutionBeRendered();
  },
  _shouldSubstitutionBeRendered() {
    return !this._preventSubstitution && this.option("searchEnabled") && !this.option("acceptCustomValue") && "startswith" === this.option("searchMode");
  },
  _renderInputSubstitution() {
    if (!this._shouldSubstitutionBeRendered()) {
      delete this._preventSubstitution;
      return;
    }
    var item = this._list && this._getPlainItems(this._list.option("items"))[0];
    if (!item) {
      return;
    }
    var $input = this._input();
    var valueLength = $input.val().length;
    if (0 === valueLength) {
      return;
    }
    var inputElement = $input.get(0);
    var displayValue = this._displayGetter(item).toString();
    inputElement.value = displayValue;
    this._caret({
      start: valueLength,
      end: displayValue.length
    });
  },
  _dispose() {
    this._renderInputValueAsync = noop;
    delete this._loadItemDeferred;
    this.callBase();
  },
  _optionChanged(args) {
    switch (args.name) {
      case "customItemCreateEvent":
        this._refreshValueChangeEvent();
        this._refreshFocusEvent();
        this._refreshEvents();
        break;
      case "onCustomItemCreating":
        this._initCustomItemCreatingAction();
        break;
      case "tooltipEnabled":
        this._renderTooltip();
        break;
      case "displayCustomValue":
      case "acceptCustomValue":
      case "showSelectionControls":
        this._invalidate();
        break;
      case "allowClearing":
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxSelectBox", SelectBox);
var m_select_box_default = SelectBox;

// node_modules/devextreme/esm/ui/select_box.js
var select_box_default = m_select_box_default;

// node_modules/devextreme/esm/events/gesture/swipeable.js
var DX_SWIPEABLE = "dxSwipeable";
var SWIPEABLE_CLASS = "dx-swipeable";
var ACTION_TO_EVENT_MAP = {
  onStart: SWIPE_START_EVENT,
  onUpdated: SWIPE_EVENT,
  onEnd: SWIPE_END_EVENT,
  onCancel: "dxswipecancel"
};
var IMMEDIATE_TIMEOUT = 180;
var Swipeable = dom_component_default.inherit({
  _getDefaultOptions: function() {
    return extend(this.callBase(), {
      elastic: true,
      immediate: false,
      immediateTimeout: IMMEDIATE_TIMEOUT,
      direction: "horizontal",
      itemSizeFunc: null,
      onStart: null,
      onUpdated: null,
      onEnd: null,
      onCancel: null
    });
  },
  _render: function() {
    this.callBase();
    this.$element().addClass(SWIPEABLE_CLASS);
    this._attachEventHandlers();
  },
  _attachEventHandlers: function() {
    this._detachEventHandlers();
    if (this.option("disabled")) {
      return;
    }
    var NAME = this.NAME;
    this._createEventData();
    each(ACTION_TO_EVENT_MAP, (function(actionName, eventName) {
      var action = this._createActionByOption(actionName, {
        context: this
      });
      eventName = addNamespace(eventName, NAME);
      events_engine_default.on(this.$element(), eventName, this._eventData, function(e) {
        return action({
          event: e
        });
      });
    }).bind(this));
  },
  _createEventData: function() {
    this._eventData = {
      elastic: this.option("elastic"),
      itemSizeFunc: this.option("itemSizeFunc"),
      direction: this.option("direction"),
      immediate: this.option("immediate"),
      immediateTimeout: this.option("immediateTimeout")
    };
  },
  _detachEventHandlers: function() {
    events_engine_default.off(this.$element(), "." + DX_SWIPEABLE);
  },
  _optionChanged: function(args) {
    switch (args.name) {
      case "disabled":
      case "onStart":
      case "onUpdated":
      case "onEnd":
      case "onCancel":
      case "elastic":
      case "immediate":
      case "itemSizeFunc":
      case "direction":
        this._detachEventHandlers();
        this._attachEventHandlers();
        break;
      case "rtlEnabled":
        break;
      default:
        this.callBase(args);
    }
  },
  _useTemplates: function() {
    return false;
  }
});
getName(Swipeable, DX_SWIPEABLE);
var swipeable_default = Swipeable;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.selection.strategy.js
var CalendarSelectionStrategy = class {
  constructor(component) {
    this.calendar = component;
  }
  dateOption(optionName) {
    return this.calendar._dateOption(optionName);
  }
  dateValue(value2, e) {
    this.calendar._dateValue(value2, e);
  }
  skipNavigate() {
    this.calendar._skipNavigate = true;
  }
  updateAriaSelected(value2, previousValue) {
    this.calendar._updateAriaSelected(value2, previousValue);
    if (value2[0] && this.calendar.option("currentDate").getTime() === value2[0].getTime()) {
      this.calendar._updateAriaId(value2[0]);
    }
  }
  processValueChanged(value2, previousValue) {
    if (isDefined(value2) && !Array.isArray(value2)) {
      value2 = [value2];
    }
    if (isDefined(previousValue) && !Array.isArray(previousValue)) {
      previousValue = [previousValue];
    }
    value2 = (null === value2 || void 0 === value2 ? void 0 : value2.map((item) => this._convertToDate(item))) || [];
    previousValue = (null === previousValue || void 0 === previousValue ? void 0 : previousValue.map((item) => this._convertToDate(item))) || [];
    this._updateViewsValue(value2);
    this.updateAriaSelected(value2, previousValue);
    if (!this._currentDateChanged) {
      this.calendar._initCurrentDate();
    }
    this._currentDateChanged = false;
  }
  _isDateDisabled(date) {
    var min = this.calendar._dateOption("min");
    var max = this.calendar._dateOption("max");
    var isLessThanMin = isDefined(min) && date < min && !date_default2.sameDate(min, date);
    var isBiggerThanMax = isDefined(max) && date > max && !date_default2.sameDate(max, date);
    return this.calendar._view.isDateDisabled(date) || isLessThanMin || isBiggerThanMax;
  }
  _getLowestDateInArray(dates) {
    if (dates.length) {
      return new Date(Math.min(...dates));
    }
  }
  _convertToDate(value2) {
    return this.calendar._convertToDate(value2);
  }
  _isMaxZoomLevel() {
    return this.calendar._isMaxZoomLevel();
  }
  _updateViewsOption(optionName, optionValue) {
    this.calendar._updateViewsOption(optionName, optionValue);
  }
  _updateViewsValue(value2) {
    this._updateViewsOption("value", value2);
  }
  _updateCurrentDate(value2) {
    this.calendar.option("currentDate", null !== value2 && void 0 !== value2 ? value2 : /* @__PURE__ */ new Date());
  }
  _shouldHandleWeekNumberClick() {
    var {
      selectionMode,
      selectWeekOnClick
    } = this.calendar.option();
    return selectWeekOnClick && "single" !== selectionMode;
  }
};
var m_calendar_selection_strategy_default = CalendarSelectionStrategy;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.multiple.selection.strategy.js
var CalendarMultiSelectionStrategy = class extends m_calendar_selection_strategy_default {
  constructor(component) {
    super(component);
    this.NAME = "MultiSelection";
  }
  getViewOptions() {
    return {
      value: this.dateOption("value"),
      range: [],
      selectionMode: "multiple",
      onWeekNumberClick: this._shouldHandleWeekNumberClick() ? this._weekNumberClickHandler.bind(this) : null
    };
  }
  selectValue(selectedValue, e) {
    var value2 = [...this.dateOption("value")];
    var alreadySelectedIndex = value2.findIndex((date) => (null === date || void 0 === date ? void 0 : date.toDateString()) === selectedValue.toDateString());
    if (alreadySelectedIndex > -1) {
      value2.splice(alreadySelectedIndex, 1);
    } else {
      value2.push(selectedValue);
    }
    this.skipNavigate();
    this._updateCurrentDate(selectedValue);
    this._currentDateChanged = true;
    this.dateValue(value2, e);
  }
  updateAriaSelected(value2, previousValue) {
    null !== value2 && void 0 !== value2 ? value2 : value2 = this.dateOption("value");
    null !== previousValue && void 0 !== previousValue ? previousValue : previousValue = [];
    super.updateAriaSelected(value2, previousValue);
  }
  getDefaultCurrentDate() {
    var dates = this.dateOption("value").filter((value2) => value2);
    return this._getLowestDateInArray(dates);
  }
  restoreValue() {
    this.calendar.option("value", []);
  }
  _weekNumberClickHandler(_ref) {
    var {
      rowDates,
      event
    } = _ref;
    var selectedDates = rowDates.filter((date) => !this._isDateDisabled(date));
    this.dateValue(selectedDates, event);
  }
};
var m_calendar_multiple_selection_strategy_default = CalendarMultiSelectionStrategy;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.navigator.js
var CALENDAR_NAVIGATOR_CLASS = "dx-calendar-navigator";
var CALENDAR_NAVIGATOR_PREVIOUS_MONTH_CLASS = "dx-calendar-navigator-previous-month";
var CALENDAR_NAVIGATOR_NEXT_MONTH_CLASS = "dx-calendar-navigator-next-month";
var CALENDAR_NAVIGATOR_PREVIOUS_VIEW_CLASS = "dx-calendar-navigator-previous-view";
var CALENDAR_NAVIGATOR_NEXT_VIEW_CLASS = "dx-calendar-navigator-next-view";
var CALENDAR_NAVIGATOR_DISABLED_LINK_CLASS = "dx-calendar-disabled-navigator-link";
var CALENDAR_NAVIGATOR_CAPTION_BUTTON_CLASS = "dx-calendar-caption-button";
var BUTTON_TEXT_CLASS = "dx-button-text";
var Navigator = class extends widget_default {
  _getDefaultOptions() {
    return _extends(_extends({}, super._getDefaultOptions()), {
      onClick: void 0,
      onCaptionClick: void 0,
      type: "normal",
      stylingMode: "outlined",
      text: ""
    });
  }
  _defaultOptionsRules() {
    return super._defaultOptionsRules().concat([{
      device: () => isMaterial(),
      options: {
        type: "default",
        stylingMode: "text"
      }
    }, {
      device: () => isFluent(),
      options: {
        type: "normal",
        stylingMode: "text"
      }
    }]);
  }
  _init() {
    super._init();
    this._initActions();
  }
  _initActions() {
    this._clickAction = this._createActionByOption("onClick");
    this._captionClickAction = this._createActionByOption("onCaptionClick");
  }
  _initMarkup() {
    super._initMarkup();
    renderer_default(this.element()).addClass(CALENDAR_NAVIGATOR_CLASS);
    this._renderButtons();
    this._renderCaption();
  }
  _renderButtons() {
    var {
      rtlEnabled,
      type: type2,
      stylingMode,
      focusStateEnabled
    } = this.option();
    this._prevButton = this._createComponent(renderer_default("<div>"), button_default, {
      focusStateEnabled,
      icon: rtlEnabled ? "chevronright" : "chevronleft",
      onClick: (e) => {
        this._clickAction({
          direction: -1,
          event: e
        });
      },
      type: type2,
      stylingMode,
      integrationOptions: {}
    });
    var $prevButton = renderer_default(this._prevButton.element()).addClass(CALENDAR_NAVIGATOR_PREVIOUS_VIEW_CLASS).addClass(CALENDAR_NAVIGATOR_PREVIOUS_MONTH_CLASS);
    this._nextButton = this._createComponent(renderer_default("<div>"), button_default, {
      focusStateEnabled,
      icon: rtlEnabled ? "chevronleft" : "chevronright",
      onClick: (e) => {
        this._clickAction({
          direction: 1,
          event: e
        });
      },
      type: type2,
      stylingMode,
      integrationOptions: {}
    });
    var $nextButton = renderer_default(this._nextButton.element()).addClass(CALENDAR_NAVIGATOR_NEXT_VIEW_CLASS).addClass(CALENDAR_NAVIGATOR_NEXT_MONTH_CLASS);
    this._caption = this._createComponent(renderer_default("<div>").addClass(CALENDAR_NAVIGATOR_CAPTION_BUTTON_CLASS), button_default, {
      focusStateEnabled,
      onClick: (e) => {
        this._captionClickAction({
          event: e
        });
      },
      type: type2,
      stylingMode,
      template: (_, content) => {
        var {
          text
        } = this.option();
        var viewCaptionTexts = text.split(" - ");
        viewCaptionTexts.forEach((captionText) => {
          renderer_default(content).append(renderer_default("<span>").addClass(BUTTON_TEXT_CLASS).text(captionText));
        });
      },
      integrationOptions: {}
    });
    var $caption = this._caption.$element();
    this.$element().append($prevButton, $caption, $nextButton);
  }
  _renderCaption() {
    var _a;
    null === (_a = this._caption) || void 0 === _a ? void 0 : _a.option("text", this.option("text"));
  }
  toggleButton(buttonPrefix, value2) {
    var buttonName = "_".concat(buttonPrefix, "Button");
    var button = this[buttonName];
    if (button) {
      button.option("disabled", value2);
      button.$element().toggleClass(CALENDAR_NAVIGATOR_DISABLED_LINK_CLASS, value2);
    }
  }
  _optionChanged(args) {
    switch (args.name) {
      case "text":
        this._renderCaption();
        break;
      default:
        super._optionChanged(args);
    }
  }
};
var m_calendar_navigator_default = Navigator;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.range.selection.strategy.js
var DAY_INTERVAL = 864e5;
var CalendarRangeSelectionStrategy = class extends m_calendar_selection_strategy_default {
  constructor(component) {
    super(component);
    this.NAME = "RangeSelection";
  }
  getViewOptions() {
    var value2 = this._getValue();
    var range = this._getDaysInRange(value2[0], value2[1]);
    return {
      value: value2,
      range,
      selectionMode: "range",
      onCellHover: this._cellHoverHandler.bind(this),
      onWeekNumberClick: this._shouldHandleWeekNumberClick() ? this._weekNumberClickHandler.bind(this) : null
    };
  }
  selectValue(selectedValue, e) {
    var [startDate, endDate] = this._getValue();
    this.skipNavigate();
    this._updateCurrentDate(selectedValue);
    this._currentDateChanged = true;
    if (true === this.calendar.option("_allowChangeSelectionOrder")) {
      this.calendar._valueSelected = true;
      if ("startDate" === this.calendar.option("_currentSelection")) {
        if (this.calendar._convertToDate(selectedValue) > this.calendar._convertToDate(endDate)) {
          this.dateValue([selectedValue, null], e);
        } else {
          this.dateValue([selectedValue, endDate], e);
        }
      } else if (this.calendar._convertToDate(selectedValue) >= this.calendar._convertToDate(startDate)) {
        this.dateValue([startDate, selectedValue], e);
      } else {
        this.dateValue([selectedValue, null], e);
      }
    } else if (!startDate || endDate) {
      this.dateValue([selectedValue, null], e);
    } else {
      this.dateValue(startDate < selectedValue ? [startDate, selectedValue] : [selectedValue, startDate], e);
    }
  }
  updateAriaSelected(value2, previousValue) {
    null !== value2 && void 0 !== value2 ? value2 : value2 = this._getValue();
    null !== previousValue && void 0 !== previousValue ? previousValue : previousValue = [];
    super.updateAriaSelected(value2, previousValue);
  }
  processValueChanged(value2, previousValue) {
    super.processValueChanged(value2, previousValue);
    var range = this._getRange();
    this._updateViewsOption("range", range);
  }
  getDefaultCurrentDate() {
    var {
      _allowChangeSelectionOrder,
      _currentSelection
    } = this.calendar.option();
    var value2 = this.dateOption("value");
    if (_allowChangeSelectionOrder) {
      if ("startDate" === _currentSelection && value2[0]) {
        return value2[0];
      }
      if ("endDate" === _currentSelection && value2[1]) {
        return value2[1];
      }
    }
    var dates = value2.filter((value3) => value3);
    return this._getLowestDateInArray(dates);
  }
  restoreValue() {
    this.calendar.option("value", [null, null]);
  }
  _getValue() {
    var value2 = this.dateOption("value");
    if (!value2.length) {
      return value2;
    }
    var [startDate, endDate] = value2;
    if (startDate && endDate && startDate > endDate) {
      [startDate, endDate] = [endDate, startDate];
    }
    return [startDate, endDate];
  }
  _getRange() {
    var [startDate, endDate] = this._getValue();
    return this._getDaysInRange(startDate, endDate);
  }
  _getDaysInRange(startDate, endDate) {
    if (!startDate || !endDate) {
      return [];
    }
    var {
      currentDate,
      viewsCount
    } = this.calendar.option();
    var isAdditionalViewDate = this.calendar._isAdditionalViewDate(currentDate);
    var firstDateInViews = date_default2.getFirstMonthDate(currentDate, isAdditionalViewDate ? -2 : -1);
    var lastDateInViews = date_default2.getLastMonthDate(currentDate, isAdditionalViewDate ? 1 : viewsCount);
    var rangeStartDate = new Date(Math.max(firstDateInViews, startDate));
    var rangeEndDate = new Date(Math.min(lastDateInViews, endDate));
    return [...date_default2.getDatesOfInterval(rangeStartDate, rangeEndDate, DAY_INTERVAL), rangeEndDate];
  }
  _cellHoverHandler(e) {
    var isMaxZoomLevel = this._isMaxZoomLevel();
    var [startDate, endDate] = this._getValue();
    var {
      _allowChangeSelectionOrder,
      _currentSelection
    } = this.calendar.option();
    if (isMaxZoomLevel) {
      var skipHoveredRange = _allowChangeSelectionOrder && "startDate" === _currentSelection;
      if (startDate && !endDate && !skipHoveredRange) {
        if (e.value > startDate) {
          this._updateViewsOption("hoveredRange", this._getDaysInRange(startDate, e.value));
          return;
        }
      } else if (!startDate && endDate && !(_allowChangeSelectionOrder && "endDate" === _currentSelection)) {
        if (e.value < endDate) {
          this._updateViewsOption("hoveredRange", this._getDaysInRange(e.value, endDate));
          return;
        }
      } else if (startDate && endDate) {
        if ("startDate" === _currentSelection && e.value < startDate) {
          this._updateViewsOption("hoveredRange", this._getDaysInRange(e.value, startDate));
          return;
        }
        if ("endDate" === _currentSelection && e.value > endDate) {
          this._updateViewsOption("hoveredRange", this._getDaysInRange(endDate, e.value));
          return;
        }
      }
      this._updateViewsOption("hoveredRange", []);
    }
  }
  _weekNumberClickHandler(_ref) {
    var {
      rowDates,
      event
    } = _ref;
    var selectedDates = rowDates.filter((date) => !this._isDateDisabled(date));
    var value2 = selectedDates.length ? [selectedDates[0], selectedDates[selectedDates.length - 1]] : [null, null];
    this.dateValue(value2, event);
  }
};
var m_calendar_range_selection_strategy_default = CalendarRangeSelectionStrategy;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.single.selection.strategy.js
var CalendarSingleSelectionStrategy = class extends m_calendar_selection_strategy_default {
  constructor(component) {
    super(component);
    this.NAME = "SingleSelection";
  }
  getViewOptions() {
    return {
      value: this.dateOption("value"),
      range: [],
      selectionMode: "single"
    };
  }
  selectValue(selectedValue, e) {
    this.skipNavigate();
    this.dateValue(selectedValue, e);
  }
  updateAriaSelected(value2, previousValue) {
    null !== value2 && void 0 !== value2 ? value2 : value2 = [this.dateOption("value")];
    null !== previousValue && void 0 !== previousValue ? previousValue : previousValue = [];
    super.updateAriaSelected(value2, previousValue);
  }
  getDefaultCurrentDate() {
    var date = this.dateOption("value");
    if ("" === date) {
      return /* @__PURE__ */ new Date();
    }
    return date;
  }
  restoreValue() {
    this.calendar.option("value", null);
  }
  _updateViewsValue(value2) {
    this._updateViewsOption("value", value2[0]);
  }
};
var m_calendar_single_selection_strategy_default = CalendarSingleSelectionStrategy;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.base_view.js
var {
  abstract: abstract4
} = ui_widget_default;
var CALENDAR_OTHER_VIEW_CLASS = "dx-calendar-other-view";
var CALENDAR_CELL_CLASS = "dx-calendar-cell";
var CALENDAR_CELL_START_CLASS = "dx-calendar-cell-start";
var CALENDAR_CELL_END_CLASS = "dx-calendar-cell-end";
var CALENDAR_CELL_START_IN_ROW_CLASS = "dx-calendar-cell-start-in-row";
var CALENDAR_CELL_END_IN_ROW_CLASS = "dx-calendar-cell-end-in-row";
var CALENDAR_WEEK_NUMBER_CELL_CLASS = "dx-calendar-week-number-cell";
var CALENDAR_EMPTY_CELL_CLASS = "dx-calendar-empty-cell";
var CALENDAR_TODAY_CLASS = "dx-calendar-today";
var CALENDAR_SELECTED_DATE_CLASS = "dx-calendar-selected-date";
var CALENDAR_CELL_IN_RANGE_CLASS = "dx-calendar-cell-in-range";
var CALENDAR_CELL_RANGE_HOVER_CLASS = "dx-calendar-cell-range-hover";
var CALENDAR_CELL_RANGE_HOVER_START_CLASS = "dx-calendar-cell-range-hover-start";
var CALENDAR_CELL_RANGE_HOVER_END_CLASS = "dx-calendar-cell-range-hover-end";
var CALENDAR_RANGE_START_DATE_CLASS = "dx-calendar-range-start-date";
var CALENDAR_RANGE_END_DATE_CLASS = "dx-calendar-range-end-date";
var CALENDAR_CONTOURED_DATE_CLASS = "dx-calendar-contoured-date";
var NOT_WEEK_CELL_SELECTOR = "td:not(.".concat(CALENDAR_WEEK_NUMBER_CELL_CLASS, ")");
var CALENDAR_DXCLICK_EVENT_NAME = addNamespace(CLICK_EVENT_NAME, "dxCalendar");
var CALENDAR_DXHOVERSTART_EVENT_NAME = addNamespace(HOVERSTART, "dxCalendar");
var CALENDAR_DATE_VALUE_KEY = "dxDateValueKey";
var DAY_INTERVAL2 = 864e5;
var BaseView = ui_widget_default.inherit({
  _getViewName: () => "base",
  _getDefaultOptions() {
    return extend(this.callBase(), {
      date: /* @__PURE__ */ new Date(),
      focusStateEnabled: false,
      cellTemplate: null,
      disabledDates: null,
      onCellClick: null,
      onCellHover: null,
      onWeekNumberClick: null,
      rowCount: 3,
      colCount: 4,
      allowValueSelection: true,
      _todayDate: () => /* @__PURE__ */ new Date()
    });
  },
  _initMarkup() {
    this.callBase();
    this._renderImpl();
  },
  _renderImpl() {
    this.$element().append(this._createTable());
    this._createDisabledDatesHandler();
    this._renderBody();
    this._renderContouredDate();
    this._renderValue();
    this._renderRange();
    this._renderEvents();
  },
  _createTable() {
    this._$table = renderer_default("<table>");
    var localizedWidgetName = message_default.format("dxCalendar-ariaWidgetName");
    this.setAria({
      label: localizedWidgetName,
      role: "grid"
    }, this._$table);
    return this._$table;
  },
  _renderBody() {
    this.$body = renderer_default("<tbody>").appendTo(this._$table);
    var rowData = {
      cellDate: this._getFirstCellData(),
      prevCellDate: null
    };
    for (var rowIndex = 0, rowCount = this.option("rowCount"); rowIndex < rowCount; rowIndex++) {
      rowData.row = this._createRow();
      for (var colIndex = 0, colCount = this.option("colCount"); colIndex < colCount; colIndex++) {
        this._renderCell(rowData, colIndex);
      }
      this._renderWeekNumberCell(rowData);
    }
  },
  _createRow() {
    var row = dom_adapter_default.createElement("tr");
    this.setAria("role", "row", renderer_default(row));
    this.$body.get(0).appendChild(row);
    return row;
  },
  _createCell(cellDate, cellIndex) {
    var cell = dom_adapter_default.createElement("td");
    var $cell = renderer_default(cell);
    cell.className = this._getClassNameByDate(cellDate, cellIndex);
    cell.setAttribute("data-value", date_serialization_default.serializeDate(cellDate, date_default2.getShortDateFormat()));
    data(cell, CALENDAR_DATE_VALUE_KEY, cellDate);
    this.setAria({
      role: "gridcell",
      label: this.getCellAriaLabel(cellDate)
    }, $cell);
    return {
      cell,
      $cell
    };
  },
  _renderCell(params, cellIndex) {
    var {
      cellDate,
      prevCellDate,
      row
    } = params;
    if (prevCellDate) {
      date_default2.fixTimezoneGap(prevCellDate, cellDate);
    }
    params.prevCellDate = cellDate;
    var {
      cell,
      $cell
    } = this._createCell(cellDate, cellIndex);
    var cellTemplate = this.option("cellTemplate");
    renderer_default(row).append(cell);
    if (cellTemplate) {
      cellTemplate.render(this._prepareCellTemplateData(cellDate, cellIndex, $cell));
    } else {
      cell.innerHTML = this._getCellText(cellDate);
    }
    params.cellDate = this._getNextCellData(cellDate);
  },
  _getClassNameByDate(cellDate, cellIndex) {
    var className = CALENDAR_CELL_CLASS;
    if (this._isTodayCell(cellDate)) {
      className += " ".concat(CALENDAR_TODAY_CLASS);
    }
    if (this._isDateOutOfRange(cellDate) || this.isDateDisabled(cellDate)) {
      className += " ".concat(CALENDAR_EMPTY_CELL_CLASS);
    }
    if (this._isOtherView(cellDate)) {
      className += " ".concat(CALENDAR_OTHER_VIEW_CLASS);
    }
    if ("range" === this.option("selectionMode")) {
      if (0 === cellIndex) {
        className += " ".concat(CALENDAR_CELL_START_IN_ROW_CLASS);
      }
      if (cellIndex === this.option("colCount") - 1) {
        className += " ".concat(CALENDAR_CELL_END_IN_ROW_CLASS);
      }
      if (this._isStartDayOfMonth(cellDate)) {
        className += " ".concat(CALENDAR_CELL_START_CLASS);
      }
      if (this._isEndDayOfMonth(cellDate)) {
        className += " ".concat(CALENDAR_CELL_END_CLASS);
      }
    }
    return className;
  },
  _prepareCellTemplateData(cellDate, cellIndex, $cell) {
    var isDateCell = cellDate instanceof Date;
    var text = isDateCell ? this._getCellText(cellDate) : cellDate;
    var date = isDateCell ? cellDate : void 0;
    var view = this._getViewName();
    return {
      model: {
        text,
        date,
        view
      },
      container: getPublicElement($cell),
      index: cellIndex
    };
  },
  _renderEvents() {
    this._createCellClickAction();
    events_engine_default.off(this._$table, CALENDAR_DXCLICK_EVENT_NAME);
    events_engine_default.on(this._$table, CALENDAR_DXCLICK_EVENT_NAME, NOT_WEEK_CELL_SELECTOR, (e) => {
      if (!renderer_default(e.currentTarget).hasClass(CALENDAR_EMPTY_CELL_CLASS)) {
        this._cellClickAction({
          event: e,
          value: renderer_default(e.currentTarget).data(CALENDAR_DATE_VALUE_KEY)
        });
      }
    });
    var {
      selectionMode
    } = this.option();
    events_engine_default.off(this._$table, CALENDAR_DXHOVERSTART_EVENT_NAME);
    if ("range" === selectionMode) {
      this._createCellHoverAction();
      events_engine_default.on(this._$table, CALENDAR_DXHOVERSTART_EVENT_NAME, NOT_WEEK_CELL_SELECTOR, (e) => {
        if (!renderer_default(e.currentTarget).hasClass(CALENDAR_EMPTY_CELL_CLASS)) {
          this._cellHoverAction({
            event: e,
            value: renderer_default(e.currentTarget).data(CALENDAR_DATE_VALUE_KEY)
          });
        }
      });
    }
    if ("single" !== selectionMode) {
      this._createWeekNumberCellClickAction();
      events_engine_default.on(this._$table, CALENDAR_DXCLICK_EVENT_NAME, ".".concat(CALENDAR_WEEK_NUMBER_CELL_CLASS), (e) => {
        var $row = renderer_default(e.currentTarget).closest("tr");
        var firstDateInRow = $row.find(".".concat(CALENDAR_CELL_CLASS)).first().data(CALENDAR_DATE_VALUE_KEY);
        var lastDateInRow = $row.find(".".concat(CALENDAR_CELL_CLASS)).last().data(CALENDAR_DATE_VALUE_KEY);
        var rowDates = [...date_default2.getDatesOfInterval(firstDateInRow, lastDateInRow, DAY_INTERVAL2), lastDateInRow];
        this._weekNumberCellClickAction({
          event: e,
          rowDates
        });
      });
    }
  },
  _createCellClickAction() {
    this._cellClickAction = this._createActionByOption("onCellClick");
  },
  _createCellHoverAction() {
    this._cellHoverAction = this._createActionByOption("onCellHover");
  },
  _createWeekNumberCellClickAction() {
    this._weekNumberCellClickAction = this._createActionByOption("onWeekNumberClick");
  },
  _createDisabledDatesHandler() {
    var disabledDates = this.option("disabledDates");
    this._disabledDatesHandler = Array.isArray(disabledDates) ? this._getDefaultDisabledDatesHandler(disabledDates) : disabledDates || noop;
  },
  _getDefaultDisabledDatesHandler: (disabledDates) => noop,
  _isTodayCell: abstract4,
  _isDateOutOfRange: abstract4,
  isDateDisabled(cellDate) {
    var dateParts = {
      date: cellDate,
      view: this._getViewName()
    };
    return this._disabledDatesHandler(dateParts);
  },
  _isOtherView: abstract4,
  _isStartDayOfMonth: abstract4,
  _isEndDayOfMonth: abstract4,
  _getCellText: abstract4,
  _getFirstCellData: abstract4,
  _getNextCellData: abstract4,
  _renderContouredDate(contouredDate) {
    if (!this.option("focusStateEnabled")) {
      return;
    }
    contouredDate = contouredDate || this.option("contouredDate");
    var $oldContouredCell = this._getContouredCell();
    var $newContouredCell = this._getCellByDate(contouredDate);
    $oldContouredCell.removeClass(CALENDAR_CONTOURED_DATE_CLASS);
    if (contouredDate) {
      $newContouredCell.addClass(CALENDAR_CONTOURED_DATE_CLASS);
    }
  },
  _getContouredCell() {
    return this._$table.find(".".concat(CALENDAR_CONTOURED_DATE_CLASS));
  },
  _renderValue() {
    if (!this.option("allowValueSelection")) {
      return;
    }
    var value2 = this.option("value");
    if (!Array.isArray(value2)) {
      value2 = [value2];
    }
    this._updateSelectedClass(value2);
  },
  _updateSelectedClass(value2) {
    var _a;
    if (this._isRangeMode() && !this._isMonthView()) {
      return;
    }
    null === (_a = this._$selectedCells) || void 0 === _a ? void 0 : _a.forEach(($cell) => {
      $cell.removeClass(CALENDAR_SELECTED_DATE_CLASS);
    });
    this._$selectedCells = value2.map((value3) => this._getCellByDate(value3));
    this._$selectedCells.forEach(($cell) => {
      $cell.addClass(CALENDAR_SELECTED_DATE_CLASS);
    });
  },
  _renderRange() {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    var {
      allowValueSelection,
      value: value2,
      range
    } = this.option();
    if (!allowValueSelection || !this._isRangeMode() || !this._isMonthView()) {
      return;
    }
    null === (_a = this._$rangeCells) || void 0 === _a ? void 0 : _a.forEach(($cell) => {
      $cell.removeClass(CALENDAR_CELL_IN_RANGE_CLASS);
    });
    null === (_b = this._$hoveredRangeCells) || void 0 === _b ? void 0 : _b.forEach(($cell) => {
      $cell.removeClass(CALENDAR_CELL_RANGE_HOVER_CLASS);
    });
    null === (_c = this._$rangeStartHoverCell) || void 0 === _c ? void 0 : _c.removeClass(CALENDAR_CELL_RANGE_HOVER_START_CLASS);
    null === (_d = this._$rangeEndHoverCell) || void 0 === _d ? void 0 : _d.removeClass(CALENDAR_CELL_RANGE_HOVER_END_CLASS);
    null === (_e = this._$rangeStartDateCell) || void 0 === _e ? void 0 : _e.removeClass(CALENDAR_RANGE_START_DATE_CLASS);
    null === (_f = this._$rangeEndDateCell) || void 0 === _f ? void 0 : _f.removeClass(CALENDAR_RANGE_END_DATE_CLASS);
    this._$rangeCells = range.map((value3) => this._getCellByDate(value3));
    this._$rangeStartDateCell = this._getCellByDate(value2[0]);
    this._$rangeEndDateCell = this._getCellByDate(value2[1]);
    this._$rangeCells.forEach(($cell) => {
      $cell.addClass(CALENDAR_CELL_IN_RANGE_CLASS);
    });
    null === (_g = this._$rangeStartDateCell) || void 0 === _g ? void 0 : _g.addClass(CALENDAR_RANGE_START_DATE_CLASS);
    null === (_h = this._$rangeEndDateCell) || void 0 === _h ? void 0 : _h.addClass(CALENDAR_RANGE_END_DATE_CLASS);
  },
  _renderHoveredRange() {
    var _a, _b, _c, _d, _e;
    var {
      allowValueSelection,
      hoveredRange
    } = this.option();
    if (!allowValueSelection || !this._isRangeMode() || !this._isMonthView()) {
      return;
    }
    null === (_a = this._$hoveredRangeCells) || void 0 === _a ? void 0 : _a.forEach(($cell) => {
      $cell.removeClass(CALENDAR_CELL_RANGE_HOVER_CLASS);
    });
    null === (_b = this._$rangeStartHoverCell) || void 0 === _b ? void 0 : _b.removeClass(CALENDAR_CELL_RANGE_HOVER_START_CLASS);
    null === (_c = this._$rangeEndHoverCell) || void 0 === _c ? void 0 : _c.removeClass(CALENDAR_CELL_RANGE_HOVER_END_CLASS);
    this._$hoveredRangeCells = hoveredRange.map((value2) => this._getCellByDate(value2));
    this._$rangeStartHoverCell = this._getCellByDate(hoveredRange[0]);
    this._$rangeEndHoverCell = this._getCellByDate(hoveredRange[hoveredRange.length - 1]);
    this._$hoveredRangeCells.forEach(($cell) => {
      $cell.addClass(CALENDAR_CELL_RANGE_HOVER_CLASS);
    });
    null === (_d = this._$rangeStartHoverCell) || void 0 === _d ? void 0 : _d.addClass(CALENDAR_CELL_RANGE_HOVER_START_CLASS);
    null === (_e = this._$rangeEndHoverCell) || void 0 === _e ? void 0 : _e.addClass(CALENDAR_CELL_RANGE_HOVER_END_CLASS);
  },
  _isMonthView() {
    return "month" === this.option("zoomLevel");
  },
  _isRangeMode() {
    return "range" === this.option("selectionMode");
  },
  getCellAriaLabel(date) {
    return this._getCellText(date);
  },
  _getFirstAvailableDate() {
    var date = this.option("date");
    var min = this.option("min");
    date = date_default2.getViewFirstCellDate(this._getViewName(), date);
    return new Date(min && date < min ? min : date);
  },
  _getCellByDate: abstract4,
  isBoundary: abstract4,
  _optionChanged(args) {
    var {
      name: name2,
      value: value2
    } = args;
    switch (name2) {
      case "value":
        this._renderValue();
        break;
      case "range":
        this._renderRange();
        break;
      case "hoveredRange":
        this._renderHoveredRange();
        break;
      case "contouredDate":
        this._renderContouredDate(value2);
        break;
      case "onCellClick":
        this._createCellClickAction();
        break;
      case "onCellHover":
        this._createCellHoverAction();
        break;
      case "min":
      case "max":
      case "disabledDates":
      case "cellTemplate":
      case "selectionMode":
        this._invalidate();
        break;
      case "_todayDate":
        this._renderBody();
        break;
      default:
        this.callBase(args);
    }
  }
});
var m_calendar_base_view_default = BaseView;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.views.js
var CALENDAR_OTHER_MONTH_CLASS = "dx-calendar-other-month";
var CALENDAR_OTHER_VIEW_CLASS2 = "dx-calendar-other-view";
var CALENDAR_WEEK_NUMBER_CELL_CLASS2 = "dx-calendar-week-number-cell";
var CALENDAR_WEEK_SELECTION_CLASS = "dx-calendar-week-selection";
var Views = {
  month: m_calendar_base_view_default.inherit({
    _getViewName: () => "month",
    _getCurrentDateFormat: () => "longdate",
    _getDefaultOptions() {
      return extend(this.callBase(), {
        firstDayOfWeek: 0,
        rowCount: 6,
        colCount: 7
      });
    },
    _renderImpl() {
      this.callBase();
      this._renderHeader();
    },
    _renderBody() {
      this.callBase();
      this._$table.find(".".concat(CALENDAR_OTHER_VIEW_CLASS2)).addClass(CALENDAR_OTHER_MONTH_CLASS);
    },
    _renderFocusTarget: noop,
    getCellAriaLabel: (date) => date_default.format(date, "longdate"),
    _renderHeader() {
      var $headerRow = renderer_default("<tr>");
      var $header = renderer_default("<thead>").append($headerRow);
      this._$table.prepend($header);
      for (var colIndex = 0, colCount = this.option("colCount"); colIndex < colCount; colIndex++) {
        this._renderHeaderCell(colIndex, $headerRow);
      }
      if (this.option("showWeekNumbers")) {
        this._renderWeekHeaderCell($headerRow);
      }
    },
    _renderHeaderCell(cellIndex, $headerRow) {
      var {
        firstDayOfWeek
      } = this.option();
      var {
        full: fullCaption,
        abbreviated: abbrCaption
      } = this._getDayCaption(firstDayOfWeek + cellIndex);
      var $cell = renderer_default("<th>").attr({
        scope: "col",
        abbr: fullCaption
      }).text(abbrCaption);
      $headerRow.append($cell);
    },
    _renderWeekHeaderCell($headerRow) {
      var $weekNumberHeaderCell = renderer_default("<th>").attr({
        scope: "col",
        abbr: "WeekNumber",
        class: "dx-week-number-header"
      });
      $headerRow.prepend($weekNumberHeaderCell);
    },
    _renderWeekNumberCell(rowData) {
      var {
        showWeekNumbers,
        cellTemplate,
        selectionMode,
        selectWeekOnClick
      } = this.option();
      if (!showWeekNumbers) {
        return;
      }
      var weekNumber = this._getWeekNumber(rowData.prevCellDate);
      var cell = dom_adapter_default.createElement("td");
      var $cell = renderer_default(cell);
      cell.className = CALENDAR_WEEK_NUMBER_CELL_CLASS2;
      if ("single" !== selectionMode && selectWeekOnClick) {
        $cell.addClass(CALENDAR_WEEK_SELECTION_CLASS);
      }
      if (cellTemplate) {
        cellTemplate.render(this._prepareCellTemplateData(weekNumber, -1, $cell));
      } else {
        cell.innerHTML = weekNumber;
      }
      rowData.row.prepend(cell);
      this.setAria({
        role: "gridcell",
        label: "Week ".concat(weekNumber)
      }, $cell);
    },
    _getWeekNumber(date) {
      var {
        weekNumberRule,
        firstDayOfWeek
      } = this.option();
      if ("auto" === weekNumberRule) {
        return date_default2.getWeekNumber(date, firstDayOfWeek, 1 === firstDayOfWeek ? "firstFourDays" : "firstDay");
      }
      return date_default2.getWeekNumber(date, firstDayOfWeek, weekNumberRule);
    },
    getNavigatorCaption() {
      return date_default.format(this.option("date"), "monthandyear");
    },
    _isTodayCell(cellDate) {
      var today = this.option("_todayDate")();
      return date_default2.sameDate(cellDate, today);
    },
    _isDateOutOfRange(cellDate) {
      var minDate = this.option("min");
      var maxDate = this.option("max");
      return !date_default2.dateInRange(cellDate, minDate, maxDate, "date");
    },
    _isOtherView(cellDate) {
      return cellDate.getMonth() !== this.option("date").getMonth();
    },
    _isStartDayOfMonth(cellDate) {
      return date_default2.sameDate(cellDate, date_default2.getFirstMonthDate(this.option("date")));
    },
    _isEndDayOfMonth(cellDate) {
      return date_default2.sameDate(cellDate, date_default2.getLastMonthDate(this.option("date")));
    },
    _getCellText: (cellDate) => date_default.format(cellDate, "d"),
    _getDayCaption(day) {
      var daysInWeek = this.option("colCount");
      var dayIndex = day % daysInWeek;
      return {
        full: date_default.getDayNames()[dayIndex],
        abbreviated: date_default.getDayNames("abbreviated")[dayIndex]
      };
    },
    _getFirstCellData() {
      var {
        firstDayOfWeek
      } = this.option();
      var firstDay = date_default2.getFirstMonthDate(this.option("date"));
      var firstMonthDayOffset = firstDayOfWeek - firstDay.getDay();
      var daysInWeek = this.option("colCount");
      if (firstMonthDayOffset >= 0) {
        firstMonthDayOffset -= daysInWeek;
      }
      firstDay.setDate(firstDay.getDate() + firstMonthDayOffset);
      return firstDay;
    },
    _getNextCellData(date) {
      date = new Date(date);
      date.setDate(date.getDate() + 1);
      return date;
    },
    _getCellByDate(date) {
      return this._$table.find("td[data-value='".concat(date_serialization_default.serializeDate(date, date_default2.getShortDateFormat()), "']"));
    },
    isBoundary(date) {
      return date_default2.sameMonthAndYear(date, this.option("min")) || date_default2.sameMonthAndYear(date, this.option("max"));
    },
    _getDefaultDisabledDatesHandler: (disabledDates) => function(args) {
      var isDisabledDate = disabledDates.some((item) => date_default2.sameDate(item, args.date));
      if (isDisabledDate) {
        return true;
      }
    }
  }),
  year: m_calendar_base_view_default.inherit({
    _getViewName: () => "year",
    _getCurrentDateFormat: () => "monthandyear",
    _isTodayCell(cellDate) {
      var today = this.option("_todayDate")();
      return date_default2.sameMonthAndYear(cellDate, today);
    },
    _isDateOutOfRange(cellDate) {
      return !date_default2.dateInRange(cellDate, date_default2.getFirstMonthDate(this.option("min")), date_default2.getLastMonthDate(this.option("max")));
    },
    _isOtherView: () => false,
    _isStartDayOfMonth: () => false,
    _isEndDayOfMonth: () => false,
    _getCellText: (cellDate) => date_default.getMonthNames("abbreviated")[cellDate.getMonth()],
    _getFirstCellData() {
      var currentDate = this.option("date");
      var data17 = new Date(currentDate);
      data17.setDate(1);
      data17.setMonth(0);
      return data17;
    },
    _getNextCellData(date) {
      date = new Date(date);
      date.setMonth(date.getMonth() + 1);
      return date;
    },
    _getCellByDate(date) {
      var foundDate = new Date(date);
      foundDate.setDate(1);
      return this._$table.find("td[data-value='".concat(date_serialization_default.serializeDate(foundDate, date_default2.getShortDateFormat()), "']"));
    },
    getCellAriaLabel: (date) => date_default.format(date, "monthandyear"),
    getNavigatorCaption() {
      return date_default.format(this.option("date"), "yyyy");
    },
    isBoundary(date) {
      return date_default2.sameYear(date, this.option("min")) || date_default2.sameYear(date, this.option("max"));
    },
    _renderWeekNumberCell: noop
  }),
  decade: m_calendar_base_view_default.inherit({
    _getViewName: () => "decade",
    _isTodayCell(cellDate) {
      var today = this.option("_todayDate")();
      return date_default2.sameYear(cellDate, today);
    },
    _isDateOutOfRange(cellDate) {
      var min = this.option("min");
      var max = this.option("max");
      return !date_default2.dateInRange(cellDate.getFullYear(), min && min.getFullYear(), max && max.getFullYear());
    },
    _isOtherView(cellDate) {
      var date = new Date(cellDate);
      date.setMonth(1);
      return !date_default2.sameDecade(date, this.option("date"));
    },
    _isStartDayOfMonth: () => false,
    _isEndDayOfMonth: () => false,
    _getCellText: (cellDate) => date_default.format(cellDate, "yyyy"),
    _getFirstCellData() {
      var year = date_default2.getFirstYearInDecade(this.option("date")) - 1;
      return date_default2.createDateWithFullYear(year, 0, 1);
    },
    _getNextCellData(date) {
      date = new Date(date);
      date.setFullYear(date.getFullYear() + 1);
      return date;
    },
    getNavigatorCaption() {
      var currentDate = this.option("date");
      var firstYearInDecade = date_default2.getFirstYearInDecade(currentDate);
      var startDate = new Date(currentDate);
      var endDate = new Date(currentDate);
      startDate.setFullYear(firstYearInDecade);
      endDate.setFullYear(firstYearInDecade + 9);
      return "".concat(date_default.format(startDate, "yyyy"), "-").concat(date_default.format(endDate, "yyyy"));
    },
    _isValueOnCurrentView: (currentDate, value2) => date_default2.sameDecade(currentDate, value2),
    _getCellByDate(date) {
      var foundDate = new Date(date);
      foundDate.setDate(1);
      foundDate.setMonth(0);
      return this._$table.find("td[data-value='".concat(date_serialization_default.serializeDate(foundDate, date_default2.getShortDateFormat()), "']"));
    },
    isBoundary(date) {
      return date_default2.sameDecade(date, this.option("min")) || date_default2.sameDecade(date, this.option("max"));
    },
    _renderWeekNumberCell: noop
  }),
  century: m_calendar_base_view_default.inherit({
    _getViewName: () => "century",
    _isTodayCell(cellDate) {
      var today = this.option("_todayDate")();
      return date_default2.sameDecade(cellDate, today);
    },
    _isDateOutOfRange(cellDate) {
      var decade = date_default2.getFirstYearInDecade(cellDate);
      var minDecade = date_default2.getFirstYearInDecade(this.option("min"));
      var maxDecade = date_default2.getFirstYearInDecade(this.option("max"));
      return !date_default2.dateInRange(decade, minDecade, maxDecade);
    },
    _isOtherView(cellDate) {
      var date = new Date(cellDate);
      date.setMonth(1);
      return !date_default2.sameCentury(date, this.option("date"));
    },
    _isStartDayOfMonth: () => false,
    _isEndDayOfMonth: () => false,
    _getCellText(cellDate) {
      var startDate = date_default.format(cellDate, "yyyy");
      var endDate = new Date(cellDate);
      endDate.setFullYear(endDate.getFullYear() + 9);
      return "".concat(startDate, " - ").concat(date_default.format(endDate, "yyyy"));
    },
    _getFirstCellData() {
      var decade = date_default2.getFirstDecadeInCentury(this.option("date")) - 10;
      return date_default2.createDateWithFullYear(decade, 0, 1);
    },
    _getNextCellData(date) {
      date = new Date(date);
      date.setFullYear(date.getFullYear() + 10);
      return date;
    },
    _getCellByDate(date) {
      var foundDate = new Date(date);
      foundDate.setDate(1);
      foundDate.setMonth(0);
      foundDate.setFullYear(date_default2.getFirstYearInDecade(foundDate));
      return this._$table.find("td[data-value='".concat(date_serialization_default.serializeDate(foundDate, date_default2.getShortDateFormat()), "']"));
    },
    getNavigatorCaption() {
      var currentDate = this.option("date");
      var firstDecadeInCentury = date_default2.getFirstDecadeInCentury(currentDate);
      var startDate = new Date(currentDate);
      var endDate = new Date(currentDate);
      startDate.setFullYear(firstDecadeInCentury);
      endDate.setFullYear(firstDecadeInCentury + 99);
      return "".concat(date_default.format(startDate, "yyyy"), "-").concat(date_default.format(endDate, "yyyy"));
    },
    isBoundary(date) {
      return date_default2.sameCentury(date, this.option("min")) || date_default2.sameCentury(date, this.option("max"));
    },
    _renderWeekNumberCell: noop
  })
};
var m_calendar_views_default = Views;

// node_modules/devextreme/esm/__internal/ui/calendar/m_calendar.js
var CALENDAR_CLASS = "dx-calendar";
var CALENDAR_BODY_CLASS = "dx-calendar-body";
var CALENDAR_CELL_CLASS2 = "dx-calendar-cell";
var CALENDAR_FOOTER_CLASS = "dx-calendar-footer";
var CALENDAR_TODAY_BUTTON_CLASS = "dx-calendar-today-button";
var CALENDAR_HAS_FOOTER_CLASS = "dx-calendar-with-footer";
var CALENDAR_VIEWS_WRAPPER_CLASS = "dx-calendar-views-wrapper";
var CALENDAR_VIEW_CLASS = "dx-calendar-view";
var CALENDAR_MULTIVIEW_CLASS = "dx-calendar-multiview";
var CALENDAR_RANGE_CLASS = "dx-calendar-range";
var GESTURE_COVER_CLASS = "dx-gesture-cover";
var ANIMATION_DURATION_SHOW_VIEW = 250;
var POP_ANIMATION_FROM = 0.6;
var POP_ANIMATION_TO = 1;
var CALENDAR_INPUT_STANDARD_PATTERN = "yyyy-MM-dd";
var CALENDAR_DATE_VALUE_KEY2 = "dxDateValueKey";
var CALENDAR_DXHOVEREND_EVENT_NAME = addNamespace(HOVEREND, "dxCalendar");
var LEVEL_COMPARE_MAP = {
  month: 3,
  year: 2,
  decade: 1,
  century: 0
};
var ZOOM_LEVEL = {
  MONTH: "month",
  YEAR: "year",
  DECADE: "decade",
  CENTURY: "century"
};
var SELECTION_STRATEGIES = {
  SingleSelection: m_calendar_single_selection_strategy_default,
  MultipleSelection: m_calendar_multiple_selection_strategy_default,
  RangeSelection: m_calendar_range_selection_strategy_default
};
var Calendar = editor_default.inherit({
  _activeStateUnit: ".".concat(CALENDAR_CELL_CLASS2),
  _getDefaultOptions() {
    return extend(this.callBase(), {
      hoverStateEnabled: true,
      activeStateEnabled: true,
      currentDate: /* @__PURE__ */ new Date(),
      value: null,
      dateSerializationFormat: void 0,
      min: new Date(1e3, 0),
      max: new Date(3e3, 0),
      firstDayOfWeek: void 0,
      viewsCount: 1,
      zoomLevel: ZOOM_LEVEL.MONTH,
      maxZoomLevel: ZOOM_LEVEL.MONTH,
      minZoomLevel: ZOOM_LEVEL.CENTURY,
      selectionMode: "single",
      selectWeekOnClick: true,
      showTodayButton: false,
      showWeekNumbers: false,
      weekNumberRule: "auto",
      cellTemplate: "cell",
      disabledDates: null,
      onCellClick: null,
      onContouredChanged: null,
      skipFocusCheck: false,
      _todayDate: () => /* @__PURE__ */ new Date()
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }]);
  },
  _supportedKeys() {
    return extend(this.callBase(), {
      rightArrow(e) {
        e.preventDefault();
        if (isCommandKeyPressed(e)) {
          this._waitRenderView(1);
        } else {
          this._moveCurrentDateByOffset(1 * this._getRtlCorrection());
        }
      },
      leftArrow(e) {
        e.preventDefault();
        if (isCommandKeyPressed(e)) {
          this._waitRenderView(-1);
        } else {
          this._moveCurrentDateByOffset(-1 * this._getRtlCorrection());
        }
      },
      upArrow(e) {
        e.preventDefault();
        if (isCommandKeyPressed(e)) {
          this._navigateUp();
        } else {
          if (fx_default.isAnimating(this._view.$element())) {
            return;
          }
          this._moveCurrentDateByOffset(-1 * this._view.option("colCount"));
        }
      },
      downArrow(e) {
        e.preventDefault();
        if (isCommandKeyPressed(e)) {
          this._navigateDown();
        } else {
          if (fx_default.isAnimating(this._view.$element())) {
            return;
          }
          this._moveCurrentDateByOffset(1 * this._view.option("colCount"));
        }
      },
      home(e) {
        e.preventDefault();
        var zoomLevel = this.option("zoomLevel");
        var currentDate = this.option("currentDate");
        var min = this._dateOption("min");
        if (this._view.isDateDisabled(currentDate)) {
          return;
        }
        var date = date_default2.sameView(zoomLevel, currentDate, min) ? min : date_default2.getViewFirstCellDate(zoomLevel, currentDate);
        this._moveToClosestAvailableDate(date);
      },
      end(e) {
        e.preventDefault();
        var zoomLevel = this.option("zoomLevel");
        var currentDate = this.option("currentDate");
        var max = this._dateOption("max");
        if (this._view.isDateDisabled(currentDate)) {
          return;
        }
        var date = date_default2.sameView(zoomLevel, currentDate, max) ? max : date_default2.getViewLastCellDate(zoomLevel, currentDate);
        this._moveToClosestAvailableDate(date);
      },
      pageUp(e) {
        e.preventDefault();
        this._waitRenderView(-1 * this._getRtlCorrection());
      },
      pageDown(e) {
        e.preventDefault();
        this._waitRenderView(1 * this._getRtlCorrection());
      },
      tab: noop,
      enter: this._enterKeyHandler
    });
  },
  _enterKeyHandler(e) {
    if (!this._isMaxZoomLevel()) {
      this._navigateDown();
    } else if (!this._view.isDateDisabled(this.option("currentDate"))) {
      var value2 = this._updateTimeComponent(this.option("currentDate"));
      this._selectionStrategy.selectValue(value2, e);
    }
  },
  _getSerializationFormat(optionName) {
    var value2 = this.option(optionName || "value");
    if (this.option("dateSerializationFormat")) {
      return this.option("dateSerializationFormat");
    }
    if (isNumeric(value2)) {
      return "number";
    }
    if (!isString(value2)) {
      return;
    }
    return date_serialization_default.getDateSerializationFormat(value2);
  },
  _convertToDate: (value2) => date_serialization_default.deserializeDate(value2),
  _dateValue(value2, event) {
    if (event) {
      if ("keydown" === event.type) {
        var cellElement = this._view._getContouredCell().get(0);
        event.target = cellElement;
      }
      this._saveValueChangeEvent(event);
    }
    this._dateOption("value", value2);
  },
  _dateOption(optionName, optionValue) {
    var isArray2 = "value" === optionName && !this._isSingleMode();
    var value2 = this.option("value");
    if (1 === arguments.length) {
      return isArray2 ? (null !== value2 && void 0 !== value2 ? value2 : []).map((value3) => this._convertToDate(value3)) : this._convertToDate(this.option(optionName));
    }
    var serializationFormat = this._getSerializationFormat(optionName);
    var serializedValue = isArray2 ? (null === optionValue || void 0 === optionValue ? void 0 : optionValue.map((value3) => date_serialization_default.serializeDate(value3, serializationFormat))) || [] : date_serialization_default.serializeDate(optionValue, serializationFormat);
    this.option(optionName, serializedValue);
  },
  _isSingleMode() {
    return "single" === this.option("selectionMode");
  },
  _shiftDate(zoomLevel, date, offset, reverse) {
    switch (zoomLevel) {
      case ZOOM_LEVEL.MONTH:
        date.setDate(date.getDate() + offset * reverse);
        break;
      case ZOOM_LEVEL.YEAR:
        date.setMonth(date.getMonth() + offset * reverse);
        break;
      case ZOOM_LEVEL.DECADE:
        date.setFullYear(date.getFullYear() + offset * reverse);
        break;
      case ZOOM_LEVEL.CENTURY:
        date.setFullYear(date.getFullYear() + 10 * offset * reverse);
    }
  },
  _moveCurrentDateByOffset(offset) {
    var baseDate = this.option("currentDate");
    var currentDate = new Date(baseDate);
    var zoomLevel = this.option("zoomLevel");
    this._shiftDate(zoomLevel, currentDate, offset, 1);
    var maxDate = this._getMaxDate();
    var minDate = this._getMinDate();
    var isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, currentDate, baseDate);
    var isDateForwardInRange = inRange(currentDate, minDate, maxDate) && isDateForwardInNeighborView;
    var dateForward = new Date(currentDate);
    while (isDateForwardInRange) {
      if (!this._view.isDateDisabled(dateForward)) {
        currentDate = dateForward;
        break;
      }
      this._shiftDate(zoomLevel, dateForward, offset, 1);
      isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, dateForward, baseDate);
      isDateForwardInRange = inRange(dateForward, minDate, maxDate) && isDateForwardInNeighborView;
    }
    if (this._view.isDateDisabled(baseDate) || this._view.isDateDisabled(currentDate)) {
      var direction = offset > 0 ? 1 : -1;
      var isViewDisabled = 1 === direction ? this._isNextViewDisabled() : this._isPrevViewDisabled();
      if (!isViewDisabled) {
        this._waitRenderView(direction);
      } else {
        this._moveToClosestAvailableDate(currentDate);
      }
    } else {
      this._skipNavigate = true;
      this.option("currentDate", currentDate);
    }
  },
  _isNextViewDisabled() {
    return this._navigator._nextButton.option("disabled");
  },
  _isPrevViewDisabled() {
    return this._navigator._prevButton.option("disabled");
  },
  _areDatesInSameView(zoomLevel, date1, date2) {
    switch (zoomLevel) {
      case ZOOM_LEVEL.MONTH:
        return date1.getMonth() === date2.getMonth();
      case ZOOM_LEVEL.YEAR:
        return date1.getYear() === date2.getYear();
      case ZOOM_LEVEL.DECADE:
        return parseInt(date1.getYear() / 10) === parseInt(date2.getYear() / 10);
      case ZOOM_LEVEL.CENTURY:
        return parseInt(date1.getYear() / 100) === parseInt(date2.getYear() / 100);
    }
  },
  _areDatesInNeighborView(zoomLevel, date1, date2) {
    switch (zoomLevel) {
      case ZOOM_LEVEL.MONTH:
        return (a = date1.getMonth(), b = date2.getMonth(), abs2 = Math.abs(a - b), Math.min(abs2, 12 - abs2)) <= 1;
      case ZOOM_LEVEL.YEAR:
        return Math.abs(date1.getYear() - date2.getYear()) <= 1;
      case ZOOM_LEVEL.DECADE:
        return Math.abs(date1.getYear() - date2.getYear()) <= 10;
      case ZOOM_LEVEL.CENTURY:
        return Math.abs(date1.getYear() - date2.getYear()) <= 100;
    }
    var a, b, abs2;
  },
  _moveToClosestAvailableDate() {
    var baseDate = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.option("currentDate");
    var currentDate = new Date(baseDate);
    var zoomLevel = this.option("zoomLevel");
    var isCurrentDateAvailable = !this._isDateNotAvailable(currentDate);
    var isDateForwardAvailable = isCurrentDateAvailable;
    var isDateBackwardAvailable = isCurrentDateAvailable;
    var isDateForwardInStartView;
    var isDateBackwardInStartView;
    var dateForward = new Date(currentDate);
    var dateBackward = new Date(currentDate);
    do {
      if (isDateForwardAvailable) {
        currentDate = dateForward;
        break;
      }
      if (isDateBackwardAvailable) {
        currentDate = dateBackward;
        break;
      }
      this._shiftDate(zoomLevel, dateForward, 1, 1);
      this._shiftDate(zoomLevel, dateBackward, 1, -1);
      isDateForwardInStartView = this._areDatesInSameView(zoomLevel, dateForward, baseDate);
      isDateBackwardInStartView = this._areDatesInSameView(zoomLevel, dateBackward, baseDate);
      isDateForwardAvailable = isDateForwardInStartView && !this._isDateNotAvailable(dateForward);
      isDateBackwardAvailable = isDateBackwardInStartView && !this._isDateNotAvailable(dateBackward);
    } while (isDateForwardInStartView || isDateBackwardInStartView);
    this.option("currentDate", currentDate);
  },
  _isDateNotAvailable(date) {
    var maxDate = this._getMaxDate();
    var minDate = this._getMinDate();
    return !inRange(date, minDate, maxDate) || this._view.isDateDisabled(date);
  },
  _init() {
    this.callBase();
    this._initSelectionStrategy();
    this._correctZoomLevel();
    this._initCurrentDate();
    this._initActions();
  },
  _initSelectionStrategy() {
    var strategyName = this._getSelectionStrategyName();
    var strategy = SELECTION_STRATEGIES[strategyName];
    if (!this._selectionStrategy || this._selectionStrategy.NAME !== strategyName) {
      this._selectionStrategy = new strategy(this);
    }
  },
  _refreshSelectionStrategy() {
    this._initSelectionStrategy();
    this._selectionStrategy.restoreValue();
    this._refresh();
  },
  _getSelectionStrategyName() {
    var selectionMode = this.option("selectionMode");
    switch (selectionMode) {
      case "multiple":
        return "MultipleSelection";
      case "range":
        return "RangeSelection";
      default:
        return "SingleSelection";
    }
  },
  _correctZoomLevel() {
    var minZoomLevel = this.option("minZoomLevel");
    var maxZoomLevel = this.option("maxZoomLevel");
    var zoomLevel = this.option("zoomLevel");
    if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {
      return;
    }
    if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {
      this.option("zoomLevel", maxZoomLevel);
    } else if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {
      this.option("zoomLevel", minZoomLevel);
    }
  },
  _initCurrentDate() {
    var _a;
    var currentDate = null !== (_a = this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate())) && void 0 !== _a ? _a : this._getNormalizedDate(this.option("currentDate"));
    this.option("currentDate", currentDate);
  },
  _getNormalizedDate(date) {
    date = date_default2.normalizeDate(date, this._getMinDate(), this._getMaxDate());
    return isDefined(date) ? this._getDate(date) : date;
  },
  _initActions() {
    this._cellClickAction = this._createActionByOption("onCellClick");
    this._onContouredChanged = this._createActionByOption("onContouredChanged");
  },
  _initTemplates() {
    this._templateManager.addDefaultTemplates({
      cell: new FunctionTemplate((options2) => {
        var data17 = options2.model;
        renderer_default(options2.container).append(renderer_default("<span>").text(data17 && data17.text || String(data17)));
      })
    });
    this.callBase();
  },
  _updateCurrentDate(date) {
    if (fx_default.isAnimating(this._$viewsWrapper)) {
      fx_default.stop(this._$viewsWrapper, true);
    }
    var min = this._getMinDate();
    var max = this._getMaxDate();
    if (min > max) {
      this.option("currentDate", /* @__PURE__ */ new Date());
      return;
    }
    var normalizedDate = this._getNormalizedDate(date);
    if (date.getTime() !== normalizedDate.getTime()) {
      this.option("currentDate", new Date(normalizedDate));
      return;
    }
    var offset = this._getViewsOffset(this._view.option("date"), normalizedDate);
    if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {
      offset = 0;
    }
    if (this._view && 0 !== offset && !this._suppressNavigation) {
      if (this._additionalView) {
        if (offset > 2 || offset < -1) {
          this._refreshViews();
          this._setViewContoured(normalizedDate);
          this._updateAriaId(normalizedDate);
          this._renderNavigator();
        } else if (1 === offset && this._skipNavigate) {
          this._setViewContoured(normalizedDate);
          this._updateAriaId(normalizedDate);
        } else {
          this._navigate(offset, normalizedDate);
        }
      } else {
        this._navigate(offset, normalizedDate);
      }
    } else {
      this._renderNavigator();
      this._setViewContoured(normalizedDate);
      this._updateAriaId(normalizedDate);
    }
    this._skipNavigate = false;
  },
  _isAdditionalViewDate(date) {
    if (!this._additionalView) {
      return false;
    }
    return date >= this._additionalView._getFirstAvailableDate();
  },
  _getActiveView(date) {
    return this._isAdditionalViewDate(date) ? this._additionalView : this._view;
  },
  _setViewContoured(date) {
    var _a;
    if (this.option("skipFocusCheck") || renderer_default(this._$viewsWrapper).is(":focus")) {
      this._view.option("contouredDate", null);
      null === (_a = this._additionalView) || void 0 === _a ? void 0 : _a.option("contouredDate", null);
      var view = this._isAdditionalViewDate(date) ? this._additionalView : this._view;
      view.option("contouredDate", date);
    }
  },
  _getMinDate() {
    var _rangeMin = this.option("_rangeMin");
    if (_rangeMin) {
      return _rangeMin;
    }
    if (this.min) {
      return this.min;
    }
    this.min = this._dateOption("min") || new Date(1e3, 0);
    return this.min;
  },
  _getMaxDate() {
    var _rangeMax = this.option("_rangeMax");
    if (_rangeMax) {
      return _rangeMax;
    }
    if (this.max) {
      return this.max;
    }
    this.max = this._dateOption("max") || new Date(3e3, 0);
    return this.max;
  },
  _getViewsOffset(startDate, endDate) {
    var zoomLevel = this.option("zoomLevel");
    if (zoomLevel === ZOOM_LEVEL.MONTH) {
      return this._getMonthsOffset(startDate, endDate);
    }
    var zoomCorrection;
    switch (zoomLevel) {
      case ZOOM_LEVEL.CENTURY:
        zoomCorrection = 100;
        break;
      case ZOOM_LEVEL.DECADE:
        zoomCorrection = 10;
        break;
      default:
        zoomCorrection = 1;
    }
    return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection);
  },
  _getMonthsOffset(startDate, endDate) {
    var yearOffset = endDate.getFullYear() - startDate.getFullYear();
    var monthOffset = endDate.getMonth() - startDate.getMonth();
    return 12 * yearOffset + monthOffset;
  },
  _waitRenderView(offset) {
    if (this._alreadyViewRender) {
      return;
    }
    this._alreadyViewRender = true;
    var date = this._getDateByOffset(offset * this._getRtlCorrection());
    this._moveToClosestAvailableDate(date);
    this._waitRenderViewTimeout = setTimeout(() => {
      this._alreadyViewRender = false;
    });
  },
  _getRtlCorrection() {
    return this.option("rtlEnabled") ? -1 : 1;
  },
  _getDateByOffset(offset, date) {
    date = this._getDate(null !== date && void 0 !== date ? date : this.option("currentDate"));
    var currentDay = date.getDate();
    var difference = date_default2.getDifferenceInMonth(this.option("zoomLevel")) * offset;
    date.setDate(1);
    date.setMonth(date.getMonth() + difference);
    var lastDay = date_default2.getLastMonthDate(date).getDate();
    date.setDate(currentDay > lastDay ? lastDay : currentDay);
    return date;
  },
  _focusTarget() {
    return this._$viewsWrapper;
  },
  _focusEventTarget() {
    return this.$element();
  },
  _initMarkup() {
    this._renderSubmitElement();
    var $element = this.$element();
    $element.addClass(CALENDAR_CLASS);
    $element.toggleClass(CALENDAR_RANGE_CLASS, "range" === this.option("selectionMode"));
    this._renderBody();
    $element.append(this.$body);
    this._renderViews();
    this._renderNavigator();
    this.callBase();
    this._renderEvents();
    $element.prepend(this._navigator.$element());
    this._renderSwipeable();
    this._renderFooter();
    this._selectionStrategy.updateAriaSelected();
    this._updateAriaId();
    this._updateNavigatorLabels();
    this.setAria("role", "application");
    this._moveToClosestAvailableDate();
  },
  _render() {
    this.callBase();
    this._setViewContoured(this.option("currentDate"));
  },
  _renderBody() {
    if (!this._$viewsWrapper) {
      this.$body = renderer_default("<div>").addClass(CALENDAR_BODY_CLASS);
      this._$viewsWrapper = renderer_default("<div>").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);
      this.$body.append(this._$viewsWrapper);
    }
  },
  _getKeyboardListeners() {
    return this.callBase().concat([this._view]);
  },
  _renderViews() {
    this.$element().addClass("".concat(CALENDAR_VIEW_CLASS, "-").concat(this.option("zoomLevel")));
    var {
      currentDate,
      viewsCount
    } = this.option();
    this.$element().toggleClass(CALENDAR_MULTIVIEW_CLASS, viewsCount > 1);
    this._view = this._renderSpecificView(currentDate);
    if (hasWindow()) {
      var beforeDate = this._getDateByOffset(-1, currentDate);
      this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;
      var afterDate = this._getDateByOffset(viewsCount, currentDate);
      afterDate.setDate(1);
      this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null;
    }
    if (viewsCount > 1) {
      this._additionalView = this._renderSpecificView(this._getDateByOffset(1, currentDate));
    }
    this._translateViews();
  },
  _renderSpecificView(date) {
    var {
      zoomLevel
    } = this.option();
    var specificView = m_calendar_views_default[zoomLevel];
    var $view = renderer_default("<div>").appendTo(this._$viewsWrapper);
    var config2 = this._viewConfig(date);
    var view = this._createComponent($view, specificView, config2);
    return view;
  },
  _viewConfig(date) {
    var _a;
    var disabledDates = this.option("disabledDates");
    disabledDates = isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;
    return _extends(_extends({}, this._selectionStrategy.getViewOptions()), {
      date,
      min: this._getMinDate(),
      max: this._getMaxDate(),
      firstDayOfWeek: null !== (_a = this.option("firstDayOfWeek")) && void 0 !== _a ? _a : date_default.firstDayOfWeekIndex(),
      showWeekNumbers: this.option("showWeekNumbers"),
      selectWeekOnClick: this.option("selectWeekOnClick"),
      weekNumberRule: this.option("weekNumberRule"),
      zoomLevel: this.option("zoomLevel"),
      tabIndex: void 0,
      focusStateEnabled: this.option("focusStateEnabled"),
      hoverStateEnabled: this.option("hoverStateEnabled"),
      disabledDates,
      onCellClick: this._cellClickHandler.bind(this),
      cellTemplate: this._getTemplateByOption("cellTemplate"),
      allowValueSelection: this._isMaxZoomLevel(),
      _todayDate: this.option("_todayDate")
    });
  },
  _renderEvents() {
    events_engine_default.off(this._$viewsWrapper, CALENDAR_DXHOVEREND_EVENT_NAME);
    if ("range" === this.option("selectionMode")) {
      events_engine_default.on(this._$viewsWrapper, CALENDAR_DXHOVEREND_EVENT_NAME, null, () => {
        this._updateViewsOption("hoveredRange", []);
      });
    }
  },
  _injectComponent(func2) {
    var that = this;
    return function(params) {
      extend(params, {
        component: that
      });
      return func2(params);
    };
  },
  _isViewAvailable(date) {
    var zoomLevel = this.option("zoomLevel");
    var min = date_default2.getViewMinBoundaryDate(zoomLevel, this._getMinDate());
    var max = date_default2.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());
    return date_default2.dateInRange(date, min, max);
  },
  _translateViews() {
    var {
      viewsCount
    } = this.option();
    move(this._view.$element(), {
      left: 0,
      top: 0
    });
    this._moveViewElement(this._beforeView, -1);
    this._moveViewElement(this._afterView, viewsCount);
    this._moveViewElement(this._additionalView, 1);
  },
  _moveViewElement(view, coefficient) {
    view && move(view.$element(), {
      left: this._getViewPosition(coefficient),
      top: 0
    });
  },
  _getViewPosition(coefficient) {
    var rtlCorrection = this.option("rtlEnabled") ? -1 : 1;
    return "".concat(100 * coefficient * rtlCorrection, "%");
  },
  _cellClickHandler(e) {
    var zoomLevel = this.option("zoomLevel");
    var nextView = date_default2.getViewDown(zoomLevel);
    var isMaxZoomLevel = this._isMaxZoomLevel();
    if (nextView && !isMaxZoomLevel) {
      this._navigateDown(e.event.currentTarget);
    } else {
      var newValue = this._updateTimeComponent(e.value);
      this._selectionStrategy.selectValue(newValue, e.event);
      this._cellClickAction(e);
    }
  },
  _updateTimeComponent(date) {
    var result2 = new Date(date);
    var currentValue = this._dateOption("value");
    if (currentValue && this._isSingleMode()) {
      result2.setHours(currentValue.getHours());
      result2.setMinutes(currentValue.getMinutes());
      result2.setSeconds(currentValue.getSeconds());
      result2.setMilliseconds(currentValue.getMilliseconds());
    }
    return result2;
  },
  _isMaxZoomLevel() {
    return this.option("zoomLevel") === this.option("maxZoomLevel");
  },
  _navigateDown(cell) {
    var zoomLevel = this.option("zoomLevel");
    if (this._isMaxZoomLevel()) {
      return;
    }
    var nextView = date_default2.getViewDown(zoomLevel);
    if (!nextView) {
      return;
    }
    var newCurrentDate = this._view.option("contouredDate") || this._view.option("date");
    if (cell) {
      newCurrentDate = renderer_default(cell).data(CALENDAR_DATE_VALUE_KEY2);
    }
    this._isOtherViewCellClicked = true;
    this.option("currentDate", newCurrentDate);
    this.option("zoomLevel", nextView);
    this._isOtherViewCellClicked = false;
    this._renderNavigator();
    this._animateShowView();
    this._moveToClosestAvailableDate();
    this._setViewContoured(this._getNormalizedDate(this.option("currentDate")));
  },
  _renderNavigator() {
    if (!this._navigator) {
      this._navigator = new m_calendar_navigator_default(renderer_default("<div>"), this._navigatorConfig());
    }
    this._navigator.option("text", this._getViewsCaption(this._view, this._additionalView));
    this._updateButtonsVisibility();
  },
  _navigatorConfig() {
    var {
      focusStateEnabled,
      rtlEnabled
    } = this.option();
    return {
      text: this._getViewsCaption(this._view, this._additionalView),
      onClick: this._navigatorClickHandler.bind(this),
      onCaptionClick: this._navigateUp.bind(this),
      focusStateEnabled,
      rtlEnabled,
      tabIndex: void 0
    };
  },
  _navigatorClickHandler(e) {
    var {
      currentDate,
      viewsCount
    } = this.option();
    var offset = e.direction;
    if (viewsCount > 1) {
      var additionalViewActive = this._isAdditionalViewDate(currentDate);
      var shouldDoubleOffset = additionalViewActive && offset < 0 || !additionalViewActive && offset > 0;
      if (shouldDoubleOffset) {
        offset *= 2;
      }
    }
    var newCurrentDate = this._getDateByOffset(offset, currentDate);
    this._moveToClosestAvailableDate(newCurrentDate);
  },
  _navigateUp() {
    var zoomLevel = this.option("zoomLevel");
    var nextView = date_default2.getViewUp(zoomLevel);
    if (!nextView || this._isMinZoomLevel(zoomLevel)) {
      return;
    }
    this.option("zoomLevel", nextView);
    this._renderNavigator();
    this._animateShowView();
    this._moveToClosestAvailableDate();
    this._setViewContoured(this._getNormalizedDate(this.option("currentDate")));
  },
  _isMinZoomLevel(zoomLevel) {
    var min = this._getMinDate();
    var max = this._getMaxDate();
    return date_default2.sameView(zoomLevel, min, max) || this.option("minZoomLevel") === zoomLevel;
  },
  _updateButtonsVisibility() {
    this._navigator.toggleButton("next", !isDefined(this._afterView));
    this._navigator.toggleButton("prev", !isDefined(this._beforeView));
  },
  _renderSwipeable() {
    if (!this._swipeable) {
      this._swipeable = this._createComponent(this.$element(), swipeable_default, {
        onStart: this._swipeStartHandler.bind(this),
        onUpdated: this._swipeUpdateHandler.bind(this),
        onEnd: this._swipeEndHandler.bind(this),
        itemSizeFunc: this._viewWidth.bind(this)
      });
    }
  },
  _swipeStartHandler(e) {
    fx_default.stop(this._$viewsWrapper, true);
    var {
      viewsCount
    } = this.option();
    this._toggleGestureCoverCursor("grabbing");
    e.event.maxLeftOffset = this._getRequiredView("next") ? 1 / viewsCount : 0;
    e.event.maxRightOffset = this._getRequiredView("prev") ? 1 / viewsCount : 0;
  },
  _toggleGestureCoverCursor(cursor) {
    renderer_default(".".concat(GESTURE_COVER_CLASS)).css("cursor", cursor);
  },
  _getRequiredView(name2) {
    var view;
    var isRtl = this.option("rtlEnabled");
    if ("next" === name2) {
      view = isRtl ? this._beforeView : this._afterView;
    } else if ("prev" === name2) {
      view = isRtl ? this._afterView : this._beforeView;
    }
    return view;
  },
  _swipeUpdateHandler(e) {
    var {
      offset
    } = e.event;
    move(this._$viewsWrapper, {
      left: offset * this._viewWidth(),
      top: 0
    });
    this._updateNavigatorCaption(offset);
  },
  _swipeEndHandler(e) {
    this._toggleGestureCoverCursor("auto");
    var {
      currentDate,
      rtlEnabled
    } = this.option();
    var {
      targetOffset
    } = e.event;
    var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);
    var isAdditionalViewActive = this._isAdditionalViewDate(currentDate);
    var shouldDoubleOffset = isAdditionalViewActive && (rtlEnabled ? -1 === moveOffset : 1 === moveOffset);
    if (0 === moveOffset) {
      this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);
      return;
    }
    var offset = -moveOffset * this._getRtlCorrection() * (shouldDoubleOffset ? 2 : 1);
    var date = this._getDateByOffset(offset);
    if (this._isDateInInvalidRange(date)) {
      if (moveOffset >= 0) {
        date = new Date(this._getMinDate());
      } else {
        date = new Date(this._getMaxDate());
      }
    }
    this.option("currentDate", date);
  },
  _viewWidth() {
    if (!this._viewWidthValue) {
      this._viewWidthValue = getWidth(this.$element()) / this.option("viewsCount");
    }
    return this._viewWidthValue;
  },
  _updateNavigatorCaption(offset) {
    offset *= this._getRtlCorrection();
    var isMultiView = this.option("viewsCount") > 1;
    var view;
    var additionalView;
    if (offset > 0.5 && this._beforeView) {
      view = this._beforeView;
      additionalView = isMultiView && this._view;
    } else if (offset < -0.5 && this._afterView) {
      view = isMultiView ? this._additionalView : this._afterView;
      additionalView = isMultiView ? this._afterView : null;
    } else {
      view = this._view;
      additionalView = isMultiView ? this._additionalView : null;
    }
    this._navigator.option("text", this._getViewsCaption(view, additionalView));
  },
  _getViewsCaption(view, additionalView) {
    var caption = view.getNavigatorCaption();
    var {
      viewsCount
    } = this.option();
    if (viewsCount > 1 && additionalView) {
      var additionalViewCaption = additionalView.getNavigatorCaption();
      caption = "".concat(caption, " - ").concat(additionalViewCaption);
    }
    return caption;
  },
  _isDateInInvalidRange(date) {
    if (this._view.isBoundary(date)) {
      return;
    }
    var min = this._getMinDate();
    var max = this._getMaxDate();
    var normalizedDate = date_default2.normalizeDate(date, min, max);
    return normalizedDate === min || normalizedDate === max;
  },
  _renderFooter() {
    var showTodayButton = this.option("showTodayButton");
    if (showTodayButton) {
      var $todayButton = this._createComponent(renderer_default("<div>"), button_default, {
        focusStateEnabled: this.option("focusStateEnabled"),
        text: message_default.format("dxCalendar-todayButtonText"),
        onClick: (args) => {
          this._toTodayView(args);
        },
        type: isFluent() ? "normal" : "default",
        stylingMode: isFluent() ? "outlined" : "text",
        integrationOptions: {}
      }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);
      this._$footer = renderer_default("<div>").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);
      this.$element().append(this._$footer);
    }
    this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton);
  },
  _renderSubmitElement() {
    this._$submitElement = renderer_default("<input>").attr("type", "hidden").appendTo(this.$element());
    this._setSubmitValue(this.option("value"));
  },
  _setSubmitValue(value2) {
    var dateValue = this._convertToDate(value2);
    this._getSubmitElement().val(date_serialization_default.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN));
  },
  _getSubmitElement() {
    return this._$submitElement;
  },
  _animateShowView() {
    fx_default.stop(this._view.$element(), true);
    this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW);
    if (this.option("viewsCount") > 1) {
      fx_default.stop(this._additionalView.$element(), true);
      this._popAnimationView(this._additionalView, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW);
    }
  },
  _popAnimationView: (view, from, to, duration) => fx_default.animate(view.$element(), {
    type: "pop",
    from: {
      scale: from,
      opacity: from
    },
    to: {
      scale: to,
      opacity: to
    },
    duration
  }),
  _navigate(offset, value2) {
    if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value2)) {
      var newView = this._renderSpecificView(value2);
      if (offset > 0) {
        this._afterView && this._afterView.$element().remove();
        this._afterView = newView;
      } else {
        this._beforeView && this._beforeView.$element().remove();
        this._beforeView = newView;
      }
      this._translateViews();
    }
    var rtlCorrection = this._getRtlCorrection();
    var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;
    var endPosition = -rtlCorrection * offsetSign * this._viewWidth();
    var viewsWrapperPosition = this._$viewsWrapper.position().left;
    if (viewsWrapperPosition !== endPosition) {
      if (this._preventViewChangeAnimation) {
        this._wrapperAnimationEndHandler(offset, value2);
      } else {
        this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value2));
      }
    }
  },
  _animateWrapper(to, duration) {
    return fx_default.animate(this._$viewsWrapper, {
      type: "slide",
      from: {
        left: this._$viewsWrapper.position().left
      },
      to: {
        left: to
      },
      duration
    });
  },
  _getDate: (value2) => new Date(value2),
  _toTodayView(args) {
    var today = /* @__PURE__ */ new Date();
    if (this._isMaxZoomLevel()) {
      this._selectionStrategy.selectValue(today, args.event);
      return;
    }
    this._preventViewChangeAnimation = true;
    this.option("zoomLevel", this.option("maxZoomLevel"));
    this._selectionStrategy.selectValue(today, args.event);
    this._animateShowView();
    this._preventViewChangeAnimation = false;
  },
  _wrapperAnimationEndHandler(offset, newDate) {
    this._rearrangeViews(offset);
    this._translateViews();
    this._resetLocation();
    this._renderNavigator();
    this._setViewContoured(newDate);
    this._updateAriaId(newDate);
    this._selectionStrategy.updateAriaSelected();
  },
  _rearrangeViews(offset) {
    var _a;
    if (0 === offset) {
      return;
    }
    var {
      viewsCount
    } = this.option();
    var viewOffset;
    var viewToCreateKey;
    var viewToRemoveKey;
    var viewBeforeCreateKey;
    var viewAfterRemoveKey;
    if (offset < 0) {
      viewOffset = 1;
      viewToCreateKey = "_beforeView";
      viewToRemoveKey = "_afterView";
      viewBeforeCreateKey = "_view";
      viewAfterRemoveKey = 1 === viewsCount ? "_view" : "_additionalView";
    } else {
      viewOffset = -1;
      viewToCreateKey = "_afterView";
      viewToRemoveKey = "_beforeView";
      viewBeforeCreateKey = 1 === viewsCount ? "_view" : "_additionalView";
      viewAfterRemoveKey = "_view";
    }
    if (!this[viewToCreateKey]) {
      return;
    }
    var destinationDate = this[viewToCreateKey].option("date");
    null === (_a = this[viewToRemoveKey]) || void 0 === _a ? void 0 : _a.$element().remove();
    this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset * viewsCount, destinationDate));
    this[viewAfterRemoveKey].$element().remove();
    if (1 === viewsCount) {
      this[viewAfterRemoveKey] = this[viewToCreateKey];
    } else {
      this[viewAfterRemoveKey] = this[viewBeforeCreateKey];
      this[viewBeforeCreateKey] = this[viewToCreateKey];
    }
    var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);
    this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null;
  },
  _resetLocation() {
    move(this._$viewsWrapper, {
      left: 0,
      top: 0
    });
  },
  _clean() {
    this.callBase();
    this._clearViewWidthCache();
    delete this._$viewsWrapper;
    delete this._navigator;
    delete this._$footer;
  },
  _clearViewWidthCache() {
    delete this._viewWidthValue;
  },
  _disposeViews() {
    this._view.$element().remove();
    this._beforeView && this._beforeView.$element().remove();
    this._additionalView && this._additionalView.$element().remove();
    this._afterView && this._afterView.$element().remove();
    delete this._view;
    delete this._additionalView;
    delete this._beforeView;
    delete this._afterView;
    delete this._skipNavigate;
  },
  _dispose() {
    clearTimeout(this._waitRenderViewTimeout);
    this.callBase();
  },
  _refreshViews() {
    this._resetActiveState();
    this._disposeViews();
    this._renderViews();
  },
  _visibilityChanged() {
    this._translateViews();
  },
  _shouldSkipFocusEvent(event) {
    var {
      target,
      relatedTarget
    } = event;
    return renderer_default(target).parents(".".concat(CALENDAR_CLASS)).length && renderer_default(relatedTarget).parents(".".concat(CALENDAR_CLASS)).length;
  },
  _focusInHandler(event) {
    if (renderer_default(event.target).is(this._$viewsWrapper)) {
      this._setViewContoured(this.option("currentDate"));
    }
    if (this._shouldSkipFocusEvent(event)) {
      return;
    }
    this.callBase.apply(this, arguments);
    this._toggleFocusClass(true, this.$element());
  },
  _focusOutHandler(event) {
    var _a;
    if (renderer_default(event.target).is(this._$viewsWrapper)) {
      this._view.option("contouredDate", null);
      null === (_a = this._additionalView) || void 0 === _a ? void 0 : _a.option("contouredDate", null);
    }
    if (this._shouldSkipFocusEvent(event)) {
      return;
    }
    this.callBase.apply(this, arguments);
    this._toggleFocusClass(false, this.$element());
  },
  _updateViewsOption(optionName, newValue) {
    var _a, _b, _c;
    this._view.option(optionName, newValue);
    null === (_a = this._additionalView) || void 0 === _a ? void 0 : _a.option(optionName, newValue);
    null === (_b = this._beforeView) || void 0 === _b ? void 0 : _b.option(optionName, newValue);
    null === (_c = this._afterView) || void 0 === _c ? void 0 : _c.option(optionName, newValue);
  },
  _setViewsMinOption(min) {
    this._restoreViewsMinMaxOptions();
    this.option("_rangeMin", this._convertToDate(min));
    this._updateViewsOption("min", this._getMinDate());
  },
  _setViewsMaxOption(max) {
    this._restoreViewsMinMaxOptions();
    this.option("_rangeMax", this._convertToDate(max));
    this._updateViewsOption("max", this._getMaxDate());
  },
  _restoreViewsMinMaxOptions() {
    this._resetActiveState();
    this.option({
      _rangeMin: null,
      _rangeMax: null
    });
    this._updateViewsOption("min", this._getMinDate());
    this._updateViewsOption("max", this._getMaxDate());
  },
  _updateNavigatorLabels() {
    var zoomLevel = this.option("zoomLevel");
    zoomLevel = zoomLevel.charAt(0).toUpperCase() + zoomLevel.slice(1);
    var captionButtonText = this._navigator._caption.option("text");
    var localizedPrevButtonLabel = message_default.format("dxCalendar-previous".concat(zoomLevel, "ButtonLabel"));
    var localizedCaptionLabel = message_default.format("dxCalendar-caption".concat(zoomLevel, "Label"));
    var localizedNextButtonLabel = message_default.format("dxCalendar-next".concat(zoomLevel, "ButtonLabel"));
    this.setAria("label", localizedPrevButtonLabel, this._navigator._prevButton.$element());
    this.setAria("label", "".concat(captionButtonText, ". ").concat(localizedCaptionLabel), this._navigator._caption.$element());
    this.setAria("label", localizedNextButtonLabel, this._navigator._nextButton.$element());
  },
  _updateAriaSelected(value2, previousValue) {
    previousValue.forEach((item) => {
      this.setAria("selected", void 0, this._view._getCellByDate(item));
    });
    value2.forEach((item) => {
      this.setAria("selected", true, this._view._getCellByDate(item));
    });
    if (this.option("viewsCount") > 1) {
      previousValue.forEach((item) => {
        this.setAria("selected", void 0, this._additionalView._getCellByDate(item));
      });
      value2.forEach((item) => {
        this.setAria("selected", true, this._additionalView._getCellByDate(item));
      });
    }
  },
  _updateAriaId(value2) {
    value2 = null !== value2 && void 0 !== value2 ? value2 : this.option("currentDate");
    var ariaId = "dx-".concat(new guid_default());
    var view = this._getActiveView(value2);
    var $newCell = view._getCellByDate(value2);
    this.setAria("id", ariaId, $newCell);
    this.setAria("activedescendant", ariaId);
    this._onContouredChanged(ariaId);
  },
  _suppressingNavigation(callback, args) {
    this._suppressNavigation = true;
    callback.apply(this, args);
    delete this._suppressNavigation;
  },
  _optionChanged(args) {
    var {
      value: value2,
      previousValue
    } = args;
    switch (args.name) {
      case "width":
        this.callBase(args);
        this._clearViewWidthCache();
        break;
      case "min":
      case "max":
        this.min = void 0;
        this.max = void 0;
        this._suppressingNavigation(this._updateCurrentDate, [this.option("currentDate")]);
        this._refreshViews();
        this._renderNavigator();
        break;
      case "selectionMode":
        this._refreshSelectionStrategy();
        this._initCurrentDate();
        break;
      case "selectWeekOnClick":
        this._refreshViews();
        break;
      case "firstDayOfWeek":
        this._refreshViews();
        this._updateButtonsVisibility();
        break;
      case "focusStateEnabled":
        this._invalidate();
        break;
      case "currentDate":
        this.setAria("id", void 0, this._view._getCellByDate(previousValue));
        this._updateCurrentDate(value2);
        break;
      case "zoomLevel":
        this.$element().removeClass("".concat(CALENDAR_VIEW_CLASS, "-").concat(previousValue));
        this._correctZoomLevel();
        this._refreshViews();
        this._renderNavigator();
        this._updateAriaId();
        this._updateNavigatorLabels();
        break;
      case "minZoomLevel":
      case "maxZoomLevel":
        this._correctZoomLevel();
        this._updateButtonsVisibility();
        break;
      case "value":
        this._selectionStrategy.processValueChanged(value2, previousValue);
        this._setSubmitValue(value2);
        this.callBase(args);
        break;
      case "viewsCount":
        this._refreshViews();
        this._renderNavigator();
        break;
      case "onCellClick":
        this._view.option("onCellClick", value2);
        break;
      case "onContouredChanged":
        this._onContouredChanged = this._createActionByOption("onContouredChanged");
        break;
      case "disabledDates":
      case "dateSerializationFormat":
      case "cellTemplate":
      case "showTodayButton":
        this._invalidate();
        break;
      case "skipFocusCheck":
        break;
      case "_todayDate":
      case "showWeekNumbers":
      case "weekNumberRule":
        this._refreshViews();
        break;
      default:
        this.callBase(args);
    }
  },
  getContouredDate() {
    return this._view.option("contouredDate");
  }
});
component_registrator_default("dxCalendar", Calendar);
var m_calendar_default = Calendar;

// node_modules/devextreme/esm/ui/calendar.js
var calendar_default = m_calendar_default;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.js
var {
  abstract: abstract5
} = class_default;
var DateBoxStrategy = class_default.inherit({
  ctor(dateBox) {
    this.dateBox = dateBox;
  },
  widgetOption() {
    return this._widget && this._widget.option.apply(this._widget, arguments);
  },
  _renderWidget(element) {
    element = element || renderer_default("<div>");
    this._widget = this._createWidget(element);
    this._widget.$element().appendTo(this._getWidgetContainer());
  },
  _createWidget(element) {
    var widgetName = this._getWidgetName();
    var widgetOptions = this._getWidgetOptions();
    return this.dateBox._createComponent(element, widgetName, widgetOptions);
  },
  _getWidgetOptions: abstract5,
  _getWidgetName: abstract5,
  getDefaultOptions: () => ({
    mode: "text"
  }),
  getDisplayFormat: abstract5,
  supportedKeys: noop,
  getKeyboardListener: noop,
  customizeButtons: noop,
  getParsedText(text, format2) {
    var value2 = date_default.parse(text, format2);
    return value2 || date_default.parse(text);
  },
  renderInputMinMax: noop,
  renderOpenedState() {
    this._updateValue();
  },
  popupConfig: abstract5,
  _dimensionChanged() {
    var _a;
    null === (_a = this._getPopup()) || void 0 === _a ? void 0 : _a.repaint();
  },
  renderPopupContent() {
    var popup = this._getPopup();
    this._renderWidget();
    var $popupContent = popup.$content().parent();
    events_engine_default.off($popupContent, "mousedown");
    events_engine_default.on($popupContent, "mousedown", this._preventFocusOnPopup.bind(this));
  },
  _preventFocusOnPopup(e) {
    e.preventDefault();
  },
  _getWidgetContainer() {
    return this._getPopup().$content();
  },
  _getPopup() {
    return this.dateBox._popup;
  },
  popupShowingHandler: noop,
  popupHiddenHandler: noop,
  _updateValue() {
    this._widget && this._widget.option("value", this.dateBoxValue());
  },
  useCurrentDateByDefault: noop,
  getDefaultDate: () => /* @__PURE__ */ new Date(),
  textChangedHandler: noop,
  renderValue() {
    if (this.dateBox.option("opened")) {
      this._updateValue();
    }
  },
  getValue() {
    return this._widget.option("value");
  },
  isAdaptivityChanged: () => false,
  dispose() {
    var popup = this._getPopup();
    if (popup) {
      popup.$content().empty();
    }
  },
  dateBoxValue() {
    if (arguments.length) {
      return this.dateBox.dateValue.apply(this.dateBox, arguments);
    }
    return this.dateBox.dateOption.apply(this.dateBox, ["value"]);
  }
});
var m_date_box_strategy_default = DateBoxStrategy;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.calendar.js
var TODAY_BUTTON_CLASS = "dx-button-today";
var CalendarStrategy = m_date_box_strategy_default.inherit({
  NAME: "Calendar",
  getDefaultOptions() {
    return extend(this.callBase(), {
      todayButtonText: message_default.format("dxCalendar-todayButtonText")
    });
  },
  supportedKeys() {
    var homeEndHandler = function(e) {
      if (this.option("opened")) {
        e.preventDefault();
        return true;
      }
      return false;
    };
    return {
      rightArrow() {
        if (this.option("opened")) {
          return true;
        }
      },
      leftArrow() {
        if (this.option("opened")) {
          return true;
        }
      },
      enter: (function(e) {
        if (this.dateBox.option("opened")) {
          e.preventDefault();
          if (this._widget.option("zoomLevel") === this._widget.option("maxZoomLevel")) {
            var viewValue = this._getContouredValue();
            var lastActionElement = this._lastActionElement;
            var shouldCloseDropDown = this._closeDropDownByEnter();
            if (shouldCloseDropDown && viewValue && "calendar" === lastActionElement) {
              this.dateBoxValue(viewValue, e);
            }
            shouldCloseDropDown && this.dateBox.close();
            this.dateBox._valueChangeEventHandler(e);
            return !shouldCloseDropDown;
          }
          return true;
        }
        this.dateBox._valueChangeEventHandler(e);
      }).bind(this),
      home: homeEndHandler,
      end: homeEndHandler
    };
  },
  getDisplayFormat: (displayFormat) => displayFormat || "shortdate",
  _closeDropDownByEnter: () => true,
  _getWidgetName: () => calendar_default,
  _getContouredValue() {
    return this._widget._view.option("contouredDate");
  },
  getKeyboardListener() {
    return this._widget;
  },
  _getWidgetOptions() {
    var disabledDates = this.dateBox.option("disabledDates");
    return extend(this.dateBox.option("calendarOptions"), {
      value: this.dateBoxValue() || null,
      selectionMode: "single",
      dateSerializationFormat: null,
      min: this.dateBox.dateOption("min"),
      max: this.dateBox.dateOption("max"),
      onValueChanged: this._valueChangedHandler.bind(this),
      onCellClick: this._cellClickHandler.bind(this),
      disabledDates: isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this.dateBox)) : disabledDates,
      onContouredChanged: this._refreshActiveDescendant.bind(this),
      skipFocusCheck: true
    });
  },
  _injectComponent(func2) {
    var that = this;
    return function(params) {
      extend(params, {
        component: that.dateBox
      });
      return func2(params);
    };
  },
  _refreshActiveDescendant(e) {
    this._lastActionElement = "calendar";
    this.dateBox.setAria("activedescendant", e.actionValue);
  },
  _getTodayButtonConfig() {
    var buttonsLocation = this.dateBox.option("buttonsLocation");
    var isButtonsLocationDefault = "default" === buttonsLocation;
    var position2 = isButtonsLocationDefault ? ["bottom", "center"] : splitPair(buttonsLocation);
    var stylingMode = isMaterial() ? "text" : "outlined";
    return {
      widget: "dxButton",
      toolbar: position2[0],
      location: "after" === position2[1] ? "before" : position2[1],
      options: {
        onClick: (args) => {
          this._widget._toTodayView(args);
        },
        text: this.dateBox.option("todayButtonText"),
        elementAttr: {
          class: TODAY_BUTTON_CLASS
        },
        stylingMode
      }
    };
  },
  _isCalendarVisible() {
    var {
      calendarOptions
    } = this.dateBox.option();
    return isEmptyObject(calendarOptions) || false !== calendarOptions.visible;
  },
  _getPopupToolbarItems(toolbarItems) {
    var useButtons = "useButtons" === this.dateBox.option("applyValueMode");
    var shouldRenderTodayButton = useButtons && this._isCalendarVisible();
    if (shouldRenderTodayButton) {
      var todayButton = this._getTodayButtonConfig();
      return [todayButton, ...toolbarItems];
    }
    return toolbarItems;
  },
  popupConfig: (popupConfig) => extend(true, popupConfig, {
    position: {
      collision: "flipfit flip"
    },
    width: "auto"
  }),
  _valueChangedHandler(e) {
    var {
      value: value2
    } = e;
    var prevValue = e.previousValue;
    if (date_default2.sameDate(value2, prevValue) && date_default2.sameHoursAndMinutes(value2, prevValue)) {
      return;
    }
    if ("instantly" === this.dateBox.option("applyValueMode")) {
      this.dateBoxValue(this.getValue(), e.event);
    }
  },
  _updateValue() {
    if (!this._widget) {
      return;
    }
    this._widget.option("value", this.dateBoxValue());
  },
  textChangedHandler() {
    this._lastActionElement = "input";
    if (this.dateBox.option("opened") && this._widget) {
      this._updateValue(true);
    }
  },
  _cellClickHandler(e) {
    var {
      dateBox
    } = this;
    if ("instantly" === dateBox.option("applyValueMode")) {
      dateBox.option("opened", false);
      this.dateBoxValue(this.getValue(), e.event);
    }
  }
});
var m_date_box_strategy_calendar_default = CalendarStrategy;

// node_modules/devextreme/esm/__internal/ui/m_box.js
var BOX_CLASS = "dx-box";
var BOX_FLEX_CLASS = "dx-box-flex";
var BOX_ITEM_CLASS = "dx-box-item";
var BOX_ITEM_DATA_KEY = "dxBoxItemData";
var SHRINK = 1;
var MINSIZE_MAP = {
  row: "minWidth",
  col: "minHeight"
};
var MAXSIZE_MAP = {
  row: "maxWidth",
  col: "maxHeight"
};
var FLEX_JUSTIFY_CONTENT_MAP = {
  start: "flex-start",
  end: "flex-end",
  center: "center",
  "space-between": "space-between",
  "space-around": "space-around"
};
var FLEX_ALIGN_ITEMS_MAP = {
  start: "flex-start",
  end: "flex-end",
  center: "center",
  stretch: "stretch"
};
var FLEX_DIRECTION_MAP = {
  row: "row",
  col: "column"
};
var setFlexProp = (element, prop, value2) => {
  value2 = normalizeStyleProp(prop, value2);
  element.style[styleProp(prop)] = value2;
  if (!hasWindow()) {
    if ("" === value2 || !isDefined(value2)) {
      return;
    }
    var cssName = dasherize(prop);
    var styleExpr = "".concat(cssName, ": ").concat(value2, ";");
    setStyle(element, styleExpr, false);
  }
};
var BoxItem = class extends m_item_default {
  _renderVisible(value2, oldValue) {
    super._renderVisible(value2);
    if (isDefined(oldValue)) {
      this._options.fireItemStateChangedAction({
        name: "visible",
        state: value2,
        oldState: oldValue
      });
    }
  }
};
var LayoutStrategy = class {
  constructor($element, option) {
    this._$element = $element;
    this._option = option;
  }
  renderBox() {
    this._$element.css({
      display: "".concat(stylePropPrefix("flexDirection"), "flex")
    });
    setFlexProp(this._$element.get(0), "flexDirection", FLEX_DIRECTION_MAP[this._option("direction")]);
  }
  renderAlign() {
    this._$element.css({
      justifyContent: this._normalizedAlign()
    });
  }
  _normalizedAlign() {
    var align = this._option("align");
    return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align;
  }
  renderCrossAlign() {
    this._$element.css({
      alignItems: this._normalizedCrossAlign()
    });
  }
  _normalizedCrossAlign() {
    var crossAlign = this._option("crossAlign");
    return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign;
  }
  renderItems($items) {
    var flexPropPrefix = stylePropPrefix("flexDirection");
    var direction = this._option("direction");
    each($items, function() {
      var $item = renderer_default(this);
      var item = $item.data(BOX_ITEM_DATA_KEY);
      $item.css({
        display: "".concat(flexPropPrefix, "flex")
      }).css(MAXSIZE_MAP[direction], item.maxSize || "none").css(MINSIZE_MAP[direction], item.minSize || "0");
      setFlexProp($item.get(0), "flexBasis", item.baseSize || 0);
      setFlexProp($item.get(0), "flexGrow", item.ratio);
      setFlexProp($item.get(0), "flexShrink", isDefined(item.shrink) ? item.shrink : SHRINK);
      $item.children().each((_, itemContent) => {
        renderer_default(itemContent).css({
          width: "auto",
          height: "auto",
          display: "".concat(stylePropPrefix("flexDirection"), "flex"),
          flexBasis: 0
        });
        setFlexProp(itemContent, "flexGrow", 1);
        setFlexProp(itemContent, "flexDirection", renderer_default(itemContent)[0].style.flexDirection || "column");
      });
    });
  }
};
var Box = class _Box extends ui_collection_widget_edit_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      direction: "row",
      align: "start",
      crossAlign: "stretch",
      activeStateEnabled: false,
      focusStateEnabled: false,
      onItemStateChanged: void 0,
      _queue: void 0
    });
  }
  _itemClass() {
    return BOX_ITEM_CLASS;
  }
  _itemDataKey() {
    return BOX_ITEM_DATA_KEY;
  }
  _itemElements() {
    return this._itemContainer().children(this._itemSelector());
  }
  _init() {
    super._init();
    this.$element().addClass(BOX_FLEX_CLASS);
    this._initLayout();
    this._initBoxQueue();
  }
  _initLayout() {
    this._layout = new LayoutStrategy(this.$element(), this.option.bind(this));
  }
  _initBoxQueue() {
    this._queue = this.option("_queue") || [];
  }
  _queueIsNotEmpty() {
    return this.option("_queue") ? false : !!this._queue.length;
  }
  _pushItemToQueue($item, config2) {
    this._queue.push({
      $item,
      config: config2
    });
  }
  _shiftItemFromQueue() {
    return this._queue.shift();
  }
  _initMarkup() {
    this.$element().addClass(BOX_CLASS);
    this._layout.renderBox();
    super._initMarkup();
    this._renderAlign();
    this._renderActions();
  }
  _renderActions() {
    this._onItemStateChanged = this._createActionByOption("onItemStateChanged");
  }
  _renderAlign() {
    this._layout.renderAlign();
    this._layout.renderCrossAlign();
  }
  _renderItems(items) {
    super._renderItems(items);
    while (this._queueIsNotEmpty()) {
      var item = this._shiftItemFromQueue();
      this._createComponent(item.$item, _Box, extend({
        itemTemplate: this.option("itemTemplate"),
        itemHoldTimeout: this.option("itemHoldTimeout"),
        onItemHold: this.option("onItemHold"),
        onItemClick: this.option("onItemClick"),
        onItemContextMenu: this.option("onItemContextMenu"),
        onItemRendered: this.option("onItemRendered"),
        _queue: this._queue
      }, item.config));
    }
    this._layout.renderItems(this._itemElements());
  }
  _renderItemContent(args) {
    var $itemNode = args.itemData && args.itemData.node;
    if ($itemNode) {
      return this._renderItemContentByNode(args, $itemNode);
    }
    return super._renderItemContent(args);
  }
  _postprocessRenderItem(args) {
    var boxConfig = args.itemData.box;
    if (!boxConfig) {
      return;
    }
    this._pushItemToQueue(args.itemContent, boxConfig);
  }
  _createItemByTemplate(itemTemplate, args) {
    if (args.itemData.box) {
      return itemTemplate.source ? itemTemplate.source() : renderer_default();
    }
    return super._createItemByTemplate(itemTemplate, args);
  }
  _itemOptionChanged(item, property, value2, oldValue) {
    if ("visible" === property) {
      this._onItemStateChanged({
        name: property,
        state: value2,
        oldState: false !== oldValue
      });
    }
    super._itemOptionChanged(item, property, value2);
  }
  _optionChanged(args) {
    switch (args.name) {
      case "_queue":
      case "direction":
        this._invalidate();
        break;
      case "align":
        this._layout.renderAlign();
        break;
      case "crossAlign":
        this._layout.renderCrossAlign();
        break;
      default:
        super._optionChanged(args);
    }
  }
  _itemOptions() {
    var options2 = super._itemOptions();
    options2.fireItemStateChangedAction = (e) => {
      this._onItemStateChanged(e);
    };
    return options2;
  }
};
Box.ItemClass = BoxItem;
component_registrator_default("dxBox", Box);
var m_box_default = Box;

// node_modules/devextreme/esm/ui/box.js
var box_default = m_box_default;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_utils.js
var DATE_COMPONENTS = ["year", "day", "month", "day"];
var TIME_COMPONENTS = ["hours", "minutes", "seconds", "milliseconds"];
var ONE_MINUTE = 6e4;
var ONE_DAY = 60 * ONE_MINUTE * 24;
var ONE_YEAR = 365 * ONE_DAY;
var getStringFormat = function(format2) {
  var formatType = typeof format2;
  if ("string" === formatType) {
    return "format";
  }
  if ("object" === formatType && void 0 !== format2.type) {
    return format2.type;
  }
  return null;
};
var dateUtils = {
  SUPPORTED_FORMATS: ["date", "time", "datetime"],
  ONE_MINUTE,
  ONE_DAY,
  ONE_YEAR,
  MIN_DATEVIEW_DEFAULT_DATE: new Date(1900, 0, 1),
  MAX_DATEVIEW_DEFAULT_DATE: function() {
    var newDate = /* @__PURE__ */ new Date();
    return new Date(newDate.getFullYear() + 50, newDate.getMonth(), newDate.getDate(), 23, 59, 59);
  }(),
  FORMATS_INFO: {
    date: {
      getStandardPattern: () => "yyyy-MM-dd",
      components: DATE_COMPONENTS
    },
    time: {
      getStandardPattern: () => "HH:mm",
      components: TIME_COMPONENTS
    },
    datetime: {
      getStandardPattern() {
        var standardPattern;
        !function() {
          var $input = renderer_default("<input>").attr("type", "datetime");
          $input.val("2000-01-01T01:01Z");
          if ($input.val()) {
            standardPattern = "yyyy-MM-ddTHH:mmZ";
          }
        }();
        if (!standardPattern) {
          standardPattern = "yyyy-MM-ddTHH:mm:ssZ";
        }
        dateUtils.FORMATS_INFO.datetime.getStandardPattern = function() {
          return standardPattern;
        };
        return standardPattern;
      },
      components: [...DATE_COMPONENTS, ...TIME_COMPONENTS]
    },
    "datetime-local": {
      getStandardPattern: () => "yyyy-MM-ddTHH:mm:ss",
      components: [...DATE_COMPONENTS, "hours", "minutes", "seconds"]
    }
  },
  FORMATS_MAP: {
    date: "shortdate",
    time: "shorttime",
    datetime: "shortdateshorttime"
  },
  SUBMIT_FORMATS_MAP: {
    date: "date",
    time: "time",
    datetime: "datetime-local"
  },
  toStandardDateFormat(date, type2) {
    var pattern = dateUtils.FORMATS_INFO[type2].getStandardPattern();
    return date_serialization_default.serializeDate(date, pattern);
  },
  fromStandardDateFormat(text) {
    var date = date_serialization_default.dateParser(text);
    return isDate(date) ? date : void 0;
  },
  getMaxMonthDay: (year, month) => new Date(year, month + 1, 0).getDate(),
  mergeDates(oldValue, newValue, format2) {
    if (!newValue) {
      return newValue || null;
    }
    if (!oldValue || isNaN(oldValue.getTime())) {
      var now = /* @__PURE__ */ new Date(null);
      oldValue = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    }
    var result2 = new Date(oldValue.valueOf());
    var formatInfo = dateUtils.FORMATS_INFO[format2];
    each(formatInfo.components, function() {
      var componentInfo = dateUtils.DATE_COMPONENTS_INFO[this];
      result2[componentInfo.setter](newValue[componentInfo.getter]());
    });
    return result2;
  },
  getLongestCaptionIndex(captionArray) {
    var longestIndex = 0;
    var longestCaptionLength = 0;
    var i;
    for (i = 0; i < captionArray.length; ++i) {
      if (captionArray[i].length > longestCaptionLength) {
        longestIndex = i;
        longestCaptionLength = captionArray[i].length;
      }
    }
    return longestIndex;
  },
  formatUsesMonthName: (format2) => date_default.formatUsesMonthName(format2),
  formatUsesDayName: (format2) => date_default.formatUsesDayName(format2),
  getLongestDate(format2, monthNames, dayNames) {
    var stringFormat = getStringFormat(format2);
    var month = 9;
    if (!stringFormat || dateUtils.formatUsesMonthName(stringFormat)) {
      month = dateUtils.getLongestCaptionIndex(monthNames);
    }
    var longestDate = new Date(1888, month, 21, 23, 59, 59, 999);
    if (!stringFormat || dateUtils.formatUsesDayName(stringFormat)) {
      var date = longestDate.getDate() - longestDate.getDay() + dateUtils.getLongestCaptionIndex(dayNames);
      longestDate.setDate(date);
    }
    return longestDate;
  },
  normalizeTime(date) {
    date.setSeconds(0);
    date.setMilliseconds(0);
  }
};
dateUtils.DATE_COMPONENTS_INFO = {
  year: {
    getter: "getFullYear",
    setter: "setFullYear",
    formatter(value2, date) {
      var formatDate = new Date(date.getTime());
      formatDate.setFullYear(value2);
      return date_default.format(formatDate, "yyyy");
    },
    startValue: void 0,
    endValue: void 0
  },
  day: {
    getter: "getDate",
    setter: "setDate",
    formatter(value2, date) {
      var formatDate = new Date(date.getTime());
      formatDate.setDate(value2);
      return date_default.format(formatDate, "d");
    },
    startValue: 1,
    endValue: void 0
  },
  month: {
    getter: "getMonth",
    setter: "setMonth",
    formatter: (value2) => date_default.getMonthNames()[value2],
    startValue: 0,
    endValue: 11
  },
  hours: {
    getter: "getHours",
    setter: "setHours",
    formatter: (value2) => date_default.format(new Date(0, 0, 0, value2), "hour"),
    startValue: 0,
    endValue: 23
  },
  minutes: {
    getter: "getMinutes",
    setter: "setMinutes",
    formatter: (value2) => date_default.format(new Date(0, 0, 0, 0, value2), "minute"),
    startValue: 0,
    endValue: 59
  },
  seconds: {
    getter: "getSeconds",
    setter: "setSeconds",
    formatter: (value2) => date_default.format(new Date(0, 0, 0, 0, 0, value2), "second"),
    startValue: 0,
    endValue: 59
  },
  milliseconds: {
    getter: "getMilliseconds",
    setter: "setMilliseconds",
    formatter: (value2) => date_default.format(new Date(0, 0, 0, 0, 0, 0, value2), "millisecond"),
    startValue: 0,
    endValue: 999
  }
};
var m_date_utils_default = dateUtils;

// node_modules/devextreme/esm/__internal/ui/date_box/m_time_view.js
var TIMEVIEW_CLASS = "dx-timeview";
var TIMEVIEW_CLOCK_CLASS = "dx-timeview-clock";
var TIMEVIEW_FIELD_CLASS = "dx-timeview-field";
var TIMEVIEW_HOURARROW_CLASS = "dx-timeview-hourarrow";
var TIMEVIEW_TIME_SEPARATOR_CLASS = "dx-timeview-time-separator";
var TIMEVIEW_FORMAT12_CLASS = "dx-timeview-format12";
var TIMEVIEW_FORMAT12_AM = -1;
var TIMEVIEW_FORMAT12_PM = 1;
var TIMEVIEW_MINUTEARROW_CLASS = "dx-timeview-minutearrow";
var rotateArrow = function($arrow, angle, offset) {
  cssRotate($arrow, angle, offset);
};
var cssRotate = function($arrow, angle, offset) {
  $arrow.css("transform", "rotate(".concat(angle, "deg)") + " translate(0,".concat(offset, "px)"));
};
var TimeView = editor_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      value: new Date(Date.now()),
      use24HourFormat: true,
      _showClock: true,
      _arrowOffset: 5,
      stylingMode: void 0
    });
  },
  _getValue() {
    return this.option("value") || /* @__PURE__ */ new Date();
  },
  _init() {
    this.callBase();
    this.$element().addClass(TIMEVIEW_CLASS);
  },
  _render() {
    this.callBase();
    this._renderBox();
    this._updateTime();
  },
  _renderBox() {
    var $box = renderer_default("<div>").appendTo(this.$element());
    var items = [];
    if (this.option("_showClock")) {
      items.push({
        ratio: 1,
        shrink: 0,
        baseSize: "auto",
        template: this._renderClock.bind(this)
      });
    }
    items.push({
      ratio: 0,
      shrink: 0,
      baseSize: "auto",
      template: this._renderField.bind(this)
    });
    this._createComponent($box, box_default, {
      height: "100%",
      width: "100%",
      direction: "col",
      items
    });
  },
  _renderClock(_, __, container) {
    this._$hourArrow = renderer_default("<div>").addClass(TIMEVIEW_HOURARROW_CLASS);
    this._$minuteArrow = renderer_default("<div>").addClass(TIMEVIEW_MINUTEARROW_CLASS);
    var $container = renderer_default(container);
    $container.addClass(TIMEVIEW_CLOCK_CLASS).append(this._$hourArrow).append(this._$minuteArrow);
    this.setAria("role", "presentation", $container);
  },
  _updateClock() {
    var time = this._getValue();
    var hourArrowAngle = time.getHours() / 12 * 360 + time.getMinutes() / 60 * 30;
    var minuteArrowAngle = time.getMinutes() / 60 * 360;
    rotateArrow(this._$hourArrow, hourArrowAngle, this.option("_arrowOffset"));
    rotateArrow(this._$minuteArrow, minuteArrowAngle, this.option("_arrowOffset"));
  },
  _getBoxItems(is12HourFormat) {
    var items = [{
      ratio: 0,
      shrink: 0,
      baseSize: "auto",
      template: () => this._hourBox.$element()
    }, {
      ratio: 0,
      shrink: 0,
      baseSize: "auto",
      template: renderer_default("<div>").addClass(TIMEVIEW_TIME_SEPARATOR_CLASS).text(date_default.getTimeSeparator())
    }, {
      ratio: 0,
      shrink: 0,
      baseSize: "auto",
      template: () => this._minuteBox.$element()
    }];
    if (is12HourFormat) {
      items.push({
        ratio: 0,
        shrink: 0,
        baseSize: "auto",
        template: () => this._format12.$element()
      });
    }
    return items;
  },
  _renderField() {
    var is12HourFormat = !this.option("use24HourFormat");
    this._createHourBox(is12HourFormat);
    this._createMinuteBox();
    if (is12HourFormat) {
      this._createFormat12Box();
    }
    return this._createComponent(renderer_default("<div>").addClass(TIMEVIEW_FIELD_CLASS), box_default, {
      direction: "row",
      align: "center",
      crossAlign: "center",
      items: this._getBoxItems(is12HourFormat)
    }).$element();
  },
  _createHourBox(is12HourFormat) {
    var editor = this._hourBox = this._createComponent(renderer_default("<div>"), number_box_default, extend({
      min: -1,
      max: is12HourFormat ? 13 : 24,
      value: this._getValue().getHours(),
      onValueChanged: this._onHourBoxValueChanged.bind(this),
      onKeyboardHandled: (opts) => this._keyboardHandler(opts)
    }, this._getNumberBoxConfig()));
    editor.setAria("label", "hours");
  },
  _isPM() {
    return !this.option("use24HourFormat") && 1 === this._format12.option("value");
  },
  _onHourBoxValueChanged(_ref) {
    var {
      value: value2,
      component
    } = _ref;
    var currentValue = this._getValue();
    var newValue = new Date(currentValue);
    var newHours = this._convertMaxHourToMin(value2);
    component.option("value", newHours);
    if (this._isPM()) {
      newHours += 12;
    }
    newValue.setHours(newHours);
    m_date_utils_default.normalizeTime(newValue);
    this.option("value", newValue);
  },
  _convertMaxHourToMin(hours) {
    var maxHoursValue = this.option("use24HourFormat") ? 24 : 12;
    return (maxHoursValue + hours) % maxHoursValue;
  },
  _createMinuteBox() {
    var editor = this._minuteBox = this._createComponent(renderer_default("<div>"), number_box_default, extend({
      min: -1,
      max: 60,
      value: this._getValue().getMinutes(),
      onKeyboardHandled: (opts) => this._keyboardHandler(opts),
      onValueChanged: (_ref2) => {
        var {
          value: value2,
          component
        } = _ref2;
        var newMinutes = (60 + value2) % 60;
        component.option("value", newMinutes);
        var time = new Date(this._getValue());
        time.setMinutes(newMinutes);
        m_date_utils_default.normalizeTime(time);
        this.option("value", time);
      }
    }, this._getNumberBoxConfig()));
    editor.setAria("label", "minutes");
  },
  _createFormat12Box() {
    var periodNames = date_default.getPeriodNames();
    var editor = this._format12 = this._createComponent(renderer_default("<div>").addClass(TIMEVIEW_FORMAT12_CLASS), select_box_default, {
      items: [{
        value: TIMEVIEW_FORMAT12_AM,
        text: periodNames[0]
      }, {
        value: TIMEVIEW_FORMAT12_PM,
        text: periodNames[1]
      }],
      valueExpr: "value",
      displayExpr: "text",
      onKeyboardHandled: (opts) => this._keyboardHandler(opts),
      onValueChanged: (_ref3) => {
        var {
          value: value2
        } = _ref3;
        var hours = this._getValue().getHours();
        var time = new Date(this._getValue());
        var newHours = (hours + 12 * value2) % 24;
        time.setHours(newHours);
        this.option("value", time);
      },
      value: this._getValue().getHours() >= 12 ? TIMEVIEW_FORMAT12_PM : TIMEVIEW_FORMAT12_AM,
      stylingMode: this.option("stylingMode")
    });
    editor.setAria("label", "type");
  },
  _refreshFormat12() {
    if (this.option("use24HourFormat")) {
      return;
    }
    var value2 = this._getValue();
    var hours = value2.getHours();
    var isPM = hours >= 12;
    var newValue = isPM ? TIMEVIEW_FORMAT12_PM : TIMEVIEW_FORMAT12_AM;
    this._silentEditorValueUpdate(this._format12, newValue);
  },
  _silentEditorValueUpdate(editor, value2) {
    if (editor) {
      editor._suppressValueChangeAction();
      editor.option("value", value2);
      editor._resumeValueChangeAction();
    }
  },
  _getNumberBoxConfig() {
    return {
      showSpinButtons: true,
      displayValueFormatter: (value2) => (value2 < 10 ? "0" : "") + value2,
      stylingMode: this.option("stylingMode")
    };
  },
  _normalizeHours(hours) {
    return this.option("use24HourFormat") ? hours : hours % 12 || 12;
  },
  _updateField() {
    var hours = this._normalizeHours(this._getValue().getHours());
    this._silentEditorValueUpdate(this._hourBox, hours);
    this._silentEditorValueUpdate(this._minuteBox, this._getValue().getMinutes());
    this._refreshFormat12();
  },
  _updateTime() {
    if (this.option("_showClock")) {
      this._updateClock();
    }
    this._updateField();
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._updateTime();
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "value":
        this._updateTime();
        this.callBase(args);
        break;
      case "_arrowOffset":
        break;
      case "use24HourFormat":
      case "_showClock":
      case "stylingMode":
        this._invalidate();
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxTimeView", TimeView);
var m_time_view_default = TimeView;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.calendar_with_time.js
var window8 = getWindow();
var SHRINK_VIEW_SCREEN_WIDTH = 573;
var DATEBOX_ADAPTIVITY_MODE_CLASS = "dx-datebox-adaptivity-mode";
var DATEBOX_TIMEVIEW_SIDE_CLASS = "dx-datebox-datetime-time-side";
var CalendarWithTimeStrategy = m_date_box_strategy_calendar_default.inherit({
  NAME: "CalendarWithTime",
  getDefaultOptions() {
    return extend(this.callBase(), {
      applyValueMode: "useButtons",
      buttonsLocation: "bottom after",
      "dropDownOptions.showTitle": false
    });
  },
  _closeDropDownByEnter() {
    return date_default2.sameDate(this._getContouredValue(), this.widgetOption("value"));
  },
  getDisplayFormat: (displayFormat) => displayFormat || "shortdateshorttime",
  _is24HourFormat() {
    return date_default.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")));
  },
  _getContouredValue() {
    var viewDate = this.callBase();
    return this._updateDateTime(viewDate);
  },
  _renderWidget() {
    this.callBase();
    this._timeView = this.dateBox._createComponent(renderer_default("<div>"), m_time_view_default, {
      value: this.dateBoxValue(),
      _showClock: !this._isShrinkView(),
      use24HourFormat: this._is24HourFormat(),
      onValueChanged: this._valueChangedHandler.bind(this),
      stylingMode: this.dateBox.option("stylingMode")
    });
  },
  renderOpenedState() {
    this.callBase();
    var popup = this._getPopup();
    if (popup) {
      popup.$wrapper().toggleClass(DATEBOX_ADAPTIVITY_MODE_CLASS, this._isSmallScreen());
    }
    clearTimeout(this._repaintTimer);
    this._repaintTimer = setTimeout(() => {
      this._getPopup() && this._getPopup().repaint();
    }, 0);
  },
  isAdaptivityChanged() {
    var isAdaptiveMode = this._isShrinkView();
    var currentAdaptiveMode = this._currentAdaptiveMode;
    if (isAdaptiveMode !== currentAdaptiveMode) {
      this._currentAdaptiveMode = isAdaptiveMode;
      return void 0 !== currentAdaptiveMode;
    }
    return this.callBase();
  },
  _updateValue(preventDefaultValue) {
    var date = this.dateBoxValue();
    if (!date && !preventDefaultValue) {
      date = /* @__PURE__ */ new Date();
      m_date_utils_default.normalizeTime(date);
    }
    this.callBase();
    if (this._timeView) {
      date && this._timeView.option("value", date);
      this._timeView.option("use24HourFormat", this._is24HourFormat());
    }
  },
  _isSmallScreen: () => getWidth(window8) <= SHRINK_VIEW_SCREEN_WIDTH,
  _isShrinkView() {
    return !this.dateBox.option("showAnalogClock") || this.dateBox.option("adaptivityEnabled") && this._isSmallScreen();
  },
  _getBoxItems() {
    var items = [{
      ratio: 0,
      shrink: 0,
      baseSize: "auto",
      name: "calendar"
    }];
    if (!this._isShrinkView()) {
      items.push({
        ratio: 0,
        shrink: 0,
        baseSize: "auto",
        name: "time"
      });
    }
    return items;
  },
  renderPopupContent() {
    this.callBase();
    this._currentAdaptiveMode = this._isShrinkView();
    var $popupContent = this._getPopup().$content();
    this._box = this.dateBox._createComponent(renderer_default("<div>").appendTo($popupContent), box_default, {
      direction: "row",
      crossAlign: "stretch",
      items: this._getBoxItems(),
      itemTemplate: (function(data17, i, element) {
        var $container = renderer_default("<div>");
        switch (data17.name) {
          case "calendar":
            $container.append(this._widget.$element());
            if (this._isShrinkView()) {
              this._timeView.$element().addClass(DATEBOX_TIMEVIEW_SIDE_CLASS);
              $container.append(this._timeView.$element());
            }
            break;
          case "time":
            $container.append(this._timeView.$element());
            renderer_default(element).addClass(DATEBOX_TIMEVIEW_SIDE_CLASS);
        }
        return $container;
      }).bind(this)
    });
  },
  popupConfig(popupConfig) {
    var calendarPopupConfig = this.callBase(popupConfig);
    return extend(calendarPopupConfig, {
      width: "auto"
    });
  },
  _preventFocusOnPopup(e) {
    if (!renderer_default(e.target).hasClass("dx-texteditor-input")) {
      this.callBase.apply(this, arguments);
      if (!this.dateBox._hasFocusClass()) {
        this.dateBox.focus();
      }
    }
  },
  _updateDateTime(date) {
    var time = this._timeView.option("value");
    date.setHours(time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());
    return date;
  },
  getValue() {
    var _a;
    var date = null !== (_a = this._widget.option("value")) && void 0 !== _a ? _a : this._widget.getContouredDate();
    date = date ? new Date(date) : /* @__PURE__ */ new Date();
    return this._updateDateTime(date);
  },
  dispose() {
    clearTimeout(this._removeMinWidthTimer);
    clearTimeout(this._repaintTimer);
    this.callBase();
  }
});
var m_date_box_strategy_calendar_with_time_default = CalendarWithTimeStrategy;

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/scroll_direction.js
var ScrollDirection = class {
  constructor(direction) {
    this.DIRECTION_HORIZONTAL = "horizontal";
    this.DIRECTION_VERTICAL = "vertical";
    this.DIRECTION_BOTH = "both";
    this.direction = null !== direction && void 0 !== direction ? direction : DIRECTION_VERTICAL;
  }
  get isHorizontal() {
    return this.direction === DIRECTION_HORIZONTAL || this.direction === DIRECTION_BOTH;
  }
  get isVertical() {
    return this.direction === DIRECTION_VERTICAL || this.direction === DIRECTION_BOTH;
  }
  get isBoth() {
    return this.direction === DIRECTION_BOTH;
  }
};

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/convert_location.js
function convertToLocation(location, direction) {
  if (isPlainObject(location)) {
    var left = ensureDefined(location.left, location.x);
    var top = ensureDefined(location.top, location.y);
    return {
      left: isDefined(left) ? left : void 0,
      top: isDefined(top) ? top : void 0
    };
  }
  var {
    isHorizontal,
    isVertical
  } = new ScrollDirection(direction);
  return {
    left: isHorizontal && isDefined(location) ? location : void 0,
    top: isVertical && isDefined(location) ? location : void 0
  };
}

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_view_roller.js
var DATEVIEW_ROLLER_CLASS = "dx-dateviewroller";
var DATEVIEW_ROLLER_ACTIVE_CLASS = "dx-state-active";
var DATEVIEW_ROLLER_CURRENT_CLASS = "dx-dateviewroller-current";
var DATEVIEW_ROLLER_ITEM_CLASS = "dx-dateview-item";
var DATEVIEW_ROLLER_ITEM_SELECTED_CLASS = "dx-dateview-item-selected";
var DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS = "dx-dateview-item-selected-frame";
var DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS = "dx-dateview-item-selected-border";
var DateViewRoller = class extends m_scrollable_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      showScrollbar: "never",
      useNative: false,
      selectedIndex: 0,
      bounceEnabled: false,
      items: [],
      showOnClick: false,
      onClick: null,
      onSelectedIndexChanged: null,
      scrollByContent: true
    });
  }
  _init() {
    super._init();
    this.option("onVisibilityChange", this._visibilityChangedHandler.bind(this));
    this.option("onEnd", this._endActionHandler.bind(this));
  }
  _render() {
    super._render();
    this._renderSelectedItemFrame();
    this.$element().addClass(DATEVIEW_ROLLER_CLASS);
    this._renderContainerClick();
    this._renderItems();
    this._renderSelectedValue();
    this._renderItemsClick();
    this._renderWheelEvent();
    this._renderSelectedIndexChanged();
  }
  _renderSelectedIndexChanged() {
    this._selectedIndexChanged = this._createActionByOption("onSelectedIndexChanged");
  }
  _renderWheelEvent() {
    events_engine_default.on(renderer_default(this.container()), "dxmousewheel", (e) => {
      this._isWheelScrolled = true;
    });
  }
  _renderContainerClick() {
    if (!this.option("showOnClick")) {
      return;
    }
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    var clickAction = this._createActionByOption("onClick");
    events_engine_default.off(renderer_default(this.container()), eventName);
    events_engine_default.on(renderer_default(this.container()), eventName, (e) => {
      clickAction({
        event: e
      });
    });
  }
  _renderItems() {
    var items = this.option("items") || [];
    var $items = renderer_default();
    renderer_default(this.content()).empty();
    items.forEach((item) => {
      $items = $items.add(renderer_default("<div>").addClass(DATEVIEW_ROLLER_ITEM_CLASS).append(item));
    });
    renderer_default(this.content()).append($items);
    this._$items = $items;
    this.update();
  }
  _renderSelectedItemFrame() {
    renderer_default("<div>").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS).append(renderer_default("<div>").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS)).appendTo(renderer_default(this.container()));
  }
  _renderSelectedValue(selectedIndex) {
    var index = this._fitIndex(null !== selectedIndex && void 0 !== selectedIndex ? selectedIndex : this.option("selectedIndex"));
    this._moveTo({
      top: this._getItemPosition(index)
    });
    this._renderActiveStateItem();
  }
  _fitIndex(index) {
    var items = this.option("items") || [];
    var itemCount = items.length;
    if (index >= itemCount) {
      return itemCount - 1;
    }
    if (index < 0) {
      return 0;
    }
    return index;
  }
  _getItemPosition(index) {
    return Math.round(this._itemHeight() * index);
  }
  _renderItemsClick() {
    var itemSelector = this._getItemSelector();
    var eventName = addNamespace(CLICK_EVENT_NAME, this.NAME);
    events_engine_default.off(this.$element(), eventName, itemSelector);
    events_engine_default.on(this.$element(), eventName, itemSelector, this._itemClickHandler.bind(this));
  }
  _getItemSelector() {
    return ".".concat(DATEVIEW_ROLLER_ITEM_CLASS);
  }
  _itemClickHandler(e) {
    this.option("selectedIndex", this._itemElementIndex(e.currentTarget));
  }
  _itemElementIndex(itemElement) {
    return this._itemElements().index(itemElement);
  }
  _itemElements() {
    return this.$element().find(this._getItemSelector());
  }
  _renderActiveStateItem() {
    var selectedIndex = this.option("selectedIndex");
    each(this._$items, function(index) {
      renderer_default(this).toggleClass(DATEVIEW_ROLLER_ITEM_SELECTED_CLASS, selectedIndex === index);
    });
  }
  _shouldScrollToNeighborItem() {
    return "desktop" === devices_default.real().deviceType && this._isWheelScrolled;
  }
  _moveTo(targetLocation) {
    var {
      top,
      left
    } = convertToLocation(targetLocation);
    var location = this.scrollOffset();
    var delta = {
      x: location.left - left,
      y: location.top - top
    };
    if (this._isVisible() && (delta.x || delta.y)) {
      this._prepareDirections(true);
      if (this._animation && !this._shouldScrollToNeighborItem()) {
        var that = this;
        fx_default.stop(renderer_default(this.content()));
        fx_default.animate(renderer_default(this.content()), {
          duration: 200,
          type: "slide",
          to: {
            top: Math.floor(delta.y)
          },
          complete() {
            resetPosition(renderer_default(that.content()));
            that.handleMove({
              delta
            });
          }
        });
        delete this._animation;
      } else {
        this.handleMove({
          delta
        });
      }
    }
  }
  _validate(e) {
    return this._moveIsAllowed(e);
  }
  _fitSelectedIndexInRange(index) {
    var itemsCount = this.option("items").length;
    return Math.max(Math.min(index, itemsCount - 1), 0);
  }
  _isInNullNeighborhood(x) {
    return -0.1 <= x && x <= 0.1;
  }
  _getSelectedIndexAfterScroll(currentSelectedIndex) {
    var locationTop = this.scrollOffset().top;
    var currentSelectedIndexPosition = currentSelectedIndex * this._itemHeight();
    var dy = locationTop - currentSelectedIndexPosition;
    if (this._isInNullNeighborhood(dy)) {
      return currentSelectedIndex;
    }
    var direction = dy > 0 ? 1 : -1;
    var newSelectedIndex = this._fitSelectedIndexInRange(currentSelectedIndex + direction);
    return newSelectedIndex;
  }
  _getNewSelectedIndex(currentSelectedIndex) {
    if (this._shouldScrollToNeighborItem()) {
      return this._getSelectedIndexAfterScroll(currentSelectedIndex);
    }
    this._animation = true;
    var ratio = this.scrollOffset().top / this._itemHeight();
    return Math.round(ratio);
  }
  _endActionHandler() {
    var currentSelectedIndex = this.option("selectedIndex");
    var newSelectedIndex = this._getNewSelectedIndex(currentSelectedIndex);
    if (newSelectedIndex === currentSelectedIndex) {
      this._renderSelectedValue(newSelectedIndex);
    } else {
      this.option("selectedIndex", newSelectedIndex);
    }
    this._isWheelScrolled = false;
  }
  _itemHeight() {
    var $item = this._$items.first();
    return getHeight($item);
  }
  _toggleActive(state) {
    this.$element().toggleClass(DATEVIEW_ROLLER_ACTIVE_CLASS, state);
  }
  _isVisible() {
    return renderer_default(this.container()).is(":visible");
  }
  _fireSelectedIndexChanged(value2, previousValue) {
    this._selectedIndexChanged({
      value: value2,
      previousValue,
      event: void 0
    });
  }
  _visibilityChanged(visible) {
    super._visibilityChanged(visible);
    this._visibilityChangedHandler(visible);
  }
  _visibilityChangedHandler(visible) {
    if (visible) {
      this._visibilityTimer = setTimeout(() => {
        this._renderSelectedValue(this.option("selectedIndex"));
      });
    }
    this.toggleActiveState(false);
  }
  toggleActiveState(state) {
    this.$element().toggleClass(DATEVIEW_ROLLER_CURRENT_CLASS, state);
  }
  _refreshSelectedIndex() {
    var selectedIndex = this.option("selectedIndex");
    var fitIndex = this._fitIndex(selectedIndex);
    if (fitIndex === selectedIndex) {
      this._renderActiveStateItem();
    } else {
      this.option("selectedIndex", fitIndex);
    }
  }
  _optionChanged(args) {
    switch (args.name) {
      case "selectedIndex":
        this._fireSelectedIndexChanged(args.value, args.previousValue);
        this._renderSelectedValue(args.value);
        break;
      case "items":
        this._renderItems();
        this._refreshSelectedIndex();
        break;
      case "onClick":
      case "showOnClick":
        this._renderContainerClick();
        break;
      case "onSelectedIndexChanged":
        this._renderSelectedIndexChanged();
        break;
      default:
        super._optionChanged(args);
    }
  }
  _dispose() {
    clearTimeout(this._visibilityTimer);
    super._dispose();
  }
};
component_registrator_default("dxDateViewRoller", DateViewRoller);
var m_date_view_roller_default = DateViewRoller;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_view.js
var DATEVIEW_CLASS = "dx-dateview";
var DATEVIEW_COMPACT_CLASS = "dx-dateview-compact";
var DATEVIEW_WRAPPER_CLASS = "dx-dateview-wrapper";
var DATEVIEW_ROLLER_CONTAINER_CLASS = "dx-dateview-rollers";
var DATEVIEW_ROLLER_CLASS2 = "dx-dateviewroller";
var TYPE = {
  date: "date",
  datetime: "datetime",
  time: "time"
};
var ROLLER_TYPE = {
  year: "year",
  month: "month",
  day: "day",
  hours: "hours"
};
var DateView = editor_default.inherit({
  _valueOption() {
    var value2 = this.option("value");
    var date = new Date(value2);
    return !value2 || isNaN(date) ? this._getDefaultDate() : date;
  },
  _getDefaultDate() {
    var date = /* @__PURE__ */ new Date();
    if (this.option("type") === TYPE.date) {
      return new Date(date.getFullYear(), date.getMonth(), date.getDate());
    }
    return date;
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      minDate: m_date_utils_default.MIN_DATEVIEW_DEFAULT_DATE,
      maxDate: m_date_utils_default.MAX_DATEVIEW_DEFAULT_DATE,
      type: TYPE.date,
      value: /* @__PURE__ */ new Date(),
      applyCompactClass: false
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: (device) => "desktop" !== device.deviceType,
      options: {
        applyCompactClass: true
      }
    }]);
  },
  _render() {
    this.callBase();
    this.$element().addClass(DATEVIEW_CLASS);
    this._toggleFormatClasses(this.option("type"));
    this._toggleCompactClass();
  },
  _toggleFormatClasses(currentFormat, previousFormat) {
    this.$element().addClass("".concat(DATEVIEW_CLASS, "-").concat(currentFormat));
    previousFormat && this.$element().removeClass("".concat(DATEVIEW_CLASS, "-").concat(previousFormat));
  },
  _toggleCompactClass() {
    this.$element().toggleClass(DATEVIEW_COMPACT_CLASS, this.option("applyCompactClass"));
  },
  _wrapper() {
    return this._$wrapper;
  },
  _renderContentImpl() {
    this._$wrapper = renderer_default("<div>").addClass(DATEVIEW_WRAPPER_CLASS);
    this._renderRollers();
    this._$wrapper.appendTo(this.$element());
  },
  _renderRollers() {
    if (!this._$rollersContainer) {
      this._$rollersContainer = renderer_default("<div>").addClass(DATEVIEW_ROLLER_CONTAINER_CLASS);
    }
    this._$rollersContainer.empty();
    this._createRollerConfigs();
    this._rollers = {};
    var that = this;
    each(that._rollerConfigs, (name2) => {
      var $roller = renderer_default("<div>").appendTo(that._$rollersContainer).addClass("".concat(DATEVIEW_ROLLER_CLASS2, "-").concat(that._rollerConfigs[name2].type));
      that._rollers[that._rollerConfigs[name2].type] = that._createComponent($roller, m_date_view_roller_default, {
        items: that._rollerConfigs[name2].displayItems,
        selectedIndex: that._rollerConfigs[name2].selectedIndex,
        showScrollbar: "never",
        scrollByContent: true,
        onStart(e) {
          var roller = e.component;
          roller._toggleActive(true);
          that._setActiveRoller(that._rollerConfigs[name2], roller.option("selectedIndex"));
        },
        onEnd(e) {
          var roller = e.component;
          roller._toggleActive(false);
        },
        onClick(e) {
          var roller = e.component;
          roller._toggleActive(true);
          that._setActiveRoller(that._rollerConfigs[name2], roller.option("selectedIndex"));
          that._setRollerState(that._rollerConfigs[name2], roller.option("selectedIndex"));
          roller._toggleActive(false);
        },
        onSelectedIndexChanged(e) {
          var roller = e.component;
          that._setRollerState(that._rollerConfigs[name2], roller.option("selectedIndex"));
        }
      });
    });
    that._$rollersContainer.appendTo(that._wrapper());
  },
  _createRollerConfigs(type2) {
    var that = this;
    type2 = type2 || that.option("type");
    that._rollerConfigs = {};
    date_default.getFormatParts(m_date_utils_default.FORMATS_MAP[type2]).forEach((partName) => {
      that._createRollerConfig(partName);
    });
  },
  _createRollerConfig(componentName) {
    var componentInfo = m_date_utils_default.DATE_COMPONENTS_INFO[componentName];
    var valueRange = this._calculateRollerConfigValueRange(componentName);
    var {
      startValue
    } = valueRange;
    var {
      endValue
    } = valueRange;
    var {
      formatter
    } = componentInfo;
    var curDate = this._getCurrentDate();
    var config2 = {
      type: componentName,
      setValue: componentInfo.setter,
      valueItems: [],
      displayItems: [],
      getIndex: (value2) => value2[componentInfo.getter]() - startValue
    };
    for (var i = startValue; i <= endValue; i++) {
      config2.valueItems.push(i);
      config2.displayItems.push(formatter(i, curDate));
    }
    config2.selectedIndex = config2.getIndex(curDate);
    this._rollerConfigs[componentName] = config2;
  },
  _setActiveRoller(currentRoller) {
    var activeRoller = currentRoller && this._rollers[currentRoller.type];
    each(this._rollers, function() {
      this.toggleActiveState(this === activeRoller);
    });
  },
  _updateRollersPosition() {
    var that = this;
    each(this._rollers, function(type2) {
      var correctIndex = that._rollerConfigs[type2].getIndex(that._getCurrentDate());
      this.option("selectedIndex", correctIndex);
    });
  },
  _setRollerState(roller, selectedIndex) {
    if (selectedIndex !== roller.selectedIndex) {
      var rollerValue = roller.valueItems[selectedIndex];
      var {
        setValue
      } = roller;
      var currentValue = new Date(this._getCurrentDate());
      var currentDate = currentValue.getDate();
      var minDate = this.option("minDate");
      var maxDate = this.option("maxDate");
      if (roller.type === ROLLER_TYPE.month) {
        currentDate = Math.min(currentDate, m_date_utils_default.getMaxMonthDay(currentValue.getFullYear(), rollerValue));
      } else if (roller.type === ROLLER_TYPE.year) {
        currentDate = Math.min(currentDate, m_date_utils_default.getMaxMonthDay(rollerValue, currentValue.getMonth()));
      }
      currentValue.setDate(currentDate);
      currentValue[setValue](rollerValue);
      var normalizedDate = date_default2.normalizeDate(currentValue, minDate, maxDate);
      currentValue = m_date_utils_default.mergeDates(normalizedDate, currentValue, "time");
      currentValue = date_default2.normalizeDate(currentValue, minDate, maxDate);
      this.option("value", currentValue);
      roller.selectedIndex = selectedIndex;
    }
    if (roller.type === ROLLER_TYPE.year) {
      this._refreshRollers();
    }
    if (roller.type === ROLLER_TYPE.month) {
      this._refreshRoller(ROLLER_TYPE.day);
      this._refreshRoller(ROLLER_TYPE.hours);
    }
  },
  _refreshRoller(rollerType) {
    var roller = this._rollers[rollerType];
    if (roller) {
      this._createRollerConfig(rollerType);
      var rollerConfig = this._rollerConfigs[rollerType];
      if (rollerType === ROLLER_TYPE.day || rollerConfig.displayItems.toString() !== roller.option("items").toString()) {
        roller.option({
          items: rollerConfig.displayItems,
          selectedIndex: rollerConfig.selectedIndex
        });
      }
    }
  },
  _getCurrentDate() {
    var curDate = this._valueOption();
    var minDate = this.option("minDate");
    var maxDate = this.option("maxDate");
    return date_default2.normalizeDate(curDate, minDate, maxDate);
  },
  _calculateRollerConfigValueRange(componentName) {
    var curDate = this._getCurrentDate();
    var minDate = this.option("minDate");
    var maxDate = this.option("maxDate");
    var minYear = date_default2.sameYear(curDate, minDate);
    var minMonth = minYear && curDate.getMonth() === minDate.getMonth();
    var maxYear = date_default2.sameYear(curDate, maxDate);
    var maxMonth = maxYear && curDate.getMonth() === maxDate.getMonth();
    var minHour = minMonth && curDate.getDate() === minDate.getDate();
    var maxHour = maxMonth && curDate.getDate() === maxDate.getDate();
    var componentInfo = m_date_utils_default.DATE_COMPONENTS_INFO[componentName];
    var {
      startValue
    } = componentInfo;
    var {
      endValue
    } = componentInfo;
    if (componentName === ROLLER_TYPE.year) {
      startValue = minDate.getFullYear();
      endValue = maxDate.getFullYear();
    }
    if (componentName === ROLLER_TYPE.month) {
      if (minYear) {
        startValue = minDate.getMonth();
      }
      if (maxYear) {
        endValue = maxDate.getMonth();
      }
    }
    if (componentName === ROLLER_TYPE.day) {
      endValue = m_date_utils_default.getMaxMonthDay(curDate.getFullYear(), curDate.getMonth());
      if (minYear && minMonth) {
        startValue = minDate.getDate();
      }
      if (maxYear && maxMonth) {
        endValue = maxDate.getDate();
      }
    }
    if (componentName === ROLLER_TYPE.hours) {
      startValue = minHour ? minDate.getHours() : startValue;
      endValue = maxHour ? maxDate.getHours() : endValue;
    }
    return {
      startValue,
      endValue
    };
  },
  _refreshRollers() {
    this._refreshRoller(ROLLER_TYPE.month);
    this._refreshRoller(ROLLER_TYPE.day);
    this._refreshRoller(ROLLER_TYPE.hours);
  },
  _optionChanged(args) {
    switch (args.name) {
      case "minDate":
      case "maxDate":
      case "type":
        this._renderRollers();
        this._toggleFormatClasses(args.value, args.previousValue);
        break;
      case "visible":
        this.callBase(args);
        if (args.value) {
          this._renderRollers();
        }
        break;
      case "value":
        this.option("value", this._valueOption());
        this._refreshRollers();
        this._updateRollersPosition();
        break;
      default:
        this.callBase(args);
    }
  },
  _clean() {
    this.callBase();
    delete this._$rollersContainer;
  }
});
component_registrator_default("dxDateView", DateView);
var m_date_view_default = DateView;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.date_view.js
var window9 = getWindow();
var DateViewStrategy = m_date_box_strategy_default.inherit({
  NAME: "DateView",
  getDefaultOptions() {
    return extend(this.callBase(), {
      openOnFieldClick: true,
      applyButtonText: message_default.format("OK"),
      "dropDownOptions.showTitle": true
    });
  },
  getDisplayFormat(displayFormat) {
    return displayFormat || m_date_utils_default.FORMATS_MAP[this.dateBox.option("type")];
  },
  popupConfig(config2) {
    return {
      toolbarItems: this.dateBox._popupToolbarItemsConfig(),
      onInitialized: config2.onInitialized,
      defaultOptionsRules: [{
        device: {
          platform: "android"
        },
        options: {
          width: 333,
          height: 331
        }
      }, {
        device(device) {
          var {
            platform
          } = device;
          return "generic" === platform || "ios" === platform;
        },
        options: {
          width: "auto",
          height: "auto"
        }
      }, {
        device(device) {
          var {
            platform
          } = device;
          var {
            phone
          } = device;
          return "generic" === platform && phone;
        },
        options: {
          width: 333,
          maxWidth: "100%",
          maxHeight: "100%",
          height: "auto",
          position: {
            collision: "flipfit flip"
          }
        }
      }, {
        device: {
          platform: "ios",
          phone: true
        },
        options: {
          width: "100%",
          position: {
            my: "bottom",
            at: "bottom",
            of: window9
          }
        }
      }]
    };
  },
  _renderWidget() {
    if (inputType(this.dateBox.option("mode")) && this.dateBox._isNativeType() || this.dateBox.option("readOnly")) {
      if (this._widget) {
        this._widget.$element().remove();
        this._widget = null;
      }
      return;
    }
    var popup = this._getPopup();
    if (this._widget) {
      this._widget.option(this._getWidgetOptions());
    } else {
      var element = renderer_default("<div>").appendTo(popup.$content());
      this._widget = this._createWidget(element);
    }
    this._widget.$element().appendTo(this._getWidgetContainer());
  },
  _getWidgetName: () => m_date_view_default,
  renderOpenedState() {
    this.callBase();
    if (this._widget) {
      this._widget.option("value", this._widget._getCurrentDate());
    }
  },
  _getWidgetOptions() {
    return {
      value: this.dateBoxValue() || /* @__PURE__ */ new Date(),
      type: this.dateBox.option("type"),
      minDate: this.dateBox.dateOption("min") || new Date(1900, 0, 1),
      maxDate: this.dateBox.dateOption("max") || new Date(Date.now() + 50 * m_date_utils_default.ONE_YEAR),
      onDisposing: (function() {
        this._widget = null;
      }).bind(this)
    };
  }
});
var m_date_box_strategy_date_view_default = DateViewStrategy;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.list.js
var window10 = getWindow();
var DATE_FORMAT = "date";
var BOUNDARY_VALUES = {
  min: new Date(0, 0, 0, 0, 0),
  max: new Date(0, 0, 0, 23, 59)
};
var ListStrategy = m_date_box_strategy_default.inherit({
  NAME: "List",
  supportedKeys: () => ({
    space: noop,
    home: noop,
    end: noop
  }),
  getDefaultOptions() {
    return extend(this.callBase(), {
      applyValueMode: "instantly"
    });
  },
  getDisplayFormat: (displayFormat) => displayFormat || "shorttime",
  popupConfig: (popupConfig) => popupConfig,
  getValue() {
    var selectedIndex = this._widget.option("selectedIndex");
    if (-1 === selectedIndex) {
      return this.dateBox.option("value");
    }
    var itemData = this._widgetItems[selectedIndex];
    return this._getDateByItemData(itemData);
  },
  useCurrentDateByDefault: () => true,
  getDefaultDate: () => /* @__PURE__ */ new Date(null),
  popupShowingHandler() {
    this.dateBox._dimensionChanged();
  },
  _renderWidget() {
    this.callBase();
    this._refreshItems();
  },
  _getWidgetName: () => list_light_default,
  _getWidgetOptions() {
    return {
      itemTemplate: this._timeListItemTemplate.bind(this),
      onItemClick: this._listItemClickHandler.bind(this),
      tabIndex: -1,
      onFocusedItemChanged: this._refreshActiveDescendant.bind(this),
      selectionMode: "single"
    };
  },
  _refreshActiveDescendant(e) {
    this.dateBox.setAria("activedescendant", "");
    this.dateBox.setAria("activedescendant", e.actionValue);
  },
  _refreshItems() {
    this._widgetItems = this._getTimeListItems();
    this._widget.option("items", this._widgetItems);
  },
  renderOpenedState() {
    if (!this._widget) {
      return;
    }
    this._widget.option("focusedElement", null);
    this._setSelectedItemsByValue();
    if (this._widget.option("templatesRenderAsynchronously")) {
      this._asyncScrollTimeout = setTimeout(this._scrollToSelectedItem.bind(this));
    } else {
      this._scrollToSelectedItem();
    }
  },
  dispose() {
    this.callBase();
    clearTimeout(this._asyncScrollTimeout);
  },
  _updateValue() {
    if (!this._widget) {
      return;
    }
    this._refreshItems();
    this._setSelectedItemsByValue();
    this._scrollToSelectedItem();
  },
  _setSelectedItemsByValue() {
    var value2 = this.dateBoxValue();
    var dateIndex = this._getDateIndex(value2);
    if (-1 === dateIndex) {
      this._widget.option("selectedItems", []);
    } else {
      this._widget.option("selectedIndex", dateIndex);
    }
  },
  _scrollToSelectedItem() {
    this._widget.scrollToItem(this._widget.option("selectedIndex"));
  },
  _getDateIndex(date) {
    var result2 = -1;
    for (var i = 0, n = this._widgetItems.length; i < n; i++) {
      if (this._areDatesEqual(date, this._widgetItems[i])) {
        result2 = i;
        break;
      }
    }
    return result2;
  },
  _areDatesEqual: (first, second) => isDate(first) && isDate(second) && first.getHours() === second.getHours() && first.getMinutes() === second.getMinutes(),
  _getTimeListItems() {
    var min = this.dateBox.dateOption("min") || this._getBoundaryDate("min");
    var max = this.dateBox.dateOption("max") || this._getBoundaryDate("max");
    var value2 = this.dateBox.dateOption("value") || null;
    var delta = max - min;
    var minutes = min.getMinutes() % this.dateBox.option("interval");
    if (delta < 0) {
      return [];
    }
    if (delta > m_date_utils_default.ONE_DAY) {
      delta = m_date_utils_default.ONE_DAY;
    }
    if (value2 - min < m_date_utils_default.ONE_DAY) {
      return this._getRangeItems(min, new Date(min), delta);
    }
    min = this._getBoundaryDate("min");
    min.setMinutes(minutes);
    if (value2 && Math.abs(value2 - max) < m_date_utils_default.ONE_DAY) {
      delta = (60 * max.getHours() + Math.abs(max.getMinutes() - minutes)) * m_date_utils_default.ONE_MINUTE;
    }
    return this._getRangeItems(min, new Date(min), delta);
  },
  _getRangeItems(startValue, currentValue, rangeDuration) {
    var rangeItems = [];
    var interval = this.dateBox.option("interval");
    while (currentValue - startValue <= rangeDuration) {
      rangeItems.push(new Date(currentValue));
      currentValue.setMinutes(currentValue.getMinutes() + interval);
    }
    return rangeItems;
  },
  _getBoundaryDate(boundary) {
    var boundaryValue = BOUNDARY_VALUES[boundary];
    var currentValue = new Date(ensureDefined(this.dateBox.dateOption("value"), 0));
    return new Date(currentValue.getFullYear(), currentValue.getMonth(), currentValue.getDate(), boundaryValue.getHours(), boundaryValue.getMinutes());
  },
  _timeListItemTemplate(itemData) {
    var displayFormat = this.dateBox.option("displayFormat");
    return date_default.format(itemData, this.getDisplayFormat(displayFormat));
  },
  _listItemClickHandler(e) {
    if ("useButtons" === this.dateBox.option("applyValueMode")) {
      return;
    }
    var date = this._getDateByItemData(e.itemData);
    this.dateBox.option("opened", false);
    this.dateBoxValue(date, e.event);
  },
  _getDateByItemData(itemData) {
    var date = this.dateBox.option("value");
    var hours = itemData.getHours();
    var minutes = itemData.getMinutes();
    var seconds = itemData.getSeconds();
    var year = itemData.getFullYear();
    var month = itemData.getMonth();
    var day = itemData.getDate();
    if (date) {
      if (this.dateBox.option("dateSerializationFormat")) {
        date = date_serialization_default.deserializeDate(date);
      } else {
        date = new Date(date);
      }
      date.setHours(hours);
      date.setMinutes(minutes);
      date.setSeconds(seconds);
      date.setFullYear(year);
      date.setMonth(month);
      date.setDate(day);
    } else {
      date = new Date(year, month, day, hours, minutes, 0, 0);
    }
    return date;
  },
  getKeyboardListener() {
    return this._widget;
  },
  _updatePopupHeight() {
    var dropDownOptionsHeight = getSizeValue(this.dateBox.option("dropDownOptions.height"));
    if (void 0 === dropDownOptionsHeight || "auto" === dropDownOptionsHeight) {
      this.dateBox._setPopupOption("height", "auto");
      var popupHeight = getOuterHeight(this._widget.$element());
      var maxHeight = 0.45 * getHeight(window10);
      this.dateBox._setPopupOption("height", Math.min(popupHeight, maxHeight));
    }
    this.dateBox._timeList && this.dateBox._timeList.updateDimensions();
  },
  getParsedText(text, format2) {
    var value2 = this.callBase(text, format2);
    if (value2) {
      value2 = m_date_utils_default.mergeDates(value2, /* @__PURE__ */ new Date(null), DATE_FORMAT);
    }
    return value2;
  }
});
var m_date_box_strategy_list_default = ListStrategy;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.strategy.native.js
var NativeStrategy2 = m_date_box_strategy_default.inherit({
  NAME: "Native",
  popupConfig: (popupConfig) => extend({}, popupConfig, {
    width: "auto"
  }),
  getParsedText(text) {
    if (!text) {
      return null;
    }
    if ("datetime" === this.dateBox.option("type")) {
      return new Date(text.replace(/-/g, "/").replace("T", " ").split(".")[0]);
    }
    return m_date_utils_default.fromStandardDateFormat(text);
  },
  renderPopupContent: noop,
  _getWidgetName: noop,
  _getWidgetOptions: noop,
  _getDateBoxType() {
    var type2 = this.dateBox.option("type");
    if (!m_date_utils_default.SUPPORTED_FORMATS.includes(type2)) {
      type2 = "date";
    } else if ("datetime" === type2 && !inputType(type2)) {
      type2 = "datetime-local";
    }
    return type2;
  },
  customizeButtons() {
    var dropDownButton = this.dateBox.getButton("dropDown");
    if (devices_default.real().android && dropDownButton) {
      dropDownButton.on("click", () => {
        this.dateBox._input().get(0).click();
      });
    }
  },
  getDefaultOptions() {
    return {
      mode: this._getDateBoxType()
    };
  },
  getDisplayFormat(displayFormat) {
    var type2 = this._getDateBoxType();
    return displayFormat || m_date_utils_default.FORMATS_MAP[type2];
  },
  renderInputMinMax($input) {
    $input.attr({
      min: date_serialization_default.serializeDate(this.dateBox.dateOption("min"), "yyyy-MM-dd"),
      max: date_serialization_default.serializeDate(this.dateBox.dateOption("max"), "yyyy-MM-dd")
    });
  }
});
var m_date_box_strategy_native_default = NativeStrategy2;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.base.js
var window11 = getWindow();
var DATEBOX_CLASS = "dx-datebox";
var DX_AUTO_WIDTH_CLASS = "dx-auto-width";
var DX_INVALID_BADGE_CLASS2 = "dx-show-invalid-badge";
var DX_CLEAR_BUTTON_CLASS = "dx-clear-button-area";
var DATEBOX_WRAPPER_CLASS = "dx-datebox-wrapper";
var DROPDOWNEDITOR_OVERLAY_CLASS = "dx-dropdowneditor-overlay";
var PICKER_TYPE = {
  calendar: "calendar",
  rollers: "rollers",
  list: "list",
  native: "native"
};
var TYPE2 = {
  date: "date",
  datetime: "datetime",
  time: "time"
};
var STRATEGY_NAME = {
  calendar: "Calendar",
  dateView: "DateView",
  native: "Native",
  calendarWithTime: "CalendarWithTime",
  list: "List"
};
var STRATEGY_CLASSES = {
  Calendar: m_date_box_strategy_calendar_default,
  DateView: m_date_box_strategy_date_view_default,
  Native: m_date_box_strategy_native_default,
  CalendarWithTime: m_date_box_strategy_calendar_with_time_default,
  List: m_date_box_strategy_list_default
};
var DateBox = m_drop_down_editor_default.inherit({
  _supportedKeys() {
    return extend(this.callBase(), this._strategy.supportedKeys());
  },
  _renderButtonContainers() {
    this.callBase.apply(this, arguments);
    this._strategy.customizeButtons();
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      type: "date",
      showAnalogClock: true,
      value: null,
      dateSerializationFormat: void 0,
      min: void 0,
      max: void 0,
      displayFormat: null,
      interval: 30,
      disabledDates: null,
      pickerType: PICKER_TYPE.calendar,
      invalidDateMessage: message_default.format("dxDateBox-validation-datetime"),
      dateOutOfRangeMessage: message_default.format("validation-range"),
      applyButtonText: message_default.format("OK"),
      adaptivityEnabled: false,
      calendarOptions: {},
      useHiddenSubmitElement: true,
      _showValidationIcon: true
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: {
        platform: "ios"
      },
      options: {
        "dropDownOptions.showTitle": true
      }
    }, {
      device: {
        platform: "android"
      },
      options: {
        buttonsLocation: "bottom after"
      }
    }, {
      device() {
        var realDevice2 = devices_default.real();
        var {
          platform
        } = realDevice2;
        return "ios" === platform || "android" === platform;
      },
      options: {
        pickerType: PICKER_TYPE.native
      }
    }, {
      device: {
        platform: "generic",
        deviceType: "desktop"
      },
      options: {
        buttonsLocation: "bottom after"
      }
    }]);
  },
  _initOptions(options2) {
    this._userOptions = extend({}, options2);
    this.callBase(options2);
    this._updatePickerOptions();
  },
  _updatePickerOptions() {
    var pickerType = this.option("pickerType");
    var type2 = this.option("type");
    if (pickerType === PICKER_TYPE.list && (type2 === TYPE2.datetime || type2 === TYPE2.date)) {
      pickerType = PICKER_TYPE.calendar;
    }
    if (type2 === TYPE2.time && pickerType === PICKER_TYPE.calendar) {
      pickerType = PICKER_TYPE.list;
    }
    this._pickerType = pickerType;
    this._setShowDropDownButtonOption();
  },
  _setShowDropDownButtonOption() {
    var {
      platform
    } = devices_default.real();
    var isMozillaOnAndroid = "android" === platform && browser_default.mozilla;
    var isNativePickerType = this._isNativeType();
    var showDropDownButton = "generic" !== platform || !isNativePickerType;
    if (isNativePickerType && isMozillaOnAndroid) {
      showDropDownButton = false;
    }
    this.option({
      showDropDownButton
    });
  },
  _init() {
    this._initStrategy();
    this.option(extend({}, this._strategy.getDefaultOptions(), this._userOptions));
    delete this._userOptions;
    this.callBase();
  },
  _toLowerCaseFirstLetter: (string3) => string3.charAt(0).toLowerCase() + string3.substr(1),
  _initStrategy() {
    var strategyName = this._getStrategyName(this._getFormatType());
    var strategy = STRATEGY_CLASSES[strategyName];
    if (!(this._strategy && this._strategy.NAME === strategyName)) {
      this._strategy = new strategy(this);
    }
  },
  _getFormatType() {
    var currentType = this.option("type");
    var isTime = /h|m|s/g.test(currentType);
    var isDate2 = /d|M|Y/g.test(currentType);
    var type2 = "";
    if (isDate2) {
      type2 += TYPE2.date;
    }
    if (isTime) {
      type2 += TYPE2.time;
    }
    return type2;
  },
  _getStrategyName(type2) {
    var pickerType = this._pickerType;
    if (pickerType === PICKER_TYPE.rollers) {
      return STRATEGY_NAME.dateView;
    }
    if (pickerType === PICKER_TYPE.native) {
      return STRATEGY_NAME.native;
    }
    if (type2 === TYPE2.date) {
      return STRATEGY_NAME.calendar;
    }
    if (type2 === TYPE2.datetime) {
      return STRATEGY_NAME.calendarWithTime;
    }
    return STRATEGY_NAME.list;
  },
  _initMarkup() {
    this.$element().addClass(DATEBOX_CLASS);
    this.callBase();
    this._refreshFormatClass();
    this._refreshPickerTypeClass();
    this._strategy.renderInputMinMax(this._input());
  },
  _render() {
    this.callBase();
    this._formatValidationIcon();
  },
  _renderDimensions() {
    this.callBase();
    this.$element().toggleClass(DX_AUTO_WIDTH_CLASS, !this.option("width"));
    this._updatePopupWidth();
    this._updatePopupHeight();
  },
  _dimensionChanged() {
    this.callBase();
    this._updatePopupHeight();
  },
  _updatePopupHeight() {
    var _a, _b;
    if (this._popup) {
      null === (_b = (_a = this._strategy)._updatePopupHeight) || void 0 === _b ? void 0 : _b.call(_a);
    }
  },
  _refreshFormatClass() {
    var $element = this.$element();
    each(TYPE2, (_, item) => {
      $element.removeClass("".concat(DATEBOX_CLASS, "-").concat(item));
    });
    $element.addClass("".concat(DATEBOX_CLASS, "-").concat(this.option("type")));
  },
  _refreshPickerTypeClass() {
    var $element = this.$element();
    each(PICKER_TYPE, (_, item) => {
      $element.removeClass("".concat(DATEBOX_CLASS, "-").concat(item));
    });
    $element.addClass("".concat(DATEBOX_CLASS, "-").concat(this._pickerType));
  },
  _formatValidationIcon() {
    if (!hasWindow()) {
      return;
    }
    var inputElement = this._input().get(0);
    var isRtlEnabled = this.option("rtlEnabled");
    var clearButtonWidth = this._getClearButtonWidth();
    var longestElementDimensions = this._getLongestElementDimensions();
    var curWidth = parseFloat(window11.getComputedStyle(inputElement).width) - clearButtonWidth;
    var shouldHideValidationIcon = longestElementDimensions.width > curWidth;
    var {
      style
    } = inputElement;
    this.$element().toggleClass(DX_INVALID_BADGE_CLASS2, !shouldHideValidationIcon && this.option("_showValidationIcon"));
    if (shouldHideValidationIcon) {
      if (void 0 === this._storedPadding) {
        this._storedPadding = isRtlEnabled ? longestElementDimensions.leftPadding : longestElementDimensions.rightPadding;
      }
      isRtlEnabled ? style.paddingLeft = 0 : style.paddingRight = 0;
    } else {
      isRtlEnabled ? style.paddingLeft = "".concat(this._storedPadding, "px") : style.paddingRight = "".concat(this._storedPadding, "px");
    }
  },
  _getClearButtonWidth() {
    var clearButtonWidth = 0;
    if (this._isClearButtonVisible() && "" === this._input().val()) {
      var clearButtonElement = this.$element().find(".".concat(DX_CLEAR_BUTTON_CLASS)).get(0);
      clearButtonWidth = parseFloat(window11.getComputedStyle(clearButtonElement).width);
    }
    return clearButtonWidth;
  },
  _getLongestElementDimensions() {
    var format2 = this._strategy.getDisplayFormat(this.option("displayFormat"));
    var longestValue = date_default.format(m_date_utils_default.getLongestDate(format2, date_default.getMonthNames(), date_default.getDayNames()), format2);
    var $input = this._input();
    var inputElement = $input.get(0);
    var $longestValueElement = createTextElementHiddenCopy($input, longestValue);
    var isPaddingStored = void 0 !== this._storedPadding;
    var storedPadding = !isPaddingStored ? 0 : this._storedPadding;
    $longestValueElement.appendTo(this.$element());
    var elementWidth = parseFloat(window11.getComputedStyle($longestValueElement.get(0)).width);
    var rightPadding = parseFloat(window11.getComputedStyle(inputElement).paddingRight);
    var leftPadding = parseFloat(window11.getComputedStyle(inputElement).paddingLeft);
    var necessaryWidth = elementWidth + leftPadding + rightPadding + storedPadding;
    $longestValueElement.remove();
    return {
      width: necessaryWidth,
      leftPadding,
      rightPadding
    };
  },
  _getKeyboardListeners() {
    return this.callBase().concat([this._strategy && this._strategy.getKeyboardListener()]);
  },
  _renderPopup() {
    this.callBase();
    this._popup.$wrapper().addClass(DATEBOX_WRAPPER_CLASS);
    this._renderPopupWrapper();
  },
  _getPopupToolbarItems() {
    var _a, _b, _c;
    var defaultItems = this.callBase();
    return null !== (_c = null === (_b = (_a = this._strategy)._getPopupToolbarItems) || void 0 === _b ? void 0 : _b.call(_a, defaultItems)) && void 0 !== _c ? _c : defaultItems;
  },
  _popupConfig() {
    var popupConfig = this.callBase();
    return extend(this._strategy.popupConfig(popupConfig), {
      title: this._getPopupTitle(),
      dragEnabled: false
    });
  },
  _renderPopupWrapper() {
    if (!this._popup) {
      return;
    }
    var $element = this.$element();
    var classPostfixes = extend({}, TYPE2, PICKER_TYPE);
    each(classPostfixes, (_, item) => {
      $element.removeClass("".concat(DATEBOX_WRAPPER_CLASS, "-").concat(item));
    });
    this._popup.$wrapper().addClass("".concat(DATEBOX_WRAPPER_CLASS, "-").concat(this.option("type"))).addClass("".concat(DATEBOX_WRAPPER_CLASS, "-").concat(this._pickerType)).addClass(DROPDOWNEDITOR_OVERLAY_CLASS);
  },
  _renderPopupContent() {
    this.callBase();
    this._strategy.renderPopupContent();
  },
  _popupShowingHandler() {
    this.callBase();
    this._strategy.popupShowingHandler();
  },
  _popupShownHandler() {
    this.callBase();
    this._strategy.renderOpenedState();
  },
  _popupHiddenHandler() {
    this.callBase();
    this._strategy.renderOpenedState();
    this._strategy.popupHiddenHandler();
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._formatValidationIcon();
    }
  },
  _clearValueHandler(e) {
    this.option("text", "");
    this.callBase(e);
  },
  _readOnlyPropValue() {
    if (this._pickerType === PICKER_TYPE.rollers) {
      return true;
    }
    var {
      platform
    } = devices_default.real();
    var isCustomValueDisabled = this._isNativeType() && ("ios" === platform || "android" === platform);
    if (isCustomValueDisabled) {
      return this.option("readOnly");
    }
    return this.callBase();
  },
  _isClearButtonVisible() {
    return this.callBase() && !this._isNativeType();
  },
  _renderValue() {
    var value2 = this.dateOption("value");
    this.option("text", this._getDisplayedText(value2));
    this._strategy.renderValue();
    return this.callBase();
  },
  _setSubmitValue() {
    var value2 = this.dateOption("value");
    var dateSerializationFormat = this.option("dateSerializationFormat");
    var submitFormat = m_date_utils_default.SUBMIT_FORMATS_MAP[this.option("type")];
    var submitValue = dateSerializationFormat ? date_serialization_default.serializeDate(value2, dateSerializationFormat) : m_date_utils_default.toStandardDateFormat(value2, submitFormat);
    this._getSubmitElement().val(submitValue);
  },
  _getDisplayedText(value2) {
    var mode = this.option("mode");
    var displayedText;
    if ("text" === mode) {
      var displayFormat = this._strategy.getDisplayFormat(this.option("displayFormat"));
      displayedText = date_default.format(value2, displayFormat);
    } else {
      var format2 = this._getFormatByMode(mode);
      if (format2) {
        displayedText = date_default.format(value2, format2);
      } else {
        displayedText = m_date_utils_default.toStandardDateFormat(value2, mode);
      }
    }
    return displayedText;
  },
  _getFormatByMode: (mode) => inputType(mode) ? null : m_date_utils_default.FORMATS_MAP[mode],
  _valueChangeEventHandler(e) {
    var {
      text,
      type: type2,
      validationError
    } = this.option();
    var currentValue = this.dateOption("value");
    if (text === this._getDisplayedText(currentValue)) {
      this._recallInternalValidation(currentValue, validationError);
      return;
    }
    var parsedDate = this._getParsedDate(text);
    var value2 = null !== currentValue && void 0 !== currentValue ? currentValue : this._getDateByDefault();
    var newValue = m_date_utils_default.mergeDates(value2, parsedDate, type2);
    var date = parsedDate && "time" === type2 ? newValue : parsedDate;
    if (this._applyInternalValidation(date).isValid) {
      var displayedText = this._getDisplayedText(newValue);
      if (value2 && newValue && value2.getTime() === newValue.getTime() && displayedText !== text) {
        this._renderValue();
      } else {
        this.dateValue(newValue, e);
      }
    }
  },
  _recallInternalValidation(value2, validationError) {
    if (!validationError || validationError.editorSpecific) {
      this._applyInternalValidation(value2);
      this._applyCustomValidation(value2);
    }
  },
  _getDateByDefault() {
    return this._strategy.useCurrentDateByDefault() && this._strategy.getDefaultDate();
  },
  _getParsedDate(text) {
    var displayFormat = this._strategy.getDisplayFormat(this.option("displayFormat"));
    var parsedText = this._strategy.getParsedText(text, displayFormat);
    return null !== parsedText && void 0 !== parsedText ? parsedText : void 0;
  },
  _applyInternalValidation(value2) {
    var text = this.option("text");
    var hasText = !!text && null !== value2;
    var isDate2 = !!value2 && isDate(value2) && !isNaN(value2.getTime());
    var isDateInRange = isDate2 && date_default2.dateInRange(value2, this.dateOption("min"), this.dateOption("max"), this.option("type"));
    var isValid = !hasText && !value2 || isDateInRange;
    var validationMessage = "";
    if (!isDate2) {
      validationMessage = this.option("invalidDateMessage");
    } else if (!isDateInRange) {
      validationMessage = this.option("dateOutOfRangeMessage");
    }
    this._updateInternalValidationState(isValid, validationMessage);
    return {
      isValid,
      isDate: isDate2
    };
  },
  _updateInternalValidationState(isValid, validationMessage) {
    this.option({
      isValid,
      validationError: isValid ? null : {
        editorSpecific: true,
        message: validationMessage
      }
    });
  },
  _applyCustomValidation(value2) {
    this.validationRequest.fire({
      editor: this,
      value: this._serializeDate(value2)
    });
  },
  _isValueChanged(newValue) {
    var oldValue = this.dateOption("value");
    var oldTime = oldValue && oldValue.getTime();
    var newTime = newValue && newValue.getTime();
    return oldTime !== newTime;
  },
  _isTextChanged(newValue) {
    var oldText = this.option("text");
    var newText = newValue && this._getDisplayedText(newValue) || "";
    return oldText !== newText;
  },
  _renderProps() {
    this.callBase();
    this._input().attr("autocomplete", "off");
  },
  _renderOpenedState() {
    if (!this._isNativeType()) {
      this.callBase();
    }
    if (this._strategy.isAdaptivityChanged()) {
      this._refreshStrategy();
    }
  },
  _getPopupTitle() {
    var placeholder = this.option("placeholder");
    if (placeholder) {
      return placeholder;
    }
    var type2 = this.option("type");
    if (type2 === TYPE2.time) {
      return message_default.format("dxDateBox-simulatedDataPickerTitleTime");
    }
    if (type2 === TYPE2.date || type2 === TYPE2.datetime) {
      return message_default.format("dxDateBox-simulatedDataPickerTitleDate");
    }
    return "";
  },
  _refreshStrategy() {
    this._strategy.dispose();
    this._initStrategy();
    this.option(this._strategy.getDefaultOptions());
    this._refresh();
  },
  _applyButtonHandler(e) {
    var value2 = this._strategy.getValue();
    this.dateValue(value2, e.event);
    this.callBase();
  },
  _dispose() {
    var _a;
    this.callBase();
    null === (_a = this._strategy) || void 0 === _a ? void 0 : _a.dispose();
  },
  _isNativeType() {
    return this._pickerType === PICKER_TYPE.native;
  },
  _updatePopupTitle() {
    var _a;
    null === (_a = this._popup) || void 0 === _a ? void 0 : _a.option("title", this._getPopupTitle());
  },
  _optionChanged(args) {
    switch (args.name) {
      case "showClearButton":
      case "buttons":
        this.callBase.apply(this, arguments);
        this._formatValidationIcon();
        break;
      case "pickerType":
        this._updatePickerOptions({
          pickerType: args.value
        });
        this._refreshStrategy();
        this._refreshPickerTypeClass();
        this._invalidate();
        break;
      case "type":
        this._updatePickerOptions({
          format: args.value
        });
        this._refreshStrategy();
        this._refreshFormatClass();
        this._renderPopupWrapper();
        this._formatValidationIcon();
        this._updateValue();
        break;
      case "placeholder":
        this.callBase.apply(this, arguments);
        this._updatePopupTitle();
        break;
      case "min":
      case "max":
        var isValid = this.option("isValid");
        this._applyInternalValidation(this.dateOption("value"));
        if (!isValid) {
          this._applyCustomValidation(this.dateOption("value"));
        }
        this._invalidate();
        break;
      case "dateSerializationFormat":
      case "interval":
      case "disabledDates":
      case "calendarOptions":
        this._invalidate();
        break;
      case "displayFormat":
        this.option("text", this._getDisplayedText(this.dateOption("value")));
        this._renderInputValue();
        break;
      case "text":
        this._strategy.textChangedHandler(args.value);
        this.callBase.apply(this, arguments);
        break;
      case "isValid":
        this.callBase.apply(this, arguments);
        this._formatValidationIcon();
        break;
      case "showDropDownButton":
        this._formatValidationIcon();
        this.callBase.apply(this, arguments);
        break;
      case "readOnly":
        this.callBase.apply(this, arguments);
        this._formatValidationIcon();
        break;
      case "todayButtonText":
        this._setPopupOption("toolbarItems", this._getPopupToolbarItems());
        break;
      case "invalidDateMessage":
      case "dateOutOfRangeMessage":
      case "adaptivityEnabled":
      case "showAnalogClock":
      case "_showValidationIcon":
        break;
      default:
        this.callBase.apply(this, arguments);
    }
  },
  _getSerializationFormat() {
    var value2 = this.option("value");
    if (this.option("dateSerializationFormat") && config_default().forceIsoDateParsing) {
      return this.option("dateSerializationFormat");
    }
    if (isNumeric(value2)) {
      return "number";
    }
    if (!isString(value2)) {
      return;
    }
    return date_serialization_default.getDateSerializationFormat(value2);
  },
  _updateValue(value2) {
    this.callBase();
    this._applyInternalValidation(null !== value2 && void 0 !== value2 ? value2 : this.dateOption("value"));
  },
  dateValue(value2, dxEvent) {
    var isValueChanged = this._isValueChanged(value2);
    if (isValueChanged && dxEvent) {
      this._saveValueChangeEvent(dxEvent);
    }
    if (!isValueChanged) {
      if (this._isTextChanged(value2)) {
        this._updateValue(value2);
      } else if ("" === this.option("text")) {
        this._applyCustomValidation(value2);
      }
    }
    return this.dateOption("value", value2);
  },
  dateOption(optionName, value2) {
    if (1 === arguments.length) {
      return date_serialization_default.deserializeDate(this.option(optionName));
    }
    this.option(optionName, this._serializeDate(value2));
  },
  _serializeDate(date) {
    var serializationFormat = this._getSerializationFormat();
    return date_serialization_default.serializeDate(date, serializationFormat);
  },
  _clearValue() {
    var value2 = this.option("value");
    this.callBase();
    if (null === value2) {
      this._applyCustomValidation(null);
    }
  },
  clear() {
    var value2 = this.option("value");
    this.callBase();
    if (null === value2) {
      this._applyInternalValidation(null);
    }
  }
});
var m_date_box_base_default = DateBox;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.mask.parts.js
var monthGetter = (date) => date.getMonth() + 1;
var monthSetter = (date, value2) => {
  var day = date.getDate();
  var monthLimits = getLimits("M", date);
  var newValue = fitIntoRange(parseInt(value2), monthLimits.min, monthLimits.max);
  date.setMonth(newValue - 1, 1);
  var {
    min,
    max
  } = getLimits("dM", date);
  var newDay = fitIntoRange(day, min, max);
  date.setDate(newDay);
};
var PATTERN_GETTERS = {
  a: (date) => date.getHours() < 12 ? 0 : 1,
  E: "getDay",
  y: "getFullYear",
  M: monthGetter,
  L: monthGetter,
  d: "getDate",
  H: "getHours",
  h: "getHours",
  m: "getMinutes",
  s: "getSeconds",
  S: "getMilliseconds",
  x: "getTimezoneOffset"
};
var PATTERN_SETTERS = extend({}, getPatternSetters(), {
  a: (date, value2) => {
    var hours = date.getHours();
    var current2 = hours >= 12;
    if (current2 === !!parseInt(value2)) {
      return;
    }
    date.setHours((hours + 12) % 24);
  },
  d: (date, value2) => {
    var lastDayInMonth = getLimits("dM", date).max;
    if (value2 > lastDayInMonth) {
      date.setMonth(date.getMonth() + 1);
    }
    date.setDate(value2);
  },
  h: (date, value2) => {
    var isPM = date.getHours() >= 12;
    date.setHours(+value2 % 12 + (isPM ? 12 : 0));
  },
  M: monthSetter,
  L: monthSetter,
  E: (date, value2) => {
    if (value2 < 0) {
      return;
    }
    date.setDate(date.getDate() - date.getDay() + parseInt(value2));
  },
  y: (date, value2) => {
    var currentYear = date.getFullYear();
    var valueLength = String(value2).length;
    var maxLimitLength = String(getLimits("y", date).max).length;
    var newValue = parseInt(String(currentYear).substr(0, maxLimitLength - valueLength) + value2);
    date.setFullYear(newValue);
  },
  x: (date) => date
});
var getPatternGetter = (patternChar) => PATTERN_GETTERS[patternChar] || (() => patternChar);
var renderDateParts = (text, regExpInfo) => {
  var result2 = regExpInfo.regexp.exec(text);
  var start = 0;
  var end = 0;
  var sections = [];
  var _loop = function() {
    start = end;
    end = start + result2[i].length;
    var pattern = regExpInfo.patterns[i - 1].replace(/^'|'$/g, "");
    var getter = getPatternGetter(pattern[0]);
    sections.push({
      index: i - 1,
      isStub: pattern === result2[i],
      caret: {
        start,
        end
      },
      pattern,
      text: result2[i],
      limits: function() {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        return getLimits(pattern[0], ...args);
      },
      setter: PATTERN_SETTERS[pattern[0]] || noop,
      getter
    });
  };
  for (var i = 1; i < result2.length; i++) {
    _loop();
  }
  return sections;
};
var getLimits = (pattern, date, forcedPattern) => {
  var limits = {
    y: {
      min: 0,
      max: 9999
    },
    M: {
      min: 1,
      max: 12
    },
    L: {
      min: 1,
      max: 12
    },
    d: {
      min: 1,
      max: 31
    },
    dM: {
      min: 1,
      max: new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate()
    },
    E: {
      min: 0,
      max: 6
    },
    H: {
      min: 0,
      max: 23
    },
    h: {
      min: 1,
      max: 12
    },
    m: {
      min: 0,
      max: 59
    },
    s: {
      min: 0,
      max: 59
    },
    S: {
      min: 0,
      max: 999
    },
    a: {
      min: 0,
      max: 1
    },
    x: {
      min: 0,
      max: 0
    }
  };
  return limits[forcedPattern || pattern] || limits.getAmPm;
};
var getDatePartIndexByPosition = (dateParts, position2) => {
  for (var i = 0; i < dateParts.length; i++) {
    var caretInGroup = dateParts[i].caret.end >= position2;
    if (!dateParts[i].isStub && caretInGroup) {
      return i;
    }
  }
  return null;
};

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.mask.js
var MASK_EVENT_NAMESPACE2 = "dateBoxMask";
var FORWARD = 1;
var BACKWARD = -1;
var DateBoxMask = m_date_box_base_default.inherit({
  _supportedKeys(e) {
    var originalHandlers = this.callBase(e);
    var callOriginalHandler = (e2) => {
      var originalHandler = originalHandlers[normalizeKeyName(e2)];
      return originalHandler && originalHandler.apply(this, [e2]);
    };
    var applyHandler = (e2, maskHandler) => {
      if (this._shouldUseOriginalHandler(e2)) {
        return callOriginalHandler.apply(this, [e2]);
      }
      return maskHandler.apply(this, [e2]);
    };
    return extend({}, originalHandlers, {
      del: (e2) => applyHandler(e2, (event) => {
        this._revertPart(FORWARD);
        this._isAllSelected() || event.preventDefault();
      }),
      backspace: (e2) => applyHandler(e2, (event) => {
        this._revertPart(BACKWARD);
        this._isAllSelected() || event.preventDefault();
      }),
      home: (e2) => applyHandler(e2, (event) => {
        this._selectFirstPart();
        event.preventDefault();
      }),
      end: (e2) => applyHandler(e2, (event) => {
        this._selectLastPart();
        event.preventDefault();
      }),
      escape: (e2) => applyHandler(e2, (event) => {
        this._revertChanges(event);
      }),
      enter: (e2) => applyHandler(e2, () => {
        this._enterHandler();
      }),
      leftArrow: (e2) => applyHandler(e2, (event) => {
        this._selectNextPart(BACKWARD);
        event.preventDefault();
      }),
      rightArrow: (e2) => applyHandler(e2, (event) => {
        this._selectNextPart(FORWARD);
        event.preventDefault();
      }),
      upArrow: (e2) => applyHandler(e2, (event) => {
        this._upDownArrowHandler(FORWARD);
        event.preventDefault();
      }),
      downArrow: (e2) => applyHandler(e2, (event) => {
        this._upDownArrowHandler(BACKWARD);
        event.preventDefault();
      })
    });
  },
  _shouldUseOriginalHandler(e) {
    var isNotDeletingInCalendar = this.option("opened") && e && !["backspace", "del"].includes(normalizeKeyName(e));
    return !this._useMaskBehavior() || isNotDeletingInCalendar || e && e.altKey;
  },
  _upDownArrowHandler(step) {
    this._setNewDateIfEmpty();
    var originalValue = this._getActivePartValue(this._initialMaskValue);
    var currentValue = this._getActivePartValue();
    var delta = currentValue - originalValue;
    this._loadMaskValue(this._initialMaskValue);
    this._changePartValue(delta + step, true);
  },
  _changePartValue(step, lockOtherParts) {
    var activePartPattern = this._getActivePartProp("pattern");
    var isAmPmPartActive = /^a{1,5}$/.test(activePartPattern);
    if (isAmPmPartActive) {
      this._toggleAmPm();
    } else {
      this._partIncrease(step, lockOtherParts);
    }
  },
  _toggleAmPm() {
    var currentValue = this._getActivePartProp("text");
    var indexOfCurrentValue = default_date_names_default.getPeriodNames().indexOf(currentValue);
    var newValue = 1 ^ indexOfCurrentValue;
    this._setActivePartValue(newValue);
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      useMaskBehavior: false,
      emptyDateValue: new Date(2e3, 0, 1, 0, 0, 0)
    });
  },
  _isSingleCharKey(_ref) {
    var {
      originalEvent,
      alt
    } = _ref;
    var key = originalEvent.data || originalEvent.key;
    return "string" === typeof key && 1 === key.length && !alt && !isCommandKeyPressed(originalEvent);
  },
  _isSingleDigitKey(e) {
    var _a;
    var data17 = null === (_a = e.originalEvent) || void 0 === _a ? void 0 : _a.data;
    return 1 === (null === data17 || void 0 === data17 ? void 0 : data17.length) && parseInt(data17, 10);
  },
  _useBeforeInputEvent: () => devices_default.real().android,
  _keyInputHandler(e, key) {
    var oldInputValue = this._input().val();
    this._processInputKey(key);
    e.preventDefault();
    var isValueChanged = oldInputValue !== this._input().val();
    isValueChanged && events_engine_default.trigger(this._input(), "input");
  },
  _keyboardHandler(e) {
    var {
      key
    } = e.originalEvent;
    var result2 = this.callBase(e);
    if (!this._useMaskBehavior() || this._useBeforeInputEvent()) {
      return result2;
    }
    if (browser_default.chrome && "Process" === e.key && 0 === e.code.indexOf("Digit")) {
      key = e.code.replace("Digit", "");
      this._processInputKey(key);
      this._maskInputHandler = () => {
        this._renderSelectedPart();
      };
    } else if (this._isSingleCharKey(e)) {
      this._keyInputHandler(e.originalEvent, key);
    }
    return result2;
  },
  _maskBeforeInputHandler(e) {
    this._maskInputHandler = null;
    var {
      inputType: inputType2
    } = e.originalEvent;
    if ("insertCompositionText" === inputType2) {
      this._maskInputHandler = () => {
        this._renderSelectedPart();
      };
    }
    var isBackwardDeletion = "deleteContentBackward" === inputType2;
    var isForwardDeletion = "deleteContentForward" === inputType2;
    if (isBackwardDeletion || isForwardDeletion) {
      var direction = isBackwardDeletion ? BACKWARD : FORWARD;
      this._maskInputHandler = () => {
        this._revertPart();
        this._selectNextPart(direction);
      };
    }
    if (!this._useMaskBehavior() || !this._isSingleCharKey(e)) {
      return;
    }
    var key = e.originalEvent.data;
    this._keyInputHandler(e, key);
    return true;
  },
  _keyPressHandler(e) {
    var {
      originalEvent: event
    } = e;
    if ("insertCompositionText" === (null === event || void 0 === event ? void 0 : event.inputType) && this._isSingleDigitKey(e)) {
      this._processInputKey(event.data);
      this._renderDisplayText(this._getDisplayedText(this._maskValue));
      this._selectNextPart();
    }
    this.callBase(e);
    if (this._maskInputHandler) {
      this._maskInputHandler();
      this._maskInputHandler = null;
    }
  },
  _processInputKey(key) {
    if (this._isAllSelected()) {
      this._activePartIndex = 0;
    }
    this._setNewDateIfEmpty();
    if (isNaN(parseInt(key))) {
      this._searchString(key);
    } else {
      this._searchNumber(key);
    }
  },
  _isAllSelected() {
    var caret3 = this._caret();
    return caret3.end - caret3.start === this.option("text").length;
  },
  _getFormatPattern() {
    if (this._formatPattern) {
      return this._formatPattern;
    }
    var format2 = this._strategy.getDisplayFormat(this.option("displayFormat"));
    var isLDMLPattern = isString(format2) && !date_default._getPatternByFormat(format2);
    if (isLDMLPattern) {
      this._formatPattern = format2;
    } else {
      this._formatPattern = getFormat2((value2) => date_default.format(value2, format2));
    }
    return this._formatPattern;
  },
  _setNewDateIfEmpty() {
    if (!this._maskValue) {
      var value2 = "time" === this.option("type") ? /* @__PURE__ */ new Date(null) : /* @__PURE__ */ new Date();
      this._maskValue = value2;
      this._initialMaskValue = value2;
      this._renderDateParts();
    }
  },
  _partLimitsReached(max) {
    var maxLimitLength = String(max).length;
    var formatLength = this._getActivePartProp("pattern").length;
    var isShortFormat = 1 === formatLength;
    var maxSearchLength = isShortFormat ? maxLimitLength : Math.min(formatLength, maxLimitLength);
    var isLengthExceeded = this._searchValue.length === maxSearchLength;
    var isValueOverflowed = parseInt("".concat(this._searchValue, "0")) > max;
    return isLengthExceeded || isValueOverflowed;
  },
  _searchNumber(char) {
    var {
      max
    } = this._getActivePartLimits();
    var maxLimitLength = String(max).length;
    this._searchValue = (this._searchValue + char).substr(-maxLimitLength);
    if (isNaN(this._searchValue)) {
      this._searchValue = char;
    }
    this._setActivePartValue(this._searchValue);
    if (this._partLimitsReached(max)) {
      this._selectNextPart(FORWARD);
    }
  },
  _searchString(char) {
    if (!isNaN(parseInt(this._getActivePartProp("text")))) {
      return;
    }
    var limits = this._getActivePartProp("limits")(this._maskValue);
    var startString = this._searchValue + char.toLowerCase();
    var endLimit = limits.max - limits.min;
    for (var i = 0; i <= endLimit; i++) {
      this._loadMaskValue(this._initialMaskValue);
      this._changePartValue(i + 1);
      if (0 === this._getActivePartProp("text").toLowerCase().indexOf(startString)) {
        this._searchValue = startString;
        return;
      }
    }
    this._setNewDateIfEmpty();
    if (this._searchValue) {
      this._clearSearchValue();
      this._searchString(char);
    }
  },
  _clearSearchValue() {
    this._searchValue = "";
  },
  _revertPart(direction) {
    if (!this._isAllSelected()) {
      var actual = this._getActivePartValue(this.option("emptyDateValue"));
      this._setActivePartValue(actual);
      this._selectNextPart(direction);
    }
    this._clearSearchValue();
  },
  _useMaskBehavior() {
    return this.option("useMaskBehavior") && "text" === this.option("mode");
  },
  _prepareRegExpInfo() {
    this._regExpInfo = getRegExpInfo(this._getFormatPattern(), date_default);
    var {
      regexp
    } = this._regExpInfo;
    var {
      source
    } = regexp;
    var {
      flags
    } = regexp;
    var quantifierRegexp = new RegExp(/(\{[0-9]+,?[0-9]*\})/);
    var convertedSource = source.split(quantifierRegexp).map((sourcePart) => quantifierRegexp.test(sourcePart) ? sourcePart : number_default.convertDigits(sourcePart, false)).join("");
    this._regExpInfo.regexp = new RegExp(convertedSource, flags);
  },
  _initMaskState() {
    this._activePartIndex = 0;
    this._formatPattern = null;
    this._prepareRegExpInfo();
    this._loadMaskValue();
  },
  _renderMask() {
    this.callBase();
    this._detachMaskEvents();
    this._clearMaskState();
    if (this._useMaskBehavior()) {
      this._attachMaskEvents();
      this._initMaskState();
      this._renderDateParts();
    }
  },
  _renderDateParts() {
    if (!this._useMaskBehavior()) {
      return;
    }
    var text = this.option("text") || this._getDisplayedText(this._maskValue);
    if (text) {
      this._dateParts = renderDateParts(text, this._regExpInfo);
      if (!this._input().is(":hidden")) {
        this._selectNextPart();
      }
    }
  },
  _detachMaskEvents() {
    events_engine_default.off(this._input(), ".".concat(MASK_EVENT_NAMESPACE2));
  },
  _attachMaskEvents() {
    events_engine_default.on(this._input(), addNamespace("dxclick", MASK_EVENT_NAMESPACE2), this._maskClickHandler.bind(this));
    events_engine_default.on(this._input(), addNamespace("paste", MASK_EVENT_NAMESPACE2), this._maskPasteHandler.bind(this));
    events_engine_default.on(this._input(), addNamespace("drop", MASK_EVENT_NAMESPACE2), () => {
      this._renderSelectedPart();
    });
    events_engine_default.on(this._input(), addNamespace("compositionend", MASK_EVENT_NAMESPACE2), this._maskCompositionEndHandler.bind(this));
    if (this._useBeforeInputEvent()) {
      events_engine_default.on(this._input(), addNamespace("beforeinput", MASK_EVENT_NAMESPACE2), this._maskBeforeInputHandler.bind(this));
    }
  },
  _renderSelectedPart() {
    this._renderDisplayText(this._getDisplayedText(this._maskValue));
    this._selectNextPart();
  },
  _selectLastPart() {
    if (this.option("text")) {
      this._activePartIndex = this._dateParts.length;
      this._selectNextPart(BACKWARD);
    }
  },
  _selectFirstPart() {
    if (this.option("text")) {
      this._activePartIndex = -1;
      this._selectNextPart(FORWARD);
    }
  },
  _onMouseWheel(e) {
    if (this._useMaskBehavior()) {
      this._partIncrease(e.delta > 0 ? FORWARD : BACKWARD, e);
    }
  },
  _selectNextPart() {
    var step = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
    if (!this.option("text") || this._disposed) {
      return;
    }
    if (step) {
      this._initialMaskValue = new Date(this._maskValue);
    }
    var index = fitIntoRange(this._activePartIndex + step, 0, this._dateParts.length - 1);
    if (this._dateParts[index].isStub) {
      var isBoundaryIndex = 0 === index && step < 0 || index === this._dateParts.length - 1 && step > 0;
      if (!isBoundaryIndex) {
        this._selectNextPart(step >= 0 ? step + 1 : step - 1);
        return;
      }
      index = this._activePartIndex;
    }
    if (this._activePartIndex !== index) {
      this._clearSearchValue();
    }
    this._activePartIndex = index;
    this._caret(this._getActivePartProp("caret"));
  },
  _getRealLimitsPattern() {
    if ("d" === this._getActivePartProp("pattern")[0]) {
      return "dM";
    }
  },
  _getActivePartLimits(lockOtherParts) {
    var limitFunction = this._getActivePartProp("limits");
    return limitFunction(this._maskValue, lockOtherParts && this._getRealLimitsPattern());
  },
  _getActivePartValue(dateValue) {
    dateValue = dateValue || this._maskValue;
    var getter = this._getActivePartProp("getter");
    return isFunction(getter) ? getter(dateValue) : dateValue[getter]();
  },
  _addLeadingZeroes(value2) {
    var zeroes = this._searchValue.match(/^0+/);
    var limits = this._getActivePartLimits();
    var maxLimitLength = String(limits.max).length;
    return ((zeroes && zeroes[0] || "") + String(value2)).substr(-maxLimitLength);
  },
  _setActivePartValue(value2, dateValue) {
    dateValue = dateValue || this._maskValue;
    var setter = this._getActivePartProp("setter");
    var limits = this._getActivePartLimits();
    value2 = inRange(value2, limits.min, limits.max) ? value2 : value2 % 10;
    value2 = this._addLeadingZeroes(fitIntoRange(value2, limits.min, limits.max));
    isFunction(setter) ? setter(dateValue, value2) : dateValue[setter](value2);
    this._renderDisplayText(this._getDisplayedText(dateValue));
    this._renderDateParts();
  },
  _getActivePartProp(property) {
    if (!this._dateParts || !this._dateParts[this._activePartIndex]) {
      return;
    }
    return this._dateParts[this._activePartIndex][property];
  },
  _loadMaskValue() {
    var value2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.dateOption("value");
    this._maskValue = value2 && new Date(value2);
    this._initialMaskValue = value2 && new Date(value2);
  },
  _saveMaskValue() {
    var value2 = this._maskValue && new Date(this._maskValue);
    if (value2 && "date" === this.option("type")) {
      value2.setHours(0, 0, 0, 0);
    }
    this._initialMaskValue = new Date(value2);
    this.dateOption("value", value2);
  },
  _revertChanges() {
    this._loadMaskValue();
    this._renderDisplayText(this._getDisplayedText(this._maskValue));
    this._renderDateParts();
  },
  _renderDisplayText(text) {
    this.callBase(text);
    if (this._useMaskBehavior()) {
      this.option("text", text);
    }
  },
  _partIncrease(step, lockOtherParts) {
    this._setNewDateIfEmpty();
    var {
      max,
      min
    } = this._getActivePartLimits(lockOtherParts);
    var newValue = step + this._getActivePartValue();
    if (newValue > max) {
      newValue = this._applyLimits(newValue, {
        limitBase: min,
        limitClosest: max,
        max
      });
    } else if (newValue < min) {
      newValue = this._applyLimits(newValue, {
        limitBase: max,
        limitClosest: min,
        max
      });
    }
    this._setActivePartValue(newValue);
  },
  _applyLimits(newValue, _ref2) {
    var {
      limitBase,
      limitClosest,
      max
    } = _ref2;
    var delta = (newValue - limitClosest) % max;
    return delta ? limitBase + delta - 1 * sign(delta) : limitClosest;
  },
  _maskClickHandler() {
    this._loadMaskValue(this._maskValue);
    if (this.option("text")) {
      this._activePartIndex = getDatePartIndexByPosition(this._dateParts, this._caret().start);
      if (!this._isAllSelected()) {
        if (isDefined(this._activePartIndex)) {
          this._caret(this._getActivePartProp("caret"));
        } else {
          this._selectLastPart();
        }
      }
    }
  },
  _maskCompositionEndHandler(e) {
    this._input().val(this._getDisplayedText(this._maskValue));
    this._selectNextPart();
    this._maskInputHandler = () => {
      this._renderSelectedPart();
    };
  },
  _maskPasteHandler(e) {
    var newText = this._replaceSelectedText(this.option("text"), this._caret(), clipboardText(e));
    var date = date_default.parse(newText, this._getFormatPattern());
    if (date && this._isDateValid(date)) {
      this._maskValue = date;
      this._renderDisplayText(this._getDisplayedText(this._maskValue));
      this._renderDateParts();
      this._selectNextPart();
    }
    e.preventDefault();
  },
  _isDateValid: (date) => isDate(date) && !isNaN(date),
  _isValueDirty() {
    var value2 = this.dateOption("value");
    return (this._maskValue && this._maskValue.getTime()) !== (value2 && value2.getTime());
  },
  _fireChangeEvent() {
    this._clearSearchValue();
    if (this._isValueDirty()) {
      events_engine_default.trigger(this._input(), "change");
    }
  },
  _enterHandler() {
    this._fireChangeEvent();
    this._selectNextPart(FORWARD);
  },
  _focusOutHandler(e) {
    var shouldFireChangeEvent = this._useMaskBehavior() && !e.isDefaultPrevented();
    if (shouldFireChangeEvent) {
      this._fireChangeEvent();
      this.callBase(e);
      this._selectFirstPart(e);
    } else {
      this.callBase(e);
    }
  },
  _valueChangeEventHandler(e) {
    var text = this.option("text");
    if (this._useMaskBehavior()) {
      this._saveValueChangeEvent(e);
      if (!text) {
        this._maskValue = null;
      } else if (null === this._maskValue) {
        this._loadMaskValue(text);
      }
      this._saveMaskValue();
    } else {
      this.callBase(e);
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "useMaskBehavior":
        this._renderMask();
        break;
      case "displayFormat":
      case "mode":
        this.callBase(args);
        this._renderMask();
        break;
      case "value":
        this._loadMaskValue();
        this.callBase(args);
        this._renderDateParts();
        break;
      case "emptyDateValue":
        break;
      default:
        this.callBase(args);
    }
  },
  _clearMaskState() {
    this._clearSearchValue();
    delete this._dateParts;
    delete this._activePartIndex;
    delete this._maskValue;
  },
  clear() {
    this._clearMaskState();
    this._activePartIndex = 0;
    this.callBase();
  },
  _clean() {
    this.callBase();
    this._detachMaskEvents();
    this._clearMaskState();
  }
});
var m_date_box_mask_default = DateBoxMask;

// node_modules/devextreme/esm/__internal/ui/date_box/m_date_box.js
component_registrator_default("dxDateBox", m_date_box_mask_default);

// node_modules/devextreme/esm/ui/shared/ui.editor_factory_mixin.js
var {
  isWrapped
} = variable_wrapper_default;
var CHECKBOX_SIZE_CLASS = "checkbox-size";
var EDITOR_INLINE_BLOCK = "dx-editor-inline-block";
var getResultConfig = function(config2, options2) {
  return extend(config2, {
    readOnly: options2.readOnly,
    placeholder: options2.placeholder,
    inputAttr: {
      id: options2.id,
      "aria-labelledby": options2["aria-labelledby"]
    },
    tabIndex: options2.tabIndex
  }, options2.editorOptions);
};
var checkEnterBug = function() {
  return browser_default.mozilla || devices_default.real().ios;
};
var getTextEditorConfig = function(options2) {
  var data17 = {};
  var isEnterBug = checkEnterBug();
  var sharedData = options2.sharedData || data17;
  return getResultConfig({
    placeholder: options2.placeholder,
    width: options2.width,
    value: options2.value,
    onValueChanged: function(e) {
      var needDelayedUpdate = "filterRow" === options2.parentType || "searchPanel" === options2.parentType;
      var isInputOrKeyUpEvent = e.event && ("input" === e.event.type || "keyup" === e.event.type);
      var updateValue = function(e2, notFireEvent) {
        options2 && options2.setValue(e2.value, notFireEvent);
      };
      clearTimeout(data17.valueChangeTimeout);
      if (isInputOrKeyUpEvent && needDelayedUpdate) {
        sharedData.valueChangeTimeout = data17.valueChangeTimeout = setTimeout(function() {
          updateValue(e, data17.valueChangeTimeout !== sharedData.valueChangeTimeout);
        }, isDefined(options2.updateValueTimeout) ? options2.updateValueTimeout : 0);
      } else {
        updateValue(e);
      }
    },
    onKeyDown: function(e) {
      if (isEnterBug && "enter" === normalizeKeyName(e.event)) {
        events_engine_default.trigger(renderer_default(e.component._input()), "change");
      }
    },
    valueChangeEvent: "change" + ("filterRow" === options2.parentType ? " keyup input" : "")
  }, options2);
};
var prepareDateBox = function(options2) {
  options2.editorName = "dxDateBox";
  options2.editorOptions = getResultConfig({
    value: options2.value,
    onValueChanged: function(args) {
      options2.setValue(args.value);
    },
    onKeyDown: function(_ref) {
      var {
        component,
        event
      } = _ref;
      var useMaskBehavior = component.option("useMaskBehavior");
      if ((checkEnterBug() || useMaskBehavior) && "enter" === normalizeKeyName(event)) {
        component.blur();
        component.focus();
      }
    },
    displayFormat: options2.format,
    type: options2.dataType,
    dateSerializationFormat: null,
    width: "filterBuilder" === options2.parentType ? void 0 : "auto"
  }, options2);
};
var prepareTextBox = function(options2) {
  var config2 = getTextEditorConfig(options2);
  var isSearching = "searchPanel" === options2.parentType;
  if (options2.editorType && "dxTextBox" !== options2.editorType) {
    config2.value = options2.value;
  } else {
    config2.value = (value2 = options2.value, isDefined(value2) ? value2.toString() : "");
  }
  var value2;
  config2.valueChangeEvent += isSearching ? " keyup input search" : "";
  config2.mode = config2.mode || (isSearching ? "search" : "text");
  options2.editorName = "dxTextBox";
  options2.editorOptions = config2;
};
var prepareNumberBox = function(options2) {
  var config2 = getTextEditorConfig(options2);
  config2.value = isDefined(options2.value) ? options2.value : null;
  options2.editorName = "dxNumberBox";
  options2.editorOptions = config2;
};
var prepareBooleanEditor = function(options2) {
  if ("filterRow" === options2.parentType || "filterBuilder" === options2.parentType) {
    prepareLookupEditor(extend(options2, {
      lookup: {
        displayExpr: function(data17) {
          if (true === data17) {
            return options2.trueText || "true";
          } else if (false === data17) {
            return options2.falseText || "false";
          }
        },
        dataSource: [true, false]
      }
    }));
  } else {
    prepareCheckBox(options2);
  }
};
function watchLookupDataSource(options2) {
  if (options2.row && options2.row.watch && "dataRow" === options2.parentType) {
    var editorOptions = options2.editorOptions || {};
    options2.editorOptions = editorOptions;
    var selectBox;
    var onInitialized = editorOptions.onInitialized;
    editorOptions.onInitialized = function(e) {
      onInitialized && onInitialized.apply(this, arguments);
      selectBox = e.component;
      selectBox.on("disposing", stopWatch);
    };
    var dataSource;
    var stopWatch = options2.row.watch(() => {
      dataSource = options2.lookup.dataSource(options2.row);
      return dataSource && dataSource.filter;
    }, () => {
      selectBox.option("dataSource", dataSource);
    }, (row) => {
      options2.row = row;
    });
  }
}
function prepareLookupEditor(options2) {
  var lookup = options2.lookup;
  var displayGetter;
  var dataSource;
  var postProcess;
  var isFilterRow = "filterRow" === options2.parentType;
  if (lookup) {
    var _options$editorType;
    displayGetter = compileGetter(lookup.displayExpr);
    dataSource = lookup.dataSource;
    if (isFunction(dataSource) && !isWrapped(dataSource)) {
      dataSource = dataSource(options2.row || {});
      watchLookupDataSource(options2);
    }
    if (isObject(dataSource) || Array.isArray(dataSource)) {
      dataSource = normalizeDataSourceOptions(dataSource);
      if (isFilterRow) {
        postProcess = dataSource.postProcess;
        dataSource.postProcess = function(items) {
          if (0 === this.pageIndex()) {
            items = items.slice(0);
            items.unshift(null);
          }
          if (postProcess) {
            return postProcess.call(this, items);
          }
          return items;
        };
      }
    }
    var allowClearing = Boolean(lookup.allowClearing && !isFilterRow);
    options2.editorName = null !== (_options$editorType = options2.editorType) && void 0 !== _options$editorType ? _options$editorType : "dxSelectBox";
    options2.editorOptions = getResultConfig({
      searchEnabled: true,
      value: options2.value,
      valueExpr: options2.lookup.valueExpr,
      searchExpr: options2.lookup.searchExpr || options2.lookup.displayExpr,
      allowClearing,
      showClearButton: allowClearing,
      displayExpr: function(data17) {
        if (null === data17) {
          return options2.showAllText;
        }
        return displayGetter(data17);
      },
      dataSource,
      onValueChanged: function(e) {
        var params = [e.value];
        !isFilterRow && params.push(e.component.option("text"));
        options2.setValue.apply(this, params);
      }
    }, options2);
  }
}
function prepareCheckBox(options2) {
  options2.editorName = "dxCheckBox";
  options2.editorOptions = getResultConfig({
    elementAttr: {
      id: options2.id
    },
    value: isDefined(options2.value) ? options2.value : void 0,
    hoverStateEnabled: !options2.readOnly,
    focusStateEnabled: !options2.readOnly,
    activeStateEnabled: false,
    onValueChanged: function(e) {
      options2.setValue && options2.setValue(e.value, e);
    }
  }, options2);
}
var createEditorCore = function(that, options2) {
  var $editorElement = renderer_default(options2.editorElement);
  if (options2.editorName && options2.editorOptions && $editorElement[options2.editorName]) {
    if ("dxCheckBox" === options2.editorName || "dxSwitch" === options2.editorName) {
      if (!options2.isOnForm) {
        $editorElement.addClass(that.addWidgetPrefix(CHECKBOX_SIZE_CLASS));
        $editorElement.parent().addClass(EDITOR_INLINE_BLOCK);
      }
    }
    that._createComponent($editorElement, options2.editorName, options2.editorOptions);
    if ("dxDateBox" === options2.editorName) {
      var dateBox = $editorElement.dxDateBox("instance");
      var defaultEnterKeyHandler = dateBox._supportedKeys().enter;
      dateBox.registerKeyHandler("enter", (e) => {
        if (dateBox.option("opened")) {
          defaultEnterKeyHandler(e);
        }
        return true;
      });
    }
    if ("dxTextArea" === options2.editorName) {
      $editorElement.dxTextArea("instance").registerKeyHandler("enter", function(event) {
        if ("enter" === normalizeKeyName(event) && !event.ctrlKey && !event.shiftKey) {
          event.stopPropagation();
        }
      });
    }
  }
};
var prepareCustomEditor = (options2) => {
  options2.editorName = options2.editorType;
  options2.editorOptions = getResultConfig({
    value: options2.value,
    onValueChanged: function(args) {
      options2.setValue(args.value);
    }
  }, options2);
};
var prepareEditor = (options2) => {
  var prepareDefaultEditor = {
    dxDateBox: prepareDateBox,
    dxCheckBox: prepareCheckBox,
    dxNumberBox: prepareNumberBox,
    dxTextBox: prepareTextBox
  };
  if (options2.lookup) {
    prepareLookupEditor(options2);
  } else if (options2.editorType) {
    var _prepareDefaultEditor;
    (null !== (_prepareDefaultEditor = prepareDefaultEditor[options2.editorType]) && void 0 !== _prepareDefaultEditor ? _prepareDefaultEditor : prepareCustomEditor)(options2);
  } else {
    switch (options2.dataType) {
      case "date":
      case "datetime":
        prepareDateBox(options2);
        break;
      case "boolean":
        prepareBooleanEditor(options2);
        break;
      case "number":
        prepareNumberBox(options2);
        break;
      default:
        prepareTextBox(options2);
    }
  }
};
var EditorFactoryMixin = (Base) => class extends Base {
  createEditor($container, options2) {
    options2.cancel = false;
    options2.editorElement = getPublicElement($container);
    if (!isDefined(options2.tabIndex)) {
      options2.tabIndex = this.option("tabIndex");
    }
    prepareEditor(options2);
    this.executeAction("onEditorPreparing", options2);
    if (options2.cancel) {
      return;
    }
    if ("dataRow" === options2.parentType && !options2.isOnForm && !isDefined(options2.editorOptions.showValidationMark)) {
      options2.editorOptions.showValidationMark = false;
    }
    createEditorCore(this, options2);
    this.executeAction("onEditorPrepared", options2);
  }
};
var ui_editor_factory_mixin_default = EditorFactoryMixin;

// node_modules/devextreme/esm/__internal/grids/grid_core/editor_factory/m_editor_factory.js
var EDITOR_INLINE_BLOCK2 = "dx-editor-inline-block";
var CELL_FOCUS_DISABLED_CLASS3 = "dx-cell-focus-disabled";
var CELL_MODIFIED_CLASS = "dx-cell-modified";
var CELL_INVALID_CLASS = "invalid";
var FOCUSED_CELL_MODIFIED_CLASS = "dx-focused-cell-modified";
var FOCUSED_CELL_INVALID_CLASS = "dx-focused-cell-invalid";
var FOCUS_OVERLAY_CLASS = "focus-overlay";
var CONTENT_CLASS3 = "content";
var FOCUSED_ELEMENT_CLASS = "dx-focused";
var ROW_CLASS3 = "dx-row";
var MODULE_NAMESPACE = "dxDataGridEditorFactory";
var UPDATE_FOCUS_EVENTS = addNamespace([pointer_default.down, "focusin", CLICK_EVENT_NAME].join(" "), MODULE_NAMESPACE);
var DX_HIDDEN = "dx-hidden";
var ViewControllerWithMixin = ui_editor_factory_mixin_default(m_modules_default.ViewController);
var EditorFactory = class extends ViewControllerWithMixin {
  init() {
    this.createAction("onEditorPreparing", {
      excludeValidators: ["disabled", "readOnly"],
      category: "rendering"
    });
    this.createAction("onEditorPrepared", {
      excludeValidators: ["disabled", "readOnly"],
      category: "rendering"
    });
    this._columnsResizerController = this.getController("columnsResizer");
    this._editingController = this.getController("editing");
    this._keyboardNavigationController = this.getController("keyboardNavigation");
    this._columnsController = this.getController("columns");
    this._validatingController = this.getController("validating");
    this._rowsView = this.getView("rowsView");
    this._updateFocusHandler = this._updateFocusHandler || this.createAction(this._updateFocus.bind(this));
    this._subscribedContainerRoot = this._getContainerRoot();
    events_engine_default.on(this._subscribedContainerRoot, UPDATE_FOCUS_EVENTS, this._updateFocusHandler);
    this._attachContainerEventHandlers();
  }
  dispose() {
    clearTimeout(this._focusTimeoutID);
    clearTimeout(this._updateFocusTimeoutID);
    events_engine_default.off(this._subscribedContainerRoot, UPDATE_FOCUS_EVENTS, this._updateFocusHandler);
  }
  _getFocusedElement($dataGridElement) {
    var rowSelector = this.option("focusedRowEnabled") ? "tr[tabindex]:focus" : "tr[tabindex]:not(.dx-data-row):focus";
    var focusedElementSelector = ["td[tabindex]:focus", "".concat(rowSelector), "input:focus", "button:focus", "textarea:focus", "div[tabindex]:focus", ".dx-lookup-field:focus", ".dx-checkbox:focus", ".dx-switch:focus", ".dx-dropdownbutton .dx-buttongroup:focus", ".dx-adaptive-item-text:focus"].join(",");
    var $focusedElement = $dataGridElement.find(focusedElementSelector);
    return this.elementIsInsideGrid($focusedElement) && $focusedElement;
  }
  _getFocusCellSelector() {
    return ".dx-row > td";
  }
  _updateFocusCore() {
    var $dataGridElement = this.component && this.component.$element();
    if ($dataGridElement) {
      var $focus = this._getFocusedElement($dataGridElement);
      if ($focus && $focus.length) {
        var isHideBorder;
        if (!$focus.hasClass(CELL_FOCUS_DISABLED_CLASS3) && !$focus.hasClass(ROW_CLASS3)) {
          var $focusCell = $focus.closest("".concat(this._getFocusCellSelector(), ", .").concat(CELL_FOCUS_DISABLED_CLASS3));
          if ($focusCell.get(0) !== $focus.get(0)) {
            isHideBorder = this._needHideBorder($focusCell);
            $focus = $focusCell;
          }
        }
        if ($focus.length && !$focus.hasClass(CELL_FOCUS_DISABLED_CLASS3)) {
          this.focus($focus, isHideBorder);
          return;
        }
      }
    }
    this.loseFocus();
  }
  _needHideBorder($element) {
    var rowsViewElement = this._rowsView.element();
    var isRowsView = $element.closest(rowsViewElement).length > 0;
    var isEditing = this._editingController.isEditing();
    return $element.hasClass(EDITOR_INLINE_BLOCK2) || isRowsView && !isEditing;
  }
  _updateFocus(e) {
    var that = this;
    var isFocusOverlay = e && e.event && renderer_default(e.event.target).hasClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS));
    that._isFocusOverlay = that._isFocusOverlay || isFocusOverlay;
    clearTimeout(that._updateFocusTimeoutID);
    that._updateFocusTimeoutID = setTimeout(() => {
      delete that._updateFocusTimeoutID;
      if (!that._isFocusOverlay) {
        that._updateFocusCore();
      }
      that._isFocusOverlay = false;
    });
  }
  _updateFocusOverlaySize($element, position2) {
    $element.hide();
    var location = position_default.calculate($element, extend({
      collision: "fit"
    }, position2));
    if (location.h.oversize > 0) {
      setOuterWidth($element, getOuterWidth($element) - location.h.oversize);
    }
    if (location.v.oversize > 0) {
      setOuterHeight($element, getOuterHeight($element) - location.v.oversize);
    }
    $element.show();
  }
  callbackNames() {
    return ["focused"];
  }
  focus($element, isHideBorder) {
    var that = this;
    if (void 0 === $element) {
      return that._$focusedElement;
    }
    if ($element) {
      if (!$element.is(that._$focusedElement)) {
        that._$focusedElement && that._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);
      }
      that._$focusedElement = $element;
      clearTimeout(that._focusTimeoutID);
      that._focusTimeoutID = setTimeout(() => {
        delete that._focusTimeoutID;
        that.renderFocusOverlay($element, isHideBorder);
        $element.addClass(FOCUSED_ELEMENT_CLASS);
        that.focused.fire($element);
      });
    }
  }
  refocus() {
    var $focus = this.focus();
    this.focus($focus);
  }
  renderFocusOverlay($element, isHideBorder) {
    if (!m_utils_default.isElementInCurrentGrid(this, $element)) {
      return;
    }
    if (!this._$focusOverlay) {
      this._$focusOverlay = renderer_default("<div>").addClass(this.addWidgetPrefix(FOCUS_OVERLAY_CLASS));
    }
    if (isHideBorder) {
      this._$focusOverlay.addClass(DX_HIDDEN);
    } else if ($element.length) {
      var align = browser_default.mozilla ? "right bottom" : "left top";
      var $content = $element.closest(".".concat(this.addWidgetPrefix(CONTENT_CLASS3)));
      var elemCoord = getBoundingRect($element.get(0));
      var isFocusedCellInvalid = $element.hasClass(this.addWidgetPrefix(CELL_INVALID_CLASS));
      var isFocusedCellModified = $element.hasClass(CELL_MODIFIED_CLASS) && !isFocusedCellInvalid;
      this._$focusOverlay.removeClass(DX_HIDDEN).toggleClass(FOCUSED_CELL_INVALID_CLASS, isFocusedCellInvalid).toggleClass(FOCUSED_CELL_MODIFIED_CLASS, isFocusedCellModified).appendTo($content);
      setOuterHeight(this._$focusOverlay, elemCoord.bottom - elemCoord.top + 1);
      setOuterWidth(this._$focusOverlay, elemCoord.right - elemCoord.left + 1);
      var focusOverlayPosition = {
        precise: true,
        my: align,
        at: align,
        of: $element,
        boundary: $content.length && $content
      };
      this._updateFocusOverlaySize(this._$focusOverlay, focusOverlayPosition);
      position_default.setup(this._$focusOverlay, focusOverlayPosition);
      this._$focusOverlay.css("visibility", "visible");
    }
  }
  resize() {
    var $focusedElement = this._$focusedElement;
    if ($focusedElement) {
      this.focus($focusedElement);
    }
  }
  loseFocus(skipValidator) {
    this._$focusedElement && this._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);
    this._$focusedElement = null;
    this._$focusOverlay && this._$focusOverlay.addClass(DX_HIDDEN);
  }
  _getContainerRoot() {
    var _a;
    var $container = null === (_a = this.component) || void 0 === _a ? void 0 : _a.$element();
    var root = dom_adapter_default.getRootNode(null === $container || void 0 === $container ? void 0 : $container.get(0));
    if (root.nodeType === Node.DOCUMENT_FRAGMENT_NODE && !root.host) {
      return dom_adapter_default.getDocument();
    }
    return root;
  }
  _attachContainerEventHandlers() {
    var that = this;
    var $container = that.component && that.component.$element();
    if ($container) {
      events_engine_default.on($container, addNamespace("keydown", MODULE_NAMESPACE), (e) => {
        if ("tab" === normalizeKeyName(e)) {
          that._updateFocusHandler(e);
        }
      });
    }
  }
};
var editorFactoryModule = {
  defaultOptions: () => ({}),
  controllers: {
    editorFactory: EditorFactory
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/editor_factory.js
m_core_default.registerModule("editorFactory", editorFactoryModule);

// node_modules/devextreme/esm/__internal/ui/m_dialog.js
var window12 = getWindow();
var DEFAULT_BUTTON = {
  text: "OK",
  onClick: () => true
};
var DX_DIALOG_CLASSNAME = "dx-dialog";
var DX_DIALOG_WRAPPER_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-wrapper");
var DX_DIALOG_ROOT_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-root");
var DX_DIALOG_CONTENT_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-content");
var DX_DIALOG_MESSAGE_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-message");
var DX_DIALOG_BUTTONS_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-buttons");
var DX_DIALOG_BUTTON_CLASSNAME = "".concat(DX_DIALOG_CLASSNAME, "-button");
var DX_BUTTON_CLASSNAME = "dx-button";
var getApplyButtonConfig = () => {
  if (isFluent()) {
    return {
      stylingMode: "contained",
      type: "default"
    };
  }
  return {};
};
var getCancelButtonConfig = () => {
  if (isFluent()) {
    return {
      stylingMode: "outlined",
      type: "default"
    };
  }
  return {};
};
var custom = function(options2) {
  var _a;
  var deferred = Deferred();
  options2 = options2 || {};
  var $element = renderer_default("<div>").addClass(DX_DIALOG_CLASSNAME).appendTo(value());
  var isMessageDefined = "message" in options2;
  var isMessageHtmlDefined = "messageHtml" in options2;
  if (isMessageDefined) {
    ui_errors_default.log("W1013");
  }
  var messageHtml = String(isMessageHtmlDefined ? options2.messageHtml : options2.message);
  var messageId = options2.title ? null : new guid_default();
  var $message = renderer_default("<div>").addClass(DX_DIALOG_MESSAGE_CLASSNAME).html(messageHtml).attr("id", messageId);
  var popupToolbarItems = [];
  var popupInstance = new ui_popup_default($element, extend({
    title: null !== (_a = options2.title) && void 0 !== _a ? _a : "",
    showTitle: ensureDefined(options2.showTitle, true),
    dragEnabled: ensureDefined(options2.dragEnabled, true),
    height: "auto",
    width: options2.width,
    showCloseButton: options2.showCloseButton || false,
    ignoreChildEvents: false,
    container: $element,
    visualContainer: window12,
    dragAndResizeArea: window12,
    onContentReady(args) {
      args.component.$content().addClass(DX_DIALOG_CONTENT_CLASSNAME).append($message);
      if (messageId) {
        args.component.$overlayContent().attr("aria-labelledby", messageId);
      }
    },
    onShowing(e) {
      e.component.bottomToolbar().addClass(DX_DIALOG_BUTTONS_CLASSNAME).find(".".concat(DX_BUTTON_CLASSNAME)).addClass(DX_DIALOG_BUTTON_CLASSNAME);
      resetActiveElement();
    },
    onShown(e) {
      var $firstButton = e.component.bottomToolbar().find(".".concat(DX_BUTTON_CLASSNAME)).first();
      events_engine_default.trigger($firstButton, "focus");
    },
    onHiding() {
      deferred.reject();
    },
    onHidden(_ref) {
      var {
        element
      } = _ref;
      renderer_default(element).remove();
    },
    animation: {
      show: {
        type: "pop",
        duration: 400
      },
      hide: {
        type: "pop",
        duration: 400,
        to: {
          opacity: 0,
          scale: 0
        },
        from: {
          opacity: 1,
          scale: 1
        }
      }
    },
    rtlEnabled: config_default().rtlEnabled,
    position: {
      boundaryOffset: {
        h: 10,
        v: 0
      }
    }
  }, options2.popupOptions));
  var buttonOptions = options2.buttons || [DEFAULT_BUTTON];
  buttonOptions.forEach((options3) => {
    var action = new Action(options3.onClick, {
      context: popupInstance
    });
    popupToolbarItems.push({
      toolbar: "bottom",
      location: devices_default.current().android ? "after" : "center",
      widget: "dxButton",
      options: _extends(_extends({}, options3), {
        onClick() {
          var result2 = action.execute(...arguments);
          hide(result2);
        }
      })
    });
  });
  popupInstance.option("toolbarItems", popupToolbarItems);
  popupInstance.$wrapper().addClass(DX_DIALOG_WRAPPER_CLASSNAME);
  if (options2.position) {
    popupInstance.option("position", options2.position);
  }
  popupInstance.$wrapper().addClass(DX_DIALOG_ROOT_CLASSNAME);
  function hide(value2) {
    deferred.resolve(value2);
    popupInstance.hide();
  }
  return {
    show: function() {
      if ("phone" === devices_default.real().deviceType) {
        var isPortrait = getHeight(window12) > getWidth(window12);
        var width = isPortrait ? "90%" : "60%";
        popupInstance.option({
          width
        });
      }
      popupInstance.show();
      return deferred.promise();
    },
    hide
  };
};
var confirm = function(messageHtml) {
  var title = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
  var showTitle = arguments.length > 2 ? arguments[2] : void 0;
  var options2 = isPlainObject(messageHtml) ? messageHtml : {
    title,
    messageHtml,
    showTitle,
    buttons: [_extends({
      text: message_default.format("Yes"),
      onClick: () => true
    }, getApplyButtonConfig()), _extends({
      text: message_default.format("No"),
      onClick: () => false
    }, getCancelButtonConfig())],
    dragEnabled: showTitle
  };
  return custom(options2).show();
};

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/const.js
var EDITOR_CELL_CLASS2 = "dx-editor-cell";
var ROW_CLASS4 = "dx-row";
var CELL_MODIFIED_CLASS2 = "dx-cell-modified";
var ROW_SELECTED_CLASS = "dx-selection";
var EDIT_FORM_CLASS = "edit-form";
var DATA_EDIT_DATA_INSERT_TYPE = "insert";
var DATA_EDIT_DATA_REMOVE_TYPE = "remove";
var EDITING_POPUP_OPTION_NAME = "editing.popup";
var EDITING_FORM_OPTION_NAME = "editing.form";
var EDITING_EDITROWKEY_OPTION_NAME = "editing.editRowKey";
var EDITING_EDITCOLUMNNAME_OPTION_NAME = "editing.editColumnName";
var TARGET_COMPONENT_NAME = "targetComponent";
var EDITORS_INPUT_SELECTOR = "input:not([type='hidden'])";
var FOCUSABLE_ELEMENT_SELECTOR = "[tabindex]:not([disabled]), ".concat(EDITORS_INPUT_SELECTOR, ":not([disabled])");
var EDIT_MODE_BATCH = "batch";
var EDIT_MODE_ROW = "row";
var EDIT_MODE_CELL = "cell";
var EDIT_MODE_FORM = "form";
var EDIT_MODE_POPUP = "popup";
var FIRST_NEW_ROW_POSITION = "first";
var LAST_NEW_ROW_POSITION = "last";
var PAGE_BOTTOM_NEW_ROW_POSITION = "pageBottom";
var PAGE_TOP_NEW_ROW_POSITION = "pageTop";
var VIEWPORT_BOTTOM_NEW_ROW_POSITION = "viewportBottom";
var VIEWPORT_TOP_NEW_ROW_POSITION = "viewportTop";
var EDIT_MODES = [EDIT_MODE_BATCH, EDIT_MODE_ROW, EDIT_MODE_CELL, EDIT_MODE_FORM, EDIT_MODE_POPUP];
var ROW_BASED_MODES = [EDIT_MODE_ROW, EDIT_MODE_FORM, EDIT_MODE_POPUP];
var CELL_BASED_MODES = [EDIT_MODE_BATCH, EDIT_MODE_CELL];
var REQUIRED_EDITOR_LABELLEDBY_MODES = [EDIT_MODE_BATCH, EDIT_MODE_ROW, EDIT_MODE_CELL];
var MODES_WITH_DELAYED_FOCUS = [EDIT_MODE_ROW, EDIT_MODE_FORM];
var READONLY_CLASS = "readonly";
var LINK_CLASS = "dx-link";
var LINK_ICON_CLASS = "dx-link-icon";
var ROW_SELECTED = "dx-selection";
var EDIT_BUTTON_CLASS = "dx-edit-button";
var COMMAND_EDIT_CLASS = "dx-command-edit";
var COMMAND_EDIT_WITH_ICONS_CLASS = "".concat(COMMAND_EDIT_CLASS, "-with-icons");
var INSERT_INDEX = "__DX_INSERT_INDEX__";
var ROW_INSERTED = "dx-row-inserted";
var ROW_MODIFIED = "dx-row-modified";
var CELL_MODIFIED = "dx-cell-modified";
var EDITING_NAMESPACE = "dxDataGridEditing";
var CELL_FOCUS_DISABLED_CLASS4 = "dx-cell-focus-disabled";
var DATA_EDIT_DATA_UPDATE_TYPE = "update";
var DEFAULT_START_EDIT_ACTION = "click";
var EDIT_LINK_CLASS = {
  save: "dx-link-save",
  cancel: "dx-link-cancel",
  edit: "dx-link-edit",
  undelete: "dx-link-undelete",
  delete: "dx-link-delete",
  add: "dx-link-add"
};
var EDIT_ICON_CLASS = {
  save: "save",
  cancel: "revert",
  edit: "edit",
  undelete: "revert",
  delete: "trash",
  add: "add"
};
var METHOD_NAMES = {
  edit: "editRow",
  delete: "deleteRow",
  undelete: "undeleteRow",
  save: "saveEditData",
  cancel: "cancelEditData",
  add: "addRowByRowIndex"
};
var ACTION_OPTION_NAMES = {
  add: "allowAdding",
  edit: "allowUpdating",
  delete: "allowDeleting"
};
var BUTTON_NAMES = ["edit", "save", "cancel", "delete", "undelete"];
var EDITING_CHANGES_OPTION_NAME = "editing.changes";
var FOCUS_OVERLAY_CLASS2 = "focus-overlay";
var ADD_ROW_BUTTON_CLASS = "addrow-button";
var DROPDOWN_EDITOR_OVERLAY_CLASS = "dx-dropdowneditor-overlay";
var DATA_ROW_CLASS3 = "dx-data-row";
var ROW_REMOVED = "dx-row-removed";
var FILTER_ROW_CLASS2 = "filter-row";
var isRenovatedScrollable = !!ui_scrollable_default.IS_RENOVATED_WIDGET;
var EDIT_FORM_ITEM_CLASS = "edit-form-item";
var EDIT_POPUP_CLASS = "edit-popup";
var EDIT_POPUP_FORM_CLASS = "edit-popup-form";
var FOCUSABLE_ELEMENT_CLASS = isRenovatedScrollable ? "dx-scrollable" : "dx-scrollable-container";
var BUTTON_CLASS = "dx-button";
var FORM_BUTTONS_CONTAINER_CLASS = "form-buttons-container";
var EDIT_ROW = "dx-edit-row";

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/m_editing_utils.js
var NEW_ROW_TEMP_KEY_PREFIX = "_DX_KEY_";
var GUID_LENGTH = 36;
var createFailureHandler = function(deferred) {
  return function(arg) {
    var error = arg instanceof Error ? arg : new Error(arg && String(arg) || "Unknown error");
    deferred.reject(error);
  };
};
var isEditingCell = function(isEditRow, cellOptions) {
  return cellOptions.isEditing || isEditRow && cellOptions.column.allowEditing;
};
var isEditingOrShowEditorAlwaysDataCell = function(isEditRow, cellOptions) {
  var isCommandCell = !!cellOptions.column.command;
  var isEditing = isEditingCell(isEditRow, cellOptions);
  var isEditorCell2 = !isCommandCell && (isEditing || cellOptions.column.showEditorAlways);
  return "data" === cellOptions.rowType && isEditorCell2;
};
var getEditingTexts = (options2) => {
  var editingTexts = options2.component.option("editing.texts") || {};
  return {
    save: editingTexts.saveRowChanges,
    cancel: editingTexts.cancelRowChanges,
    edit: editingTexts.editRow,
    undelete: editingTexts.undeleteRow,
    delete: editingTexts.deleteRow,
    add: editingTexts.addRowToNode
  };
};
var generateNewRowTempKey = () => "".concat(NEW_ROW_TEMP_KEY_PREFIX).concat(new guid_default());
var isNewRowTempKey = (key) => "string" === typeof key && key.startsWith(NEW_ROW_TEMP_KEY_PREFIX) && key.length === NEW_ROW_TEMP_KEY_PREFIX.length + GUID_LENGTH;
var getButtonIndex = (buttons, name2) => {
  var result2 = -1;
  buttons.some((button, index) => {
    if (getButtonName(button) === name2) {
      result2 = index;
      return true;
    }
  });
  return result2;
};
function getButtonName(button) {
  return isObject(button) ? button.name : button;
}
function isEditable($element) {
  return $element && ($element.is("input") || $element.is("textarea"));
}
var getEditorType = (item) => {
  var _a;
  var {
    column
  } = item;
  return item.isCustomEditorType ? item.editorType : null === (_a = column.formItem) || void 0 === _a ? void 0 : _a.editorType;
};
var forEachFormItems = (items, callBack) => {
  items.forEach((item) => {
    if (item.items || item.tabs) {
      forEachFormItems(item.items || item.tabs, callBack);
    } else {
      callBack(item);
    }
  });
};

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/m_editing.js
var EditingControllerImpl = class extends m_modules_default.ViewController {
  init() {
    this._columnsController = this.getController("columns");
    this._dataController = this.getController("data");
    this._adaptiveColumnsController = this.getController("adaptiveColumns");
    this._validatingController = this.getController("validating");
    this._editorFactoryController = this.getController("editorFactory");
    this._focusController = this.getController("focus");
    this._keyboardNavigationController = this.getController("keyboardNavigation");
    this._columnsResizerController = this.getController("columnsResizer");
    this._errorHandlingController = this.getController("errorHandling");
    this._rowsView = this.getView("rowsView");
    this._headerPanelView = this.getView("headerPanel");
    this._lastOperation = null;
    this._changes = [];
    if (this._deferreds) {
      this._deferreds.forEach((d) => {
        d.reject("cancel");
      });
    }
    this._deferreds = [];
    if (!this._dataChangedHandler) {
      this._dataChangedHandler = this._handleDataChanged.bind(this);
      this._dataController.changed.add(this._dataChangedHandler);
    }
    if (!this._saveEditorHandler) {
      this.createAction("onInitNewRow", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowInserting", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowInserted", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onEditingStart", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowUpdating", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowUpdated", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowRemoving", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onRowRemoved", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onSaved", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onSaving", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onEditCanceling", {
        excludeValidators: ["disabled", "readOnly"]
      });
      this.createAction("onEditCanceled", {
        excludeValidators: ["disabled", "readOnly"]
      });
    }
    this._updateEditColumn();
    this._updateEditButtons();
    if (!this._internalState) {
      this._internalState = /* @__PURE__ */ new Map();
    }
    this.component._optionsByReference[EDITING_EDITROWKEY_OPTION_NAME] = true;
    this.component._optionsByReference[EDITING_CHANGES_OPTION_NAME] = true;
  }
  getEditMode() {
    var _a;
    var editMode = null !== (_a = this.option("editing.mode")) && void 0 !== _a ? _a : EDIT_MODE_ROW;
    if (EDIT_MODES.includes(editMode)) {
      return editMode;
    }
    return EDIT_MODE_ROW;
  }
  isCellBasedEditMode() {
    var editMode = this.getEditMode();
    return CELL_BASED_MODES.includes(editMode);
  }
  _getDefaultEditorTemplate() {
    return (container, options2) => {
      var $editor = renderer_default("<div>").appendTo(container);
      var editorOptions = extend({}, options2.column, {
        value: options2.value,
        setValue: options2.setValue,
        row: options2.row,
        parentType: "dataRow",
        width: null,
        readOnly: !options2.setValue,
        isOnForm: options2.isOnForm,
        id: options2.id
      });
      var needLabel = REQUIRED_EDITOR_LABELLEDBY_MODES.includes(this.getEditMode());
      if (needLabel) {
        editorOptions["aria-labelledby"] = options2.column.headerId;
      }
      this._editorFactoryController.createEditor($editor, editorOptions);
    };
  }
  _getNewRowPosition() {
    var newRowPosition = this.option("editing.newRowPosition");
    var scrollingMode = this.option("scrolling.mode");
    if ("virtual" === scrollingMode) {
      switch (newRowPosition) {
        case PAGE_TOP_NEW_ROW_POSITION:
          return VIEWPORT_TOP_NEW_ROW_POSITION;
        case PAGE_BOTTOM_NEW_ROW_POSITION:
          return VIEWPORT_BOTTOM_NEW_ROW_POSITION;
        default:
          return newRowPosition;
      }
    }
    return newRowPosition;
  }
  getChanges() {
    return this.option(EDITING_CHANGES_OPTION_NAME);
  }
  getInsertRowCount() {
    var changes = this.option(EDITING_CHANGES_OPTION_NAME);
    return changes.filter((change) => "insert" === change.type).length;
  }
  resetChanges() {
    var changes = this.getChanges();
    var needReset = null === changes || void 0 === changes ? void 0 : changes.length;
    if (needReset) {
      this._silentOption(EDITING_CHANGES_OPTION_NAME, []);
    }
  }
  _getInternalData(key) {
    return this._internalState.get(getKeyHash(key));
  }
  _addInternalData(params) {
    var internalData = this._getInternalData(params.key);
    if (internalData) {
      return extend(internalData, params);
    }
    this._internalState.set(getKeyHash(params.key), params);
    return params;
  }
  _getOldData(key) {
    var _a;
    return null === (_a = this._getInternalData(key)) || void 0 === _a ? void 0 : _a.oldData;
  }
  getUpdatedData(data17) {
    var key = this._dataController.keyOf(data17);
    var changes = this.getChanges();
    var editIndex = m_utils_default.getIndexByKey(key, changes);
    if (changes[editIndex]) {
      return createObjectWithChanges(data17, changes[editIndex].data);
    }
    return data17;
  }
  getInsertedData() {
    return this.getChanges().filter((change) => change.data && change.type === DATA_EDIT_DATA_INSERT_TYPE).map((change) => change.data);
  }
  getRemovedData() {
    return this.getChanges().filter((change) => this._getOldData(change.key) && change.type === DATA_EDIT_DATA_REMOVE_TYPE).map((change) => this._getOldData(change.key));
  }
  _fireDataErrorOccurred(arg) {
    if ("cancel" === arg) {
      return;
    }
    var $popupContent = this.getPopupContent();
    this._dataController.dataErrorOccurred.fire(arg, $popupContent);
  }
  _needToCloseEditableCell($targetElement) {
  }
  _closeEditItem($targetElement) {
  }
  _handleDataChanged(args) {
  }
  _isDefaultButtonVisible(button, options2) {
    var result2 = true;
    switch (button.name) {
      case "delete":
        result2 = this.allowDeleting(options2);
        break;
      case "undelete":
        result2 = false;
    }
    return result2;
  }
  isPopupEditMode() {
    var editMode = this.option("editing.mode");
    return editMode === EDIT_MODE_POPUP;
  }
  _isButtonVisible(button, options2) {
    var {
      visible
    } = button;
    if (!isDefined(visible)) {
      return this._isDefaultButtonVisible(button, options2);
    }
    return isFunction(visible) ? visible.call(button, {
      component: options2.component,
      row: options2.row,
      column: options2.column
    }) : visible;
  }
  _isButtonDisabled(button, options2) {
    var {
      disabled
    } = button;
    return isFunction(disabled) ? disabled.call(button, {
      component: options2.component,
      row: options2.row,
      column: options2.column
    }) : !!disabled;
  }
  _getButtonConfig(button, options2) {
    var config2 = isObject(button) ? button : {};
    var buttonName = getButtonName(button);
    var editingTexts = getEditingTexts(options2);
    var methodName = METHOD_NAMES[buttonName];
    var editingOptions = this.option("editing");
    var actionName = ACTION_OPTION_NAMES[buttonName];
    var allowAction = actionName ? editingOptions[actionName] : true;
    return extend({
      name: buttonName,
      text: editingTexts[buttonName],
      cssClass: EDIT_LINK_CLASS[buttonName]
    }, {
      onClick: methodName && ((e) => {
        var {
          event
        } = e;
        event.stopPropagation();
        event.preventDefault();
        setTimeout(() => {
          options2.row && allowAction && this[methodName] && this[methodName](options2.row.rowIndex);
        });
      })
    }, config2);
  }
  _getEditingButtons(options2) {
    var buttonIndex;
    var haveCustomButtons = !!options2.column.buttons;
    var buttons = (options2.column.buttons || []).slice();
    if (haveCustomButtons) {
      buttonIndex = getButtonIndex(buttons, "edit");
      if (buttonIndex >= 0) {
        if (getButtonIndex(buttons, "save") < 0) {
          buttons.splice(buttonIndex + 1, 0, "save");
        }
        if (getButtonIndex(buttons, "cancel") < 0) {
          buttons.splice(getButtonIndex(buttons, "save") + 1, 0, "cancel");
        }
      }
      buttonIndex = getButtonIndex(buttons, "delete");
      if (buttonIndex >= 0 && getButtonIndex(buttons, "undelete") < 0) {
        buttons.splice(buttonIndex + 1, 0, "undelete");
      }
    } else {
      buttons = BUTTON_NAMES.slice();
    }
    return buttons.map((button) => this._getButtonConfig(button, options2));
  }
  _renderEditingButtons($container, buttons, options2, change) {
    buttons.forEach((button) => {
      if (this._isButtonVisible(button, options2)) {
        this._createButton($container, button, options2, change);
      }
    });
  }
  _getEditCommandCellTemplate() {
    return (container, options2, change) => {
      var $container = renderer_default(container);
      if ("data" === options2.rowType) {
        var buttons = this._getEditingButtons(options2);
        this._renderEditingButtons($container, buttons, options2, change);
        if (options2.watch) {
          var dispose = options2.watch(() => buttons.map((button) => ({
            visible: this._isButtonVisible(button, options2),
            disabled: this._isButtonDisabled(button, options2)
          })), () => {
            $container.empty();
            this._renderEditingButtons($container, buttons, options2);
          });
          events_engine_default.on($container, removeEvent, dispose);
        }
      } else {
        m_utils_default.setEmptyText($container);
      }
    };
  }
  isRowBasedEditMode() {
    var editMode = this.getEditMode();
    return ROW_BASED_MODES.includes(editMode);
  }
  getFirstEditableColumnIndex() {
    var columnIndex;
    var visibleColumns = this._columnsController.getVisibleColumns();
    each(visibleColumns, (index, column) => {
      if (column.allowEditing) {
        columnIndex = index;
        return false;
      }
    });
    return columnIndex;
  }
  getFirstEditableCellInRow(rowIndex) {
    var _a;
    var columnIndex = this.getFirstEditableColumnIndex();
    return null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a._getCellElement(rowIndex || 0, columnIndex);
  }
  getFocusedCellInRow(rowIndex) {
    return this.getFirstEditableCellInRow(rowIndex);
  }
  getIndexByKey(key, items) {
    return m_utils_default.getIndexByKey(key, items);
  }
  hasChanges(rowIndex) {
    var changes = this.getChanges();
    var result2 = false;
    for (var i = 0; i < (null === changes || void 0 === changes ? void 0 : changes.length); i++) {
      if (changes[i].type && (!isDefined(rowIndex) || this._dataController.getRowIndexByKey(changes[i].key) === rowIndex)) {
        result2 = true;
        break;
      }
    }
    return result2;
  }
  dispose() {
    super.dispose();
    clearTimeout(this._inputFocusTimeoutID);
    events_engine_default.off(dom_adapter_default.getDocument(), pointer_default.up, this._pointerUpEditorHandler);
    events_engine_default.off(dom_adapter_default.getDocument(), pointer_default.down, this._pointerDownEditorHandler);
    events_engine_default.off(dom_adapter_default.getDocument(), CLICK_EVENT_NAME, this._saveEditorHandler);
  }
  _silentOption(name2, value2) {
    if ("editing.changes" === name2) {
      this._changes = deepExtendArraySafe([], value2);
    }
    super._silentOption(name2, value2);
  }
  optionChanged(args) {
    if ("editing" === args.name) {
      var {
        fullName
      } = args;
      if (fullName === EDITING_EDITROWKEY_OPTION_NAME) {
        this._handleEditRowKeyChange(args);
      } else if (fullName === EDITING_CHANGES_OPTION_NAME) {
        var isEqual = equalByValue(args.value, this._changes, {
          maxDepth: 4
        });
        if (!isEqual) {
          this._changes = deepExtendArraySafe([], args.value);
          this._handleChangesChange(args);
        }
      } else if (!args.handled) {
        this._columnsController.reinit();
        this.init();
        this.resetChanges();
        this._resetEditColumnName();
        this._resetEditRowKey();
      }
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _handleEditRowKeyChange(args) {
    var rowIndex = this._dataController.getRowIndexByKey(args.value);
    var oldRowIndexCorrection = this._getEditRowIndexCorrection();
    var oldRowIndex = this._dataController.getRowIndexByKey(args.previousValue) + oldRowIndexCorrection;
    if (isDefined(args.value)) {
      if (args.value !== args.previousValue) {
        this._editRowFromOptionChanged(rowIndex, oldRowIndex);
      }
    } else {
      this.cancelEditData();
    }
  }
  _handleChangesChange(args) {
    var dataController2 = this._dataController;
    var changes = args.value;
    if (!args.value.length && !args.previousValue.length) {
      return;
    }
    changes.forEach((change) => {
      var _a;
      if ("insert" === change.type) {
        this._addInsertInfo(change);
      } else {
        var items = dataController2.getCachedStoreData() || (null === (_a = dataController2.items()) || void 0 === _a ? void 0 : _a.map((item) => item.data));
        var rowIndex = m_utils_default.getIndexByKey(change.key, items, dataController2.key());
        this._addInternalData({
          key: change.key,
          oldData: items[rowIndex]
        });
      }
    });
    dataController2.updateItems({
      repaintChangesOnly: true,
      isLiveUpdate: false,
      isOptionChanged: true
    });
  }
  publicMethods() {
    return ["addRow", "deleteRow", "undeleteRow", "editRow", "saveEditData", "cancelEditData", "hasEditData"];
  }
  refresh() {
    if (!isDefined(this._pageIndex)) {
      return;
    }
    this._refreshCore.apply(this, arguments);
  }
  _refreshCore(params) {
  }
  isEditing() {
    var isEditRowKeyDefined = isDefined(this.option(EDITING_EDITROWKEY_OPTION_NAME));
    return isEditRowKeyDefined;
  }
  isEditRow(rowIndex) {
    return false;
  }
  _setEditRowKey(value2, silent) {
    if (silent) {
      this._silentOption(EDITING_EDITROWKEY_OPTION_NAME, value2);
    } else {
      this.option(EDITING_EDITROWKEY_OPTION_NAME, value2);
    }
    if (this._refocusEditCell) {
      this._refocusEditCell = false;
      this._focusEditingCell();
    }
  }
  _setEditRowKeyByIndex(rowIndex, silent) {
    var key = this._dataController.getKeyByRowIndex(rowIndex);
    if (void 0 === key) {
      this._dataController.fireError("E1043");
      return;
    }
    this._setEditRowKey(key, silent);
  }
  getEditRowIndex() {
    return this._getVisibleEditRowIndex();
  }
  getEditFormRowIndex() {
    return -1;
  }
  isEditRowByIndex(rowIndex) {
    var key = this._dataController.getKeyByRowIndex(rowIndex);
    var isKeyEqual = isDefined(key) && equalByValue(this.option(EDITING_EDITROWKEY_OPTION_NAME), key);
    if (isKeyEqual) {
      return this._getVisibleEditRowIndex() === rowIndex;
    }
    return isKeyEqual;
  }
  isEditCell(visibleRowIndex, columnIndex) {
    return this.isEditRowByIndex(visibleRowIndex) && this._getVisibleEditColumnIndex() === columnIndex;
  }
  getPopupContent() {
  }
  _isProcessedItem(item) {
    return false;
  }
  _getInsertRowIndex(items, change, isProcessedItems) {
    var result2 = -1;
    var dataController2 = this._dataController;
    var key = this._getInsertAfterOrBeforeKey(change);
    if (!isDefined(key) && 0 === items.length) {
      result2 = 0;
    } else if (isDefined(key)) {
      items.some((item, index) => {
        var isProcessedItem = isProcessedItems || this._isProcessedItem(item);
        if (isObject(item)) {
          if (isProcessedItem || isDefined(item[INSERT_INDEX])) {
            if (equalByValue(item.key, key)) {
              result2 = index;
            }
          } else if (equalByValue(dataController2.keyOf(item), key)) {
            result2 = index;
          }
        }
        if (result2 >= 0) {
          var nextItem = items[result2 + 1];
          if (nextItem && ("detail" === nextItem.rowType || "detailAdaptive" === nextItem.rowType) && isDefined(change.insertAfterKey)) {
            return;
          }
          if (isDefined(change.insertAfterKey)) {
            result2 += 1;
          }
          return true;
        }
      });
    }
    return result2;
  }
  _generateNewItem(key) {
    var _a;
    var item = {
      key
    };
    var insertInfo = null === (_a = this._getInternalData(key)) || void 0 === _a ? void 0 : _a.insertInfo;
    if (null === insertInfo || void 0 === insertInfo ? void 0 : insertInfo[INSERT_INDEX]) {
      item[INSERT_INDEX] = insertInfo[INSERT_INDEX];
    }
    return item;
  }
  _getLoadedRowIndex(items, change, isProcessedItems) {
    var loadedRowIndex = this._getInsertRowIndex(items, change, isProcessedItems);
    var dataController2 = this._dataController;
    if (loadedRowIndex < 0) {
      var newRowPosition = this._getNewRowPosition();
      var pageIndex = dataController2.pageIndex();
      var insertAfterOrBeforeKey = this._getInsertAfterOrBeforeKey(change);
      if (newRowPosition !== LAST_NEW_ROW_POSITION && 0 === pageIndex && !isDefined(insertAfterOrBeforeKey)) {
        loadedRowIndex = 0;
      } else if (newRowPosition === LAST_NEW_ROW_POSITION && dataController2.isLastPageLoaded()) {
        loadedRowIndex = items.length;
      }
    }
    return loadedRowIndex;
  }
  processItems(items, e) {
    var {
      changeType
    } = e;
    this.update(changeType);
    var changes = this.getChanges();
    changes.forEach((change) => {
      var _a;
      var isInsert = change.type === DATA_EDIT_DATA_INSERT_TYPE;
      if (!isInsert) {
        return;
      }
      var {
        key
      } = change;
      var insertInfo = null === (_a = this._getInternalData(key)) || void 0 === _a ? void 0 : _a.insertInfo;
      if (!isDefined(key) || !isDefined(insertInfo)) {
        insertInfo = this._addInsertInfo(change);
        key = insertInfo.key;
      }
      var loadedRowIndex = this._getLoadedRowIndex(items, change);
      var item = this._generateNewItem(key);
      if (loadedRowIndex >= 0) {
        items.splice(loadedRowIndex, 0, item);
      }
    });
    return items;
  }
  processDataItem(item, options2, generateDataValues) {
    var columns7 = options2.visibleColumns;
    var key = item.data[INSERT_INDEX] ? item.data.key : item.key;
    var changes = this.getChanges();
    var editIndex = m_utils_default.getIndexByKey(key, changes);
    item.isEditing = false;
    if (editIndex >= 0) {
      this._processDataItemCore(item, changes[editIndex], key, columns7, generateDataValues);
    }
  }
  _processDataItemCore(item, change, key, columns7, generateDataValues) {
    var {
      data: data17,
      type: type2
    } = change;
    switch (type2) {
      case DATA_EDIT_DATA_INSERT_TYPE:
        item.isNewRow = true;
        item.key = key;
        item.data = data17;
        break;
      case DATA_EDIT_DATA_UPDATE_TYPE:
        item.modified = true;
        item.oldData = item.data;
        item.data = createObjectWithChanges(item.data, data17);
        item.modifiedValues = generateDataValues(data17, columns7, true);
        break;
      case DATA_EDIT_DATA_REMOVE_TYPE:
        item.removed = true;
    }
  }
  _initNewRow(options2) {
    this.executeAction("onInitNewRow", options2);
    if (options2.promise) {
      var deferred = new Deferred();
      when(fromPromise(options2.promise)).done(deferred.resolve).fail(createFailureHandler(deferred)).fail((arg) => this._fireDataErrorOccurred(arg));
      return deferred;
    }
  }
  _createInsertInfo() {
    var insertInfo = {};
    insertInfo[INSERT_INDEX] = this._getInsertIndex();
    return insertInfo;
  }
  _addInsertInfo(change, parentKey) {
    var _a;
    var insertInfo;
    change.key = this.getChangeKeyValue(change);
    var {
      key
    } = change;
    insertInfo = null === (_a = this._getInternalData(key)) || void 0 === _a ? void 0 : _a.insertInfo;
    if (!isDefined(insertInfo)) {
      var insertAfterOrBeforeKey = this._getInsertAfterOrBeforeKey(change);
      insertInfo = this._createInsertInfo();
      if (!isDefined(insertAfterOrBeforeKey)) {
        this._setInsertAfterOrBeforeKey(change, parentKey);
      }
    }
    this._addInternalData({
      insertInfo,
      key
    });
    return {
      insertInfo,
      key
    };
  }
  getChangeKeyValue(change) {
    if (isDefined(change.key)) {
      return change.key;
    }
    var keyExpr = this._dataController.key();
    var keyValue;
    if (change.data && keyExpr && !Array.isArray(keyExpr)) {
      keyValue = change.data[keyExpr];
    }
    if (!isDefined(keyValue)) {
      keyValue = generateNewRowTempKey();
    }
    return keyValue;
  }
  _setInsertAfterOrBeforeKey(change, parentKey) {
    var rowsView17 = this.getView("rowsView");
    var dataController2 = this._dataController;
    var allItems = dataController2.items(true);
    var newRowPosition = this._getNewRowPosition();
    switch (newRowPosition) {
      case FIRST_NEW_ROW_POSITION:
      case LAST_NEW_ROW_POSITION:
        break;
      case PAGE_TOP_NEW_ROW_POSITION:
      case PAGE_BOTTOM_NEW_ROW_POSITION:
        if (allItems.length) {
          var itemIndex = newRowPosition === PAGE_TOP_NEW_ROW_POSITION ? 0 : allItems.length - 1;
          change[0 === itemIndex ? "insertBeforeKey" : "insertAfterKey"] = allItems[itemIndex].key;
        }
        break;
      default:
        var isViewportBottom = newRowPosition === VIEWPORT_BOTTOM_NEW_ROW_POSITION;
        var visibleItemIndex = isViewportBottom ? null === rowsView17 || void 0 === rowsView17 ? void 0 : rowsView17.getBottomVisibleItemIndex() : null === rowsView17 || void 0 === rowsView17 ? void 0 : rowsView17.getTopVisibleItemIndex();
        var row = dataController2.getVisibleRows()[visibleItemIndex];
        if (row && (!row.isEditing && "detail" === row.rowType || "detailAdaptive" === row.rowType)) {
          visibleItemIndex++;
        }
        var insertKey = dataController2.getKeyByRowIndex(visibleItemIndex);
        if (isDefined(insertKey)) {
          change.insertBeforeKey = insertKey;
        }
    }
  }
  _getInsertIndex() {
    var maxInsertIndex = 0;
    this.getChanges().forEach((editItem) => {
      var _a;
      var insertInfo = null === (_a = this._getInternalData(editItem.key)) || void 0 === _a ? void 0 : _a.insertInfo;
      if (isDefined(insertInfo) && editItem.type === DATA_EDIT_DATA_INSERT_TYPE && insertInfo[INSERT_INDEX] > maxInsertIndex) {
        maxInsertIndex = insertInfo[INSERT_INDEX];
      }
    });
    return maxInsertIndex + 1;
  }
  _getInsertAfterOrBeforeKey(insertChange) {
    var _a;
    return null !== (_a = insertChange.insertAfterKey) && void 0 !== _a ? _a : insertChange.insertBeforeKey;
  }
  _getPageIndexToInsertRow() {
    var newRowPosition = this._getNewRowPosition();
    var dataController2 = this._dataController;
    var pageIndex = dataController2.pageIndex();
    var lastPageIndex = dataController2.pageCount() - 1;
    if (newRowPosition === FIRST_NEW_ROW_POSITION && 0 !== pageIndex) {
      return 0;
    }
    if (newRowPosition === LAST_NEW_ROW_POSITION && pageIndex !== lastPageIndex) {
      return lastPageIndex;
    }
    return -1;
  }
  addRow(parentKey) {
    var dataController2 = this._dataController;
    var store = dataController2.store();
    if (!store) {
      dataController2.fireError("E1052", this.component.NAME);
      return new Deferred().reject();
    }
    return this._addRow(parentKey);
  }
  _addRow(parentKey) {
    var dataController2 = this._dataController;
    var store = dataController2.store();
    var key = store && store.key();
    var param = {
      data: {}
    };
    var oldEditRowIndex = this._getVisibleEditRowIndex();
    var deferred = new Deferred();
    this.refresh({
      allowCancelEditing: true
    });
    if (!this._allowRowAdding()) {
      when(this._navigateToNewRow(oldEditRowIndex)).done(deferred.resolve).fail(deferred.reject);
      return deferred.promise();
    }
    if (!key) {
      param.data.__KEY__ = String(new guid_default());
    }
    when(this._initNewRow(param, parentKey)).done(() => {
      if (this._allowRowAdding()) {
        when(this._addRowCore(param.data, parentKey, oldEditRowIndex)).done(deferred.resolve).fail(deferred.reject);
      } else {
        deferred.reject("cancel");
      }
    }).fail(deferred.reject);
    return deferred.promise();
  }
  _allowRowAdding(params) {
    var insertIndex = this._getInsertIndex();
    if (insertIndex > 1) {
      return false;
    }
    return true;
  }
  _addRowCore(data17, parentKey, initialOldEditRowIndex) {
    var change = {
      data: data17,
      type: DATA_EDIT_DATA_INSERT_TYPE
    };
    var editRowIndex = this._getVisibleEditRowIndex();
    var insertInfo = this._addInsertInfo(change, parentKey);
    var {
      key
    } = insertInfo;
    this._setEditRowKey(key, true);
    this._addChange(change);
    return this._navigateToNewRow(initialOldEditRowIndex, change, editRowIndex);
  }
  _navigateToNewRow(oldEditRowIndex, change, editRowIndex) {
    var d = new Deferred();
    var dataController2 = this._dataController;
    editRowIndex = null !== editRowIndex && void 0 !== editRowIndex ? editRowIndex : -1;
    change = null !== change && void 0 !== change ? change : this.getChanges().filter((c) => c.type === DATA_EDIT_DATA_INSERT_TYPE)[0];
    if (!change) {
      return d.reject("cancel").promise();
    }
    var pageIndexToInsertRow = this._getPageIndexToInsertRow();
    var rowIndex = this._getLoadedRowIndex(dataController2.items(), change, true);
    var navigateToRowByKey = (key) => {
      var _a;
      when(null === (_a = this._focusController) || void 0 === _a ? void 0 : _a.navigateToRow(key)).done(() => {
        rowIndex = dataController2.getRowIndexByKey(change.key);
        d.resolve();
      });
    };
    var insertAfterOrBeforeKey = this._getInsertAfterOrBeforeKey(change);
    if (pageIndexToInsertRow >= 0) {
      dataController2.pageIndex(pageIndexToInsertRow).done(() => {
        navigateToRowByKey(change.key);
      }).fail(d.reject);
    } else if (rowIndex < 0 && isDefined(insertAfterOrBeforeKey)) {
      navigateToRowByKey(insertAfterOrBeforeKey);
    } else {
      dataController2.updateItems({
        changeType: "update",
        rowIndices: [oldEditRowIndex, editRowIndex, rowIndex]
      });
      rowIndex = dataController2.getRowIndexByKey(change.key);
      if (rowIndex < 0) {
        navigateToRowByKey(change.key);
      } else {
        d.resolve();
      }
    }
    d.done(() => {
      var _a;
      null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.waitAsyncTemplates(true).done(() => {
        this._showAddedRow(rowIndex);
        this._afterInsertRow(change.key);
      });
    });
    return d.promise();
  }
  _showAddedRow(rowIndex) {
    this._focusFirstEditableCellInRow(rowIndex);
  }
  _beforeFocusElementInRow(rowIndex) {
  }
  _focusFirstEditableCellInRow(rowIndex) {
    var _a;
    var dataController2 = this._dataController;
    var key = dataController2.getKeyByRowIndex(rowIndex);
    var $firstCell = this.getFirstEditableCellInRow(rowIndex);
    null === (_a = this._keyboardNavigationController) || void 0 === _a ? void 0 : _a.focus($firstCell);
    this.option("focusedRowKey", key);
    this._editCellInProgress = true;
    this._delayedInputFocus($firstCell, () => {
      rowIndex = dataController2.getRowIndexByKey(key);
      this._editCellInProgress = false;
      this._beforeFocusElementInRow(rowIndex);
    });
  }
  _isEditingStart(options2) {
    this.executeAction("onEditingStart", options2);
    return options2.cancel;
  }
  _beforeUpdateItems(rowIndices, rowIndex) {
  }
  _getVisibleEditColumnIndex() {
    var editColumnName = this.option(EDITING_EDITCOLUMNNAME_OPTION_NAME);
    if (!isDefined(editColumnName)) {
      return -1;
    }
    return this._columnsController.getVisibleColumnIndex(editColumnName);
  }
  _setEditColumnNameByIndex(index, silent) {
    var _a;
    var visibleColumns = this._columnsController.getVisibleColumns();
    this._setEditColumnName(null === (_a = visibleColumns[index]) || void 0 === _a ? void 0 : _a.name, silent);
  }
  _setEditColumnName(name2, silent) {
    if (silent) {
      this._silentOption(EDITING_EDITCOLUMNNAME_OPTION_NAME, name2);
    } else {
      this.option(EDITING_EDITCOLUMNNAME_OPTION_NAME, name2);
    }
  }
  _resetEditColumnName() {
    this._setEditColumnName(null, true);
  }
  _getEditColumn() {
    var editColumnName = this.option(EDITING_EDITCOLUMNNAME_OPTION_NAME);
    return this._getColumnByName(editColumnName);
  }
  _getColumnByName(name2) {
    var visibleColumns = this._columnsController.getVisibleColumns();
    var editColumn;
    isDefined(name2) && visibleColumns.some((column) => {
      if (column.name === name2) {
        editColumn = column;
        return true;
      }
    });
    return editColumn;
  }
  _getVisibleEditRowIndex(columnName) {
    var dataController2 = this._dataController;
    var editRowKey = this.option(EDITING_EDITROWKEY_OPTION_NAME);
    var rowIndex = dataController2.getRowIndexByKey(editRowKey);
    if (-1 === rowIndex) {
      return rowIndex;
    }
    return rowIndex + this._getEditRowIndexCorrection(columnName);
  }
  _getEditRowIndexCorrection(columnName) {
    var editColumn = columnName ? this._getColumnByName(columnName) : this._getEditColumn();
    var isColumnHidden = "adaptiveHidden" === (null === editColumn || void 0 === editColumn ? void 0 : editColumn.visibleWidth);
    return isColumnHidden ? 1 : 0;
  }
  _resetEditRowKey() {
    this._refocusEditCell = false;
    this._setEditRowKey(null, true);
  }
  _resetEditIndices() {
    this._resetEditColumnName();
    this._resetEditRowKey();
  }
  editRow(rowIndex) {
    var _a;
    var dataController2 = this._dataController;
    var items = dataController2.items();
    var item = items[rowIndex];
    var params = {
      data: item && item.data,
      cancel: false
    };
    var oldRowIndex = this._getVisibleEditRowIndex();
    if (!item) {
      return;
    }
    if (rowIndex === oldRowIndex) {
      return true;
    }
    if (void 0 === item.key) {
      this._dataController.fireError("E1043");
      return;
    }
    if (!item.isNewRow) {
      params.key = item.key;
    }
    if (this._isEditingStart(params)) {
      return;
    }
    this.resetChanges();
    this.init();
    this._resetEditColumnName();
    this._pageIndex = dataController2.pageIndex();
    this._addInternalData({
      key: item.key,
      oldData: null !== (_a = item.oldData) && void 0 !== _a ? _a : item.data
    });
    this._setEditRowKey(item.key);
  }
  _editRowFromOptionChanged(rowIndex, oldRowIndex) {
    var rowIndices = [oldRowIndex, rowIndex];
    this._beforeUpdateItems(rowIndices, rowIndex, oldRowIndex);
    this._editRowFromOptionChangedCore(rowIndices, rowIndex);
  }
  _editRowFromOptionChangedCore(rowIndices, rowIndex, preventRendering) {
    this._needFocusEditor = true;
    this._dataController.updateItems({
      changeType: "update",
      rowIndices,
      cancel: preventRendering
    });
  }
  _focusEditorIfNeed() {
  }
  _showEditPopup(rowIndex, repaintForm) {
  }
  _repaintEditPopup() {
  }
  _getEditPopupHiddenHandler() {
    return (e) => {
      if (this.isEditing()) {
        this.cancelEditData();
      }
    };
  }
  _getPopupEditFormTemplate(rowIndex) {
  }
  _getSaveButtonConfig() {
    var buttonConfig = {
      text: this.option("editing.texts.saveRowChanges"),
      onClick: this.saveEditData.bind(this)
    };
    if (isFluent(current())) {
      buttonConfig.stylingMode = "contained";
      buttonConfig.type = "default";
    }
    return buttonConfig;
  }
  _getCancelButtonConfig() {
    var buttonConfig = {
      text: this.option("editing.texts.cancelRowChanges"),
      onClick: this.cancelEditData.bind(this)
    };
    if (isFluent(current())) {
      buttonConfig.stylingMode = "outlined";
    }
    return buttonConfig;
  }
  _removeInternalData(key) {
    this._internalState.delete(getKeyHash(key));
  }
  _updateInsertAfterOrBeforeKeys(changes, index) {
    var removeChange = changes[index];
    changes.forEach((change) => {
      if (change.type === DATA_EDIT_DATA_INSERT_TYPE) {
        var insertAfterOrBeforeKey = this._getInsertAfterOrBeforeKey(change);
        if (equalByValue(insertAfterOrBeforeKey, removeChange.key)) {
          change[isDefined(change.insertAfterKey) ? "insertAfterKey" : "insertBeforeKey"] = this._getInsertAfterOrBeforeKey(removeChange);
        }
      }
    });
  }
  _removeChange(index) {
    if (index >= 0) {
      var changes = [...this.getChanges()];
      var {
        key
      } = changes[index];
      this._removeInternalData(key);
      this._updateInsertAfterOrBeforeKeys(changes, index);
      changes.splice(index, 1);
      this._silentOption(EDITING_CHANGES_OPTION_NAME, changes);
      if (equalByValue(this.option(EDITING_EDITROWKEY_OPTION_NAME), key)) {
        this._resetEditIndices();
      }
    }
  }
  executeOperation(deferred, func2) {
    this._lastOperation && this._lastOperation.reject();
    this._lastOperation = deferred;
    this.waitForDeferredOperations().done(() => {
      if ("rejected" === deferred.state()) {
        return;
      }
      func2();
      this._lastOperation = null;
    }).fail(() => {
      deferred.reject();
      this._lastOperation = null;
    });
  }
  waitForDeferredOperations() {
    return when(...this._deferreds);
  }
  _processCanceledEditingCell() {
  }
  _repaintEditCell(column, oldColumn, oldEditRowIndex) {
    if (!column || !column.showEditorAlways || oldColumn && !oldColumn.showEditorAlways) {
      this._editCellInProgress = true;
      this._needFocusEditor = true;
      this._editorFactoryController.loseFocus();
      this._dataController.updateItems({
        changeType: "update",
        rowIndices: [oldEditRowIndex, this._getVisibleEditRowIndex()]
      });
    } else if (column !== oldColumn) {
      this._needFocusEditor = true;
      this._dataController.updateItems({
        changeType: "update",
        rowIndices: []
      });
    }
  }
  _delayedInputFocus($cell, beforeFocusCallback, callBeforeFocusCallbackAlways) {
    var inputFocus = () => {
      if (beforeFocusCallback) {
        beforeFocusCallback();
      }
      if ($cell) {
        var $focusableElement = $cell.find(FOCUSABLE_ELEMENT_SELECTOR).first();
        m_utils_default.focusAndSelectElement(this, $focusableElement);
      }
      this._beforeFocusCallback = null;
    };
    if (devices_default.real().ios || devices_default.real().android) {
      inputFocus();
    } else {
      if (this._beforeFocusCallback) {
        this._beforeFocusCallback();
      }
      clearTimeout(this._inputFocusTimeoutID);
      if (callBeforeFocusCallbackAlways) {
        this._beforeFocusCallback = beforeFocusCallback;
      }
      this._inputFocusTimeoutID = setTimeout(inputFocus);
    }
  }
  _focusEditingCell(beforeFocusCallback, $editCell, callBeforeFocusCallbackAlways) {
    var editColumnIndex = this._getVisibleEditColumnIndex();
    $editCell = $editCell || this._rowsView && this._rowsView._getCellElement(this._getVisibleEditRowIndex(), editColumnIndex);
    if ($editCell) {
      this._delayedInputFocus($editCell, beforeFocusCallback, callBeforeFocusCallbackAlways);
    }
  }
  deleteRow(rowIndex) {
    this._checkAndDeleteRow(rowIndex);
  }
  _checkAndDeleteRow(rowIndex) {
    var editingOptions = this.option("editing");
    var editingTexts = null === editingOptions || void 0 === editingOptions ? void 0 : editingOptions.texts;
    var confirmDelete = null === editingOptions || void 0 === editingOptions ? void 0 : editingOptions.confirmDelete;
    var confirmDeleteMessage = null === editingTexts || void 0 === editingTexts ? void 0 : editingTexts.confirmDeleteMessage;
    var item = this._dataController.items()[rowIndex];
    var allowDeleting = !this.isEditing() || item.isNewRow;
    if (item && allowDeleting) {
      if (!confirmDelete || !confirmDeleteMessage) {
        this._deleteRowCore(rowIndex);
      } else {
        var confirmDeleteTitle = editingTexts && editingTexts.confirmDeleteTitle;
        var showDialogTitle = isDefined(confirmDeleteTitle) && confirmDeleteTitle.length > 0;
        confirm(confirmDeleteMessage, confirmDeleteTitle, showDialogTitle).done((confirmResult) => {
          if (confirmResult) {
            this._deleteRowCore(rowIndex);
          }
        });
      }
    }
  }
  _deleteRowCore(rowIndex) {
    var dataController2 = this._dataController;
    var item = dataController2.items()[rowIndex];
    var key = item && item.key;
    var oldEditRowIndex = this._getVisibleEditRowIndex();
    this.refresh();
    var changes = this.getChanges();
    var editIndex = m_utils_default.getIndexByKey(key, changes);
    if (editIndex >= 0) {
      if (changes[editIndex].type === DATA_EDIT_DATA_INSERT_TYPE) {
        this._removeChange(editIndex);
      } else {
        this._addChange({
          key,
          type: DATA_EDIT_DATA_REMOVE_TYPE
        });
      }
    } else {
      this._addChange({
        key,
        oldData: item.data,
        type: DATA_EDIT_DATA_REMOVE_TYPE
      });
    }
    return this._afterDeleteRow(rowIndex, oldEditRowIndex);
  }
  _afterDeleteRow(rowIndex, oldEditRowIndex) {
    return this.saveEditData();
  }
  undeleteRow(rowIndex) {
    var dataController2 = this._dataController;
    var item = dataController2.items()[rowIndex];
    var oldEditRowIndex = this._getVisibleEditRowIndex();
    var key = item && item.key;
    var changes = this.getChanges();
    if (item) {
      var editIndex = m_utils_default.getIndexByKey(key, changes);
      if (editIndex >= 0) {
        var {
          data: data17
        } = changes[editIndex];
        if (isEmptyObject(data17)) {
          this._removeChange(editIndex);
        } else {
          this._addChange({
            key,
            type: DATA_EDIT_DATA_UPDATE_TYPE
          });
        }
        dataController2.updateItems({
          changeType: "update",
          rowIndices: [oldEditRowIndex, rowIndex]
        });
      }
    }
  }
  _fireOnSaving() {
    var onSavingParams = {
      cancel: false,
      promise: null,
      changes: [...this.getChanges()]
    };
    this.executeAction("onSaving", onSavingParams);
    var d = new Deferred();
    when(fromPromise(onSavingParams.promise)).done(() => {
      d.resolve(onSavingParams);
    }).fail((arg) => {
      createFailureHandler(d);
      this._fireDataErrorOccurred(arg);
      d.resolve({
        cancel: true
      });
    });
    return d;
  }
  _executeEditingAction(actionName, params, func2) {
    if (this.component._disposed) {
      return null;
    }
    var deferred = new Deferred();
    this.executeAction(actionName, params);
    when(fromPromise(params.cancel)).done((cancel) => {
      if (cancel) {
        setTimeout(() => {
          deferred.resolve("cancel");
        });
      } else {
        func2(params).done(deferred.resolve).fail(createFailureHandler(deferred));
      }
    }).fail(createFailureHandler(deferred));
    return deferred;
  }
  _processChanges(deferreds, results, dataChanges, changes) {
    var store = this._dataController.store();
    each(changes, (index, change) => {
      var oldData = this._getOldData(change.key);
      var {
        data: data17,
        type: type2
      } = change;
      var changeCopy = _extends({}, change);
      var deferred;
      var params;
      if (this._beforeSaveEditData(change, index)) {
        return;
      }
      switch (type2) {
        case DATA_EDIT_DATA_REMOVE_TYPE:
          params = {
            data: oldData,
            key: change.key,
            cancel: false
          };
          deferred = this._executeEditingAction("onRowRemoving", params, () => store.remove(change.key).done((key) => {
            dataChanges.push({
              type: "remove",
              key
            });
          }));
          break;
        case DATA_EDIT_DATA_INSERT_TYPE:
          params = {
            data: data17,
            cancel: false
          };
          deferred = this._executeEditingAction("onRowInserting", params, () => store.insert(params.data).done((data18, key) => {
            if (isDefined(key)) {
              changeCopy.key = key;
            }
            if (data18 && isObject(data18) && data18 !== params.data) {
              changeCopy.data = data18;
            }
            dataChanges.push({
              type: "insert",
              data: data18,
              index: 0
            });
          }));
          break;
        case DATA_EDIT_DATA_UPDATE_TYPE:
          params = {
            newData: data17,
            oldData,
            key: change.key,
            cancel: false
          };
          deferred = this._executeEditingAction("onRowUpdating", params, () => store.update(change.key, params.newData).done((data18, key) => {
            if (data18 && isObject(data18) && data18 !== params.newData) {
              changeCopy.data = data18;
            }
            dataChanges.push({
              type: "update",
              key,
              data: data18
            });
          }));
      }
      changes[index] = changeCopy;
      if (deferred) {
        var doneDeferred = new Deferred();
        deferred.always((data18) => {
          results.push({
            key: change.key,
            result: data18
          });
        }).always(doneDeferred.resolve);
        deferreds.push(doneDeferred.promise());
      }
    });
  }
  _processRemoveIfError(changes, editIndex) {
    var change = changes[editIndex];
    if ((null === change || void 0 === change ? void 0 : change.type) === DATA_EDIT_DATA_REMOVE_TYPE) {
      if (editIndex >= 0) {
        changes.splice(editIndex, 1);
      }
    }
    return true;
  }
  _processRemove(changes, editIndex, cancel) {
    var change = changes[editIndex];
    if (!cancel || !change || change.type === DATA_EDIT_DATA_REMOVE_TYPE) {
      return this._processRemoveCore(changes, editIndex, !cancel || !change);
    }
  }
  _processRemoveCore(changes, editIndex, processIfBatch) {
    if (editIndex >= 0) {
      changes.splice(editIndex, 1);
    }
    return true;
  }
  _processSaveEditDataResult(results) {
    var hasSavedData = false;
    var originalChanges = this.getChanges();
    var changes = [...originalChanges];
    var changesLength = changes.length;
    for (var i = 0; i < results.length; i++) {
      var arg = results[i].result;
      var cancel = "cancel" === arg;
      var editIndex = m_utils_default.getIndexByKey(results[i].key, changes);
      var change = changes[editIndex];
      var isError = arg && arg instanceof Error;
      if (isError) {
        if (change) {
          this._addInternalData({
            key: change.key,
            error: arg
          });
        }
        this._fireDataErrorOccurred(arg);
        if (this._processRemoveIfError(changes, editIndex)) {
          break;
        }
      } else if (this._processRemove(changes, editIndex, cancel)) {
        hasSavedData = !cancel;
        var removedChangeIndex = m_utils_default.getIndexByKey(results[i].key, originalChanges);
        this._updateInsertAfterOrBeforeKeys(originalChanges, removedChangeIndex);
      }
    }
    if (changes.length < changesLength) {
      this._silentOption(EDITING_CHANGES_OPTION_NAME, changes);
    }
    return hasSavedData;
  }
  _fireSaveEditDataEvents(changes) {
    each(changes, (_, _ref) => {
      var {
        data: data17,
        key,
        type: type2
      } = _ref;
      var internalData = this._addInternalData({
        key
      });
      var params = {
        key,
        data: data17
      };
      if (internalData.error) {
        params.error = internalData.error;
      }
      switch (type2) {
        case DATA_EDIT_DATA_REMOVE_TYPE:
          this.executeAction("onRowRemoved", extend({}, params, {
            data: internalData.oldData
          }));
          break;
        case DATA_EDIT_DATA_INSERT_TYPE:
          this.executeAction("onRowInserted", params);
          break;
        case DATA_EDIT_DATA_UPDATE_TYPE:
          this.executeAction("onRowUpdated", params);
      }
    });
    this.executeAction("onSaved", {
      changes
    });
  }
  saveEditData() {
    var deferred = new Deferred();
    this.waitForDeferredOperations().done(() => {
      if (this.isSaving()) {
        this._resolveAfterSave(deferred);
        return;
      }
      when(this._beforeSaveEditData()).done((cancel) => {
        if (cancel) {
          this._resolveAfterSave(deferred, {
            cancel
          });
          return;
        }
        this._saving = true;
        this._saveEditDataInner().always(() => {
          this._saving = false;
          if (this._refocusEditCell) {
            this._focusEditingCell();
          }
        }).done(deferred.resolve).fail(deferred.reject);
      }).fail(deferred.reject);
    }).fail(deferred.reject);
    return deferred.promise();
  }
  _resolveAfterSave(deferred) {
    var {
      cancel,
      error
    } = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    when(this._afterSaveEditData(cancel)).done(() => {
      deferred.resolve(error);
    }).fail(deferred.reject);
  }
  _saveEditDataInner() {
    var result2 = new Deferred();
    var results = [];
    var deferreds = [];
    var dataChanges = [];
    var dataSource = this._dataController.dataSource();
    when(this._fireOnSaving()).done((_ref2) => {
      var {
        cancel,
        changes
      } = _ref2;
      if (cancel) {
        return result2.resolve().promise();
      }
      this._processChanges(deferreds, results, dataChanges, changes);
      if (deferreds.length) {
        this._refocusEditCell = true;
        null === dataSource || void 0 === dataSource ? void 0 : dataSource.beginLoading();
        when(...deferreds).done(() => {
          if (this._processSaveEditDataResult(results)) {
            this._endSaving(dataChanges, changes, result2);
          } else {
            null === dataSource || void 0 === dataSource ? void 0 : dataSource.endLoading();
            result2.resolve();
          }
        }).fail((error) => {
          null === dataSource || void 0 === dataSource ? void 0 : dataSource.endLoading();
          result2.resolve(error);
        });
        return result2.always(() => {
          this._refocusEditCell = true;
        }).promise();
      }
      this._cancelSaving(result2);
    }).fail(result2.reject);
    return result2.promise();
  }
  _beforeEndSaving(changes) {
    this._resetEditIndices();
  }
  _endSaving(dataChanges, changes, deferred) {
    var dataSource = this._dataController.dataSource();
    this._beforeEndSaving(changes);
    null === dataSource || void 0 === dataSource ? void 0 : dataSource.endLoading();
    this._refreshDataAfterSave(dataChanges, changes, deferred);
  }
  _cancelSaving(result2) {
    this.executeAction("onSaved", {
      changes: []
    });
    this._resolveAfterSave(result2);
  }
  _refreshDataAfterSave(dataChanges, changes, deferred) {
    var dataController2 = this._dataController;
    var refreshMode = this.option("editing.refreshMode");
    var isFullRefresh = "reshape" !== refreshMode && "repaint" !== refreshMode;
    if (!isFullRefresh) {
      dataController2.push(dataChanges);
    }
    when(dataController2.refresh({
      selection: isFullRefresh,
      reload: isFullRefresh,
      load: "reshape" === refreshMode,
      changesOnly: this.option("repaintChangesOnly")
    })).always(() => {
      this._fireSaveEditDataEvents(changes);
    }).done(() => {
      this._resolveAfterSave(deferred);
    }).fail((error) => {
      this._resolveAfterSave(deferred, {
        error
      });
    });
  }
  isSaving() {
    return this._saving;
  }
  _updateEditColumn() {
    var isEditColumnVisible = this._isEditColumnVisible();
    var useIcons = this.option("editing.useIcons");
    var cssClass = COMMAND_EDIT_CLASS + (useIcons ? " ".concat(COMMAND_EDIT_WITH_ICONS_CLASS) : "");
    this._columnsController.addCommandColumn({
      type: "buttons",
      command: "edit",
      visible: isEditColumnVisible,
      cssClass,
      width: "auto",
      alignment: "center",
      cellTemplate: this._getEditCommandCellTemplate(),
      fixedPosition: "right"
    });
    this._columnsController.columnOption("command:edit", {
      visible: isEditColumnVisible,
      cssClass
    });
  }
  _isEditColumnVisible() {
    var editingOptions = this.option("editing");
    return editingOptions.allowDeleting;
  }
  _isEditButtonDisabled() {
    var hasChanges = this.hasChanges();
    var isEditRowDefined = isDefined(this.option("editing.editRowKey"));
    return !(isEditRowDefined || hasChanges);
  }
  _updateEditButtons() {
    var isButtonDisabled = this._isEditButtonDisabled();
    if (this._headerPanelView) {
      this._headerPanelView.setToolbarItemDisabled("saveButton", isButtonDisabled);
      this._headerPanelView.setToolbarItemDisabled("revertButton", isButtonDisabled);
    }
  }
  _applyModified($element, options2) {
    $element && $element.addClass(CELL_MODIFIED);
  }
  _beforeCloseEditCellInBatchMode(rowIndices) {
  }
  cancelEditData() {
    var changes = this.getChanges();
    var params = {
      cancel: false,
      changes
    };
    this.executeAction("onEditCanceling", params);
    if (!params.cancel) {
      this._cancelEditDataCore();
      this.executeAction("onEditCanceled", {
        changes
      });
    }
  }
  _cancelEditDataCore() {
    var rowIndex = this._getVisibleEditRowIndex();
    this._beforeCancelEditData();
    this.init();
    this.resetChanges();
    this._resetEditColumnName();
    this._resetEditRowKey();
    this._afterCancelEditData(rowIndex);
  }
  _afterCancelEditData(rowIndex) {
    var dataController2 = this._dataController;
    dataController2.updateItems({
      repaintChangesOnly: this.option("repaintChangesOnly")
    });
  }
  _hideEditPopup() {
  }
  hasEditData() {
    return this.hasChanges();
  }
  update(changeType) {
    var dataController2 = this._dataController;
    if (dataController2 && this._pageIndex !== dataController2.pageIndex()) {
      if ("refresh" === changeType) {
        this.refresh({
          isPageChanged: true
        });
      }
      this._pageIndex = dataController2.pageIndex();
    }
    this._updateEditButtons();
  }
  _getRowIndicesForCascadeUpdating(row, skipCurrentRow) {
    return skipCurrentRow ? [] : [row.rowIndex];
  }
  addDeferred(deferred) {
    if (!this._deferreds.includes(deferred)) {
      this._deferreds.push(deferred);
      deferred.always(() => {
        var index = this._deferreds.indexOf(deferred);
        if (index >= 0) {
          this._deferreds.splice(index, 1);
        }
      });
    }
  }
  _prepareChange(options2, value2, text) {
    var _a;
    var newData = {};
    var oldData = null === (_a = options2.row) || void 0 === _a ? void 0 : _a.data;
    var rowKey = options2.key;
    var deferred = new Deferred();
    if (void 0 !== rowKey) {
      options2.value = value2;
      var setCellValueResult = fromPromise(options2.column.setCellValue(newData, value2, extend(true, {}, oldData), text));
      setCellValueResult.done(() => {
        deferred.resolve({
          data: newData,
          key: rowKey,
          oldData,
          type: DATA_EDIT_DATA_UPDATE_TYPE
        });
      }).fail(createFailureHandler(deferred)).fail((arg) => this._fireDataErrorOccurred(arg));
      if (isDefined(text) && options2.column.displayValueMap) {
        options2.column.displayValueMap[value2] = text;
      }
      this._updateRowValues(options2);
      this.addDeferred(deferred);
    }
    return deferred;
  }
  _updateRowValues(options2) {
    if (options2.values) {
      var dataController2 = this._dataController;
      var rowIndex = dataController2.getRowIndexByKey(options2.key);
      var row = dataController2.getVisibleRows()[rowIndex];
      if (row) {
        options2.row.values = row.values;
        options2.values = row.values;
      }
      options2.values[options2.columnIndex] = options2.value;
    }
  }
  updateFieldValue(options2, value2, text, forceUpdateRow) {
    var rowKey = options2.key;
    var deferred = new Deferred();
    if (void 0 === rowKey) {
      this._dataController.fireError("E1043");
    }
    if (options2.column.setCellValue) {
      this._prepareChange(options2, value2, text).done((params) => {
        when(this._applyChange(options2, params, forceUpdateRow)).always(() => {
          deferred.resolve();
        });
      });
    } else {
      deferred.resolve();
    }
    return deferred.promise();
  }
  _focusPreviousEditingCellIfNeed(options2) {
    if (this.hasEditData() && !this.isEditCell(options2.rowIndex, options2.columnIndex)) {
      this._focusEditingCell();
      this._updateEditRow(options2.row, true);
      return true;
    }
  }
  _needUpdateRow(column) {
    var visibleColumns = this._columnsController.getVisibleColumns();
    if (!column) {
      column = this._getEditColumn();
    }
    var isCustomSetCellValue = column && column.setCellValue !== column.defaultSetCellValue;
    var isCustomCalculateCellValue = visibleColumns.some((visibleColumn) => visibleColumn.calculateCellValue !== visibleColumn.defaultCalculateCellValue);
    return isCustomSetCellValue || isCustomCalculateCellValue;
  }
  _applyChange(options2, params, forceUpdateRow) {
    var changeOptions = _extends(_extends({}, options2), {
      forceUpdateRow
    });
    this._addChange(params, changeOptions);
    this._updateEditButtons();
    return this._applyChangeCore(options2, changeOptions.forceUpdateRow);
  }
  _applyChangeCore(options2, forceUpdateRow) {
    var isCustomSetCellValue = options2.column.setCellValue !== options2.column.defaultSetCellValue;
    var {
      row
    } = options2;
    if (row) {
      if (forceUpdateRow || isCustomSetCellValue) {
        this._updateEditRow(row, forceUpdateRow, isCustomSetCellValue);
      } else if (row.update) {
        row.update();
      }
    }
  }
  _updateEditRowCore(row, skipCurrentRow, isCustomSetCellValue) {
    this._dataController.updateItems({
      changeType: "update",
      rowIndices: this._getRowIndicesForCascadeUpdating(row, skipCurrentRow)
    });
  }
  _updateEditRow(row, forceUpdateRow, isCustomSetCellValue) {
    if (forceUpdateRow) {
      this._updateRowImmediately(row, forceUpdateRow, isCustomSetCellValue);
    } else {
      this._updateRowWithDelay(row, isCustomSetCellValue);
    }
  }
  _updateRowImmediately(row, forceUpdateRow, isCustomSetCellValue) {
    this._updateEditRowCore(row, !forceUpdateRow, isCustomSetCellValue);
    this._validateEditFormAfterUpdate(row, isCustomSetCellValue);
    if (!forceUpdateRow) {
      this._focusEditingCell();
    }
  }
  _updateRowWithDelay(row, isCustomSetCellValue) {
    var deferred = new Deferred();
    this.addDeferred(deferred);
    setTimeout(() => {
      var _a;
      var elementContainer = (null === (_a = this._editForm) || void 0 === _a ? void 0 : _a.element()) || this.component.$element().get(0);
      var $focusedElement = renderer_default(dom_adapter_default.getActiveElement(elementContainer));
      var columnIndex = this._rowsView.getCellIndex($focusedElement, row.rowIndex);
      var focusedElement = $focusedElement.get(0);
      var selectionRange = m_utils_default.getSelectionRange(focusedElement);
      this._updateEditRowCore(row, false, isCustomSetCellValue);
      this._validateEditFormAfterUpdate(row, isCustomSetCellValue);
      if (columnIndex >= 0) {
        var $focusedItem = this._rowsView._getCellElement(row.rowIndex, columnIndex);
        this._delayedInputFocus($focusedItem, () => {
          setTimeout(() => {
            var _a2;
            focusedElement = dom_adapter_default.getActiveElement(null === (_a2 = this.component.$element()) || void 0 === _a2 ? void 0 : _a2.get(0));
            if (selectionRange.selectionStart >= 0) {
              m_utils_default.setSelectionRange(focusedElement, selectionRange);
            }
          });
        });
      }
      deferred.resolve();
    });
  }
  _validateEditFormAfterUpdate() {
  }
  _addChange(changeParams, options2) {
    var _a;
    var row = null === options2 || void 0 === options2 ? void 0 : options2.row;
    var changes = [...this.getChanges()];
    var index = m_utils_default.getIndexByKey(changeParams.key, changes);
    if (index < 0) {
      index = changes.length;
      this._addInternalData({
        key: changeParams.key,
        oldData: changeParams.oldData
      });
      delete changeParams.oldData;
      changes.push(changeParams);
    }
    var change = _extends({}, changes[index]);
    if (change) {
      if (changeParams.data) {
        change.data = createObjectWithChanges(change.data, changeParams.data);
      }
      if ((!change.type || !changeParams.data) && changeParams.type) {
        change.type = changeParams.type;
      }
      if (row) {
        row.oldData = this._getOldData(row.key);
        row.data = createObjectWithChanges(row.data, changeParams.data);
      }
    }
    changes[index] = change;
    this._silentOption(EDITING_CHANGES_OPTION_NAME, changes);
    if (options2 && change !== (null === (_a = this.getChanges()) || void 0 === _a ? void 0 : _a[index])) {
      options2.forceUpdateRow = true;
    }
    return change;
  }
  _getFormEditItemTemplate(cellOptions, column) {
    return column.editCellTemplate || this._getDefaultEditorTemplate();
  }
  getColumnTemplate(options2) {
    var {
      column
    } = options2;
    var rowIndex = options2.row && options2.row.rowIndex;
    var template;
    var isRowMode = this.isRowBasedEditMode();
    var isRowEditing = this.isEditRow(rowIndex);
    var isCellEditing = this.isEditCell(rowIndex, options2.columnIndex);
    var editingStartOptions;
    if ((column.showEditorAlways || column.setCellValue && (isRowEditing && column.allowEditing || isCellEditing)) && ("data" === options2.rowType || "detailAdaptive" === options2.rowType) && !column.command) {
      var allowUpdating = this.allowUpdating(options2);
      if (((allowUpdating || isRowEditing) && column.allowEditing || isCellEditing) && (isRowEditing || !isRowMode)) {
        if (column.showEditorAlways && !isRowMode) {
          editingStartOptions = {
            cancel: false,
            key: options2.row.isNewRow ? void 0 : options2.row.key,
            data: options2.row.data,
            column
          };
          this._isEditingStart(editingStartOptions);
        }
        if (!editingStartOptions || !editingStartOptions.cancel) {
          options2.setValue = (value2, text) => {
            this.updateFieldValue(options2, value2, text);
          };
        }
      }
      template = column.editCellTemplate || this._getDefaultEditorTemplate();
    } else if ("detail" === column.command && "detail" === options2.rowType && isRowEditing) {
      template = null === this || void 0 === this ? void 0 : this.getEditFormTemplate(options2);
    }
    return template;
  }
  _createButton($container, button, options2, change) {
    var icon = EDIT_ICON_CLASS[button.name];
    var useIcons = this.option("editing.useIcons");
    var useLegacyColumnButtonTemplate = this.option("useLegacyColumnButtonTemplate");
    var $button = renderer_default("<a>").attr("href", "#").addClass(LINK_CLASS).addClass(button.cssClass);
    if (button.template && useLegacyColumnButtonTemplate) {
      this._rowsView.renderTemplate($container, button.template, options2, true);
    } else {
      if (button.template) {
        $button = renderer_default("<span>").addClass(button.cssClass);
      } else if (useIcons && icon || button.icon) {
        icon = button.icon || icon;
        var iconType = getImageSourceType(icon);
        if ("image" === iconType || "svg" === iconType) {
          $button = getImageContainer(icon).addClass(button.cssClass);
        } else {
          $button.addClass("dx-icon".concat("dxIcon" === iconType ? "-" : " ").concat(icon)).attr("title", button.text);
        }
        $button.addClass(LINK_ICON_CLASS);
        $container.addClass(COMMAND_EDIT_WITH_ICONS_CLASS);
        var localizationName = this.getButtonLocalizationNames()[button.name];
        localizationName && $button.attr("aria-label", message_default.format(localizationName));
      } else {
        $button.text(button.text);
      }
      if (isDefined(button.hint)) {
        $button.attr("title", button.hint);
      }
      if (this._isButtonDisabled(button, options2)) {
        $button.addClass("dx-state-disabled");
      } else if (!button.template || button.onClick) {
        events_engine_default.on($button, addNamespace("click", EDITING_NAMESPACE), this.createAction((e) => {
          var _a;
          null === (_a = button.onClick) || void 0 === _a ? void 0 : _a.call(button, extend({}, e, {
            row: options2.row,
            column: options2.column
          }));
          e.event.preventDefault();
          e.event.stopPropagation();
        }));
      }
      $container.append($button, "&nbsp;");
      if (button.template) {
        options2.renderAsync = false;
        this._rowsView.renderTemplate($button, button.template, options2, true, change);
      }
    }
  }
  getButtonLocalizationNames() {
    return {
      edit: "dxDataGrid-editingEditRow",
      save: "dxDataGrid-editingSaveRowChanges",
      delete: "dxDataGrid-editingDeleteRow",
      undelete: "dxDataGrid-editingUndeleteRow",
      cancel: "dxDataGrid-editingCancelRowChanges"
    };
  }
  prepareButtonItem(headerPanel8, name2, methodName, sortIndex) {
    var _a;
    var editingTexts = null !== (_a = this.option("editing.texts")) && void 0 !== _a ? _a : {};
    var titleButtonTextByClassNames = {
      revert: editingTexts.cancelAllChanges,
      save: editingTexts.saveAllChanges,
      addRow: editingTexts.addRow
    };
    var className = {
      revert: "cancel",
      save: "save",
      addRow: "addrow"
    }[name2];
    var hintText = titleButtonTextByClassNames[name2];
    var isButtonDisabled = ("save" === className || "cancel" === className) && this._isEditButtonDisabled();
    return {
      widget: "dxButton",
      options: {
        onInitialized: (e) => {
          renderer_default(e.element).addClass(headerPanel8._getToolbarButtonClass("".concat(EDIT_BUTTON_CLASS, " ").concat(this.addWidgetPrefix(className), "-button")));
        },
        icon: "edit-button-".concat(className),
        disabled: isButtonDisabled,
        onClick: () => {
          setTimeout(() => {
            this[methodName]();
          });
        },
        text: hintText,
        hint: hintText
      },
      showText: "inMenu",
      name: "".concat(name2, "Button"),
      location: "after",
      locateInMenu: "auto",
      sortIndex
    };
  }
  prepareEditButtons(headerPanel8) {
    var _a;
    var editingOptions = null !== (_a = this.option("editing")) && void 0 !== _a ? _a : {};
    var buttonItems = [];
    if (editingOptions.allowAdding) {
      buttonItems.push(this.prepareButtonItem(headerPanel8, "addRow", "addRow", 20));
    }
    return buttonItems;
  }
  highlightDataCell($cell, params) {
    this.shouldHighlightCell(params) && $cell.addClass(CELL_MODIFIED);
  }
  _afterInsertRow(key) {
  }
  _beforeSaveEditData(change) {
    if (change && !isDefined(change.key) && isDefined(change.type)) {
      return true;
    }
  }
  _afterSaveEditData() {
  }
  _beforeCancelEditData() {
  }
  _allowEditAction(actionName, options2) {
    var allowEditAction = this.option("editing.".concat(actionName));
    if (isFunction(allowEditAction)) {
      allowEditAction = allowEditAction({
        component: this.component,
        row: options2.row
      });
    }
    return allowEditAction;
  }
  allowUpdating(options2, eventName) {
    var _a;
    var startEditAction = null !== (_a = this.option("editing.startEditAction")) && void 0 !== _a ? _a : DEFAULT_START_EDIT_ACTION;
    var needCallback = arguments.length > 1 ? startEditAction === eventName || "down" === eventName : true;
    return needCallback && this._allowEditAction("allowUpdating", options2);
  }
  allowDeleting(options2) {
    return this._allowEditAction("allowDeleting", options2);
  }
  isCellModified(parameters) {
    var _a, _b, _c;
    var {
      columnIndex
    } = parameters;
    var modifiedValue = null === (_b = null === (_a = null === parameters || void 0 === parameters ? void 0 : parameters.row) || void 0 === _a ? void 0 : _a.modifiedValues) || void 0 === _b ? void 0 : _b[columnIndex];
    if (null === (_c = null === parameters || void 0 === parameters ? void 0 : parameters.row) || void 0 === _c ? void 0 : _c.isNewRow) {
      modifiedValue = parameters.value;
    }
    return void 0 !== modifiedValue;
  }
  isNewRowInEditMode() {
    var visibleEditRowIndex = this._getVisibleEditRowIndex();
    var rows = this._dataController.items();
    return visibleEditRowIndex >= 0 ? rows[visibleEditRowIndex].isNewRow : false;
  }
  _isRowDeleteAllowed() {
  }
  shouldHighlightCell(parameters) {
    var cellModified = this.isCellModified(parameters);
    return cellModified && parameters.column.setCellValue && (this.getEditMode() !== EDIT_MODE_ROW || !parameters.row.isEditing);
  }
};
var dataControllerEditingExtenderMixin = (Base) => class extends Base {
  reload(full, repaintChangesOnly) {
    !repaintChangesOnly && this._editingController.refresh();
    return super.reload.apply(this, arguments);
  }
  repaintRows() {
    if (this._editingController.isSaving()) {
      return;
    }
    return super.repaintRows.apply(this, arguments);
  }
  _updateEditRow(items) {
    var _a;
    var editRowKey = this.option(EDITING_EDITROWKEY_OPTION_NAME);
    var editRowIndex = m_utils_default.getIndexByKey(editRowKey, items);
    var editItem = items[editRowIndex];
    if (editItem) {
      editItem.isEditing = true;
      null === (_a = this._updateEditItem) || void 0 === _a ? void 0 : _a.call(this, editItem);
    }
  }
  _updateItemsCore(change) {
    super._updateItemsCore(change);
    this._updateEditRow(this.items(true));
  }
  _applyChangeUpdate(change) {
    this._updateEditRow(change.items);
    super._applyChangeUpdate(change);
  }
  _applyChangesOnly(change) {
    this._updateEditRow(change.items);
    super._applyChangesOnly(change);
  }
  _processItems(items, change) {
    items = this._editingController.processItems(items, change);
    return super._processItems(items, change);
  }
  _processDataItem(dataItem, options2) {
    this._editingController.processDataItem(dataItem, options2, this.generateDataValues);
    return super._processDataItem(dataItem, options2);
  }
  _processItem(item, options2) {
    item = super._processItem(item, options2);
    if (item.isNewRow) {
      options2.dataIndex--;
      delete item.dataIndex;
    }
    return item;
  }
  _getChangedColumnIndices(oldItem, newItem, rowIndex, isLiveUpdate) {
    if (oldItem.isNewRow !== newItem.isNewRow || oldItem.removed !== newItem.removed) {
      return;
    }
    return super._getChangedColumnIndices.apply(this, arguments);
  }
  _isCellChanged(oldRow, newRow, visibleRowIndex, columnIndex, isLiveUpdate) {
    var cell = oldRow.cells && oldRow.cells[columnIndex];
    var isEditing = this._editingController && this._editingController.isEditCell(visibleRowIndex, columnIndex);
    if (isLiveUpdate && isEditing) {
      return false;
    }
    if (cell && cell.column && !cell.column.showEditorAlways && cell.isEditing !== isEditing) {
      return true;
    }
    return super._isCellChanged.apply(this, arguments);
  }
  needToRefreshOnDataSourceChange(args) {
    var isParasiteChange = Array.isArray(args.value) && args.value === args.previousValue && this._editingController.isSaving();
    return !isParasiteChange;
  }
  _handleDataSourceChange(args) {
    var result2 = super._handleDataSourceChange(args);
    var changes = this.option("editing.changes");
    var dataSource = args.value;
    if (Array.isArray(dataSource) && changes.length) {
      var dataSourceKeys = dataSource.map((item) => this.keyOf(item));
      var newChanges = changes.filter((change) => "insert" === change.type || dataSourceKeys.some((key) => equalByValue(change.key, key)));
      if (newChanges.length !== changes.length) {
        this.option("editing.changes", newChanges);
      }
      var editRowKey = this.option("editing.editRowKey");
      var isEditNewItem = newChanges.some((change) => "insert" === change.type && equalByValue(editRowKey, change.key));
      if (!isEditNewItem && dataSourceKeys.every((key) => !equalByValue(editRowKey, key))) {
        this.option("editing.editRowKey", null);
      }
    }
    return result2;
  }
};
var rowsView3 = (Base) => class extends Base {
  getCellIndex($cell, rowIndex) {
    if (!$cell.is("td") && rowIndex >= 0) {
      var $cellElements = this.getCellElements(rowIndex);
      var cellIndex = -1;
      each($cellElements, (index, cellElement) => {
        if (renderer_default(cellElement).find($cell).length) {
          cellIndex = index;
        }
      });
      return cellIndex;
    }
    return super.getCellIndex.apply(this, arguments);
  }
  publicMethods() {
    return super.publicMethods().concat(["cellValue"]);
  }
  _getCellTemplate(options2) {
    var template = this._editingController.getColumnTemplate(options2);
    return template || super._getCellTemplate(options2);
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row) {
      var isRowRemoved = !!row.removed;
      var isRowInserted = !!row.isNewRow;
      var isRowModified = !!row.modified;
      isRowInserted && $row.addClass(ROW_INSERTED);
      isRowModified && $row.addClass(ROW_MODIFIED);
      if (isRowInserted || isRowRemoved) {
        $row.removeClass(ROW_SELECTED);
      }
    }
    return $row;
  }
  _getColumnIndexByElement($element) {
    var $tableElement = $element.closest("table");
    var $tableElements = this.getTableElements();
    while ($tableElement.length && !$tableElements.filter($tableElement).length) {
      $element = $tableElement.closest("td");
      $tableElement = $element.closest("table");
    }
    return this._getColumnIndexByElementCore($element);
  }
  _getColumnIndexByElementCore($element) {
    var $targetElement = $element.closest(".".concat(ROW_CLASS4, "> td:not(.dx-master-detail-cell)"));
    return this.getCellIndex($targetElement);
  }
  _editCellByClick(e, eventName) {
    var editingController = this._editingController;
    var $targetElement = renderer_default(e.event.target);
    var columnIndex = this._getColumnIndexByElement($targetElement);
    var row = this._dataController.items()[e.rowIndex];
    var allowUpdating = editingController.allowUpdating({
      row
    }, eventName) || row && row.isNewRow;
    var column = this._columnsController.getVisibleColumns()[columnIndex];
    var isEditedCell = editingController.isEditCell(e.rowIndex, columnIndex);
    var allowEditing = allowUpdating && column && (column.allowEditing || isEditedCell);
    var startEditAction = this.option("editing.startEditAction") || "click";
    var isShowEditorAlways = column && column.showEditorAlways;
    if (isEditedCell) {
      return true;
    }
    if ("down" === eventName) {
      if (devices_default.real().ios || devices_default.real().android) {
        resetActiveElement();
      }
      return isShowEditorAlways && allowEditing && editingController.editCell(e.rowIndex, columnIndex);
    }
    if ("click" === eventName && "dblClick" === startEditAction && this._pointerDownTarget === $targetElement.get(0)) {
      var withoutSaveEditData = null === row || void 0 === row ? void 0 : row.isNewRow;
      editingController.closeEditCell(false, withoutSaveEditData);
    }
    if (allowEditing && eventName === startEditAction) {
      return editingController.editCell(e.rowIndex, columnIndex) || editingController.isEditRow(e.rowIndex);
    }
  }
  _rowPointerDown(e) {
    this._pointerDownTarget = e.event.target;
    this._pointerDownTimeout = setTimeout(() => {
      this._editCellByClick(e, "down");
    });
  }
  _rowClickTreeListHack(e) {
    super._rowClick.apply(this, arguments);
  }
  _rowClick(e) {
    var isEditForm = renderer_default(e.rowElement).hasClass(this.addWidgetPrefix(EDIT_FORM_CLASS));
    e.event[TARGET_COMPONENT_NAME] = this.component;
    if (!this._editCellByClick(e, "click") && !isEditForm) {
      super._rowClick.apply(this, arguments);
    }
  }
  _rowDblClickTreeListHack(e) {
    super._rowDblClick.apply(this, arguments);
  }
  _rowDblClick(e) {
    if (!this._editCellByClick(e, "dblClick")) {
      super._rowDblClick.apply(this, arguments);
    }
  }
  _cellPrepared($cell, parameters) {
    var _a;
    var editingController = this._editingController;
    var isCommandCell = !!parameters.column.command;
    var isEditableCell = parameters.setValue;
    var isEditRow = editingController.isEditRow(parameters.rowIndex);
    var isEditing = isEditingCell(isEditRow, parameters);
    if (isEditingOrShowEditorAlwaysDataCell(isEditRow, parameters)) {
      var {
        alignment
      } = parameters.column;
      $cell.toggleClass(this.addWidgetPrefix(READONLY_CLASS), !isEditableCell).toggleClass(CELL_FOCUS_DISABLED_CLASS4, !isEditableCell);
      if (alignment) {
        $cell.find(EDITORS_INPUT_SELECTOR).first().css("textAlign", alignment);
      }
    }
    if (isEditing) {
      this._editCellPrepared($cell);
    }
    var hasTemplate2 = !!(null === (_a = parameters.column) || void 0 === _a ? void 0 : _a.cellTemplate);
    if (parameters.column && !isCommandCell && (!hasTemplate2 || editingController.shouldHighlightCell(parameters))) {
      editingController.highlightDataCell($cell, parameters);
    }
    super._cellPrepared.apply(this, arguments);
  }
  _getCellOptions(options2) {
    var cellOptions = super._getCellOptions(options2);
    var {
      columnIndex,
      row
    } = options2;
    cellOptions.isEditing = this._editingController.isEditCell(cellOptions.rowIndex, cellOptions.columnIndex);
    cellOptions.removed = row.removed;
    if (row.modified) {
      cellOptions.modified = void 0 !== row.modifiedValues[columnIndex];
    }
    return cellOptions;
  }
  _setCellAriaAttributes($cell, cellOptions) {
    super._setCellAriaAttributes($cell, cellOptions);
    if (cellOptions.removed) {
      this.setAria("roledescription", message_default.format("dxDataGrid-ariaDeletedCell"), $cell);
    }
    if (cellOptions.modified) {
      this.setAria("roledescription", message_default.format("dxDataGrid-ariaModifiedCell"), $cell);
    }
    var isEditableCell = cellOptions.column.allowEditing && !cellOptions.removed && !cellOptions.modified && "data" === cellOptions.rowType && cellOptions.column.calculateCellValue === cellOptions.column.defaultCalculateCellValue && this._editingController.isCellBasedEditMode();
    if (isEditableCell) {
      this.setAria("roledescription", message_default.format("dxDataGrid-ariaEditableCell"), $cell);
    }
  }
  _createCell(options2) {
    var $cell = super._createCell(options2);
    var isEditRow = this._editingController.isEditRow(options2.rowIndex);
    isEditingOrShowEditorAlwaysDataCell(isEditRow, options2) && $cell.addClass(EDITOR_CELL_CLASS2);
    return $cell;
  }
  cellValue(rowIndex, columnIdentifier, value2, text) {
    var cellOptions = this.getCellOptions(rowIndex, columnIdentifier);
    if (cellOptions) {
      if (void 0 === value2) {
        return cellOptions.value;
      }
      this._editingController.updateFieldValue(cellOptions, value2, text, true);
    }
  }
  dispose() {
    super.dispose.apply(this, arguments);
    clearTimeout(this._pointerDownTimeout);
  }
  _renderCore() {
    super._renderCore.apply(this, arguments);
    return this.waitAsyncTemplates(true).done(() => {
      this._editingController._focusEditorIfNeed();
    });
  }
  _editCellPrepared() {
  }
  _formItemPrepared() {
  }
};
var headerPanel3 = (Base) => class extends Base {
  optionChanged(args) {
    var {
      fullName
    } = args;
    switch (args.name) {
      case "editing":
        var excludedOptions = [EDITING_POPUP_OPTION_NAME, EDITING_CHANGES_OPTION_NAME, EDITING_EDITCOLUMNNAME_OPTION_NAME, EDITING_EDITROWKEY_OPTION_NAME];
        var shouldInvalidate = fullName && !excludedOptions.some((optionName) => optionName === fullName);
        shouldInvalidate && this._invalidate();
        super.optionChanged(args);
        break;
      case "useLegacyColumnButtonTemplate":
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _getToolbarItems() {
    var items = super._getToolbarItems();
    var editButtonItems = this._editingController.prepareEditButtons(this);
    return editButtonItems.concat(items);
  }
};
var editingModule = {
  defaultOptions: () => ({
    editing: {
      mode: "row",
      refreshMode: "full",
      newRowPosition: VIEWPORT_TOP_NEW_ROW_POSITION,
      allowAdding: false,
      allowUpdating: false,
      allowDeleting: false,
      useIcons: false,
      selectTextOnEditStart: false,
      confirmDelete: true,
      texts: {
        editRow: message_default.format("dxDataGrid-editingEditRow"),
        saveAllChanges: message_default.format("dxDataGrid-editingSaveAllChanges"),
        saveRowChanges: message_default.format("dxDataGrid-editingSaveRowChanges"),
        cancelAllChanges: message_default.format("dxDataGrid-editingCancelAllChanges"),
        cancelRowChanges: message_default.format("dxDataGrid-editingCancelRowChanges"),
        addRow: message_default.format("dxDataGrid-editingAddRow"),
        deleteRow: message_default.format("dxDataGrid-editingDeleteRow"),
        undeleteRow: message_default.format("dxDataGrid-editingUndeleteRow"),
        confirmDeleteMessage: message_default.format("dxDataGrid-editingConfirmDeleteMessage"),
        confirmDeleteTitle: ""
      },
      form: {
        colCount: 2
      },
      popup: {},
      startEditAction: "click",
      editRowKey: null,
      editColumnName: null,
      changes: []
    },
    useLegacyColumnButtonTemplate: false
  }),
  controllers: {
    editing: EditingControllerImpl
  },
  extenders: {
    controllers: {
      data: dataControllerEditingExtenderMixin
    },
    views: {
      rowsView: rowsView3,
      headerPanel: headerPanel3
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/m_editing.js
var data4 = (Base) => class extends dataControllerEditingExtenderMixin(Base) {
  _changeRowExpandCore(key) {
    var editingController = this._editingController;
    if (Array.isArray(key)) {
      editingController && editingController.refresh();
    }
    return super._changeRowExpandCore.apply(this, arguments);
  }
};
m_core_default.registerModule("editing", _extends(_extends({}, editingModule), {
  extenders: _extends(_extends({}, editingModule.extenders), {
    controllers: _extends(_extends({}, editingModule.extenders.controllers), {
      data: data4
    })
  })
}));

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/m_editing_row_based.js
var editingControllerExtender = (Base) => class extends Base {
  isRowEditMode() {
    return this.getEditMode() === EDIT_MODE_ROW;
  }
  _afterCancelEditData(rowIndex) {
    var dataController2 = this._dataController;
    if (this.isRowBasedEditMode() && rowIndex >= 0) {
      dataController2.updateItems({
        changeType: "update",
        rowIndices: [rowIndex, rowIndex + 1]
      });
    } else {
      super._afterCancelEditData(rowIndex);
    }
  }
  _isDefaultButtonVisible(button, options2) {
    var isRowMode = this.isRowBasedEditMode();
    var isPopupEditMode = this.isPopupEditMode();
    var isEditRow = !isPopupEditMode && options2.row && equalByValue(options2.row.key, this.option(EDITING_EDITROWKEY_OPTION_NAME));
    if (isRowMode) {
      switch (button.name) {
        case "edit":
          return !isEditRow && this.allowUpdating(options2);
        case "delete":
          return super._isDefaultButtonVisible(button, options2) && !isEditRow;
        case "save":
        case "cancel":
          return isEditRow;
        default:
          return super._isDefaultButtonVisible(button, options2);
      }
    }
    return super._isDefaultButtonVisible(button, options2);
  }
  isEditRow(rowIndex) {
    return this.isRowBasedEditMode() && this.isEditRowByIndex(rowIndex);
  }
  _cancelSaving(result2) {
    if (this.isRowBasedEditMode()) {
      if (!this.hasChanges()) {
        this._cancelEditDataCore();
      }
    }
    super._cancelSaving(result2);
  }
  _refreshCore(params) {
    var {
      allowCancelEditing
    } = null !== params && void 0 !== params ? params : {};
    if (this.isRowBasedEditMode()) {
      var hasUpdateChanges = this.getChanges().filter((it) => "update" === it.type).length > 0;
      this.init();
      allowCancelEditing && hasUpdateChanges && this._cancelEditDataCore();
    }
    super._refreshCore(params);
  }
  _isEditColumnVisible() {
    var result2 = super._isEditColumnVisible();
    var editingOptions = this.option("editing");
    var isRowEditMode = this.isRowEditMode();
    var isVisibleInRowEditMode = editingOptions.allowUpdating || editingOptions.allowAdding;
    return result2 || isRowEditMode && isVisibleInRowEditMode;
  }
  _focusEditorIfNeed() {
    var editMode = this.getEditMode();
    if (this._needFocusEditor) {
      if (MODES_WITH_DELAYED_FOCUS.includes(editMode)) {
        var $editingCell = this.getFocusedCellInRow(this._getVisibleEditRowIndex());
        this._delayedInputFocus($editingCell, () => {
          $editingCell && this.component.focus($editingCell);
        });
      }
      this._needFocusEditor = false;
    }
  }
};
var data5 = (Base) => class extends Base {
  _getChangedColumnIndices(oldItem, newItem, rowIndex, isLiveUpdate) {
    if (this._editingController.isRowBasedEditMode() && oldItem.isEditing !== newItem.isEditing) {
      return;
    }
    return super._getChangedColumnIndices.apply(this, arguments);
  }
};
var rowsView4 = (Base) => class extends Base {
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row) {
      var editingController = this._editingController;
      var isEditRow = editingController.isEditRow(row.rowIndex);
      if (isEditRow) {
        $row.addClass(EDIT_ROW);
        $row.removeClass(ROW_SELECTED_CLASS);
        if ("detail" === row.rowType) {
          $row.addClass(this.addWidgetPrefix(EDIT_FORM_CLASS));
        }
      }
    }
    return $row;
  }
  _update(change) {
    super._update(change);
    if ("updateSelection" === change.changeType) {
      this.getTableElements().children("tbody").children(".".concat(EDIT_ROW)).removeClass(ROW_SELECTED_CLASS);
    }
  }
};
var editingRowBasedModule = {
  extenders: {
    controllers: {
      editing: editingControllerExtender,
      data: data5
    },
    views: {
      rowsView: rowsView4
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/editing_row_based.js
m_core_default.registerModule("editingRowBased", editingRowBasedModule);

// node_modules/devextreme/esm/__internal/ui/m_responsive_box.js
var RESPONSIVE_BOX_CLASS = "dx-responsivebox";
var SCREEN_SIZE_CLASS_PREFIX = "".concat(RESPONSIVE_BOX_CLASS, "-screen-");
var BOX_ITEM_CLASS2 = "dx-box-item";
var BOX_ITEM_DATA_KEY2 = "dxBoxItemData";
var HD_SCREEN_WIDTH = 1920;
var ResponsiveBox = ui_collection_widget_edit_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      rows: [],
      cols: [],
      screenByWidth: null,
      singleColumnScreen: "",
      height: "100%",
      width: "100%",
      activeStateEnabled: false,
      focusStateEnabled: false,
      onItemStateChanged: void 0,
      onLayoutChanged: null,
      currentScreenFactor: void 0
    });
  },
  _init() {
    if (!this.option("screenByWidth")) {
      this._options.silent("screenByWidth", defaultScreenFactorFunc);
    }
    this.callBase();
    this._initLayoutChangedAction();
  },
  _initLayoutChangedAction() {
    this._layoutChangedAction = this._createActionByOption("onLayoutChanged", {
      excludeValidators: ["disabled", "readonly"]
    });
  },
  _itemClass: () => BOX_ITEM_CLASS2,
  _itemDataKey: () => BOX_ITEM_DATA_KEY2,
  _initMarkup() {
    this.callBase();
    this.$element().addClass(RESPONSIVE_BOX_CLASS);
  },
  _renderItems() {
    this._setScreenSize();
    this._screenItems = this._itemsByScreen();
    this._prepareGrid();
    this._spreadItems();
    this._layoutItems();
    this._linkNodeToItem();
  },
  _itemOptionChanged(item) {
    var $item = this._findItemElementByItem(item);
    if (!$item.length) {
      return;
    }
    this._refreshItem($item, item);
    this._clearItemNodeTemplates();
    this._update(true);
  },
  _setScreenSize() {
    var currentScreen = this._getCurrentScreen();
    this._removeScreenSizeClass();
    this.$element().addClass(SCREEN_SIZE_CLASS_PREFIX + currentScreen);
    this.option("currentScreenFactor", currentScreen);
  },
  _removeScreenSizeClass() {
    var currentScreenFactor = this.option("currentScreenFactor");
    currentScreenFactor && this.$element().removeClass(SCREEN_SIZE_CLASS_PREFIX + currentScreenFactor);
  },
  _prepareGrid() {
    var grid = this._grid = [];
    this._prepareRowsAndCols();
    each(this._rows, () => {
      var row = [];
      grid.push(row);
      each(this._cols, () => {
        row.push(this._createEmptyCell());
      });
    });
  },
  getSingleColumnRows() {
    var rows = this.option("rows");
    var screenItemsLength = this._screenItems.length;
    if (rows.length) {
      var filteredRows = this._filterByScreen(rows);
      var result2 = [];
      for (var i = 0; i < screenItemsLength; i++) {
        var sizeConfig = this._defaultSizeConfig();
        if (i < filteredRows.length && isDefined(filteredRows[i].shrink)) {
          sizeConfig.shrink = filteredRows[i].shrink;
        }
        result2.push(sizeConfig);
      }
      return result2;
    }
    return this._defaultSizeConfig(screenItemsLength);
  },
  _prepareRowsAndCols() {
    if (this._isSingleColumnScreen()) {
      this._prepareSingleColumnScreenItems();
      this._rows = this.getSingleColumnRows();
      this._cols = this._defaultSizeConfig(1);
    } else {
      this._rows = this._sizesByScreen(this.option("rows"));
      this._cols = this._sizesByScreen(this.option("cols"));
    }
  },
  _isSingleColumnScreen() {
    return this._screenRegExp().test(this.option("singleColumnScreen")) || !this.option("rows").length || !this.option("cols").length;
  },
  _prepareSingleColumnScreenItems() {
    this._screenItems.sort((item1, item2) => item1.location.row - item2.location.row || item1.location.col - item2.location.col);
    each(this._screenItems, (index, item) => {
      extend(item.location, {
        row: index,
        col: 0,
        rowspan: 1,
        colspan: 1
      });
    });
  },
  _sizesByScreen(sizeConfigs) {
    return map(this._filterByScreen(sizeConfigs), (sizeConfig) => extend(this._defaultSizeConfig(), sizeConfig));
  },
  _createDefaultSizeConfig: () => ({
    ratio: 1,
    baseSize: 0,
    minSize: 0,
    maxSize: 0
  }),
  _defaultSizeConfig(size) {
    var defaultSizeConfig = this._createDefaultSizeConfig();
    if (!arguments.length) {
      return defaultSizeConfig;
    }
    var result2 = [];
    for (var i = 0; i < size; i++) {
      result2.push(defaultSizeConfig);
    }
    return result2;
  },
  _filterByScreen(items) {
    var screenRegExp = this._screenRegExp();
    return grep(items, (item) => !item.screen || screenRegExp.test(item.screen));
  },
  _screenRegExp() {
    var screen = this._getCurrentScreen();
    return new RegExp("(^|\\s)".concat(screen, "($|\\s)"), "i");
  },
  _getCurrentScreen() {
    var width = this._screenWidth();
    return this.option("screenByWidth")(width);
  },
  _screenWidth: () => hasWindow() ? getWidth(getWindow()) : HD_SCREEN_WIDTH,
  _createEmptyCell: () => ({
    item: {},
    location: {
      colspan: 1,
      rowspan: 1
    }
  }),
  _spreadItems() {
    each(this._screenItems, (_, itemInfo) => {
      var location = itemInfo.location || {};
      var itemCol = location.col;
      var itemRow = location.row;
      var row = this._grid[itemRow];
      var itemCell = row && row[itemCol];
      this._occupyCells(itemCell, itemInfo);
    });
  },
  _itemsByScreen() {
    return this.option("items").reduce((result2, item) => {
      var locations = item.location || {};
      locations = isPlainObject(locations) ? [locations] : locations;
      this._filterByScreen(locations).forEach((location) => {
        result2.push({
          item,
          location: extend({
            rowspan: 1,
            colspan: 1
          }, location)
        });
      });
      return result2;
    }, []);
  },
  _occupyCells(itemCell, itemInfo) {
    if (!itemCell || this._isItemCellOccupied(itemCell, itemInfo)) {
      return;
    }
    extend(itemCell, itemInfo);
    this._markSpanningCell(itemCell);
  },
  _isItemCellOccupied(itemCell, itemInfo) {
    if (!isEmptyObject(itemCell.item)) {
      return true;
    }
    var result2 = false;
    this._loopOverSpanning(itemInfo.location, (cell) => {
      result2 = result2 || !isEmptyObject(cell.item);
    });
    return result2;
  },
  _loopOverSpanning(location, callback) {
    var rowEnd = location.row + location.rowspan - 1;
    var colEnd = location.col + location.colspan - 1;
    var boundRowEnd = Math.min(rowEnd, this._rows.length - 1);
    var boundColEnd = Math.min(colEnd, this._cols.length - 1);
    location.rowspan -= rowEnd - boundRowEnd;
    location.colspan -= colEnd - boundColEnd;
    for (var rowIndex = location.row; rowIndex <= boundRowEnd; rowIndex++) {
      for (var colIndex = location.col; colIndex <= boundColEnd; colIndex++) {
        if (rowIndex !== location.row || colIndex !== location.col) {
          callback(this._grid[rowIndex][colIndex]);
        }
      }
    }
  },
  _markSpanningCell(itemCell) {
    this._loopOverSpanning(itemCell.location, (cell) => {
      extend(cell, {
        item: itemCell.item,
        spanningCell: itemCell
      });
    });
  },
  _linkNodeToItem() {
    each(this._itemElements(), (_, itemNode) => {
      var $item = renderer_default(itemNode);
      var item = $item.data(BOX_ITEM_DATA_KEY2);
      if (!item.box) {
        item.node = $item.children();
      }
    });
  },
  _layoutItems() {
    var rowsCount = this._grid.length;
    var colsCount = rowsCount && this._grid[0].length;
    if (!rowsCount && !colsCount) {
      return;
    }
    var result2 = this._layoutBlock({
      direction: "col",
      row: {
        start: 0,
        end: rowsCount - 1
      },
      col: {
        start: 0,
        end: colsCount - 1
      }
    });
    var rootBox = this._prepareBoxConfig(result2.box || {
      direction: "row",
      items: [extend(result2, {
        ratio: 1
      })]
    });
    extend(rootBox, this._rootBoxConfig(rootBox.items));
    this._$root = renderer_default("<div>").appendTo(this._itemContainer());
    this._createComponent(this._$root, box_default, rootBox);
  },
  _rootBoxConfig(items) {
    var rootItems = each(items, (index, item) => {
      this._needApplyAutoBaseSize(item) && extend(item, {
        baseSize: "auto"
      });
    });
    return {
      width: "100%",
      height: "100%",
      items: rootItems,
      itemTemplate: this._getTemplateByOption("itemTemplate"),
      itemHoldTimeout: this.option("itemHoldTimeout"),
      onItemHold: this._createActionByOption("onItemHold"),
      onItemClick: this._createActionByOption("onItemClick"),
      onItemContextMenu: this._createActionByOption("onItemContextMenu"),
      onItemRendered: this._createActionByOption("onItemRendered")
    };
  },
  _needApplyAutoBaseSize: (item) => !item.baseSize && (!item.minSize || "auto" === item.minSize) && (!item.maxSize || "auto" === item.maxSize),
  _prepareBoxConfig(config2) {
    return extend(config2 || {}, {
      crossAlign: "stretch",
      onItemStateChanged: this.option("onItemStateChanged")
    });
  },
  _layoutBlock(options2) {
    if (this._isSingleItem(options2)) {
      return this._itemByCell(options2.row.start, options2.col.start);
    }
    return this._layoutDirection(options2);
  },
  _isSingleItem(options2) {
    var firstCellLocation = this._grid[options2.row.start][options2.col.start].location;
    var isItemRowSpanned = options2.row.end - options2.row.start === firstCellLocation.rowspan - 1;
    var isItemColSpanned = options2.col.end - options2.col.start === firstCellLocation.colspan - 1;
    return isItemRowSpanned && isItemColSpanned;
  },
  _itemByCell(rowIndex, colIndex) {
    var itemCell = this._grid[rowIndex][colIndex];
    return itemCell.spanningCell ? null : itemCell.item;
  },
  _layoutDirection(options2) {
    var items = [];
    var {
      direction
    } = options2;
    var crossDirection = this._crossDirection(direction);
    var block;
    while (block = this._nextBlock(options2)) {
      if (this._isBlockIndivisible(options2.prevBlockOptions, block)) {
        throw ui_errors_default.Error("E1025");
      }
      var item = this._layoutBlock({
        direction: crossDirection,
        row: block.row,
        col: block.col,
        prevBlockOptions: options2
      });
      if (item) {
        extend(item, this._blockSize(block, crossDirection));
        items.push(item);
      }
      options2[crossDirection].start = block[crossDirection].end + 1;
    }
    return {
      box: this._prepareBoxConfig({
        direction,
        items
      })
    };
  },
  _isBlockIndivisible: (options2, block) => options2 && options2.col.start === block.col.start && options2.col.end === block.col.end && options2.row.start === block.row.start && options2.row.end === block.row.end,
  _crossDirection: (direction) => "col" === direction ? "row" : "col",
  _nextBlock(options2) {
    var {
      direction
    } = options2;
    var crossDirection = this._crossDirection(direction);
    var startIndex = options2[direction].start;
    var endIndex = options2[direction].end;
    var crossStartIndex = options2[crossDirection].start;
    if (crossStartIndex > options2[crossDirection].end) {
      return null;
    }
    var crossSpan = 1;
    for (var crossIndex = crossStartIndex; crossIndex < crossStartIndex + crossSpan; crossIndex++) {
      var lineCrossSpan = 1;
      for (var index = startIndex; index <= endIndex; index++) {
        var cell = this._cellByDirection(direction, index, crossIndex);
        lineCrossSpan = Math.max(lineCrossSpan, cell.location["".concat(crossDirection, "span")]);
      }
      var lineCrossEndIndex = crossIndex + lineCrossSpan;
      var crossEndIndex = crossStartIndex + crossSpan;
      if (lineCrossEndIndex > crossEndIndex) {
        crossSpan += lineCrossEndIndex - crossEndIndex;
      }
    }
    var result2 = {};
    result2[direction] = {
      start: startIndex,
      end: endIndex
    };
    result2[crossDirection] = {
      start: crossStartIndex,
      end: crossStartIndex + crossSpan - 1
    };
    return result2;
  },
  _cellByDirection(direction, index, crossIndex) {
    return "col" === direction ? this._grid[crossIndex][index] : this._grid[index][crossIndex];
  },
  _blockSize(block, direction) {
    var defaultMinSize = "row" === direction ? "auto" : 0;
    var sizeConfigs = "row" === direction ? this._rows : this._cols;
    var result2 = extend(this._createDefaultSizeConfig(), {
      ratio: 0
    });
    for (var index = block[direction].start; index <= block[direction].end; index++) {
      var sizeConfig = sizeConfigs[index];
      result2.ratio += sizeConfig.ratio;
      result2.baseSize += sizeConfig.baseSize;
      result2.minSize += sizeConfig.minSize;
      result2.maxSize += sizeConfig.maxSize;
      if (isDefined(sizeConfig.shrink)) {
        result2.shrink = sizeConfig.shrink;
      }
    }
    result2.minSize = result2.minSize ? result2.minSize : defaultMinSize;
    result2.maxSize = result2.maxSize ? result2.maxSize : "auto";
    this._isSingleColumnScreen() && (result2.baseSize = "auto");
    return result2;
  },
  _update(forceRemoveRoot) {
    var $existingRoot = this._$root;
    this._renderItems();
    if ($existingRoot) {
      if (forceRemoveRoot) {
        $existingRoot.remove();
      } else {
        $existingRoot.detach();
        this._saveAssistantRoot($existingRoot);
      }
    }
    this._layoutChangedAction();
  },
  _saveAssistantRoot($root) {
    this._assistantRoots = this._assistantRoots || [];
    this._assistantRoots.push($root);
  },
  _dispose() {
    this._clearItemNodeTemplates();
    this._cleanUnusedRoots();
    this.callBase.apply(this, arguments);
  },
  _cleanUnusedRoots() {
    if (!this._assistantRoots) {
      return;
    }
    each(this._assistantRoots, (_, item) => {
      renderer_default(item).remove();
    });
  },
  _clearItemNodeTemplates() {
    each(this.option("items"), function() {
      delete this.node;
    });
  },
  _attachClickEvent: noop,
  _optionChanged(args) {
    switch (args.name) {
      case "rows":
      case "cols":
      case "screenByWidth":
      case "singleColumnScreen":
        this._clearItemNodeTemplates();
        this._invalidate();
        break;
      case "width":
      case "height":
        this.callBase(args);
        this._update();
        break;
      case "onLayoutChanged":
        this._initLayoutChangedAction();
        break;
      case "itemTemplate":
        this._clearItemNodeTemplates();
        this.callBase(args);
        break;
      case "currentScreenFactor":
        break;
      default:
        this.callBase(args);
    }
  },
  _dimensionChanged() {
    if (this._getCurrentScreen() !== this.option("currentScreenFactor")) {
      this._update();
    }
  },
  repaint() {
    this._update();
  }
});
component_registrator_default("dxResponsiveBox", ResponsiveBox);
var m_responsive_box_default = ResponsiveBox;

// node_modules/devextreme/esm/ui/responsive_box.js
var responsive_box_default = m_responsive_box_default;

// node_modules/devextreme/esm/__internal/ui/form/components/m_button_item.js
var FIELD_BUTTON_ITEM_CLASS = "dx-field-button-item";
function renderButtonItem(_ref) {
  var {
    item,
    $parent,
    rootElementCssClassList,
    validationGroup,
    createComponentCallback
  } = _ref;
  var $rootElement = renderer_default("<div>").appendTo($parent).addClass(rootElementCssClassList.join(" ")).addClass(FIELD_BUTTON_ITEM_CLASS).css("textAlign", convertAlignmentToTextAlign(item.horizontalAlignment));
  $parent.css("justifyContent", convertAlignmentToJustifyContent(item.verticalAlignment));
  var $button = renderer_default("<div>").appendTo($rootElement);
  return {
    $rootElement,
    buttonInstance: createComponentCallback($button, "dxButton", extend({
      validationGroup
    }, item.buttonOptions))
  };
}
function convertAlignmentToTextAlign(horizontalAlignment) {
  return isDefined(horizontalAlignment) ? horizontalAlignment : "right";
}
function convertAlignmentToJustifyContent(verticalAlignment) {
  switch (verticalAlignment) {
    case "center":
      return "center";
    case "bottom":
      return "flex-end";
    default:
      return "flex-start";
  }
}

// node_modules/devextreme/esm/__internal/ui/form/components/m_empty_item.js
var FIELD_EMPTY_ITEM_CLASS = "dx-field-empty-item";
function renderEmptyItem(_ref) {
  var {
    $parent,
    rootElementCssClassList
  } = _ref;
  return renderer_default("<div>").addClass(FIELD_EMPTY_ITEM_CLASS).html("&nbsp;").addClass(rootElementCssClassList.join(" ")).appendTo($parent);
}

// node_modules/devextreme/esm/__internal/ui/validation/m_default_adapter.js
var DefaultAdapter = class_default.inherit({
  ctor(editor, validator) {
    this.editor = editor;
    this.validator = validator;
    this.validationRequestsCallbacks = [];
    var handler = (args) => {
      this.validationRequestsCallbacks.forEach((item) => item(args));
    };
    editor.validationRequest.add(handler);
    editor.on("disposing", () => {
      editor.validationRequest.remove(handler);
    });
  },
  getValue() {
    return this.editor.option("value");
  },
  getCurrentValidationError() {
    return this.editor.option("validationError");
  },
  bypass() {
    return this.editor.option("disabled");
  },
  applyValidationResults(params) {
    this.editor.option({
      validationErrors: params.brokenRules,
      validationStatus: params.status
    });
  },
  reset() {
    this.editor.clear();
  },
  focus() {
    this.editor.focus();
  }
});
var m_default_adapter_default = DefaultAdapter;

// node_modules/devextreme/esm/__internal/ui/m_validator.js
var VALIDATOR_CLASS = "dx-validator";
var VALIDATION_STATUS_VALID2 = "valid";
var VALIDATION_STATUS_INVALID2 = "invalid";
var VALIDATION_STATUS_PENDING = "pending";
var Validator = dom_component_default.inherit({
  _initOptions(options2) {
    this.callBase.apply(this, arguments);
    this.option(m_validation_engine_default.initValidationOptions(options2));
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      validationRules: []
    });
  },
  _init() {
    this.callBase();
    this._initGroupRegistration();
    this.focused = callbacks_default();
    this._initAdapter();
    this._validationInfo = {
      result: null,
      deferred: null,
      skipValidation: false
    };
  },
  _initGroupRegistration() {
    var group = this._findGroup();
    if (!this._groupWasInit) {
      this.on("disposing", (args) => {
        m_validation_engine_default.removeRegisteredValidator(args.component._validationGroup, args.component);
      });
    }
    if (!this._groupWasInit || this._validationGroup !== group) {
      m_validation_engine_default.removeRegisteredValidator(this._validationGroup, this);
      this._groupWasInit = true;
      this._validationGroup = group;
      m_validation_engine_default.registerValidatorInGroup(group, this);
    }
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      validationGroup: true
    });
  },
  _getEditor() {
    var element = this.$element()[0];
    return data(element, "dx-validation-target");
  },
  _initAdapter() {
    var dxStandardEditor = this._getEditor();
    var adapter = this.option("adapter");
    if (!adapter) {
      if (dxStandardEditor) {
        adapter = new m_default_adapter_default(dxStandardEditor, this);
        adapter.validationRequestsCallbacks.push((args) => {
          if (this._validationInfo.skipValidation) {
            return;
          }
          this.validate(args);
        });
        this.option("adapter", adapter);
        return;
      }
      throw ui_errors_default.Error("E0120");
    }
    var callbacks = adapter.validationRequestsCallbacks;
    if (callbacks) {
      callbacks.push((args) => {
        this.validate(args);
      });
    }
  },
  _toggleRTLDirection(isRtl) {
    var _a, _b, _c;
    var rtlEnabled = null !== (_c = null === (_b = null === (_a = this.option("adapter")) || void 0 === _a ? void 0 : _a.editor) || void 0 === _b ? void 0 : _b.option("rtlEnabled")) && void 0 !== _c ? _c : isRtl;
    this.callBase(rtlEnabled);
  },
  _initMarkup() {
    this.$element().addClass(VALIDATOR_CLASS);
    this.callBase();
  },
  _render() {
    this.callBase();
    this._toggleAccessibilityAttributes();
  },
  _toggleAccessibilityAttributes() {
    var dxStandardEditor = this._getEditor();
    if (dxStandardEditor) {
      var rules = this.option("validationRules") || [];
      var isRequired = rules.some((_ref) => {
        var {
          type: type2
        } = _ref;
        return "required" === type2;
      }) || null;
      if (dxStandardEditor.isInitialized()) {
        dxStandardEditor.setAria("required", isRequired);
      }
      dxStandardEditor.option("_onMarkupRendered", () => {
        dxStandardEditor.setAria("required", isRequired);
      });
    }
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._initGroupRegistration();
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "validationGroup":
        this._initGroupRegistration();
        return;
      case "validationRules":
        this._resetValidationRules();
        this._toggleAccessibilityAttributes();
        void 0 !== this.option("isValid") && this.validate();
        return;
      case "adapter":
        this._initAdapter();
        break;
      case "isValid":
      case "validationStatus":
        this.option(m_validation_engine_default.synchronizeValidationOptions(args, this.option()));
        break;
      default:
        this.callBase(args);
    }
  },
  _getValidationRules() {
    if (!this._validationRules) {
      this._validationRules = map(this.option("validationRules"), (rule, index) => extend({}, rule, {
        validator: this,
        index
      }));
    }
    return this._validationRules;
  },
  _findGroup() {
    var $element = this.$element();
    return this.option("validationGroup") || m_validation_engine_default.findGroup($element, this._modelByElement($element));
  },
  _resetValidationRules() {
    delete this._validationRules;
  },
  validate(args) {
    var adapter = this.option("adapter");
    var name2 = this.option("name");
    var bypass = adapter.bypass && adapter.bypass();
    var value2 = args && void 0 !== args.value ? args.value : adapter.getValue();
    var currentError = adapter.getCurrentValidationError && adapter.getCurrentValidationError();
    var rules = this._getValidationRules();
    var currentResult = this._validationInfo && this._validationInfo.result;
    if (currentResult && currentResult.status === VALIDATION_STATUS_PENDING && currentResult.value === value2) {
      return extend({}, currentResult);
    }
    var result2;
    if (bypass) {
      result2 = {
        isValid: true,
        status: VALIDATION_STATUS_VALID2
      };
    } else if (currentError && currentError.editorSpecific) {
      currentError.validator = this;
      result2 = {
        isValid: false,
        status: VALIDATION_STATUS_INVALID2,
        brokenRule: currentError,
        brokenRules: [currentError]
      };
    } else {
      result2 = m_validation_engine_default.validate(value2, rules, name2);
    }
    result2.id = new guid_default().toString();
    this._applyValidationResult(result2, adapter);
    result2.complete && result2.complete.then((res) => {
      if (res.id === this._validationInfo.result.id) {
        this._applyValidationResult(res, adapter);
      }
    });
    return extend({}, this._validationInfo.result);
  },
  reset() {
    var adapter = this.option("adapter");
    var result2 = {
      id: null,
      isValid: true,
      brokenRule: null,
      brokenRules: null,
      pendingRules: null,
      status: VALIDATION_STATUS_VALID2,
      complete: null
    };
    this._validationInfo.skipValidation = true;
    adapter.reset();
    this._validationInfo.skipValidation = false;
    this._resetValidationRules();
    this._applyValidationResult(result2, adapter);
  },
  _updateValidationResult(result2) {
    if (!this._validationInfo.result || this._validationInfo.result.id !== result2.id) {
      var complete = this._validationInfo.deferred && this._validationInfo.result.complete;
      this._validationInfo.result = extend({}, result2, {
        complete
      });
    } else {
      for (var prop in result2) {
        if ("id" !== prop && "complete" !== prop) {
          this._validationInfo.result[prop] = result2[prop];
        }
      }
    }
  },
  _applyValidationResult(result2, adapter) {
    var validatedAction = this._createActionByOption("onValidated", {
      excludeValidators: ["readOnly"]
    });
    result2.validator = this;
    this._updateValidationResult(result2);
    adapter.applyValidationResults && adapter.applyValidationResults(this._validationInfo.result);
    this.option({
      validationStatus: this._validationInfo.result.status
    });
    if (this._validationInfo.result.status === VALIDATION_STATUS_PENDING) {
      if (!this._validationInfo.deferred) {
        this._validationInfo.deferred = Deferred();
        this._validationInfo.result.complete = this._validationInfo.deferred.promise();
      }
      this._eventsStrategy.fireEvent("validating", [this._validationInfo.result]);
      return;
    }
    if (this._validationInfo.result.status !== VALIDATION_STATUS_PENDING) {
      validatedAction(result2);
      if (this._validationInfo.deferred) {
        this._validationInfo.deferred.resolve(result2);
        this._validationInfo.deferred = null;
      }
    }
  },
  focus() {
    var adapter = this.option("adapter");
    adapter && adapter.focus && adapter.focus();
  },
  _useTemplates: () => false
});
component_registrator_default("dxValidator", Validator);
var m_validator_default = Validator;

// node_modules/devextreme/esm/ui/validator.js
var validator_default = m_validator_default;

// node_modules/devextreme/esm/__internal/ui/form/constants.js
var FORM_CLASS = "dx-form";
var FORM_GROUP_CLASS = "dx-form-group";
var FORM_GROUP_CAPTION_CLASS = "dx-form-group-caption";
var FORM_FIELD_ITEM_COL_CLASS = "dx-col-";
var FIELD_ITEM_CLASS = "dx-field-item";
var LAYOUT_MANAGER_ONE_COLUMN = "dx-layout-manager-one-col";
var FIELD_ITEM_LABEL_CONTENT_CLASS = "dx-field-item-label-content";
var FORM_LAYOUT_MANAGER_CLASS = "dx-layout-manager";
var FIELD_ITEM_LABEL_CLASS = "dx-field-item-label";
var FIELD_ITEM_CONTENT_CLASS = "dx-field-item-content";
var SINGLE_COLUMN_ITEM_CONTENT = "dx-single-column-item-content";
var ROOT_SIMPLE_ITEM_CLASS = "dx-root-simple-item";
var FORM_GROUP_CONTENT_CLASS = "dx-form-group-content";
var FIELD_ITEM_CONTENT_HAS_GROUP_CLASS = "dx-field-item-has-group";
var FIELD_ITEM_CONTENT_HAS_TABS_CLASS = "dx-field-item-has-tabs";
var FORM_GROUP_WITH_CAPTION_CLASS = "dx-form-group-with-caption";
var FIELD_ITEM_TAB_CLASS = "dx-field-item-tab";
var GROUP_COL_COUNT_CLASS = "dx-group-colcount-";
var GROUP_COL_COUNT_ATTR = "group-col-count";
var FORM_VALIDATION_SUMMARY = "dx-form-validation-summary";
var FORM_UNDERLINED_CLASS = "dx-form-styling-mode-underlined";
var SIMPLE_ITEM_TYPE = "simple";

// node_modules/devextreme/esm/__internal/ui/form/m_form.layout_manager.utils.js
var EDITORS_WITH_ARRAY_VALUE = ["dxTagBox", "dxRangeSlider", "dxDateRangeBox"];
var EDITORS_WITH_SPECIFIC_LABELS = ["dxRangeSlider", "dxSlider"];
var EDITORS_WITHOUT_LABELS = ["dxCalendar", "dxCheckBox", "dxHtmlEditor", "dxRadioGroup", "dxRangeSlider", "dxSlider", "dxSwitch"];
var DROP_DOWN_EDITORS = ["dxSelectBox", "dxDropDownBox", "dxTagBox", "dxLookup", "dxAutocomplete", "dxColorBox", "dxDateBox", "dxDateRangeBox"];
function convertToRenderFieldItemOptions(_ref) {
  var {
    $parent,
    rootElementCssClassList,
    formOrLayoutManager,
    createComponentCallback,
    item,
    template,
    labelTemplate,
    name: name2,
    formLabelLocation,
    requiredMessageTemplate,
    validationGroup,
    editorValue,
    canAssignUndefinedValueToEditor,
    editorValidationBoundary,
    editorStylingMode,
    showColonAfterLabel,
    managerLabelLocation,
    itemId,
    managerMarkOptions,
    labelMode,
    onLabelTemplateRendered
  } = _ref;
  var isRequired = isDefined(item.isRequired) ? item.isRequired : !!_hasRequiredRuleInSet(item.validationRules);
  var isSimpleItem = item.itemType === SIMPLE_ITEM_TYPE;
  var helpID = item.helpText ? "dx-".concat(new guid_default()) : null;
  var labelOptions = _convertToLabelOptions({
    item,
    id: itemId,
    isRequired,
    managerMarkOptions,
    showColonAfterLabel,
    labelLocation: managerLabelLocation,
    formLabelMode: labelMode,
    labelTemplate,
    onLabelTemplateRendered
  });
  var needRenderLabel = labelOptions.visible && (labelOptions.text || labelOptions.labelTemplate && isSimpleItem);
  var {
    location: labelLocation,
    labelID
  } = labelOptions;
  var labelNeedBaselineAlign = "top" !== labelLocation && ["dxTextArea", "dxRadioGroup", "dxCalendar", "dxHtmlEditor"].includes(item.editorType);
  var editorOptions = _convertToEditorOptions({
    $parent,
    editorType: item.editorType,
    editorValue,
    defaultEditorName: item.dataField,
    canAssignUndefinedValueToEditor,
    externalEditorOptions: item.editorOptions,
    editorInputId: itemId,
    editorValidationBoundary,
    editorStylingMode,
    formLabelMode: labelMode,
    labelText: labelOptions.textWithoutColon,
    labelMark: labelOptions.markOptions.showRequiredMark ? String.fromCharCode(160) + labelOptions.markOptions.requiredMark : ""
  });
  var needRenderOptionalMarkAsHelpText = labelOptions.markOptions.showOptionalMark && !labelOptions.visible && "hidden" !== editorOptions.labelMode && !isDefined(item.helpText);
  var helpText = needRenderOptionalMarkAsHelpText ? labelOptions.markOptions.optionalMark : item.helpText;
  return {
    $parent,
    rootElementCssClassList,
    formOrLayoutManager,
    createComponentCallback,
    labelOptions,
    labelNeedBaselineAlign,
    labelLocation,
    needRenderLabel,
    item,
    isSimpleItem,
    isRequired,
    template,
    helpID,
    labelID,
    name: name2,
    helpText,
    formLabelLocation,
    requiredMessageTemplate,
    validationGroup,
    editorOptions
  };
}
function getLabelMarkText(_ref2) {
  var {
    showRequiredMark,
    requiredMark,
    showOptionalMark,
    optionalMark
  } = _ref2;
  if (!showRequiredMark && !showOptionalMark) {
    return "";
  }
  return String.fromCharCode(160) + (showRequiredMark ? requiredMark : optionalMark);
}
function convertToLabelMarkOptions(_ref3, isRequired) {
  var {
    showRequiredMark,
    requiredMark,
    showOptionalMark,
    optionalMark
  } = _ref3;
  return {
    showRequiredMark: showRequiredMark && isRequired,
    requiredMark,
    showOptionalMark: showOptionalMark && !isRequired,
    optionalMark
  };
}
function getDropDownEditorOptions($parent, editorType, editorInputId) {
  var isDropDownEditor = DROP_DOWN_EDITORS.includes(editorType);
  if (!isDropDownEditor) {
    return {};
  }
  return {
    onPopupInitialized: (_ref4) => {
      var {
        component,
        popup
      } = _ref4;
      var openOnFieldClick = component.option("openOnFieldClick");
      var initialHideOnOutsideClick = popup.option("hideOnOutsideClick");
      if (openOnFieldClick && isFunction(initialHideOnOutsideClick)) {
        var hideOnOutsideClick = (e) => {
          var $target = renderer_default(e.target);
          var $label = $parent.find('label[for="'.concat(editorInputId, '"]'));
          var isLabelClicked = !!$target.closest($label).length;
          return !isLabelClicked && initialHideOnOutsideClick(e);
        };
        component.option("dropDownOptions", {
          hideOnOutsideClick
        });
        popup.option({
          hideOnOutsideClick
        });
      }
    }
  };
}
function _convertToEditorOptions(_ref5) {
  var {
    $parent,
    editorType,
    defaultEditorName,
    editorValue,
    canAssignUndefinedValueToEditor,
    externalEditorOptions,
    editorInputId,
    editorValidationBoundary,
    editorStylingMode,
    formLabelMode,
    labelText,
    labelMark
  } = _ref5;
  var editorOptionsWithValue = {};
  if (void 0 !== editorValue || canAssignUndefinedValueToEditor) {
    editorOptionsWithValue.value = editorValue;
  }
  if (EDITORS_WITH_ARRAY_VALUE.includes(editorType)) {
    editorOptionsWithValue.value = editorOptionsWithValue.value || [];
  }
  var labelMode = null === externalEditorOptions || void 0 === externalEditorOptions ? void 0 : externalEditorOptions.labelMode;
  if (!isDefined(labelMode)) {
    labelMode = "outside" === formLabelMode ? "hidden" : formLabelMode;
  }
  var stylingMode = (null === externalEditorOptions || void 0 === externalEditorOptions ? void 0 : externalEditorOptions.stylingMode) || editorStylingMode;
  var useSpecificLabelOptions = EDITORS_WITH_SPECIFIC_LABELS.includes(editorType);
  var dropDownEditorOptions = getDropDownEditorOptions($parent, editorType, editorInputId);
  var result2 = extend(true, editorOptionsWithValue, externalEditorOptions, dropDownEditorOptions, {
    inputAttr: {
      id: editorInputId
    },
    validationBoundary: editorValidationBoundary,
    stylingMode,
    label: useSpecificLabelOptions ? null === externalEditorOptions || void 0 === externalEditorOptions ? void 0 : externalEditorOptions.label : labelText,
    labelMode,
    labelMark
  });
  if (externalEditorOptions) {
    if (result2.dataSource) {
      result2.dataSource = externalEditorOptions.dataSource;
    }
    if (result2.items) {
      result2.items = externalEditorOptions.items;
    }
  }
  if (defaultEditorName && !result2.name) {
    result2.name = defaultEditorName;
  }
  return result2;
}
function _hasRequiredRuleInSet(rules) {
  var hasRequiredRule;
  if (rules && rules.length) {
    each(rules, (index, rule) => {
      if ("required" === rule.type) {
        hasRequiredRule = true;
        return false;
      }
    });
  }
  return hasRequiredRule;
}
function _convertToLabelOptions(_ref6) {
  var {
    item,
    id,
    isRequired,
    managerMarkOptions,
    showColonAfterLabel,
    labelLocation,
    labelTemplate,
    formLabelMode,
    onLabelTemplateRendered
  } = _ref6;
  var isEditorWithoutLabels = EDITORS_WITHOUT_LABELS.includes(item.editorType);
  var labelOptions = extend({
    showColon: showColonAfterLabel,
    location: labelLocation,
    id,
    visible: "outside" === formLabelMode || isEditorWithoutLabels && "hidden" !== formLabelMode,
    isRequired
  }, item ? item.label : {}, {
    markOptions: convertToLabelMarkOptions(managerMarkOptions, isRequired),
    labelTemplate,
    onLabelTemplateRendered
  });
  if (["dxRadioGroup", "dxCheckBox", "dxLookup", "dxSlider", "dxRangeSlider", "dxSwitch", "dxHtmlEditor", "dxDateRangeBox"].includes(item.editorType)) {
    labelOptions.labelID = "dx-label-".concat(new guid_default());
  }
  if (!labelOptions.text && item.dataField) {
    labelOptions.text = captionize(item.dataField);
  }
  if (labelOptions.text) {
    labelOptions.textWithoutColon = labelOptions.text;
    labelOptions.text += labelOptions.showColon ? ":" : "";
  }
  return labelOptions;
}

// node_modules/devextreme/esm/__internal/ui/form/components/m_label.js
var FIELD_ITEM_REQUIRED_MARK_CLASS = "dx-field-item-required-mark";
var FIELD_ITEM_LABEL_LOCATION_CLASS = "dx-field-item-label-location-";
var FIELD_ITEM_OPTIONAL_MARK_CLASS = "dx-field-item-optional-mark";
var FIELD_ITEM_LABEL_TEXT_CLASS = "dx-field-item-label-text";
function renderLabel(_ref) {
  var {
    text,
    id,
    location,
    alignment,
    labelID = null,
    markOptions = {},
    labelTemplate,
    labelTemplateData,
    onLabelTemplateRendered
  } = _ref;
  if ((!isDefined(text) || text.length <= 0) && !isDefined(labelTemplate)) {
    return null;
  }
  var $label = renderer_default("<label>").addClass("".concat(FIELD_ITEM_LABEL_CLASS, " ").concat(FIELD_ITEM_LABEL_LOCATION_CLASS).concat(location)).attr("for", id).attr("id", labelID).css("textAlign", alignment);
  var $labelContainer = renderer_default("<span>").addClass(FIELD_ITEM_LABEL_CONTENT_CLASS);
  var $labelContent = renderer_default("<span>").addClass(FIELD_ITEM_LABEL_TEXT_CLASS).text(text);
  if (labelTemplate) {
    $labelContent = renderer_default("<div>").addClass("dx-field-item-custom-label-content");
    labelTemplateData.text = text;
    labelTemplate.render({
      container: getPublicElement($labelContent),
      model: labelTemplateData,
      onRendered() {
        null === onLabelTemplateRendered || void 0 === onLabelTemplateRendered ? void 0 : onLabelTemplateRendered();
      }
    });
  }
  return $label.append($labelContainer.append($labelContent, _renderLabelMark(markOptions)));
}
function _renderLabelMark(markOptions) {
  var markText = getLabelMarkText(markOptions);
  if ("" === markText) {
    return null;
  }
  return renderer_default("<span>").addClass(markOptions.showRequiredMark ? FIELD_ITEM_REQUIRED_MARK_CLASS : FIELD_ITEM_OPTIONAL_MARK_CLASS).text(markText);
}
function setLabelWidthByMaxLabelWidth($targetContainer, labelsSelector, labelMarkOptions) {
  var FIELD_ITEM_LABEL_CONTENT_CLASS_Selector = "".concat(labelsSelector, " > .").concat(FIELD_ITEM_LABEL_CLASS, ":not(.").concat(FIELD_ITEM_LABEL_LOCATION_CLASS, "top) > .").concat(FIELD_ITEM_LABEL_CONTENT_CLASS);
  var $FIELD_ITEM_LABEL_CONTENT_CLASS_Items = $targetContainer.find(FIELD_ITEM_LABEL_CONTENT_CLASS_Selector);
  var FIELD_ITEM_LABEL_CONTENT_CLASS_Length = $FIELD_ITEM_LABEL_CONTENT_CLASS_Items.length;
  var labelWidth;
  var i;
  var maxWidth = 0;
  for (i = 0; i < FIELD_ITEM_LABEL_CONTENT_CLASS_Length; i++) {
    labelWidth = getLabelWidthByHTML($FIELD_ITEM_LABEL_CONTENT_CLASS_Items[i]);
    if (labelWidth > maxWidth) {
      maxWidth = labelWidth;
    }
  }
  for (i = 0; i < FIELD_ITEM_LABEL_CONTENT_CLASS_Length; i++) {
    $FIELD_ITEM_LABEL_CONTENT_CLASS_Items[i].style.width = "".concat(maxWidth, "px");
  }
}
function getLabelWidthByHTML(labelContent) {
  var result2 = 0;
  var itemsCount = labelContent.children.length;
  for (var i = 0; i < itemsCount; i++) {
    var child = labelContent.children[i];
    result2 += child.offsetWidth;
  }
  return result2;
}

// node_modules/devextreme/esm/__internal/ui/form/components/m_field_item.js
var FLEX_LAYOUT_CLASS = "dx-flex-layout";
var FIELD_ITEM_OPTIONAL_CLASS = "dx-field-item-optional";
var FIELD_ITEM_REQUIRED_CLASS = "dx-field-item-required";
var FIELD_ITEM_CONTENT_WRAPPER_CLASS = "dx-field-item-content-wrapper";
var FIELD_ITEM_CONTENT_LOCATION_CLASS = "dx-field-item-content-location-";
var FIELD_ITEM_LABEL_ALIGN_CLASS = "dx-field-item-label-align";
var FIELD_ITEM_HELP_TEXT_CLASS = "dx-field-item-help-text";
var LABEL_VERTICAL_ALIGNMENT_CLASS = "dx-label-v-align";
var LABEL_HORIZONTAL_ALIGNMENT_CLASS = "dx-label-h-align";
var TOGGLE_CONTROLS_PADDING_CLASS = "dx-toggle-controls-paddings";
var TEMPLATE_WRAPPER_CLASS3 = "dx-template-wrapper";
var VALIDATION_TARGET_CLASS = "dx-validation-target";
var INVALID_CLASS2 = "dx-invalid";
function renderFieldItem(_ref) {
  var {
    $parent,
    rootElementCssClassList,
    formOrLayoutManager,
    createComponentCallback,
    labelOptions,
    labelNeedBaselineAlign,
    labelLocation,
    needRenderLabel,
    formLabelLocation,
    item,
    editorOptions,
    isSimpleItem,
    isRequired,
    template,
    helpID,
    labelID,
    name: name2,
    helpText,
    requiredMessageTemplate,
    validationGroup
  } = _ref;
  var $rootElement = renderer_default("<div>").addClass(rootElementCssClassList.join(" ")).appendTo($parent);
  $rootElement.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);
  if (isSimpleItem) {
    $rootElement.addClass(FLEX_LAYOUT_CLASS);
  }
  if (isSimpleItem && labelNeedBaselineAlign) {
    $rootElement.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS);
  }
  var $fieldEditorContainer = renderer_default("<div>");
  $fieldEditorContainer.data("dx-form-item", item);
  $fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass(FIELD_ITEM_CONTENT_LOCATION_CLASS + {
    right: "left",
    left: "right",
    top: "bottom"
  }[formLabelLocation]);
  var $label = null;
  if (needRenderLabel) {
    if (labelOptions.labelTemplate) {
      labelOptions.labelTemplateData = getTemplateData(item, editorOptions, formOrLayoutManager);
    }
    $label = renderLabel(labelOptions);
  }
  if ($label) {
    var {
      editorType
    } = item;
    $rootElement.append($label);
    if ("top" === labelLocation || "left" === labelLocation) {
      $rootElement.append($fieldEditorContainer);
    }
    if ("right" === labelLocation) {
      $rootElement.prepend($fieldEditorContainer);
    }
    if ("top" === labelLocation) {
      $rootElement.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS);
    } else {
      $rootElement.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS);
    }
    if ("dxCheckBox" === editorType || "dxSwitch" === editorType) {
      events_engine_default.on($label, CLICK_EVENT_NAME, () => {
        events_engine_default.trigger($fieldEditorContainer.children(), CLICK_EVENT_NAME);
      });
    }
    var isToggleControls = ["dxCheckBox", "dxSwitch", "dxRadioGroup"].includes(editorType);
    var labelAlignment = labelOptions.alignment;
    var isLabelAlignmentLeft = "left" === labelAlignment || !labelAlignment;
    var hasNotTemplate = !template;
    var isLabelOnTop = "top" === labelLocation;
    if (hasNotTemplate && isToggleControls && isLabelOnTop && isLabelAlignmentLeft) {
      $fieldEditorContainer.addClass(TOGGLE_CONTROLS_PADDING_CLASS);
    }
  } else {
    $rootElement.append($fieldEditorContainer);
  }
  var widgetInstance;
  if (template) {
    template.render({
      container: getPublicElement($fieldEditorContainer),
      model: getTemplateData(item, editorOptions, formOrLayoutManager),
      onRendered() {
        var $validationTarget2 = getValidationTarget($fieldEditorContainer);
        var validationTargetInstance2 = tryGetValidationTargetInstance($validationTarget2);
        subscribeWrapperInvalidClassToggle(validationTargetInstance2);
      }
    });
  } else {
    var $div = renderer_default("<div>").appendTo($fieldEditorContainer);
    try {
      widgetInstance = createComponentCallback($div, item.editorType, editorOptions);
      widgetInstance.setAria("describedby", helpID);
      if (labelID) {
        widgetInstance.setAria("labelledby", labelID);
      }
      widgetInstance.setAria("required", isRequired);
    } catch (e) {
      ui_errors_default.log("E1035", e.message);
    }
  }
  var $validationTarget = getValidationTarget($fieldEditorContainer);
  var validationTargetInstance = $validationTarget && $validationTarget.data(VALIDATION_TARGET_CLASS);
  if (validationTargetInstance) {
    var isItemHaveCustomLabel = item.label && item.label.text;
    var itemName = isItemHaveCustomLabel ? null : name2;
    var fieldName = isItemHaveCustomLabel ? item.label.text : itemName && captionize(itemName);
    var validationRules;
    if (isSimpleItem) {
      if (item.validationRules) {
        validationRules = item.validationRules;
      } else {
        var requiredMessage = format(requiredMessageTemplate, fieldName || "");
        validationRules = item.isRequired ? [{
          type: "required",
          message: requiredMessage
        }] : null;
      }
    }
    if (Array.isArray(validationRules) && validationRules.length) {
      createComponentCallback($validationTarget, validator_default, {
        validationRules,
        validationGroup,
        dataGetter: () => ({
          formItem: item
        })
      });
    }
    subscribeWrapperInvalidClassToggle(validationTargetInstance);
  }
  if (helpText && isSimpleItem) {
    var $editorParent = $fieldEditorContainer.parent();
    $editorParent.append(renderer_default("<div>").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append(renderer_default("<div>").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr("id", helpID).text(helpText)));
  }
  return {
    $fieldEditorContainer,
    $rootElement,
    widgetInstance
  };
}
function getValidationTarget($fieldEditorContainer) {
  var $editor = $fieldEditorContainer.children().first();
  return $editor.hasClass(TEMPLATE_WRAPPER_CLASS3) ? $editor.children().first() : $editor;
}
function tryGetValidationTargetInstance($validationTarget) {
  var _a, _b;
  return (null === $validationTarget || void 0 === $validationTarget ? void 0 : $validationTarget.data(VALIDATION_TARGET_CLASS)) || (null === (_b = null === (_a = null === $validationTarget || void 0 === $validationTarget ? void 0 : $validationTarget.parent) || void 0 === _a ? void 0 : _a.call($validationTarget)) || void 0 === _b ? void 0 : _b.data(VALIDATION_TARGET_CLASS));
}
function subscribeWrapperInvalidClassToggle(validationTargetInstance) {
  if (validationTargetInstance && isMaterialBased()) {
    var wrapperClass = ".".concat(FIELD_ITEM_CONTENT_WRAPPER_CLASS);
    var toggleInvalidClass = (_ref2) => {
      var {
        element,
        component
      } = _ref2;
      var {
        isValid,
        validationMessageMode
      } = component.option();
      renderer_default(element).parents(wrapperClass).toggleClass(INVALID_CLASS2, false === isValid && (component._isFocused() || "always" === validationMessageMode));
    };
    validationTargetInstance.on("optionChanged", (e) => {
      if ("isValid" !== e.name) {
        return;
      }
      toggleInvalidClass(e);
    });
    validationTargetInstance.on("focusIn", toggleInvalidClass).on("focusOut", toggleInvalidClass).on("enterKey", toggleInvalidClass);
  }
}
function getTemplateData(item, editorOptions, formOrLayoutManager) {
  return {
    dataField: item.dataField,
    editorType: item.editorType,
    editorOptions,
    component: formOrLayoutManager,
    name: item.name
  };
}

// node_modules/devextreme/esm/__internal/ui/form/m_form.items_runtime_info.js
var FormItemsRunTimeInfo = class {
  constructor() {
    this._map = {};
  }
  _findWidgetInstance(condition) {
    var result2;
    each(this._map, (guid, _ref) => {
      var {
        widgetInstance,
        item
      } = _ref;
      if (condition(item)) {
        result2 = widgetInstance;
        return false;
      }
    });
    return result2;
  }
  _findFieldByCondition(callback, valueExpr) {
    var result2;
    each(this._map, (key, value2) => {
      if (callback(value2)) {
        result2 = "guid" === valueExpr ? key : value2[valueExpr];
        return false;
      }
    });
    return result2;
  }
  clear() {
    this._map = {};
  }
  removeItemsByItems(itemsRunTimeInfo) {
    each(itemsRunTimeInfo.getItems(), (guid) => this.removeItemByKey(guid));
  }
  removeItemByKey(key) {
    delete this._map[key];
  }
  add(options2) {
    var key = options2.guid || new guid_default();
    this._map[key] = options2;
    return key;
  }
  addItemsOrExtendFrom(itemsRunTimeInfo) {
    itemsRunTimeInfo.each((key, itemRunTimeInfo) => {
      if (this._map[key]) {
        if (itemRunTimeInfo.widgetInstance) {
          this._map[key].widgetInstance = itemRunTimeInfo.widgetInstance;
        }
        this._map[key].$itemContainer = itemRunTimeInfo.$itemContainer;
      } else {
        this.add({
          item: itemRunTimeInfo.item,
          widgetInstance: itemRunTimeInfo.widgetInstance,
          guid: key,
          $itemContainer: itemRunTimeInfo.$itemContainer
        });
      }
    });
  }
  extendRunTimeItemInfoByKey(key, options2) {
    if (this._map[key]) {
      this._map[key] = extend(this._map[key], options2);
    }
  }
  findWidgetInstanceByItem(item) {
    return this._findWidgetInstance((storedItem) => storedItem === item);
  }
  findGroupOrTabLayoutManagerByPath(targetPath) {
    return this._findFieldByCondition((_ref2) => {
      var {
        path
      } = _ref2;
      return path === targetPath;
    }, "layoutManager");
  }
  findKeyByPath(targetPath) {
    return this._findFieldByCondition((_ref3) => {
      var {
        path
      } = _ref3;
      return path === targetPath;
    }, "guid");
  }
  findWidgetInstanceByName(name2) {
    return this._findWidgetInstance((item) => name2 === item.name);
  }
  findWidgetInstanceByDataField(dataField) {
    return this._findWidgetInstance((item) => dataField === (isString(item) ? item : item.dataField));
  }
  findItemContainerByItem(item) {
    for (var key in this._map) {
      if (this._map[key].item === item) {
        return this._map[key].$itemContainer;
      }
    }
    return null;
  }
  findItemIndexByItem(targetItem) {
    return this._findFieldByCondition((_ref4) => {
      var {
        item
      } = _ref4;
      return item === targetItem;
    }, "itemIndex");
  }
  findPreparedItemByItem(item) {
    return this._findFieldByCondition((_ref5) => {
      var {
        item: currentItem
      } = _ref5;
      return currentItem === item;
    }, "preparedItem");
  }
  getItems() {
    return this._map;
  }
  each(handler) {
    each(this._map, (key, itemRunTimeInfo) => {
      handler(key, itemRunTimeInfo);
    });
  }
  removeItemsByPathStartWith(path) {
    var keys = Object.keys(this._map);
    var filteredKeys = keys.filter((key) => {
      if (this._map[key].path) {
        return this._map[key].path.indexOf(path, 0) > -1;
      }
      return false;
    });
    filteredKeys.forEach((key) => this.removeItemByKey(key));
  }
};

// node_modules/devextreme/esm/__internal/ui/form/m_form.layout_manager.js
var FORM_EDITOR_BY_DEFAULT = "dxTextBox";
var LAYOUT_MANAGER_FIRST_ROW_CLASS = "dx-first-row";
var LAYOUT_MANAGER_LAST_ROW_CLASS = "dx-last-row";
var LAYOUT_MANAGER_FIRST_COL_CLASS = "dx-first-col";
var LAYOUT_MANAGER_LAST_COL_CLASS = "dx-last-col";
var LayoutManager = ui_widget_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      layoutData: {},
      readOnly: false,
      colCount: 1,
      colCountByScreen: void 0,
      labelLocation: "left",
      onFieldDataChanged: null,
      onEditorEnterKey: null,
      customizeItem: null,
      alignItemLabels: true,
      minColWidth: 200,
      showRequiredMark: true,
      screenByWidth: null,
      showOptionalMark: false,
      requiredMark: "*",
      labelMode: "outside",
      optionalMark: message_default.format("dxForm-optionalMark"),
      requiredMessage: message_default.getFormatter("dxForm-requiredMessage")
    });
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      layoutData: true,
      validationGroup: true
    });
  },
  _init() {
    var layoutData = this.option("layoutData");
    this.callBase();
    this._itemWatchers = [];
    this._itemsRunTimeInfo = new FormItemsRunTimeInfo();
    this._updateReferencedOptions(layoutData);
    this._initDataAndItems(layoutData);
  },
  _dispose() {
    this.callBase();
    this._cleanItemWatchers();
  },
  _initDataAndItems(initialData) {
    this._syncDataWithItems();
    this._updateItems(initialData);
  },
  _syncDataWithItems() {
    var layoutData = this.option("layoutData");
    var userItems = this.option("items");
    if (isDefined(userItems)) {
      userItems.forEach((item) => {
        if (item.dataField && void 0 === this._getDataByField(item.dataField)) {
          var value2;
          if (item.editorOptions) {
            value2 = item.editorOptions.value;
          }
          if (isDefined(value2) || item.dataField in layoutData) {
            this._updateFieldValue(item.dataField, value2);
          }
        }
      });
    }
  },
  _getDataByField(dataField) {
    return dataField ? this.option("layoutData.".concat(dataField)) : null;
  },
  _isCheckboxUndefinedStateEnabled(_ref) {
    var {
      allowIndeterminateState,
      editorType,
      dataField
    } = _ref;
    if (true === allowIndeterminateState && "dxCheckBox" === editorType) {
      var nameParts = ["layoutData", ...dataField.split(".")];
      var propertyName = nameParts.pop();
      var layoutData = this.option(nameParts.join("."));
      return layoutData && propertyName in layoutData;
    }
    return false;
  },
  _updateFieldValue(dataField, value2) {
    var layoutData = this.option("layoutData");
    var newValue = value2;
    if (!variable_wrapper_default.isWrapped(layoutData[dataField]) && isDefined(dataField)) {
      this.option("layoutData.".concat(dataField), newValue);
    } else if (variable_wrapper_default.isWritableWrapped(layoutData[dataField])) {
      newValue = isFunction(newValue) ? newValue() : newValue;
      layoutData[dataField](newValue);
    }
    this._triggerOnFieldDataChanged({
      dataField,
      value: newValue
    });
  },
  _triggerOnFieldDataChanged(args) {
    this._createActionByOption("onFieldDataChanged")(args);
  },
  _updateItems(layoutData) {
    var that = this;
    var userItems = this.option("items");
    var isUserItemsExist = isDefined(userItems);
    var customizeItem = that.option("customizeItem");
    var items = isUserItemsExist ? userItems : this._generateItemsByData(layoutData);
    if (isDefined(items)) {
      var processedItems = [];
      each(items, (index, item) => {
        if (that._isAcceptableItem(item)) {
          item = that._processItem(item);
          customizeItem && customizeItem(item);
          if (isObject(item) && false !== variable_wrapper_default.unwrap(item.visible)) {
            processedItems.push(item);
          }
        }
      });
      if (!that._itemWatchers.length || !isUserItemsExist) {
        that._updateItemWatchers(items);
      }
      this._setItems(processedItems);
      this._sortItems();
    }
  },
  _cleanItemWatchers() {
    this._itemWatchers.forEach((dispose) => {
      dispose();
    });
    this._itemWatchers = [];
  },
  _updateItemWatchers(items) {
    var that = this;
    var watch = that._getWatch();
    items.forEach((item) => {
      if (isObject(item) && isDefined(item.visible) && isFunction(watch)) {
        that._itemWatchers.push(watch(() => variable_wrapper_default.unwrap(item.visible), () => {
          that._updateItems(that.option("layoutData"));
          that.repaint();
        }, {
          skipImmediate: true
        }));
      }
    });
  },
  _generateItemsByData(layoutData) {
    var result2 = [];
    if (isDefined(layoutData)) {
      each(layoutData, (dataField) => {
        result2.push({
          dataField
        });
      });
    }
    return result2;
  },
  _isAcceptableItem(item) {
    var itemField = item.dataField || item;
    var itemData = this._getDataByField(itemField);
    return !(isFunction(itemData) && !variable_wrapper_default.isWrapped(itemData));
  },
  _processItem(item) {
    var _a;
    if ("string" === typeof item) {
      item = {
        dataField: item
      };
    }
    if ("object" === typeof item && !item.itemType) {
      item.itemType = SIMPLE_ITEM_TYPE;
    }
    if (!isDefined(item.editorType) && isDefined(item.dataField)) {
      var value2 = this._getDataByField(item.dataField);
      item.editorType = isDefined(value2) ? this._getEditorTypeByDataType(type(value2)) : FORM_EDITOR_BY_DEFAULT;
    }
    if ("dxCheckBox" === item.editorType) {
      item.allowIndeterminateState = null !== (_a = item.allowIndeterminateState) && void 0 !== _a ? _a : true;
    }
    return item;
  },
  _getEditorTypeByDataType(dataType) {
    switch (dataType) {
      case "number":
        return "dxNumberBox";
      case "date":
        return "dxDateBox";
      case "boolean":
        return "dxCheckBox";
      default:
        return "dxTextBox";
    }
  },
  _sortItems() {
    normalizeIndexes(this._items, "visibleIndex");
    this._sortIndexes();
  },
  _sortIndexes() {
    this._items.sort((itemA, itemB) => {
      var indexA = itemA.visibleIndex;
      var indexB = itemB.visibleIndex;
      var result2;
      if (indexA > indexB) {
        result2 = 1;
      } else if (indexA < indexB) {
        result2 = -1;
      } else {
        result2 = 0;
      }
      return result2;
    });
  },
  _initMarkup() {
    this._itemsRunTimeInfo.clear();
    this.$element().addClass(FORM_LAYOUT_MANAGER_CLASS);
    this.callBase();
    this._renderResponsiveBox();
  },
  _renderResponsiveBox() {
    var templatesInfo = [];
    if (this._items && this._items.length) {
      var colCount = this._getColCount();
      var $container = renderer_default("<div>").appendTo(this.$element());
      this._prepareItemsWithMerging(colCount);
      var layoutItems = this._generateLayoutItems();
      this._responsiveBox = this._createComponent($container, responsive_box_default, this._getResponsiveBoxConfig(layoutItems, colCount, templatesInfo));
      if (!hasWindow()) {
        this._renderTemplates(templatesInfo);
      }
    }
  },
  _itemStateChangedHandler(e) {
    this._refresh();
  },
  _renderTemplates(templatesInfo) {
    var that = this;
    var itemsWithLabelTemplateCount = 0;
    templatesInfo.forEach((_ref2) => {
      var {
        item
      } = _ref2;
      var _a;
      if (null === (_a = null === item || void 0 === item ? void 0 : item.label) || void 0 === _a ? void 0 : _a.template) {
        itemsWithLabelTemplateCount++;
      }
    });
    each(templatesInfo, (index, info) => {
      switch (info.itemType) {
        case "empty":
          renderEmptyItem(info);
          break;
        case "button":
          that._renderButtonItem(info);
          break;
        default:
          that._renderFieldItem(info, itemsWithLabelTemplateCount);
      }
    });
  },
  _getResponsiveBoxConfig(layoutItems, colCount, templatesInfo) {
    var that = this;
    var colCountByScreen = that.option("colCountByScreen");
    var xsColCount = colCountByScreen && colCountByScreen.xs;
    return {
      onItemStateChanged: this._itemStateChangedHandler.bind(this),
      onLayoutChanged() {
        var onLayoutChanged = that.option("onLayoutChanged");
        var isSingleColumnMode = that.isSingleColumnMode();
        if (onLayoutChanged) {
          that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, isSingleColumnMode);
          onLayoutChanged(isSingleColumnMode);
        }
      },
      onContentReady(e) {
        if (hasWindow()) {
          that._renderTemplates(templatesInfo);
        }
        if (that.option("onLayoutChanged")) {
          that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, that.isSingleColumnMode(e.component));
        }
      },
      itemTemplate(e, itemData, itemElement) {
        if (!e.location) {
          return;
        }
        var $itemElement = renderer_default(itemElement);
        var itemRenderedCountInPreviousRows = e.location.row * colCount;
        var item = that._items[e.location.col + itemRenderedCountInPreviousRows];
        if (!item) {
          return;
        }
        var itemCssClassList = [item.cssClass];
        $itemElement.toggleClass(SINGLE_COLUMN_ITEM_CONTENT, that.isSingleColumnMode(this));
        if (0 === e.location.row) {
          itemCssClassList.push(LAYOUT_MANAGER_FIRST_ROW_CLASS);
        }
        if (0 === e.location.col) {
          itemCssClassList.push(LAYOUT_MANAGER_FIRST_COL_CLASS);
        }
        if (item.itemType === SIMPLE_ITEM_TYPE && that.option("isRoot")) {
          $itemElement.addClass(ROOT_SIMPLE_ITEM_CLASS);
        }
        var isLastColumn = e.location.col === colCount - 1 || e.location.col + e.location.colspan === colCount;
        var rowsCount = that._getRowsCount();
        var isLastRow = e.location.row === rowsCount - 1;
        if (isLastColumn) {
          itemCssClassList.push(LAYOUT_MANAGER_LAST_COL_CLASS);
        }
        if (isLastRow) {
          itemCssClassList.push(LAYOUT_MANAGER_LAST_ROW_CLASS);
        }
        if ("empty" !== item.itemType) {
          itemCssClassList.push(FIELD_ITEM_CLASS);
          itemCssClassList.push(that.option("cssItemClass"));
          if (isDefined(item.col)) {
            itemCssClassList.push("dx-col-".concat(item.col));
          }
        }
        templatesInfo.push({
          itemType: item.itemType,
          item,
          $parent: $itemElement,
          rootElementCssClassList: itemCssClassList
        });
      },
      cols: that._generateRatio(colCount),
      rows: that._generateRatio(that._getRowsCount(), true),
      dataSource: layoutItems,
      screenByWidth: that.option("screenByWidth"),
      singleColumnScreen: xsColCount ? false : "xs"
    };
  },
  _getColCount() {
    var colCount = this.option("colCount");
    var colCountByScreen = this.option("colCountByScreen");
    if (colCountByScreen) {
      var screenFactor = this.option("form").getTargetScreenFactor();
      if (!screenFactor) {
        screenFactor = hasWindow() ? getCurrentScreenFactor(this.option("screenByWidth")) : "lg";
      }
      colCount = colCountByScreen[screenFactor] || colCount;
    }
    if ("auto" === colCount) {
      if (this._cashedColCount) {
        return this._cashedColCount;
      }
      this._cashedColCount = colCount = this._getMaxColCount();
    }
    return colCount < 1 ? 1 : colCount;
  },
  _getMaxColCount() {
    if (!hasWindow()) {
      return 1;
    }
    var minColWidth = this.option("minColWidth");
    var width = getWidth(this.$element());
    var itemsCount = this._items.length;
    var maxColCount = Math.floor(width / minColWidth) || 1;
    return itemsCount < maxColCount ? itemsCount : maxColCount;
  },
  isCachedColCountObsolete() {
    return this._cashedColCount && this._getMaxColCount() !== this._cashedColCount;
  },
  _prepareItemsWithMerging(colCount) {
    var items = this._items.slice(0);
    var item;
    var itemsMergedByCol;
    var result2 = [];
    var j;
    var i;
    for (i = 0; i < items.length; i++) {
      item = items[i];
      result2.push(item);
      if (this.option("alignItemLabels") || item.alignItemLabels || item.colSpan) {
        item.col = this._getColByIndex(result2.length - 1, colCount);
      }
      if (item.colSpan > 1 && item.col + item.colSpan <= colCount) {
        itemsMergedByCol = [];
        for (j = 0; j < item.colSpan - 1; j++) {
          itemsMergedByCol.push({
            merged: true
          });
        }
        result2 = result2.concat(itemsMergedByCol);
      } else {
        delete item.colSpan;
      }
    }
    this._setItems(result2);
  },
  _getColByIndex: (index, colCount) => index % colCount,
  _setItems(items) {
    this._items = items;
    this._cashedColCount = null;
  },
  _generateLayoutItems() {
    var items = this._items;
    var colCount = this._getColCount();
    var result2 = [];
    var item;
    var i;
    for (i = 0; i < items.length; i++) {
      item = items[i];
      if (!item.merged) {
        var generatedItem = {
          location: {
            row: parseInt(i / colCount),
            col: this._getColByIndex(i, colCount)
          }
        };
        if (isDefined(item.disabled)) {
          generatedItem.disabled = item.disabled;
        }
        if (isDefined(item.visible)) {
          generatedItem.visible = item.visible;
        }
        if (isDefined(item.colSpan)) {
          generatedItem.location.colspan = item.colSpan;
        }
        if (isDefined(item.rowSpan)) {
          generatedItem.location.rowspan = item.rowSpan;
        }
        result2.push(generatedItem);
      }
    }
    return result2;
  },
  _renderEmptyItem($container) {
    renderEmptyItem({
      $container
    });
  },
  _renderButtonItem(_ref3) {
    var {
      item,
      $parent,
      rootElementCssClassList
    } = _ref3;
    var {
      $rootElement,
      buttonInstance
    } = renderButtonItem({
      item,
      $parent,
      rootElementCssClassList,
      validationGroup: this.option("validationGroup"),
      createComponentCallback: this._createComponent.bind(this)
    });
    this._itemsRunTimeInfo.add({
      item,
      widgetInstance: buttonInstance,
      guid: item.guid,
      $itemContainer: $rootElement
    });
  },
  _renderFieldItem(_ref4, itemsWithLabelTemplateCount) {
    var {
      item,
      $parent,
      rootElementCssClassList
    } = _ref4;
    var _a, _b;
    var editorValue = this._getDataByField(item.dataField);
    var canAssignUndefinedValueToEditor = false;
    if (void 0 === editorValue) {
      var {
        allowIndeterminateState,
        editorType,
        dataField
      } = item;
      canAssignUndefinedValueToEditor = this._isCheckboxUndefinedStateEnabled({
        allowIndeterminateState,
        editorType,
        dataField
      });
    }
    var name2 = item.dataField || item.name;
    var formOrLayoutManager = this._getFormOrThis();
    var {
      $fieldEditorContainer,
      widgetInstance,
      $rootElement
    } = renderFieldItem(convertToRenderFieldItemOptions({
      $parent,
      rootElementCssClassList,
      item,
      name: name2,
      editorValue,
      canAssignUndefinedValueToEditor,
      formOrLayoutManager: this._getFormOrThis(),
      createComponentCallback: this._createComponent.bind(this),
      formLabelLocation: this.option("labelLocation"),
      requiredMessageTemplate: this.option("requiredMessage"),
      validationGroup: this.option("validationGroup"),
      editorValidationBoundary: this.option("validationBoundary"),
      editorStylingMode: this.option("form") && this.option("form").option("stylingMode"),
      showColonAfterLabel: this.option("showColonAfterLabel"),
      managerLabelLocation: this.option("labelLocation"),
      template: item.template ? this._getTemplate(item.template) : null,
      labelTemplate: (null === (_a = item.label) || void 0 === _a ? void 0 : _a.template) ? this._getTemplate(item.label.template) : null,
      itemId: this.option("form") && this.option("form").getItemID(name2),
      managerMarkOptions: this._getMarkOptions(),
      labelMode: this.option("labelMode"),
      onLabelTemplateRendered: () => {
        this._incTemplateRenderedCallCount();
        if (this._shouldAlignLabelsOnTemplateRendered(formOrLayoutManager, itemsWithLabelTemplateCount)) {
          formOrLayoutManager._alignLabels(this, this.isSingleColumnMode(formOrLayoutManager));
        }
      }
    }));
    null === (_b = this.option("onFieldItemRendered")) || void 0 === _b ? void 0 : _b();
    if (widgetInstance && item.dataField) {
      this._bindDataField(widgetInstance, item.dataField, item.editorType, $fieldEditorContainer);
    }
    this._itemsRunTimeInfo.add({
      item,
      widgetInstance,
      guid: item.guid,
      $itemContainer: $rootElement
    });
  },
  _incTemplateRenderedCallCount() {
    var _a;
    this._labelTemplateRenderedCallCount = (null !== (_a = this._labelTemplateRenderedCallCount) && void 0 !== _a ? _a : 0) + 1;
  },
  _shouldAlignLabelsOnTemplateRendered(formOrLayoutManager, totalItemsWithLabelTemplate) {
    return formOrLayoutManager.option("templatesRenderAsynchronously") && this._labelTemplateRenderedCallCount === totalItemsWithLabelTemplate;
  },
  _getMarkOptions() {
    return {
      showRequiredMark: this.option("showRequiredMark"),
      requiredMark: this.option("requiredMark"),
      showOptionalMark: this.option("showOptionalMark"),
      optionalMark: this.option("optionalMark")
    };
  },
  _getFormOrThis() {
    return this.option("form") || this;
  },
  _bindDataField(editorInstance, dataField, editorType, $container) {
    var formOrThis = this._getFormOrThis();
    editorInstance.on("enterKey", (args) => {
      formOrThis._createActionByOption("onEditorEnterKey")(extend(args, {
        dataField
      }));
    });
    this._createWatcher(editorInstance, $container, dataField);
    this.linkEditorToDataField(editorInstance, dataField, editorType);
  },
  _createWatcher(editorInstance, $container, dataField) {
    var that = this;
    var watch = that._getWatch();
    if (!isFunction(watch)) {
      return;
    }
    var dispose = watch(() => that._getDataByField(dataField), () => {
      var fieldValue = that._getDataByField(dataField);
      if ("dxTagBox" === editorInstance.NAME) {
        var editorValue = editorInstance.option("value");
        if (fieldValue !== editorValue && function(array1, array2) {
          if (!Array.isArray(array1) || !Array.isArray(array2) || array1.length !== array2.length) {
            return false;
          }
          for (var i = 0; i < array1.length; i++) {
            if (array1[i] !== array2[i]) {
              return false;
            }
          }
          return true;
        }(fieldValue, editorValue)) {
          return;
        }
      }
      editorInstance.option("value", fieldValue);
    }, {
      deep: true,
      skipImmediate: true
    }, {
      createWatcherDataField: dataField
    });
    events_engine_default.on($container, removeEvent, dispose);
  },
  _getWatch() {
    if (!isDefined(this._watch)) {
      var formInstance = this.option("form");
      this._watch = formInstance && formInstance.option("integrationOptions.watchMethod");
    }
    return this._watch;
  },
  _createComponent($editor, type2, editorOptions) {
    var readOnlyState = this.option("readOnly");
    var hasEditorReadOnly = Object.hasOwn(editorOptions, "readOnly");
    var instance = this.callBase($editor, type2, _extends(_extends({}, editorOptions), {
      readOnly: !hasEditorReadOnly ? readOnlyState : editorOptions.readOnly
    }));
    var isChangeByForm = false;
    instance.on("optionChanged", (args) => {
      if ("readOnly" === args.name && !isChangeByForm) {
        hasEditorReadOnly = true;
      }
    });
    this.on("optionChanged", (args) => {
      if ("readOnly" === args.name && !hasEditorReadOnly) {
        isChangeByForm = true;
        instance.option(args.name, args.value);
        isChangeByForm = false;
      }
    });
    return instance;
  },
  _generateRatio(count, isAutoSize) {
    var result2 = [];
    var ratio;
    var i;
    for (i = 0; i < count; i++) {
      ratio = {
        ratio: 1
      };
      if (isAutoSize) {
        ratio.baseSize = "auto";
      }
      result2.push(ratio);
    }
    return result2;
  },
  _getRowsCount() {
    return Math.ceil(this._items.length / this._getColCount());
  },
  _updateReferencedOptions(newLayoutData) {
    var layoutData = this.option("layoutData");
    if (isObject(layoutData)) {
      Object.getOwnPropertyNames(layoutData).forEach((property) => delete this._optionsByReference["layoutData.".concat(property)]);
    }
    if (isObject(newLayoutData)) {
      Object.getOwnPropertyNames(newLayoutData).forEach((property) => this._optionsByReference["layoutData.".concat(property)] = true);
    }
  },
  _clearWidget(instance) {
    this._disableEditorValueChangedHandler = true;
    instance.clear();
    this._disableEditorValueChangedHandler = false;
    instance.option("isValid", true);
  },
  _optionChanged(args) {
    if (0 === args.fullName.search("layoutData.")) {
      return;
    }
    switch (args.name) {
      case "showRequiredMark":
      case "showOptionalMark":
      case "requiredMark":
      case "optionalMark":
        this._cashedRequiredConfig = null;
        this._invalidate();
        break;
      case "layoutData":
        this._updateReferencedOptions(args.value);
        if (this.option("items")) {
          if (!isEmptyObject(args.value)) {
            this._itemsRunTimeInfo.each((_, itemRunTimeInfo) => {
              if (isDefined(itemRunTimeInfo.item)) {
                var {
                  dataField
                } = itemRunTimeInfo.item;
                if (dataField && isDefined(itemRunTimeInfo.widgetInstance)) {
                  var valueGetter = compileGetter(dataField);
                  var dataValue = valueGetter(args.value);
                  var {
                    allowIndeterminateState,
                    editorType
                  } = itemRunTimeInfo.item;
                  if (void 0 !== dataValue || this._isCheckboxUndefinedStateEnabled({
                    allowIndeterminateState,
                    editorType,
                    dataField
                  })) {
                    itemRunTimeInfo.widgetInstance.option("value", dataValue);
                  } else {
                    this._clearWidget(itemRunTimeInfo.widgetInstance);
                  }
                }
              }
            });
          }
        } else {
          this._initDataAndItems(args.value);
          this._invalidate();
        }
        break;
      case "items":
        this._cleanItemWatchers();
        this._initDataAndItems(args.value);
        this._invalidate();
        break;
      case "alignItemLabels":
      case "labelLocation":
      case "labelMode":
      case "requiredMessage":
        this._invalidate();
        break;
      case "customizeItem":
        this._updateItems(this.option("layoutData"));
        this._invalidate();
        break;
      case "colCount":
      case "colCountByScreen":
        this._resetColCount();
        break;
      case "minColWidth":
        if ("auto" === this.option("colCount")) {
          this._resetColCount();
        }
        break;
      case "readOnly":
        break;
      case "width":
        this.callBase(args);
        if ("auto" === this.option("colCount")) {
          this._resetColCount();
        }
        break;
      case "onFieldDataChanged":
        break;
      default:
        this.callBase(args);
    }
  },
  _resetColCount() {
    this._cashedColCount = null;
    this._invalidate();
  },
  linkEditorToDataField(editorInstance, dataField) {
    this.on("optionChanged", (args) => {
      if (args.fullName === "layoutData.".concat(dataField)) {
        editorInstance._setOptionWithoutOptionChange("value", args.value);
      }
    });
    editorInstance.on("valueChanged", (args) => {
      var isValueReferenceType = isObject(args.value) || Array.isArray(args.value);
      if (!this._disableEditorValueChangedHandler && !(isValueReferenceType && args.value === args.previousValue)) {
        this._updateFieldValue(dataField, args.value);
      }
    });
  },
  _dimensionChanged() {
    if ("auto" === this.option("colCount") && this.isCachedColCountObsolete()) {
      this._eventsStrategy.fireEvent("autoColCountChanged");
    }
  },
  updateData(data17, value2) {
    var that = this;
    if (isObject(data17)) {
      each(data17, (dataField, fieldValue) => {
        that._updateFieldValue(dataField, fieldValue);
      });
    } else if ("string" === typeof data17) {
      that._updateFieldValue(data17, value2);
    }
  },
  getEditor(field) {
    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(field) || this._itemsRunTimeInfo.findWidgetInstanceByName(field);
  },
  isSingleColumnMode(component) {
    var responsiveBox = this._responsiveBox || component;
    if (responsiveBox) {
      return responsiveBox.option("currentScreenFactor") === responsiveBox.option("singleColumnScreen");
    }
  },
  getItemsRunTimeInfo() {
    return this._itemsRunTimeInfo;
  }
});
component_registrator_default("dxLayoutManager", LayoutManager);

// node_modules/devextreme/esm/__internal/ui/m_validation_summary.js
var VALIDATION_SUMMARY_CLASS = "dx-validationsummary";
var ITEM_CLASS4 = "".concat(VALIDATION_SUMMARY_CLASS, "-item");
var ITEM_DATA_KEY3 = "".concat(VALIDATION_SUMMARY_CLASS, "-item-data");
var ValidationSummary = ui_collection_widget_edit_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      focusStateEnabled: false,
      noDataText: null
    });
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      validationGroup: true
    });
  },
  _init() {
    this.callBase();
    this._initGroupRegistration();
  },
  _initGroupRegistration() {
    var $element = this.$element();
    var group = this.option("validationGroup") || m_validation_engine_default.findGroup($element, this._modelByElement($element));
    var groupConfig = m_validation_engine_default.addGroup(group, true);
    this._unsubscribeGroup();
    this._groupWasInit = true;
    this._validationGroup = group;
    this.groupSubscription = this._groupValidationHandler.bind(this);
    groupConfig.on("validated", this.groupSubscription);
  },
  _unsubscribeGroup() {
    var groupConfig = m_validation_engine_default.getGroupConfig(this._validationGroup);
    groupConfig && groupConfig.off("validated", this.groupSubscription);
  },
  _getOrderedItems(validators, items) {
    var orderedItems = [];
    each(validators, (_, validator) => {
      var foundItems = grep(items, (item) => {
        if (item.validator === validator) {
          return true;
        }
      });
      if (foundItems.length) {
        orderedItems = orderedItems.concat(foundItems);
      }
    });
    return orderedItems;
  },
  _groupValidationHandler(params) {
    var items = this._getOrderedItems(params.validators, map(params.brokenRules, (rule) => ({
      text: rule.message,
      validator: rule.validator,
      index: rule.index
    })));
    this.validators = params.validators;
    each(this.validators, (_, validator) => {
      if (validator._validationSummary !== this) {
        var handler = this._itemValidationHandler.bind(this);
        validator.on("validated", handler);
        validator.on("disposing", function() {
          validator.off("validated", handler);
          validator._validationSummary = null;
          handler = null;
        });
        validator._validationSummary = this;
      }
    });
    this.option("items", items);
  },
  _itemValidationHandler(_ref) {
    var {
      isValid,
      validator,
      brokenRules
    } = _ref;
    var items = this.option("items");
    var itemsChanged = false;
    var itemIndex = 0;
    var _loop = function() {
      var item = items[itemIndex];
      if (item.validator === validator) {
        var foundRule = grep(brokenRules || [], (rule) => rule.index === item.index)[0];
        if (isValid || !foundRule) {
          items.splice(itemIndex, 1);
          itemsChanged = true;
          return 1;
        }
        if (foundRule.message !== item.text) {
          item.text = foundRule.message;
          itemsChanged = true;
        }
      }
      itemIndex++;
    };
    while (itemIndex < items.length) {
      if (_loop()) {
        continue;
      }
    }
    each(brokenRules, (_, rule) => {
      var foundItem = grep(items, (item) => item.validator === validator && item.index === rule.index)[0];
      if (!foundItem) {
        items.push({
          text: rule.message,
          validator,
          index: rule.index
        });
        itemsChanged = true;
      }
    });
    if (itemsChanged) {
      items = this._getOrderedItems(this.validators, items);
      this.option("items", items);
    }
  },
  _initMarkup() {
    this.$element().addClass(VALIDATION_SUMMARY_CLASS);
    this.callBase();
  },
  _optionChanged(args) {
    switch (args.name) {
      case "validationGroup":
        this._initGroupRegistration();
        break;
      default:
        this.callBase(args);
    }
  },
  _itemClass: () => ITEM_CLASS4,
  _itemDataKey: () => ITEM_DATA_KEY3,
  _postprocessRenderItem(params) {
    events_engine_default.on(params.itemElement, "click", () => {
      params.itemData.validator && params.itemData.validator.focus && params.itemData.validator.focus();
    });
  },
  _dispose() {
    this.callBase();
    this._unsubscribeGroup();
  },
  refreshValidationGroup() {
    this._initGroupRegistration();
  }
});
component_registrator_default("dxValidationSummary", ValidationSummary);
var m_validation_summary_default = ValidationSummary;

// node_modules/devextreme/esm/__internal/ui/m_validation_group.js
var VALIDATION_ENGINE_CLASS = "dx-validationgroup";
var VALIDATOR_CLASS2 = "dx-validator";
var VALIDATION_SUMMARY_CLASS2 = "dx-validationsummary";
var ValidationGroup = class extends dom_component_default {
  _getDefaultOptions() {
    return super._getDefaultOptions();
  }
  _init() {
    super._init();
    m_validation_engine_default.addGroup(this, false);
  }
  _initMarkup() {
    var $element = this.$element();
    $element.addClass(VALIDATION_ENGINE_CLASS);
    $element.find(".".concat(VALIDATOR_CLASS2)).each((_, validatorContainer) => {
      m_validator_default.getInstance(renderer_default(validatorContainer))._initGroupRegistration();
    });
    $element.find(".".concat(VALIDATION_SUMMARY_CLASS2)).each((_, summaryContainer) => {
      m_validation_summary_default.getInstance(renderer_default(summaryContainer)).refreshValidationGroup();
    });
    super._initMarkup();
  }
  validate() {
    return m_validation_engine_default.validateGroup(this);
  }
  reset() {
    return m_validation_engine_default.resetGroup(this);
  }
  _dispose() {
    m_validation_engine_default.removeGroup(this);
    this.$element().removeClass(VALIDATION_ENGINE_CLASS);
    super._dispose();
  }
  _useTemplates() {
    return false;
  }
};
component_registrator_default("dxValidationGroup", ValidationGroup);

// node_modules/devextreme/esm/__internal/ui/multi_view/m_multi_view.animation.js
var _translator = {
  move($element, position2) {
    move($element, {
      left: position2
    });
  }
};
var animation = {
  moveTo($element, position2, duration, completeAction) {
    fx_default.animate($element, {
      type: "slide",
      to: {
        left: position2
      },
      duration,
      complete: completeAction
    });
  },
  complete($element) {
    fx_default.stop($element, true);
  }
};

// node_modules/devextreme/esm/__internal/ui/m_multi_view.js
var MULTIVIEW_CLASS = "dx-multiview";
var MULTIVIEW_WRAPPER_CLASS = "dx-multiview-wrapper";
var MULTIVIEW_ITEM_CONTAINER_CLASS = "dx-multiview-item-container";
var MULTIVIEW_ITEM_CLASS = "dx-multiview-item";
var MULTIVIEW_ITEM_HIDDEN_CLASS = "dx-multiview-item-hidden";
var MULTIVIEW_ITEM_DATA_KEY = "dxMultiViewItemData";
var MULTIVIEW_ANIMATION_DURATION = 200;
var toNumber2 = (value2) => +value2;
var position = ($element) => locate($element).left;
var MultiView = ui_collection_widget_live_update_default.inherit({
  _activeStateUnit: ".".concat(MULTIVIEW_ITEM_CLASS),
  _supportedKeys() {
    return extend(this.callBase(), {
      pageUp: noop,
      pageDown: noop
    });
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      selectedIndex: 0,
      swipeEnabled: true,
      animationEnabled: true,
      loop: false,
      deferRendering: true,
      loopItemFocus: false,
      selectOnFocus: true,
      selectionMode: "single",
      selectionRequired: true,
      selectByClick: false
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }]);
  },
  _itemClass: () => MULTIVIEW_ITEM_CLASS,
  _itemDataKey: () => MULTIVIEW_ITEM_DATA_KEY,
  _itemContainer() {
    return this._$itemContainer;
  },
  _itemElements() {
    return this._itemContainer().children(this._itemSelector());
  },
  _itemWidth() {
    if (!this._itemWidthValue) {
      this._itemWidthValue = getWidth(this._$wrapper);
    }
    return this._itemWidthValue;
  },
  _clearItemWidthCache() {
    delete this._itemWidthValue;
  },
  _itemsCount() {
    return this.option("items").length;
  },
  _normalizeIndex(index) {
    var count = this._itemsCount();
    if (index < 0) {
      index += count;
    }
    if (index >= count) {
      index -= count;
    }
    return index;
  },
  _getRTLSignCorrection() {
    return this.option("rtlEnabled") ? -1 : 1;
  },
  _init() {
    this.callBase.apply(this, arguments);
    var $element = this.$element();
    $element.addClass(MULTIVIEW_CLASS);
    this._$wrapper = renderer_default("<div>").addClass(MULTIVIEW_WRAPPER_CLASS);
    this._$wrapper.appendTo($element);
    this._$itemContainer = renderer_default("<div>").addClass(MULTIVIEW_ITEM_CONTAINER_CLASS);
    this._$itemContainer.appendTo(this._$wrapper);
    this.option("loopItemFocus", this.option("loop"));
    this._findBoundaryIndices();
    this._initSwipeable();
  },
  _initMarkup() {
    this._deferredItems = [];
    this.callBase();
    var selectedItemIndices = this._getSelectedItemIndices();
    this._updateItemsVisibility(selectedItemIndices[0]);
    this._setElementAria();
    this._setItemsAria();
  },
  _afterItemElementDeleted($item, deletedActionArgs) {
    this.callBase($item, deletedActionArgs);
    if (this._deferredItems) {
      this._deferredItems.splice(deletedActionArgs.itemIndex, 1);
    }
  },
  _beforeItemElementInserted(change) {
    this.callBase.apply(this, arguments);
    if (this._deferredItems) {
      this._deferredItems.splice(change.index, 0, null);
    }
  },
  _executeItemRenderAction(index, itemData, itemElement) {
    index = (this.option("items") || []).indexOf(itemData);
    this.callBase(index, itemData, itemElement);
  },
  _renderItemContent(args) {
    var renderContentDeferred = Deferred();
    var that = this;
    var {
      callBase
    } = this;
    var deferred = Deferred();
    deferred.done(() => {
      var $itemContent = callBase.call(that, args);
      renderContentDeferred.resolve($itemContent);
    });
    this._deferredItems[args.index] = deferred;
    this.option("deferRendering") || deferred.resolve();
    return renderContentDeferred.promise();
  },
  _render() {
    this.callBase();
    deferRender(() => {
      var selectedItemIndices = this._getSelectedItemIndices();
      this._updateItems(selectedItemIndices[0]);
    });
  },
  _getElementAria: () => ({
    role: "group",
    roledescription: message_default.format("dxMultiView-elementAriaRoleDescription"),
    label: message_default.format("dxMultiView-elementAriaLabel")
  }),
  _setElementAria() {
    var aria = this._getElementAria();
    this.setAria(aria, this.$element());
  },
  _setItemsAria() {
    var $itemElements = this._itemElements();
    var itemsCount = this._itemsCount();
    $itemElements.each((itemIndex, item) => {
      var aria = this._getItemAria({
        itemIndex,
        itemsCount
      });
      this.setAria(aria, renderer_default(item));
    });
  },
  _getItemAria(_ref) {
    var {
      itemIndex,
      itemsCount
    } = _ref;
    var aria = {
      role: "group",
      roledescription: message_default.format("dxMultiView-itemAriaRoleDescription"),
      label: message_default.format("dxMultiView-itemAriaLabel", itemIndex + 1, itemsCount)
    };
    return aria;
  },
  _updateItems(selectedIndex, newIndex) {
    this._updateItemsPosition(selectedIndex, newIndex);
    this._updateItemsVisibility(selectedIndex, newIndex);
  },
  _modifyByChanges() {
    this.callBase.apply(this, arguments);
    var selectedItemIndices = this._getSelectedItemIndices();
    this._updateItemsVisibility(selectedItemIndices[0]);
  },
  _updateItemsPosition(selectedIndex, newIndex) {
    var $itemElements = this._itemElements();
    var positionSign = isDefined(newIndex) ? -this._animationDirection(newIndex, selectedIndex) : void 0;
    var $selectedItem = $itemElements.eq(selectedIndex);
    _translator.move($selectedItem, 0);
    if (isDefined(newIndex)) {
      _translator.move($itemElements.eq(newIndex), "".concat(100 * positionSign, "%"));
    }
  },
  _updateItemsVisibility(selectedIndex, newIndex) {
    var $itemElements = this._itemElements();
    $itemElements.each((itemIndex, item) => {
      var $item = renderer_default(item);
      var isHidden = itemIndex !== selectedIndex && itemIndex !== newIndex;
      if (!isHidden) {
        this._renderSpecificItem(itemIndex);
      }
      $item.toggleClass(MULTIVIEW_ITEM_HIDDEN_CLASS, isHidden);
      this.setAria("hidden", isHidden || void 0, $item);
    });
  },
  _renderSpecificItem(index) {
    var $item = this._itemElements().eq(index);
    var hasItemContent = $item.find(this._itemContentClass()).length > 0;
    if (isDefined(index) && !hasItemContent) {
      this._deferredItems[index].resolve();
      triggerResizeEvent($item);
    }
  },
  _refreshItem($item, item) {
    this.callBase($item, item);
    this._updateItemsVisibility(this.option("selectedIndex"));
  },
  _setAriaSelectionAttribute: noop,
  _updateSelection(addedSelection, removedSelection) {
    var newIndex = addedSelection[0];
    var prevIndex = removedSelection[0];
    animation.complete(this._$itemContainer);
    this._updateItems(prevIndex, newIndex);
    var animationDirection = this._animationDirection(newIndex, prevIndex);
    this._animateItemContainer(animationDirection * this._itemWidth(), () => {
      _translator.move(this._$itemContainer, 0);
      this._updateItems(newIndex);
      getWidth(this._$itemContainer);
    });
  },
  _animateItemContainer(position2, completeCallback) {
    var duration = this.option("animationEnabled") ? MULTIVIEW_ANIMATION_DURATION : 0;
    animation.moveTo(this._$itemContainer, position2, duration, completeCallback);
  },
  _animationDirection(newIndex, prevIndex) {
    var containerPosition = position(this._$itemContainer);
    var indexDifference = (prevIndex - newIndex) * this._getRTLSignCorrection() * this._getItemFocusLoopSignCorrection();
    var isSwipePresent = 0 !== containerPosition;
    var directionSignVariable = isSwipePresent ? containerPosition : indexDifference;
    return sign(directionSignVariable);
  },
  _getSwipeDisabledState() {
    return !this.option("swipeEnabled") || this._itemsCount() <= 1;
  },
  _initSwipeable() {
    this._createComponent(this.$element(), swipeable_default, {
      disabled: this._getSwipeDisabledState(),
      elastic: false,
      itemSizeFunc: this._itemWidth.bind(this),
      onStart: (args) => this._swipeStartHandler(args.event),
      onUpdated: (args) => this._swipeUpdateHandler(args.event),
      onEnd: (args) => this._swipeEndHandler(args.event)
    });
  },
  _findBoundaryIndices() {
    var items = this.option("items");
    var firstIndex;
    var lastIndex;
    items.forEach((item, index) => {
      var isDisabled = Boolean(null === item || void 0 === item ? void 0 : item.disabled);
      if (!isDisabled) {
        null !== firstIndex && void 0 !== firstIndex ? firstIndex : firstIndex = index;
        lastIndex = index;
      }
    });
    this._boundaryIndices = {
      firstAvailableIndex: null !== firstIndex && void 0 !== firstIndex ? firstIndex : 0,
      lastAvailableIndex: null !== lastIndex && void 0 !== lastIndex ? lastIndex : items.length - 1,
      firstTrueIndex: 0,
      lastTrueIndex: items.length - 1
    };
  },
  _swipeStartHandler(e) {
    animation.complete(this._$itemContainer);
    var selectedIndex = this.option("selectedIndex");
    var loop = this.option("loop");
    var {
      firstAvailableIndex,
      lastAvailableIndex
    } = this._boundaryIndices;
    var rtl = this.option("rtlEnabled");
    e.maxLeftOffset = toNumber2(loop || (rtl ? selectedIndex > firstAvailableIndex : selectedIndex < lastAvailableIndex));
    e.maxRightOffset = toNumber2(loop || (rtl ? selectedIndex < lastAvailableIndex : selectedIndex > firstAvailableIndex));
    this._swipeDirection = null;
  },
  _swipeUpdateHandler(e) {
    var {
      offset
    } = e;
    var swipeDirection = sign(offset) * this._getRTLSignCorrection();
    _translator.move(this._$itemContainer, offset * this._itemWidth());
    if (swipeDirection !== this._swipeDirection) {
      this._swipeDirection = swipeDirection;
      var selectedIndex = this.option("selectedIndex");
      var newIndex = this._normalizeIndex(selectedIndex - swipeDirection);
      this._updateItems(selectedIndex, newIndex);
    }
  },
  _findNextAvailableIndex(index, offset) {
    var {
      items,
      loop
    } = this.option();
    var {
      firstAvailableIndex,
      lastAvailableIndex,
      firstTrueIndex,
      lastTrueIndex
    } = this._boundaryIndices;
    var isFirstActive = [firstTrueIndex, firstAvailableIndex].includes(index);
    var isLastActive = [lastTrueIndex, lastAvailableIndex].includes(index);
    if (loop) {
      if (isFirstActive && offset < 0) {
        return lastAvailableIndex;
      }
      if (isLastActive && offset > 0) {
        return firstAvailableIndex;
      }
    }
    for (var i = index + offset; i >= firstAvailableIndex && i <= lastAvailableIndex; i += offset) {
      var isDisabled = Boolean(items[i].disabled);
      if (!isDisabled) {
        return i;
      }
    }
    return index;
  },
  _swipeEndHandler(e) {
    var targetOffset = e.targetOffset * this._getRTLSignCorrection();
    if (targetOffset) {
      var newSelectedIndex = this._findNextAvailableIndex(this.option("selectedIndex"), -targetOffset);
      this.option("selectedIndex", newSelectedIndex);
      var $selectedElement = this.itemElements().filter(".dx-item-selected");
      this.option("focusStateEnabled") && this.option("focusedElement", getPublicElement($selectedElement));
    } else {
      this._animateItemContainer(0, noop);
    }
  },
  _getItemFocusLoopSignCorrection() {
    return this._itemFocusLooped ? -1 : 1;
  },
  _moveFocus() {
    this.callBase.apply(this, arguments);
    this._itemFocusLooped = false;
  },
  _prevItem($items) {
    var $result = this.callBase.apply(this, arguments);
    this._itemFocusLooped = $result.is($items.last());
    return $result;
  },
  _nextItem($items) {
    var $result = this.callBase.apply(this, arguments);
    this._itemFocusLooped = $result.is($items.first());
    return $result;
  },
  _dimensionChanged() {
    this._clearItemWidthCache();
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._dimensionChanged();
    }
  },
  _updateSwipeDisabledState() {
    var disabled = this._getSwipeDisabledState();
    swipeable_default.getInstance(this.$element()).option("disabled", disabled);
  },
  _dispose() {
    delete this._boundaryIndices;
    this.callBase();
  },
  _optionChanged(args) {
    var {
      value: value2
    } = args;
    switch (args.name) {
      case "loop":
        this.option("loopItemFocus", value2);
        break;
      case "animationEnabled":
        break;
      case "swipeEnabled":
        this._updateSwipeDisabledState();
        break;
      case "deferRendering":
        this._invalidate();
        break;
      case "items":
        this._updateSwipeDisabledState();
        this._findBoundaryIndices();
        this.callBase(args);
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxMultiView", MultiView);
var m_multi_view_default = MultiView;

// node_modules/devextreme/esm/ui/multi_view.js
var multi_view_default = m_multi_view_default;

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_scroll_left_max.js
function getScrollLeftMax(element) {
  return element.scrollWidth - element.clientWidth;
}

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_scroll_top_max.js
function getScrollTopMax(element) {
  return element.scrollHeight - element.clientHeight;
}

// node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_boundary_props.js
function isReachedLeft(scrollOffsetLeft, epsilon) {
  return Math.round(scrollOffsetLeft) <= epsilon;
}
function isReachedRight(element, scrollOffsetLeft, epsilon) {
  return Math.round(getScrollLeftMax(element) - scrollOffsetLeft) <= epsilon;
}
function isReachedTop(scrollOffsetTop, epsilon) {
  return Math.round(scrollOffsetTop) <= epsilon;
}
function isReachedBottom(element, scrollOffsetTop, pocketHeight, epsilon) {
  return Math.round(getScrollTopMax(element) - scrollOffsetTop - pocketHeight) <= epsilon;
}

// node_modules/devextreme/esm/__internal/ui/tabs/constants.js
var TABS_EXPANDED_CLASS = "dx-tabs-expanded";

// node_modules/devextreme/esm/__internal/ui/tabs/m_item.js
var TABS_ITEM_BADGE_CLASS = "dx-tabs-item-badge";
var BADGE_CLASS2 = "dx-badge";
var TabsItem = m_item_default.inherit({
  _renderWatchers() {
    this.callBase();
    this._startWatcher("badge", this._renderBadge.bind(this));
  },
  _renderBadge(badge) {
    this._$element.children(".".concat(BADGE_CLASS2)).remove();
    if (!badge) {
      return;
    }
    var $badge = renderer_default("<div>").addClass(TABS_ITEM_BADGE_CLASS).addClass(BADGE_CLASS2).text(badge);
    this._$element.append($badge);
  }
});
var m_item_default3 = TabsItem;

// node_modules/devextreme/esm/__internal/ui/tabs/m_tabs.js
var TABS_CLASS = "dx-tabs";
var TABS_WRAPPER_CLASS = "dx-tabs-wrapper";
var TABS_STRETCHED_CLASS = "dx-tabs-stretched";
var TABS_SCROLLABLE_CLASS = "dx-tabs-scrollable";
var TABS_NAV_BUTTONS_CLASS = "dx-tabs-nav-buttons";
var OVERFLOW_HIDDEN_CLASS = "dx-overflow-hidden";
var TABS_ITEM_CLASS = "dx-tab";
var TABS_ITEM_SELECTED_CLASS = "dx-tab-selected";
var TABS_SCROLLING_ENABLED_CLASS = "dx-tabs-scrolling-enabled";
var TABS_NAV_BUTTON_CLASS = "dx-tabs-nav-button";
var TABS_LEFT_NAV_BUTTON_CLASS = "dx-tabs-nav-button-left";
var TABS_RIGHT_NAV_BUTTON_CLASS = "dx-tabs-nav-button-right";
var TABS_ITEM_TEXT_CLASS = "dx-tab-text";
var TABS_ITEM_TEXT_SPAN_CLASS = "dx-tab-text-span";
var TABS_ITEM_TEXT_SPAN_PSEUDO_CLASS = "dx-tab-text-span-pseudo";
var STATE_DISABLED_CLASS = "dx-state-disabled";
var FOCUSED_DISABLED_NEXT_TAB_CLASS = "dx-focused-disabled-next-tab";
var FOCUSED_DISABLED_PREV_TAB_CLASS = "dx-focused-disabled-prev-tab";
var TABS_ORIENTATION_CLASS = {
  vertical: "dx-tabs-vertical",
  horizontal: "dx-tabs-horizontal"
};
var INDICATOR_POSITION_CLASS = {
  top: "dx-tab-indicator-position-top",
  right: "dx-tab-indicator-position-right",
  bottom: "dx-tab-indicator-position-bottom",
  left: "dx-tab-indicator-position-left"
};
var TABS_ICON_POSITION_CLASS = {
  top: "dx-tabs-icon-position-top",
  end: "dx-tabs-icon-position-end",
  bottom: "dx-tabs-icon-position-bottom",
  start: "dx-tabs-icon-position-start"
};
var TABS_STYLING_MODE_CLASS = {
  primary: "dx-tabs-styling-mode-primary",
  secondary: "dx-tabs-styling-mode-secondary"
};
var TABS_ITEM_DATA_KEY = "dxTabData";
var BUTTON_NEXT_ICON = "chevronnext";
var BUTTON_PREV_ICON = "chevronprev";
var FEEDBACK_HIDE_TIMEOUT = 100;
var FEEDBACK_DURATION_INTERVAL = 5;
var FEEDBACK_SCROLL_TIMEOUT = 300;
var TAB_OFFSET = 30;
var ORIENTATION = {
  horizontal: "horizontal",
  vertical: "vertical"
};
var INDICATOR_POSITION = {
  top: "top",
  right: "right",
  bottom: "bottom",
  left: "left"
};
var SCROLLABLE_DIRECTION = {
  horizontal: "horizontal",
  vertical: "vertical"
};
var ICON_POSITION = {
  top: "top",
  end: "end",
  bottom: "bottom",
  start: "start"
};
var STYLING_MODE = {
  primary: "primary",
  secondary: "secondary"
};
var Tabs = ui_collection_widget_live_update_default.inherit({
  _activeStateUnit: ".".concat(TABS_ITEM_CLASS),
  _getDefaultOptions() {
    return extend(this.callBase(), {
      hoverStateEnabled: true,
      showNavButtons: true,
      scrollByContent: true,
      scrollingEnabled: true,
      selectionMode: "single",
      orientation: ORIENTATION.horizontal,
      iconPosition: ICON_POSITION.start,
      stylingMode: STYLING_MODE.primary,
      activeStateEnabled: true,
      selectionRequired: false,
      selectOnFocus: true,
      loopItemFocus: false,
      useInkRipple: false,
      badgeExpr: (data17) => data17 ? data17.badge : void 0,
      _itemAttributes: {
        role: "tab"
      },
      _indicatorPosition: null
    });
  },
  _defaultOptionsRules() {
    var themeName = current();
    return this.callBase().concat([{
      device: () => "desktop" !== devices_default.real().deviceType,
      options: {
        showNavButtons: false
      }
    }, {
      device: {
        deviceType: "desktop"
      },
      options: {
        scrollByContent: false
      }
    }, {
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }, {
      device: () => isFluent(themeName),
      options: {
        iconPosition: ICON_POSITION.top,
        stylingMode: STYLING_MODE.secondary
      }
    }, {
      device: () => isMaterial(themeName),
      options: {
        useInkRipple: true,
        selectOnFocus: false,
        iconPosition: ICON_POSITION.top
      }
    }]);
  },
  _init() {
    var {
      orientation,
      stylingMode,
      scrollingEnabled
    } = this.option();
    var indicatorPosition = this._getIndicatorPosition();
    this.callBase();
    this.$element().addClass(TABS_CLASS);
    this._toggleScrollingEnabledClass(scrollingEnabled);
    this._toggleOrientationClass(orientation);
    this._toggleIndicatorPositionClass(indicatorPosition);
    this._toggleIconPositionClass();
    this._toggleStylingModeClass(stylingMode);
    this._renderWrapper();
    this._renderMultiple();
    this._feedbackHideTimeout = FEEDBACK_HIDE_TIMEOUT;
  },
  _prepareDefaultItemTemplate(data17, $container) {
    var text = isPlainObject(data17) ? null === data17 || void 0 === data17 ? void 0 : data17.text : data17;
    if (isDefined(text)) {
      var $tabTextSpan = renderer_default("<span>").addClass(TABS_ITEM_TEXT_SPAN_CLASS);
      $tabTextSpan.text(text);
      var $tabTextSpanPseudo = renderer_default("<span>").addClass(TABS_ITEM_TEXT_SPAN_PSEUDO_CLASS);
      $tabTextSpanPseudo.text(text);
      $tabTextSpanPseudo.appendTo($tabTextSpan);
      $tabTextSpan.appendTo($container);
    }
    if (isDefined(data17.html)) {
      $container.html(data17.html);
    }
  },
  _initTemplates() {
    this.callBase();
    this._templateManager.addDefaultTemplates({
      item: new BindableTemplate(($container, data17) => {
        this._prepareDefaultItemTemplate(data17, $container);
        var $iconElement = getImageContainer(data17.icon);
        $iconElement && $iconElement.prependTo($container);
        var $tabItem = renderer_default("<div>").addClass(TABS_ITEM_TEXT_CLASS);
        $container.wrapInner($tabItem);
      }, ["text", "html", "icon"], this.option("integrationOptions.watchMethod"))
    });
  },
  _createItemByTemplate: function(itemTemplate, renderArgs) {
    var {
      itemData,
      container,
      index
    } = renderArgs;
    this._deferredTemplates[index] = Deferred();
    return itemTemplate.render({
      model: itemData,
      container,
      index,
      onRendered: () => this._deferredTemplates[index].resolve()
    });
  },
  _itemClass: () => TABS_ITEM_CLASS,
  _selectedItemClass: () => TABS_ITEM_SELECTED_CLASS,
  _itemDataKey: () => TABS_ITEM_DATA_KEY,
  _initMarkup() {
    this._deferredTemplates = [];
    this.callBase();
    this.option("useInkRipple") && this._renderInkRipple();
    this.$element().addClass(OVERFLOW_HIDDEN_CLASS);
  },
  _render() {
    this.callBase();
    this._deferRenderScrolling();
  },
  _deferRenderScrolling() {
    when.apply(this, this._deferredTemplates).done(() => this._renderScrolling());
  },
  _renderScrolling() {
    var removeClasses = [TABS_STRETCHED_CLASS, TABS_EXPANDED_CLASS, OVERFLOW_HIDDEN_CLASS];
    this.$element().removeClass(removeClasses.join(" "));
    if (this.option("scrollingEnabled") && this._isItemsSizeExceeded()) {
      if (!this._scrollable) {
        this._renderScrollable();
        this._renderNavButtons();
      }
      var scrollable = this.getScrollable();
      scrollable.update();
      if (this.option("rtlEnabled")) {
        var maxLeftOffset = getScrollLeftMax(renderer_default(this.getScrollable().container()).get(0));
        scrollable.scrollTo({
          left: maxLeftOffset
        });
      }
      this._updateNavButtonsState();
      this._scrollToItem(this.option("selectedItem"));
    }
    if (!(this.option("scrollingEnabled") && this._isItemsSizeExceeded())) {
      this._cleanScrolling();
      if (this._needStretchItems()) {
        this.$element().addClass(TABS_STRETCHED_CLASS);
      }
      this.$element().removeClass(TABS_NAV_BUTTONS_CLASS).addClass(TABS_EXPANDED_CLASS);
    }
  },
  _isVertical() {
    return this.option("orientation") === ORIENTATION.vertical;
  },
  _isItemsSizeExceeded() {
    var isVertical = this._isVertical();
    var isItemsSizeExceeded = isVertical ? this._isItemsHeightExceeded() : this._isItemsWidthExceeded();
    return isItemsSizeExceeded;
  },
  _isItemsWidthExceeded() {
    var $visibleItems = this._getVisibleItems();
    var tabItemTotalWidth = this._getSummaryItemsSize("width", $visibleItems, true);
    var elementWidth = getWidth(this.$element());
    if ([tabItemTotalWidth, elementWidth].includes(0)) {
      return false;
    }
    var isItemsWidthExceeded = tabItemTotalWidth > elementWidth - 1;
    return isItemsWidthExceeded;
  },
  _isItemsHeightExceeded() {
    var $visibleItems = this._getVisibleItems();
    var itemsHeight = this._getSummaryItemsSize("height", $visibleItems, true);
    var elementHeight = getHeight(this.$element());
    var isItemsHeightExceeded = itemsHeight - 1 > elementHeight;
    return isItemsHeightExceeded;
  },
  _needStretchItems() {
    var $visibleItems = this._getVisibleItems();
    var elementWidth = getWidth(this.$element());
    var itemsWidth = [];
    each($visibleItems, (_, item) => {
      itemsWidth.push(getOuterWidth(item, true));
    });
    var maxTabItemWidth = Math.max.apply(null, itemsWidth);
    var requireWidth = elementWidth / $visibleItems.length;
    var needStretchItems = maxTabItemWidth > requireWidth + 1;
    return needStretchItems;
  },
  _cleanNavButtons() {
    if (!this._leftButton || !this._rightButton) {
      return;
    }
    this._leftButton.$element().remove();
    this._rightButton.$element().remove();
    this._leftButton = null;
    this._rightButton = null;
  },
  _cleanScrolling() {
    if (!this._scrollable) {
      return;
    }
    this._$wrapper.appendTo(this.$element());
    this._scrollable.$element().remove();
    this._scrollable = null;
    this._cleanNavButtons();
  },
  _renderInkRipple() {
    this._inkRipple = render();
  },
  _getPointerEvent: () => pointer_default.up,
  _toggleActiveState($element, value2, e) {
    this.callBase.apply(this, arguments);
    if (!this._inkRipple) {
      return;
    }
    var config2 = {
      element: $element,
      event: e
    };
    if (value2) {
      this._inkRipple.showWave(config2);
    } else {
      this._inkRipple.hideWave(config2);
    }
  },
  _renderMultiple() {
    if ("multiple" === this.option("selectionMode")) {
      this.option("selectOnFocus", false);
    }
  },
  _renderWrapper() {
    this._$wrapper = renderer_default("<div>").addClass(TABS_WRAPPER_CLASS);
    this.setAria("role", "tablist", this._$wrapper);
    this.$element().append(this._$wrapper);
  },
  _itemContainer() {
    return this._$wrapper;
  },
  _getScrollableDirection() {
    var isVertical = this._isVertical();
    var scrollableDirection = isVertical ? SCROLLABLE_DIRECTION.vertical : SCROLLABLE_DIRECTION.horizontal;
    return scrollableDirection;
  },
  _updateScrollable() {
    if (this.getScrollable()) {
      this._cleanScrolling();
    }
    this._renderScrolling();
  },
  _renderScrollable() {
    var $itemContainer = this.$element().wrapInner(renderer_default("<div>").addClass(TABS_SCROLLABLE_CLASS)).children();
    this._scrollable = this._createComponent($itemContainer, ui_scrollable_default, {
      direction: this._getScrollableDirection(),
      showScrollbar: "never",
      useKeyboard: false,
      useNative: false,
      scrollByContent: this.option("scrollByContent"),
      onScroll: () => {
        this._updateNavButtonsState();
      }
    });
    this.$element().append(this._scrollable.$element());
  },
  _scrollToItem(itemData) {
    if (!this._scrollable) {
      return;
    }
    var $item = this._editStrategy.getItemElement(itemData);
    this._scrollable.scrollToElement($item);
  },
  _renderNavButtons() {
    this.$element().toggleClass(TABS_NAV_BUTTONS_CLASS, this.option("showNavButtons"));
    if (!this.option("showNavButtons")) {
      return;
    }
    var rtlEnabled = this.option("rtlEnabled");
    this._leftButton = this._createNavButton(-TAB_OFFSET, rtlEnabled ? BUTTON_NEXT_ICON : BUTTON_PREV_ICON);
    var $leftButton = this._leftButton.$element();
    $leftButton.addClass(TABS_LEFT_NAV_BUTTON_CLASS);
    this.$element().prepend($leftButton);
    this._rightButton = this._createNavButton(TAB_OFFSET, rtlEnabled ? BUTTON_PREV_ICON : BUTTON_NEXT_ICON);
    var $rightButton = this._rightButton.$element();
    $rightButton.addClass(TABS_RIGHT_NAV_BUTTON_CLASS);
    this.$element().append($rightButton);
  },
  _updateNavButtonsState() {
    var _a, _b, _c, _d;
    var isVertical = this._isVertical();
    var scrollable = this.getScrollable();
    if (isVertical) {
      null === (_a = this._leftButton) || void 0 === _a ? void 0 : _a.option("disabled", isReachedTop(scrollable.scrollTop(), 1));
      null === (_b = this._rightButton) || void 0 === _b ? void 0 : _b.option("disabled", isReachedBottom(renderer_default(scrollable.container()).get(0), scrollable.scrollTop(), 0, 1));
    } else {
      null === (_c = this._leftButton) || void 0 === _c ? void 0 : _c.option("disabled", isReachedLeft(scrollable.scrollLeft(), 1));
      null === (_d = this._rightButton) || void 0 === _d ? void 0 : _d.option("disabled", isReachedRight(renderer_default(scrollable.container()).get(0), scrollable.scrollLeft(), 1));
    }
  },
  _updateScrollPosition(offset, duration) {
    this._scrollable.update();
    this._scrollable.scrollBy(offset / duration);
  },
  _createNavButton(offset, icon) {
    var holdAction = this._createAction(() => {
      this._holdInterval = setInterval(() => {
        this._updateScrollPosition(offset, FEEDBACK_DURATION_INTERVAL);
      }, FEEDBACK_DURATION_INTERVAL);
    });
    var holdEventName = addNamespace(hold_default.name, "dxNavButton");
    var pointerUpEventName = addNamespace(pointer_default.up, "dxNavButton");
    var pointerOutEventName = addNamespace(pointer_default.out, "dxNavButton");
    var navButton = this._createComponent(renderer_default("<div>").addClass(TABS_NAV_BUTTON_CLASS), button_default, {
      focusStateEnabled: false,
      icon,
      integrationOptions: {},
      onClick: () => {
        this._updateScrollPosition(offset, 1);
      }
    });
    var $navButton = navButton.$element();
    events_engine_default.on($navButton, holdEventName, {
      timeout: FEEDBACK_SCROLL_TIMEOUT
    }, (e) => {
      holdAction({
        event: e
      });
    });
    events_engine_default.on($navButton, pointerUpEventName, () => {
      this._clearInterval();
    });
    events_engine_default.on($navButton, pointerOutEventName, () => {
      this._clearInterval();
    });
    return navButton;
  },
  _clearInterval() {
    if (this._holdInterval) {
      clearInterval(this._holdInterval);
    }
  },
  _updateSelection(addedSelection) {
    this._scrollable && this._scrollable.scrollToElement(this.itemElements().eq(addedSelection[0]));
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._dimensionChanged();
    }
  },
  _dimensionChanged() {
    this._renderScrolling();
  },
  _itemSelectHandler(e) {
    if ("single" === this.option("selectionMode") && this.isItemSelected(e.currentTarget)) {
      return;
    }
    this.callBase(e);
  },
  _refreshActiveDescendant() {
    this.callBase(this._$wrapper);
  },
  _clean() {
    this._deferredTemplates = [];
    this._cleanScrolling();
    this.callBase();
  },
  _toggleTabsVerticalClass(value2) {
    this.$element().toggleClass(TABS_ORIENTATION_CLASS.vertical, value2);
  },
  _toggleTabsHorizontalClass(value2) {
    this.$element().toggleClass(TABS_ORIENTATION_CLASS.horizontal, value2);
  },
  _getIndicatorPositionClass: (indicatorPosition) => INDICATOR_POSITION_CLASS[indicatorPosition],
  _getIndicatorPosition() {
    var {
      _indicatorPosition,
      rtlEnabled
    } = this.option();
    if (_indicatorPosition) {
      return _indicatorPosition;
    }
    var isVertical = this._isVertical();
    if (rtlEnabled) {
      return isVertical ? INDICATOR_POSITION.left : INDICATOR_POSITION.bottom;
    }
    return isVertical ? INDICATOR_POSITION.right : INDICATOR_POSITION.bottom;
  },
  _toggleIndicatorPositionClass(indicatorPosition) {
    var newClass = this._getIndicatorPositionClass(indicatorPosition);
    this._toggleElementClasses(INDICATOR_POSITION_CLASS, newClass);
  },
  _toggleScrollingEnabledClass(scrollingEnabled) {
    this.$element().toggleClass(TABS_SCROLLING_ENABLED_CLASS, Boolean(scrollingEnabled));
  },
  _toggleOrientationClass(orientation) {
    var isVertical = orientation === ORIENTATION.vertical;
    this._toggleTabsVerticalClass(isVertical);
    this._toggleTabsHorizontalClass(!isVertical);
  },
  _getTabsIconPositionClass() {
    var position2 = this.option("iconPosition");
    switch (position2) {
      case ICON_POSITION.top:
        return TABS_ICON_POSITION_CLASS.top;
      case ICON_POSITION.end:
        return TABS_ICON_POSITION_CLASS.end;
      case ICON_POSITION.bottom:
        return TABS_ICON_POSITION_CLASS.bottom;
      case ICON_POSITION.start:
      default:
        return TABS_ICON_POSITION_CLASS.start;
    }
  },
  _toggleIconPositionClass() {
    var newClass = this._getTabsIconPositionClass();
    this._toggleElementClasses(TABS_ICON_POSITION_CLASS, newClass);
  },
  _toggleStylingModeClass(value2) {
    var _a;
    var newClass = null !== (_a = TABS_STYLING_MODE_CLASS[value2]) && void 0 !== _a ? _a : TABS_STYLING_MODE_CLASS.primary;
    this._toggleElementClasses(TABS_STYLING_MODE_CLASS, newClass);
  },
  _toggleElementClasses(classMap, newClass) {
    for (var key in classMap) {
      this.$element().removeClass(classMap[key]);
    }
    this.$element().addClass(newClass);
  },
  _toggleFocusedDisabledNextClass(currentIndex, isNextDisabled) {
    this._itemElements().eq(currentIndex).toggleClass(FOCUSED_DISABLED_NEXT_TAB_CLASS, isNextDisabled);
  },
  _toggleFocusedDisabledPrevClass(currentIndex, isPrevDisabled) {
    this._itemElements().eq(currentIndex).toggleClass(FOCUSED_DISABLED_PREV_TAB_CLASS, isPrevDisabled);
  },
  _toggleFocusedDisabledClasses(value2) {
    var {
      selectedIndex: currentIndex
    } = this.option();
    this._itemElements().removeClass(FOCUSED_DISABLED_NEXT_TAB_CLASS).removeClass(FOCUSED_DISABLED_PREV_TAB_CLASS);
    var prevItemIndex = currentIndex - 1;
    var nextItemIndex = currentIndex + 1;
    var nextFocusedIndex = renderer_default(value2).index();
    var isNextDisabled = this._itemElements().eq(nextItemIndex).hasClass(STATE_DISABLED_CLASS);
    var isPrevDisabled = this._itemElements().eq(prevItemIndex).hasClass(STATE_DISABLED_CLASS);
    var shouldNextClassBeSetted = isNextDisabled && nextFocusedIndex === nextItemIndex;
    var shouldPrevClassBeSetted = isPrevDisabled && nextFocusedIndex === prevItemIndex;
    this._toggleFocusedDisabledNextClass(currentIndex, shouldNextClassBeSetted);
    this._toggleFocusedDisabledPrevClass(currentIndex, shouldPrevClassBeSetted);
  },
  _updateFocusedElement() {
    var {
      focusStateEnabled,
      selectedIndex
    } = this.option();
    var itemElements = this._itemElements();
    if (focusStateEnabled && itemElements.length) {
      var selectedItem = itemElements.get(selectedIndex);
      this.option({
        focusedElement: selectedItem
      });
    }
  },
  _optionChanged(args) {
    switch (args.name) {
      case "useInkRipple":
      case "scrollingEnabled":
        this._toggleScrollingEnabledClass(args.value);
        this._invalidate();
        break;
      case "showNavButtons":
        this._invalidate();
        break;
      case "scrollByContent":
        this._scrollable && this._scrollable.option(args.name, args.value);
        break;
      case "width":
      case "height":
        this.callBase(args);
        this._dimensionChanged();
        break;
      case "selectionMode":
        this._renderMultiple();
        this.callBase(args);
        break;
      case "badgeExpr":
        this._invalidate();
        break;
      case "focusedElement":
        this._toggleFocusedDisabledClasses(args.value);
        this.callBase(args);
        this._scrollToItem(args.value);
        break;
      case "rtlEnabled":
        this.callBase(args);
        var indicatorPosition = this._getIndicatorPosition();
        this._toggleIndicatorPositionClass(indicatorPosition);
        break;
      case "orientation":
        this._toggleOrientationClass(args.value);
        var _indicatorPosition2 = this._getIndicatorPosition();
        this._toggleIndicatorPositionClass(_indicatorPosition2);
        if (hasWindow()) {
          this._updateScrollable();
        }
        break;
      case "iconPosition":
        this._toggleIconPositionClass();
        if (hasWindow()) {
          this._dimensionChanged();
        }
        break;
      case "stylingMode":
        this._toggleStylingModeClass(args.value);
        if (hasWindow()) {
          this._dimensionChanged();
        }
        break;
      case "_indicatorPosition":
        this._toggleIndicatorPositionClass(args.value);
        break;
      case "selectedIndex":
      case "selectedItem":
      case "selectedItems":
        this.callBase(args);
        this._updateFocusedElement();
        break;
      default:
        this.callBase(args);
    }
  },
  _afterItemElementInserted() {
    this.callBase();
    this._deferRenderScrolling();
  },
  _afterItemElementDeleted($item, deletedActionArgs) {
    this.callBase($item, deletedActionArgs);
    this._renderScrolling();
  },
  getScrollable() {
    return this._scrollable;
  }
});
Tabs.ItemClass = m_item_default3;
component_registrator_default("dxTabs", Tabs);
var m_tabs_default = Tabs;

// node_modules/devextreme/esm/ui/tabs.js
var tabs_default = m_tabs_default;

// node_modules/devextreme/esm/__internal/ui/tab_panel/m_item.js
var TabPanelItem = class extends m_item_default {
  _renderWatchers() {
    this._startWatcher("badge", noop);
    return super._renderWatchers();
  }
};

// node_modules/devextreme/esm/__internal/ui/tab_panel/m_tab_panel.js
var TABPANEL_CLASS = "dx-tabpanel";
var TABPANEL_TABS_CLASS = "dx-tabpanel-tabs";
var TABPANEL_TABS_ITEM_CLASS = "dx-tabpanel-tab";
var TABPANEL_CONTAINER_CLASS = "dx-tabpanel-container";
var TABS_ITEM_TEXT_CLASS2 = "dx-tab-text";
var DISABLED_FOCUSED_TAB_CLASS = "dx-disabled-focused-tab";
var TABS_ITEM_TEXT_SPAN_CLASS2 = "dx-tab-text-span";
var TABS_ITEM_TEXT_SPAN_PSEUDO_CLASS2 = "dx-tab-text-span-pseudo";
var TABPANEL_TABS_POSITION_CLASS = {
  top: "dx-tabpanel-tabs-position-top",
  right: "dx-tabpanel-tabs-position-right",
  bottom: "dx-tabpanel-tabs-position-bottom",
  left: "dx-tabpanel-tabs-position-left"
};
var TABS_POSITION = {
  top: "top",
  right: "right",
  bottom: "bottom",
  left: "left"
};
var TABS_INDICATOR_POSITION_BY_TABS_POSITION = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
};
var TABS_ORIENTATION = {
  horizontal: "horizontal",
  vertical: "vertical"
};
var ICON_POSITION2 = {
  top: "top",
  end: "end",
  bottom: "bottom",
  start: "start"
};
var STYLING_MODE2 = {
  primary: "primary",
  secondary: "secondary"
};
var TabPanel = multi_view_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      itemTitleTemplate: "title",
      hoverStateEnabled: true,
      showNavButtons: false,
      scrollByContent: true,
      scrollingEnabled: true,
      tabsPosition: TABS_POSITION.top,
      iconPosition: ICON_POSITION2.start,
      stylingMode: STYLING_MODE2.primary,
      onTitleClick: null,
      onTitleHold: null,
      onTitleRendered: null,
      badgeExpr: (data17) => data17 ? data17.badge : void 0,
      _tabsIndicatorPosition: null
    });
  },
  _defaultOptionsRules() {
    var themeName = current();
    return this.callBase().concat([{
      device: () => "desktop" === devices_default.real().deviceType && !devices_default.isSimulator(),
      options: {
        focusStateEnabled: true
      }
    }, {
      device: () => !touch,
      options: {
        swipeEnabled: false
      }
    }, {
      device: {
        platform: "generic"
      },
      options: {
        animationEnabled: false
      }
    }, {
      device: () => isFluent(themeName),
      options: {
        stylingMode: STYLING_MODE2.secondary
      }
    }, {
      device: () => isMaterialBased(themeName),
      options: {
        iconPosition: ICON_POSITION2.top
      }
    }]);
  },
  _init() {
    this.callBase();
    this.$element().addClass(TABPANEL_CLASS);
    this._toggleTabPanelTabsPositionClass();
  },
  _getElementAria: () => ({
    role: "tabpanel"
  }),
  _getItemAria: () => ({
    role: "tabpanel"
  }),
  _initMarkup() {
    this.callBase();
    this._createTitleActions();
    this._renderLayout();
  },
  _prepareTabsItemTemplate(data17, $container) {
    var $iconElement = getImageContainer(null === data17 || void 0 === data17 ? void 0 : data17.icon);
    if ($iconElement) {
      $container.append($iconElement);
    }
    var title = isPlainObject(data17) ? null === data17 || void 0 === data17 ? void 0 : data17.title : data17;
    if (isDefined(title) && !isPlainObject(title)) {
      var $tabTextSpan = renderer_default("<span>").addClass(TABS_ITEM_TEXT_SPAN_CLASS2);
      $tabTextSpan.append(dom_adapter_default.createTextNode(title));
      var $tabTextSpanPseudo = renderer_default("<span>").addClass(TABS_ITEM_TEXT_SPAN_PSEUDO_CLASS2);
      $tabTextSpanPseudo.append(dom_adapter_default.createTextNode(title));
      $tabTextSpanPseudo.appendTo($tabTextSpan);
      $tabTextSpan.appendTo($container);
    }
  },
  _initTemplates() {
    this.callBase();
    this._templateManager.addDefaultTemplates({
      title: new BindableTemplate(($container, data17) => {
        this._prepareTabsItemTemplate(data17, $container);
        var $tabItem = renderer_default("<div>").addClass(TABS_ITEM_TEXT_CLASS2);
        $container.wrapInner($tabItem);
      }, ["title", "icon"], this.option("integrationOptions.watchMethod"))
    });
  },
  _createTitleActions() {
    this._createTitleClickAction();
    this._createTitleHoldAction();
    this._createTitleRenderedAction();
  },
  _createTitleClickAction() {
    this._titleClickAction = this._createActionByOption("onTitleClick");
  },
  _createTitleHoldAction() {
    this._titleHoldAction = this._createActionByOption("onTitleHold");
  },
  _createTitleRenderedAction() {
    this._titleRenderedAction = this._createActionByOption("onTitleRendered");
  },
  _renderLayout() {
    if (this._tabs) {
      return;
    }
    var $element = this.$element();
    this._$tabContainer = renderer_default("<div>").addClass(TABPANEL_TABS_CLASS).appendTo($element);
    var $tabs = renderer_default("<div>").appendTo(this._$tabContainer);
    this._tabs = this._createComponent($tabs, tabs_default, this._tabConfig());
    this._$container = renderer_default("<div>").addClass(TABPANEL_CONTAINER_CLASS).appendTo($element);
    this._$container.append(this._$wrapper);
  },
  _refreshActiveDescendant() {
    if (!this._tabs) {
      return;
    }
    var tabs = this._tabs;
    var tabItems = tabs.itemElements();
    var $activeTab = renderer_default(tabItems[tabs.option("selectedIndex")]);
    var id = this.getFocusedItemId();
    this.setAria("controls", void 0, renderer_default(tabItems));
    this.setAria("controls", id, $activeTab);
  },
  _getTabsIndicatorPosition() {
    var {
      _tabsIndicatorPosition,
      tabsPosition
    } = this.option();
    return null !== _tabsIndicatorPosition && void 0 !== _tabsIndicatorPosition ? _tabsIndicatorPosition : TABS_INDICATOR_POSITION_BY_TABS_POSITION[tabsPosition];
  },
  _tabConfig() {
    var tabsIndicatorPosition = this._getTabsIndicatorPosition();
    return {
      selectOnFocus: true,
      focusStateEnabled: this.option("focusStateEnabled"),
      hoverStateEnabled: this.option("hoverStateEnabled"),
      repaintChangesOnly: this.option("repaintChangesOnly"),
      tabIndex: this.option("tabIndex"),
      selectedIndex: this.option("selectedIndex"),
      badgeExpr: this.option("badgeExpr"),
      onItemClick: this._titleClickAction.bind(this),
      onItemHold: this._titleHoldAction.bind(this),
      itemHoldTimeout: this.option("itemHoldTimeout"),
      onSelectionChanged: (function(e) {
        this.option("selectedIndex", e.component.option("selectedIndex"));
        this._refreshActiveDescendant();
      }).bind(this),
      onItemRendered: this._titleRenderedAction.bind(this),
      itemTemplate: this._getTemplateByOption("itemTitleTemplate"),
      items: this.option("items"),
      noDataText: null,
      scrollingEnabled: this.option("scrollingEnabled"),
      scrollByContent: this.option("scrollByContent"),
      showNavButtons: this.option("showNavButtons"),
      itemTemplateProperty: "tabTemplate",
      loopItemFocus: this.option("loop"),
      selectionRequired: true,
      onOptionChanged: (function(args) {
        if ("focusedElement" === args.name) {
          if (args.value) {
            var $value = renderer_default(args.value);
            var $newItem = this._itemElements().eq($value.index());
            this.option("focusedElement", getPublicElement($newItem));
          } else {
            this.option("focusedElement", args.value);
          }
        }
      }).bind(this),
      onFocusIn: (function(args) {
        this._focusInHandler(args.event);
      }).bind(this),
      onFocusOut: (function(args) {
        if (!this._isFocusOutHandlerExecuting) {
          this._focusOutHandler(args.event);
        }
      }).bind(this),
      orientation: this._getTabsOrientation(),
      iconPosition: this.option("iconPosition"),
      stylingMode: this.option("stylingMode"),
      _itemAttributes: {
        class: TABPANEL_TABS_ITEM_CLASS
      },
      _indicatorPosition: tabsIndicatorPosition
    };
  },
  _renderFocusTarget() {
    this._focusTarget().attr("tabIndex", -1);
  },
  _getTabsOrientation() {
    var {
      tabsPosition
    } = this.option();
    if ([TABS_POSITION.right, TABS_POSITION.left].includes(tabsPosition)) {
      return TABS_ORIENTATION.vertical;
    }
    return TABS_ORIENTATION.horizontal;
  },
  _getTabPanelTabsPositionClass() {
    var position2 = this.option("tabsPosition");
    switch (position2) {
      case TABS_POSITION.right:
        return TABPANEL_TABS_POSITION_CLASS.right;
      case TABS_POSITION.bottom:
        return TABPANEL_TABS_POSITION_CLASS.bottom;
      case TABS_POSITION.left:
        return TABPANEL_TABS_POSITION_CLASS.left;
      case TABS_POSITION.top:
      default:
        return TABPANEL_TABS_POSITION_CLASS.top;
    }
  },
  _toggleTabPanelTabsPositionClass() {
    for (var key in TABPANEL_TABS_POSITION_CLASS) {
      this.$element().removeClass(TABPANEL_TABS_POSITION_CLASS[key]);
    }
    var newClass = this._getTabPanelTabsPositionClass();
    this.$element().addClass(newClass);
  },
  _updateTabsOrientation() {
    var orientation = this._getTabsOrientation();
    this._setTabsOption("orientation", orientation);
  },
  _toggleWrapperFocusedClass(isFocused) {
    this._toggleFocusClass(isFocused, this._$wrapper);
  },
  _toggleDisabledFocusedClass(isFocused) {
    this._focusTarget().toggleClass(DISABLED_FOCUSED_TAB_CLASS, isFocused);
  },
  _updateFocusState(e, isFocused) {
    this.callBase(e, isFocused);
    var isTabsTarget = e.target === this._tabs._focusTarget().get(0);
    var isMultiViewTarget = e.target === this._focusTarget().get(0);
    if (isTabsTarget) {
      this._toggleFocusClass(isFocused, this._focusTarget());
    }
    if (isTabsTarget || isMultiViewTarget) {
      var isDisabled = this._isDisabled(this.option("focusedElement"));
      this._toggleWrapperFocusedClass(isFocused && !isDisabled);
      this._toggleDisabledFocusedClass(isFocused && isDisabled);
    }
    if (isMultiViewTarget) {
      this._toggleFocusClass(isFocused, this._tabs.option("focusedElement"));
    }
  },
  _focusOutHandler(e) {
    this._isFocusOutHandlerExecuting = true;
    this.callBase.apply(this, arguments);
    this._tabs._focusOutHandler(e);
    this._isFocusOutHandlerExecuting = false;
  },
  _setTabsOption(name2, value2) {
    if (this._tabs) {
      this._tabs.option(name2, value2);
    }
  },
  _visibilityChanged(visible) {
    if (visible) {
      this._tabs._dimensionChanged();
    }
  },
  registerKeyHandler(key, handler) {
    this.callBase(key, handler);
    if (this._tabs) {
      this._tabs.registerKeyHandler(key, handler);
    }
  },
  repaint() {
    this.callBase();
    this._tabs.repaint();
  },
  _updateTabsIndicatorPosition() {
    var value2 = this._getTabsIndicatorPosition();
    this._setTabsOption("_indicatorPosition", value2);
  },
  _optionChanged(args) {
    var {
      name: name2,
      value: value2,
      fullName
    } = args;
    switch (name2) {
      case "dataSource":
        this.callBase(args);
        break;
      case "items":
        this._setTabsOption(name2, this.option(name2));
        if (!this.option("repaintChangesOnly")) {
          this._tabs.repaint();
        }
        this.callBase(args);
        break;
      case "width":
        this.callBase(args);
        this._tabs.repaint();
        break;
      case "selectedIndex":
      case "selectedItem":
        this._setTabsOption(fullName, value2);
        this.callBase(args);
        if (true === this.option("focusStateEnabled")) {
          var selectedIndex = this.option("selectedIndex");
          var selectedTabContent = this._itemElements().eq(selectedIndex);
          this.option("focusedElement", getPublicElement(selectedTabContent));
        }
        break;
      case "itemHoldTimeout":
      case "focusStateEnabled":
      case "hoverStateEnabled":
        this._setTabsOption(fullName, value2);
        this.callBase(args);
        break;
      case "scrollingEnabled":
      case "scrollByContent":
      case "showNavButtons":
        this._setTabsOption(fullName, value2);
        break;
      case "focusedElement":
        var id = value2 ? renderer_default(value2).index() : value2;
        var newItem = value2 ? this._tabs._itemElements().eq(id) : value2;
        this._setTabsOption("focusedElement", getPublicElement(newItem));
        if (value2) {
          var isDisabled = this._isDisabled(value2);
          this._toggleWrapperFocusedClass(!isDisabled);
          this._toggleDisabledFocusedClass(isDisabled);
        }
        this.callBase(args);
        break;
      case "itemTitleTemplate":
        this._setTabsOption("itemTemplate", this._getTemplateByOption("itemTitleTemplate"));
        break;
      case "onTitleClick":
        this._createTitleClickAction();
        this._setTabsOption("onItemClick", this._titleClickAction.bind(this));
        break;
      case "onTitleHold":
        this._createTitleHoldAction();
        this._setTabsOption("onItemHold", this._titleHoldAction.bind(this));
        break;
      case "onTitleRendered":
        this._createTitleRenderedAction();
        this._setTabsOption("onItemRendered", this._titleRenderedAction.bind(this));
        break;
      case "loop":
        this._setTabsOption("loopItemFocus", value2);
        break;
      case "badgeExpr":
        this._invalidate();
        break;
      case "tabsPosition":
        this._toggleTabPanelTabsPositionClass();
        this._updateTabsIndicatorPosition();
        this._updateTabsOrientation();
        break;
      case "iconPosition":
        this._setTabsOption("iconPosition", value2);
        break;
      case "stylingMode":
        this._setTabsOption("stylingMode", value2);
        break;
      case "_tabsIndicatorPosition":
        this._setTabsOption("_indicatorPosition", value2);
        break;
      default:
        this.callBase(args);
    }
  }
});
TabPanel.ItemClass = TabPanelItem;
component_registrator_default("dxTabPanel", TabPanel);
var m_tab_panel_default = TabPanel;

// node_modules/devextreme/esm/ui/tab_panel.js
var tab_panel_default = m_tab_panel_default;

// node_modules/devextreme/esm/__internal/ui/form/m_form.item_option_action.js
var ItemOptionAction = class {
  constructor(options2) {
    this._options = options2;
    this._itemsRunTimeInfo = this._options.itemsRunTimeInfo;
  }
  findInstance() {
    return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item);
  }
  findItemContainer() {
    return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item);
  }
  findPreparedItem() {
    return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item);
  }
  tryExecute() {
    class_default.abstract();
  }
};

// node_modules/devextreme/esm/__internal/ui/form/m_form.utils.js
var createItemPathByIndex = (index, isTabs) => "".concat(isTabs ? "tabs" : "items", "[").concat(index, "]");
var concatPaths = (path1, path2) => {
  if (isDefined(path1) && isDefined(path2)) {
    return "".concat(path1, ".").concat(path2);
  }
  return path1 || path2;
};
var getTextWithoutSpaces = (text) => text ? text.replace(/\s/g, "") : void 0;
var isEqualToDataFieldOrNameOrTitleOrCaption = (item, fieldName) => {
  if (item) {
    return item.dataField === fieldName || item.name === fieldName || getTextWithoutSpaces(item.title) === fieldName || "group" === item.itemType && getTextWithoutSpaces(item.caption) === fieldName;
  }
  return false;
};
var getFullOptionName = (path, optionName) => "".concat(path, ".").concat(optionName);
var getOptionNameFromFullName = (fullName) => {
  var parts = fullName.split(".");
  return parts[parts.length - 1].replace(/\[\d+]/, "");
};
var tryGetTabPath = (fullPath) => {
  var pathParts = fullPath.split(".");
  var resultPathParts = [...pathParts];
  for (var i = pathParts.length - 1; i >= 0; i--) {
    if (isFullPathContainsTabs(pathParts[i])) {
      return resultPathParts.join(".");
    }
    resultPathParts.splice(i, 1);
  }
  return "";
};
var isFullPathContainsTabs = (fullPath) => fullPath.indexOf("tabs") > -1;
var getItemPath = (items, item, isTabs) => {
  var index = items.indexOf(item);
  if (index > -1) {
    return createItemPathByIndex(index, isTabs);
  }
  for (var i = 0; i < items.length; i++) {
    var targetItem = items[i];
    var tabOrGroupItems = targetItem.tabs || targetItem.items;
    if (tabOrGroupItems) {
      var itemPath = getItemPath(tabOrGroupItems, item, targetItem.tabs);
      if (itemPath) {
        return concatPaths(createItemPathByIndex(i, isTabs), itemPath);
      }
    }
  }
};
function convertToLayoutManagerOptions(_ref) {
  var {
    form,
    $formElement,
    formOptions,
    items,
    validationGroup,
    extendedLayoutManagerOptions,
    onFieldDataChanged,
    onContentReady,
    onDisposing,
    onFieldItemRendered
  } = _ref;
  var baseOptions = {
    form,
    items,
    $formElement,
    validationGroup,
    onFieldDataChanged,
    onContentReady,
    onDisposing,
    onFieldItemRendered,
    validationBoundary: formOptions.scrollingEnabled ? $formElement : void 0,
    scrollingEnabled: formOptions.scrollingEnabled,
    showRequiredMark: formOptions.showRequiredMark,
    showOptionalMark: formOptions.showOptionalMark,
    requiredMark: formOptions.requiredMark,
    optionalMark: formOptions.optionalMark,
    requiredMessage: formOptions.requiredMessage,
    screenByWidth: formOptions.screenByWidth,
    layoutData: formOptions.formData,
    labelLocation: formOptions.labelLocation,
    customizeItem: formOptions.customizeItem,
    minColWidth: formOptions.minColWidth,
    showColonAfterLabel: formOptions.showColonAfterLabel,
    onEditorEnterKey: formOptions.onEditorEnterKey,
    labelMode: formOptions.labelMode
  };
  var result2 = extend(baseOptions, {
    isRoot: extendedLayoutManagerOptions.isRoot,
    colCount: extendedLayoutManagerOptions.colCount,
    alignItemLabels: extendedLayoutManagerOptions.alignItemLabels,
    cssItemClass: extendedLayoutManagerOptions.cssItemClass,
    colCountByScreen: extendedLayoutManagerOptions.colCountByScreen,
    onLayoutChanged: extendedLayoutManagerOptions.onLayoutChanged,
    width: extendedLayoutManagerOptions.width
  });
  return result2;
}

// node_modules/devextreme/esm/__internal/ui/form/m_form.item_options_actions.js
var WidgetOptionItemOptionAction = class extends ItemOptionAction {
  tryExecute() {
    var {
      value: value2
    } = this._options;
    var instance = this.findInstance();
    if (instance) {
      instance.option(value2);
      return true;
    }
    return false;
  }
};
var TabOptionItemOptionAction = class extends ItemOptionAction {
  tryExecute() {
    var tabPanel = this.findInstance();
    if (tabPanel) {
      var {
        optionName,
        item,
        value: value2
      } = this._options;
      var itemIndex = this._itemsRunTimeInfo.findItemIndexByItem(item);
      if (itemIndex >= 0) {
        tabPanel.option(getFullOptionName("items[".concat(itemIndex, "]"), optionName), value2);
        return true;
      }
    }
    return false;
  }
};
var SimpleItemTemplateChangedAction = class extends ItemOptionAction {
  tryExecute() {
    return false;
  }
};
var GroupItemTemplateChangedAction = class extends ItemOptionAction {
  tryExecute() {
    var preparedItem = this.findPreparedItem();
    if (null != preparedItem && preparedItem._prepareGroupItemTemplate && preparedItem._renderGroupContentTemplate) {
      preparedItem._prepareGroupItemTemplate(this._options.item.template);
      preparedItem._renderGroupContentTemplate();
      return true;
    }
    return false;
  }
};
var TabsOptionItemOptionAction = class extends ItemOptionAction {
  tryExecute() {
    var tabPanel = this.findInstance();
    if (tabPanel) {
      var {
        value: value2
      } = this._options;
      tabPanel.option("dataSource", value2);
      return true;
    }
    return false;
  }
};
var ValidationRulesItemOptionAction = class extends ItemOptionAction {
  tryExecute() {
    var {
      item
    } = this._options;
    var instance = this.findInstance();
    var validator = instance && data(instance.$element()[0], "dxValidator");
    if (validator && item) {
      var filterRequired = (item2) => "required" === item2.type;
      var oldContainsRequired = (validator.option("validationRules") || []).some(filterRequired);
      var newContainsRequired = (item.validationRules || []).some(filterRequired);
      if (!oldContainsRequired && !newContainsRequired || oldContainsRequired && newContainsRequired) {
        validator.option("validationRules", item.validationRules);
        return true;
      }
    }
    return false;
  }
};
var CssClassItemOptionAction = class extends ItemOptionAction {
  tryExecute() {
    var $itemContainer = this.findItemContainer();
    var {
      previousValue,
      value: value2
    } = this._options;
    if ($itemContainer) {
      $itemContainer.removeClass(previousValue).addClass(value2);
      return true;
    }
    return false;
  }
};
var tryCreateItemOptionAction = (optionName, itemActionOptions) => {
  var _a, _b, _c;
  switch (optionName) {
    case "editorOptions":
    case "buttonOptions":
      return new WidgetOptionItemOptionAction(itemActionOptions);
    case "validationRules":
      return new ValidationRulesItemOptionAction(itemActionOptions);
    case "cssClass":
      return new CssClassItemOptionAction(itemActionOptions);
    case "badge":
    case "disabled":
    case "icon":
    case "tabTemplate":
    case "title":
      return new TabOptionItemOptionAction(extend(itemActionOptions, {
        optionName
      }));
    case "tabs":
      return new TabsOptionItemOptionAction(itemActionOptions);
    case "template":
      var itemType = null !== (_b = null === (_a = null === itemActionOptions || void 0 === itemActionOptions ? void 0 : itemActionOptions.item) || void 0 === _a ? void 0 : _a.itemType) && void 0 !== _b ? _b : null === (_c = itemActionOptions.itemsRunTimeInfo.findPreparedItemByItem(null === itemActionOptions || void 0 === itemActionOptions ? void 0 : itemActionOptions.item)) || void 0 === _c ? void 0 : _c.itemType;
      if ("simple" === itemType) {
        return new SimpleItemTemplateChangedAction(itemActionOptions);
      }
      if ("group" === itemType) {
        return new GroupItemTemplateChangedAction(itemActionOptions);
      }
      return new TabOptionItemOptionAction(extend(itemActionOptions, {
        optionName
      }));
    default:
      return null;
  }
};
var m_form_item_options_actions_default = tryCreateItemOptionAction;

// node_modules/devextreme/esm/__internal/ui/form/m_form.js
var FOCUSED_STATE_CLASS2 = "dx-state-focused";
var ITEM_OPTIONS_FOR_VALIDATION_UPDATING = ["items", "isRequired", "validationRules", "visible"];
var Form = ui_widget_default.inherit({
  _init() {
    this.callBase();
    this._dirtyFields = /* @__PURE__ */ new Set();
    this._cachedColCountOptions = [];
    this._itemsRunTimeInfo = new FormItemsRunTimeInfo();
    this._groupsColCount = [];
    this._attachSyncSubscriptions();
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      formID: "dx-".concat(new guid_default()),
      formData: {},
      colCount: 1,
      screenByWidth: defaultScreenFactorFunc,
      colCountByScreen: void 0,
      labelLocation: "left",
      readOnly: false,
      onFieldDataChanged: null,
      customizeItem: null,
      onEditorEnterKey: null,
      minColWidth: 200,
      alignItemLabels: true,
      alignItemLabelsInAllGroups: true,
      alignRootItemLabels: true,
      showColonAfterLabel: true,
      showRequiredMark: true,
      showOptionalMark: false,
      requiredMark: "*",
      optionalMark: message_default.format("dxForm-optionalMark"),
      requiredMessage: message_default.getFormatter("dxForm-requiredMessage"),
      showValidationSummary: false,
      items: void 0,
      scrollingEnabled: false,
      validationGroup: void 0,
      stylingMode: config_default().editorStylingMode,
      labelMode: "outside",
      isDirty: false
    });
  },
  _defaultOptionsRules() {
    return this.callBase().concat([{
      device: () => isMaterialBased(),
      options: {
        labelLocation: "top"
      }
    }, {
      device: () => isMaterial(),
      options: {
        showColonAfterLabel: false
      }
    }]);
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      formData: true,
      validationGroup: true
    });
  },
  _getGroupColCount: ($element) => parseInt($element.attr(GROUP_COL_COUNT_ATTR)),
  _applyLabelsWidthByCol($container, index) {
    var options2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
    var labelMarkOptions = arguments.length > 3 ? arguments[3] : void 0;
    var fieldItemClass = options2.inOneColumn ? FIELD_ITEM_CLASS : FORM_FIELD_ITEM_COL_CLASS + index;
    var cssExcludeTabbedSelector = options2.excludeTabbed ? ":not(.".concat(FIELD_ITEM_TAB_CLASS, ")") : "";
    setLabelWidthByMaxLabelWidth($container, ".".concat(fieldItemClass).concat(cssExcludeTabbedSelector), labelMarkOptions);
  },
  _applyLabelsWidth($container, excludeTabbed, inOneColumn, colCount, labelMarkOptions) {
    colCount = inOneColumn ? 1 : colCount || this._getGroupColCount($container);
    var applyLabelsOptions = {
      excludeTabbed,
      inOneColumn
    };
    var i;
    for (i = 0; i < colCount; i++) {
      this._applyLabelsWidthByCol($container, i, applyLabelsOptions, labelMarkOptions);
    }
  },
  _getGroupElementsInColumn($container, columnIndex, colCount) {
    var cssColCountSelector = isDefined(colCount) ? ".".concat(GROUP_COL_COUNT_CLASS).concat(colCount) : "";
    var groupSelector = ".".concat(FORM_FIELD_ITEM_COL_CLASS).concat(columnIndex, " > .").concat(FIELD_ITEM_CONTENT_CLASS, " > .").concat(FORM_GROUP_CLASS).concat(cssColCountSelector);
    return $container.find(groupSelector);
  },
  _applyLabelsWidthWithGroups($container, colCount, excludeTabbed, labelMarkOptions) {
    if (true === this.option("alignRootItemLabels")) {
      var $rootSimpleItems = $container.find(".".concat(ROOT_SIMPLE_ITEM_CLASS));
      for (var colIndex = 0; colIndex < colCount; colIndex++) {
        this._applyLabelsWidthByCol($rootSimpleItems, colIndex, excludeTabbed, labelMarkOptions);
      }
    }
    var alignItemLabelsInAllGroups = this.option("alignItemLabelsInAllGroups");
    if (alignItemLabelsInAllGroups) {
      this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed, labelMarkOptions);
    } else {
      var $groups = this.$element().find(".".concat(FORM_GROUP_CLASS));
      var i;
      for (i = 0; i < $groups.length; i++) {
        this._applyLabelsWidth($groups.eq(i), excludeTabbed, void 0, void 0, labelMarkOptions);
      }
    }
  },
  _applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed, labelMarkOptions) {
    var applyLabelsOptions = {
      excludeTabbed
    };
    var colIndex;
    var groupsColIndex;
    var groupColIndex;
    var $groupsByCol;
    for (colIndex = 0; colIndex < colCount; colIndex++) {
      $groupsByCol = this._getGroupElementsInColumn($container, colIndex);
      this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions, labelMarkOptions);
      for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {
        $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);
        var groupColCount = this._getGroupColCount($groupsByCol);
        for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {
          this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions, labelMarkOptions);
        }
      }
    }
  },
  _labelLocation() {
    return this.option("labelLocation");
  },
  _alignLabelsInColumn(_ref) {
    var {
      layoutManager,
      inOneColumn,
      $container,
      excludeTabbed,
      items
    } = _ref;
    if (!hasWindow() || "top" === this._labelLocation()) {
      return;
    }
    var labelMarkOptions = convertToLabelMarkOptions(layoutManager._getMarkOptions());
    if (inOneColumn) {
      this._applyLabelsWidth($container, excludeTabbed, true, void 0, labelMarkOptions);
    } else if (this._checkGrouping(items)) {
      this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed, labelMarkOptions);
    } else {
      this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount(), labelMarkOptions);
    }
  },
  _prepareFormData() {
    if (!isDefined(this.option("formData"))) {
      this.option("formData", {});
    }
  },
  _setStylingModeClass() {
    if ("underlined" === this.option("stylingMode")) {
      this.$element().addClass(FORM_UNDERLINED_CLASS);
    }
  },
  _initMarkup() {
    validation_engine_default.addGroup(this._getValidationGroup(), false);
    this._clearCachedInstances();
    this._prepareFormData();
    this.$element().addClass(FORM_CLASS);
    this._setStylingModeClass();
    this.callBase();
    this.setAria("role", "form", this.$element());
    if (this.option("scrollingEnabled")) {
      this._renderScrollable();
    }
    this._renderLayout();
    this._renderValidationSummary();
    this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor();
    this._attachResizeObserverSubscription();
  },
  _attachResizeObserverSubscription() {
    if (hasWindow()) {
      var formRootElement = this.$element().get(0);
      resize_observer_default.unobserve(formRootElement);
      resize_observer_default.observe(formRootElement, () => {
        this._resizeHandler();
      });
    }
  },
  _resizeHandler() {
    if (this._cachedLayoutManagers.length) {
      each(this._cachedLayoutManagers, (_, layoutManager) => {
        var _a;
        null === (_a = layoutManager.option("onLayoutChanged")) || void 0 === _a ? void 0 : _a(layoutManager.isSingleColumnMode());
      });
    }
  },
  _getCurrentScreenFactor() {
    return hasWindow() ? getCurrentScreenFactor(this.option("screenByWidth")) : "lg";
  },
  _clearCachedInstances() {
    this._itemsRunTimeInfo.clear();
    this._cachedLayoutManagers = [];
  },
  _alignLabels(layoutManager, inOneColumn) {
    this._alignLabelsInColumn({
      $container: this.$element(),
      layoutManager,
      excludeTabbed: true,
      items: this.option("items"),
      inOneColumn
    });
    triggerResizeEvent(this.$element().find(".".concat(TOOLBAR_CLASS)));
  },
  _clean() {
    this._clearValidationSummary();
    this.callBase();
    this._groupsColCount = [];
    this._cachedColCountOptions = [];
    this._lastMarkupScreenFactor = void 0;
    resize_observer_default.unobserve(this.$element().get(0));
  },
  _renderScrollable() {
    var useNativeScrolling = this.option("useNativeScrolling");
    this._scrollable = new ui_scrollable_default(this.$element(), {
      useNative: !!useNativeScrolling,
      useSimulatedScrollbar: !useNativeScrolling,
      useKeyboard: false,
      direction: "both",
      bounceEnabled: false
    });
  },
  _getContent() {
    return this.option("scrollingEnabled") ? renderer_default(this._scrollable.content()) : this.$element();
  },
  _clearValidationSummary() {
    var _a;
    null === (_a = this._$validationSummary) || void 0 === _a ? void 0 : _a.remove();
    this._$validationSummary = void 0;
    this._validationSummary = void 0;
  },
  _renderValidationSummary() {
    this._clearValidationSummary();
    if (this.option("showValidationSummary")) {
      this._$validationSummary = renderer_default("<div>").addClass(FORM_VALIDATION_SUMMARY).appendTo(this._getContent());
      this._validationSummary = this._$validationSummary.dxValidationSummary({
        validationGroup: this._getValidationGroup()
      }).dxValidationSummary("instance");
    }
  },
  _prepareItems(items, parentIsTabbedItem, currentPath, isTabs) {
    if (items) {
      var result2 = [];
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        var path = concatPaths(currentPath, createItemPathByIndex(i, isTabs));
        var itemRunTimeInfo = {
          item,
          itemIndex: i,
          path
        };
        var guid = this._itemsRunTimeInfo.add(itemRunTimeInfo);
        if (isString(item)) {
          item = {
            dataField: item
          };
        }
        if (isObject(item)) {
          var preparedItem = _extends({}, item);
          itemRunTimeInfo.preparedItem = preparedItem;
          preparedItem.guid = guid;
          this._tryPrepareGroupItem(preparedItem);
          this._tryPrepareTabbedItem(preparedItem, path);
          this._tryPrepareItemTemplate(preparedItem);
          if (parentIsTabbedItem) {
            preparedItem.cssItemClass = FIELD_ITEM_TAB_CLASS;
          }
          if (preparedItem.items) {
            preparedItem.items = this._prepareItems(preparedItem.items, parentIsTabbedItem, path);
          }
          result2.push(preparedItem);
        } else {
          result2.push(item);
        }
      }
      return result2;
    }
  },
  _tryPrepareGroupItem(item) {
    if ("group" === item.itemType) {
      item.alignItemLabels = ensureDefined(item.alignItemLabels, true);
      item._prepareGroupItemTemplate = (itemTemplate) => {
        if (item.template) {
          item.groupContentTemplate = this._getTemplate(itemTemplate);
        }
        item.template = this._itemGroupTemplate.bind(this, item);
      };
      item._prepareGroupItemTemplate(item.template);
    }
  },
  _tryPrepareTabbedItem(item, path) {
    if ("tabbed" === item.itemType) {
      item.template = this._itemTabbedTemplate.bind(this, item);
      item.tabs = this._prepareItems(item.tabs, true, path, true);
    }
  },
  _tryPrepareItemTemplate(item) {
    if (item.template) {
      item.template = this._getTemplate(item.template);
    }
  },
  _checkGrouping(items) {
    if (items) {
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if ("group" === item.itemType) {
          return true;
        }
      }
    }
  },
  _renderLayout() {
    var that = this;
    var items = that.option("items");
    var $content = that._getContent();
    items = that._prepareItems(items);
    that._rootLayoutManager = that._renderLayoutManager($content, this._createLayoutManagerOptions(items, {
      isRoot: true,
      colCount: that.option("colCount"),
      alignItemLabels: that.option("alignItemLabels"),
      screenByWidth: this.option("screenByWidth"),
      colCountByScreen: this.option("colCountByScreen"),
      onLayoutChanged(inOneColumn) {
        that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn);
      },
      onContentReady(e) {
        that._alignLabels(e.component, e.component.isSingleColumnMode());
      }
    }));
  },
  _tryGetItemsForTemplate: (item) => item.items || [],
  _itemTabbedTemplate(item, e, $container) {
    var _a;
    var $tabPanel = renderer_default("<div>").appendTo($container);
    var tabPanelOptions = extend({}, item.tabPanelOptions, {
      dataSource: item.tabs,
      onItemRendered: (args) => {
        var _a2, _b;
        null === (_b = null === (_a2 = item.tabPanelOptions) || void 0 === _a2 ? void 0 : _a2.onItemRendered) || void 0 === _b ? void 0 : _b.call(_a2, args);
        triggerShownEvent(args.itemElement);
      },
      itemTemplate: (itemData, e2, container) => {
        var $container2 = renderer_default(container);
        var alignItemLabels = ensureDefined(itemData.alignItemLabels, true);
        var layoutManager = this._renderLayoutManager($container2, this._createLayoutManagerOptions(this._tryGetItemsForTemplate(itemData), {
          colCount: itemData.colCount,
          alignItemLabels,
          screenByWidth: this.option("screenByWidth"),
          colCountByScreen: itemData.colCountByScreen,
          cssItemClass: itemData.cssItemClass,
          onLayoutChanged: (inOneColumn) => {
            this._alignLabelsInColumn({
              $container: $container2,
              layoutManager,
              items: itemData.items,
              inOneColumn
            });
          }
        }));
        if (this._itemsRunTimeInfo) {
          this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {
            layoutManager
          });
        }
        if (alignItemLabels) {
          this._alignLabelsInColumn({
            $container: $container2,
            layoutManager,
            items: itemData.items,
            inOneColumn: layoutManager.isSingleColumnMode()
          });
        }
      }
    });
    var tryUpdateTabPanelInstance = (items, instance) => {
      if (Array.isArray(items)) {
        items.forEach((item2) => this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item2.guid, {
          widgetInstance: instance
        }));
      }
    };
    var tabPanel = this._createComponent($tabPanel, tab_panel_default, tabPanelOptions);
    renderer_default($container).parent().addClass(FIELD_ITEM_CONTENT_HAS_TABS_CLASS);
    tabPanel.on("optionChanged", (e2) => {
      if ("dataSource" === e2.fullName) {
        tryUpdateTabPanelInstance(e2.value, e2.component);
      }
    });
    tryUpdateTabPanelInstance([{
      guid: item.guid
    }, ...null !== (_a = item.tabs) && void 0 !== _a ? _a : []], tabPanel);
  },
  _itemGroupTemplate(item, options2, $container) {
    var {
      id
    } = options2.editorOptions.inputAttr;
    var $group = renderer_default("<div>").toggleClass(FORM_GROUP_WITH_CAPTION_CLASS, isDefined(item.caption) && item.caption.length).addClass(FORM_GROUP_CLASS).appendTo($container);
    var groupAria = {
      role: "group",
      labelledby: id
    };
    this.setAria(groupAria, $group);
    renderer_default($container).parent().addClass(FIELD_ITEM_CONTENT_HAS_GROUP_CLASS);
    if (item.caption) {
      renderer_default("<span>").addClass(FORM_GROUP_CAPTION_CLASS).text(item.caption).attr("id", id).appendTo($group);
    }
    var $groupContent = renderer_default("<div>").addClass(FORM_GROUP_CONTENT_CLASS).appendTo($group);
    if (item.groupContentTemplate) {
      item._renderGroupContentTemplate = () => {
        $groupContent.empty();
        var data17 = {
          formData: this.option("formData"),
          component: this
        };
        item.groupContentTemplate.render({
          model: data17,
          container: getPublicElement($groupContent)
        });
      };
      item._renderGroupContentTemplate();
    } else {
      var layoutManager = this._renderLayoutManager($groupContent, this._createLayoutManagerOptions(this._tryGetItemsForTemplate(item), {
        colCount: item.colCount,
        colCountByScreen: item.colCountByScreen,
        alignItemLabels: item.alignItemLabels,
        cssItemClass: item.cssItemClass
      }));
      this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {
        layoutManager
      });
      var colCount = layoutManager._getColCount();
      if (!this._groupsColCount.includes(colCount)) {
        this._groupsColCount.push(colCount);
      }
      $group.addClass(GROUP_COL_COUNT_CLASS + colCount);
      $group.attr(GROUP_COL_COUNT_ATTR, colCount);
    }
  },
  _createLayoutManagerOptions(items, extendedLayoutManagerOptions) {
    return convertToLayoutManagerOptions({
      form: this,
      formOptions: this.option(),
      $formElement: this.$element(),
      items,
      validationGroup: this._getValidationGroup(),
      extendedLayoutManagerOptions,
      onFieldDataChanged: (args) => {
        if (!this._isDataUpdating) {
          this._triggerOnFieldDataChanged(args);
        }
      },
      onContentReady: (args) => {
        this._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);
        extendedLayoutManagerOptions.onContentReady && extendedLayoutManagerOptions.onContentReady(args);
      },
      onDisposing: (_ref2) => {
        var {
          component
        } = _ref2;
        var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();
        this._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo);
      },
      onFieldItemRendered: () => {
        var _a;
        null === (_a = this._validationSummary) || void 0 === _a ? void 0 : _a.refreshValidationGroup();
      }
    });
  },
  _renderLayoutManager($parent, layoutManagerOptions) {
    var baseColCountByScreen = {
      lg: layoutManagerOptions.colCount,
      md: layoutManagerOptions.colCount,
      sm: layoutManagerOptions.colCount,
      xs: 1
    };
    this._cachedColCountOptions.push({
      colCountByScreen: extend(baseColCountByScreen, layoutManagerOptions.colCountByScreen)
    });
    var $element = renderer_default("<div>");
    $element.appendTo($parent);
    var instance = this._createComponent($element, "dxLayoutManager", layoutManagerOptions);
    instance.on("autoColCountChanged", () => {
      this._clearAutoColCountChangedTimeout();
      this.autoColCountChangedTimeoutId = setTimeout(() => !this._disposed && this._refresh(), 0);
    });
    this._cachedLayoutManagers.push(instance);
    return instance;
  },
  _getValidationGroup() {
    return this.option("validationGroup") || this;
  },
  _createComponent($element, type2, config2) {
    config2 = config2 || {};
    this._extendConfig(config2, {
      readOnly: this.option("readOnly")
    });
    return this.callBase($element, type2, config2);
  },
  _attachSyncSubscriptions() {
    var that = this;
    that.on("optionChanged", (args) => {
      var optionFullName = args.fullName;
      if ("formData" === optionFullName) {
        if (!isDefined(args.value)) {
          that._options.silent("formData", args.value = {});
        }
        that._triggerOnFieldDataChangedByDataSet(args.value);
      }
      if (that._cachedLayoutManagers.length) {
        each(that._cachedLayoutManagers, (index, layoutManager) => {
          if ("formData" === optionFullName) {
            that._isDataUpdating = true;
            layoutManager.option("layoutData", args.value);
            that._isDataUpdating = false;
          }
          if ("readOnly" === args.name || "disabled" === args.name) {
            layoutManager.option(optionFullName, args.value);
          }
        });
      }
    });
  },
  _optionChanged(args) {
    var splitFullName = args.fullName.split(".");
    if (splitFullName.length > 1 && -1 !== splitFullName[0].search("items") && this._itemsOptionChangedHandler(args)) {
      return;
    }
    if (splitFullName.length > 1 && -1 !== splitFullName[0].search("formData") && this._formDataOptionChangedHandler(args)) {
      return;
    }
    this._defaultOptionChangedHandler(args);
  },
  _defaultOptionChangedHandler(args) {
    switch (args.name) {
      case "formData":
        if (!this.option("items")) {
          this._invalidate();
        } else if (isEmptyObject(args.value)) {
          this._clear();
        }
        break;
      case "onFieldDataChanged":
        break;
      case "items":
      case "colCount":
      case "onEditorEnterKey":
      case "labelLocation":
      case "labelMode":
      case "alignItemLabels":
      case "showColonAfterLabel":
      case "customizeItem":
      case "alignItemLabelsInAllGroups":
      case "showRequiredMark":
      case "showOptionalMark":
      case "requiredMark":
      case "optionalMark":
      case "requiredMessage":
      case "scrollingEnabled":
      case "formID":
      case "colCountByScreen":
      case "screenByWidth":
      case "stylingMode":
        this._invalidate();
        break;
      case "showValidationSummary":
        this._renderValidationSummary();
        break;
      case "minColWidth":
        if ("auto" === this.option("colCount")) {
          this._invalidate();
        }
        break;
      case "alignRootItemLabels":
      case "readOnly":
      case "isDirty":
        break;
      case "width":
        this.callBase(args);
        this._rootLayoutManager.option(args.name, args.value);
        this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());
        break;
      case "validationGroup":
        validation_engine_default.removeGroup(args.previousValue || this);
        this._invalidate();
        break;
      default:
        this.callBase(args);
    }
  },
  _itemsOptionChangedHandler(args) {
    var nameParts = args.fullName.split(".");
    var {
      value: value2
    } = args;
    var itemPath = this._getItemPath(nameParts);
    var item = this.option(itemPath);
    var optionNameWithoutPath = args.fullName.replace("".concat(itemPath, "."), "");
    var simpleOptionName = optionNameWithoutPath.split(".")[0].replace(/\[\d+]/, "");
    var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);
    var result2 = this._tryExecuteItemOptionAction(itemAction) || this._tryChangeLayoutManagerItemOption(args.fullName, value2);
    if (!result2 && item) {
      this._changeItemOption(item, optionNameWithoutPath, value2);
      var items = this._generateItemsFromData(this.option("items"));
      this.option("items", items);
      result2 = true;
    }
    return result2;
  },
  _formDataOptionChangedHandler(args) {
    var nameParts = args.fullName.split(".");
    var {
      value: value2
    } = args;
    var dataField = nameParts.slice(1).join(".");
    var editor = this.getEditor(dataField);
    if (editor) {
      editor.option("value", value2);
    } else {
      this._triggerOnFieldDataChanged({
        dataField,
        value: value2
      });
    }
    return true;
  },
  _tryCreateItemOptionAction(optionName, item, value2, previousValue, itemPath) {
    if ("tabs" === optionName) {
      this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(itemPath, ".tabs"));
      value2 = this._prepareItems(value2, true, itemPath, true);
    }
    return m_form_item_options_actions_default(optionName, {
      item,
      value: value2,
      previousValue,
      itemsRunTimeInfo: this._itemsRunTimeInfo
    });
  },
  _tryExecuteItemOptionAction: (action) => action && action.tryExecute(),
  _updateValidationGroupAndSummaryIfNeeded(fullName) {
    var _a;
    var optionName = getOptionNameFromFullName(fullName);
    if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.includes(optionName)) {
      validation_engine_default.addGroup(this._getValidationGroup(), false);
      if (this.option("showValidationSummary")) {
        null === (_a = this._validationSummary) || void 0 === _a ? void 0 : _a.refreshValidationGroup();
      }
    }
  },
  _setLayoutManagerItemOption(layoutManager, optionName, value2, path) {
    if (this._updateLockCount > 0) {
      !layoutManager._updateLockCount && layoutManager.beginUpdate();
      var key = this._itemsRunTimeInfo.findKeyByPath(path);
      this.postponedOperations.add(key, () => {
        !layoutManager._disposed && layoutManager.endUpdate();
        return Deferred().resolve();
      });
    }
    var contentReadyHandler = (e) => {
      e.component.off("contentReady", contentReadyHandler);
      if (isFullPathContainsTabs(path)) {
        var tabPath = tryGetTabPath(path);
        var tabLayoutManager = this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(tabPath);
        if (tabLayoutManager) {
          this._alignLabelsInColumn({
            items: tabLayoutManager.option("items"),
            layoutManager: tabLayoutManager,
            $container: tabLayoutManager.$element(),
            inOneColumn: tabLayoutManager.isSingleColumnMode()
          });
        }
      } else {
        this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());
      }
    };
    layoutManager.on("contentReady", contentReadyHandler);
    layoutManager.option(optionName, value2);
    this._updateValidationGroupAndSummaryIfNeeded(optionName);
  },
  _tryChangeLayoutManagerItemOption(fullName, value2) {
    var nameParts = fullName.split(".");
    var optionName = getOptionNameFromFullName(fullName);
    if ("items" === optionName && nameParts.length > 1) {
      var itemPath = this._getItemPath(nameParts);
      var layoutManager = this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(itemPath);
      if (layoutManager) {
        this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());
        var items = this._prepareItems(value2, false, itemPath);
        this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);
        return true;
      }
    } else if (nameParts.length > 2) {
      var endPartIndex = nameParts.length - 2;
      var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));
      var _layoutManager = this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(_itemPath);
      if (_layoutManager) {
        var fullOptionName = getFullOptionName(nameParts[endPartIndex], optionName);
        if ("editorType" === optionName) {
          if (_layoutManager.option(fullOptionName) !== value2) {
            return false;
          }
        }
        if ("visible" === optionName) {
          var formItems = this.option(getFullOptionName(_itemPath, "items"));
          if (formItems && formItems.length) {
            var layoutManagerItems = _layoutManager.option("items");
            formItems.forEach((item, index) => {
              var layoutItem = layoutManagerItems[index];
              layoutItem.visibleIndex = item.visibleIndex;
            });
          }
        }
        this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value2, _itemPath);
        return true;
      }
    }
    return false;
  },
  _tryChangeLayoutManagerItemOptions(itemPath, options2) {
    var result2;
    this.beginUpdate();
    each(options2, (optionName, optionValue) => {
      result2 = this._tryChangeLayoutManagerItemOption(getFullOptionName(itemPath, optionName), optionValue);
      if (!result2) {
        return false;
      }
    });
    this.endUpdate();
    return result2;
  },
  _getItemPath(nameParts) {
    var itemPath = nameParts[0];
    var i;
    for (i = 1; i < nameParts.length; i++) {
      if (-1 !== nameParts[i].search(/items\[\d+]|tabs\[\d+]/)) {
        itemPath += ".".concat(nameParts[i]);
      } else {
        break;
      }
    }
    return itemPath;
  },
  _triggerOnFieldDataChanged(args) {
    this._updateIsDirty(args.dataField);
    this._createActionByOption("onFieldDataChanged")(args);
  },
  _triggerOnFieldDataChangedByDataSet(data17) {
    if (data17 && isObject(data17)) {
      Object.keys(data17).forEach((key) => {
        this._triggerOnFieldDataChanged({
          dataField: key,
          value: data17[key]
        });
      });
    }
  },
  _updateFieldValue(dataField, value2) {
    if (isDefined(this.option("formData"))) {
      var editor = this.getEditor(dataField);
      this.option("formData.".concat(dataField), value2);
      if (editor) {
        var editorValue = editor.option("value");
        if (editorValue !== value2) {
          editor.option("value", value2);
        }
      }
    }
  },
  _generateItemsFromData(items) {
    var formData = this.option("formData");
    var result2 = [];
    if (!items && isDefined(formData)) {
      each(formData, (dataField) => {
        result2.push({
          dataField
        });
      });
    }
    if (items) {
      each(items, (index, item) => {
        if (isObject(item)) {
          result2.push(item);
        } else {
          result2.push({
            dataField: item
          });
        }
      });
    }
    return result2;
  },
  _getItemByField(field, items) {
    var that = this;
    var fieldParts = isObject(field) ? field : that._getFieldParts(field);
    var {
      fieldName
    } = fieldParts;
    var {
      fieldPath
    } = fieldParts;
    var resultItem;
    if (items.length) {
      each(items, (index, item) => {
        var {
          itemType
        } = item;
        if (fieldPath.length) {
          var path = fieldPath.slice();
          item = that._getItemByFieldPath(path, fieldName, item);
        } else if ("group" === itemType && !(item.caption || item.name) || "tabbed" === itemType && !item.name) {
          var subItemsField = that._getSubItemField(itemType);
          item.items = that._generateItemsFromData(item.items);
          item = that._getItemByField({
            fieldName,
            fieldPath
          }, item[subItemsField]);
        }
        if (isEqualToDataFieldOrNameOrTitleOrCaption(item, fieldName)) {
          resultItem = item;
          return false;
        }
      });
    }
    return resultItem;
  },
  _getFieldParts(field) {
    var fieldName = field;
    var separatorIndex = fieldName.indexOf(".");
    var resultPath = [];
    while (-1 !== separatorIndex) {
      resultPath.push(fieldName.substr(0, separatorIndex));
      fieldName = fieldName.substr(separatorIndex + 1);
      separatorIndex = fieldName.indexOf(".");
    }
    return {
      fieldName,
      fieldPath: resultPath.reverse()
    };
  },
  _getItemByFieldPath(path, fieldName, item) {
    var {
      itemType
    } = item;
    var subItemsField = this._getSubItemField(itemType);
    var isItemWithSubItems = "group" === itemType || "tabbed" === itemType || item.title;
    var result2;
    do {
      if (isItemWithSubItems) {
        var name2 = item.name || item.caption || item.title;
        var isGroupWithName = isDefined(name2);
        var nameWithoutSpaces = getTextWithoutSpaces(name2);
        var pathNode = void 0;
        item[subItemsField] = this._generateItemsFromData(item[subItemsField]);
        if (isGroupWithName) {
          pathNode = path.pop();
        }
        if (!path.length) {
          result2 = this._getItemByField(fieldName, item[subItemsField]);
          if (result2) {
            break;
          }
        }
        if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {
          if (path.length) {
            result2 = this._searchItemInEverySubItem(path, fieldName, item[subItemsField]);
          }
        }
      } else {
        break;
      }
    } while (path.length && !isDefined(result2));
    return result2;
  },
  _getSubItemField: (itemType) => "tabbed" === itemType ? "tabs" : "items",
  _searchItemInEverySubItem(path, fieldName, items) {
    var that = this;
    var result2;
    each(items, (index, groupItem) => {
      result2 = that._getItemByFieldPath(path.slice(), fieldName, groupItem);
      if (result2) {
        return false;
      }
    });
    if (!result2) {
      result2 = false;
    }
    return result2;
  },
  _changeItemOption(item, option, value2) {
    if (isObject(item)) {
      item[option] = value2;
    }
  },
  _dimensionChanged() {
    var currentScreenFactor = this._getCurrentScreenFactor();
    if (this._lastMarkupScreenFactor !== currentScreenFactor) {
      if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {
        this._targetScreenFactor = currentScreenFactor;
        this._refresh();
        this._targetScreenFactor = void 0;
      }
      this._lastMarkupScreenFactor = currentScreenFactor;
    }
  },
  _isColCountChanged(oldScreenSize, newScreenSize) {
    var isChanged = false;
    each(this._cachedColCountOptions, (index, item) => {
      if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {
        isChanged = true;
        return false;
      }
    });
    return isChanged;
  },
  _refresh() {
    var editorSelector = ".".concat(TEXTEDITOR_CLASS, ".").concat(FOCUSED_STATE_CLASS2, ":not(.").concat(DROP_DOWN_EDITOR_CLASS, ") .").concat(TEXTEDITOR_INPUT_CLASS);
    events_engine_default.trigger(this.$element().find(editorSelector), "change");
    this.callBase();
  },
  _updateIsDirty(dataField) {
    var editor = this.getEditor(dataField);
    if (!editor) {
      return;
    }
    if (editor.option("isDirty")) {
      this._dirtyFields.add(dataField);
    } else {
      this._dirtyFields.delete(dataField);
    }
    this.option("isDirty", !!this._dirtyFields.size);
  },
  updateRunTimeInfoForEachEditor(editorAction) {
    this._itemsRunTimeInfo.each((_, itemRunTimeInfo) => {
      var {
        widgetInstance
      } = itemRunTimeInfo;
      if (isDefined(widgetInstance) && editor_default.isEditor(widgetInstance)) {
        editorAction(widgetInstance);
      }
    });
  },
  _clear() {
    this.updateRunTimeInfoForEachEditor((editor) => {
      editor.clear();
      editor.option("isValid", true);
    });
    validation_engine_default.resetGroup(this._getValidationGroup());
  },
  _updateData(data17, value2, isComplexData) {
    var that = this;
    var _data = isComplexData ? value2 : data17;
    if (isObject(_data)) {
      each(_data, (dataField, fieldValue) => {
        that._updateData(isComplexData ? "".concat(data17, ".").concat(dataField) : dataField, fieldValue, isObject(fieldValue));
      });
    } else if (isString(data17)) {
      that._updateFieldValue(data17, value2);
    }
  },
  registerKeyHandler(key, handler) {
    this.callBase(key, handler);
    this._itemsRunTimeInfo.each((_, itemRunTimeInfo) => {
      if (isDefined(itemRunTimeInfo.widgetInstance)) {
        itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler);
      }
    });
  },
  _focusTarget() {
    return this.$element().find(".".concat(FIELD_ITEM_CONTENT_CLASS, " [tabindex]")).first();
  },
  _visibilityChanged() {
    this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());
  },
  _clearAutoColCountChangedTimeout() {
    if (this.autoColCountChangedTimeoutId) {
      clearTimeout(this.autoColCountChangedTimeoutId);
      this.autoColCountChangedTimeoutId = void 0;
    }
  },
  _dispose() {
    this._clearAutoColCountChangedTimeout();
    validation_engine_default.removeGroup(this._getValidationGroup());
    this.callBase();
  },
  clear() {
    this._clear();
  },
  resetValues() {
    this._clear();
  },
  reset(editorsData) {
    this.updateRunTimeInfoForEachEditor((editor) => {
      var editorName = editor.option("name");
      if (editorsData && editorName in editorsData) {
        editor.reset(editorsData[editorName]);
      } else {
        editor.reset();
      }
    });
    this._renderValidationSummary();
  },
  updateData(data17, value2) {
    this._updateData(data17, value2);
  },
  getEditor(dataField) {
    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField);
  },
  getButton(name2) {
    return this._itemsRunTimeInfo.findWidgetInstanceByName(name2);
  },
  updateDimensions() {
    var that = this;
    var deferred = Deferred();
    if (that._scrollable) {
      that._scrollable.update().done(() => {
        deferred.resolveWith(that);
      });
    } else {
      deferred.resolveWith(that);
    }
    return deferred.promise();
  },
  itemOption(id, option, value2) {
    var items = this._generateItemsFromData(this.option("items"));
    var item = this._getItemByField(id, items);
    var path = getItemPath(items, item);
    if (!item) {
      return;
    }
    switch (arguments.length) {
      case 1:
        return item;
      case 3:
        var itemAction = this._tryCreateItemOptionAction(option, item, value2, item[option], path);
        this._changeItemOption(item, option, value2);
        var fullName = getFullOptionName(path, option);
        if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value2)) {
          this.option("items", items);
        }
        break;
      default:
        if (isObject(option)) {
          if (!this._tryChangeLayoutManagerItemOptions(path, option)) {
            var allowUpdateItems;
            each(option, (optionName, optionValue) => {
              var itemAction2 = this._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);
              this._changeItemOption(item, optionName, optionValue);
              if (!allowUpdateItems && !this._tryExecuteItemOptionAction(itemAction2)) {
                allowUpdateItems = true;
              }
            });
            allowUpdateItems && this.option("items", items);
          }
        }
    }
  },
  validate() {
    return validation_engine_default.validateGroup(this._getValidationGroup());
  },
  getItemID(name2) {
    return "dx_".concat(this.option("formID"), "_").concat(name2 || new guid_default());
  },
  getTargetScreenFactor() {
    return this._targetScreenFactor;
  }
});
component_registrator_default("dxForm", Form);
var m_form_default = Form;

// node_modules/devextreme/esm/ui/form/ui.form.js
var ui_form_default = m_form_default;

// node_modules/devextreme/esm/ui/form.js
var form_default = ui_form_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/m_editing_form_based.js
var editingControllerExtender2 = (Base) => class extends Base {
  init() {
    this._editForm = null;
    this._updateEditFormDeferred = null;
    super.init();
  }
  isEditRow(rowIndex) {
    return !this.isPopupEditMode() && super.isEditRow(rowIndex);
  }
  isFormOrPopupEditMode() {
    return this.isPopupEditMode() || this.isFormEditMode();
  }
  isFormEditMode() {
    var editMode = this.option("editing.mode");
    return editMode === EDIT_MODE_FORM;
  }
  getFirstEditableColumnIndex() {
    var firstFormItem = this._firstFormItem;
    if (this.isFormEditMode() && firstFormItem) {
      var editRowKey = this.option(EDITING_EDITROWKEY_OPTION_NAME);
      var editRowIndex = this._dataController.getRowIndexByKey(editRowKey);
      var $editFormElements = this._rowsView.getCellElements(editRowIndex);
      return this._rowsView._getEditFormEditorVisibleIndex($editFormElements, firstFormItem.column);
    }
    return super.getFirstEditableColumnIndex();
  }
  getEditFormRowIndex() {
    return this.isFormOrPopupEditMode() ? this._getVisibleEditRowIndex() : super.getEditFormRowIndex();
  }
  _isEditColumnVisible() {
    var result2 = super._isEditColumnVisible();
    var editingOptions = this.option("editing");
    return this.isFormOrPopupEditMode() ? editingOptions.allowUpdating || result2 : result2;
  }
  _handleDataChanged(args) {
    var _a, _b;
    if (this.isPopupEditMode()) {
      var editRowKey = this.option("editing.editRowKey");
      var hasEditRow = null === (_a = null === args || void 0 === args ? void 0 : args.items) || void 0 === _a ? void 0 : _a.some((item) => equalByValue(item.key, editRowKey));
      var onlyInsertChanges = (null === (_b = args.changeTypes) || void 0 === _b ? void 0 : _b.length) && args.changeTypes.every((item) => "insert" === item);
      if (("refresh" === args.changeType || hasEditRow && args.isOptionChanged) && !onlyInsertChanges) {
        this._repaintEditPopup();
      }
    }
    super._handleDataChanged(args);
  }
  getPopupContent() {
    var _a;
    var popupVisible = null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.option("visible");
    if (this.isPopupEditMode() && popupVisible) {
      return this._$popupContent;
    }
  }
  _showAddedRow(rowIndex) {
    if (this.isPopupEditMode()) {
      this._showEditPopup(rowIndex);
    } else {
      super._showAddedRow(rowIndex);
    }
  }
  _cancelEditDataCore() {
    super._cancelEditDataCore();
    if (this.isPopupEditMode()) {
      this._hideEditPopup();
    }
  }
  _updateEditRowCore(row, skipCurrentRow, isCustomSetCellValue) {
    var _a;
    var editForm = this._editForm;
    if (this.isPopupEditMode()) {
      if (this.option("repaintChangesOnly")) {
        null === (_a = row.update) || void 0 === _a ? void 0 : _a.call(row, row);
        this._rowsView.renderDelayedTemplates();
      } else if (editForm) {
        this._updateEditFormDeferred = new Deferred().done(() => editForm.repaint());
        if (!this._updateLockCount) {
          this._updateEditFormDeferred.resolve();
        }
      }
    } else {
      super._updateEditRowCore(row, skipCurrentRow, isCustomSetCellValue);
    }
  }
  _showEditPopup(rowIndex, repaintForm) {
    var isMobileDevice = "desktop" !== devices_default.current().deviceType;
    var editPopupClass = this.addWidgetPrefix(EDIT_POPUP_CLASS);
    var popupOptions = extend({
      showTitle: false,
      fullScreen: isMobileDevice,
      wrapperAttr: {
        class: editPopupClass
      },
      toolbarItems: [{
        toolbar: "bottom",
        location: "after",
        widget: "dxButton",
        options: this._getSaveButtonConfig()
      }, {
        toolbar: "bottom",
        location: "after",
        widget: "dxButton",
        options: this._getCancelButtonConfig()
      }],
      contentTemplate: this._getPopupEditFormTemplate(rowIndex)
    }, this.option(EDITING_POPUP_OPTION_NAME));
    if (!this._editPopup) {
      var $popupContainer = renderer_default("<div>").appendTo(this.component.$element()).addClass(editPopupClass);
      this._editPopup = this._createComponent($popupContainer, ui_popup_default);
      this._editPopup.on("hiding", this._getEditPopupHiddenHandler());
      this._editPopup.on("shown", (e) => {
        var _a;
        events_engine_default.trigger(e.component.$content().find(FOCUSABLE_ELEMENT_SELECTOR).not(".".concat(FOCUSABLE_ELEMENT_CLASS)).first(), "focus");
        if (repaintForm) {
          null === (_a = this._editForm) || void 0 === _a ? void 0 : _a.repaint();
        }
      });
    }
    this._editPopup.option(popupOptions);
    this._editPopup.show();
    super._showEditPopup(rowIndex, repaintForm);
  }
  _getPopupEditFormTemplate(rowIndex) {
    var row = this.component.getVisibleRows()[rowIndex];
    var templateOptions = {
      row,
      values: row.values,
      rowType: row.rowType,
      key: row.key,
      rowIndex
    };
    this._rowsView._addWatchMethod(templateOptions, row);
    return (container) => {
      var formTemplate = this.getEditFormTemplate();
      var scrollable = this._createComponent(renderer_default("<div>").appendTo(container), ui_scrollable_default);
      this._$popupContent = renderer_default(scrollable.content());
      formTemplate(this._$popupContent, templateOptions, {
        isPopupForm: true
      });
      this._rowsView.renderDelayedTemplates();
      renderer_default(container).parent().attr("aria-label", this.localize("dxDataGrid-ariaEditForm"));
    };
  }
  _repaintEditPopup() {
    var _a, _b;
    var rowIndex = this._getVisibleEditRowIndex();
    if (rowIndex >= 0) {
      var defaultAnimation = null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.option("animation");
      null === (_b = this._editPopup) || void 0 === _b ? void 0 : _b.option("animation", null);
      this._showEditPopup(rowIndex, true);
      if (void 0 !== defaultAnimation) {
        this._editPopup.option("animation", defaultAnimation);
      }
    }
  }
  _hideEditPopup() {
    var _a;
    null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.option("visible", false);
  }
  optionChanged(args) {
    if ("editing" === args.name && this.isFormOrPopupEditMode()) {
      var {
        fullName
      } = args;
      if (0 === fullName.indexOf(EDITING_FORM_OPTION_NAME)) {
        this._handleFormOptionChange(args);
        args.handled = true;
      } else if (0 === fullName.indexOf(EDITING_POPUP_OPTION_NAME)) {
        this._handlePopupOptionChange(args);
        args.handled = true;
      }
    }
    super.optionChanged(args);
  }
  _handleFormOptionChange(args) {
    var _a;
    if (this.isFormEditMode()) {
      var editRowIndex = this._getVisibleEditRowIndex();
      if (editRowIndex >= 0) {
        this._dataController.updateItems({
          changeType: "update",
          rowIndices: [editRowIndex]
        });
      }
    } else if ((null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.option("visible")) && 0 === args.fullName.indexOf(EDITING_FORM_OPTION_NAME)) {
      this._repaintEditPopup();
    }
  }
  _handlePopupOptionChange(args) {
    var editPopup = this._editPopup;
    if (editPopup) {
      var popupOptionName = args.fullName.slice(EDITING_POPUP_OPTION_NAME.length + 1);
      if (popupOptionName) {
        editPopup.option(popupOptionName, args.value);
      } else {
        editPopup.option(args.value);
      }
    }
  }
  renderFormEditorTemplate(detailCellOptions, item, formTemplateOptions, container, isReadOnly) {
    var that = this;
    var $container = renderer_default(container);
    var {
      column
    } = item;
    var editorType = getEditorType(item);
    var row = null === detailCellOptions || void 0 === detailCellOptions ? void 0 : detailCellOptions.row;
    var rowData = null === row || void 0 === row ? void 0 : row.data;
    var form = formTemplateOptions.component;
    var value2 = column.calculateCellValue(rowData);
    var displayValue = m_utils_default.getDisplayValue(column, value2, rowData, null === row || void 0 === row ? void 0 : row.rowType);
    var {
      label,
      labelMark,
      labelMode
    } = formTemplateOptions.editorOptions || {};
    var cellOptions = extend({}, detailCellOptions, {
      data: rowData,
      cellElement: null,
      isOnForm: true,
      item,
      id: form.getItemID(item.name || item.dataField),
      column: extend({}, column, {
        editorType,
        editorOptions: extend({
          label,
          labelMark,
          labelMode
        }, column.editorOptions, item.editorOptions)
      }),
      columnIndex: column.index,
      setValue: !isReadOnly && column.allowEditing && function(value3, text) {
        that.updateFieldValue(cellOptions, value3, text);
      }
    });
    cellOptions.value = value2;
    cellOptions.displayValue = displayValue;
    cellOptions.text = !column.command ? m_utils_default.formatValue(displayValue, column) : "";
    var template = this._getFormEditItemTemplate.bind(this)(cellOptions, column);
    this._rowsView.renderTemplate($container, template, cellOptions, !!isElementInDom($container)).done(() => {
      this._rowsView._updateCell($container, cellOptions);
    });
    return cellOptions;
  }
  getFormEditorTemplate(cellOptions, item) {
    var column = this.component.columnOption(item.name || item.dataField);
    return (options2, container) => {
      var $container = renderer_default(container);
      var {
        row
      } = cellOptions;
      if (null === row || void 0 === row ? void 0 : row.watch) {
        var dispose = row.watch(() => column.selector(row.data), () => {
          var $editorElement = $container.find(".dx-widget").first();
          var validator = $editorElement.data("dxValidator");
          var validatorOptions = null === validator || void 0 === validator ? void 0 : validator.option();
          $container.contents().remove();
          cellOptions = this.renderFormEditorTemplate.bind(this)(cellOptions, item, options2, $container);
          $editorElement = $container.find(".dx-widget").first();
          validator = $editorElement.data("dxValidator");
          if (validatorOptions && !validator) {
            $editorElement.dxValidator({
              validationRules: validatorOptions.validationRules,
              validationGroup: validatorOptions.validationGroup,
              dataGetter: validatorOptions.dataGetter
            });
          }
        });
        events_engine_default.on($container, removeEvent, dispose);
      }
      cellOptions = this.renderFormEditorTemplate.bind(this)(cellOptions, item, options2, $container);
    };
  }
  getEditFormOptions(detailOptions) {
    var _b;
    var editFormOptions = null === (_b = this._getValidationGroupsInForm) || void 0 === _b ? void 0 : _b.call(this, detailOptions);
    var userCustomizeItem = this.option("editing.form.customizeItem");
    var editFormItemClass = this.addWidgetPrefix(EDIT_FORM_ITEM_CLASS);
    var items = this.option("editing.form.items");
    var isCustomEditorType = {};
    if (!items) {
      var columns7 = this._columnsController.getColumns();
      items = [];
      each(columns7, (_, column) => {
        if (!column.isBand && !column.type) {
          items.push({
            column,
            name: column.name,
            dataField: column.dataField
          });
        }
      });
    } else {
      forEachFormItems(items, (item) => {
        var itemId = (null === item || void 0 === item ? void 0 : item.name) || (null === item || void 0 === item ? void 0 : item.dataField);
        if (itemId) {
          isCustomEditorType[itemId] = !!item.editorType;
        }
      });
    }
    return extend({}, editFormOptions, {
      items,
      formID: "dx-".concat(new guid_default()),
      customizeItem: (item) => {
        var column;
        var itemId = item.name || item.dataField;
        if (item.column || itemId) {
          column = item.column || this._columnsController.columnOption(item.name ? "name:".concat(item.name) : "dataField:".concat(item.dataField));
        }
        if (column) {
          item.label = item.label || {};
          item.label.text = item.label.text || column.caption;
          if ("boolean" === column.dataType && void 0 === item.label.visible) {
            var labelMode = this.option("editing.form.labelMode");
            if ("floating" === labelMode || "static" === labelMode) {
              item.label.visible = true;
            }
          }
          item.template = item.template || this.getFormEditorTemplate(detailOptions, item);
          item.column = column;
          item.isCustomEditorType = isCustomEditorType[itemId];
          if (column.formItem) {
            extend(item, column.formItem);
          }
          if (void 0 === item.isRequired && column.validationRules) {
            item.isRequired = column.validationRules.some((rule) => "required" === rule.type);
            item.validationRules = [];
          }
          var itemVisible = isDefined(item.visible) ? item.visible : true;
          if (!this._firstFormItem && itemVisible) {
            this._firstFormItem = item;
          }
        }
        null === userCustomizeItem || void 0 === userCustomizeItem ? void 0 : userCustomizeItem.call(this, item);
        item.cssClass = isString(item.cssClass) ? "".concat(item.cssClass, " ").concat(editFormItemClass) : editFormItemClass;
      }
    });
  }
  getEditFormTemplate() {
    return ($container, detailOptions, options2) => {
      var editFormOptions = this.option(EDITING_FORM_OPTION_NAME);
      var baseEditFormOptions = this.getEditFormOptions(detailOptions);
      var $formContainer = renderer_default("<div>").appendTo($container);
      var isPopupForm = null === options2 || void 0 === options2 ? void 0 : options2.isPopupForm;
      this._firstFormItem = void 0;
      if (isPopupForm) {
        $formContainer.addClass(this.addWidgetPrefix(EDIT_POPUP_FORM_CLASS));
      }
      this._editForm = this._createComponent($formContainer, form_default, extend({}, editFormOptions, baseEditFormOptions));
      if (!isPopupForm) {
        var $buttonsContainer = renderer_default("<div>").addClass(this.addWidgetPrefix(FORM_BUTTONS_CONTAINER_CLASS)).appendTo($container);
        this._createComponent(renderer_default("<div>").appendTo($buttonsContainer), button_default, this._getSaveButtonConfig());
        this._createComponent(renderer_default("<div>").appendTo($buttonsContainer), button_default, this._getCancelButtonConfig());
      }
      this._editForm.on("contentReady", () => {
        var _a;
        this._rowsView.renderDelayedTemplates();
        null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.repaint();
      });
    };
  }
  getEditForm() {
    return this._editForm;
  }
  _endUpdateCore() {
    var _a;
    null === (_a = this._updateEditFormDeferred) || void 0 === _a ? void 0 : _a.resolve();
  }
  _beforeEndSaving(changes) {
    var _a;
    super._beforeEndSaving(changes);
    if (this.isPopupEditMode()) {
      null === (_a = this._editPopup) || void 0 === _a ? void 0 : _a.hide();
    }
  }
  _processDataItemCore(item, change, key, columns7, generateDataValues) {
    var {
      type: type2
    } = change;
    if (this.isPopupEditMode() && type2 === DATA_EDIT_DATA_INSERT_TYPE) {
      item.visible = false;
    }
    super._processDataItemCore(item, change, key, columns7, generateDataValues);
  }
  _editRowFromOptionChangedCore(rowIndices, rowIndex) {
    var isPopupEditMode = this.isPopupEditMode();
    super._editRowFromOptionChangedCore(rowIndices, rowIndex, isPopupEditMode);
    if (isPopupEditMode) {
      this._showEditPopup(rowIndex);
    }
  }
};
var data6 = (Base) => class extends Base {
  _updateEditItem(item) {
    if (this._editingController.isFormEditMode()) {
      item.rowType = "detail";
    }
  }
  _getChangedColumnIndices(oldItem, newItem, visibleRowIndex, isLiveUpdate) {
    if (false === isLiveUpdate && newItem.isEditing && this._editingController.isFormEditMode()) {
      return;
    }
    return super._getChangedColumnIndices.apply(this, arguments);
  }
};
var rowsView5 = (Base) => class extends Base {
  _renderCellContent($cell, options2) {
    if ("data" === options2.rowType && this._editingController.isPopupEditMode() && false === options2.row.visible) {
      return;
    }
    super._renderCellContent.apply(this, arguments);
  }
  getCellElements(rowIndex) {
    var $cellElements = super.getCellElements(rowIndex);
    var editingController = this._editingController;
    var editForm = editingController.getEditForm();
    var editFormRowIndex = editingController.getEditFormRowIndex();
    if (editFormRowIndex === rowIndex && $cellElements && editForm) {
      return editForm.$element().find(".".concat(this.addWidgetPrefix(EDIT_FORM_ITEM_CLASS), ", .").concat(BUTTON_CLASS));
    }
    return $cellElements;
  }
  _getVisibleColumnIndex($cells, rowIndex, columnIdentifier) {
    var editFormRowIndex = this._editingController.getEditFormRowIndex();
    if (editFormRowIndex === rowIndex && isString(columnIdentifier)) {
      var column = this._columnsController.columnOption(columnIdentifier);
      return this._getEditFormEditorVisibleIndex($cells, column);
    }
    return super._getVisibleColumnIndex.apply(this, arguments);
  }
  _getEditFormEditorVisibleIndex($cells, column) {
    var visibleIndex = -1;
    each($cells, (index, cellElement) => {
      var item = renderer_default(cellElement).find(".dx-field-item-content").data("dx-form-item");
      if ((null === item || void 0 === item ? void 0 : item.column) && column && item.column.index === column.index) {
        visibleIndex = index;
        return false;
      }
    });
    return visibleIndex;
  }
  _isFormItem(parameters) {
    var isDetailRow2 = "detail" === parameters.rowType || "detailAdaptive" === parameters.rowType;
    var isPopupEditing = "data" === parameters.rowType && this._editingController.isPopupEditMode();
    return (isDetailRow2 || isPopupEditing) && parameters.item;
  }
  _updateCell($cell, parameters) {
    if (this._isFormItem(parameters)) {
      this._formItemPrepared(parameters, $cell);
    } else {
      super._updateCell($cell, parameters);
    }
  }
  _updateContent() {
    var editingController = this._editingController;
    var oldEditForm = editingController.getEditForm();
    var validationGroup = null === oldEditForm || void 0 === oldEditForm ? void 0 : oldEditForm.option("validationGroup");
    var deferred = super._updateContent.apply(this, arguments);
    return deferred.done(() => {
      var newEditForm = editingController.getEditForm();
      if (validationGroup && newEditForm && newEditForm !== oldEditForm) {
        newEditForm.option("validationGroup", validationGroup);
      }
    });
  }
};
var editingFormBasedModule = {
  extenders: {
    controllers: {
      editing: editingControllerExtender2,
      data: data6
    },
    views: {
      rowsView: rowsView5
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/editing_form_based.js
m_core_default.registerModule("editingFormBased", editingFormBasedModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/editing/m_editing_cell_based.js
var editingControllerExtender3 = (Base) => class extends Base {
  init() {
    var needCreateHandlers = !this._saveEditorHandler;
    super.init();
    if (needCreateHandlers) {
      var $pointerDownTarget;
      var isResizing;
      this._pointerUpEditorHandler = () => {
        var _a;
        isResizing = null === (_a = this._columnsResizerController) || void 0 === _a ? void 0 : _a.isResizing();
      };
      this._pointerDownEditorHandler = (e) => $pointerDownTarget = renderer_default(e.target);
      this._saveEditorHandler = this.createAction(function(e) {
        var {
          event
        } = e;
        var $target = renderer_default(event.target);
        var targetComponent = event[TARGET_COMPONENT_NAME];
        var {
          component
        } = this;
        if (isEditable($pointerDownTarget) && !$pointerDownTarget.is($target)) {
          return;
        }
        function checkEditorPopup($element) {
          if (!$element) {
            return false;
          }
          var $dropDownEditorOverlay = $element.closest(".".concat(DROPDOWN_EDITOR_OVERLAY_CLASS));
          var $componentElement = component.$element();
          return $dropDownEditorOverlay.length > 0 && 0 === $componentElement.closest($dropDownEditorOverlay).length;
        }
        if (this.isCellOrBatchEditMode() && !this._editCellInProgress) {
          var isEditorPopup = checkEditorPopup($target) || checkEditorPopup(null === targetComponent || void 0 === targetComponent ? void 0 : targetComponent.$element());
          var isAnotherComponent = targetComponent && !targetComponent._disposed && targetComponent !== this.component;
          var isAddRowButton = !!$target.closest(".".concat(this.addWidgetPrefix(ADD_ROW_BUTTON_CLASS))).length;
          var isFocusOverlay = $target.hasClass(this.addWidgetPrefix(FOCUS_OVERLAY_CLASS2));
          var isCellEditMode = this.isCellEditMode();
          if (!isResizing && !isEditorPopup && !isFocusOverlay && !(isAddRowButton && isCellEditMode && this.isEditing()) && (isElementInDom($target) || isAnotherComponent)) {
            this._closeEditItem.bind(this)($target);
          }
        }
      });
      events_engine_default.on(dom_adapter_default.getDocument(), pointer_default.up, this._pointerUpEditorHandler);
      events_engine_default.on(dom_adapter_default.getDocument(), pointer_default.down, this._pointerDownEditorHandler);
      events_engine_default.on(dom_adapter_default.getDocument(), CLICK_EVENT_NAME, this._saveEditorHandler);
    }
  }
  isCellEditMode() {
    return this.option("editing.mode") === EDIT_MODE_CELL;
  }
  isBatchEditMode() {
    return this.option("editing.mode") === EDIT_MODE_BATCH;
  }
  isCellOrBatchEditMode() {
    return this.isCellEditMode() || this.isBatchEditMode();
  }
  _needToCloseEditableCell($targetElement) {
    var _a;
    var $element = this.component.$element();
    var result2 = this.isEditing();
    var isCurrentComponentElement = !$element || !!$targetElement.closest($element).length;
    if (isCurrentComponentElement) {
      var isDataRow2 = $targetElement.closest(".".concat(DATA_ROW_CLASS3)).length;
      if (isDataRow2) {
        var $targetCell = $targetElement.closest(".".concat(ROW_CLASS4, "> td"));
        var rowIndex = this._rowsView.getRowIndex($targetCell.parent());
        var cellElements = this._rowsView.getCellElements(rowIndex);
        if (null === cellElements || void 0 === cellElements ? void 0 : cellElements.length) {
          var columnIndex = cellElements.index($targetCell);
          var visibleColumns = this._columnsController.getVisibleColumns();
          var allowEditing = null === (_a = visibleColumns[columnIndex]) || void 0 === _a ? void 0 : _a.allowEditing;
          var isEditingCell2 = this.isEditCell(rowIndex, columnIndex);
          result2 = result2 && !allowEditing && !isEditingCell2;
        }
      }
    }
    return result2 || super._needToCloseEditableCell($targetElement);
  }
  _closeEditItem($targetElement) {
    if (this._needToCloseEditableCell($targetElement)) {
      this.closeEditCell();
    }
  }
  _focusEditorIfNeed() {
    var _a;
    if (this._needFocusEditor && this.isCellOrBatchEditMode()) {
      var editColumnIndex = this._getVisibleEditColumnIndex();
      var $cell = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a._getCellElement(this._getVisibleEditRowIndex(), editColumnIndex);
      this._refocusEditCell = false;
      clearTimeout(this._inputFocusTimeoutID);
      if ($cell && !$cell.find(":focus").length) {
        this._focusEditingCell(() => {
          this._editCellInProgress = false;
        }, $cell, true);
      } else {
        this._editCellInProgress = false;
      }
      this._needFocusEditor = false;
    } else {
      super._focusEditorIfNeed();
    }
  }
  isEditing() {
    if (this.isCellOrBatchEditMode()) {
      var isEditRowKeyDefined = isDefined(this.option(EDITING_EDITROWKEY_OPTION_NAME));
      var isEditColumnNameDefined = isDefined(this.option(EDITING_EDITCOLUMNNAME_OPTION_NAME));
      return isEditRowKeyDefined && isEditColumnNameDefined;
    }
    return super.isEditing();
  }
  _handleEditColumnNameChange(args) {
    var oldRowIndex = this._getVisibleEditRowIndex(args.previousValue);
    if (this.isCellOrBatchEditMode() && -1 !== oldRowIndex && isDefined(args.value) && args.value !== args.previousValue) {
      var columnIndex = this._columnsController.getVisibleColumnIndex(args.value);
      var oldColumnIndex = this._columnsController.getVisibleColumnIndex(args.previousValue);
      this._editCellFromOptionChanged(columnIndex, oldColumnIndex, oldRowIndex);
    }
  }
  _addRow(parentKey) {
    if (this.isCellEditMode() && this.hasChanges()) {
      var deferred = new Deferred();
      this.saveEditData().done(() => {
        if (!this.hasChanges()) {
          this.addRow(parentKey).done(deferred.resolve).fail(deferred.reject);
        } else {
          deferred.reject("cancel");
        }
      });
      return deferred.promise();
    }
    return super._addRow(parentKey);
  }
  editCell(rowIndex, columnIndex) {
    return this._editCell({
      rowIndex,
      columnIndex
    });
  }
  _editCell(options2) {
    var d = new Deferred();
    var coreResult;
    this.executeOperation(d, () => {
      coreResult = this._editCellCore(options2);
      when(coreResult).done(d.resolve).fail(d.reject);
    });
    return void 0 !== coreResult ? coreResult : d.promise();
  }
  _editCellCore(options2) {
    var dataController2 = this._dataController;
    var isEditByOptionChanged = isDefined(options2.oldColumnIndex) || isDefined(options2.oldRowIndex);
    var {
      columnIndex,
      rowIndex,
      column,
      item
    } = this._getNormalizedEditCellOptions(options2);
    var params = {
      data: null === item || void 0 === item ? void 0 : item.data,
      cancel: false,
      column
    };
    if (void 0 === item.key) {
      this._dataController.fireError("E1043");
      return;
    }
    if (column && ("data" === item.rowType || "detailAdaptive" === item.rowType) && !item.removed && this.isCellOrBatchEditMode()) {
      if (!isEditByOptionChanged && this.isEditCell(rowIndex, columnIndex)) {
        return true;
      }
      var editRowIndex = rowIndex + dataController2.getRowIndexOffset();
      return when(this._beforeEditCell(rowIndex, columnIndex, item)).done((cancel) => {
        if (cancel) {
          return;
        }
        if (!this._prepareEditCell(params, item, columnIndex, editRowIndex)) {
          this._processCanceledEditingCell();
        }
      });
    }
    return false;
  }
  _beforeEditCell(rowIndex, columnIndex, item) {
    if (this.isCellEditMode() && !item.isNewRow && this.hasChanges()) {
      var isSaving = new Deferred();
      this.saveEditData().always(() => {
        isSaving.resolve(this.hasChanges());
      });
      this.addDeferred(isSaving);
      return isSaving;
    }
    return false;
  }
  publicMethods() {
    var publicMethods = super.publicMethods();
    return publicMethods.concat(["editCell", "closeEditCell"]);
  }
  _getNormalizedEditCellOptions(_ref) {
    var {
      oldColumnIndex,
      oldRowIndex,
      columnIndex,
      rowIndex
    } = _ref;
    var columnsController = this._columnsController;
    var visibleColumns = columnsController.getVisibleColumns();
    var items = this._dataController.items();
    var item = items[rowIndex];
    var oldColumn;
    if (isDefined(oldColumnIndex)) {
      oldColumn = visibleColumns[oldColumnIndex];
    } else {
      oldColumn = this._getEditColumn();
    }
    if (!isDefined(oldRowIndex)) {
      oldRowIndex = this._getVisibleEditRowIndex();
    }
    if (isString(columnIndex)) {
      columnIndex = columnsController.columnOption(columnIndex, "index");
      columnIndex = columnsController.getVisibleIndex(columnIndex);
    }
    var column = visibleColumns[columnIndex];
    return {
      oldColumn,
      columnIndex,
      oldRowIndex,
      rowIndex,
      column,
      item
    };
  }
  _prepareEditCell(params, item, editColumnIndex, editRowIndex) {
    var _a;
    if (!item.isNewRow) {
      params.key = item.key;
    }
    if (this._isEditingStart(params)) {
      return false;
    }
    this._pageIndex = this._dataController.pageIndex();
    this._setEditRowKey(item.key);
    this._setEditColumnNameByIndex(editColumnIndex);
    if (!params.column.showEditorAlways) {
      this._addInternalData({
        key: item.key,
        oldData: null !== (_a = item.oldData) && void 0 !== _a ? _a : item.data
      });
    }
    return true;
  }
  closeEditCell(isError, withoutSaveEditData) {
    var result2 = when();
    var oldEditRowIndex = this._getVisibleEditRowIndex();
    if (this.isCellOrBatchEditMode()) {
      var deferred = new Deferred();
      result2 = new Deferred();
      this.executeOperation(deferred, () => {
        this._closeEditCellCore(isError, oldEditRowIndex, withoutSaveEditData).always(result2.resolve);
      });
    }
    return result2.promise();
  }
  _closeEditCellCore(isError, oldEditRowIndex, withoutSaveEditData) {
    var dataController2 = this._dataController;
    var deferred = new Deferred();
    var promise = deferred.promise();
    if (this.isCellEditMode() && this.hasChanges()) {
      if (!withoutSaveEditData) {
        this.saveEditData().done((error) => {
          if (!this.hasChanges()) {
            this.closeEditCell(!!error).always(deferred.resolve);
            return;
          }
          deferred.resolve();
        });
        return promise;
      }
    } else {
      this._resetEditRowKey();
      this._resetEditColumnName();
      if (oldEditRowIndex >= 0) {
        var rowIndices = [oldEditRowIndex];
        this._beforeCloseEditCellInBatchMode(rowIndices);
        if (!isError) {
          dataController2.updateItems({
            changeType: "update",
            rowIndices
          });
        }
      }
    }
    deferred.resolve();
    return promise;
  }
  _resetModifiedClassCells(changes) {
    if (this.isBatchEditMode()) {
      var columnsCount = this._columnsController.getVisibleColumns().length;
      changes.forEach((_ref2) => {
        var {
          key
        } = _ref2;
        var rowIndex = this._dataController.getRowIndexByKey(key);
        for (var columnIndex = 0; columnIndex < columnsCount; columnIndex++) {
          var cellElement = this._rowsView._getCellElement(rowIndex, columnIndex);
          null === cellElement || void 0 === cellElement ? void 0 : cellElement.removeClass(CELL_MODIFIED_CLASS2);
        }
      });
    }
  }
  _prepareChange(options2, value2, text) {
    var $cellElement = renderer_default(options2.cellElement);
    if (this.isBatchEditMode() && void 0 !== options2.key) {
      this._applyModified($cellElement, options2);
    }
    return super._prepareChange(options2, value2, text);
  }
  _cancelSaving(result2) {
    var dataController2 = this._dataController;
    if (this.isCellOrBatchEditMode()) {
      if (this.isBatchEditMode()) {
        this._resetEditIndices();
      }
      dataController2.updateItems();
    }
    super._cancelSaving(result2);
  }
  optionChanged(args) {
    var {
      fullName
    } = args;
    if ("editing" === args.name && fullName === EDITING_EDITCOLUMNNAME_OPTION_NAME) {
      this._handleEditColumnNameChange(args);
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _editCellFromOptionChanged(columnIndex, oldColumnIndex, oldRowIndex) {
    var columns7 = this._columnsController.getVisibleColumns();
    if (columnIndex > -1) {
      deferRender(() => {
        this._repaintEditCell(columns7[columnIndex], columns7[oldColumnIndex], oldRowIndex);
      });
    }
  }
  _handleEditRowKeyChange(args) {
    var _a;
    if (this.isCellOrBatchEditMode()) {
      var columnIndex = this._getVisibleEditColumnIndex();
      var oldRowIndexCorrection = this._getEditRowIndexCorrection();
      var oldRowIndex = this._dataController.getRowIndexByKey(args.previousValue) + oldRowIndexCorrection;
      if (isDefined(args.value) && args.value !== args.previousValue) {
        null === (_a = this._editCellFromOptionChanged) || void 0 === _a ? void 0 : _a.call(this, columnIndex, columnIndex, oldRowIndex);
      }
    } else {
      super._handleEditRowKeyChange(args);
    }
  }
  deleteRow(rowIndex) {
    if (this.isCellEditMode() && this.isEditing()) {
      var {
        isNewRow
      } = this._dataController.items()[rowIndex];
      var rowKey = this._dataController.getKeyByRowIndex(rowIndex);
      this.closeEditCell(null, isNewRow).always(() => {
        rowIndex = this._dataController.getRowIndexByKey(rowKey);
        this._checkAndDeleteRow(rowIndex);
      });
    } else {
      super.deleteRow(rowIndex);
    }
  }
  _checkAndDeleteRow(rowIndex) {
    if (this.isBatchEditMode()) {
      this._deleteRowCore(rowIndex);
    } else {
      super._checkAndDeleteRow(rowIndex);
    }
  }
  _refreshCore(params) {
    var {
      isPageChanged
    } = null !== params && void 0 !== params ? params : {};
    var needResetIndexes = this.isBatchEditMode() || isPageChanged && "virtual" !== this.option("scrolling.mode");
    if (this.isCellOrBatchEditMode()) {
      if (needResetIndexes) {
        this._resetEditColumnName();
        this._resetEditRowKey();
      }
    } else {
      super._refreshCore(params);
    }
  }
  _allowRowAdding(params) {
    if (this.isBatchEditMode()) {
      return true;
    }
    return super._allowRowAdding(params);
  }
  _afterDeleteRow(rowIndex, oldEditRowIndex) {
    var dataController2 = this._dataController;
    if (this.isBatchEditMode()) {
      dataController2.updateItems({
        changeType: "update",
        rowIndices: [oldEditRowIndex, rowIndex]
      });
      return new Deferred().resolve();
    }
    return super._afterDeleteRow(rowIndex, oldEditRowIndex);
  }
  _updateEditRow(row, forceUpdateRow, isCustomSetCellValue) {
    if (this.isCellOrBatchEditMode()) {
      this._updateRowImmediately(row, forceUpdateRow, isCustomSetCellValue);
    } else {
      super._updateEditRow(row, forceUpdateRow, isCustomSetCellValue);
    }
  }
  _isDefaultButtonVisible(button, options2) {
    if (this.isCellOrBatchEditMode()) {
      var isBatchMode = this.isBatchEditMode();
      switch (button.name) {
        case "save":
        case "cancel":
        case "edit":
          return false;
        case "delete":
          return super._isDefaultButtonVisible(button, options2) && (!isBatchMode || !options2.row.removed);
        case "undelete":
          return isBatchMode && this.allowDeleting(options2) && options2.row.removed;
        default:
          return super._isDefaultButtonVisible(button, options2);
      }
    }
    return super._isDefaultButtonVisible(button, options2);
  }
  _isRowDeleteAllowed() {
    var callBaseResult = super._isRowDeleteAllowed();
    return callBaseResult || this.isBatchEditMode();
  }
  _beforeEndSaving(changes) {
    var _a;
    if (this.isCellEditMode()) {
      if ("update" !== (null === (_a = changes[0]) || void 0 === _a ? void 0 : _a.type)) {
        super._beforeEndSaving(changes);
      }
    } else {
      if (this.isBatchEditMode()) {
        this._resetModifiedClassCells(changes);
      }
      super._beforeEndSaving(changes);
    }
  }
  prepareEditButtons(headerPanel8) {
    var _a;
    var editingOptions = null !== (_a = this.option("editing")) && void 0 !== _a ? _a : {};
    var buttonItems = super.prepareEditButtons(headerPanel8);
    var needEditingButtons = editingOptions.allowUpdating || editingOptions.allowAdding || editingOptions.allowDeleting;
    if (needEditingButtons && this.isBatchEditMode()) {
      buttonItems.push(this.prepareButtonItem(headerPanel8, "save", "saveEditData", 21));
      buttonItems.push(this.prepareButtonItem(headerPanel8, "revert", "cancelEditData", 22));
    }
    return buttonItems;
  }
  _saveEditDataInner() {
    var editRow = this._dataController.getVisibleRows()[this.getEditRowIndex()];
    var editColumn = this._getEditColumn();
    var showEditorAlways = null === editColumn || void 0 === editColumn ? void 0 : editColumn.showEditorAlways;
    var isUpdateInCellMode = this.isCellEditMode() && !(null === editRow || void 0 === editRow ? void 0 : editRow.isNewRow);
    var deferred;
    if (isUpdateInCellMode && showEditorAlways) {
      deferred = new Deferred();
      this.addDeferred(deferred);
    }
    return super._saveEditDataInner().always(null === deferred || void 0 === deferred ? void 0 : deferred.resolve);
  }
  _applyChange(options2, params, forceUpdateRow) {
    var isUpdateInCellMode = this.isCellEditMode() && options2.row && !options2.row.isNewRow;
    var {
      showEditorAlways
    } = options2.column;
    var isCustomSetCellValue = options2.column.setCellValue !== options2.column.defaultSetCellValue;
    var focusPreviousEditingCell = showEditorAlways && !forceUpdateRow && isUpdateInCellMode && this.hasEditData() && !this.isEditCell(options2.rowIndex, options2.columnIndex);
    if (focusPreviousEditingCell) {
      this._focusEditingCell();
      this._updateEditRow(options2.row, true, isCustomSetCellValue);
      return;
    }
    return super._applyChange(options2, params, forceUpdateRow);
  }
  _applyChangeCore(options2, forceUpdateRow) {
    var {
      showEditorAlways
    } = options2.column;
    var isUpdateInCellMode = this.isCellEditMode() && options2.row && !options2.row.isNewRow;
    if (showEditorAlways && !forceUpdateRow) {
      if (isUpdateInCellMode) {
        this._setEditRowKey(options2.row.key, true);
        this._setEditColumnNameByIndex(options2.columnIndex, true);
        return this.saveEditData();
      }
      if (this.isBatchEditMode()) {
        forceUpdateRow = this._needUpdateRow(options2.column);
        return super._applyChangeCore(options2, forceUpdateRow);
      }
    }
    return super._applyChangeCore(options2, forceUpdateRow);
  }
  _processDataItemCore(item, change, key, columns7, generateDataValues) {
    var {
      data: data17,
      type: type2
    } = change;
    if (this.isBatchEditMode() && type2 === DATA_EDIT_DATA_REMOVE_TYPE) {
      item.data = createObjectWithChanges(item.data, data17);
    }
    super._processDataItemCore(item, change, key, columns7, generateDataValues);
  }
  _processRemoveCore(changes, editIndex, processIfBatch) {
    if (this.isBatchEditMode() && !processIfBatch) {
      return;
    }
    return super._processRemoveCore(changes, editIndex, processIfBatch);
  }
  _processRemoveIfError(changes, editIndex) {
    if (this.isBatchEditMode()) {
      return;
    }
    return super._processRemoveIfError(changes, editIndex);
  }
  _beforeFocusElementInRow(rowIndex) {
    super._beforeFocusElementInRow(rowIndex);
    var editRowIndex = rowIndex >= 0 ? rowIndex : 0;
    var columnIndex = this.getFirstEditableColumnIndex();
    columnIndex >= 0 && this.editCell(editRowIndex, columnIndex);
  }
};
var rowsView6 = (Base) => class extends Base {
  _createTable() {
    var $table = super._createTable.apply(this, arguments);
    var editingController = this._editingController;
    if (editingController.isCellOrBatchEditMode() && this.option("editing.allowUpdating")) {
      events_engine_default.on($table, addNamespace(hold_default.name, "dxDataGridRowsView"), "td:not(.".concat(EDITOR_CELL_CLASS2, ")"), this.createAction(() => {
        if (editingController.isEditing()) {
          editingController.closeEditCell();
        }
      }));
    }
    return $table;
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row) {
      var editingController = this._editingController;
      var isRowRemoved = !!row.removed;
      if (editingController.isBatchEditMode()) {
        isRowRemoved && $row.addClass(ROW_REMOVED);
      }
    }
    return $row;
  }
};
var editingCellBasedModule = {
  extenders: {
    controllers: {
      editing: editingControllerExtender3
    },
    views: {
      rowsView: rowsView6
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/editing_cell_based.js
m_core_default.registerModule("editingCellBased", editingCellBasedModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/validating/m_validating.js
var INVALIDATE_CLASS = "invalid";
var REVERT_TOOLTIP_CLASS = "revert-tooltip";
var INVALID_MESSAGE_CLASS = "dx-invalid-message";
var INVALID_MESSAGE_ID = "dxInvalidMessage";
var WIDGET_INVALID_MESSAGE_CLASS = "invalid-message";
var INVALID_MESSAGE_ALWAYS_CLASS = "dx-invalid-message-always";
var REVERT_BUTTON_CLASS = "dx-revert-button";
var REVERT_BUTTON_ID = "dxRevertButton";
var VALIDATOR_CLASS3 = "validator";
var PENDING_INDICATOR_CLASS = "dx-pending-indicator";
var VALIDATION_PENDING_CLASS = "dx-validation-pending";
var CONTENT_CLASS4 = "content";
var INSERT_INDEX2 = "__DX_INSERT_INDEX__";
var PADDING_BETWEEN_TOOLTIPS = 2;
var EDIT_MODE_ROW2 = "row";
var EDIT_MODE_FORM2 = "form";
var EDIT_MODE_BATCH2 = "batch";
var EDIT_MODE_CELL2 = "cell";
var EDIT_MODE_POPUP2 = "popup";
var GROUP_CELL_CLASS3 = "dx-group-cell";
var FORM_BASED_MODES = [EDIT_MODE_POPUP2, EDIT_MODE_FORM2];
var COMMAND_TRANSPARENT = "transparent";
var VALIDATION_STATUS = {
  valid: "valid",
  invalid: "invalid",
  pending: "pending"
};
var EDIT_DATA_INSERT_TYPE = "insert";
var EDIT_DATA_REMOVE_TYPE = "remove";
var VALIDATION_CANCELLED = "cancel";
var validationResultIsValid = function(result2) {
  return isDefined(result2) && result2 !== VALIDATION_CANCELLED;
};
var cellValueShouldBeValidated = function(value2, rowOptions) {
  return void 0 !== value2 || void 0 === value2 && rowOptions && !rowOptions.isNewRow;
};
var ValidatingController = class extends m_modules_default.Controller {
  constructor() {
    super(...arguments);
    this._isValidationInProgress = false;
    this._disableApplyValidationResults = false;
  }
  init() {
    this._editingController = this.getController("editing");
    this._editorFactoryController = this.getController("editorFactory");
    this._columnsController = this.getController("columns");
    this.createAction("onRowValidating");
    if (!this._validationState) {
      this.initValidationState();
    }
  }
  initValidationState() {
    this._validationState = [];
    this._validationStateCache = {};
  }
  _rowIsValidated(change) {
    var validationData = this._getValidationData(null === change || void 0 === change ? void 0 : change.key);
    return !!validationData && !!validationData.validated;
  }
  _getValidationData(key, create2) {
    var keyHash = getKeyHash(key);
    var isObjectKeyHash = isObject(keyHash);
    var validationData;
    if (isObjectKeyHash) {
      validationData = this._validationState.filter((data17) => equalByValue(data17.key, key))[0];
    } else {
      validationData = this._validationStateCache[keyHash];
    }
    if (!validationData && create2) {
      validationData = {
        key,
        isValid: true
      };
      this._validationState.push(validationData);
      if (!isObjectKeyHash) {
        this._validationStateCache[keyHash] = validationData;
      }
    }
    return validationData;
  }
  _getBrokenRules(validationData, validationResults) {
    var brokenRules;
    if (validationResults) {
      brokenRules = validationResults.brokenRules || validationResults.brokenRule && [validationResults.brokenRule];
    } else {
      brokenRules = validationData.brokenRules || [];
    }
    return brokenRules;
  }
  _rowValidating(validationData, validationResults) {
    var deferred = new Deferred();
    var change = this._editingController.getChangeByKey(null === validationData || void 0 === validationData ? void 0 : validationData.key);
    var brokenRules = this._getBrokenRules(validationData, validationResults);
    var isValid = validationResults ? validationResults.isValid : validationData.isValid;
    var parameters = {
      brokenRules,
      isValid,
      key: change.key,
      newData: change.data,
      oldData: this._editingController._getOldData(change.key),
      promise: null,
      errorText: this.getHiddenValidatorsErrorText(brokenRules)
    };
    this.executeAction("onRowValidating", parameters);
    when(fromPromise(parameters.promise)).always(() => {
      validationData.isValid = parameters.isValid;
      validationData.errorText = parameters.errorText;
      deferred.resolve(parameters);
    });
    return deferred.promise();
  }
  getHiddenValidatorsErrorText(brokenRules) {
    var brokenRulesMessages = [];
    each(brokenRules, (_, brokenRule) => {
      var {
        column
      } = brokenRule;
      var isGroupExpandColumn = column && void 0 !== column.groupIndex && !column.showWhenGrouped;
      var isVisibleColumn = column && column.visible;
      if (!brokenRule.validator.$element().parent().length && (!isVisibleColumn || isGroupExpandColumn)) {
        brokenRulesMessages.push(brokenRule.message);
      }
    });
    return brokenRulesMessages.join(", ");
  }
  validate(isFull) {
    var isValid = true;
    var editingController = this._editingController;
    var deferred = new Deferred();
    var completeList = [];
    var editMode = editingController.getEditMode();
    isFull = isFull || editMode === EDIT_MODE_ROW2;
    if (this._isValidationInProgress) {
      return deferred.resolve(false).promise();
    }
    this._isValidationInProgress = true;
    if (isFull) {
      editingController.addDeferred(deferred);
      var changes = editingController.getChanges();
      each(changes, (index, _ref) => {
        var {
          type: type2,
          key
        } = _ref;
        if ("remove" !== type2) {
          var validationData = this._getValidationData(key, true);
          var validationResult2 = this.validateGroup(validationData);
          completeList.push(validationResult2);
          validationResult2.done((validationResult3) => {
            validationData.validated = true;
            isValid = isValid && validationResult3.isValid;
          });
        }
      });
    } else if (this._currentCellValidator) {
      var validationResult = this.validateGroup(this._currentCellValidator._findGroup());
      completeList.push(validationResult);
      validationResult.done((validationResult2) => {
        isValid = validationResult2.isValid;
      });
    }
    when(...completeList).done(() => {
      this._isValidationInProgress = false;
      deferred.resolve(isValid);
    });
    return deferred.promise();
  }
  validateGroup(validationData) {
    var result2 = new Deferred();
    var validateGroup = validationData && validation_engine_default.getGroupConfig(validationData);
    var validationResult;
    if (null === validateGroup || void 0 === validateGroup ? void 0 : validateGroup.validators.length) {
      this.resetRowValidationResults(validationData);
      validationResult = validation_engine_default.validateGroup(validationData);
    }
    when((null === validationResult || void 0 === validationResult ? void 0 : validationResult.complete) || validationResult).done((validationResult2) => {
      when(this._rowValidating(validationData, validationResult2)).done(result2.resolve);
    });
    return result2.promise();
  }
  isRowDataModified(change) {
    return !isEmptyObject(change.data);
  }
  updateValidationState(change) {
    var editMode = this._editingController.getEditMode();
    var {
      key
    } = change;
    var validationData = this._getValidationData(key, true);
    if (!FORM_BASED_MODES.includes(editMode)) {
      if (change.type === EDIT_DATA_INSERT_TYPE && !this.isRowDataModified(change)) {
        validationData.isValid = true;
        return;
      }
      this.setDisableApplyValidationResults(true);
      var groupConfig = validation_engine_default.getGroupConfig(validationData);
      if (groupConfig) {
        var validationResult = validation_engine_default.validateGroup(validationData);
        when(validationResult.complete || validationResult).done((validationResult2) => {
          validationData.isValid = validationResult2.isValid;
          validationData.brokenRules = validationResult2.brokenRules;
        });
      } else if (!validationData.brokenRules || !validationData.brokenRules.length) {
        validationData.isValid = true;
      }
      this.setDisableApplyValidationResults(false);
    } else {
      validationData.isValid = true;
    }
  }
  setValidator(validator) {
    this._currentCellValidator = validator;
  }
  renderCellPendingIndicator($container) {
    var $indicator = $container.find(".".concat(PENDING_INDICATOR_CLASS));
    if (!$indicator.length) {
      var $indicatorContainer = $container;
      $indicator = renderer_default("<div>").appendTo($indicatorContainer).addClass(PENDING_INDICATOR_CLASS);
      this._createComponent($indicator, load_indicator_default);
      $container.addClass(VALIDATION_PENDING_CLASS);
    }
  }
  disposeCellPendingIndicator($container) {
    var $indicator = $container.find(".".concat(PENDING_INDICATOR_CLASS));
    if ($indicator.length) {
      var indicator = load_indicator_default.getInstance($indicator);
      if (indicator) {
        indicator.dispose();
        indicator.$element().remove();
      }
      $container.removeClass(VALIDATION_PENDING_CLASS);
    }
  }
  validationStatusChanged(result2) {
    var {
      validator
    } = result2;
    var validationGroup = validator.option("validationGroup");
    var {
      column
    } = validator.option("dataGetter")();
    this.updateCellValidationResult({
      rowKey: validationGroup.key,
      columnIndex: column.index,
      validationResult: result2
    });
  }
  validatorInitialized(arg) {
    arg.component.on("validating", this.validationStatusChanged.bind(this));
    arg.component.on("validated", this.validationStatusChanged.bind(this));
  }
  validatorDisposing(arg) {
    var validator = arg.component;
    var validationGroup = validator.option("validationGroup");
    var {
      column
    } = validator.option("dataGetter")();
    var result2 = this.getCellValidationResult({
      rowKey: null === validationGroup || void 0 === validationGroup ? void 0 : validationGroup.key,
      columnIndex: column.index
    });
    if (validationResultIsValid(result2) && result2.status === VALIDATION_STATUS.pending) {
      this.cancelCellValidationResult({
        change: validationGroup,
        columnIndex: column.index
      });
    }
  }
  applyValidationResult($container, result2) {
    var {
      validator
    } = result2;
    var validationGroup = validator.option("validationGroup");
    var {
      column
    } = validator.option("dataGetter")();
    result2.brokenRules && result2.brokenRules.forEach((rule) => {
      rule.columnIndex = column.index;
      rule.column = column;
    });
    if ($container) {
      var validationResult = this.getCellValidationResult({
        rowKey: validationGroup.key,
        columnIndex: column.index
      });
      var requestIsDisabled = validationResultIsValid(validationResult) && validationResult.disabledPendingId === result2.id;
      if (this._disableApplyValidationResults || requestIsDisabled) {
        return;
      }
      if (result2.status === VALIDATION_STATUS.invalid) {
        var $focus = $container.find(":focus");
        if (!focused($focus)) {
          events_engine_default.trigger($focus, "focus");
          events_engine_default.trigger($focus, pointer_default.down);
        }
      }
      var editor = !column.editCellTemplate && this._editorFactoryController.getEditorInstance($container);
      if (result2.status === VALIDATION_STATUS.pending) {
        if (editor) {
          editor.option("validationStatus", VALIDATION_STATUS.pending);
        } else {
          this.renderCellPendingIndicator($container);
        }
      } else if (editor) {
        editor.option("validationStatus", VALIDATION_STATUS.valid);
      } else {
        this.disposeCellPendingIndicator($container);
      }
      $container.toggleClass(this.addWidgetPrefix(INVALIDATE_CLASS), result2.status === VALIDATION_STATUS.invalid);
    }
  }
  _syncInternalEditingData(parameters) {
    var _a;
    var editingController = this._editingController;
    var change = editingController.getChangeByKey(parameters.key);
    var oldDataFromState = editingController._getOldData(parameters.key);
    var oldData = null === (_a = parameters.row) || void 0 === _a ? void 0 : _a.oldData;
    if (change && oldData && !oldDataFromState) {
      editingController._addInternalData({
        key: parameters.key,
        oldData
      });
    }
  }
  createValidator(parameters, $container) {
    var _a, _b, _c;
    var editingController = this._editingController;
    var {
      column
    } = parameters;
    var {
      showEditorAlways
    } = column;
    if (isDefined(column.command) || !column.validationRules || !Array.isArray(column.validationRules) || !column.validationRules.length) {
      return;
    }
    var editIndex = editingController.getIndexByKey(parameters.key, editingController.getChanges());
    var needCreateValidator = editIndex > -1;
    if (!needCreateValidator) {
      if (!showEditorAlways) {
        var visibleColumns = (null === (_a = this._columnsController) || void 0 === _a ? void 0 : _a.getVisibleColumns()) || [];
        showEditorAlways = visibleColumns.some((column2) => column2.showEditorAlways);
      }
      var isEditRow = equalByValue(this.option("editing.editRowKey"), parameters.key);
      var isCellOrBatchEditingAllowed = editingController.isCellOrBatchEditMode() && editingController.allowUpdating({
        row: parameters.row
      });
      needCreateValidator = isEditRow || isCellOrBatchEditingAllowed && showEditorAlways;
      if (isCellOrBatchEditingAllowed && showEditorAlways) {
        editingController._addInternalData({
          key: parameters.key,
          oldData: null !== (_c = null === (_b = parameters.row) || void 0 === _b ? void 0 : _b.oldData) && void 0 !== _c ? _c : parameters.data
        });
      }
    }
    if (needCreateValidator) {
      if ($container && !$container.length) {
        ui_errors_default.log("E1050");
        return;
      }
      this._syncInternalEditingData(parameters);
      var validationData = this._getValidationData(parameters.key, true);
      var getValue = () => {
        var change = editingController.getChangeByKey(null === validationData || void 0 === validationData ? void 0 : validationData.key);
        var value2 = column.calculateCellValue((null === change || void 0 === change ? void 0 : change.data) || {});
        return void 0 !== value2 ? value2 : parameters.value;
      };
      var useDefaultValidator = $container && $container.hasClass("dx-widget");
      $container && $container.addClass(this.addWidgetPrefix(VALIDATOR_CLASS3));
      var validator = new validator_default($container || renderer_default("<div>"), {
        name: column.caption,
        validationRules: extend(true, [], column.validationRules),
        validationGroup: validationData,
        adapter: useDefaultValidator ? null : {
          getValue,
          applyValidationResults: (result2) => {
            this.applyValidationResult($container, result2);
          }
        },
        dataGetter() {
          var key = null === validationData || void 0 === validationData ? void 0 : validationData.key;
          var change = editingController.getChangeByKey(key);
          var oldData = editingController._getOldData(key);
          return {
            data: createObjectWithChanges(oldData, null === change || void 0 === change ? void 0 : change.data),
            column
          };
        },
        onInitialized: this.validatorInitialized.bind(this),
        onDisposing: this.validatorDisposing.bind(this)
      });
      if (useDefaultValidator) {
        var adapter = validator.option("adapter");
        if (adapter) {
          var originBypass = adapter.bypass;
          var defaultAdapterBypass = () => parameters.row.isNewRow && !this._isValidationInProgress && !editingController.isCellModified(parameters);
          adapter.getValue = getValue;
          adapter.validationRequestsCallbacks = [];
          adapter.bypass = () => originBypass.call(adapter) || defaultAdapterBypass();
        }
      }
      return validator;
    }
    return;
  }
  setDisableApplyValidationResults(flag) {
    this._disableApplyValidationResults = flag;
  }
  getDisableApplyValidationResults() {
    return this._disableApplyValidationResults;
  }
  isCurrentValidatorProcessing(_ref2) {
    var {
      rowKey,
      columnIndex
    } = _ref2;
    return this._currentCellValidator && equalByValue(this._currentCellValidator.option("validationGroup").key, rowKey) && this._currentCellValidator.option("dataGetter")().column.index === columnIndex;
  }
  validateCell(validator) {
    var cellParams = {
      rowKey: validator.option("validationGroup").key,
      columnIndex: validator.option("dataGetter")().column.index,
      validationResult: null
    };
    var validationResult = this.getCellValidationResult(cellParams);
    var stateRestored = validationResultIsValid(validationResult);
    var adapter = validator.option("adapter");
    if (!stateRestored) {
      validationResult = validator.validate();
    } else {
      var currentCellValue = adapter.getValue();
      if (!equalByValue(currentCellValue, validationResult.value)) {
        validationResult = validator.validate();
      }
    }
    var deferred = new Deferred();
    if (stateRestored && validationResult.status === VALIDATION_STATUS.pending) {
      this.updateCellValidationResult(cellParams);
      adapter.applyValidationResults(validationResult);
    }
    when(validationResult.complete || validationResult).done((validationResult2) => {
      stateRestored && adapter.applyValidationResults(validationResult2);
      deferred.resolve(validationResult2);
    });
    return deferred.promise();
  }
  updateCellValidationResult(_ref3) {
    var {
      rowKey,
      columnIndex,
      validationResult
    } = _ref3;
    var validationData = this._getValidationData(rowKey);
    if (!validationData) {
      return;
    }
    if (!validationData.validationResults) {
      validationData.validationResults = {};
    }
    var result2;
    if (validationResult) {
      result2 = extend({}, validationResult);
      validationData.validationResults[columnIndex] = result2;
      if (validationResult.status === VALIDATION_STATUS.pending) {
        if (this._editingController.getEditMode() === EDIT_MODE_CELL2) {
          result2.deferred = new Deferred();
          result2.complete.always(() => {
            result2.deferred.resolve();
          });
          this._editingController.addDeferred(result2.deferred);
        }
        if (this._disableApplyValidationResults) {
          result2.disabledPendingId = validationResult.id;
          return;
        }
      }
    } else {
      result2 = validationData.validationResults[columnIndex];
    }
    if (result2 && result2.disabledPendingId) {
      delete result2.disabledPendingId;
    }
  }
  getCellValidationResult(_ref4) {
    var {
      rowKey,
      columnIndex
    } = _ref4;
    var _a;
    var validationData = this._getValidationData(rowKey, true);
    return null === (_a = null === validationData || void 0 === validationData ? void 0 : validationData.validationResults) || void 0 === _a ? void 0 : _a[columnIndex];
  }
  removeCellValidationResult(_ref5) {
    var {
      change,
      columnIndex
    } = _ref5;
    var validationData = this._getValidationData(null === change || void 0 === change ? void 0 : change.key);
    if (validationData && validationData.validationResults) {
      this.cancelCellValidationResult({
        change,
        columnIndex
      });
      delete validationData.validationResults[columnIndex];
    }
  }
  cancelCellValidationResult(_ref6) {
    var {
      change,
      columnIndex
    } = _ref6;
    var validationData = this._getValidationData(change.key);
    if (change && validationData.validationResults) {
      var result2 = validationData.validationResults[columnIndex];
      if (result2) {
        result2.deferred && result2.deferred.reject(VALIDATION_CANCELLED);
        validationData.validationResults[columnIndex] = VALIDATION_CANCELLED;
      }
    }
  }
  resetRowValidationResults(validationData) {
    if (validationData) {
      validationData.validationResults && delete validationData.validationResults;
      delete validationData.validated;
    }
  }
  isInvalidCell(_ref7) {
    var {
      rowKey,
      columnIndex
    } = _ref7;
    var result2 = this.getCellValidationResult({
      rowKey,
      columnIndex
    });
    return validationResultIsValid(result2) && result2.status === VALIDATION_STATUS.invalid;
  }
  getCellValidator(_ref8) {
    var {
      rowKey,
      columnIndex
    } = _ref8;
    var validationData = this._getValidationData(rowKey);
    var groupConfig = validationData && validation_engine_default.getGroupConfig(validationData);
    var validators = groupConfig && groupConfig.validators;
    return validators && validators.filter((v) => {
      var {
        column
      } = v.option("dataGetter")();
      return column ? column.index === columnIndex : false;
    })[0];
  }
  setCellValidationStatus(cellOptions) {
    var validationResult = this.getCellValidationResult({
      rowKey: cellOptions.key,
      columnIndex: cellOptions.column.index
    });
    if (isDefined(validationResult)) {
      cellOptions.validationStatus = validationResult !== VALIDATION_CANCELLED ? validationResult.status : VALIDATION_CANCELLED;
    } else {
      delete cellOptions.validationStatus;
    }
  }
};
var validatingEditingExtender = (Base) => class extends Base {
  processDataItemTreeListHack(item) {
    super.processDataItem.apply(this, arguments);
  }
  processItemsTreeListHack(items, e) {
    return super.processItems.apply(this, arguments);
  }
  _addChange(changeParams) {
    var change = super._addChange.apply(this, arguments);
    if (change && changeParams.type !== EDIT_DATA_REMOVE_TYPE) {
      this._validatingController.updateValidationState(change);
    }
    return change;
  }
  _handleChangesChange(args) {
    super._handleChangesChange.apply(this, arguments);
    args.value.forEach((change) => {
      if (void 0 === this._validatingController._getValidationData(change.key)) {
        this._validatingController.updateValidationState(change);
      }
    });
  }
  _updateRowAndPageIndices() {
    var that = this;
    var startInsertIndex = that.getView("rowsView").getTopVisibleItemIndex();
    var rowIndex = startInsertIndex;
    each(that.getChanges(), (_, _ref9) => {
      var {
        key,
        type: type2
      } = _ref9;
      var validationData = this._validatingController._getValidationData(key);
      if (validationData && !validationData.isValid && validationData.pageIndex !== that._pageIndex) {
        validationData.pageIndex = that._pageIndex;
        if (type2 === EDIT_DATA_INSERT_TYPE) {
          validationData.rowIndex = startInsertIndex;
        } else {
          validationData.rowIndex = rowIndex;
        }
        rowIndex++;
      }
    });
  }
  _getValidationGroupsInForm(detailOptions) {
    var validationData = this._validatingController._getValidationData(detailOptions.key, true);
    return {
      validationGroup: validationData
    };
  }
  _validateEditFormAfterUpdate(row, isCustomSetCellValue) {
    if (isCustomSetCellValue && this._editForm) {
      this._editForm.validate();
    }
    super._validateEditFormAfterUpdate.apply(this, arguments);
  }
  _prepareEditCell(params) {
    var isNotCanceled = super._prepareEditCell.apply(this, arguments);
    if (isNotCanceled && params.column.showEditorAlways) {
      this._validatingController.updateValidationState({
        key: params.key
      });
    }
    return isNotCanceled;
  }
  processItems(items, changeType) {
    var changes = this.getChanges();
    var getIndexByChange = (change, items2) => {
      var index = -1;
      var isInsert = change.type === EDIT_DATA_INSERT_TYPE;
      var {
        key
      } = change;
      each(items2, (i, item) => {
        if (equalByValue(key, isInsert ? item.key : this._dataController.keyOf(item))) {
          index = i;
          return false;
        }
        return;
      });
      return index;
    };
    items = super.processItems(items, changeType);
    var itemsCount = items.length;
    if (this.getEditMode() === EDIT_MODE_BATCH2 && "prepend" !== changeType && "append" !== changeType) {
      changes.forEach((change) => {
        var {
          key
        } = change;
        var validationData = this._validatingController._getValidationData(key);
        if (validationData && change.type && validationData.pageIndex === this._pageIndex && (null === change || void 0 === change ? void 0 : change.pageIndex) !== this._pageIndex) {
          !function(change2, validationData2) {
            var data17 = {
              key: change2.key
            };
            var index = getIndexByChange(change2, items);
            if (index >= 0) {
              return;
            }
            validationData2.rowIndex = validationData2.rowIndex > itemsCount ? validationData2.rowIndex % itemsCount : validationData2.rowIndex;
            var {
              rowIndex
            } = validationData2;
            data17[INSERT_INDEX2] = 1;
            items.splice(rowIndex, 0, data17);
          }(change, validationData);
        }
      });
    }
    return items;
  }
  processDataItem(item) {
    var isInserted = item.data[INSERT_INDEX2];
    var key = isInserted ? item.data.key : item.key;
    var editMode = this.getEditMode();
    if (editMode === EDIT_MODE_BATCH2 && isInserted && key) {
      var changes = this.getChanges();
      var editIndex = m_utils_default.getIndexByKey(key, changes);
      if (editIndex >= 0) {
        var change = changes[editIndex];
        if (change.type !== EDIT_DATA_INSERT_TYPE) {
          var oldData = this._getOldData(change.key);
          item.data = extend(true, {}, oldData, change.data);
          item.key = key;
        }
      }
    }
    super.processDataItem.apply(this, arguments);
  }
  _createInvisibleColumnValidators(changes) {
    var that = this;
    var columns7 = this._columnsController.getColumns();
    var invisibleColumns = this._columnsController.getInvisibleColumns().filter((column) => !column.isBand);
    var groupColumns = this._columnsController.getGroupColumns().filter((column) => !column.showWhenGrouped && -1 === invisibleColumns.indexOf(column));
    var invisibleColumnValidators = [];
    var isCellVisible = (column, rowKey) => this._dataController.getRowIndexByKey(rowKey) >= 0 && invisibleColumns.indexOf(column) < 0;
    invisibleColumns.push(...groupColumns);
    if (!FORM_BASED_MODES.includes(this.getEditMode())) {
      each(columns7, (_, column) => {
        changes.forEach((change) => {
          var data17;
          if (isCellVisible(column, change.key)) {
            return;
          }
          if (change.type === EDIT_DATA_INSERT_TYPE) {
            data17 = change.data;
          } else if ("update" === change.type) {
            var oldData = that._getOldData(change.key);
            if (!isDefined(oldData)) {
              return;
            }
            data17 = createObjectWithChanges(oldData, change.data);
          }
          if (data17) {
            var validator = this._validatingController.createValidator({
              column,
              key: change.key,
              value: column.calculateCellValue(data17)
            });
            if (validator) {
              invisibleColumnValidators.push(validator);
            }
          }
        });
      });
    }
    return function() {
      invisibleColumnValidators.forEach((validator) => {
        validator.dispose();
      });
    };
  }
  _beforeSaveEditData(change, editIndex) {
    var result2 = super._beforeSaveEditData.apply(this, arguments);
    var validationData = this._validatingController._getValidationData(null === change || void 0 === change ? void 0 : change.key);
    if (change) {
      var isValid = "remove" === change.type || validationData.isValid;
      result2 = result2 || !isValid;
    } else {
      var disposeValidators = this._createInvisibleColumnValidators(this.getChanges());
      result2 = new Deferred();
      this.executeOperation(result2, () => {
        this._validatingController.validate(true).done((isFullValid) => {
          disposeValidators();
          this._updateRowAndPageIndices();
          switch (this.getEditMode()) {
            case EDIT_MODE_CELL2:
              if (!isFullValid) {
                this._focusEditingCell();
              }
              break;
            case EDIT_MODE_BATCH2:
              if (!isFullValid) {
                this._resetEditRowKey();
                this._resetEditColumnName();
                this._dataController.updateItems();
              }
          }
          result2.resolve(!isFullValid);
        });
      });
    }
    return result2.promise ? result2.promise() : result2;
  }
  _beforeEditCell(rowIndex, columnIndex, item) {
    var result2 = super._beforeEditCell(rowIndex, columnIndex, item);
    if (this.getEditMode() === EDIT_MODE_CELL2) {
      var $cell = this._rowsView._getCellElement(rowIndex, columnIndex);
      var validator = $cell && $cell.data("dxValidator");
      var rowOptions = $cell && $cell.closest(".dx-row").data("options");
      var value2 = validator && validator.option("adapter").getValue();
      if (validator && cellValueShouldBeValidated(value2, rowOptions)) {
        var deferred = new Deferred();
        when(this._validatingController.validateCell(validator), result2).done((validationResult, result3) => {
          deferred.resolve(validationResult.status === VALIDATION_STATUS.valid && result3);
        });
        return deferred.promise();
      }
      if (!validator) {
        return result2;
      }
    }
    return false;
  }
  _afterSaveEditData(cancel) {
    var $firstErrorRow;
    var isCellEditMode = this.getEditMode() === EDIT_MODE_CELL2;
    each(this.getChanges(), (_, change) => {
      var $errorRow = this._showErrorRow(change);
      $firstErrorRow = $firstErrorRow || $errorRow;
    });
    if ($firstErrorRow) {
      var scrollable = this._rowsView.getScrollable();
      if (scrollable) {
        scrollable.update();
        scrollable.scrollToElement($firstErrorRow);
      }
    }
    if (cancel && isCellEditMode && this._needUpdateRow()) {
      var editRowIndex = this.getEditRowIndex();
      this._dataController.updateItems({
        changeType: "update",
        rowIndices: [editRowIndex]
      });
      this._focusEditingCell();
    } else if (!cancel) {
      var shouldResetValidationState = true;
      if (isCellEditMode) {
        var columns7 = this._columnsController.getColumns();
        var columnsWithValidatingEditors = columns7.filter((col) => {
          var _a;
          return col.showEditorAlways && (null === (_a = col.validationRules) || void 0 === _a ? void 0 : _a.length) > 0;
        }).length > 0;
        shouldResetValidationState = !columnsWithValidatingEditors;
      }
      if (shouldResetValidationState) {
        this._validatingController.initValidationState();
      }
    }
  }
  _handleDataChanged(args) {
    var validationState = this._validatingController._validationState;
    if ("standard" === this.option("scrolling.mode")) {
      this.resetRowAndPageIndices();
    }
    if ("prepend" === args.changeType) {
      each(validationState, (_, validationData) => {
        validationData.rowIndex += args.items.length;
      });
    }
    super._handleDataChanged(args);
  }
  resetRowAndPageIndices() {
    var validationState = this._validatingController._validationState;
    each(validationState, (_, validationData) => {
      if (validationData.pageIndex !== this._pageIndex) {
        delete validationData.pageIndex;
        delete validationData.rowIndex;
      }
    });
  }
  _beforeCancelEditData() {
    this._validatingController.initValidationState();
    super._beforeCancelEditData();
  }
  _showErrorRow(change) {
    var $popupContent;
    var items = this._dataController.items();
    var rowIndex = this.getIndexByKey(change.key, items);
    var validationData = this._validatingController._getValidationData(change.key);
    if (!(null === validationData || void 0 === validationData ? void 0 : validationData.isValid) && (null === validationData || void 0 === validationData ? void 0 : validationData.errorText) && rowIndex >= 0) {
      $popupContent = this.getPopupContent();
      return this._errorHandlingController && this._errorHandlingController.renderErrorRow(null === validationData || void 0 === validationData ? void 0 : validationData.errorText, rowIndex, $popupContent);
    }
  }
  updateFieldValue(e) {
    var deferred = new Deferred();
    this._validatingController.removeCellValidationResult({
      change: this.getChangeByKey(e.key),
      columnIndex: e.column.index
    });
    super.updateFieldValue.apply(this, arguments).done(() => {
      var currentValidator = this._validatingController.getCellValidator({
        rowKey: e.key,
        columnIndex: e.column.index
      });
      when(currentValidator && this._validatingController.validateCell(currentValidator)).done((validationResult) => {
        this._editorFactoryController.refocus();
        deferred.resolve(validationResult);
      });
    });
    return deferred.promise();
  }
  highlightDataCell($cell, parameters) {
    super.highlightDataCell.apply(this, arguments);
    this._validatingController.setCellValidationStatus(parameters);
    var isEditableCell = !!parameters.setValue;
    var cellModified = this.isCellModified(parameters);
    var isValidated = isDefined(parameters.validationStatus);
    var needValidation = cellModified && parameters.column.setCellValue || isEditableCell && !cellModified && !(parameters.row.isNewRow || !isValidated);
    if (needValidation) {
      var validator = $cell.data("dxValidator");
      if (validator) {
        when(this._validatingController.validateCell(validator)).done(() => {
          this._validatingController.setCellValidationStatus(parameters);
        });
      }
    }
  }
  getChangeByKey(key) {
    var changes = this.getChanges();
    return changes[m_utils_default.getIndexByKey(key, changes)];
  }
  isCellModified(parameters) {
    var cellModified = super.isCellModified(parameters);
    var change = this.getChangeByKey(parameters.key);
    var isCellInvalid = !!parameters.row && this._validatingController.isInvalidCell({
      rowKey: parameters.key,
      columnIndex: parameters.column.index
    });
    return cellModified || this._validatingController._rowIsValidated(change) && isCellInvalid;
  }
};
var getWidthOfVisibleCells = function(that, element) {
  var rowIndex = renderer_default(element).closest("tr").index();
  var $cellElements = renderer_default(that._rowsView.getRowElement(rowIndex)).first().children().filter(":not(.dx-hidden-cell)");
  return that._rowsView._getWidths($cellElements).reduce((w1, w2) => w1 + w2, 0);
};
var getBoundaryNonFixedColumnsInfo = function(fixedColumns) {
  var firstNonFixedColumnIndex;
  var lastNonFixedColumnIndex;
  fixedColumns.some((column, index) => {
    if (column.command === COMMAND_TRANSPARENT) {
      firstNonFixedColumnIndex = 0 === index ? -1 : index;
      lastNonFixedColumnIndex = index === fixedColumns.length - 1 ? -1 : index + column.colspan - 1;
      return true;
    }
    return;
  });
  return {
    startColumnIndex: firstNonFixedColumnIndex,
    endColumnIndex: lastNonFixedColumnIndex
  };
};
var validatingEditorFactoryExtender = (Base) => class extends Base {
  _showRevertButton($container) {
    var _a;
    var $tooltipElement = null === (_a = this._revertTooltip) || void 0 === _a ? void 0 : _a.$element();
    if (!$container || !$container.length) {
      null === $tooltipElement || void 0 === $tooltipElement ? void 0 : $tooltipElement.remove();
      this._revertTooltip = void 0;
      return;
    }
    if ($container.find($tooltipElement).length) {
      return;
    }
    var $overlayContainer = $container.closest(".".concat(this.addWidgetPrefix(CONTENT_CLASS4))).parent();
    var revertTooltipClass = this.addWidgetPrefix(REVERT_TOOLTIP_CLASS);
    null === $tooltipElement || void 0 === $tooltipElement ? void 0 : $tooltipElement.remove();
    $tooltipElement = renderer_default("<div>").addClass(revertTooltipClass).appendTo($container);
    var tooltipOptions = {
      animation: null,
      visible: true,
      width: "auto",
      height: "auto",
      shading: false,
      container: $overlayContainer,
      propagateOutsideClick: true,
      hideOnOutsideClick: false,
      wrapperAttr: {
        class: revertTooltipClass
      },
      contentTemplate: () => {
        var $buttonElement = renderer_default("<div>").addClass(REVERT_BUTTON_CLASS);
        var buttonOptions = {
          icon: "revert",
          hint: this.option("editing.texts.validationCancelChanges"),
          elementAttr: {
            id: REVERT_BUTTON_ID,
            "aria-label": message_default.format("dxDataGrid-ariaRevertButton")
          },
          onClick: () => {
            this._editingController.cancelEditData();
          }
        };
        return new button_default($buttonElement, buttonOptions).$element();
      },
      position: {
        my: "left top",
        at: "right top",
        offset: "1 0",
        collision: "flip",
        boundaryOffset: "0 0",
        boundary: this._rowsView.element(),
        of: $container
      },
      onPositioned: this._positionedHandler.bind(this)
    };
    this._revertTooltip = new ui_overlay_default($tooltipElement, tooltipOptions);
  }
  _hideFixedGroupCell($cell, overlayOptions) {
    var $nextFixedRowElement;
    var $groupCellElement;
    var isFixedColumns = this._rowsView.isFixedColumns();
    var isFormOrPopupEditMode = this._editingController.isFormOrPopupEditMode();
    if (isFixedColumns && !isFormOrPopupEditMode) {
      var nextRowOptions = $cell.closest(".dx-row").next().data("options");
      if (nextRowOptions && "group" === nextRowOptions.rowType) {
        $nextFixedRowElement = renderer_default(this._rowsView.getRowElement(nextRowOptions.rowIndex)).last();
        $groupCellElement = $nextFixedRowElement.find(".".concat(GROUP_CELL_CLASS3));
        if ($groupCellElement.length && "hidden" !== $groupCellElement.get(0).style.visibility) {
          $groupCellElement.css("visibility", "hidden");
          overlayOptions.onDisposing = function() {
            $groupCellElement.css("visibility", "");
          };
        }
      }
    }
  }
  _positionedHandler(e, isOverlayVisible) {
    if (!e.component.__skipPositionProcessing) {
      var isRevertButton = renderer_default(e.element).hasClass(this.addWidgetPrefix(REVERT_TOOLTIP_CLASS));
      var needRepaint = !isRevertButton && this._rowsView.updateFreeSpaceRowHeight();
      var normalizedPosition = this._normalizeValidationMessagePositionAndMaxWidth(e, isRevertButton, isOverlayVisible);
      e.component.__skipPositionProcessing = !!(needRepaint || normalizedPosition);
      if (normalizedPosition) {
        e.component.option(normalizedPosition);
      } else if (needRepaint) {
        e.component.repaint();
      }
    }
  }
  _showValidationMessage($cell, messages, alignment) {
    var _a;
    var editorPopup = $cell.find(".dx-dropdowneditor-overlay").data("dxPopup");
    var isOverlayVisible = editorPopup && editorPopup.option("visible");
    var myPosition = isOverlayVisible ? "top right" : "top ".concat(alignment);
    var atPosition = isOverlayVisible ? "top left" : "bottom ".concat(alignment);
    var hasFixedColumns = (null === (_a = this._columnsController.getFixedColumns()) || void 0 === _a ? void 0 : _a.length) > 0;
    var $overlayContainer = hasFixedColumns ? this.getView("rowsView").element() : $cell.closest(".".concat(this.addWidgetPrefix(CONTENT_CLASS4)));
    var errorMessageText = "";
    messages && messages.forEach((message) => {
      errorMessageText += (errorMessageText.length ? "<br/>" : "") + encodeHtml(message);
    });
    var invalidMessageClass = this.addWidgetPrefix(WIDGET_INVALID_MESSAGE_CLASS);
    this._rowsView.element().find(".".concat(invalidMessageClass)).remove();
    var $overlayElement = renderer_default("<div>").addClass(INVALID_MESSAGE_CLASS).addClass(INVALID_MESSAGE_ALWAYS_CLASS).addClass(invalidMessageClass).html(errorMessageText).appendTo($cell);
    var overlayOptions = {
      container: $overlayContainer,
      shading: false,
      width: "auto",
      height: "auto",
      visible: true,
      animation: false,
      propagateOutsideClick: true,
      hideOnOutsideClick: false,
      wrapperAttr: {
        id: INVALID_MESSAGE_ID,
        class: "".concat(INVALID_MESSAGE_CLASS, " ").concat(INVALID_MESSAGE_ALWAYS_CLASS, " ").concat(invalidMessageClass)
      },
      position: {
        collision: "flip",
        boundary: this._rowsView.element(),
        boundaryOffset: "0 0",
        offset: {
          x: 0,
          y: !isOverlayVisible && browser_default.mozilla ? -1 : 0
        },
        my: myPosition,
        at: atPosition,
        of: $cell
      },
      onPositioned: (e) => {
        this._positionedHandler(e, isOverlayVisible);
        this._shiftValidationMessageIfNeed(e.component.$content(), $cell);
      }
    };
    this._hideFixedGroupCell($cell, overlayOptions);
    new ui_overlay_default($overlayElement, overlayOptions);
  }
  _hideValidationMessage() {
    var _a;
    var validationMessages = null === (_a = this._rowsView.element()) || void 0 === _a ? void 0 : _a.find(this._getValidationMessagesSelector());
    null === validationMessages || void 0 === validationMessages ? void 0 : validationMessages.remove();
  }
  _normalizeValidationMessagePositionAndMaxWidth(options2, isRevertButton, isOverlayVisible) {
    var fixedColumns = this._columnsController.getFixedColumns();
    if (!fixedColumns || !fixedColumns.length) {
      return;
    }
    var position2;
    var visibleTableWidth = !isRevertButton && getWidthOfVisibleCells(this, options2.element);
    var $overlayContentElement = options2.component.$content();
    var validationMessageWidth = getOuterWidth($overlayContentElement, true);
    var needMaxWidth = !isRevertButton && validationMessageWidth > visibleTableWidth;
    var columnIndex = this._rowsView.getCellIndex(renderer_default(options2.element).closest("td"));
    var boundaryNonFixedColumnsInfo = getBoundaryNonFixedColumnsInfo(fixedColumns);
    if (!isRevertButton && (columnIndex === boundaryNonFixedColumnsInfo.startColumnIndex || needMaxWidth)) {
      position2 = {
        collision: "none flip",
        my: "top left",
        at: isOverlayVisible ? "top right" : "bottom left"
      };
    } else if (columnIndex === boundaryNonFixedColumnsInfo.endColumnIndex) {
      position2 = {
        collision: "none flip",
        my: "top right",
        at: isRevertButton || isOverlayVisible ? "top left" : "bottom right"
      };
      if (isRevertButton) {
        position2.offset = "-1 0";
      }
    }
    return position2 && {
      position: position2,
      maxWidth: needMaxWidth ? visibleTableWidth - 2 : void 0
    };
  }
  _shiftValidationMessageIfNeed($content, $cell) {
    var $revertContent = this._revertTooltip && this._revertTooltip.$content();
    if (!$revertContent) {
      return;
    }
    var contentOffset = $content.offset();
    var revertContentOffset = $revertContent.offset();
    if (contentOffset.top === revertContentOffset.top && contentOffset.left + getWidth($content) > revertContentOffset.left) {
      var left = getWidth($revertContent) + PADDING_BETWEEN_TOOLTIPS;
      $content.css("left", revertContentOffset.left < $cell.offset().left ? -left : left);
    }
  }
  _getRevertTooltipsSelector() {
    var revertTooltipClass = this.addWidgetPrefix(REVERT_TOOLTIP_CLASS);
    return ".dx-editor-cell .".concat(revertTooltipClass);
  }
  _getValidationMessagesSelector() {
    var invalidMessageClass = this.addWidgetPrefix(WIDGET_INVALID_MESSAGE_CLASS);
    return ".dx-editor-cell .".concat(invalidMessageClass, ", .dx-cell-modified .").concat(invalidMessageClass);
  }
  loseFocus(skipValidator) {
    if (!skipValidator) {
      this._validatingController.setValidator(null);
    }
    super.loseFocus();
  }
  updateCellState($element, validationResult, isHideBorder) {
    var _a;
    var $focus = null === $element || void 0 === $element ? void 0 : $element.closest(this._getFocusCellSelector());
    var $cell = (null === $focus || void 0 === $focus ? void 0 : $focus.is("td")) ? $focus : null;
    var rowOptions = null === $focus || void 0 === $focus ? void 0 : $focus.closest(".dx-row").data("options");
    var change = rowOptions ? this._editingController.getChangeByKey(rowOptions.key) : null;
    var column = $cell && this._columnsController.getVisibleColumns()[$cell.index()];
    var isCellModified = void 0 !== (null === (_a = null === change || void 0 === change ? void 0 : change.data) || void 0 === _a ? void 0 : _a[null === column || void 0 === column ? void 0 : column.name]) && !this._editingController.isSaving();
    var validationDescriptionValues = [];
    if (this._editingController.getEditMode() === EDIT_MODE_CELL2) {
      if ((null === validationResult || void 0 === validationResult ? void 0 : validationResult.status) === VALIDATION_STATUS.invalid || isCellModified) {
        this._showRevertButton($focus);
        validationDescriptionValues.push(REVERT_BUTTON_ID);
      } else {
        this._revertTooltip && this._revertTooltip.$element().remove();
      }
    }
    var showValidationMessage = validationResult && validationResult.status === VALIDATION_STATUS.invalid;
    if (showValidationMessage && $cell && column && validationResult && validationResult.brokenRules) {
      var errorMessages = [];
      validationResult.brokenRules.forEach((rule) => {
        if (rule.message) {
          errorMessages.push(rule.message);
        }
      });
      if (errorMessages.length) {
        this._showValidationMessage($focus, errorMessages, column.alignment || "left");
        validationDescriptionValues.push(INVALID_MESSAGE_ID);
      }
    }
    this._updateAriaValidationAttributes($focus, validationDescriptionValues);
    !isHideBorder && this._rowsView.element() && this._rowsView.updateFreeSpaceRowHeight();
  }
  _updateAriaValidationAttributes($focus, inputDescriptionValues) {
    if (0 === inputDescriptionValues.length) {
      return;
    }
    var editMode = this._editingController.getEditMode();
    var shouldSetValidationAriaAttributes = [EDIT_MODE_CELL2, EDIT_MODE_BATCH2, EDIT_MODE_ROW2].includes(editMode);
    if (shouldSetValidationAriaAttributes) {
      var $focusElement = this._getCurrentFocusElement($focus);
      $focusElement.attr("aria-labelledby", inputDescriptionValues.join(" "));
      $focusElement.attr("aria-invalid", true);
    }
  }
  _getCurrentFocusElement($focus) {
    if (this._editingController.isEditing()) {
      return $focus.find(EDITORS_INPUT_SELECTOR).first();
    }
    return $focus;
  }
  focus($element, isHideBorder) {
    if (!arguments.length) {
      return super.focus();
    }
    this._hideValidationMessage();
    if ((null === $element || void 0 === $element ? void 0 : $element.hasClass("dx-row")) || (null === $element || void 0 === $element ? void 0 : $element.hasClass("dx-master-detail-cell"))) {
      return super.focus($element, isHideBorder);
    }
    var $focus = null === $element || void 0 === $element ? void 0 : $element.closest(this._getFocusCellSelector());
    var validator = $focus && ($focus.data("dxValidator") || $element.find(".".concat(this.addWidgetPrefix(VALIDATOR_CLASS3))).eq(0).data("dxValidator"));
    var rowOptions = $focus && $focus.closest(".dx-row").data("options");
    var change = rowOptions ? this._editingController.getChangeByKey(rowOptions.key) : null;
    var validationResult;
    if (validator) {
      this._validatingController.setValidator(validator);
      var value2 = validator.option("adapter").getValue();
      if (cellValueShouldBeValidated(value2, rowOptions) || this._validatingController._rowIsValidated(change)) {
        this._editingController.waitForDeferredOperations().done(() => {
          var isDetached = !this._rowsView.isElementInside($element);
          if (isDetached) {
            return;
          }
          when(this._validatingController.validateCell(validator)).done((result2) => {
            validationResult = result2;
            var {
              column
            } = validationResult.validator.option("dataGetter")();
            if (change && column && !this._validatingController.isCurrentValidatorProcessing({
              rowKey: change.key,
              columnIndex: column.index
            })) {
              return;
            }
            if (!isFluent(current()) && validationResult.status === VALIDATION_STATUS.invalid) {
              isHideBorder = true;
            }
            this.updateCellState($element, validationResult, isHideBorder);
            super.focus.call(this, $element, isHideBorder);
          });
        });
        return super.focus($element, isHideBorder);
      }
    }
    this.updateCellState($element, validationResult, isHideBorder);
    return super.focus($element, isHideBorder);
  }
  getEditorInstance($container) {
    var $editor = $container.find(".dx-texteditor").eq(0);
    return m_utils_default.getWidgetInstance($editor);
  }
};
var validatingDataControllerExtender = (Base) => class extends Base {
  _getValidationStatus(validationResult) {
    var validationStatus = validationResultIsValid(validationResult) ? validationResult.status : validationResult;
    return validationStatus || VALIDATION_STATUS.valid;
  }
  _isCellChanged(oldRow, newRow, visibleRowIndex, columnIndex, isLiveUpdate) {
    var _a, _b;
    var cell = null === (_a = oldRow.cells) || void 0 === _a ? void 0 : _a[columnIndex];
    var oldValidationStatus = this._getValidationStatus({
      status: null === cell || void 0 === cell ? void 0 : cell.validationStatus
    });
    var validationResult = this._validatingController.getCellValidationResult({
      rowKey: oldRow.key,
      columnIndex
    });
    var validationData = this._validatingController._getValidationData(oldRow.key);
    var newValidationStatus = this._getValidationStatus(validationResult);
    var rowIsModified = JSON.stringify(newRow.modifiedValues) !== JSON.stringify(oldRow.modifiedValues);
    var validationStatusChanged = oldValidationStatus !== newValidationStatus && rowIsModified;
    var cellIsMarkedAsInvalid = renderer_default(null === cell || void 0 === cell ? void 0 : cell.cellElement).hasClass(this.addWidgetPrefix(INVALIDATE_CLASS));
    var hasValidationRules = null === (_b = null === cell || void 0 === cell ? void 0 : cell.column.validationRules) || void 0 === _b ? void 0 : _b.length;
    var rowEditStateChanged = oldRow.isEditing !== newRow.isEditing && hasValidationRules;
    var cellValidationStateChanged = validationStatusChanged || validationData.isValid && cellIsMarkedAsInvalid;
    if (rowEditStateChanged || cellValidationStateChanged) {
      return true;
    }
    return super._isCellChanged.apply(this, arguments);
  }
};
var validatingRowsViewExtender = (Base) => class extends Base {
  updateFreeSpaceRowHeight($table) {
    var $rowElements;
    var $freeSpaceRowElement;
    var $freeSpaceRowElements;
    var $element = this.element();
    var $tooltipContent = $element && $element.find(".".concat(this.addWidgetPrefix(WIDGET_INVALID_MESSAGE_CLASS), " .dx-overlay-content"));
    super.updateFreeSpaceRowHeight($table);
    if ($tooltipContent && $tooltipContent.length) {
      $rowElements = this._getRowElements();
      $freeSpaceRowElements = this._getFreeSpaceRowElements($table);
      $freeSpaceRowElement = $freeSpaceRowElements.first();
      if ($freeSpaceRowElement && 1 === $rowElements.length && (!$freeSpaceRowElement.is(":visible") || getOuterHeight($tooltipContent) > getOuterHeight($freeSpaceRowElement))) {
        $freeSpaceRowElements.show();
        setHeight2($freeSpaceRowElements, getOuterHeight($tooltipContent));
        return true;
      }
    }
    return;
  }
  _formItemPrepared(cellOptions, $container) {
    super._formItemPrepared.apply(this, arguments);
    deferUpdate(() => {
      var $editor = $container.find(".dx-widget").first();
      var isEditorDisposed = $editor.length && !$editor.children().length;
      if (!isEditorDisposed) {
        this._validatingController.createValidator(cellOptions, $editor);
      }
    });
  }
  _cellPrepared($cell, parameters) {
    if (!this._editingController.isFormOrPopupEditMode()) {
      this._validatingController.createValidator(parameters, $cell);
    }
    super._cellPrepared.apply(this, arguments);
  }
  _restoreErrorRow(contentTable) {
    this._editingController && this._editingController.hasChanges() && this._getRowElements(contentTable).each((_, item) => {
      var rowOptions = renderer_default(item).data("options");
      if (rowOptions) {
        var change = this._editingController.getChangeByKey(rowOptions.key);
        change && this._editingController._showErrorRow(change);
      }
    });
  }
};
var validatingModule = {
  defaultOptions: () => ({
    editing: {
      texts: {
        validationCancelChanges: message_default.format("dxDataGrid-validationCancelChanges")
      }
    }
  }),
  controllers: {
    validating: ValidatingController
  },
  extenders: {
    controllers: {
      editing: validatingEditingExtender,
      editorFactory: validatingEditorFactoryExtender,
      data: validatingDataControllerExtender
    },
    views: {
      rowsView: validatingRowsViewExtender
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/validating.js
m_core_default.registerModule("validating", validatingModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/virtual_data_loader/m_virtual_data_loader.js
var LEGACY_SCROLLING_MODE = "scrolling.legacyMode";
var needTwoPagesLoading = (that) => that.option("scrolling.loadTwoPagesOnStart") || that._controller.isVirtual() || that._controller.getViewportItemIndex() > 0;
var getBeginPageIndex = (that) => that._cache.length ? that._cache[0].pageIndex : -1;
var getEndPageIndex = (that) => that._cache.length ? that._cache[that._cache.length - 1].pageIndex : -1;
var fireChanged = (that, changed, args) => {
  that._isChangedFiring = true;
  changed(args);
  that._isChangedFiring = false;
};
var processDelayChanged = (that, changed, args) => {
  if (that._isDelayChanged) {
    that._isDelayChanged = false;
    fireChanged(that, changed, args);
    return true;
  }
};
var getViewportPageCount = (that) => {
  var pageSize = that._dataOptions.pageSize();
  var preventPreload = that.option("scrolling.preventPreload");
  if (preventPreload) {
    return 0;
  }
  var realViewportSize = that._controller.viewportSize();
  if (that._controller.isVirtualMode() && that.option("scrolling.removeInvisiblePages")) {
    realViewportSize = 0;
    var viewportSize = that._controller.viewportSize() * that._controller.viewportItemSize();
    var offset = that._controller.getContentOffset();
    var position2 = that._controller.getViewportPosition();
    var virtualItemsCount = that._controller.virtualItemsCount();
    var totalItemsCount = that._dataOptions.totalItemsCount();
    for (var itemIndex = virtualItemsCount.begin; itemIndex < totalItemsCount; itemIndex++) {
      if (offset >= position2 + viewportSize) {
        break;
      }
      var itemSize = that._controller.getItemSizes()[itemIndex] || that._controller.viewportItemSize();
      offset += itemSize;
      if (offset >= position2) {
        realViewportSize++;
      }
    }
  }
  return pageSize && realViewportSize > 0 ? Math.ceil(realViewportSize / pageSize) : 1;
};
var getPreloadPageCount = (that, previous) => {
  var preloadEnabled = that.option("scrolling.preloadEnabled");
  var pageCount = getViewportPageCount(that);
  var isAppendMode3 = that._controller.isAppendMode();
  if (pageCount) {
    if (previous) {
      pageCount = preloadEnabled ? 1 : 0;
    } else {
      if (preloadEnabled) {
        pageCount++;
      }
      if (isAppendMode3 || !needTwoPagesLoading(that)) {
        pageCount--;
      }
    }
  }
  return pageCount;
};
var getPageIndexForLoad = (that) => {
  var result2 = -1;
  var beginPageIndex = getBeginPageIndex(that);
  var dataOptions = that._dataOptions;
  if (beginPageIndex < 0) {
    result2 = that._pageIndex;
  } else if (!that._cache[that._pageIndex - beginPageIndex]) {
    result2 = that._pageIndex;
  } else if (beginPageIndex >= 0 && that._controller.viewportSize() >= 0) {
    if (beginPageIndex > 0) {
      var needToLoadPageBeforeLast = getEndPageIndex(that) + 1 === dataOptions.pageCount() && that._cache.length < getPreloadPageCount(that) + 1;
      var needToLoadPrevPage = needToLoadPageBeforeLast || that._pageIndex === beginPageIndex && getPreloadPageCount(that, true);
      if (needToLoadPrevPage) {
        result2 = beginPageIndex - 1;
      }
    }
    if (result2 < 0) {
      var needToLoadNextPage = beginPageIndex + that._cache.length <= that._pageIndex + getPreloadPageCount(that);
      if (needToLoadNextPage) {
        result2 = beginPageIndex + that._cache.length;
      }
    }
  }
  if (that._loadingPageIndexes[result2]) {
    result2 = -1;
  }
  return result2;
};
var loadCore = (that, pageIndex) => {
  var dataOptions = that._dataOptions;
  if (pageIndex === that.pageIndex() || !dataOptions.isLoading() && pageIndex < dataOptions.pageCount() || !dataOptions.hasKnownLastPage() && pageIndex === dataOptions.pageCount()) {
    dataOptions.pageIndex(pageIndex);
    that._loadingPageIndexes[pageIndex] = true;
    return when(dataOptions.load()).always(() => {
      that._loadingPageIndexes[pageIndex] = false;
    });
  }
};
var processChanged = (that, changed, changeType, isDelayChanged, removeCacheItem) => {
  var dataOptions = that._dataOptions;
  var items = dataOptions.items().slice();
  var change = isObject(changeType) ? changeType : void 0;
  var isPrepend = "prepend" === changeType;
  var viewportItems = dataOptions.viewportItems();
  if (changeType && isString(changeType) && !that._isDelayChanged) {
    change = {
      changeType,
      items
    };
    if (removeCacheItem) {
      change.removeCount = removeCacheItem.itemsCount;
      if (change.removeCount && dataOptions.correctCount) {
        change.removeCount = dataOptions.correctCount(viewportItems, change.removeCount, isPrepend);
      }
    }
  }
  var removeItemCount = removeCacheItem ? removeCacheItem.itemsLength : 0;
  if (removeItemCount && dataOptions.correctCount) {
    removeItemCount = dataOptions.correctCount(viewportItems, removeItemCount, isPrepend);
  }
  if ("append" === changeType) {
    viewportItems.push.apply(viewportItems, items);
    if (removeCacheItem) {
      viewportItems.splice(0, removeItemCount);
    }
  } else if (isPrepend) {
    viewportItems.unshift.apply(viewportItems, items);
    if (removeCacheItem) {
      viewportItems.splice(-removeItemCount);
    }
  } else {
    that._dataOptions.viewportItems(items);
  }
  dataOptions.updateLoading();
  that._lastPageIndex = that.pageIndex();
  that._isDelayChanged = isDelayChanged;
  if (!isDelayChanged) {
    fireChanged(that, changed, change);
  }
};
var VirtualDataLoader = class {
  constructor(controller, dataOptions) {
    this._dataOptions = dataOptions;
    this._controller = controller;
    this._pageIndex = this._lastPageIndex = dataOptions.pageIndex();
    this._cache = [];
    this._loadingPageIndexes = {};
  }
  option() {
    return this._controller.option.apply(this._controller, arguments);
  }
  viewportItemIndexChanged(itemIndex) {
    var pageSize = this._dataOptions.pageSize();
    var pageCount = this._dataOptions.pageCount();
    var virtualMode = this._controller.isVirtualMode();
    var appendMode = this._controller.isAppendMode();
    var totalItemsCount = this._dataOptions.totalItemsCount();
    var newPageIndex;
    if (pageSize && (virtualMode || appendMode) && totalItemsCount >= 0) {
      var viewportSize = this._controller.viewportSize();
      if (viewportSize && itemIndex + viewportSize >= totalItemsCount && !this._controller.isVirtual()) {
        if (this._dataOptions.hasKnownLastPage()) {
          newPageIndex = pageCount - 1;
          var lastPageSize = totalItemsCount % pageSize;
          if (newPageIndex > 0 && lastPageSize > 0 && lastPageSize < viewportSize) {
            newPageIndex--;
          }
        } else {
          newPageIndex = pageCount;
        }
      } else {
        newPageIndex = Math.floor(itemIndex / pageSize);
        var maxPageIndex = pageCount - 1;
        newPageIndex = Math.max(newPageIndex, 0);
        newPageIndex = Math.min(newPageIndex, maxPageIndex);
      }
      this.pageIndex(newPageIndex);
      return this.load();
    }
  }
  pageIndex(pageIndex) {
    var isVirtualMode3 = this._controller.isVirtualMode();
    var isAppendMode3 = this._controller.isAppendMode();
    if (false !== this.option(LEGACY_SCROLLING_MODE) && (isVirtualMode3 || isAppendMode3)) {
      if (void 0 !== pageIndex) {
        this._pageIndex = pageIndex;
      }
      return this._pageIndex;
    }
    return this._dataOptions.pageIndex(pageIndex);
  }
  beginPageIndex(defaultPageIndex) {
    var index = getBeginPageIndex(this);
    if (index < 0) {
      index = void 0 !== defaultPageIndex ? defaultPageIndex : this.pageIndex();
    }
    return index;
  }
  endPageIndex() {
    var endPageIndex = getEndPageIndex(this);
    return endPageIndex > 0 ? endPageIndex : this._lastPageIndex;
  }
  pageSize() {
    return this._dataOptions.pageSize();
  }
  load() {
    var dataOptions = this._dataOptions;
    var result2;
    var isVirtualMode3 = this._controller.isVirtualMode();
    var isAppendMode3 = this._controller.isAppendMode();
    if (false !== this.option(LEGACY_SCROLLING_MODE) && (isVirtualMode3 || isAppendMode3)) {
      var pageIndexForLoad = getPageIndexForLoad(this);
      if (pageIndexForLoad >= 0) {
        var loadResult = loadCore(this, pageIndexForLoad);
        if (loadResult) {
          result2 = new Deferred();
          loadResult.done(() => {
            var delayDeferred = this._delayDeferred;
            if (delayDeferred) {
              delayDeferred.done(result2.resolve).fail(result2.reject);
            } else {
              result2.resolve();
            }
          }).fail(result2.reject);
          dataOptions.updateLoading();
        }
      }
    } else {
      result2 = dataOptions.load();
    }
    if (!result2 && this._lastPageIndex !== this.pageIndex()) {
      this._dataOptions.onChanged({
        changeType: "pageIndex"
      });
    }
    return result2 || new Deferred().resolve();
  }
  loadIfNeed() {
    var isVirtualMode3 = this._controller.isVirtualMode();
    var isAppendMode3 = this._controller.isAppendMode();
    if ((isVirtualMode3 || isAppendMode3) && !this._dataOptions.isLoading() && (!this._isChangedFiring || this._controller.isVirtual())) {
      var position2 = this._controller.getViewportPosition();
      if (position2 > 0) {
        this._controller._setViewportPositionCore(position2);
      } else {
        this.load();
      }
    }
  }
  handleDataChanged(callBase, e) {
    var dataOptions = this._dataOptions;
    var lastCacheLength = this._cache.length;
    var changeType;
    var removeInvisiblePages;
    var isVirtualMode3 = this._controller.isVirtualMode();
    var isAppendMode3 = this._controller.isAppendMode();
    if (e && e.changes) {
      fireChanged(this, callBase, e);
    } else if (false !== this.option(LEGACY_SCROLLING_MODE) && (isVirtualMode3 || isAppendMode3)) {
      var beginPageIndex = getBeginPageIndex(this);
      if (beginPageIndex >= 0) {
        if (isVirtualMode3 && beginPageIndex + this._cache.length !== dataOptions.pageIndex() && beginPageIndex - 1 !== dataOptions.pageIndex()) {
          lastCacheLength = 0;
          this._cache = [];
        }
        if (isAppendMode3) {
          if (0 === dataOptions.pageIndex()) {
            this._cache = [];
          } else if (dataOptions.pageIndex() < getEndPageIndex(this)) {
            fireChanged(this, callBase, {
              changeType: "append",
              items: []
            });
            return;
          }
        }
      }
      var cacheItem = {
        pageIndex: dataOptions.pageIndex(),
        itemsLength: dataOptions.items(true).length,
        itemsCount: this.itemsCount(true)
      };
      if (this.option("scrolling.removeInvisiblePages") && isVirtualMode3) {
        removeInvisiblePages = this._cache.length > Math.max(getPreloadPageCount(this) + (this.option("scrolling.preloadEnabled") ? 1 : 0), 2);
      } else {
        processDelayChanged(this, callBase, {
          isDelayed: true
        });
      }
      var removeCacheItem;
      if (beginPageIndex === dataOptions.pageIndex() + 1) {
        if (removeInvisiblePages) {
          removeCacheItem = this._cache.pop();
        }
        changeType = "prepend";
        this._cache.unshift(cacheItem);
      } else {
        if (removeInvisiblePages) {
          removeCacheItem = this._cache.shift();
        }
        changeType = "append";
        this._cache.push(cacheItem);
      }
      var isDelayChanged = isVirtualMode3 && 0 === lastCacheLength && needTwoPagesLoading(this);
      processChanged(this, callBase, this._cache.length > 1 ? changeType : void 0, isDelayChanged, removeCacheItem);
      this._delayDeferred = this.load().done(() => {
        if (processDelayChanged(this, callBase)) {
          this.load();
        }
      });
    } else {
      processChanged(this, callBase, e);
    }
  }
  getDelayDeferred() {
    return this._delayDeferred;
  }
  itemsCount(isBase) {
    var count = 0;
    var isVirtualMode3 = this._controller.isVirtualMode();
    if (!isBase && isVirtualMode3) {
      this._cache.forEach((cacheItem) => {
        count += cacheItem.itemsCount;
      });
    } else {
      count = this._dataOptions.itemsCount();
    }
    return count;
  }
  virtualItemsCount() {
    var pageIndex = getBeginPageIndex(this);
    if (pageIndex < 0) {
      pageIndex = this._dataOptions.pageIndex();
    }
    var beginItemsCount = pageIndex * this._dataOptions.pageSize();
    var itemsCount = this._cache.length * this._dataOptions.pageSize();
    var endItemsCount = Math.max(0, this._dataOptions.totalItemsCount() - itemsCount - beginItemsCount);
    return {
      begin: beginItemsCount,
      end: endItemsCount
    };
  }
  reset() {
    this._loadingPageIndexes = {};
    this._cache = [];
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/virtual_scrolling/m_virtual_scrolling_core.js
var SCROLLING_MODE_INFINITE = "infinite";
var SCROLLING_MODE_VIRTUAL = "virtual";
var LEGACY_SCROLLING_MODE2 = "scrolling.legacyMode";
var isVirtualMode = (that) => that.option("scrolling.mode") === SCROLLING_MODE_VIRTUAL || that._isVirtual;
var isAppendMode = (that) => that.option("scrolling.mode") === SCROLLING_MODE_INFINITE && !that._isVirtual;
function subscribeToExternalScrollers($element, scrollChangedHandler, $targetElement) {
  var $scrollElement;
  var scrollableArray = [];
  var scrollToArray = [];
  var disposeArray = [];
  $targetElement = $targetElement || $element;
  function getElementOffset(scrollable) {
    var $scrollableElement = scrollable.element ? scrollable.$element() : scrollable;
    var scrollableOffset = position_default.offset($scrollableElement);
    if (!scrollableOffset) {
      return $element.offset().top;
    }
    return scrollable.scrollTop() - (scrollableOffset.top - $element.offset().top);
  }
  var widgetScrollStrategy = {
    on(scrollable, eventName, handler) {
      scrollable.on("scroll", handler);
    },
    off(scrollable, eventName, handler) {
      scrollable.off("scroll", handler);
    }
  };
  function subscribeToScrollEvents($scrollElement2) {
    var isDocument = "#document" === $scrollElement2.get(0).nodeName;
    var isElement = $scrollElement2.get(0).nodeType === getWindow().Node.ELEMENT_NODE;
    var scrollable = $scrollElement2.data("dxScrollable");
    var eventsStrategy = widgetScrollStrategy;
    if (!scrollable) {
      scrollable = isDocument && renderer_default(getWindow()) || isElement && "auto" === $scrollElement2.css("overflowY") && $scrollElement2;
      eventsStrategy = events_engine_default;
      if (!scrollable) {
        return;
      }
    }
    var handler = /* @__PURE__ */ function(scrollable2) {
      return function() {
        var scrollTop = scrollable2.scrollTop() - getElementOffset(scrollable2);
        scrollTop = scrollTop > 0 ? scrollTop : 0;
        scrollChangedHandler(scrollTop);
      };
    }(scrollable);
    eventsStrategy.on(scrollable, "scroll", handler);
    scrollToArray.push((pos) => {
      var topOffset = getElementOffset(scrollable);
      var scrollMethod = scrollable.scrollTo ? "scrollTo" : "scrollTop";
      if (pos - topOffset >= 0) {
        scrollable[scrollMethod](pos + topOffset);
      }
    });
    scrollableArray.push(scrollable);
    disposeArray.push(() => {
      eventsStrategy.off(scrollable, "scroll", handler);
    });
  }
  var getScrollElementParent = ($element2) => {
    var _a;
    return renderer_default(null !== (_a = $element2.get(0).parentNode) && void 0 !== _a ? _a : $element2.get(0).host);
  };
  for ($scrollElement = $targetElement.parent(); $scrollElement.length; $scrollElement = getScrollElementParent($scrollElement)) {
    subscribeToScrollEvents($scrollElement);
  }
  return {
    scrollTo(pos) {
      each(scrollToArray, (_, scrollTo) => {
        scrollTo(pos);
      });
    },
    dispose() {
      each(disposeArray, (_, dispose) => {
        dispose();
      });
    }
  };
}
var VirtualScrollController = class {
  constructor(component, dataOptions, isVirtual) {
    this._dataOptions = dataOptions;
    this.component = component;
    this._viewportSize = false === component.option(LEGACY_SCROLLING_MODE2) ? 15 : 0;
    this._viewportItemSize = 20;
    this._viewportItemIndex = 0;
    this._position = 0;
    this._isScrollingBack = false;
    this._contentSize = 0;
    this._itemSizes = {};
    this._sizeRatio = 1;
    this._isVirtual = isVirtual;
    this.positionChanged = callbacks_default();
    this._dataLoader = new VirtualDataLoader(this, this._dataOptions);
  }
  getItemSizes() {
    return this._itemSizes;
  }
  option(name2, value2) {
    return this.component.option.apply(this.component, arguments);
  }
  isVirtual() {
    return this._isVirtual;
  }
  virtualItemsCount() {
    if (isVirtualMode(this)) {
      var dataOptions = this._dataOptions;
      var totalItemsCount = dataOptions.totalItemsCount();
      if (false === this.option(LEGACY_SCROLLING_MODE2) && -1 !== totalItemsCount) {
        var viewportParams = this.getViewportParams();
        var loadedOffset = dataOptions.loadedOffset();
        var loadedItemCount = dataOptions.loadedItemCount();
        var skip = Math.max(viewportParams.skip, loadedOffset);
        var take = Math.min(viewportParams.take, loadedItemCount);
        var endItemsCount = Math.max(totalItemsCount - (skip + take), 0);
        return {
          begin: skip,
          end: endItemsCount
        };
      }
      return this._dataLoader.virtualItemsCount.apply(this._dataLoader, arguments);
    }
    return;
  }
  getScrollingTimeout() {
    var _a;
    var renderAsync = this.option("scrolling.renderAsync");
    var scrollingTimeout = 0;
    if (!isDefined(renderAsync)) {
      scrollingTimeout = Math.min(this.option("scrolling.timeout") || 0, this._dataOptions.changingDuration());
      if (scrollingTimeout < this.option("scrolling.renderingThreshold")) {
        scrollingTimeout = this.option("scrolling.minTimeout") || 0;
      }
    } else if (renderAsync) {
      scrollingTimeout = null !== (_a = this.option("scrolling.timeout")) && void 0 !== _a ? _a : 0;
    }
    return scrollingTimeout;
  }
  setViewportPosition(position2) {
    var result2 = new Deferred();
    var scrollingTimeout = this.getScrollingTimeout();
    clearTimeout(this._scrollTimeoutID);
    if (scrollingTimeout > 0) {
      this._scrollTimeoutID = setTimeout(() => {
        this._setViewportPositionCore(position2);
        result2.resolve();
      }, scrollingTimeout);
    } else {
      this._setViewportPositionCore(position2);
      result2.resolve();
    }
    return result2.promise();
  }
  getViewportPosition() {
    return this._position;
  }
  getItemIndexByPosition(position2, viewportItemIndex, height) {
    position2 = null !== position2 && void 0 !== position2 ? position2 : this._position;
    var defaultItemSize = this.getItemSize();
    var offset = 0;
    var itemOffset = 0;
    var itemOffsetsWithSize = Object.keys(this._itemSizes).concat(-1);
    for (var i = 0; i < itemOffsetsWithSize.length && offset < position2; i++) {
      var itemOffsetWithSize = parseInt(itemOffsetsWithSize[i]);
      var itemOffsetDiff = (position2 - offset) / defaultItemSize;
      if (itemOffsetWithSize < 0 || itemOffset + itemOffsetDiff < itemOffsetWithSize) {
        itemOffset += itemOffsetDiff;
        if (this._sizeRatio < 1 && isDefined(viewportItemIndex)) {
          itemOffset = viewportItemIndex + height / this._viewportItemSize;
        }
        break;
      } else {
        itemOffsetDiff = itemOffsetWithSize - itemOffset;
        offset += itemOffsetDiff * defaultItemSize;
        itemOffset += itemOffsetDiff;
      }
      var itemSize = this._itemSizes[itemOffsetWithSize];
      offset += itemSize;
      itemOffset += offset < position2 ? 1 : (position2 - offset + itemSize) / itemSize;
    }
    return Math.round(50 * itemOffset) / 50;
  }
  isScrollingBack() {
    return this._isScrollingBack;
  }
  _setViewportPositionCore(position2) {
    var prevPosition = this._position || 0;
    this._position = position2;
    if (prevPosition !== this._position) {
      this._isScrollingBack = this._position < prevPosition;
    }
    var itemIndex = this.getItemIndexByPosition();
    var result2 = this.setViewportItemIndex(itemIndex);
    this.positionChanged.fire();
    return result2;
  }
  setContentItemSizes(sizes) {
    var virtualItemsCount = this.virtualItemsCount();
    this._contentSize = sizes.reduce((a, b) => a + b, 0);
    if (virtualItemsCount) {
      sizes.forEach((size, index) => {
        this._itemSizes[virtualItemsCount.begin + index] = size;
      });
      var virtualContentSize = (virtualItemsCount.begin + virtualItemsCount.end + this.itemsCount()) * this._viewportItemSize;
      var contentHeightLimit = m_utils_default.getContentHeightLimit(browser_default);
      if (virtualContentSize > contentHeightLimit) {
        this._sizeRatio = contentHeightLimit / virtualContentSize;
      } else {
        this._sizeRatio = 1;
      }
    }
  }
  getItemSize() {
    return this._viewportItemSize * this._sizeRatio;
  }
  getItemOffset(itemIndex, isEnd) {
    var virtualItemsCount = this.virtualItemsCount();
    var itemCount = itemIndex;
    if (!virtualItemsCount) {
      return 0;
    }
    var offset = 0;
    var totalItemsCount = this._dataOptions.totalItemsCount();
    Object.keys(this._itemSizes).forEach((currentItemIndex) => {
      if (!itemCount) {
        return;
      }
      if (isEnd ? currentItemIndex >= totalItemsCount - itemIndex : currentItemIndex < itemIndex) {
        offset += this._itemSizes[currentItemIndex];
        itemCount--;
      }
    });
    return Math.floor(offset + itemCount * this._viewportItemSize * this._sizeRatio);
  }
  getContentOffset(type2) {
    var isEnd = "end" === type2;
    var virtualItemsCount = this.virtualItemsCount();
    if (!virtualItemsCount) {
      return 0;
    }
    return this.getItemOffset(isEnd ? virtualItemsCount.end : virtualItemsCount.begin, isEnd);
  }
  getVirtualContentSize() {
    var virtualItemsCount = this.virtualItemsCount();
    return virtualItemsCount ? this.getContentOffset("begin") + this.getContentOffset("end") + this._contentSize : 0;
  }
  getViewportItemIndex() {
    return this._viewportItemIndex;
  }
  setViewportItemIndex(itemIndex) {
    this._viewportItemIndex = itemIndex;
    if (false === this.option(LEGACY_SCROLLING_MODE2)) {
      return;
    }
    return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader, arguments);
  }
  viewportItemSize(size) {
    if (void 0 !== size) {
      this._viewportItemSize = size;
    }
    return this._viewportItemSize;
  }
  viewportSize(size) {
    if (void 0 !== size) {
      this._viewportSize = size;
    }
    return this._viewportSize;
  }
  viewportHeight(height, scrollTop) {
    var position2 = null !== scrollTop && void 0 !== scrollTop ? scrollTop : this._position;
    var begin = this.getItemIndexByPosition(position2);
    var end = this.getItemIndexByPosition(position2 + height, begin, height);
    this.viewportSize(Math.ceil(end - begin));
    if (!isDefined(scrollTop) && this._viewportItemIndex !== begin) {
      this._setViewportPositionCore(position2);
    }
  }
  reset(isRefresh) {
    this._dataLoader.reset();
    if (!isRefresh) {
      this._itemSizes = {};
    }
  }
  subscribeToWindowScrollEvents($element) {
    this._windowScroll = this._windowScroll || subscribeToExternalScrollers($element, (scrollTop) => {
      if (this.viewportItemSize()) {
        this.setViewportPosition(scrollTop);
      }
    });
  }
  dispose() {
    clearTimeout(this._scrollTimeoutID);
    this._windowScroll && this._windowScroll.dispose();
    this._windowScroll = null;
  }
  scrollTo(pos) {
    this._windowScroll && this._windowScroll.scrollTo(pos);
  }
  isVirtualMode() {
    return isVirtualMode(this);
  }
  isAppendMode() {
    return isAppendMode(this);
  }
  getViewportParams() {
    var _a;
    var virtualMode = this.option("scrolling.mode") === SCROLLING_MODE_VIRTUAL;
    var totalItemsCount = this._dataOptions.totalItemsCount();
    var hasKnownLastPage = this._dataOptions.hasKnownLastPage();
    var topIndex = hasKnownLastPage && this._viewportItemIndex > totalItemsCount ? totalItemsCount : this._viewportItemIndex;
    var bottomIndex = this._viewportSize + topIndex;
    var maxGap = this.option("scrolling.prerenderedRowChunkSize") || 1;
    var isScrollingBack = this.isScrollingBack();
    var minGap = null !== (_a = this.option("scrolling.prerenderedRowCount")) && void 0 !== _a ? _a : 1;
    var topMinGap = isScrollingBack ? minGap : 0;
    var bottomMinGap = isScrollingBack ? 0 : minGap;
    var skip = Math.floor(Math.max(0, topIndex - topMinGap) / maxGap) * maxGap;
    var take = Math.ceil((bottomIndex + bottomMinGap - skip) / maxGap) * maxGap;
    if (virtualMode) {
      var remainedItems = Math.max(0, totalItemsCount - skip);
      take = Math.min(take, remainedItems);
    }
    return {
      skip,
      take
    };
  }
  itemsCount() {
    var result2 = 0;
    if (this.option(LEGACY_SCROLLING_MODE2)) {
      result2 = this._dataLoader.itemsCount.apply(this._dataLoader, arguments);
    } else {
      result2 = this._dataOptions.itemsCount();
    }
    return result2;
  }
  pageIndex() {
    return this._dataLoader.pageIndex(...arguments);
  }
  beginPageIndex() {
    return this._dataLoader.beginPageIndex(...arguments);
  }
  endPageIndex() {
    return this._dataLoader.endPageIndex(...arguments);
  }
  pageSize() {
    return this._dataLoader.pageSize(...arguments);
  }
  load() {
    return this._dataLoader.load(...arguments);
  }
  loadIfNeed() {
    return this._dataLoader.loadIfNeed(...arguments);
  }
  handleDataChanged() {
    return this._dataLoader.handleDataChanged(...arguments);
  }
  getDelayDeferred() {
    return this._dataLoader.getDelayDeferred();
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/virtual_scrolling/m_virtual_scrolling.js
var BOTTOM_LOAD_PANEL_CLASS = "bottom-load-panel";
var GROUP_SPACE_CLASS2 = "group-space";
var FREESPACE_CLASS = "dx-freespace-row";
var COLUMN_LINES_CLASS3 = "dx-column-lines";
var VIRTUAL_ROW_CLASS = "dx-virtual-row";
var ROW_INSERTED2 = "dx-row-inserted";
var SCROLLING_MODE_INFINITE2 = "infinite";
var SCROLLING_MODE_VIRTUAL2 = "virtual";
var LOAD_TIMEOUT = 300;
var LEGACY_SCROLLING_MODE3 = "scrolling.legacyMode";
var VISIBLE_PAGE_INDEX = "paging.pageIndex";
var PAGING_METHOD_NAMES = ["beginPageIndex", "endPageIndex", "pageIndex"];
var isVirtualMode2 = function(that) {
  return that.option("scrolling.mode") === SCROLLING_MODE_VIRTUAL2;
};
var isAppendMode2 = function(that) {
  return that.option("scrolling.mode") === SCROLLING_MODE_INFINITE2;
};
var isVirtualPaging = function(that) {
  return isVirtualMode2(that) || isAppendMode2(that);
};
var correctCount = function(items, count, fromEnd, isItemCountableFunc) {
  for (var i = 0; i < count + 1; i++) {
    var item = items[fromEnd ? items.length - 1 - i : i];
    if (item && !isItemCountableFunc(item, i === count, fromEnd)) {
      count++;
    }
  }
  return count;
};
var isItemCountableByDataSource = function(item, dataSource) {
  return "data" === item.rowType && !item.isNewRow || "group" === item.rowType && dataSource.isGroupItemCountable(item.data);
};
var updateItemIndices = function(items) {
  items.forEach((item, index) => {
    item.rowIndex = index;
  });
  return items;
};
var updateLoading = function(that) {
  var beginPageIndex = that._virtualScrollController.beginPageIndex(-1);
  if (isVirtualMode2(that)) {
    if (beginPageIndex < 0 || that.viewportSize() >= 0 && that.getViewportItemIndex() >= 0 && (beginPageIndex * that.pageSize() > that.getViewportItemIndex() || beginPageIndex * that.pageSize() + that.itemsCount() < that.getViewportItemIndex() + that.viewportSize()) && that._dataSource.isLoading()) {
      if (!that._isLoading) {
        that._isLoading = true;
        that.loadingChanged.fire(true);
      }
    } else if (that._isLoading) {
      that._isLoading = false;
      that.loadingChanged.fire(false);
    }
  }
};
var proxyDataSourceAdapterMethod = function(that, methodName, args) {
  if (false === that.option(LEGACY_SCROLLING_MODE3) && PAGING_METHOD_NAMES.includes(methodName)) {
    var dataSource = that._dataSource;
    return dataSource.pageIndex.apply(dataSource, args);
  }
  var virtualScrollController = that._virtualScrollController;
  return virtualScrollController[methodName].apply(virtualScrollController, args);
};
var removeEmptyRows = function($emptyRows, className) {
  var tBodies = $emptyRows.toArray().map((row) => renderer_default(row).parent(".".concat(className)).get(0)).filter((row) => row);
  if (tBodies.length) {
    $emptyRows = renderer_default(tBodies);
  }
  var rowCount = className === FREESPACE_CLASS ? $emptyRows.length - 1 : $emptyRows.length;
  for (var i = 0; i < rowCount; i++) {
    $emptyRows.eq(i).remove();
  }
};
var dataSourceAdapterExtender2 = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    this._items = [];
    this._totalCount = -1;
    this._isLoaded = true;
    this._loadPageCount = 1;
    this._virtualScrollController = new VirtualScrollController(this.component, this._getVirtualScrollDataOptions());
  }
  dispose() {
    this._virtualScrollController.dispose();
    super.dispose.apply(this, arguments);
  }
  _getVirtualScrollDataOptions() {
    var that = this;
    return {
      pageSize: () => that.pageSize(),
      totalItemsCount: () => that.totalItemsCount(),
      hasKnownLastPage: () => that.hasKnownLastPage(),
      pageIndex: (index) => that._dataSource.pageIndex(index),
      isLoading: () => that._dataSource.isLoading() && !that.isCustomLoading(),
      pageCount: () => that.pageCount(),
      load: () => that._dataSource.load(),
      updateLoading() {
        updateLoading(that);
      },
      itemsCount: () => that.itemsCount(true),
      items: () => that._dataSource.items(),
      viewportItems(items) {
        if (items) {
          that._items = items;
        }
        return that._items;
      },
      onChanged(e) {
        that.changed.fire(e);
      },
      changingDuration() {
        if (that.isLoading()) {
          return LOAD_TIMEOUT;
        }
        return that._renderTime || 0;
      }
    };
  }
  _handleLoadingChanged(isLoading) {
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      super._handleLoadingChanged.apply(this, arguments);
      return;
    }
    if (!isVirtualMode2(this) || this._isLoadingAll) {
      this._isLoading = isLoading;
      super._handleLoadingChanged.apply(this, arguments);
    }
    if (isLoading) {
      this._startLoadTime = /* @__PURE__ */ new Date();
    } else {
      this._startLoadTime = void 0;
    }
  }
  _handleLoadError() {
    if (false !== this.option(LEGACY_SCROLLING_MODE3)) {
      this._isLoading = false;
      this.loadingChanged.fire(false);
    }
    super._handleLoadError.apply(this, arguments);
  }
  _handleDataChanged(e) {
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      this._items = this._dataSource.items().slice();
      this._totalCount = this._dataSourceTotalCount(true);
      super._handleDataChanged.apply(this, arguments);
      return;
    }
    var callBase = super._handleDataChanged.bind(this);
    this._virtualScrollController.handleDataChanged(callBase, e);
  }
  _customizeRemoteOperations(options2, operationTypes) {
    var newMode = false === this.option(LEGACY_SCROLLING_MODE3);
    var renderAsync = this.option("scrolling.renderAsync");
    if (!isDefined(renderAsync)) {
      renderAsync = this._renderTime >= this.option("scrolling.renderingThreshold");
    }
    if ((isVirtualMode2(this) || isAppendMode2(this) && newMode) && !operationTypes.reload && (operationTypes.skip || newMode) && !renderAsync) {
      options2.delay = void 0;
    }
    super._customizeRemoteOperations.apply(this, arguments);
  }
  items() {
    return this._items;
  }
  _dataSourceTotalCount(isBase) {
    return false === this.option(LEGACY_SCROLLING_MODE3) && isVirtualMode2(this) && !isBase ? this._totalCount : super._dataSourceTotalCount();
  }
  itemsCount(isBase) {
    if (isBase || false === this.option(LEGACY_SCROLLING_MODE3)) {
      return super.itemsCount();
    }
    return this._virtualScrollController.itemsCount();
  }
  load(loadOptions) {
    if (false === this.option(LEGACY_SCROLLING_MODE3) || loadOptions) {
      return super.load(loadOptions);
    }
    return this._virtualScrollController.load();
  }
  isLoading() {
    return false === this.option(LEGACY_SCROLLING_MODE3) ? this._dataSource.isLoading() : this._isLoading;
  }
  isLoaded() {
    return this._dataSource.isLoaded() && this._isLoaded;
  }
  resetPagesCache(isLiveUpdate) {
    if (!isLiveUpdate) {
      this._virtualScrollController.reset(true);
    }
    super.resetPagesCache.apply(this, arguments);
  }
  _changeRowExpandCore() {
    var result2 = super._changeRowExpandCore.apply(this, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return result2;
    }
    this.resetPagesCache();
    updateLoading(this);
    return result2;
  }
  reload() {
    this._dataSource.pageIndex(this.pageIndex());
    var virtualScrollController = this._virtualScrollController;
    if (false !== this.option(LEGACY_SCROLLING_MODE3) && virtualScrollController) {
      var d = new Deferred();
      super.reload.apply(this, arguments).done((r) => {
        var delayDeferred = virtualScrollController.getDelayDeferred();
        if (delayDeferred) {
          delayDeferred.done(d.resolve).fail(d.reject);
        } else {
          d.resolve(r);
        }
      }).fail(d.reject);
      return d;
    }
    return super.reload.apply(this, arguments);
  }
  refresh(options2, operationTypes) {
    if (false !== this.option(LEGACY_SCROLLING_MODE3)) {
      var {
        storeLoadOptions
      } = options2;
      var dataSource = this._dataSource;
      if (operationTypes.reload) {
        this._virtualScrollController.reset();
        dataSource.items().length = 0;
        this._isLoaded = false;
        updateLoading(this);
        this._isLoaded = true;
        if (isAppendMode2(this)) {
          this.pageIndex(0);
          dataSource.pageIndex(0);
          storeLoadOptions.pageIndex = 0;
          options2.pageIndex = 0;
          storeLoadOptions.skip = 0;
        } else {
          dataSource.pageIndex(this.pageIndex());
          if (dataSource.paginate()) {
            options2.pageIndex = this.pageIndex();
            storeLoadOptions.skip = this.pageIndex() * this.pageSize();
          }
        }
      } else if (isAppendMode2(this) && storeLoadOptions.skip && this._totalCountCorrection < 0) {
        storeLoadOptions.skip += this._totalCountCorrection;
      }
    }
    return super.refresh.apply(this, arguments);
  }
  loadPageCount(count) {
    if (!isDefined(count)) {
      return this._loadPageCount;
    }
    this._loadPageCount = count;
  }
  _handleDataLoading(options2) {
    var loadPageCount = this.loadPageCount();
    var pageSize = this.pageSize();
    var newMode = false === this.option(LEGACY_SCROLLING_MODE3);
    var {
      storeLoadOptions
    } = options2;
    var takeIsDefined = isDefined(storeLoadOptions.take);
    options2.loadPageCount = loadPageCount;
    if (!options2.isCustomLoading && newMode && takeIsDefined && loadPageCount > 1 && pageSize > 0) {
      storeLoadOptions.take = loadPageCount * pageSize;
    }
    super._handleDataLoading.apply(this, arguments);
  }
  _loadPageSize() {
    return super._loadPageSize.apply(this, arguments) * this.loadPageCount();
  }
  beginPageIndex() {
    return proxyDataSourceAdapterMethod(this, "beginPageIndex", [...arguments]);
  }
  endPageIndex() {
    return proxyDataSourceAdapterMethod(this, "endPageIndex", [...arguments]);
  }
  pageIndex(pageIndex) {
    return proxyDataSourceAdapterMethod(this, "pageIndex", [...arguments]);
  }
  virtualItemsCount() {
    return proxyDataSourceAdapterMethod(this, "virtualItemsCount", [...arguments]);
  }
  getContentOffset() {
    return proxyDataSourceAdapterMethod(this, "getContentOffset", [...arguments]);
  }
  getVirtualContentSize() {
    return proxyDataSourceAdapterMethod(this, "getVirtualContentSize", [...arguments]);
  }
  setContentItemSizes() {
    return proxyDataSourceAdapterMethod(this, "setContentItemSizes", [...arguments]);
  }
  setViewportPosition() {
    return proxyDataSourceAdapterMethod(this, "setViewportPosition", [...arguments]);
  }
  getViewportItemIndex() {
    return proxyDataSourceAdapterMethod(this, "getViewportItemIndex", [...arguments]);
  }
  setViewportItemIndex(viewportItemIndex) {
    return proxyDataSourceAdapterMethod(this, "setViewportItemIndex", [...arguments]);
  }
  getItemIndexByPosition() {
    return proxyDataSourceAdapterMethod(this, "getItemIndexByPosition", [...arguments]);
  }
  viewportSize() {
    return proxyDataSourceAdapterMethod(this, "viewportSize", [...arguments]);
  }
  viewportItemSize() {
    return proxyDataSourceAdapterMethod(this, "viewportItemSize", [...arguments]);
  }
  getItemSize() {
    return proxyDataSourceAdapterMethod(this, "getItemSize", [...arguments]);
  }
  getItemSizes() {
    return proxyDataSourceAdapterMethod(this, "getItemSizes", [...arguments]);
  }
  loadIfNeed() {
    return proxyDataSourceAdapterMethod(this, "loadIfNeed", [...arguments]);
  }
};
var data7 = (Base) => class extends Base {
  dispose() {
    var rowsScrollController = this._rowsScrollController;
    rowsScrollController && rowsScrollController.dispose();
    super.dispose.apply(this, arguments);
  }
  _refreshDataSource() {
    var baseResult = super._refreshDataSource.apply(this, arguments) || new Deferred().resolve().promise();
    baseResult.done(this.initVirtualRows.bind(this));
    return baseResult;
  }
  _loadDataSource() {
    var _a;
    if (this._rowsScrollController && isVirtualPaging(this)) {
      var {
        loadPageCount
      } = isDefined(this._loadViewportParams) ? this.getLoadPageParams() : {
        loadPageCount: 0
      };
      loadPageCount >= 1 && (null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.loadPageCount(loadPageCount));
    }
    return super._loadDataSource.apply(this, arguments);
  }
  getRowPageSize() {
    var rowPageSize = this.option("scrolling.rowPageSize");
    var pageSize = this.pageSize();
    return pageSize && pageSize < rowPageSize ? pageSize : rowPageSize;
  }
  reload() {
    var rowsScrollController = this._rowsScrollController || this._dataSource;
    var itemIndex = rowsScrollController && rowsScrollController.getItemIndexByPosition();
    var result2 = super.reload.apply(this, arguments);
    return result2 && result2.done(() => {
      var _a, _b;
      if (isVirtualMode2(this) || m_utils_default.isVirtualRowRendering(this)) {
        var rowIndexOffset = this.getRowIndexOffset();
        var rowIndex = Math.floor(itemIndex) - rowIndexOffset;
        var {
          component
        } = this;
        var scrollable = component.getScrollable && component.getScrollable();
        var isSortingOperation = this.dataSource().operationTypes().sorting;
        if (scrollable && !isSortingOperation && rowIndex >= 0) {
          var rowElement = component.getRowElement(rowIndex);
          var $rowElement = rowElement && rowElement[0] && renderer_default(rowElement[0]);
          var top = $rowElement && (null === (_a = $rowElement.position()) || void 0 === _a ? void 0 : _a.top);
          var isChromeLatest = browser_default.chrome && Number(null !== (_b = browser_default.version) && void 0 !== _b ? _b : 0) >= 91;
          var allowedTopOffset = browser_default.mozilla || isChromeLatest ? 1 : 0;
          if (top && top > allowedTopOffset) {
            top = Math.round(top + getOuterHeight($rowElement) * (itemIndex % 1));
            scrollable.scrollTo({
              y: top
            });
          }
        }
      }
    });
  }
  initVirtualRows() {
    var virtualRowsRendering = m_utils_default.isVirtualRowRendering(this);
    this._allItems = null;
    this._loadViewportParams = null;
    if ("virtual" !== this.option("scrolling.mode") && !virtualRowsRendering || !virtualRowsRendering || false !== this.option(LEGACY_SCROLLING_MODE3) && !this.option("scrolling.rowPageSize")) {
      this._visibleItems = null;
      this._rowsScrollController = null;
      return;
    }
    var pageIndex = !isVirtualMode2(this) && this.pageIndex() >= this.pageCount() ? this.pageCount() - 1 : this.pageIndex();
    this._rowPageIndex = Math.ceil(pageIndex * this.pageSize() / this.getRowPageSize());
    this._visibleItems = false === this.option(LEGACY_SCROLLING_MODE3) ? null : [];
    this._viewportChanging = false;
    this._needUpdateViewportAfterLoading = false;
    if (!this._rowsScrollController) {
      this._rowsScrollController = new VirtualScrollController(this.component, this._getRowsScrollDataOptions(), true);
      this._rowsScrollController.positionChanged.add(() => {
        var _a;
        if (false === this.option(LEGACY_SCROLLING_MODE3)) {
          this._viewportChanging = true;
          this.loadViewport();
          this._viewportChanging = false;
          return;
        }
        null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex());
      });
    }
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      this._updateLoadViewportParams();
    }
    if (this.isLoaded() && false !== this.option(LEGACY_SCROLLING_MODE3)) {
      this._rowsScrollController.load();
    }
  }
  isViewportChanging() {
    return this._viewportChanging;
  }
  _getRowsScrollDataOptions() {
    var that = this;
    var isItemCountable = function(item) {
      return isItemCountableByDataSource(item, that._dataSource);
    };
    return {
      pageSize: () => that.getRowPageSize(),
      loadedOffset() {
        var _a;
        return isVirtualMode2(that) && (null === (_a = that._dataSource) || void 0 === _a ? void 0 : _a.lastLoadOptions().skip) || 0;
      },
      loadedItemCount: () => that._itemCount,
      totalItemsCount() {
        if (isVirtualPaging(that)) {
          return that.totalItemsCount();
        }
        return false === that.option(LEGACY_SCROLLING_MODE3) ? that._itemCount : that._items.filter(isItemCountable).length;
      },
      hasKnownLastPage: () => false === that.option(LEGACY_SCROLLING_MODE3) ? that.hasKnownLastPage() : true,
      pageIndex(index) {
        if (void 0 !== index) {
          that._rowPageIndex = index;
        }
        return that._rowPageIndex;
      },
      isLoading: () => that.isLoading(),
      pageCount() {
        var pageCount = Math.ceil(this.totalItemsCount() / this.pageSize());
        return pageCount || 1;
      },
      load() {
        if (that._rowsScrollController.pageIndex() >= this.pageCount()) {
          that._rowPageIndex = this.pageCount() - 1;
          that._rowsScrollController.pageIndex(that._rowPageIndex);
        }
        if (!this.items().length && this.totalItemsCount()) {
          return;
        }
        that._rowsScrollController.handleDataChanged((change) => {
          change = change || {};
          change.changeType = change.changeType || "refresh";
          change.items = change.items || that._visibleItems;
          that._visibleItems.forEach((item, index) => {
            item.rowIndex = index;
          });
          that._fireChanged(change);
        });
      },
      updateLoading() {
      },
      itemsCount() {
        return this.items(true).length;
      },
      correctCount: (items, count, fromEnd) => correctCount(items, count, fromEnd, (item, isNextAfterLast, fromEnd2) => {
        if (item.isNewRow) {
          return isNextAfterLast && !fromEnd2;
        }
        if (isNextAfterLast && fromEnd2) {
          return !item.isNewRow;
        }
        return isItemCountable(item);
      }),
      items(countableOnly) {
        var result2 = that._items;
        if (that.option(LEGACY_SCROLLING_MODE3)) {
          var dataSource = that.dataSource();
          var virtualItemsCount = null === dataSource || void 0 === dataSource ? void 0 : dataSource.virtualItemsCount();
          var begin = virtualItemsCount ? virtualItemsCount.begin : 0;
          var rowPageSize = that.getRowPageSize();
          var skip = that._rowPageIndex * rowPageSize - begin;
          var take = rowPageSize;
          if (skip < 0) {
            return [];
          }
          if (skip) {
            skip = this.correctCount(result2, skip);
            result2 = result2.slice(skip);
          }
          if (take) {
            take = this.correctCount(result2, take);
            result2 = result2.slice(0, take);
          }
        }
        return countableOnly ? result2.filter(isItemCountable) : result2;
      },
      viewportItems(items) {
        if (items && false !== that.option(LEGACY_SCROLLING_MODE3)) {
          that._visibleItems = items;
        }
        return that._visibleItems;
      },
      onChanged() {
      },
      changingDuration() {
        var dataSource = that.dataSource();
        if ((null === dataSource || void 0 === dataSource ? void 0 : dataSource.isLoading()) && false !== that.option(LEGACY_SCROLLING_MODE3)) {
          return LOAD_TIMEOUT;
        }
        return (null === dataSource || void 0 === dataSource ? void 0 : dataSource._renderTime) || 0;
      }
    };
  }
  _updateItemsCore(change) {
    var delta = this.getRowIndexDelta();
    super._updateItemsCore.apply(this, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3) && m_utils_default.isVirtualRowRendering(this)) {
      if ("update" === change.changeType && 0 === change.rowIndices.length && change.cancelEmptyChanges) {
        change.cancel = true;
      }
      return;
    }
    var rowsScrollController = this._rowsScrollController;
    if (rowsScrollController) {
      var visibleItems = this._visibleItems;
      var isRefresh = "refresh" === change.changeType || change.isLiveUpdate;
      if ("append" === change.changeType && change.items && !change.items.length) {
        return;
      }
      if (isRefresh || "append" === change.changeType || "prepend" === change.changeType) {
        change.cancel = true;
        isRefresh && rowsScrollController.reset(true);
        rowsScrollController.load();
      } else {
        if ("update" === change.changeType) {
          change.rowIndices.forEach((rowIndex, index) => {
            var changeType = change.changeTypes[index];
            var newItem = change.items[index];
            if ("update" === changeType) {
              visibleItems[rowIndex] = newItem;
            } else if ("insert" === changeType) {
              visibleItems.splice(rowIndex, 0, newItem);
            } else if ("remove" === changeType) {
              visibleItems.splice(rowIndex, 1);
            }
          });
        } else {
          visibleItems.forEach((item, index) => {
            visibleItems[index] = this._items[index + delta] || visibleItems[index];
          });
          change.items = visibleItems;
        }
        updateItemIndices(visibleItems);
      }
    }
  }
  _updateLoadViewportParams() {
    var viewportParams = this._rowsScrollController.getViewportParams();
    var pageSize = this.pageSize();
    if (viewportParams && !isVirtualPaging(this) && pageSize > 0) {
      var pageOffset = this.pageIndex() * pageSize;
      viewportParams.skip += pageOffset;
    }
    this._loadViewportParams = viewportParams;
  }
  _processItems() {
    var _a;
    var resultItems = super._processItems.apply(this, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      var dataSource = this._dataSource;
      var currentIndex = null !== (_a = null === dataSource || void 0 === dataSource ? void 0 : dataSource.lastLoadOptions().skip) && void 0 !== _a ? _a : 0;
      var prevCountable;
      var prevRowType;
      var isPrevRowNew;
      var wasCountableItem = false;
      var newRows = [];
      resultItems.forEach((item) => {
        var {
          rowType
        } = item;
        var itemCountable = isItemCountableByDataSource(item, dataSource);
        var isNextGroupItem = "group" === rowType && (prevCountable || itemCountable || "group" !== prevRowType && currentIndex > 0);
        var isNextDataItem = "data" === rowType && itemCountable && (prevCountable || "group" !== prevRowType);
        if (!item.isNewRow && isDefined(prevCountable)) {
          var isPrevNewRowFirst = isPrevRowNew && !wasCountableItem;
          if ((isNextGroupItem || isNextDataItem) && !isPrevNewRowFirst) {
            currentIndex++;
          }
        }
        if (isNextGroupItem || isNextDataItem) {
          wasCountableItem = true;
        }
        if (item.isNewRow) {
          newRows.push(item);
        } else {
          newRows.forEach((it) => {
            it.loadIndex = currentIndex;
          });
          newRows = [];
        }
        item.loadIndex = currentIndex;
        prevCountable = itemCountable;
        prevRowType = rowType;
        isPrevRowNew = item.isNewRow;
      });
      newRows.forEach((it) => {
        it.loadIndex = currentIndex;
      });
    }
    return resultItems;
  }
  _afterProcessItems(items) {
    this._itemCount = items.filter((item) => isItemCountableByDataSource(item, this._dataSource)).length;
    if (isDefined(this._loadViewportParams)) {
      this._updateLoadViewportParams();
      var result2 = items;
      this._allItems = items;
      if (items.length) {
        var {
          skipForCurrentPage
        } = this.getLoadPageParams(true);
        var skip = items[0].loadIndex + skipForCurrentPage;
        var {
          take
        } = this._loadViewportParams;
        result2 = items.filter((it) => {
          var isNewRowInEmptyData = it.isNewRow && it.loadIndex === skip && 0 === take;
          var isLoadIndexGreaterStart = it.loadIndex >= skip;
          var isLoadIndexLessEnd = it.loadIndex < skip + take || isNewRowInEmptyData;
          return isLoadIndexGreaterStart && isLoadIndexLessEnd;
        });
      }
      return result2;
    }
    return super._afterProcessItems.apply(this, arguments);
  }
  _applyChange(change) {
    var that = this;
    var {
      items
    } = change;
    var {
      changeType
    } = change;
    var {
      removeCount
    } = change;
    if (removeCount) {
      var fromEnd = "prepend" === changeType;
      removeCount = correctCount(that._items, removeCount, fromEnd, (item, isNextAfterLast) => "data" === item.rowType && !item.isNewRow || "group" === item.rowType && (that._dataSource.isGroupItemCountable(item.data) || isNextAfterLast));
      change.removeCount = removeCount;
    }
    switch (changeType) {
      case "prepend":
        that._items.unshift.apply(that._items, items);
        if (removeCount) {
          that._items.splice(-removeCount);
        }
        break;
      case "append":
        that._items.push.apply(that._items, items);
        if (removeCount) {
          that._items.splice(0, removeCount);
        }
        break;
      default:
        super._applyChange(change);
    }
  }
  items(allItems) {
    return allItems ? this._allItems || this._items : this._visibleItems || this._items;
  }
  getRowIndexDelta() {
    var delta = 0;
    if (this.option(LEGACY_SCROLLING_MODE3)) {
      var visibleItems = this._visibleItems;
      if (visibleItems && visibleItems[0]) {
        delta = this._items.indexOf(visibleItems[0]);
      }
    }
    return delta < 0 ? 0 : delta;
  }
  getRowIndexOffset(byLoadedRows, needGroupOffset) {
    var _a, _b;
    var offset = 0;
    var dataSource = this.dataSource();
    var rowsScrollController = this._rowsScrollController;
    var newMode = false === this.option(LEGACY_SCROLLING_MODE3);
    var virtualPaging = isVirtualPaging(this);
    if (rowsScrollController && !byLoadedRows) {
      if (newMode && isDefined(this._loadViewportParams)) {
        var {
          skipForCurrentPage,
          pageIndex
        } = this.getLoadPageParams(true);
        var items = this.items(true);
        offset = virtualPaging ? pageIndex * this.pageSize() : 0;
        if (items.length) {
          var firstLoadIndex = items[0].loadIndex;
          offset += items.filter((item) => item.loadIndex < firstLoadIndex + skipForCurrentPage).length;
        }
      } else {
        offset = rowsScrollController.beginPageIndex() * rowsScrollController.pageSize();
      }
    } else if (virtualPaging && newMode && dataSource) {
      var lastLoadOptions = dataSource.lastLoadOptions();
      if (needGroupOffset && (null === (_a = lastLoadOptions.skips) || void 0 === _a ? void 0 : _a.length)) {
        offset = lastLoadOptions.skips.reduce((res, skip) => res + skip, 0);
      } else {
        offset = null !== (_b = lastLoadOptions.skip) && void 0 !== _b ? _b : 0;
      }
    } else if (isVirtualMode2(this) && dataSource) {
      offset = dataSource.beginPageIndex() * dataSource.pageSize();
    }
    return offset;
  }
  getDataIndex() {
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return this.getRowIndexOffset(true, true);
    }
    return super.getDataIndex.apply(this, arguments);
  }
  viewportSize() {
    var rowsScrollController = this._rowsScrollController;
    var dataSource = this._dataSource;
    var result2 = null === rowsScrollController || void 0 === rowsScrollController ? void 0 : rowsScrollController.viewportSize.apply(rowsScrollController, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return result2;
    }
    return null === dataSource || void 0 === dataSource ? void 0 : dataSource.viewportSize.apply(dataSource, arguments);
  }
  viewportHeight(height, scrollTop) {
    var _a;
    null === (_a = this._rowsScrollController) || void 0 === _a ? void 0 : _a.viewportHeight(height, scrollTop);
  }
  viewportItemSize() {
    var rowsScrollController = this._rowsScrollController;
    var dataSource = this._dataSource;
    var result2 = null === rowsScrollController || void 0 === rowsScrollController ? void 0 : rowsScrollController.viewportItemSize.apply(rowsScrollController, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return result2;
    }
    return null === dataSource || void 0 === dataSource ? void 0 : dataSource.viewportItemSize.apply(dataSource, arguments);
  }
  setViewportPosition() {
    var rowsScrollController = this._rowsScrollController;
    var dataSource = this._dataSource;
    this._isPaging = false;
    if (rowsScrollController) {
      rowsScrollController.setViewportPosition.apply(rowsScrollController, arguments);
    } else {
      null === dataSource || void 0 === dataSource ? void 0 : dataSource.setViewportPosition.apply(dataSource, arguments);
    }
  }
  setContentItemSizes(sizes) {
    var rowsScrollController = this._rowsScrollController;
    var dataSource = this._dataSource;
    var result2 = null === rowsScrollController || void 0 === rowsScrollController ? void 0 : rowsScrollController.setContentItemSizes(sizes);
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return result2;
    }
    return null === dataSource || void 0 === dataSource ? void 0 : dataSource.setContentItemSizes(sizes);
  }
  getPreloadedRowCount() {
    var preloadCount = this.option("scrolling.preloadedRowCount");
    var preloadEnabled = this.option("scrolling.preloadEnabled");
    if (isDefined(preloadCount)) {
      return preloadCount;
    }
    var viewportSize = this.viewportSize();
    return preloadEnabled ? 2 * viewportSize : viewportSize;
  }
  getLoadPageParams(byLoadedPage) {
    var _a, _b;
    var pageSize = this.pageSize();
    var viewportParams = this._loadViewportParams;
    var lastLoadOptions = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.lastLoadOptions();
    var loadedPageIndex = (null === lastLoadOptions || void 0 === lastLoadOptions ? void 0 : lastLoadOptions.pageIndex) || 0;
    var loadedTake = (null === lastLoadOptions || void 0 === lastLoadOptions ? void 0 : lastLoadOptions.take) || 0;
    var isScrollingBack = this._rowsScrollController.isScrollingBack();
    var topPreloadCount = isScrollingBack ? this.getPreloadedRowCount() : 0;
    var bottomPreloadCount = isScrollingBack ? 0 : this.getPreloadedRowCount();
    var totalCountCorrection = (null === (_b = this._dataSource) || void 0 === _b ? void 0 : _b.totalCountCorrection()) || 0;
    var skipWithPreload = Math.max(0, viewportParams.skip - topPreloadCount);
    var pageIndex = byLoadedPage ? loadedPageIndex : Math.floor(pageSize ? skipWithPreload / pageSize : 0);
    var pageOffset = pageIndex * pageSize;
    var skipForCurrentPage = viewportParams.skip - pageOffset;
    var loadingTake = viewportParams.take + skipForCurrentPage + bottomPreloadCount - totalCountCorrection;
    var take = byLoadedPage ? loadedTake : loadingTake;
    var loadPageCount = Math.ceil(pageSize ? take / pageSize : 0);
    return {
      pageIndex,
      loadPageCount: Math.max(1, loadPageCount),
      skipForCurrentPage: Math.max(0, skipForCurrentPage)
    };
  }
  _updateVisiblePageIndex(currentPageIndex) {
    if (!this._rowsScrollController) {
      return;
    }
    if (isDefined(currentPageIndex)) {
      this._silentOption(VISIBLE_PAGE_INDEX, currentPageIndex);
      this.pageChanged.fire();
      return;
    }
    var viewPortItemIndex = this._rowsScrollController.getViewportItemIndex();
    var newPageIndex = Math.floor(viewPortItemIndex / this.pageSize());
    if (this.pageIndex() !== newPageIndex) {
      this._silentOption(VISIBLE_PAGE_INDEX, newPageIndex);
      this.updateItems({
        changeType: "pageIndex"
      });
    }
  }
  _getChangedLoadParams() {
    var loadedPageParams = this.getLoadPageParams(true);
    var {
      pageIndex,
      loadPageCount
    } = this.getLoadPageParams();
    var pageIndexIsValid = this._pageIndexIsValid(pageIndex);
    var result2 = null;
    if (!this._isLoading && pageIndexIsValid && (pageIndex !== loadedPageParams.pageIndex || loadPageCount !== loadedPageParams.loadPageCount)) {
      result2 = {
        pageIndex,
        loadPageCount
      };
    }
    return result2;
  }
  _pageIndexIsValid(pageIndex) {
    var result2 = true;
    if (isAppendMode2(this) && this.hasKnownLastPage() || isVirtualMode2(this)) {
      result2 = pageIndex * this.pageSize() < this.totalItemsCount();
    }
    return result2;
  }
  _loadItems(checkLoading, viewportIsFilled) {
    var _a, _b;
    var virtualPaging = isVirtualPaging(this);
    var dataSourceAdapter = this._dataSource;
    var changedParams = this._getChangedLoadParams();
    var currentLoadPageCount = null !== (_a = null === dataSourceAdapter || void 0 === dataSourceAdapter ? void 0 : dataSourceAdapter.loadPageCount()) && void 0 !== _a ? _a : 0;
    var lastRequiredItemCount = this.pageSize() * currentLoadPageCount;
    var currentPageIndex = null !== (_b = null === dataSourceAdapter || void 0 === dataSourceAdapter ? void 0 : dataSourceAdapter.pageIndex()) && void 0 !== _b ? _b : 0;
    var pageIndexNotChanged = (null === changedParams || void 0 === changedParams ? void 0 : changedParams.pageIndex) === currentPageIndex;
    var allLoadedInAppendMode = isAppendMode2(this) && this.totalItemsCount() < lastRequiredItemCount;
    var isRepaintMode = "repaint" === this.option("editing.refreshMode");
    var pageIndexIncreased = (null === changedParams || void 0 === changedParams ? void 0 : changedParams.pageIndex) > currentPageIndex;
    var result2 = false;
    if (!dataSourceAdapter || virtualPaging && checkLoading && (isRepaintMode && viewportIsFilled || pageIndexIncreased || pageIndexNotChanged && allLoadedInAppendMode)) {
      return result2;
    }
    if (virtualPaging && this._isLoading) {
      this._needUpdateViewportAfterLoading = true;
    }
    if (virtualPaging && changedParams) {
      result2 = true;
      dataSourceAdapter.pageIndex(changedParams.pageIndex);
      dataSourceAdapter.loadPageCount(changedParams.loadPageCount);
      this._repaintChangesOnly = true;
      this._needUpdateDimensions = true;
      var viewportChanging = this._viewportChanging;
      this.load().always(() => {
        this._repaintChangesOnly = void 0;
        this._needUpdateDimensions = void 0;
      }).done(() => {
        var isLastPage = this.pageCount() > 0 && this.pageIndex() === this.pageCount() - 1;
        (viewportChanging || isLastPage) && this._updateVisiblePageIndex();
        if (this._needUpdateViewportAfterLoading) {
          this._needUpdateViewportAfterLoading = false;
          this.loadViewport({
            checkLoadedParamsOnly: true
          });
        }
      });
    }
    return result2;
  }
  loadViewport(params) {
    var _a, _b, _c;
    var {
      checkLoadedParamsOnly,
      checkLoading,
      viewportIsNotFilled
    } = null !== params && void 0 !== params ? params : {};
    var virtualPaging = isVirtualPaging(this);
    if (virtualPaging || m_utils_default.isVirtualRowRendering(this)) {
      this._updateLoadViewportParams();
      var loadingItemsStarted = this._loadItems(checkLoading, !viewportIsNotFilled);
      var isCustomLoading = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.isCustomLoading();
      var isLoading = checkLoading && !isCustomLoading && this._isLoading;
      var needToUpdateItems = !(loadingItemsStarted || isLoading || checkLoadedParamsOnly);
      if (needToUpdateItems) {
        var noPendingChangesInEditing = !(null === (_c = null === (_b = this._editingController) || void 0 === _b ? void 0 : _b.getChanges()) || void 0 === _c ? void 0 : _c.length);
        this.updateItems({
          repaintChangesOnly: true,
          needUpdateDimensions: true,
          useProcessedItemsCache: noPendingChangesInEditing,
          cancelEmptyChanges: true
        });
      }
    }
  }
  updateViewport() {
    var _a, _b;
    var viewportSize = this.viewportSize();
    var itemCount = this.items().length;
    var viewportIsNotFilled = viewportSize > itemCount;
    var currentTake = null !== (_b = null === (_a = this._loadViewportParams) || void 0 === _a ? void 0 : _a.take) && void 0 !== _b ? _b : 0;
    var rowsScrollController = this._rowsScrollController;
    var newTake = null === rowsScrollController || void 0 === rowsScrollController ? void 0 : rowsScrollController.getViewportParams().take;
    (viewportIsNotFilled || currentTake < newTake) && !this._isPaging && itemCount && this.loadViewport({
      checkLoading: true,
      viewportIsNotFilled
    });
  }
  loadIfNeed() {
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      return;
    }
    var rowsScrollController = this._rowsScrollController;
    rowsScrollController && rowsScrollController.loadIfNeed();
    var dataSource = this._dataSource;
    return dataSource && dataSource.loadIfNeed();
  }
  getItemSize() {
    var rowsScrollController = this._rowsScrollController;
    if (rowsScrollController) {
      return rowsScrollController.getItemSize.apply(rowsScrollController, arguments);
    }
    var dataSource = this._dataSource;
    return dataSource && dataSource.getItemSize.apply(dataSource, arguments);
  }
  getItemSizes() {
    var rowsScrollController = this._rowsScrollController;
    if (rowsScrollController) {
      return rowsScrollController.getItemSizes.apply(rowsScrollController, arguments);
    }
    var dataSource = this._dataSource;
    return dataSource && dataSource.getItemSizes.apply(dataSource, arguments);
  }
  getContentOffset() {
    var rowsScrollController = this._rowsScrollController;
    if (rowsScrollController) {
      return rowsScrollController.getContentOffset.apply(rowsScrollController, arguments);
    }
    var dataSource = this._dataSource;
    return dataSource && dataSource.getContentOffset.apply(dataSource, arguments);
  }
  refresh(options2) {
    var dataSource = this._dataSource;
    if (dataSource && options2 && options2.load && isAppendMode2(this)) {
      dataSource.resetCurrentTotalCount();
    }
    return super.refresh.apply(this, arguments);
  }
  topItemIndex() {
    var _a;
    return null === (_a = this._loadViewportParams) || void 0 === _a ? void 0 : _a.skip;
  }
  bottomItemIndex() {
    var viewportParams = this._loadViewportParams;
    return viewportParams && viewportParams.skip + viewportParams.take;
  }
  virtualItemsCount() {
    var rowsScrollController = this._rowsScrollController;
    if (rowsScrollController) {
      return rowsScrollController.virtualItemsCount.apply(rowsScrollController, arguments);
    }
    var dataSource = this._dataSource;
    return null === dataSource || void 0 === dataSource ? void 0 : dataSource.virtualItemsCount.apply(dataSource, arguments);
  }
  pageIndex(pageIndex) {
    var _a;
    var virtualPaging = isVirtualPaging(this);
    var rowsScrollController = this._rowsScrollController;
    if (false === this.option(LEGACY_SCROLLING_MODE3) && virtualPaging && rowsScrollController) {
      if (void 0 === pageIndex) {
        return null !== (_a = this.option(VISIBLE_PAGE_INDEX)) && void 0 !== _a ? _a : 0;
      }
    }
    return super.pageIndex.apply(this, arguments);
  }
  _fireChanged(e) {
    super._fireChanged.apply(this, arguments);
    var {
      operationTypes
    } = e;
    if (false === this.option(LEGACY_SCROLLING_MODE3) && isVirtualPaging(this) && operationTypes) {
      var {
        fullReload,
        pageIndex
      } = operationTypes;
      if (e.isDataChanged && !fullReload && pageIndex) {
        this._updateVisiblePageIndex(this._dataSource.pageIndex());
      }
    }
  }
  _getPagingOptionValue(optionName) {
    var result2 = super._getPagingOptionValue.apply(this, arguments);
    if (false === this.option(LEGACY_SCROLLING_MODE3) && isVirtualPaging(this)) {
      result2 = this[optionName]();
    }
    return result2;
  }
  isEmpty() {
    return false === this.option(LEGACY_SCROLLING_MODE3) ? !this.items(true).length : super.isEmpty.apply(this, arguments);
  }
  isLastPageLoaded() {
    var result2 = false;
    if (false === this.option(LEGACY_SCROLLING_MODE3) && isVirtualPaging(this)) {
      var {
        pageIndex,
        loadPageCount
      } = this.getLoadPageParams(true);
      var pageCount = this.pageCount();
      result2 = pageIndex + loadPageCount >= pageCount;
    } else {
      result2 = super.isLastPageLoaded.apply(this, arguments);
    }
    return result2;
  }
  reset() {
    this._itemCount = 0;
    this._allItems = null;
    super.reset.apply(this, arguments);
  }
  _applyFilter() {
    var _a;
    null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.loadPageCount(1);
    return super._applyFilter.apply(this, arguments);
  }
  getVirtualContentSize() {
    var _a;
    return null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.getVirtualContentSize.apply(this._dataSource, arguments);
  }
  setViewportItemIndex() {
    var _a;
    return null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.setViewportItemIndex.apply(this._dataSource, arguments);
  }
};
var resizing3 = (Base) => class extends Base {
  dispose() {
    super.dispose.apply(this, arguments);
    clearTimeout(this._resizeTimeout);
  }
  _updateMasterDataGridCore(masterDataGrid) {
    return when(super._updateMasterDataGridCore.apply(this, arguments)).done((masterDataGridUpdated) => {
      var isNewVirtualMode = isVirtualMode2(masterDataGrid) && false === masterDataGrid.option(LEGACY_SCROLLING_MODE3);
      if (!masterDataGridUpdated && isNewVirtualMode) {
        var scrollable = masterDataGrid.getScrollable();
        if (scrollable) {
          masterDataGrid.updateDimensions();
        }
      }
    });
  }
  hasResizeTimeout() {
    return !!this._resizeTimeout;
  }
  resize() {
    var result2;
    if (isVirtualMode2(this) || m_utils_default.isVirtualRowRendering(this)) {
      clearTimeout(this._resizeTimeout);
      this._resizeTimeout = null;
      var diff = /* @__PURE__ */ new Date() - this._lastTime;
      var updateTimeout = this.option("scrolling.updateTimeout");
      if (this._lastTime && diff < updateTimeout) {
        result2 = new Deferred();
        this._resizeTimeout = setTimeout(() => {
          this._resizeTimeout = null;
          super.resize.apply(this).done(result2.resolve).fail(result2.reject);
          this._lastTime = /* @__PURE__ */ new Date();
        }, updateTimeout);
        this._lastTime = /* @__PURE__ */ new Date();
      } else {
        result2 = super.resize.apply(this);
        if (this._dataController.isLoaded()) {
          this._lastTime = /* @__PURE__ */ new Date();
        }
      }
    } else {
      result2 = super.resize.apply(this);
    }
    return result2;
  }
};
var rowsView7 = (Base) => class extends Base {
  init() {
    var _a;
    super.init();
    this._dataController.pageChanged.add((pageIndex) => {
      var scrollTop = this._scrollTop;
      this.scrollToPage(null !== pageIndex && void 0 !== pageIndex ? pageIndex : this._dataController.pageIndex());
      if (false === this.option(LEGACY_SCROLLING_MODE3) && this._scrollTop === scrollTop) {
        this._dataController.updateViewport();
      }
    });
    this._dataController.dataSourceChanged.add(() => {
      !this._scrollTop && this._scrollToCurrentPageOnResize();
    });
    null === (_a = this._dataController.stateLoaded) || void 0 === _a ? void 0 : _a.add(() => {
      this._scrollToCurrentPageOnResize();
    });
    this._scrollToCurrentPageOnResize();
  }
  dispose() {
    clearTimeout(this._scrollTimeoutID);
    super.dispose();
  }
  _scrollToCurrentPageOnResize() {
    if (this._dataController.pageIndex() > 0) {
      var resizeHandler = () => {
        this.resizeCompleted.remove(resizeHandler);
        this.scrollToPage(this._dataController.pageIndex());
      };
      this.resizeCompleted.add(resizeHandler);
    }
  }
  scrollToPage(pageIndex) {
    var pageSize = this._dataController ? this._dataController.pageSize() : 0;
    var scrollPosition;
    if (isVirtualMode2(this) || isAppendMode2(this)) {
      var itemSize = this._dataController.getItemSize();
      var itemSizes = this._dataController.getItemSizes();
      var itemIndex = pageIndex * pageSize;
      scrollPosition = itemIndex * itemSize;
      for (var index in itemSizes) {
        if (parseInt(index) < itemIndex) {
          scrollPosition += itemSizes[index] - itemSize;
        }
      }
    } else {
      scrollPosition = 0;
    }
    this.scrollTo({
      y: scrollPosition,
      x: this._scrollLeft
    });
  }
  renderDelayedTemplates() {
    this.waitAsyncTemplates().done(() => {
      this._updateContentPosition(true);
    });
    super.renderDelayedTemplates.apply(this, arguments);
  }
  _renderCore(e) {
    var startRenderTime = /* @__PURE__ */ new Date();
    var deferred = super._renderCore.apply(this, arguments);
    var dataSource = this._dataController._dataSource;
    if (dataSource && e) {
      var itemCount = e.items ? e.items.length : 20;
      var viewportSize = this._dataController.viewportSize() || 20;
      if (m_utils_default.isVirtualRowRendering(this) && itemCount > 0 && false !== this.option(LEGACY_SCROLLING_MODE3)) {
        dataSource._renderTime = (/* @__PURE__ */ new Date() - startRenderTime) * viewportSize / itemCount;
      } else {
        dataSource._renderTime = /* @__PURE__ */ new Date() - startRenderTime;
      }
    }
    return deferred;
  }
  _getRowElements(tableElement) {
    var $rows = super._getRowElements(tableElement);
    return $rows && $rows.not(".".concat(VIRTUAL_ROW_CLASS));
  }
  _removeRowsElements(contentTable, removeCount, changeType) {
    var rowElements = this._getRowElements(contentTable).toArray();
    if ("append" === changeType) {
      rowElements = rowElements.slice(0, removeCount);
    } else {
      rowElements = rowElements.slice(-removeCount);
    }
    rowElements.map((rowElement) => {
      var $rowElement = renderer_default(rowElement);
      this._errorHandlingController && this._errorHandlingController.removeErrorRow($rowElement.next());
      $rowElement.remove();
    });
  }
  _updateContent(tableElement, change) {
    var $freeSpaceRowElements;
    var contentElement = this._findContentElement();
    var changeType = change && change.changeType;
    var d = Deferred();
    var contentTable = contentElement.children().first();
    if ("append" === changeType || "prepend" === changeType) {
      this.waitAsyncTemplates().done(() => {
        var $tBodies = this._getBodies(tableElement);
        if (1 === $tBodies.length) {
          this._getBodies(contentTable)["append" === changeType ? "append" : "prepend"]($tBodies.children());
        } else {
          $tBodies["append" === changeType ? "appendTo" : "prependTo"](contentTable);
        }
        tableElement.remove();
        $freeSpaceRowElements = this._getFreeSpaceRowElements(contentTable);
        removeEmptyRows($freeSpaceRowElements, FREESPACE_CLASS);
        if (change.removeCount) {
          this._removeRowsElements(contentTable, change.removeCount, changeType);
        }
        this._restoreErrorRow(contentTable);
        d.resolve();
      }).fail(d.reject);
    } else {
      super._updateContent.apply(this, arguments).done(() => {
        if ("update" === changeType) {
          this._restoreErrorRow(contentTable);
        }
        d.resolve();
      }).fail(d.reject);
    }
    return d.promise().done(() => {
      this._updateBottomLoading();
    });
  }
  _addVirtualRow($table, isFixed, location, position2) {
    if (!position2) {
      return;
    }
    var $virtualRow = this._createEmptyRow(VIRTUAL_ROW_CLASS, isFixed, position2);
    $virtualRow = this._wrapRowIfNeed($table, $virtualRow);
    this._appendEmptyRow($table, $virtualRow, location);
  }
  _updateContentItemSizes() {
    var rowHeights = this._getRowHeights();
    var correctedRowHeights = this._correctRowHeights(rowHeights);
    this._dataController.setContentItemSizes(correctedRowHeights);
  }
  _updateViewportSize(viewportHeight, scrollTop) {
    if (!isDefined(viewportHeight)) {
      viewportHeight = this._hasHeight ? getOuterHeight(this.element()) : getOuterHeight(getWindow());
    }
    this._dataController.viewportHeight(viewportHeight, scrollTop);
  }
  _getRowHeights() {
    var _a, _b;
    var isPopupEditMode = null === (_b = null === (_a = this._editingController) || void 0 === _a ? void 0 : _a.isPopupEditMode) || void 0 === _b ? void 0 : _b.call(_a);
    var rowElements = this._getRowElements(this._tableElement).toArray();
    if (isPopupEditMode) {
      rowElements = rowElements.filter((row) => !renderer_default(row).hasClass(ROW_INSERTED2));
    }
    return rowElements.map((row) => getBoundingRect(row).height);
  }
  _correctRowHeights(rowHeights) {
    var dataController2 = this._dataController;
    var dataSource = dataController2._dataSource;
    var correctedRowHeights = [];
    var visibleRows = dataController2.getVisibleRows();
    var itemSize = 0;
    var firstCountableItem = true;
    var lastLoadIndex = -1;
    for (var i = 0; i < rowHeights.length; i++) {
      var currentItem = visibleRows[i];
      if (!isDefined(currentItem)) {
        continue;
      }
      if (false === this.option(LEGACY_SCROLLING_MODE3)) {
        if (lastLoadIndex >= 0 && lastLoadIndex !== currentItem.loadIndex) {
          correctedRowHeights.push(itemSize);
          itemSize = 0;
        }
        lastLoadIndex = currentItem.loadIndex;
      } else if (isItemCountableByDataSource(currentItem, dataSource)) {
        if (firstCountableItem) {
          firstCountableItem = false;
        } else {
          correctedRowHeights.push(itemSize);
          itemSize = 0;
        }
      }
      itemSize += rowHeights[i];
    }
    itemSize > 0 && correctedRowHeights.push(itemSize);
    return correctedRowHeights;
  }
  _updateContentPosition(isRender) {
    var rowHeight = this._rowHeight || 20;
    this._dataController.viewportItemSize(rowHeight);
    if (isVirtualMode2(this) || m_utils_default.isVirtualRowRendering(this)) {
      if (!isRender) {
        this._updateContentItemSizes();
      }
      var top = this._dataController.getContentOffset("begin");
      var bottom = this._dataController.getContentOffset("end");
      var $tables = this.getTableElements();
      var $virtualRows = $tables.children("tbody").children(".".concat(VIRTUAL_ROW_CLASS));
      removeEmptyRows($virtualRows, VIRTUAL_ROW_CLASS);
      $tables.each((index, element) => {
        var isFixed = index > 0;
        var prevFixed = this._isFixedTableRendering;
        this._isFixedTableRendering = isFixed;
        this._addVirtualRow(renderer_default(element), isFixed, "top", top);
        this._addVirtualRow(renderer_default(element), isFixed, "bottom", bottom);
        this._isFixedTableRendering = prevFixed;
      });
    }
  }
  _isTableLinesDisplaysCorrect(table) {
    var hasColumnLines = table.find(".".concat(COLUMN_LINES_CLASS3)).length > 0;
    return hasColumnLines === this.option("showColumnLines");
  }
  _isColumnElementsEqual($columns, $virtualColumns) {
    var result2 = $columns.length === $virtualColumns.length;
    if (result2) {
      each($columns, (index, element) => {
        if (element.style.width !== $virtualColumns[index].style.width) {
          result2 = false;
          return result2;
        }
        return;
      });
    }
    return result2;
  }
  _getCellClasses(column) {
    var classes = [];
    var {
      cssClass
    } = column;
    var isExpandColumn = "expand" === column.command;
    cssClass && classes.push(cssClass);
    isExpandColumn && classes.push(this.addWidgetPrefix(GROUP_SPACE_CLASS2));
    return classes;
  }
  _findBottomLoadPanel($contentElement) {
    var $element = $contentElement || this.element();
    var $bottomLoadPanel = $element && $element.find(".".concat(this.addWidgetPrefix(BOTTOM_LOAD_PANEL_CLASS)));
    if ($bottomLoadPanel && $bottomLoadPanel.length) {
      return $bottomLoadPanel;
    }
  }
  _updateBottomLoading() {
    var virtualMode = isVirtualMode2(this);
    var appendMode = isAppendMode2(this);
    var showBottomLoading = !this._dataController.hasKnownLastPage() && this._dataController.isLoaded() && (virtualMode || appendMode);
    var $contentElement = this._findContentElement();
    var bottomLoadPanelElement = this._findBottomLoadPanel($contentElement);
    if (showBottomLoading) {
      if (!bottomLoadPanelElement) {
        renderer_default("<div>").addClass(this.addWidgetPrefix(BOTTOM_LOAD_PANEL_CLASS)).append(this._createComponent(renderer_default("<div>"), load_indicator_default).$element()).appendTo($contentElement);
      }
    } else if (bottomLoadPanelElement) {
      bottomLoadPanelElement.remove();
    }
  }
  _handleScroll(e) {
    var legacyScrollingMode = true === this.option(LEGACY_SCROLLING_MODE3);
    var zeroTopPosition = 0 === e.scrollOffset.top;
    var isScrollTopChanged = this._scrollTop !== e.scrollOffset.top;
    var hasScrolled = isScrollTopChanged || e.forceUpdateScrollPosition;
    var isValidScrollTarget = this._hasHeight || !legacyScrollingMode && zeroTopPosition;
    if (hasScrolled && isValidScrollTarget && this._rowHeight) {
      this._scrollTop = e.scrollOffset.top;
      var isVirtualRowRendering = isVirtualMode2(this) || "standard" !== this.option("scrolling.rowRenderingMode");
      if (isVirtualRowRendering && false === this.option(LEGACY_SCROLLING_MODE3)) {
        this._updateContentItemSizes();
        this._updateViewportSize(null, this._scrollTop);
      }
      this._dataController.setViewportPosition(e.scrollOffset.top);
    }
    super._handleScroll.apply(this, arguments);
  }
  _needUpdateRowHeight(itemsCount) {
    return super._needUpdateRowHeight.apply(this, arguments) || itemsCount > 0 && isAppendMode2(this) && !m_utils_default.isVirtualRowRendering(this);
  }
  _updateRowHeight() {
    super._updateRowHeight.apply(this, arguments);
    if (this._rowHeight) {
      this._updateContentPosition();
      var viewportHeight = this._hasHeight ? getOuterHeight(this.element()) : getOuterHeight(getWindow());
      if (false === this.option(LEGACY_SCROLLING_MODE3)) {
        this._updateViewportSize(viewportHeight);
        this._dataController.updateViewport();
      } else {
        this._dataController.viewportSize(Math.ceil(viewportHeight / this._rowHeight));
      }
    }
  }
  updateFreeSpaceRowHeight() {
    var result2 = super.updateFreeSpaceRowHeight.apply(this, arguments);
    if (result2) {
      this._updateContentPosition();
    }
    return result2;
  }
  setLoading(isLoading, messageText) {
    var dataController2 = this._dataController;
    var hasBottomLoadPanel = dataController2.pageIndex() > 0 && dataController2.isLoaded() && !!this._findBottomLoadPanel();
    if (false === this.option(LEGACY_SCROLLING_MODE3) && isLoading && dataController2.isViewportChanging()) {
      return;
    }
    if (hasBottomLoadPanel) {
      isLoading = false;
    }
    super.setLoading.call(this, isLoading, messageText);
  }
  throwHeightWarningIfNeed() {
    if (void 0 === this._hasHeight) {
      return;
    }
    var needToThrow = !this._hasHeight && isVirtualPaging(this);
    if (needToThrow && !this._heightWarningIsThrown) {
      this._heightWarningIsThrown = true;
      ui_errors_default.log("W1025");
    }
  }
  _resizeCore() {
    var that = this;
    var $element = that.element();
    super._resizeCore();
    this.throwHeightWarningIfNeed();
    if (that.component.$element() && !that._windowScroll && isElementInDom($element)) {
      that._windowScroll = subscribeToExternalScrollers($element, (scrollPos) => {
        if (!that._hasHeight && that._rowHeight) {
          that._dataController.setViewportPosition(scrollPos);
        }
      }, that.component.$element());
      that.on("disposing", () => {
        that._windowScroll.dispose();
      });
    }
    if (false !== this.option(LEGACY_SCROLLING_MODE3)) {
      that.loadIfNeed();
    }
  }
  loadIfNeed() {
    var _a, _b;
    null === (_b = null === (_a = this._dataController) || void 0 === _a ? void 0 : _a.loadIfNeed) || void 0 === _b ? void 0 : _b.call(_a);
  }
  _restoreErrorRow(contentTable) {
    var _a;
    if (false === this.option(LEGACY_SCROLLING_MODE3)) {
      null === (_a = this._errorHandlingController) || void 0 === _a ? void 0 : _a.removeErrorRow();
    }
    super._restoreErrorRow.apply(this, arguments);
  }
};
var virtualScrollingModule = {
  defaultOptions: () => ({
    scrolling: {
      timeout: 300,
      updateTimeout: 300,
      minTimeout: 0,
      renderingThreshold: 100,
      removeInvisiblePages: true,
      rowPageSize: 5,
      prerenderedRowChunkSize: 1,
      mode: "standard",
      preloadEnabled: false,
      rowRenderingMode: "standard",
      loadTwoPagesOnStart: false,
      legacyMode: false,
      prerenderedRowCount: 1
    }
  }),
  extenders: {
    controllers: {
      data: data7,
      resizing: resizing3
    },
    views: {
      rowsView: rowsView7
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/virtual_scrolling.js
m_core_default.registerModule("virtualScrolling", virtualScrollingModule);
m_data_source_adapter_default.extend(dataSourceAdapterExtender2);

// node_modules/devextreme/esm/__internal/ui/overlay/m_utils.js
var WINDOW_HEIGHT_PERCENT = 0.9;
var getElementMaxHeightByWindow = ($element, startLocation) => {
  var $window = renderer_default(getWindow());
  var {
    top: elementOffset
  } = $element.offset();
  var actualOffset;
  if (isNumeric(startLocation)) {
    if (startLocation < elementOffset) {
      return elementOffset - startLocation;
    }
    actualOffset = getInnerHeight($window) - startLocation + $window.scrollTop();
  } else {
    var offsetTop = elementOffset - $window.scrollTop();
    var offsetBottom = getInnerHeight($window) - offsetTop - getOuterHeight($element);
    actualOffset = Math.max(offsetTop, offsetBottom);
  }
  return actualOffset * WINDOW_HEIGHT_PERCENT;
};

// node_modules/devextreme/esm/__internal/ui/menu/m_submenu.js
var DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = "dx-context-menu-content-delimiter";
var DX_SUBMENU_CLASS2 = "dx-submenu";
var Submenu = class extends m_context_menu_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      orientation: "horizontal",
      tabIndex: null,
      onHoverStart: noop
    });
  }
  _initDataAdapter() {
    this._dataAdapter = this.option("_dataAdapter");
    if (!this._dataAdapter) {
      super._initDataAdapter();
    }
  }
  _renderContentImpl() {
    this._renderContextMenuOverlay();
    super._renderContentImpl();
    var node = this._dataAdapter.getNodeByKey(this.option("_parentKey"));
    node && this._renderItems(this._getChildNodes(node));
    this._renderDelimiter();
  }
  _renderDelimiter() {
    this.$contentDelimiter = renderer_default("<div>").appendTo(this._itemContainer()).addClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS);
  }
  _getOverlayOptions() {
    return extend(true, super._getOverlayOptions(), {
      onPositioned: this._overlayPositionedActionHandler.bind(this),
      position: {
        precise: true
      }
    });
  }
  _overlayPositionedActionHandler(arg) {
    this._showDelimiter(arg);
  }
  _hoverEndHandler(e) {
    super._hoverEndHandler(e);
    this._toggleFocusClass(false, e.currentTarget);
  }
  _isMenuHorizontal() {
    return "horizontal" === this.option("orientation");
  }
  _hoverStartHandler(e) {
    var hoverStartAction = this.option("onHoverStart");
    hoverStartAction(e);
    super._hoverStartHandler(e);
    this._toggleFocusClass(true, e.currentTarget);
  }
  _drawSubmenu($rootItem) {
    this._actions.onShowing({
      rootItem: getPublicElement($rootItem),
      submenu: this
    });
    super._drawSubmenu($rootItem);
    this._actions.onShown({
      rootItem: getPublicElement($rootItem),
      submenu: this
    });
  }
  _hideSubmenu($rootItem) {
    this._actions.onHiding({
      cancel: true,
      rootItem: getPublicElement($rootItem),
      submenu: this
    });
    super._hideSubmenu($rootItem);
    this._actions.onHidden({
      rootItem: getPublicElement($rootItem),
      submenu: this
    });
  }
  _showDelimiter(arg) {
    if (!this.$contentDelimiter) {
      return;
    }
    var $submenu = this._itemContainer().children(".".concat(DX_SUBMENU_CLASS2)).eq(0);
    var $rootItem = this.option("position").of.find(".dx-context-menu-container-border");
    var position2 = {
      of: $submenu,
      precise: true
    };
    var containerOffset = arg.position;
    var vLocation = containerOffset.v.location;
    var hLocation = containerOffset.h.location;
    var rootOffset = $rootItem.offset();
    var offsetLeft = Math.round(rootOffset.left);
    var offsetTop = Math.round(rootOffset.top);
    var rootWidth = getWidth($rootItem);
    var rootHeight = getHeight($rootItem);
    var submenuWidth = getWidth($submenu);
    var submenuHeight = getHeight($submenu);
    this.$contentDelimiter.css("display", "block");
    setWidth2(this.$contentDelimiter, this._isMenuHorizontal() ? rootWidth < submenuWidth ? rootWidth : submenuWidth : 3);
    setHeight2(this.$contentDelimiter, this._isMenuHorizontal() ? 3 : rootHeight < submenuHeight ? rootHeight : submenuHeight);
    if (this._isMenuHorizontal()) {
      if (vLocation > offsetTop) {
        if (Math.round(hLocation) === offsetLeft) {
          position2.offset = "0 -2.5";
          position2.at = position2.my = "left top";
        } else {
          position2.offset = "0 -2.5";
          position2.at = position2.my = "right top";
        }
      } else {
        setHeight2(this.$contentDelimiter, 5);
        if (Math.round(hLocation) === offsetLeft) {
          position2.offset = "0 5";
          position2.at = position2.my = "left bottom";
        } else {
          position2.offset = "0 5";
          position2.at = position2.my = "right bottom";
        }
      }
    } else if (hLocation > offsetLeft) {
      if (Math.round(vLocation) === offsetTop) {
        position2.offset = "-2.5 0";
        position2.at = position2.my = "left top";
      } else {
        position2.offset = "-2.5 0";
        position2.at = position2.my = "left bottom";
      }
    } else if (Math.round(vLocation) === offsetTop) {
      position2.offset = "2.5 0";
      position2.at = position2.my = "right top";
    } else {
      position2.offset = "2.5 0";
      position2.at = position2.my = "right bottom";
    }
    position_default.setup(this.$contentDelimiter, position2);
  }
  _getContextMenuPosition() {
    return this.option("position");
  }
  isOverlayVisible() {
    return this._overlay.option("visible");
  }
  getOverlayContent() {
    return this._overlay.$content();
  }
};
var m_submenu_default = Submenu;

// node_modules/devextreme/esm/__internal/ui/menu/m_menu.js
var DX_MENU_CLASS3 = "dx-menu";
var DX_MENU_VERTICAL_CLASS = "".concat(DX_MENU_CLASS3, "-vertical");
var DX_MENU_HORIZONTAL_CLASS = "".concat(DX_MENU_CLASS3, "-horizontal");
var DX_MENU_ITEM_CLASS2 = "".concat(DX_MENU_CLASS3, "-item");
var DX_MENU_ITEMS_CONTAINER_CLASS3 = "".concat(DX_MENU_CLASS3, "-items-container");
var DX_MENU_ITEM_EXPANDED_CLASS3 = "".concat(DX_MENU_ITEM_CLASS2, "-expanded");
var DX_CONTEXT_MENU_CLASS2 = "dx-context-menu";
var DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = "".concat(DX_CONTEXT_MENU_CLASS2, "-container-border");
var DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS2 = "dx-context-menu-content-delimiter";
var DX_SUBMENU_CLASS3 = "dx-submenu";
var DX_STATE_DISABLED_CLASS2 = "dx-state-disabled";
var DX_STATE_HOVER_CLASS2 = "dx-state-hover";
var DX_STATE_ACTIVE_CLASS = "dx-state-active";
var DX_ADAPTIVE_MODE_CLASS = "".concat(DX_MENU_CLASS3, "-adaptive-mode");
var DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = "".concat(DX_MENU_CLASS3, "-hamburger-button");
var DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = "".concat(DX_ADAPTIVE_MODE_CLASS, "-overlay-wrapper");
var FOCUS_UP3 = "up";
var FOCUS_DOWN3 = "down";
var FOCUS_LEFT3 = "left";
var FOCUS_RIGHT3 = "right";
var SHOW_SUBMENU_OPERATION = "showSubmenu";
var NEXTITEM_OPERATION = "nextItem";
var PREVITEM_OPERATION = "prevItem";
var DEFAULT_DELAY2 = {
  show: 50,
  hide: 300
};
var ACTIONS2 = ["onSubmenuShowing", "onSubmenuShown", "onSubmenuHiding", "onSubmenuHidden", "onItemContextMenu", "onItemClick", "onSelectionChanged", "onItemRendered"];
var Menu = class extends m_menu_base_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      orientation: "horizontal",
      submenuDirection: "auto",
      showFirstSubmenuMode: {
        name: "onClick",
        delay: {
          show: 50,
          hide: 300
        }
      },
      hideSubmenuOnMouseLeave: false,
      onSubmenuShowing: null,
      onSubmenuShown: null,
      onSubmenuHiding: null,
      onSubmenuHidden: null,
      adaptivityEnabled: false
    });
  }
  _setOptionsByReference() {
    super._setOptionsByReference();
    extend(this._optionsByReference, {
      animation: true,
      selectedItem: true
    });
  }
  _itemElements() {
    var rootMenuElements = super._itemElements();
    var submenuElements = this._submenuItemElements();
    return rootMenuElements.add(submenuElements);
  }
  _submenuItemElements() {
    var elements = [];
    var itemSelector = ".".concat(DX_MENU_ITEM_CLASS2);
    var currentSubmenu = this._submenus.length && this._submenus[0];
    if (currentSubmenu && currentSubmenu.itemsContainer()) {
      elements = currentSubmenu.itemsContainer().find(itemSelector);
    }
    return elements;
  }
  _focusTarget() {
    return this.$element();
  }
  _isMenuHorizontal() {
    return "horizontal" === this.option("orientation");
  }
  _moveFocus(location) {
    var $items = this._getAvailableItems();
    var isMenuHorizontal = this._isMenuHorizontal();
    var $activeItem = this._getActiveItem(true);
    var argument;
    var operation;
    var navigationAction;
    var $newTarget;
    switch (location) {
      case FOCUS_UP3:
        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);
        argument = isMenuHorizontal ? $activeItem : $items;
        navigationAction = this._getKeyboardNavigationAction(operation, argument);
        $newTarget = navigationAction();
        break;
      case FOCUS_DOWN3:
        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);
        argument = isMenuHorizontal ? $activeItem : $items;
        navigationAction = this._getKeyboardNavigationAction(operation, argument);
        $newTarget = navigationAction();
        break;
      case FOCUS_RIGHT3:
        operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;
        argument = isMenuHorizontal ? $items : $activeItem;
        navigationAction = this._getKeyboardNavigationAction(operation, argument);
        $newTarget = navigationAction();
        break;
      case FOCUS_LEFT3:
        operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;
        argument = isMenuHorizontal ? $items : $activeItem;
        navigationAction = this._getKeyboardNavigationAction(operation, argument);
        $newTarget = navigationAction();
        break;
      default:
        return super._moveFocus(location);
    }
    if ($newTarget && 0 !== $newTarget.length) {
      this.option("focusedElement", getPublicElement($newTarget));
    }
  }
  _getItemsNavigationOperation(operation) {
    var navOperation = operation;
    if (this.option("rtlEnabled")) {
      navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION;
    }
    return navOperation;
  }
  _getKeyboardNavigationAction(operation, argument) {
    var action = noop;
    switch (operation) {
      case SHOW_SUBMENU_OPERATION:
        if (!argument.hasClass(DX_STATE_DISABLED_CLASS2)) {
          action = this._showSubmenu.bind(this, argument);
        }
        break;
      case NEXTITEM_OPERATION:
        action = this._nextItem.bind(this, argument);
        break;
      case PREVITEM_OPERATION:
        action = this._prevItem.bind(this, argument);
    }
    return action;
  }
  _clean() {
    super._clean();
    this.option("templatesRenderAsynchronously") && clearTimeout(this._resizeEventTimer);
  }
  _visibilityChanged(visible) {
    if (visible) {
      if (!this._menuItemsWidth) {
        this._updateItemsWidthCache();
      }
      this._dimensionChanged();
    }
  }
  _isAdaptivityEnabled() {
    return this.option("adaptivityEnabled") && "horizontal" === this.option("orientation");
  }
  _updateItemsWidthCache() {
    var $menuItems = this.$element().find("ul").first().children("li").children(".".concat(DX_MENU_ITEM_CLASS2));
    this._menuItemsWidth = this._getSummaryItemsSize("width", $menuItems, true);
  }
  _dimensionChanged() {
    if (!this._isAdaptivityEnabled()) {
      return;
    }
    var containerWidth = getOuterWidth(this.$element());
    this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth);
  }
  _init() {
    super._init();
    this._submenus = [];
  }
  _initActions() {
    this._actions = {};
    each(ACTIONS2, (index, action) => {
      this._actions[action] = this._createActionByOption(action);
    });
  }
  _initMarkup() {
    this._visibleSubmenu = null;
    this.$element().addClass(DX_MENU_CLASS3);
    super._initMarkup();
    this._addCustomCssClass(this.$element());
    this.setAria("role", "menubar");
  }
  _render() {
    super._render();
    this._initAdaptivity();
  }
  _renderHamburgerButton() {
    this._hamburger = new button_default(renderer_default("<div>").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {
      icon: "menu",
      activeStateEnabled: false,
      onClick: this._toggleTreeView.bind(this)
    });
    return this._hamburger.$element();
  }
  _toggleTreeView(state) {
    if (isPlainObject(state)) {
      state = !this._overlay.option("visible");
    }
    this._overlay.option("visible", state);
    if (state) {
      this._treeView.focus();
    }
    this._toggleHamburgerActiveState(state);
  }
  _toggleHamburgerActiveState(state) {
    this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state);
  }
  _toggleAdaptiveMode(state) {
    var $menuItemsContainer = this.$element().find(".".concat(DX_MENU_HORIZONTAL_CLASS));
    var $adaptiveElements = this.$element().find(".".concat(DX_ADAPTIVE_MODE_CLASS));
    if (state) {
      this._hideVisibleSubmenu();
    } else {
      this._treeView && this._treeView.collapseAll();
      this._overlay && this._toggleTreeView(state);
    }
    $menuItemsContainer.toggle(!state);
    $adaptiveElements.toggle(state);
  }
  _removeAdaptivity() {
    if (!this._$adaptiveContainer) {
      return;
    }
    this._toggleAdaptiveMode(false);
    this._$adaptiveContainer.remove();
    this._$adaptiveContainer = null;
    this._treeView = null;
    this._hamburger = null;
    this._overlay = null;
  }
  _treeviewItemClickHandler(e) {
    this._actions.onItemClick(e);
    if (!e.node.children.length) {
      this._toggleTreeView(false);
    }
  }
  _getAdaptiveOverlayOptions() {
    var rtl = this.option("rtlEnabled");
    var position2 = rtl ? "right" : "left";
    return {
      _ignoreFunctionValueDeprecation: true,
      maxHeight: () => getElementMaxHeightByWindow(this.$element()),
      deferRendering: false,
      shading: false,
      animation: false,
      hideOnParentScroll: true,
      onHidden: () => {
        this._toggleHamburgerActiveState(false);
      },
      height: "auto",
      hideOnOutsideClick: (e) => !renderer_default(e.target).closest(".".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length,
      position: {
        collision: "flipfit",
        at: "bottom ".concat(position2),
        my: "top ".concat(position2),
        of: this._hamburger.$element()
      }
    };
  }
  _getTreeViewOptions() {
    var menuOptions = {};
    each(["rtlEnabled", "width", "accessKey", "activeStateEnabled", "animation", "dataSource", "disabled", "displayExpr", "displayExpr", "focusStateEnabled", "hint", "hoverStateEnabled", "itemsExpr", "items", "itemTemplate", "selectedExpr", "selectionMode", "tabIndex", "visible"], (_, option) => {
      menuOptions[option] = this.option(option);
    });
    each(["onItemContextMenu", "onSelectionChanged", "onItemRendered"], (_, actionName) => {
      menuOptions[actionName] = (e) => {
        this._actions[actionName](e);
      };
    });
    return extend(menuOptions, {
      dataSource: this.getDataSource(),
      animationEnabled: !!this.option("animation"),
      onItemClick: this._treeviewItemClickHandler.bind(this),
      onItemExpanded: (e) => {
        this._overlay.repaint();
        this._actions.onSubmenuShown(e);
      },
      onItemCollapsed: (e) => {
        this._overlay.repaint();
        this._actions.onSubmenuHidden(e);
      },
      selectNodesRecursive: false,
      selectByClick: this.option("selectByClick"),
      expandEvent: "click",
      _supportItemUrl: true
    });
  }
  _initAdaptivity() {
    if (!this._isAdaptivityEnabled()) {
      return;
    }
    this._$adaptiveContainer = renderer_default("<div>").addClass(DX_ADAPTIVE_MODE_CLASS);
    var $hamburger = this._renderHamburgerButton();
    this._treeView = this._createComponent(renderer_default("<div>"), tree_view_default, this._getTreeViewOptions());
    this._overlay = this._createComponent(renderer_default("<div>"), ui_overlay_default, this._getAdaptiveOverlayOptions());
    this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option("cssClass"));
    this._overlay.$wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);
    this._$adaptiveContainer.append($hamburger);
    this._$adaptiveContainer.append(this._overlay.$element());
    this.$element().append(this._$adaptiveContainer);
    this._updateItemsWidthCache();
    this._dimensionChanged();
  }
  _getDelay(delayType) {
    var {
      delay
    } = this.option("showFirstSubmenuMode");
    if (!isDefined(delay)) {
      return DEFAULT_DELAY2[delayType];
    }
    return isObject(delay) ? delay[delayType] : delay;
  }
  _keyboardHandler(e) {
    return super._keyboardHandler(e, !!this._visibleSubmenu);
  }
  _renderContainer() {
    var $wrapper = renderer_default("<div>");
    $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);
    return super._renderContainer($wrapper);
  }
  _renderSubmenuItems(node, $itemFrame) {
    var submenu = this._createSubmenu(node, $itemFrame);
    this._submenus.push(submenu);
    this._renderBorderElement($itemFrame);
    return submenu;
  }
  _getKeyboardListeners() {
    return super._getKeyboardListeners().concat(this._visibleSubmenu);
  }
  _createSubmenu(node, $rootItem) {
    var $submenuContainer = renderer_default("<div>").addClass(DX_CONTEXT_MENU_CLASS2).appendTo($rootItem);
    var items = this._getChildNodes(node);
    var subMenu = this._createComponent($submenuContainer, m_submenu_default, extend(this._getSubmenuOptions(), {
      _dataAdapter: this._dataAdapter,
      _parentKey: node.internalFields.key,
      items,
      onHoverStart: this._clearTimeouts.bind(this),
      position: this.getSubmenuPosition($rootItem)
    }));
    this._attachSubmenuHandlers($rootItem, subMenu);
    return subMenu;
  }
  _getSubmenuOptions() {
    var $submenuTarget = renderer_default("<div>");
    var isMenuHorizontal = this._isMenuHorizontal();
    return {
      itemTemplate: this.option("itemTemplate"),
      target: $submenuTarget,
      orientation: this.option("orientation"),
      selectionMode: this.option("selectionMode"),
      cssClass: this.option("cssClass"),
      selectByClick: this.option("selectByClick"),
      hoverStateEnabled: this.option("hoverStateEnabled"),
      activeStateEnabled: this.option("activeStateEnabled"),
      focusStateEnabled: this.option("focusStateEnabled"),
      animation: this.option("animation"),
      showSubmenuMode: this.option("showSubmenuMode"),
      displayExpr: this.option("displayExpr"),
      disabledExpr: this.option("disabledExpr"),
      selectedExpr: this.option("selectedExpr"),
      itemsExpr: this.option("itemsExpr"),
      onFocusedItemChanged: (e) => {
        if (!e.component.option("visible")) {
          return;
        }
        this.option("focusedElement", e.component.option("focusedElement"));
      },
      onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),
      onItemClick: this._nestedItemOnItemClickHandler.bind(this),
      onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),
      onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),
      onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),
      onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),
      onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null
    };
  }
  _getShowFirstSubmenuMode() {
    if (!this._isDesktopDevice()) {
      return "onClick";
    }
    var optionValue = this.option("showFirstSubmenuMode");
    return isObject(optionValue) ? optionValue.name : optionValue;
  }
  _moveMainMenuFocus(direction) {
    var $items = this._getAvailableItems();
    var itemCount = $items.length;
    var $currentItem = $items.filter(".".concat(DX_MENU_ITEM_EXPANDED_CLASS3)).eq(0);
    var itemIndex = $items.index($currentItem);
    this._hideSubmenu(this._visibleSubmenu);
    itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;
    if (itemIndex >= itemCount) {
      itemIndex = 0;
    } else if (itemIndex < 0) {
      itemIndex = itemCount - 1;
    }
    var $newItem = $items.eq(itemIndex);
    this.option("focusedElement", getPublicElement($newItem));
  }
  _nestedItemOnSelectionChangedHandler(args) {
    var selectedItem = args.addedItems.length && args.addedItems[0];
    var submenu = m_submenu_default.getInstance(args.element);
    var {
      onSelectionChanged
    } = this._actions;
    onSelectionChanged(args);
    selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);
    this._clearRootSelection();
    this._setOptionWithoutOptionChange("selectedItem", selectedItem);
  }
  _clearSelectionInSubmenus(item, targetSubmenu) {
    var cleanAllSubmenus = !arguments.length;
    each(this._submenus, (index, submenu) => {
      var $submenu = submenu._itemContainer();
      var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());
      var $selectedItem = $submenu.find(".".concat(this._selectedItemClass()));
      if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {
        $selectedItem.removeClass(this._selectedItemClass());
        var selectedItemData = this._getItemData($selectedItem);
        if (selectedItemData) {
          selectedItemData.selected = false;
        }
        submenu._clearSelectedItems();
      }
    });
  }
  _clearRootSelection() {
    var $prevSelectedItem = this.$element().find(".".concat(DX_MENU_ITEMS_CONTAINER_CLASS3)).first().children().children().filter(".".concat(this._selectedItemClass()));
    if ($prevSelectedItem.length) {
      var prevSelectedItemData = this._getItemData($prevSelectedItem);
      prevSelectedItemData.selected = false;
      $prevSelectedItem.removeClass(this._selectedItemClass());
    }
  }
  _nestedItemOnItemClickHandler(e) {
    this._actions.onItemClick(e);
  }
  _nestedItemOnItemRenderedHandler(e) {
    this._actions.onItemRendered(e);
  }
  _attachSubmenuHandlers($menuAnchorItem, submenu) {
    var $submenuOverlayContent = submenu.getOverlayContent();
    var submenus = $submenuOverlayContent.find(".".concat(DX_SUBMENU_CLASS3));
    var submenuMouseLeaveName = addNamespace(HOVEREND, "".concat(this.NAME, "_submenu"));
    submenu.option({
      onShowing: this._submenuOnShowingHandler.bind(this, $menuAnchorItem, submenu),
      onShown: this._submenuOnShownHandler.bind(this, $menuAnchorItem, submenu),
      onHiding: this._submenuOnHidingHandler.bind(this, $menuAnchorItem, submenu),
      onHidden: this._submenuOnHiddenHandler.bind(this, $menuAnchorItem, submenu)
    });
    each(submenus, (index, submenu2) => {
      events_engine_default.off(submenu2, submenuMouseLeaveName);
      events_engine_default.on(submenu2, submenuMouseLeaveName, null, this._submenuMouseLeaveHandler.bind(this, $menuAnchorItem));
    });
  }
  _submenuOnShowingHandler($rootItem, submenu) {
    var $border = $rootItem.children(".".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));
    this._actions.onSubmenuShowing({
      rootItem: getPublicElement($rootItem),
      submenu
    });
    $border.show();
    $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS3);
  }
  _submenuOnShownHandler($rootItem, submenu) {
    this._actions.onSubmenuShown({
      rootItem: getPublicElement($rootItem),
      submenu
    });
  }
  _submenuOnHidingHandler($rootItem, submenu, eventArgs) {
    var $border = $rootItem.children(".".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));
    var args = eventArgs;
    args.rootItem = getPublicElement($rootItem);
    args.submenu = submenu;
    this._actions.onSubmenuHiding(args);
    eventArgs = args;
    if (!eventArgs.cancel) {
      if (this._visibleSubmenu === submenu) {
        this._visibleSubmenu = null;
      }
      $border.hide();
      $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS3);
    }
  }
  _submenuOnHiddenHandler($rootItem, submenu) {
    this._actions.onSubmenuHidden({
      rootItem: getPublicElement($rootItem),
      submenu
    });
  }
  _submenuMouseLeaveHandler($rootItem, eventArgs) {
    var target = renderer_default(eventArgs.relatedTarget).parents(".".concat(DX_CONTEXT_MENU_CLASS2))[0];
    var contextMenu2 = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];
    if (this.option("hideSubmenuOnMouseLeave") && target !== contextMenu2) {
      this._clearTimeouts();
      setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay("hide"));
    }
  }
  _hideSubmenuAfterTimeout() {
    if (!this._visibleSubmenu) {
      return;
    }
    var isRootItemHovered = renderer_default(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS2);
    var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(".".concat(DX_STATE_HOVER_CLASS2)).length;
    var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover");
    if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {
      this._visibleSubmenu.hide();
    }
  }
  _getSubmenuByRootElement($rootItem) {
    if (!$rootItem) {
      return false;
    }
    var $submenu = $rootItem.children(".".concat(DX_CONTEXT_MENU_CLASS2));
    return $submenu.length && m_submenu_default.getInstance($submenu);
  }
  getSubmenuPosition($rootItem) {
    var isHorizontalMenu = this._isMenuHorizontal();
    var submenuDirection = this.option("submenuDirection").toLowerCase();
    var rtlEnabled = this.option("rtlEnabled");
    var submenuPosition = {
      collision: "flip",
      of: $rootItem,
      precise: true
    };
    switch (submenuDirection) {
      case "leftortop":
        submenuPosition.at = "left top";
        submenuPosition.my = isHorizontalMenu ? "left bottom" : "right top";
        break;
      case "rightorbottom":
        submenuPosition.at = isHorizontalMenu ? "left bottom" : "right top";
        submenuPosition.my = "left top";
        break;
      default:
        if (isHorizontalMenu) {
          submenuPosition.at = rtlEnabled ? "right bottom" : "left bottom";
          submenuPosition.my = rtlEnabled ? "right top" : "left top";
        } else {
          submenuPosition.at = rtlEnabled ? "left top" : "right top";
          submenuPosition.my = rtlEnabled ? "right top" : "left top";
        }
    }
    return submenuPosition;
  }
  _renderBorderElement($item) {
    renderer_default("<div>").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide();
  }
  _itemPointerDownHandler(e) {
    var $target = renderer_default(e.target);
    var $closestItem = $target.closest(this._itemElements());
    if ($closestItem.hasClass("dx-menu-item-has-submenu")) {
      this.option("focusedElement", null);
      return;
    }
    super._itemPointerDownHandler(e);
  }
  _hoverStartHandler(e) {
    var mouseMoveEventName = addNamespace(pointer_default.move, this.NAME);
    var $item = this._getItemElementByEventArgs(e);
    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));
    var isSelectionActive = isDefined(e.buttons) && 1 === e.buttons || !isDefined(e.buttons) && 1 === e.which;
    if (this._isItemDisabled($item)) {
      return;
    }
    events_engine_default.off($item, mouseMoveEventName);
    if (!this._hasChildren(node)) {
      this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay("hide"));
      return;
    }
    if ("onHover" === this._getShowFirstSubmenuMode() && !isSelectionActive) {
      var submenu = this._getSubmenuByElement($item);
      this._clearTimeouts();
      if (!submenu.isOverlayVisible()) {
        events_engine_default.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));
        this._showSubmenuTimer = this._getDelay("hide");
      }
    }
  }
  _hoverEndHandler(eventArg) {
    var $item = this._getItemElementByEventArgs(eventArg);
    var relatedTarget = renderer_default(eventArg.relatedTarget);
    super._hoverEndHandler(eventArg);
    this._clearTimeouts();
    if (this._isItemDisabled($item)) {
      return;
    }
    if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS2)) {
      return;
    }
    if (this.option("hideSubmenuOnMouseLeave") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS3)) {
      this._hideSubmenuTimer = setTimeout(() => {
        this._hideSubmenuAfterTimeout();
      }, this._getDelay("hide"));
    }
  }
  _hideVisibleSubmenu() {
    if (!this._visibleSubmenu) {
      return false;
    }
    this._hideSubmenu(this._visibleSubmenu);
    return true;
  }
  _showSubmenu($itemElement) {
    var submenu = this._getSubmenuByElement($itemElement);
    if (this._visibleSubmenu !== submenu) {
      this._hideVisibleSubmenu();
    }
    if (submenu) {
      this._clearTimeouts();
      this.focus();
      submenu.show();
      this.option("focusedElement", submenu.option("focusedElement"));
    }
    this._visibleSubmenu = submenu;
    this._hoveredRootItem = $itemElement;
  }
  _hideSubmenu(submenu) {
    if (submenu) {
      submenu.hide();
    }
    if (this._visibleSubmenu === submenu) {
      this._visibleSubmenu = null;
    }
    this._hoveredRootItem = null;
  }
  _itemMouseMoveHandler(e) {
    if (e.pointers && e.pointers.length) {
      return;
    }
    var $item = renderer_default(e.currentTarget);
    if (!isDefined(this._showSubmenuTimer)) {
      return;
    }
    this._clearTimeouts();
    this._showSubmenuTimer = setTimeout(() => {
      var submenu = this._getSubmenuByElement($item);
      if (submenu && !submenu.isOverlayVisible()) {
        this._showSubmenu($item);
      }
    }, this._getDelay("show"));
  }
  _clearTimeouts() {
    clearTimeout(this._hideSubmenuTimer);
    clearTimeout(this._showSubmenuTimer);
  }
  _getSubmenuByElement($itemElement, itemData) {
    var submenu = this._getSubmenuByRootElement($itemElement);
    if (submenu) {
      return submenu;
    }
    itemData = null !== itemData && void 0 !== itemData ? itemData : this._getItemData($itemElement);
    var node = this._dataAdapter.getNodeByItem(itemData);
    return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement);
  }
  _updateSubmenuVisibilityOnClick(actionArgs) {
    var args = actionArgs.args.length && actionArgs.args[0];
    if (!args || this._disabledGetter(args.itemData)) {
      return;
    }
    var $itemElement = renderer_default(args.itemElement);
    var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);
    this._updateSelectedItemOnClick(actionArgs);
    if (this._visibleSubmenu) {
      if (this._visibleSubmenu === currentSubmenu) {
        if ("onClick" === this.option("showFirstSubmenuMode")) {
          this._hideSubmenu(this._visibleSubmenu);
        }
        return;
      }
      this._hideSubmenu(this._visibleSubmenu);
    }
    if (!currentSubmenu) {
      return;
    }
    if (!currentSubmenu.isOverlayVisible()) {
      this._showSubmenu($itemElement);
    }
  }
  _optionChanged(args) {
    if (ACTIONS2.includes(args.name)) {
      this._initActions();
      return;
    }
    switch (args.name) {
      case "orientation":
      case "submenuDirection":
        this._invalidate();
        break;
      case "showFirstSubmenuMode":
      case "hideSubmenuOnMouseLeave":
        break;
      case "showSubmenuMode":
        this._changeSubmenusOption(args.name, args.value);
        break;
      case "adaptivityEnabled":
        args.value ? this._initAdaptivity() : this._removeAdaptivity();
        break;
      case "width":
        if (this._isAdaptivityEnabled()) {
          this._treeView.option(args.name, args.value);
          this._overlay.option(args.name, args.value);
        }
        super._optionChanged(args);
        this._dimensionChanged();
        break;
      case "animation":
        if (this._isAdaptivityEnabled()) {
          this._treeView.option("animationEnabled", !!args.value);
        }
        super._optionChanged(args);
        break;
      default:
        if (this._isAdaptivityEnabled() && (args.name === args.fullName || "items" === args.name)) {
          this._treeView.option(args.fullName, args.value);
        }
        super._optionChanged(args);
    }
  }
  _changeSubmenusOption(name2, value2) {
    each(this._submenus, (index, submenu) => {
      submenu.option(name2, value2);
    });
  }
  selectItem(itemElement) {
    this._hideSubmenu(this._visibleSubmenu);
    super.selectItem(itemElement);
  }
  unselectItem(itemElement) {
    this._hideSubmenu(this._visibleSubmenu);
    super.unselectItem(itemElement);
  }
};
component_registrator_default("dxMenu", Menu);
var m_menu_default = Menu;

// node_modules/devextreme/esm/ui/menu.js
var menu_default = m_menu_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/filter/m_filter_row.js
var OPERATION_ICONS = {
  "=": "filter-operation-equals",
  "<>": "filter-operation-not-equals",
  "<": "filter-operation-less",
  "<=": "filter-operation-less-equal",
  ">": "filter-operation-greater",
  ">=": "filter-operation-greater-equal",
  default: "filter-operation-default",
  notcontains: "filter-operation-not-contains",
  contains: "filter-operation-contains",
  startswith: "filter-operation-starts-with",
  endswith: "filter-operation-ends-with",
  between: "filter-operation-between"
};
var OPERATION_DESCRIPTORS = {
  "=": "equal",
  "<>": "notEqual",
  "<": "lessThan",
  "<=": "lessThanOrEqual",
  ">": "greaterThan",
  ">=": "greaterThanOrEqual",
  startswith: "startsWith",
  contains: "contains",
  notcontains: "notContains",
  endswith: "endsWith",
  between: "between"
};
var FILTERING_TIMEOUT = 700;
var CORRECT_FILTER_RANGE_OVERLAY_WIDTH = 1;
var FILTER_ROW_CLASS3 = "filter-row";
var FILTER_RANGE_OVERLAY_CLASS = "filter-range-overlay";
var FILTER_RANGE_START_CLASS = "filter-range-start";
var FILTER_RANGE_END_CLASS = "filter-range-end";
var MENU_CLASS = "dx-menu";
var EDITOR_WITH_MENU_CLASS = "dx-editor-with-menu";
var EDITOR_CONTAINER_CLASS = "dx-editor-container";
var EDITOR_CELL_CLASS3 = "dx-editor-cell";
var FILTER_MENU = "dx-filter-menu";
var APPLY_BUTTON_CLASS = "dx-apply-button";
var HIGHLIGHT_OUTLINE_CLASS = "dx-highlight-outline";
var FOCUSED_CLASS = "dx-focused";
var CELL_FOCUS_DISABLED_CLASS5 = "dx-cell-focus-disabled";
var FILTER_RANGE_CONTENT_CLASS = "dx-filter-range-content";
var FILTER_MODIFIED_CLASS = "dx-filter-modified";
var EDITORS_INPUT_SELECTOR2 = "input:not([type='hidden'])";
var BETWEEN_OPERATION_DATA_TYPES = ["date", "datetime", "number"];
var ARIA_SEARCH_BOX = message_default.format("dxDataGrid-ariaSearchBox");
function isOnClickApplyFilterMode(that) {
  return "onClick" === that.option("filterRow.applyFilter");
}
var getEditorInstance = function($editorContainer) {
  var $editor = $editorContainer && $editorContainer.children();
  var componentNames = $editor && $editor.data("dxComponents");
  var editor = componentNames && componentNames.length && $editor.data(componentNames[0]);
  if (editor instanceof editor_default) {
    return editor;
  }
  return null;
};
var getRangeTextByFilterValue = function(that, column) {
  var result2 = "";
  var rangeEnd = "";
  var filterValue = getColumnFilterValue(that, column);
  var formatOptions = m_utils_default.getFormatOptionsByColumn(column, "filterRow");
  if (Array.isArray(filterValue)) {
    result2 = m_utils_default.formatValue(filterValue[0], formatOptions);
    rangeEnd = m_utils_default.formatValue(filterValue[1], formatOptions);
    if ("" !== rangeEnd) {
      result2 += " - ".concat(rangeEnd);
    }
  } else if (isDefined(filterValue)) {
    result2 = m_utils_default.formatValue(filterValue, formatOptions);
  }
  return result2;
};
function getColumnFilterValue(that, column) {
  if (column) {
    return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedFilterValue ? column.bufferedFilterValue : column.filterValue;
  }
}
var getColumnSelectedFilterOperation = function(that, column) {
  if (column) {
    return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedSelectedFilterOperation ? column.bufferedSelectedFilterOperation : column.selectedFilterOperation;
  }
};
var isValidFilterValue = function(filterValue, column) {
  if (column && BETWEEN_OPERATION_DATA_TYPES.includes(column.dataType) && Array.isArray(filterValue)) {
    return false;
  }
  return void 0 !== filterValue;
};
var getFilterValue2 = function(that, columnIndex, $editorContainer) {
  var column = that._columnsController.columnOption(columnIndex);
  var filterValue = getColumnFilterValue(that, column);
  var isFilterRange = $editorContainer.closest(".".concat(that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS))).length;
  var isRangeStart = $editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS));
  if (filterValue && Array.isArray(filterValue) && "between" === getColumnSelectedFilterOperation(that, column)) {
    if (isRangeStart) {
      return filterValue[0];
    }
    return filterValue[1];
  }
  return !isFilterRange && isValidFilterValue(filterValue, column) ? filterValue : null;
};
var normalizeFilterValue = function(that, filterValue, column, $editorContainer) {
  if ("between" === getColumnSelectedFilterOperation(that, column)) {
    var columnFilterValue = getColumnFilterValue(that, column);
    if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {
      return [filterValue, Array.isArray(columnFilterValue) ? columnFilterValue[1] : void 0];
    }
    return [Array.isArray(columnFilterValue) ? columnFilterValue[0] : columnFilterValue, filterValue];
  }
  return filterValue;
};
var updateFilterValue = function(that, options2) {
  var value2 = "" === options2.value ? null : options2.value;
  var $editorContainer = options2.container;
  var column = that._columnsController.columnOption(options2.column.index);
  var filterValue = getFilterValue2(that, column.index, $editorContainer);
  if (!isDefined(filterValue) && !isDefined(value2)) {
    return;
  }
  that._applyFilterViewController.setHighLight($editorContainer, filterValue !== value2);
  var columnOptionName = isOnClickApplyFilterMode(that) ? "bufferedFilterValue" : "filterValue";
  var normalizedValue = normalizeFilterValue(that, value2, column, $editorContainer);
  var isBetween = "between" === getColumnSelectedFilterOperation(that, column);
  var notFireEvent = options2.notFireEvent || isBetween && Array.isArray(normalizedValue) && normalizedValue.includes(void 0);
  that._columnsController.columnOption(column.index, columnOptionName, normalizedValue, notFireEvent);
};
var columnHeadersView3 = (Base) => class extends Base {
  init() {
    super.init();
    this._applyFilterViewController = this.getController("applyFilter");
  }
  optionChanged(args) {
    switch (args.name) {
      case "filterRow":
      case "showColumnLines":
        this._invalidate(true, true);
        args.handled = true;
        break;
      case "syncLookupFilterValues":
        if (args.value) {
          this.updateLookupDataSource();
        } else {
          this.render();
        }
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _updateEditorValue(column, $editorContainer) {
    var editor = getEditorInstance($editorContainer);
    editor && editor.option("value", getFilterValue2(this, column.index, $editorContainer));
  }
  _columnOptionChanged(e) {
    var _a;
    var {
      optionNames
    } = e;
    var $cell;
    var $editorContainer;
    var $editorRangeElements;
    var $menu;
    if (m_utils_default.checkChanges(optionNames, ["filterValue", "bufferedFilterValue", "selectedFilterOperation", "bufferedSelectedFilterOperation", "filterValues", "filterType"]) && void 0 !== e.columnIndex) {
      var visibleIndex = this._columnsController.getVisibleIndex(e.columnIndex);
      var column = this._columnsController.columnOption(e.columnIndex);
      $cell = null !== (_a = this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(FILTER_ROW_CLASS3))).index(), visibleIndex)) && void 0 !== _a ? _a : renderer_default();
      $editorContainer = $cell.find(".".concat(EDITOR_CONTAINER_CLASS)).first();
      if (optionNames.filterValue || optionNames.bufferedFilterValue) {
        this._updateEditorValue(column, $editorContainer);
        var overlayInstance = $cell.find(".".concat(this.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS))).data("dxOverlay");
        if (overlayInstance) {
          $editorRangeElements = overlayInstance.$content().find(".".concat(EDITOR_CONTAINER_CLASS));
          this._updateEditorValue(column, $editorRangeElements.first());
          this._updateEditorValue(column, $editorRangeElements.last());
        }
        if (!overlayInstance || !overlayInstance.option("visible")) {
          this._updateFilterRangeContent($cell, getRangeTextByFilterValue(this, column));
        }
      }
      if (optionNames.selectedFilterOperation || optionNames.bufferedSelectedFilterOperation) {
        if (visibleIndex >= 0 && column) {
          $menu = $cell.find(".".concat(MENU_CLASS));
          if ($menu.length) {
            this._updateFilterOperationChooser($menu, column, $editorContainer);
            if ("between" === getColumnSelectedFilterOperation(this, column)) {
              this._renderFilterRangeContent($cell, column);
            } else if ($editorContainer.find(".".concat(FILTER_RANGE_CONTENT_CLASS)).length) {
              this._renderEditor($editorContainer, this._getEditorOptions($editorContainer, column));
              this._hideFilterRange();
            }
          }
        }
      }
      return;
    }
    super._columnOptionChanged(e);
  }
  _renderCore() {
    this._filterRangeOverlayInstance = null;
    return super._renderCore.apply(this, arguments);
  }
  _resizeCore() {
    var _a;
    super._resizeCore.apply(this, arguments);
    null === (_a = this._filterRangeOverlayInstance) || void 0 === _a ? void 0 : _a.repaint();
  }
  isFilterRowVisible() {
    return this._isElementVisible(this.option("filterRow"));
  }
  isVisible() {
    return super.isVisible() || this.isFilterRowVisible();
  }
  _initFilterRangeOverlay($cell, column) {
    var that = this;
    var sharedData = {};
    var $editorContainer = $cell.find(".dx-editor-container");
    var filterRangeOverlayClass = that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS);
    var $overlay = renderer_default("<div>").addClass(filterRangeOverlayClass).appendTo($cell);
    return that._createComponent($overlay, ui_overlay_default, {
      height: "auto",
      shading: false,
      showTitle: false,
      focusStateEnabled: false,
      hideOnOutsideClick: true,
      wrapperAttr: {
        class: filterRangeOverlayClass
      },
      animation: false,
      position: {
        my: "top",
        at: "top",
        of: $editorContainer.length && $editorContainer || $cell,
        offset: "0 -1"
      },
      contentTemplate(contentElement) {
        var editorOptions;
        var $editor = renderer_default("<div>").addClass("".concat(EDITOR_CONTAINER_CLASS, " ").concat(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))).appendTo(contentElement);
        column = that._columnsController.columnOption(column.index);
        editorOptions = that._getEditorOptions($editor, column);
        editorOptions.sharedData = sharedData;
        that._renderEditor($editor, editorOptions);
        events_engine_default.on($editor.find(EDITORS_INPUT_SELECTOR2), "keydown", (e) => {
          var $prevElement = $cell.find("[tabindex]").not(e.target).first();
          if ("tab" === normalizeKeyName(e) && e.shiftKey) {
            e.preventDefault();
            that._hideFilterRange();
            if (!$prevElement.length) {
              $prevElement = $cell.prev().find("[tabindex]").last();
            }
            events_engine_default.trigger($prevElement, "focus");
          }
        });
        $editor = renderer_default("<div>").addClass("".concat(EDITOR_CONTAINER_CLASS, " ").concat(that.addWidgetPrefix(FILTER_RANGE_END_CLASS))).appendTo(contentElement);
        editorOptions = that._getEditorOptions($editor, column);
        editorOptions.sharedData = sharedData;
        that._renderEditor($editor, editorOptions);
        events_engine_default.on($editor.find(EDITORS_INPUT_SELECTOR2), "keydown", (e) => {
          if ("tab" === normalizeKeyName(e) && !e.shiftKey) {
            e.preventDefault();
            that._hideFilterRange();
            events_engine_default.trigger($cell.next().find("[tabindex]").first(), "focus");
          }
        });
        return renderer_default(contentElement).addClass(that.getWidgetContainerClass());
      },
      onShown(e) {
        var $editor = e.component.$content().find(".".concat(EDITOR_CONTAINER_CLASS)).first();
        events_engine_default.trigger($editor.find(EDITORS_INPUT_SELECTOR2), "focus");
      },
      onHidden() {
        column = that._columnsController.columnOption(column.index);
        $cell.find(".".concat(MENU_CLASS)).parent().addClass(EDITOR_WITH_MENU_CLASS);
        if ("between" === getColumnSelectedFilterOperation(that, column)) {
          that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));
          that.component.updateDimensions();
        }
      }
    });
  }
  _updateFilterRangeOverlay(options2) {
    var overlayInstance = this._filterRangeOverlayInstance;
    overlayInstance && overlayInstance.option(options2);
  }
  _showFilterRange($cell, column) {
    var $overlay = $cell.children(".".concat(this.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)));
    var overlayInstance = $overlay.length && $overlay.data("dxOverlay");
    if (!overlayInstance && column) {
      overlayInstance = this._initFilterRangeOverlay($cell, column);
    }
    if (!overlayInstance.option("visible")) {
      this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.hide();
      this._filterRangeOverlayInstance = overlayInstance;
      this._updateFilterRangeOverlay({
        width: getOuterWidth($cell, true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH
      });
      this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.show();
    }
  }
  _hideFilterRange() {
    var overlayInstance = this._filterRangeOverlayInstance;
    overlayInstance && overlayInstance.hide();
  }
  getFilterRangeOverlayInstance() {
    return this._filterRangeOverlayInstance;
  }
  _createRow(row) {
    var $row = super._createRow(row);
    if ("filter" === row.rowType) {
      $row.addClass(this.addWidgetPrefix(FILTER_ROW_CLASS3));
      if (!this.option("useLegacyKeyboardNavigation")) {
        events_engine_default.on($row, "keydown", (event) => selectView("filterRow", this, event));
      }
    }
    return $row;
  }
  _getRows() {
    var result2 = super._getRows();
    if (this.isFilterRowVisible()) {
      result2.push({
        rowType: "filter"
      });
    }
    return result2;
  }
  _renderFilterCell(cell, options2) {
    var {
      column
    } = options2;
    var $cell = renderer_default(cell);
    if (this.component.option("showColumnHeaders")) {
      this.setAria("describedby", column.headerId, $cell);
    }
    this.setAria("label", message_default.format("dxDataGrid-ariaFilterCell"), $cell);
    $cell.addClass(EDITOR_CELL_CLASS3);
    var $container = renderer_default("<div>").appendTo($cell);
    var $editorContainer = renderer_default("<div>").addClass(EDITOR_CONTAINER_CLASS).appendTo($container);
    if ("between" === getColumnSelectedFilterOperation(this, column)) {
      this._renderFilterRangeContent($cell, column);
    } else {
      var editorOptions = this._getEditorOptions($editorContainer, column);
      this._renderEditor($editorContainer, editorOptions);
    }
    var {
      alignment
    } = column;
    if (alignment && "center" !== alignment) {
      $cell.find(EDITORS_INPUT_SELECTOR2).first().css("textAlign", column.alignment);
    }
    if (column.filterOperations && column.filterOperations.length) {
      this._renderFilterOperationChooser($container, column, $editorContainer);
    }
  }
  _renderCellContent($cell, options2) {
    var that = this;
    var {
      column
    } = options2;
    if ("filter" === options2.rowType) {
      if (column.command) {
        $cell.html("&nbsp;");
      } else if (column.allowFiltering) {
        that.renderTemplate($cell, that._renderFilterCell.bind(that), options2).done(() => {
          that._updateCell($cell, options2);
        });
        return;
      }
    }
    super._renderCellContent.apply(this, arguments);
  }
  _getEditorOptions($editorContainer, column) {
    var that = this;
    var accessibilityOptions = {
      editorOptions: {
        inputAttr: that._getFilterInputAccessibilityAttributes(column)
      }
    };
    var result2 = extend(accessibilityOptions, column, {
      value: getFilterValue2(that, column.index, $editorContainer),
      parentType: "filterRow",
      showAllText: that.option("filterRow.showAllText"),
      updateValueTimeout: "onClick" === that.option("filterRow.applyFilter") ? 0 : FILTERING_TIMEOUT,
      width: null,
      setValue(value2, notFireEvent) {
        updateFilterValue(that, {
          column,
          value: value2,
          container: $editorContainer,
          notFireEvent
        });
      }
    });
    if ("between" === getColumnSelectedFilterOperation(that, column)) {
      if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {
        result2.placeholder = that.option("filterRow.betweenStartText");
      } else {
        result2.placeholder = that.option("filterRow.betweenEndText");
      }
    }
    return result2;
  }
  _getFilterInputAccessibilityAttributes(column) {
    var columnAriaLabel = message_default.format("dxDataGrid-ariaFilterCell");
    if (this.component.option("showColumnHeaders")) {
      return {
        "aria-label": columnAriaLabel,
        "aria-describedby": column.headerId
      };
    }
    return {
      "aria-label": columnAriaLabel
    };
  }
  _renderEditor($editorContainer, options2) {
    $editorContainer.empty();
    var $element = renderer_default("<div>").appendTo($editorContainer);
    var dataSource = this._dataController.dataSource();
    if (options2.lookup && this.option("syncLookupFilterValues")) {
      this._applyFilterViewController.setCurrentColumnForFiltering(options2);
      var filter = this._dataController.getCombinedFilter();
      this._applyFilterViewController.setCurrentColumnForFiltering(null);
      var lookupDataSource = m_utils_default.getWrappedLookupDataSource(options2, dataSource, filter);
      var lookupOptions = _extends(_extends({}, options2), {
        lookup: _extends(_extends({}, options2.lookup), {
          dataSource: lookupDataSource
        })
      });
      return this._editorFactoryController.createEditor($element, lookupOptions);
    }
    return this._editorFactoryController.createEditor($element, options2);
  }
  _renderFilterRangeContent($cell, column) {
    var that = this;
    var $editorContainer = $cell.find(".".concat(EDITOR_CONTAINER_CLASS)).first();
    $editorContainer.empty();
    var $filterRangeContent = renderer_default("<div>").addClass(FILTER_RANGE_CONTENT_CLASS).attr("tabindex", this.option("tabIndex"));
    events_engine_default.on($filterRangeContent, "focusin", () => {
      that._showFilterRange($cell, column);
    });
    $filterRangeContent.appendTo($editorContainer);
    that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));
  }
  _updateFilterRangeContent($cell, value2) {
    var $filterRangeContent = $cell.find(".".concat(FILTER_RANGE_CONTENT_CLASS));
    if ($filterRangeContent.length) {
      if ("" === value2) {
        $filterRangeContent.html("&nbsp;");
      } else {
        $filterRangeContent.text(value2);
      }
    }
  }
  _updateFilterOperationChooser($menu, column, $editorContainer) {
    var that = this;
    var isCellWasFocused;
    var restoreFocus3 = function() {
      var menu = menu_default.getInstance($menu);
      menu && menu.option("focusedElement", null);
      isCellWasFocused && that._focusEditor($editorContainer);
    };
    var editorFactoryController = this._editorFactoryController;
    that._createComponent($menu, menu_default, {
      integrationOptions: {},
      activeStateEnabled: false,
      selectionMode: "single",
      cssClass: "".concat(that.getWidgetContainerClass(), " ").concat(CELL_FOCUS_DISABLED_CLASS5, " ").concat(FILTER_MENU),
      showFirstSubmenuMode: "onHover",
      hideSubmenuOnMouseLeave: true,
      items: [{
        disabled: !(column.filterOperations && column.filterOperations.length),
        icon: OPERATION_ICONS[getColumnSelectedFilterOperation(that, column) || "default"],
        selectable: false,
        items: that._getFilterOperationMenuItems(column)
      }],
      onItemRendered: (_ref) => {
        var {
          itemElement
        } = _ref;
        this.setAria("label", ARIA_SEARCH_BOX, renderer_default(itemElement));
      },
      onItemClick(properties) {
        var selectedFilterOperation = properties.itemData.name;
        var columnSelectedFilterOperation = getColumnSelectedFilterOperation(that, column);
        var notFocusEditor = false;
        var isOnClickMode = isOnClickApplyFilterMode(that);
        var options2 = {};
        if (properties.itemData.items || selectedFilterOperation && selectedFilterOperation === columnSelectedFilterOperation) {
          return;
        }
        if (selectedFilterOperation) {
          options2[isOnClickMode ? "bufferedSelectedFilterOperation" : "selectedFilterOperation"] = selectedFilterOperation;
          if ("between" === selectedFilterOperation || "between" === columnSelectedFilterOperation) {
            notFocusEditor = "between" === selectedFilterOperation;
            options2[isOnClickMode ? "bufferedFilterValue" : "filterValue"] = null;
          }
        } else {
          options2[isOnClickMode ? "bufferedFilterValue" : "filterValue"] = null;
          options2[isOnClickMode ? "bufferedSelectedFilterOperation" : "selectedFilterOperation"] = column.defaultSelectedFilterOperation || null;
        }
        that._columnsController.columnOption(column.index, options2);
        that._applyFilterViewController.setHighLight($editorContainer, true);
        if (!selectedFilterOperation) {
          var editor = getEditorInstance($editorContainer);
          if (editor && "dxDateBox" === editor.NAME && !editor.option("isValid")) {
            editor.clear();
            editor.option("isValid", true);
          }
        }
        if (!notFocusEditor) {
          that._focusEditor($editorContainer);
        } else {
          that._showFilterRange($editorContainer.closest(".".concat(EDITOR_CELL_CLASS3)), column);
        }
      },
      onSubmenuShowing() {
        isCellWasFocused = that._isEditorFocused($editorContainer);
        editorFactoryController.loseFocus();
      },
      onSubmenuHiding() {
        events_engine_default.trigger($menu, "blur");
        restoreFocus3();
      },
      onContentReady(e) {
        events_engine_default.on($menu, "blur", () => {
          var menu = e.component;
          menu._hideSubmenuAfterTimeout();
          restoreFocus3();
        });
      },
      rtlEnabled: that.option("rtlEnabled")
    });
  }
  _isEditorFocused($container) {
    return $container.hasClass(FOCUSED_CLASS) || $container.parents(".".concat(FOCUSED_CLASS)).length;
  }
  _focusEditor($container) {
    this._editorFactoryController.focus($container);
    events_engine_default.trigger($container.find(EDITORS_INPUT_SELECTOR2), "focus");
  }
  _renderFilterOperationChooser($container, column, $editorContainer) {
    var $menu;
    if (this.option("filterRow.showOperationChooser")) {
      $container.addClass(EDITOR_WITH_MENU_CLASS);
      $menu = renderer_default("<div>").prependTo($container);
      this._updateFilterOperationChooser($menu, column, $editorContainer);
    }
  }
  _getFilterOperationMenuItems(column) {
    var that = this;
    var result2 = [{}];
    var filterRowOptions = that.option("filterRow");
    var operationDescriptions = filterRowOptions && filterRowOptions.operationDescriptions || {};
    if (column.filterOperations && column.filterOperations.length) {
      var availableFilterOperations = column.filterOperations.filter((value2) => isDefined(OPERATION_DESCRIPTORS[value2]));
      result2 = map(availableFilterOperations, (value2) => {
        var descriptionName = OPERATION_DESCRIPTORS[value2];
        return {
          name: value2,
          selected: (getColumnSelectedFilterOperation(that, column) || column.defaultFilterOperation) === value2,
          text: operationDescriptions[descriptionName],
          icon: OPERATION_ICONS[value2]
        };
      });
      result2.push({
        name: null,
        text: filterRowOptions && filterRowOptions.resetOperationText,
        icon: OPERATION_ICONS.default
      });
    }
    return result2;
  }
  _handleDataChanged(e) {
    var _a, _b, _c, _d, _e, _f;
    var dataSource = null === (_b = null === (_a = this._dataController) || void 0 === _a ? void 0 : _a.dataSource) || void 0 === _b ? void 0 : _b.call(_a);
    var lastLoadOptions = null === (_c = null === dataSource || void 0 === dataSource ? void 0 : dataSource.lastLoadOptions) || void 0 === _c ? void 0 : _c.call(dataSource);
    super._handleDataChanged.apply(this, arguments);
    if ((null === (_d = e.operationTypes) || void 0 === _d ? void 0 : _d.filtering) || (null === (_e = e.operationTypes) || void 0 === _e ? void 0 : _e.fullReload)) {
      this.updateLookupDataSource((null === (_f = e.operationTypes) || void 0 === _f ? void 0 : _f.filtering) || (null === lastLoadOptions || void 0 === lastLoadOptions ? void 0 : lastLoadOptions.filter));
    }
  }
  updateLookupDataSource(filterChanged) {
    if (!this.option("syncLookupFilterValues")) {
      return;
    }
    if (!this.element()) {
      return;
    }
    var columns7 = this._columnsController.getVisibleColumns();
    var dataSource = this._dataController.dataSource();
    var applyFilterViewController = this._applyFilterViewController;
    var rowIndex = this.element().find(".".concat(this.addWidgetPrefix(FILTER_ROW_CLASS3))).index();
    if (-1 === rowIndex) {
      return;
    }
    columns7.forEach((column, index) => {
      if (!column.lookup || column.calculateCellValue !== column.defaultCalculateCellValue) {
        return;
      }
      var $cell = this._getCellElement(rowIndex, index);
      var editor = getEditorInstance(null === $cell || void 0 === $cell ? void 0 : $cell.find(".dx-editor-container"));
      if (editor) {
        applyFilterViewController.setCurrentColumnForFiltering(column);
        var filter = this._dataController.getCombinedFilter() || null;
        applyFilterViewController.setCurrentColumnForFiltering(null);
        var editorDataSource = editor.option("dataSource");
        var shouldUpdateFilter = !filterChanged || !equalByValue(editorDataSource.__dataGridSourceFilter || null, filter);
        if (shouldUpdateFilter) {
          var lookupDataSource = m_utils_default.getWrappedLookupDataSource(column, dataSource, filter);
          editor.option("dataSource", lookupDataSource);
        }
      }
    });
  }
};
var data8 = (Base) => class extends Base {
  skipCalculateColumnFilters() {
    return false;
  }
  _calculateAdditionalFilter() {
    if (this.skipCalculateColumnFilters()) {
      return super._calculateAdditionalFilter();
    }
    var filters = [super._calculateAdditionalFilter()];
    var columns7 = this._columnsController.getVisibleColumns(null, true);
    var applyFilterController = this._applyFilterController;
    each(columns7, function() {
      var _a;
      var shouldSkip = (null === (_a = applyFilterController.getCurrentColumnForFiltering()) || void 0 === _a ? void 0 : _a.index) === this.index;
      if (this.allowFiltering && this.calculateFilterExpression && isDefined(this.filterValue) && !shouldSkip) {
        var filter = this.createFilterExpression(this.filterValue, this.selectedFilterOperation || this.defaultFilterOperation, "filterRow");
        filters.push(filter);
      }
    });
    return m_utils_default.combineFilters(filters);
  }
};
var ApplyFilterViewController = class extends m_modules_default.ViewController {
  init() {
    this._columnsController = this.getController("columns");
  }
  _getHeaderPanel() {
    if (!this._headerPanel) {
      this._headerPanel = this.getView("headerPanel");
    }
    return this._headerPanel;
  }
  setHighLight($element, value2) {
    if (isOnClickApplyFilterMode(this)) {
      $element && $element.toggleClass(HIGHLIGHT_OUTLINE_CLASS, value2) && $element.closest(".".concat(EDITOR_CELL_CLASS3)).toggleClass(FILTER_MODIFIED_CLASS, value2);
      this._getHeaderPanel().enableApplyButton(value2);
    }
  }
  applyFilter() {
    var columns7 = this._columnsController.getColumns();
    this._columnsController.beginUpdate();
    for (var i = 0; i < columns7.length; i++) {
      var column = columns7[i];
      if (void 0 !== column.bufferedFilterValue) {
        this._columnsController.columnOption(i, "filterValue", column.bufferedFilterValue);
        column.bufferedFilterValue = void 0;
      }
      if (void 0 !== column.bufferedSelectedFilterOperation) {
        this._columnsController.columnOption(i, "selectedFilterOperation", column.bufferedSelectedFilterOperation);
        column.bufferedSelectedFilterOperation = void 0;
      }
    }
    this._columnsController.endUpdate();
    this.removeHighLights();
  }
  removeHighLights() {
    if (isOnClickApplyFilterMode(this)) {
      var columnHeadersViewElement = this.getView("columnHeadersView").element();
      columnHeadersViewElement.find(".".concat(this.addWidgetPrefix(FILTER_ROW_CLASS3), " .").concat(HIGHLIGHT_OUTLINE_CLASS)).removeClass(HIGHLIGHT_OUTLINE_CLASS);
      columnHeadersViewElement.find(".".concat(this.addWidgetPrefix(FILTER_ROW_CLASS3), " .").concat(FILTER_MODIFIED_CLASS)).removeClass(FILTER_MODIFIED_CLASS);
      this._getHeaderPanel().enableApplyButton(false);
    }
  }
  setCurrentColumnForFiltering(column) {
    this._currentColumn = column;
  }
  getCurrentColumnForFiltering() {
    return this._currentColumn;
  }
};
var columnsResizer = (Base) => class extends Base {
  _startResizing() {
    super._startResizing.apply(this, arguments);
    if (this.isResizing()) {
      var overlayInstance = this._columnHeadersView.getFilterRangeOverlayInstance();
      if (overlayInstance) {
        var cellIndex = overlayInstance.$element().closest("td").index();
        if (cellIndex === this._targetPoint.columnIndex || cellIndex === this._targetPoint.columnIndex + 1) {
          overlayInstance.$content().hide();
        }
      }
    }
  }
  _endResizing() {
    var $cell;
    if (this.isResizing()) {
      var overlayInstance = this._columnHeadersView.getFilterRangeOverlayInstance();
      if (overlayInstance) {
        $cell = overlayInstance.$element().closest("td");
        this._columnHeadersView._updateFilterRangeOverlay({
          width: getOuterWidth($cell, true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH
        });
        overlayInstance.$content().show();
      }
    }
    super._endResizing.apply(this, arguments);
  }
};
var editing = (Base) => class extends Base {
  updateFieldValue(options2) {
    if (options2.column.lookup) {
      this._needUpdateLookupDataSource = true;
    }
    return super.updateFieldValue.apply(this, arguments);
  }
  _afterSaveEditData(cancel) {
    var _a;
    if (this._needUpdateLookupDataSource && !cancel) {
      null === (_a = this.getView("columnHeadersView")) || void 0 === _a ? void 0 : _a.updateLookupDataSource();
    }
    this._needUpdateLookupDataSource = false;
    return super._afterSaveEditData.apply(this, arguments);
  }
  _afterCancelEditData() {
    this._needUpdateLookupDataSource = false;
    return super._afterCancelEditData.apply(this, arguments);
  }
};
var headerPanel4 = (Base) => class extends Base {
  init() {
    super.init();
    this._dataController = this.getController("data");
    this._applyFilterViewController = this.getController("applyFilter");
  }
  optionChanged(args) {
    if ("filterRow" === args.name) {
      this._invalidate();
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _getToolbarItems() {
    var items = super._getToolbarItems();
    var filterItem = this._prepareFilterItem();
    return filterItem.concat(items);
  }
  _prepareFilterItem() {
    var that = this;
    var filterItem = [];
    if (that._isShowApplyFilterButton()) {
      var hintText = that.option("filterRow.applyFilterText");
      var columns7 = that._columnsController.getColumns();
      var disabled = !columns7.filter((column) => void 0 !== column.bufferedFilterValue).length;
      var toolbarItem = {
        widget: "dxButton",
        options: {
          icon: "apply-filter",
          disabled,
          onClick: function() {
            that._applyFilterViewController.applyFilter();
          },
          hint: hintText,
          text: hintText,
          onInitialized: function(e) {
            renderer_default(e.element).addClass(that._getToolbarButtonClass(APPLY_BUTTON_CLASS));
          }
        },
        showText: "inMenu",
        name: "applyFilterButton",
        location: "after",
        locateInMenu: "auto",
        sortIndex: 10
      };
      filterItem.push(toolbarItem);
    }
    return filterItem;
  }
  _isShowApplyFilterButton() {
    var filterRowOptions = this.option("filterRow");
    return !!(null === filterRowOptions || void 0 === filterRowOptions ? void 0 : filterRowOptions.visible) && "onClick" === filterRowOptions.applyFilter;
  }
  enableApplyButton(value2) {
    this.setToolbarItemDisabled("applyFilterButton", !value2);
  }
};
var filterRowModule = {
  defaultOptions: () => ({
    syncLookupFilterValues: true,
    filterRow: {
      visible: false,
      showOperationChooser: true,
      showAllText: message_default.format("dxDataGrid-filterRowShowAllText"),
      resetOperationText: message_default.format("dxDataGrid-filterRowResetOperationText"),
      applyFilter: "auto",
      applyFilterText: message_default.format("dxDataGrid-applyFilterText"),
      operationDescriptions: {
        equal: message_default.format("dxDataGrid-filterRowOperationEquals"),
        notEqual: message_default.format("dxDataGrid-filterRowOperationNotEquals"),
        lessThan: message_default.format("dxDataGrid-filterRowOperationLess"),
        lessThanOrEqual: message_default.format("dxDataGrid-filterRowOperationLessOrEquals"),
        greaterThan: message_default.format("dxDataGrid-filterRowOperationGreater"),
        greaterThanOrEqual: message_default.format("dxDataGrid-filterRowOperationGreaterOrEquals"),
        startsWith: message_default.format("dxDataGrid-filterRowOperationStartsWith"),
        contains: message_default.format("dxDataGrid-filterRowOperationContains"),
        notContains: message_default.format("dxDataGrid-filterRowOperationNotContains"),
        endsWith: message_default.format("dxDataGrid-filterRowOperationEndsWith"),
        between: message_default.format("dxDataGrid-filterRowOperationBetween"),
        isBlank: message_default.format("dxFilterBuilder-filterOperationIsBlank"),
        isNotBlank: message_default.format("dxFilterBuilder-filterOperationIsNotBlank")
      },
      betweenStartText: message_default.format("dxDataGrid-filterRowOperationBetweenStartText"),
      betweenEndText: message_default.format("dxDataGrid-filterRowOperationBetweenEndText")
    }
  }),
  controllers: {
    applyFilter: ApplyFilterViewController
  },
  extenders: {
    controllers: {
      data: data8,
      columnsResizer,
      editing
    },
    views: {
      columnHeadersView: columnHeadersView3,
      headerPanel: headerPanel4
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/filter_row.js
m_core_default.registerModule("filterRow", filterRowModule);

// node_modules/devextreme/esm/__internal/ui/list/modules/m_search.js
ui_search_box_mixin_default.setEditorClass(text_box_default2);

// node_modules/devextreme/esm/__internal/grids/grid_core/header_filter/m_header_filter_core.js
var HEADER_FILTER_CLASS = "dx-header-filter";
var HEADER_FILTER_MENU_CLASS = "dx-header-filter-menu";
var DEFAULT_SEARCH_EXPRESSION = "text";
function resetChildrenItemSelection(items) {
  items = items || [];
  for (var i = 0; i < items.length; i++) {
    items[i].selected = false;
    resetChildrenItemSelection(items[i].items);
  }
}
function getSelectAllCheckBox(listComponent) {
  var selector = "dxTreeView" === listComponent.NAME ? ".dx-treeview-select-all-item" : ".dx-list-select-all-checkbox";
  return listComponent.$element().find(selector).dxCheckBox("instance");
}
function updateListSelectAllState(e, filterValues) {
  if (e.component.option("searchValue")) {
    return;
  }
  var selectAllCheckBox = getSelectAllCheckBox(e.component);
  if (selectAllCheckBox && filterValues && filterValues.length) {
    selectAllCheckBox.option("value", void 0);
  }
}
function updateHeaderFilterItemSelectionState(item, filterValuesMatch, isExcludeFilter) {
  if (filterValuesMatch ^ isExcludeFilter) {
    item.selected = true;
    if (isExcludeFilter && item.items) {
      for (var j = 0; j < item.items.length; j++) {
        if (!item.items[j].selected) {
          item.selected = void 0;
          break;
        }
      }
    }
  } else if (isExcludeFilter || item.selected) {
    item.selected = false;
    resetChildrenItemSelection(item.items);
  }
}
var HeaderFilterView = class extends m_modules_default.View {
  getPopupContainer() {
    return this._popupContainer;
  }
  getListComponent() {
    return this._listComponent;
  }
  applyHeaderFilter(options2) {
    var list = this.getListComponent();
    var searchValue = list.option("searchValue");
    var selectAllCheckBox = getSelectAllCheckBox(list);
    var isAllSelected = !searchValue && !options2.isFilterBuilder && (null === selectAllCheckBox || void 0 === selectAllCheckBox ? void 0 : selectAllCheckBox.option("value"));
    var filterValues = [];
    if (!isAllSelected) {
      if ("tree" === options2.type) {
        if (options2.filterType) {
          options2.filterType = "include";
        }
        !function fillSelectedItemKeys(filterValues2, items, isExclude) {
          each(items, (_, item) => {
            if (void 0 !== item.selected && !!item.selected ^ isExclude) {
              var node = list._getNode(item);
              var hasChildren = list._hasChildren(node);
              var hasChildrenWithSelection = hasChildren && item.items && item.items.some((item2) => item2.selected);
              if (!searchValue || !hasChildrenWithSelection) {
                filterValues2.push(item.value);
                return;
              }
            }
            if (item.items && item.items.length) {
              fillSelectedItemKeys(filterValues2, item.items, isExclude);
            }
          });
        }(filterValues, list.option("items"), false);
        options2.filterValues = filterValues;
      }
    } else {
      if ("tree" === options2.type) {
        options2.filterType = "exclude";
      }
      if (Array.isArray(options2.filterValues)) {
        options2.filterValues = [];
      }
    }
    if (options2.filterValues && !options2.filterValues.length) {
      options2.filterValues = null;
    }
    options2.apply();
    this.hideHeaderFilterMenu();
  }
  showHeaderFilterMenu($columnElement, options2) {
    if (options2) {
      this._initializePopupContainer(options2);
      var popupContainer = this.getPopupContainer();
      this.hideHeaderFilterMenu();
      this.updatePopup($columnElement, options2);
      popupContainer.show();
    }
  }
  hideHeaderFilterMenu() {
    var headerFilterMenu = this.getPopupContainer();
    headerFilterMenu && headerFilterMenu.hide();
  }
  updatePopup($element, options2) {
    var showColumnLines = this.option("showColumnLines");
    var alignment = "right" === options2.alignment ^ !showColumnLines ? "left" : "right";
    this._popupContainer.setAria({
      role: "dialog",
      label: message_default.format("dxDataGrid-headerFilterLabel")
    });
    if (this._popupContainer) {
      this._cleanPopupContent();
      this._popupContainer.option("position", {
        my: "".concat(alignment, " top"),
        at: "".concat(alignment, " bottom"),
        of: $element,
        collision: "fit fit"
      });
    }
  }
  _getSearchExpr(options2, headerFilterOptions) {
    var {
      lookup
    } = options2;
    var {
      useDefaultSearchExpr
    } = options2;
    var headerFilterDataSource = headerFilterOptions.dataSource;
    var filterSearchExpr = headerFilterOptions.search.searchExpr;
    if (filterSearchExpr) {
      return filterSearchExpr;
    }
    if (useDefaultSearchExpr || isDefined(headerFilterDataSource) && !isFunction(headerFilterDataSource)) {
      return DEFAULT_SEARCH_EXPRESSION;
    }
    if (lookup) {
      return lookup.displayExpr || "this";
    }
    if (options2.dataSource) {
      var {
        group
      } = options2.dataSource;
      if (Array.isArray(group) && group.length > 0) {
        return group[0].selector;
      }
      if (isFunction(group) && !options2.remoteFiltering) {
        return group;
      }
    }
    return options2.dataField || options2.selector;
  }
  _cleanPopupContent() {
    this._popupContainer && this._popupContainer.$content().empty();
  }
  _initializePopupContainer(options2) {
    var that = this;
    var $element = that.element();
    var headerFilterOptions = this._normalizeHeaderFilterOptions(options2);
    var {
      height,
      width
    } = headerFilterOptions;
    var dxPopupOptions = {
      width,
      height,
      visible: false,
      shading: false,
      showTitle: false,
      showCloseButton: false,
      hideOnParentScroll: false,
      dragEnabled: false,
      hideOnOutsideClick: true,
      wrapperAttr: {
        class: HEADER_FILTER_MENU_CLASS
      },
      focusStateEnabled: false,
      toolbarItems: [{
        toolbar: "bottom",
        location: "after",
        widget: "dxButton",
        options: {
          text: headerFilterOptions.texts.ok,
          onClick() {
            that.applyHeaderFilter(options2);
          }
        }
      }, {
        toolbar: "bottom",
        location: "after",
        widget: "dxButton",
        options: {
          text: headerFilterOptions.texts.cancel,
          onClick() {
            that.hideHeaderFilterMenu();
          }
        }
      }],
      resizeEnabled: true,
      onShowing(e) {
        e.component.$content().parent().addClass("dx-dropdowneditor-overlay");
        that._initializeListContainer(options2, headerFilterOptions);
        options2.onShowing && options2.onShowing(e);
      },
      onShown() {
        that.getListComponent().focus();
      },
      onHidden: options2.onHidden,
      onInitialized(e) {
        var {
          component
        } = e;
        component.option("animation", component._getDefaultOptions().animation);
      }
    };
    if (!isDefined(that._popupContainer)) {
      that._popupContainer = that._createComponent($element, ui_popup_default, dxPopupOptions);
    } else {
      that._popupContainer.option(dxPopupOptions);
    }
  }
  _initializeListContainer(options2, headerFilterOptions) {
    var that = this;
    var $content = that._popupContainer.$content();
    var needShowSelectAllCheckbox = !options2.isFilterBuilder && headerFilterOptions.allowSelectAll;
    var widgetOptions = {
      searchEnabled: headerFilterOptions.search.enabled,
      searchTimeout: headerFilterOptions.search.timeout,
      searchEditorOptions: headerFilterOptions.search.editorOptions,
      searchMode: headerFilterOptions.search.mode || "",
      dataSource: options2.dataSource,
      onContentReady() {
        that.renderCompleted.fire();
      },
      itemTemplate(data17, _, element) {
        var $element = renderer_default(element);
        if (options2.encodeHtml) {
          return $element.text(data17.text);
        }
        return $element.html(data17.text);
      }
    };
    function onOptionChanged(e) {
      if ("searchValue" === e.fullName && needShowSelectAllCheckbox && false !== that.option("headerFilter.hideSelectAllOnSearch")) {
        if ("tree" === options2.type) {
          e.component.option("showCheckBoxesMode", e.value ? "normal" : "selectAll");
        } else {
          e.component.option("selectionMode", e.value ? "multiple" : "all");
        }
      }
    }
    if ("tree" === options2.type) {
      that._listComponent = that._createComponent(renderer_default("<div>").appendTo($content), tree_view_default, extend(widgetOptions, {
        showCheckBoxesMode: needShowSelectAllCheckbox ? "selectAll" : "normal",
        onOptionChanged,
        keyExpr: "id"
      }));
    } else {
      that._listComponent = that._createComponent(renderer_default("<div>").appendTo($content), list_light_default, extend(widgetOptions, {
        searchExpr: that._getSearchExpr(options2, headerFilterOptions),
        pageLoadMode: "scrollBottom",
        showSelectionControls: true,
        selectionMode: needShowSelectAllCheckbox ? "all" : "multiple",
        onOptionChanged,
        onSelectionChanged(e) {
          var items = e.component.option("items");
          var selectedItems = e.component.option("selectedItems");
          if (!e.component._selectedItemsUpdating && !e.component.option("searchValue") && !options2.isFilterBuilder) {
            var filterValues = options2.filterValues || [];
            var isExclude = "exclude" === options2.filterType;
            if (0 === selectedItems.length && items.length && (filterValues.length <= 1 || isExclude && filterValues.length === items.length - 1)) {
              options2.filterType = "include";
              options2.filterValues = [];
            } else if (selectedItems.length === items.length) {
              options2.filterType = "exclude";
              options2.filterValues = [];
            }
          }
          each(items, (index, item) => {
            var selected = m_utils_default.getIndexByKey(item, selectedItems, null) >= 0;
            var oldSelected = !!item.selected;
            if (oldSelected !== selected) {
              item.selected = selected;
              options2.filterValues = options2.filterValues || [];
              var filterValueIndex = m_utils_default.getIndexByKey(item.value, options2.filterValues, null);
              if (filterValueIndex >= 0) {
                options2.filterValues.splice(filterValueIndex, 1);
              }
              var isExcludeFilterType = "exclude" === options2.filterType;
              if (selected ^ isExcludeFilterType) {
                options2.filterValues.push(item.value);
              }
            }
          });
          updateListSelectAllState(e, options2.filterValues);
        },
        onContentReady(e) {
          var {
            component
          } = e;
          var items = component.option("items");
          var selectedItems = [];
          each(items, function() {
            if (this.selected) {
              selectedItems.push(this);
            }
          });
          component._selectedItemsUpdating = true;
          component.option("selectedItems", selectedItems);
          component._selectedItemsUpdating = false;
          updateListSelectAllState(e, options2.filterValues);
        }
      }));
    }
  }
  _normalizeHeaderFilterOptions(options2) {
    var generalHeaderFilter = this.option("headerFilter") || {};
    var specificHeaderFilter = options2.headerFilter || {};
    var generalDeprecated = {
      search: {
        enabled: generalHeaderFilter.allowSearch,
        timeout: generalHeaderFilter.searchTimeout
      }
    };
    var specificDeprecated = {
      search: {
        enabled: specificHeaderFilter.allowSearch,
        mode: specificHeaderFilter.searchMode,
        timeout: specificHeaderFilter.searchTimeout
      }
    };
    return extend(true, {}, generalHeaderFilter, generalDeprecated, specificHeaderFilter, specificDeprecated);
  }
  _renderCore() {
    this.element().addClass(HEADER_FILTER_MENU_CLASS);
  }
};
var allowHeaderFiltering = function(column) {
  return isDefined(column.allowHeaderFiltering) ? column.allowHeaderFiltering : column.allowFiltering;
};
var headerFilterMixin = (Base) => class extends Base {
  optionChanged(args) {
    if ("headerFilter" === args.name) {
      var requireReady = "columnHeadersView" === this.name;
      this._invalidate(requireReady, requireReady);
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _applyColumnState(options2) {
    var $headerFilterIndicator;
    var {
      rootElement
    } = options2;
    var {
      column
    } = options2;
    if ("headerFilter" === options2.name) {
      rootElement.find(".".concat(HEADER_FILTER_CLASS)).remove();
      if (allowHeaderFiltering(column)) {
        $headerFilterIndicator = super._applyColumnState(options2).toggleClass("dx-header-filter-empty", this._isHeaderFilterEmpty(column));
        if (!this.option("useLegacyKeyboardNavigation")) {
          $headerFilterIndicator.attr("tabindex", this.option("tabindex") || 0);
        }
        var indicatorLabel = message_default.format("dxDataGrid-headerFilterIndicatorLabel", column.caption);
        $headerFilterIndicator.attr("aria-label", indicatorLabel);
        $headerFilterIndicator.attr("aria-haspopup", "dialog");
        $headerFilterIndicator.attr("role", "button");
      }
      return $headerFilterIndicator;
    }
    return super._applyColumnState(options2);
  }
  _isHeaderFilterEmpty(column) {
    return !column.filterValues || !column.filterValues.length;
  }
  _getIndicatorClassName(name2) {
    if ("headerFilter" === name2) {
      return HEADER_FILTER_CLASS;
    }
    return super._getIndicatorClassName(name2);
  }
  _renderIndicator(options2) {
    var $container = options2.container;
    var $indicator = options2.indicator;
    if ("headerFilter" === options2.name) {
      var rtlEnabled = this.option("rtlEnabled");
      if ($container.children().length && (!rtlEnabled && "right" === options2.columnAlignment || rtlEnabled && "left" === options2.columnAlignment)) {
        $container.prepend($indicator);
        return;
      }
    }
    super._renderIndicator(options2);
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/header_filter/m_header_filter.js
var DATE_INTERVAL_FORMATS = {
  month: (value2) => date_default.getMonthNames()[value2 - 1],
  quarter: (value2) => date_default.format(new Date(2e3, 3 * value2 - 1), "quarter")
};
function ungroupUTCDates(items, dateParts, dates) {
  dateParts = dateParts || [];
  dates = dates || [];
  items.forEach((item) => {
    if (isDefined(item.key)) {
      var isMonthPart = 1 === dateParts.length;
      dateParts.push(isMonthPart ? item.key - 1 : item.key);
      if (item.items) {
        ungroupUTCDates(item.items, dateParts, dates);
      } else {
        var date = new Date(Date.UTC.apply(Date, dateParts));
        dates.push(date);
      }
      dateParts.pop();
    } else {
      dates.push(null);
    }
  });
  return dates;
}
function convertDataFromUTCToLocal(data17, column) {
  var dates = ungroupUTCDates(data17);
  var query = query_default(dates);
  var group = m_utils_default.getHeaderFilterGroupParameters(_extends(_extends({}, column), {
    calculateCellValue: (date) => date
  }));
  return store_helper_default.queryByOptions(query, {
    group
  }).toArray();
}
function isUTCFormat(format2) {
  return "Z" === (null === format2 || void 0 === format2 ? void 0 : format2.slice(-1)) || "'Z'" === (null === format2 || void 0 === format2 ? void 0 : format2.slice(-3));
}
var getFormatOptions = function(value2, column, currentLevel) {
  var groupInterval = filtering_default.getGroupInterval(column);
  var result2 = m_utils_default.getFormatOptionsByColumn(column, "headerFilter");
  if (groupInterval) {
    result2.groupInterval = groupInterval[currentLevel];
    if (m_utils_default.isDateType(column.dataType)) {
      result2.format = DATE_INTERVAL_FORMATS[groupInterval[currentLevel]];
    } else if ("number" === column.dataType) {
      result2.getDisplayFormat = function() {
        var formatOptions = {
          format: column.format,
          target: "headerFilter"
        };
        var firstValueText = m_utils_default.formatValue(value2, formatOptions);
        var secondValue = value2 + groupInterval[currentLevel];
        var secondValueText = m_utils_default.formatValue(secondValue, formatOptions);
        return firstValueText && secondValueText ? "".concat(firstValueText, " - ").concat(secondValueText) : "";
      };
    }
  }
  return result2;
};
var HeaderFilterController = class extends m_modules_default.ViewController {
  init() {
    this._columnsController = this.getController("columns");
    this._dataController = this.getController("data");
    this._headerFilterView = this.getView("headerFilterView");
  }
  _updateSelectedState(items, column) {
    var i = items.length;
    var isExclude = "exclude" === column.filterType;
    while (i--) {
      var item = items[i];
      if ("items" in items[i]) {
        this._updateSelectedState(items[i].items, column);
      }
      updateHeaderFilterItemSelectionState(item, m_utils_default.getIndexByKey(items[i].value, column.filterValues, null) > -1, isExclude);
    }
  }
  _normalizeGroupItem(item, currentLevel, options2) {
    var value2;
    var displayValue;
    var {
      path
    } = options2;
    var {
      valueSelector
    } = options2;
    var {
      displaySelector
    } = options2;
    var {
      column
    } = options2;
    if (valueSelector && displaySelector) {
      value2 = valueSelector(item);
      displayValue = displaySelector(item);
    } else {
      value2 = item.key;
      displayValue = value2;
    }
    if (!isObject(item)) {
      item = {};
    } else {
      item = extend({}, item);
    }
    path.push(value2);
    if (1 === path.length) {
      item.value = path[0];
    } else {
      item.value = path.join("/");
    }
    item.text = this.getHeaderItemText(displayValue, column, currentLevel, options2.headerFilterOptions);
    return item;
  }
  getHeaderItemText(displayValue, column, currentLevel, headerFilterOptions) {
    var text = m_utils_default.formatValue(displayValue, getFormatOptions(displayValue, column, currentLevel));
    if (!text) {
      text = headerFilterOptions.texts.emptyValue;
    }
    return text;
  }
  _processGroupItems(groupItems, currentLevel, path, options2) {
    var displaySelector;
    var valueSelector;
    var {
      column
    } = options2;
    var {
      lookup
    } = column;
    var {
      level
    } = options2;
    path = path || [];
    currentLevel = currentLevel || 0;
    if (lookup) {
      displaySelector = compileGetter(lookup.displayExpr);
      valueSelector = compileGetter(lookup.valueExpr);
    }
    for (var i = 0; i < groupItems.length; i++) {
      groupItems[i] = this._normalizeGroupItem(groupItems[i], currentLevel, {
        column: options2.column,
        headerFilterOptions: options2.headerFilterOptions,
        displaySelector,
        valueSelector,
        path
      });
      if ("items" in groupItems[i]) {
        if (currentLevel === level || !isDefined(groupItems[i].value)) {
          delete groupItems[i].items;
        } else {
          this._processGroupItems(groupItems[i].items, currentLevel + 1, path, options2);
        }
      }
      path.pop();
    }
  }
  getDataSource(column) {
    var _a;
    var dataSource = this._dataController.dataSource();
    var remoteGrouping = null === dataSource || void 0 === dataSource ? void 0 : dataSource.remoteOperations().grouping;
    var group = m_utils_default.getHeaderFilterGroupParameters(column, remoteGrouping);
    var headerFilterDataSource = null === (_a = column.headerFilter) || void 0 === _a ? void 0 : _a.dataSource;
    var headerFilterOptions = this.option("headerFilter");
    var isLookup = false;
    var options2 = {
      component: this.component
    };
    if (!dataSource) {
      return;
    }
    if (isDefined(headerFilterDataSource) && !isFunction(headerFilterDataSource)) {
      options2.dataSource = normalizeDataSourceOptions(headerFilterDataSource);
    } else if (column.lookup) {
      isLookup = true;
      if (this.option("syncLookupFilterValues")) {
        this._currentColumn = column;
        var filter = this._dataController.getCombinedFilter();
        this._currentColumn = null;
        options2.dataSource = m_utils_default.getWrappedLookupDataSource(column, dataSource, filter);
      } else {
        options2.dataSource = m_utils_default.normalizeLookupDataSource(column.lookup);
      }
    } else {
      var cutoffLevel = Array.isArray(group) ? group.length - 1 : 0;
      this._currentColumn = column;
      var _filter = this._dataController.getCombinedFilter();
      this._currentColumn = null;
      options2.dataSource = {
        filter: _filter,
        group,
        useDefaultSearch: true,
        load: (options3) => {
          var d = new Deferred();
          options3.dataField = column.dataField || column.name;
          dataSource.load(options3).done((data17) => {
            var convertUTCDates = remoteGrouping && isUTCFormat(column.serializationFormat) && cutoffLevel > 3;
            if (convertUTCDates) {
              data17 = convertDataFromUTCToLocal(data17, column);
            }
            that._processGroupItems(data17, null, null, {
              level: cutoffLevel,
              column,
              headerFilterOptions
            });
            d.resolve(data17);
          }).fail(d.reject);
          return d;
        }
      };
    }
    if (isFunction(headerFilterDataSource)) {
      headerFilterDataSource.call(column, options2);
    }
    var origPostProcess = options2.dataSource.postProcess;
    var that = this;
    options2.dataSource.postProcess = function(data17) {
      var items = data17;
      if (isLookup) {
        items = items.filter((item) => null !== item[column.lookup.valueExpr]);
        if (0 === this.pageIndex() && !this.searchValue()) {
          items = items.slice(0);
          items.unshift(null);
        }
        that._processGroupItems(items, null, null, {
          level: 0,
          column,
          headerFilterOptions
        });
      }
      items = origPostProcess && origPostProcess.call(this, items) || items;
      that._updateSelectedState(items, column);
      return items;
    };
    return options2.dataSource;
  }
  getCurrentColumn() {
    return this._currentColumn;
  }
  showHeaderFilterMenu(columnIndex, isGroupPanel) {
    var columnsController = this._columnsController;
    var column = extend(true, {}, this._columnsController.getColumns()[columnIndex]);
    if (column) {
      var visibleIndex = columnsController.getVisibleIndex(columnIndex);
      var view = isGroupPanel ? this.getView("headerPanel") : this.getView("columnHeadersView");
      var $columnElement = view.getColumnElements().eq(isGroupPanel ? column.groupIndex : visibleIndex);
      this.showHeaderFilterMenuBase({
        columnElement: $columnElement,
        column,
        applyFilter: true,
        apply() {
          columnsController.columnOption(columnIndex, {
            filterValues: this.filterValues,
            filterType: this.filterType
          });
        }
      });
    }
  }
  showHeaderFilterMenuBase(options2) {
    var {
      column
    } = options2;
    if (column) {
      var groupInterval = filtering_default.getGroupInterval(column);
      var dataSource = this._dataController.dataSource();
      var remoteFiltering = dataSource && dataSource.remoteOperations().filtering;
      var previousOnHidden = options2.onHidden;
      extend(options2, column, {
        type: groupInterval && groupInterval.length > 1 ? "tree" : "list",
        remoteFiltering,
        onShowing: (e) => {
          var dxResizableInstance = e.component.$overlayContent().dxResizable("instance");
          dxResizableInstance && dxResizableInstance.option("onResizeEnd", (e2) => {
            var headerFilterByColumn = this._columnsController.columnOption(options2.dataField, "headerFilter");
            headerFilterByColumn = headerFilterByColumn || {};
            headerFilterByColumn.width = e2.width;
            headerFilterByColumn.height = e2.height;
            this._columnsController.columnOption(options2.dataField, "headerFilter", headerFilterByColumn, true);
          });
        },
        onHidden: () => {
          null === previousOnHidden || void 0 === previousOnHidden ? void 0 : previousOnHidden();
          restoreFocus(this);
        }
      });
      options2.dataSource = this.getDataSource(options2);
      if (options2.isFilterBuilder) {
        options2.dataSource.filter = null;
        options2.alignment = "right";
      }
      this._headerFilterView.showHeaderFilterMenu(options2.columnElement, options2);
    }
  }
  hideHeaderFilterMenu() {
    this._headerFilterView.hideHeaderFilterMenu();
  }
};
var columnHeadersView4 = (Base) => class extends headerFilterMixin(Base) {
  _renderCellContent($cell, options2) {
    var $headerFilterIndicator;
    var {
      column
    } = options2;
    if (!column.command && allowHeaderFiltering(column) && this.option("headerFilter.visible") && "header" === options2.rowType) {
      $headerFilterIndicator = this._applyColumnState({
        name: "headerFilter",
        rootElement: $cell,
        column,
        showColumnLines: this.option("showColumnLines")
      });
      $headerFilterIndicator && this._subscribeToIndicatorEvent($headerFilterIndicator, column, "headerFilter");
    }
    super._renderCellContent.apply(this, arguments);
  }
  _subscribeToIndicatorEvent($indicator, column, indicatorName) {
    if ("headerFilter" === indicatorName) {
      events_engine_default.on($indicator, CLICK_EVENT_NAME, this.createAction((e) => {
        e.event.stopPropagation();
        saveFocusedElementInfo($indicator, this);
        this._headerFilterController.showHeaderFilterMenu(column.index, false);
      }));
    }
  }
  _updateIndicator($cell, column, indicatorName) {
    var $indicator = super._updateIndicator($cell, column, indicatorName);
    $indicator && this._subscribeToIndicatorEvent($indicator, column, indicatorName);
  }
  _updateHeaderFilterIndicators() {
    if (this.option("headerFilter.visible")) {
      this._updateIndicators("headerFilter");
    }
  }
  _needUpdateFilterIndicators() {
    return true;
  }
  _columnOptionChanged(e) {
    var {
      optionNames
    } = e;
    var isFilterRowAndHeaderFilterValuesChanged = m_utils_default.checkChanges(optionNames, ["filterValues", "filterValue"]);
    var isHeaderFilterValuesAndTypeChanged = m_utils_default.checkChanges(optionNames, ["filterValues", "filterType"]);
    var shouldUpdateFilterIndicators = (isFilterRowAndHeaderFilterValuesChanged || isHeaderFilterValuesAndTypeChanged) && this._needUpdateFilterIndicators();
    if (shouldUpdateFilterIndicators) {
      this._updateHeaderFilterIndicators();
    }
    if (!isHeaderFilterValuesAndTypeChanged) {
      super._columnOptionChanged(e);
    }
  }
};
var headerPanel5 = (Base) => class extends headerFilterMixin(Base) {
  _createGroupPanelItem($rootElement, groupColumn) {
    var $item = super._createGroupPanelItem.apply(this, arguments);
    var $headerFilterIndicator;
    if (!groupColumn.command && allowHeaderFiltering(groupColumn) && this.option("headerFilter.visible")) {
      $headerFilterIndicator = this._applyColumnState({
        name: "headerFilter",
        rootElement: $item,
        column: {
          alignment: getDefaultAlignment(this.option("rtlEnabled")),
          filterValues: groupColumn.filterValues,
          allowHeaderFiltering: true,
          caption: groupColumn.caption
        },
        showColumnLines: true
      });
      $headerFilterIndicator && events_engine_default.on($headerFilterIndicator, CLICK_EVENT_NAME, this.createAction((e) => {
        var {
          event
        } = e;
        event.stopPropagation();
        this._headerFilterController.showHeaderFilterMenu(groupColumn.index, true);
      }));
    }
    return $item;
  }
};
var data9 = (Base) => class extends Base {
  skipCalculateColumnFilters() {
    return false;
  }
  _calculateAdditionalFilter() {
    if (this.skipCalculateColumnFilters()) {
      return super._calculateAdditionalFilter();
    }
    var filters = [super._calculateAdditionalFilter()];
    var columns7 = this._columnsController.getVisibleColumns(null, true);
    var headerFilterController = this._headerFilterController;
    var currentColumn = headerFilterController.getCurrentColumn();
    each(columns7, (_, column) => {
      var filter;
      if (currentColumn && currentColumn.index === column.index) {
        return;
      }
      if (allowHeaderFiltering(column) && column.calculateFilterExpression && Array.isArray(column.filterValues) && column.filterValues.length) {
        var filterValues = [];
        each(column.filterValues, (_2, filterValue) => {
          if (Array.isArray(filterValue)) {
            filter = filterValue;
          } else {
            if (column.deserializeValue && !m_utils_default.isDateType(column.dataType) && "number" !== column.dataType) {
              filterValue = column.deserializeValue(filterValue);
            }
            filter = column.createFilterExpression(filterValue, "=", "headerFilter");
          }
          if (filter) {
            filter.columnIndex = column.index;
          }
          filterValues.push(filter);
        });
        filterValues = m_utils_default.combineFilters(filterValues, "or");
        filters.push("exclude" === column.filterType ? ["!", filterValues] : filterValues);
      }
    });
    return m_utils_default.combineFilters(filters);
  }
};
var headerFilterModule = {
  defaultOptions: () => ({
    syncLookupFilterValues: true,
    headerFilter: {
      visible: false,
      width: 252,
      height: 325,
      allowSelectAll: true,
      search: {
        enabled: false,
        timeout: 500,
        mode: "contains",
        editorOptions: {}
      },
      texts: {
        emptyValue: message_default.format("dxDataGrid-headerFilterEmptyValue"),
        ok: message_default.format("dxDataGrid-headerFilterOK"),
        cancel: message_default.format("dxDataGrid-headerFilterCancel")
      }
    }
  }),
  controllers: {
    headerFilter: HeaderFilterController
  },
  views: {
    headerFilterView: HeaderFilterView
  },
  extenders: {
    controllers: {
      data: data9
    },
    views: {
      columnHeadersView: columnHeadersView4,
      headerPanel: headerPanel5
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/header_filter.js
m_core_default.registerModule("headerFilter", headerFilterModule);

// node_modules/devextreme/esm/__internal/filter_builder/m_between.js
var FILTER_BUILDER_RANGE_CLASS = "dx-filterbuilder-range";
var FILTER_BUILDER_RANGE_START_CLASS = "".concat(FILTER_BUILDER_RANGE_CLASS, "-start");
var FILTER_BUILDER_RANGE_END_CLASS = "".concat(FILTER_BUILDER_RANGE_CLASS, "-end");
var FILTER_BUILDER_RANGE_SEPARATOR_CLASS = "".concat(FILTER_BUILDER_RANGE_CLASS, "-separator");
var SEPARATOR = "–";
function editorTemplate(conditionInfo, container) {
  var $editorStart = renderer_default("<div>").addClass(FILTER_BUILDER_RANGE_START_CLASS);
  var $editorEnd = renderer_default("<div>").addClass(FILTER_BUILDER_RANGE_END_CLASS);
  var values = conditionInfo.value || [];
  var getStartValue = function(values2) {
    return values2 && values2.length > 0 ? values2[0] : null;
  };
  var getEndValue = function(values2) {
    return values2 && 2 === values2.length ? values2[1] : null;
  };
  container.append($editorStart);
  container.append(renderer_default("<span>").addClass(FILTER_BUILDER_RANGE_SEPARATOR_CLASS).text(SEPARATOR));
  container.append($editorEnd);
  container.addClass(FILTER_BUILDER_RANGE_CLASS);
  this._editorFactory.createEditor.call(this, $editorStart, extend({}, conditionInfo.field, conditionInfo, {
    value: getStartValue(values),
    parentType: "filterBuilder",
    setValue(value2) {
      values = [value2, getEndValue(values)];
      conditionInfo.setValue(values);
    }
  }));
  this._editorFactory.createEditor.call(this, $editorEnd, extend({}, conditionInfo.field, conditionInfo, {
    value: getEndValue(values),
    parentType: "filterBuilder",
    setValue(value2) {
      values = [getStartValue(values), value2];
      conditionInfo.setValue(values);
    }
  }));
}
function getConfig(caption, context) {
  return {
    name: "between",
    caption,
    icon: "range",
    valueSeparator: SEPARATOR,
    dataTypes: ["number", "date", "datetime"],
    editorTemplate: editorTemplate.bind(context),
    notForLookup: true
  };
}

// node_modules/devextreme/esm/__internal/filter_builder/m_filter_operations_dictionary.js
var OPERATION_ICONS2 = {
  "=": "equal",
  "<>": "notequal",
  "<": "less",
  "<=": "lessorequal",
  ">": "greater",
  ">=": "greaterorequal",
  notcontains: "doesnotcontain",
  contains: "contains",
  startswith: "startswith",
  endswith: "endswith",
  isblank: "isblank",
  isnotblank: "isnotblank"
};
var OPERATION_NAME = {
  "=": "equal",
  "<>": "notEqual",
  "<": "lessThan",
  "<=": "lessThanOrEqual",
  ">": "greaterThan",
  ">=": "greaterThanOrEqual",
  startswith: "startsWith",
  contains: "contains",
  notcontains: "notContains",
  endswith: "endsWith",
  isblank: "isBlank",
  isnotblank: "isNotBlank",
  between: "between"
};
var m_filter_operations_dictionary_default = {
  getIconByFilterOperation: (filterOperation) => OPERATION_ICONS2[filterOperation],
  getNameByFilterOperation: (filterOperation) => OPERATION_NAME[filterOperation]
};

// node_modules/devextreme/esm/__internal/filter_builder/m_utils.js
var DEFAULT_DATA_TYPE = "string";
var EMPTY_MENU_ICON = "icon-none";
var AND_GROUP_OPERATION = "and";
var EQUAL_OPERATION = "=";
var NOT_EQUAL_OPERATION = "<>";
var DATATYPE_OPERATIONS2 = {
  number: ["=", "<>", "<", ">", "<=", ">=", "isblank", "isnotblank"],
  string: ["contains", "notcontains", "startswith", "endswith", "=", "<>", "isblank", "isnotblank"],
  date: ["=", "<>", "<", ">", "<=", ">=", "isblank", "isnotblank"],
  datetime: ["=", "<>", "<", ">", "<=", ">=", "isblank", "isnotblank"],
  boolean: ["=", "<>", "isblank", "isnotblank"],
  object: ["isblank", "isnotblank"]
};
var DEFAULT_FORMAT = {
  date: "shortDate",
  datetime: "shortDateShortTime"
};
var LOOKUP_OPERATIONS = ["=", "<>", "isblank", "isnotblank"];
var AVAILABLE_FIELD_PROPERTIES = ["caption", "customizeText", "dataField", "dataType", "editorTemplate", "falseText", "editorOptions", "filterOperations", "format", "lookup", "trueText", "calculateFilterExpression", "name"];
var FILTER_BUILDER_CLASS = "dx-filterbuilder";
var FILTER_BUILDER_ITEM_TEXT_CLASS = "".concat(FILTER_BUILDER_CLASS, "-text");
var FILTER_BUILDER_ITEM_TEXT_PART_CLASS = "".concat(FILTER_BUILDER_ITEM_TEXT_CLASS, "-part");
var FILTER_BUILDER_ITEM_TEXT_SEPARATOR_CLASS = "".concat(FILTER_BUILDER_ITEM_TEXT_CLASS, "-separator");
var FILTER_BUILDER_ITEM_TEXT_SEPARATOR_EMPTY_CLASS = "".concat(FILTER_BUILDER_ITEM_TEXT_SEPARATOR_CLASS, "-empty");
function getFormattedValueText(field, value2) {
  var fieldFormat = field.format || DEFAULT_FORMAT[field.dataType];
  return format_helper_default.format(value2, fieldFormat);
}
function isNegationGroup(group) {
  return group && group.length > 1 && "!" === group[0] && !isCondition(group);
}
function getGroupCriteria(group) {
  return isNegationGroup(group) ? group[1] : group;
}
function setGroupCriteria(group, criteria) {
  if (isNegationGroup(group)) {
    group[1] = criteria;
  } else {
    group = criteria;
  }
  return group;
}
function convertGroupToNewStructure(group, value2) {
  if (function(value3) {
    return -1 !== value3.indexOf("!");
  }(value2)) {
    if (!isNegationGroup(group)) {
      !function(group2) {
        var criteria = group2.slice(0);
        group2.length = 0;
        group2.push("!", criteria);
      }(group);
    }
  } else if (isNegationGroup(group)) {
    !function(group2) {
      var criteria = getGroupCriteria(group2);
      group2.length = 0;
      [].push.apply(group2, criteria);
    }(group);
  }
}
function setGroupValue(group, value2) {
  convertGroupToNewStructure(group, value2);
  var criteria = getGroupCriteria(group);
  var i;
  value2 = function(value3) {
    return -1 === value3.indexOf("!") ? value3 : value3.substring(1);
  }(value2);
  !function(criteria2, value3) {
    for (i = 0; i < criteria2.length; i++) {
      if (!Array.isArray(criteria2[i])) {
        criteria2[i] = value3;
      }
    }
  }(criteria, value2);
  return group;
}
function getGroupMenuItem(group, availableGroups) {
  var groupValue = getGroupValue(group);
  return availableGroups.filter((item) => item.value === groupValue)[0];
}
function getCriteriaOperation(criteria) {
  if (isCondition(criteria)) {
    return AND_GROUP_OPERATION;
  }
  var value2 = "";
  for (var i = 0; i < criteria.length; i++) {
    var item = criteria[i];
    if (!Array.isArray(item)) {
      if (value2 && value2 !== item) {
        throw new errors.Error("E4019");
      }
      if ("!" !== item) {
        value2 = item;
      }
    }
  }
  return value2;
}
function getGroupValue(group) {
  var criteria = getGroupCriteria(group);
  var value2 = getCriteriaOperation(criteria);
  if (!value2) {
    value2 = AND_GROUP_OPERATION;
  }
  if (criteria !== group) {
    value2 = "!".concat(value2);
  }
  return value2;
}
function getDefaultFilterOperations(field) {
  return field.lookup && LOOKUP_OPERATIONS || DATATYPE_OPERATIONS2[field.dataType || DEFAULT_DATA_TYPE];
}
function containItems(entity) {
  return Array.isArray(entity) && entity.length;
}
function getFilterOperations(field) {
  var result2 = containItems(field.filterOperations) ? field.filterOperations : getDefaultFilterOperations(field);
  return extend([], result2);
}
function getCaptionByOperation(operation, filterOperationDescriptions) {
  var operationName = m_filter_operations_dictionary_default.getNameByFilterOperation(operation);
  return filterOperationDescriptions && filterOperationDescriptions[operationName] ? filterOperationDescriptions[operationName] : operationName;
}
function getOperationFromAvailable(operation, availableOperations) {
  for (var i = 0; i < availableOperations.length; i++) {
    if (availableOperations[i].value === operation) {
      return availableOperations[i];
    }
  }
  throw new ui_errors_default.Error("E1048", operation);
}
function getCustomOperation(customOperations, name2) {
  var filteredOperations = customOperations.filter((item) => item.name === name2);
  return filteredOperations.length ? filteredOperations[0] : null;
}
function getAvailableOperations(field, filterOperationDescriptions, customOperations) {
  var filterOperations = getFilterOperations(field);
  var isLookupField = !!field.lookup;
  customOperations.forEach((customOperation) => {
    if (!field.filterOperations && -1 === filterOperations.indexOf(customOperation.name)) {
      var dataTypes = customOperation && customOperation.dataTypes;
      var isOperationForbidden = isLookupField ? !!customOperation.notForLookup : false;
      if (!isOperationForbidden && dataTypes && dataTypes.indexOf(field.dataType || DEFAULT_DATA_TYPE) >= 0) {
        filterOperations.push(customOperation.name);
      }
    }
  });
  return filterOperations.map((operation) => {
    var customOperation = getCustomOperation(customOperations, operation);
    if (customOperation) {
      return {
        icon: customOperation.icon || EMPTY_MENU_ICON,
        text: customOperation.caption || captionize(customOperation.name),
        value: customOperation.name,
        isCustom: true
      };
    }
    return {
      icon: m_filter_operations_dictionary_default.getIconByFilterOperation(operation) || EMPTY_MENU_ICON,
      text: getCaptionByOperation(operation, filterOperationDescriptions),
      value: operation
    };
  });
}
function getDefaultOperation(field) {
  return field.defaultFilterOperation || getFilterOperations(field)[0];
}
function createCondition(field, customOperations) {
  var condition = [field.dataField, "", ""];
  var filterOperation = getDefaultOperation(field);
  updateConditionByOperation(condition, filterOperation, customOperations);
  return condition;
}
function removeItem(group, item) {
  var criteria = getGroupCriteria(group);
  var index = criteria.indexOf(item);
  criteria.splice(index, 1);
  if (1 !== criteria.length) {
    criteria.splice(index, 1);
  }
  return group;
}
function createEmptyGroup(value2) {
  var isNegation = isNegationGroupOperation(value2);
  var groupOperation = isNegation ? getGroupOperationFromNegationOperation(value2) : value2;
  return isNegation ? ["!", [groupOperation]] : [groupOperation];
}
function addItem(item, group) {
  var criteria = getGroupCriteria(group);
  var groupValue = getGroupValue(criteria);
  1 === criteria.length ? criteria.unshift(item) : criteria.push(item, groupValue);
  return group;
}
function getField(dataField, fields) {
  for (var i = 0; i < fields.length; i++) {
    if (fields[i].name === dataField) {
      return fields[i];
    }
    if (fields[i].dataField.toLowerCase() === dataField.toLowerCase()) {
      return fields[i];
    }
  }
  var extendedFields = getItems(fields, true).filter((item) => item.dataField.toLowerCase() === dataField.toLowerCase());
  if (extendedFields.length > 0) {
    return extendedFields[0];
  }
  throw new ui_errors_default.Error("E1047", dataField);
}
function isGroup(criteria) {
  if (!Array.isArray(criteria)) {
    return false;
  }
  return criteria.length < 2 || Array.isArray(criteria[0]) || Array.isArray(criteria[1]);
}
function isCondition(criteria) {
  if (!Array.isArray(criteria)) {
    return false;
  }
  return criteria.length > 1 && !Array.isArray(criteria[0]) && !Array.isArray(criteria[1]);
}
function convertToInnerGroup(group, customOperations, defaultGroupOperation) {
  defaultGroupOperation = defaultGroupOperation || AND_GROUP_OPERATION;
  var groupOperation = getCriteriaOperation(group).toLowerCase() || defaultGroupOperation;
  var innerGroup = [];
  for (var i = 0; i < group.length; i++) {
    if (isGroup(group[i])) {
      innerGroup.push(convertToInnerStructure(group[i], customOperations, defaultGroupOperation));
      innerGroup = appendGroupOperationToGroup(innerGroup, groupOperation);
    } else if (isCondition(group[i])) {
      innerGroup.push(convertToInnerCondition(group[i], customOperations));
      innerGroup = appendGroupOperationToGroup(innerGroup, groupOperation);
    }
  }
  if (0 === innerGroup.length) {
    innerGroup = appendGroupOperationToGroup(innerGroup, groupOperation);
  }
  return innerGroup;
}
function conditionHasCustomOperation(condition, customOperations) {
  var customOperation = getCustomOperation(customOperations, condition[1]);
  return customOperation && customOperation.name === condition[1];
}
function convertToInnerCondition(condition, customOperations) {
  if (conditionHasCustomOperation(condition, customOperations)) {
    return condition;
  }
  if (condition.length < 3) {
    condition[2] = condition[1];
    condition[1] = EQUAL_OPERATION;
  }
  return condition;
}
function isNegationGroupOperation(operation) {
  return -1 !== operation.indexOf("not");
}
function getGroupOperationFromNegationOperation(operation) {
  return operation.substring(3).toLowerCase();
}
function appendGroupOperationToCriteria(criteria, groupOperation) {
  var isNegation = isNegationGroupOperation(groupOperation);
  groupOperation = isNegation ? getGroupOperationFromNegationOperation(groupOperation) : groupOperation;
  return isNegation ? ["!", criteria, groupOperation] : [criteria, groupOperation];
}
function appendGroupOperationToGroup(group, groupOperation) {
  var isNegation = isNegationGroupOperation(groupOperation);
  groupOperation = isNegation ? getGroupOperationFromNegationOperation(groupOperation) : groupOperation;
  group.push(groupOperation);
  var result2 = group;
  if (isNegation) {
    result2 = ["!", result2];
  }
  return result2;
}
function convertToInnerStructure(value2, customOperations, defaultGroupOperation) {
  defaultGroupOperation = defaultGroupOperation || AND_GROUP_OPERATION;
  if (!value2) {
    return createEmptyGroup(defaultGroupOperation);
  }
  value2 = extend(true, [], value2);
  if (isCondition(value2)) {
    return appendGroupOperationToCriteria(convertToInnerCondition(value2, customOperations), defaultGroupOperation);
  }
  if (isNegationGroup(value2)) {
    return ["!", isCondition(value2[1]) ? appendGroupOperationToCriteria(convertToInnerCondition(value2[1], customOperations), defaultGroupOperation) : isNegationGroup(value2[1]) ? appendGroupOperationToCriteria(convertToInnerStructure(value2[1], customOperations), defaultGroupOperation) : convertToInnerGroup(value2[1], customOperations, defaultGroupOperation)];
  }
  return convertToInnerGroup(value2, customOperations, defaultGroupOperation);
}
function getNormalizedFields(fields) {
  return fields.reduce((result2, field) => {
    if (isDefined(field.dataField)) {
      var normalizedField = {};
      for (var key in field) {
        if (field[key] && AVAILABLE_FIELD_PROPERTIES.includes(key)) {
          normalizedField[key] = field[key];
        }
      }
      normalizedField.defaultCalculateFilterExpression = filtering_default.defaultCalculateFilterExpression;
      if (!isDefined(normalizedField.dataType)) {
        normalizedField.dataType = DEFAULT_DATA_TYPE;
      }
      if (!isDefined(normalizedField.trueText)) {
        normalizedField.trueText = message_default.format("dxDataGrid-trueText");
      }
      if (!isDefined(normalizedField.falseText)) {
        normalizedField.falseText = message_default.format("dxDataGrid-falseText");
      }
      result2.push(normalizedField);
    }
    return result2;
  }, []);
}
function getConditionFilterExpression(condition, fields, customOperations, target) {
  var field = getField(condition[0], fields);
  var filterExpression = convertToInnerCondition(condition, customOperations);
  var customOperation = customOperations.length && getCustomOperation(customOperations, filterExpression[1]);
  if (customOperation && customOperation.calculateFilterExpression) {
    return customOperation.calculateFilterExpression.apply(customOperation, [filterExpression[2], field, fields]);
  }
  if (field.createFilterExpression) {
    return field.createFilterExpression.apply(field, [filterExpression[2], filterExpression[1], target]);
  }
  if (field.calculateFilterExpression) {
    return field.calculateFilterExpression.apply(field, [filterExpression[2], filterExpression[1], target]);
  }
  return field.defaultCalculateFilterExpression.apply(field, [filterExpression[2], filterExpression[1], target]);
}
function getFilterExpression(value2, fields, customOperations, target) {
  if (!isDefined(value2)) {
    return null;
  }
  if (isNegationGroup(value2)) {
    var _filterExpression = getFilterExpression(value2[1], fields, customOperations, target);
    return ["!", _filterExpression];
  }
  var criteria = getGroupCriteria(value2);
  if (isCondition(criteria)) {
    return getConditionFilterExpression(criteria, fields, customOperations, target) || null;
  }
  var result2 = [];
  var filterExpression;
  var groupValue = getGroupValue(criteria);
  for (var i = 0; i < criteria.length; i++) {
    if (isGroup(criteria[i])) {
      filterExpression = getFilterExpression(criteria[i], fields, customOperations, target);
      if (filterExpression) {
        i && result2.push(groupValue);
        result2.push(filterExpression);
      }
    } else if (isCondition(criteria[i])) {
      filterExpression = getConditionFilterExpression(criteria[i], fields, customOperations, target);
      if (filterExpression) {
        result2.length && result2.push(groupValue);
        result2.push(filterExpression);
      }
    }
  }
  if (1 === result2.length) {
    result2 = result2[0];
  }
  return result2.length ? result2 : null;
}
function getNormalizedFilter(group) {
  var criteria = getGroupCriteria(group);
  var i;
  if (0 === criteria.length) {
    return null;
  }
  var itemsForRemove = [];
  for (i = 0; i < criteria.length; i++) {
    if (isGroup(criteria[i])) {
      var normalizedGroupValue = getNormalizedFilter(criteria[i]);
      if (normalizedGroupValue) {
        criteria[i] = normalizedGroupValue;
      } else {
        itemsForRemove.push(criteria[i]);
      }
    } else if (isCondition(criteria[i])) {
      if (!isValidCondition(criteria[i])) {
        itemsForRemove.push(criteria[i]);
      }
    }
  }
  for (i = 0; i < itemsForRemove.length; i++) {
    removeItem(criteria, itemsForRemove[i]);
  }
  if (1 === criteria.length) {
    return null;
  }
  criteria.splice(criteria.length - 1, 1);
  if (1 === criteria.length) {
    group = setGroupCriteria(group, criteria[0]);
  }
  if (0 === group.length) {
    return null;
  }
  return group;
}
function getCurrentLookupValueText(field, value2, handler) {
  if ("" === value2) {
    handler("");
    return;
  }
  var {
    lookup
  } = field;
  if (lookup.items) {
    handler(lookup.calculateCellValue(value2) || "");
  } else {
    var lookupDataSource = isFunction(lookup.dataSource) ? lookup.dataSource({}) : lookup.dataSource;
    var dataSource = new DataSource(lookupDataSource);
    dataSource.loadSingle(lookup.valueExpr, value2).done((result2) => {
      var valueText = "";
      if (result2) {
        valueText = lookup.displayExpr ? compileGetter(lookup.displayExpr)(result2) : result2;
      }
      if (field.customizeText) {
        valueText = field.customizeText({
          value: value2,
          valueText
        });
      }
      handler(valueText);
    }).fail(() => {
      handler("");
    });
  }
}
function getPrimitiveValueText(field, value2, customOperation, target, options2) {
  var valueText;
  if (true === value2) {
    valueText = field.trueText || message_default.format("dxDataGrid-trueText");
  } else if (false === value2) {
    valueText = field.falseText || message_default.format("dxDataGrid-falseText");
  } else {
    valueText = getFormattedValueText(field, value2);
  }
  if (field.customizeText) {
    valueText = field.customizeText.call(field, {
      value: value2,
      valueText,
      target
    });
  }
  if (customOperation && customOperation.customizeText) {
    valueText = customOperation.customizeText.call(customOperation, {
      value: value2,
      valueText,
      field,
      target
    }, options2);
  }
  return valueText;
}
function getArrayValueText(field, value2, customOperation, target) {
  var options2 = {
    values: value2
  };
  return value2.map((v) => getPrimitiveValueText(field, v, customOperation, target, options2));
}
function checkDefaultValue(value2) {
  return "" === value2 || null === value2;
}
function getCurrentValueText(field, value2, customOperation) {
  var target = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "filterBuilder";
  if (checkDefaultValue(value2)) {
    return "";
  }
  if (Array.isArray(value2)) {
    var result2 = new Deferred();
    when.apply(this, getArrayValueText(field, value2, customOperation, target)).done(function() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      var text = args.some((item) => !checkDefaultValue(item)) ? args.map((item) => !checkDefaultValue(item) ? item : "?") : "";
      result2.resolve(text);
    });
    return result2;
  }
  return getPrimitiveValueText(field, value2, customOperation, target);
}
function itemExists(plainItems, parentId) {
  return plainItems.some((item) => item.dataField === parentId);
}
function pushItemAndCheckParent(originalItems, plainItems, item) {
  var {
    dataField
  } = item;
  if (hasParent(dataField)) {
    item.parentId = getParentIdFromItemDataField(dataField);
    if (!itemExists(plainItems, item.parentId) && !itemExists(originalItems, item.parentId)) {
      pushItemAndCheckParent(originalItems, plainItems, {
        id: item.parentId,
        dataType: "object",
        dataField: item.parentId,
        caption: generateCaptionByDataField(item.parentId, true),
        filterOperations: ["isblank", "isnotblank"],
        defaultCalculateFilterExpression: filtering_default.defaultCalculateFilterExpression
      });
    }
  }
  plainItems.push(item);
}
function generateCaptionByDataField(dataField, allowHierarchicalFields) {
  var caption = "";
  if (allowHierarchicalFields) {
    dataField = dataField.substring(dataField.lastIndexOf(".") + 1);
  } else if (hasParent(dataField)) {
    dataField.split(".").forEach((field, index, arr) => {
      caption += captionize(field);
      if (index !== arr.length - 1) {
        caption += ".";
      }
    });
    return caption;
  }
  return captionize(dataField);
}
function getItems(fields, allowHierarchicalFields) {
  var items = [];
  for (var i = 0; i < fields.length; i++) {
    var item = extend(true, {
      caption: generateCaptionByDataField(fields[i].dataField, allowHierarchicalFields)
    }, fields[i]);
    item.id = item.name || item.dataField;
    if (allowHierarchicalFields) {
      pushItemAndCheckParent(fields, items, item);
    } else {
      items.push(item);
    }
  }
  return items;
}
function hasParent(dataField) {
  return -1 !== dataField.lastIndexOf(".");
}
function getParentIdFromItemDataField(dataField) {
  return dataField.substring(0, dataField.lastIndexOf("."));
}
function getCaptionWithParents(item, plainItems) {
  if (hasParent(item.dataField)) {
    var parentId = getParentIdFromItemDataField(item.dataField);
    for (var i = 0; i < plainItems.length; i++) {
      if (plainItems[i].dataField === parentId) {
        return "".concat(getCaptionWithParents(plainItems[i], plainItems), ".").concat(item.caption);
      }
    }
  }
  return item.caption;
}
function updateConditionByOperation(condition, operation, customOperations) {
  var customOperation = getCustomOperation(customOperations, operation);
  if (customOperation) {
    if (false === customOperation.hasValue) {
      condition[1] = operation;
      condition.length = 2;
    } else {
      condition[1] = operation;
      condition[2] = "";
    }
    return condition;
  }
  if ("isblank" === operation) {
    condition[1] = EQUAL_OPERATION;
    condition[2] = null;
  } else if ("isnotblank" === operation) {
    condition[1] = NOT_EQUAL_OPERATION;
    condition[2] = null;
  } else {
    customOperation = getCustomOperation(customOperations, condition[1]);
    if (customOperation || 2 === condition.length || null === condition[2]) {
      condition[2] = "";
    }
    condition[1] = operation;
  }
  return condition;
}
function getOperationValue(condition) {
  var caption;
  if (null === condition[2]) {
    if (condition[1] === EQUAL_OPERATION) {
      caption = "isblank";
    } else {
      caption = "isnotblank";
    }
  } else {
    caption = condition[1];
  }
  return caption;
}
function isValidCondition(condition) {
  return "" !== condition[2];
}
function getMergedOperations(customOperations, betweenCaption, context) {
  var result2 = extend(true, [], customOperations);
  var betweenIndex = -1;
  result2.some((customOperation, index) => {
    if ("between" === customOperation.name) {
      betweenIndex = index;
      return true;
    }
    return;
  });
  if (-1 !== betweenIndex) {
    result2[betweenIndex] = extend(getConfig(betweenCaption, context), result2[betweenIndex]);
  } else {
    result2.unshift(getConfig(betweenCaption, context));
  }
  return result2;
}
function isMatchedCondition(filter, addedFilterDataField) {
  return filter[0] === addedFilterDataField;
}
function removeFieldConditionsFromFilter(filter, dataField) {
  if (!filter || 0 === filter.length) {
    return null;
  }
  if (isCondition(filter)) {
    var hasMatchedCondition = isMatchedCondition(filter, dataField);
    return !hasMatchedCondition ? filter : null;
  }
  return syncConditionIntoGroup(filter, [dataField], false);
}
function syncConditionIntoGroup(filter, addedFilter, canPush) {
  var result2 = [];
  filter.forEach((item) => {
    if (isCondition(item)) {
      if (isMatchedCondition(item, addedFilter[0])) {
        if (canPush) {
          result2.push(addedFilter);
          canPush = false;
        } else {
          result2.splice(result2.length - 1, 1);
        }
      } else {
        result2.push(item);
      }
    } else {
      (result2.length || isGroup(item)) && result2.push(item);
    }
  });
  if (0 === result2.length) {
    return null;
  }
  if (canPush) {
    result2.push(AND_GROUP_OPERATION);
    result2.push(addedFilter);
  }
  return 1 === result2.length ? result2[0] : result2;
}
function syncFilters(filter, addedFilter) {
  if (null === filter || 0 === filter.length) {
    return addedFilter;
  }
  if (isCondition(filter)) {
    if (isMatchedCondition(filter, addedFilter[0])) {
      return addedFilter;
    }
    return [filter, AND_GROUP_OPERATION, addedFilter];
  }
  var groupValue = getGroupValue(filter);
  if (groupValue !== AND_GROUP_OPERATION) {
    return [addedFilter, "and", filter];
  }
  return syncConditionIntoGroup(filter, addedFilter, true);
}
function getMatchedConditions(filter, dataField) {
  if (null === filter || 0 === filter.length) {
    return [];
  }
  if (isCondition(filter)) {
    if (isMatchedCondition(filter, dataField)) {
      return [filter];
    }
    return [];
  }
  var groupValue = getGroupValue(filter);
  if (groupValue !== AND_GROUP_OPERATION) {
    return [];
  }
  var result2 = filter.filter((item) => isCondition(item) && isMatchedCondition(item, dataField));
  return result2;
}
function filterHasField(filter, dataField) {
  if (null === filter || 0 === filter.length) {
    return false;
  }
  if (isCondition(filter)) {
    return filter[0] === dataField;
  }
  return filter.some((item) => (isCondition(item) || isGroup(item)) && filterHasField(item, dataField));
}
var renderValueText = function($container, value2, customOperation) {
  if (Array.isArray(value2)) {
    var lastItemIndex = value2.length - 1;
    $container.empty();
    value2.forEach((t, i) => {
      renderer_default("<span>").addClass(FILTER_BUILDER_ITEM_TEXT_PART_CLASS).text(t).appendTo($container);
      if (i !== lastItemIndex) {
        renderer_default("<span>").addClass(FILTER_BUILDER_ITEM_TEXT_SEPARATOR_CLASS).text(customOperation && customOperation.valueSeparator ? customOperation.valueSeparator : "|").addClass(FILTER_BUILDER_ITEM_TEXT_SEPARATOR_EMPTY_CLASS).appendTo($container);
      }
    });
  } else if (value2) {
    $container.text(value2);
  } else {
    $container.text(message_default.format("dxFilterBuilder-enterValueText"));
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/filter/m_filter_custom_operations.js
function baseOperation(grid) {
  var getFullText = function(itemText, parentText) {
    return parentText ? "".concat(parentText, "/").concat(itemText) : itemText;
  };
  var headerFilterController = grid && grid.getController("headerFilter");
  return {
    dataTypes: ["string", "date", "datetime", "number", "boolean", "object"],
    calculateFilterExpression: function(filterValue, field, fields) {
      var result2 = [];
      var lastIndex = filterValue.length - 1;
      filterValue && filterValue.forEach((value2, index) => {
        if (isCondition(value2) || isGroup(value2)) {
          var filterExpression = getFilterExpression(value2, fields, [], "headerFilter");
          result2.push(filterExpression);
        } else {
          var _filterExpression = getFilterExpression([field.dataField, "=", value2], fields, [], "headerFilter");
          result2.push(_filterExpression);
        }
        index !== lastIndex && result2.push("or");
      });
      if (1 === result2.length) {
        return result2[0];
      }
      return result2;
    },
    editorTemplate(conditionInfo, container) {
      var div = renderer_default("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(container);
      var column = extend(true, {}, grid.columnOption(conditionInfo.field.dataField));
      renderValueText(div, conditionInfo.text && conditionInfo.text.split("|"));
      column.filterType = "include";
      column.filterValues = conditionInfo.value ? conditionInfo.value.slice() : [];
      headerFilterController.showHeaderFilterMenuBase({
        columnElement: div,
        column,
        apply() {
          value2 = this.filterValues, void conditionInfo.setValue(value2);
          var value2;
          headerFilterController.hideHeaderFilterMenu();
          conditionInfo.closeEditor();
        },
        onHidden() {
          conditionInfo.closeEditor();
        },
        isFilterBuilder: true
      });
      return container;
    },
    customizeText: function(fieldInfo, options2) {
      options2 = options2 || {};
      var {
        value: value2
      } = fieldInfo;
      var column = grid.columnOption(fieldInfo.field.dataField);
      var headerFilter = column && column.headerFilter;
      var lookup = column && column.lookup;
      var values = options2.values || [value2];
      if (headerFilter && headerFilter.dataSource || lookup && lookup.dataSource) {
        var result2 = new Deferred();
        var itemsDeferred = options2.items || new Deferred();
        if (!options2.items) {
          column = extend({}, column, {
            filterType: "include",
            filterValues: values
          });
          var dataSourceOptions = headerFilterController.getDataSource(column);
          dataSourceOptions.paginate = false;
          var dataSource = new DataSource(dataSourceOptions);
          var key = dataSource.store().key();
          if (key) {
            var {
              values: _values
            } = options2;
            if (_values && _values.length > 1) {
              var filter = _values.reduce((result3, value3) => {
                if (result3.length) {
                  result3.push("or");
                }
                result3.push([key, "=", value3]);
                return result3;
              }, []);
              dataSource.filter(filter);
            } else {
              dataSource.filter([key, "=", fieldInfo.value]);
            }
          } else if (fieldInfo.field.calculateDisplayValue) {
            ui_errors_default.log("W1017");
          }
          options2.items = itemsDeferred;
          dataSource.load().done(itemsDeferred.resolve);
        }
        itemsDeferred.done((items) => {
          var index = values.indexOf(fieldInfo.value);
          result2.resolve(function getSelectedItemsTexts(items2, parentText) {
            var result3 = [];
            items2.forEach((item) => {
              if (item.items) {
                var selectedItemsTexts = getSelectedItemsTexts(item.items, getFullText(item.text, parentText));
                result3 = result3.concat(selectedItemsTexts);
              }
              item.selected && result3.push(getFullText(item.text, parentText));
            });
            return result3;
          }(items, null)[index]);
        });
        return result2;
      }
      var text = headerFilterController.getHeaderItemText(value2, column, 0, grid.option("headerFilter"));
      return text;
    }
  };
}
function anyOf(grid) {
  return extend(baseOperation(grid), {
    name: "anyof",
    icon: "selectall",
    caption: message_default.format("dxFilterBuilder-filterOperationAnyOf")
  });
}
function noneOf(grid) {
  var baseOp = baseOperation(grid);
  return extend({}, baseOp, {
    calculateFilterExpression(filterValue, field, fields) {
      var baseFilter = baseOp.calculateFilterExpression(filterValue, field, fields);
      if (!baseFilter || 0 === baseFilter.length) {
        return null;
      }
      return "!" === baseFilter[0] ? baseFilter : ["!", baseFilter];
    },
    name: "noneof",
    icon: "unselectall",
    caption: message_default.format("dxFilterBuilder-filterOperationNoneOf")
  });
}

// node_modules/devextreme/esm/__internal/grids/grid_core/filter/m_filter_sync.js
var FILTER_ROW_OPERATIONS = ["=", "<>", "<", "<=", ">", ">=", "notcontains", "contains", "startswith", "endswith", "between"];
var FILTER_TYPES_INCLUDE = "include";
var FILTER_TYPES_EXCLUDE = "exclude";
function getColumnIdentifier(column) {
  return column.name || column.dataField;
}
function checkForErrors(columns7) {
  columns7.forEach((column) => {
    var identifier = getColumnIdentifier(column);
    if (!isDefined(identifier) && column.allowFiltering) {
      throw new ui_errors_default.Error("E1049", column.caption);
    }
  });
}
var getEmptyFilterValues = function() {
  return {
    filterType: FILTER_TYPES_INCLUDE,
    filterValues: void 0
  };
};
var canSyncHeaderFilterWithFilterRow = function(column) {
  var filterValues = column.filterValues || [];
  return !filtering_default.getGroupInterval(column) && !(column.headerFilter && column.headerFilter.dataSource) || 1 === filterValues.length && null === filterValues[0];
};
var getHeaderFilterFromCondition = function(headerFilterCondition, column) {
  if (!headerFilterCondition) {
    return getEmptyFilterValues();
  }
  var filterType;
  var selectedFilterOperation = headerFilterCondition[1];
  var value2 = headerFilterCondition[2];
  var hasArrayValue = Array.isArray(value2);
  if (!hasArrayValue) {
    if (!canSyncHeaderFilterWithFilterRow(column)) {
      return getEmptyFilterValues();
    }
  }
  switch (selectedFilterOperation) {
    case "anyof":
    case "=":
      filterType = FILTER_TYPES_INCLUDE;
      break;
    case "noneof":
    case "<>":
      filterType = FILTER_TYPES_EXCLUDE;
      break;
    default:
      return getEmptyFilterValues();
  }
  return {
    filterType,
    filterValues: hasArrayValue ? value2 : [value2]
  };
};
var getConditionFromFilterRow = function(column) {
  var value2 = column.filterValue;
  if (isDefined(value2)) {
    var operation = column.selectedFilterOperation || column.defaultFilterOperation || getDefaultOperation(column);
    var filter = [getColumnIdentifier(column), operation, column.filterValue];
    return filter;
  }
  return null;
};
var getConditionFromHeaderFilter = function(column) {
  var selectedOperation;
  var value2;
  var {
    filterValues
  } = column;
  if (!filterValues) {
    return null;
  }
  if (1 === filterValues.length && canSyncHeaderFilterWithFilterRow(column) && !Array.isArray(filterValues[0])) {
    column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = "<>" : selectedOperation = "=";
    value2 = filterValues[0];
  } else {
    column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = "noneof" : selectedOperation = "anyof";
    value2 = filterValues;
  }
  return [getColumnIdentifier(column), selectedOperation, value2];
};
var updateHeaderFilterCondition = function(columnsController, column, headerFilterCondition) {
  var headerFilter = getHeaderFilterFromCondition(headerFilterCondition, column);
  columnsController.columnOption(getColumnIdentifier(column), headerFilter);
};
var updateFilterRowCondition = function(columnsController, column, condition) {
  var filterRowOptions;
  var selectedFilterOperation = null === condition || void 0 === condition ? void 0 : condition[1];
  var filterValue = null === condition || void 0 === condition ? void 0 : condition[2];
  var filterOperations = column.filterOperations || column.defaultFilterOperations;
  var selectedOperationExists = !filterOperations || filterOperations.indexOf(selectedFilterOperation) >= 0;
  var defaultOperationSelected = selectedFilterOperation === column.defaultFilterOperation;
  var builtInOperationSelected = FILTER_ROW_OPERATIONS.includes(selectedFilterOperation);
  var filterValueNotNullOrEmpty = null !== filterValue && "" !== filterValue;
  if ((selectedOperationExists || defaultOperationSelected) && builtInOperationSelected && filterValueNotNullOrEmpty) {
    if (defaultOperationSelected && !isDefined(column.selectedFilterOperation)) {
      selectedFilterOperation = column.selectedFilterOperation;
    }
    filterRowOptions = {
      filterValue,
      selectedFilterOperation
    };
  } else {
    filterRowOptions = {
      filterValue: void 0,
      selectedFilterOperation: void 0
    };
  }
  columnsController.columnOption(getColumnIdentifier(column), filterRowOptions);
};
var FilterSyncController = class extends m_modules_default.Controller {
  init() {
    this._dataController = this.getController("data");
    this._columnsController = this.getController("columns");
    if (this._dataController.isFilterSyncActive()) {
      if (this._columnsController.isAllDataTypesDefined()) {
        this._initSync();
      } else {
        this._dataController.dataSourceChanged.add(() => this._initSync());
      }
    }
  }
  publicMethods() {
    return ["getCustomFilterOperations"];
  }
  syncFilterValue() {
    var that = this;
    var columns7 = this._columnsController.getFilteringColumns();
    this._skipSyncColumnOptions = true;
    columns7.forEach((column) => {
      var filterConditions = getMatchedConditions(that.option("filterValue"), getColumnIdentifier(column));
      if (1 === filterConditions.length) {
        var filterCondition = filterConditions[0];
        updateHeaderFilterCondition(this._columnsController, column, filterCondition);
        updateFilterRowCondition(this._columnsController, column, filterCondition);
      } else {
        isDefined(column.filterValues) && updateHeaderFilterCondition(this._columnsController, column, null);
        isDefined(column.filterValue) && updateFilterRowCondition(this._columnsController, column, null);
      }
    });
    this._skipSyncColumnOptions = false;
  }
  _initSync() {
    var columns7 = this._columnsController.getColumns();
    var pageIndex = this._dataController.pageIndex();
    checkForErrors(columns7);
    if (!this.option("filterValue")) {
      var filteringColumns = this._columnsController.getFilteringColumns();
      var filterValue = this.getFilterValueFromColumns(filteringColumns);
      this._silentOption("filterValue", filterValue);
    }
    this.syncFilterValue();
    this._dataController.pageIndex(pageIndex);
  }
  _getSyncFilterRow(filterValue, column) {
    var filter = getConditionFromFilterRow(column);
    if (isDefined(filter)) {
      return syncFilters(filterValue, filter);
    }
    return removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column));
  }
  _getSyncHeaderFilter(filterValue, column) {
    var filter = getConditionFromHeaderFilter(column);
    if (filter) {
      return syncFilters(filterValue, filter);
    }
    return removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column));
  }
  getFilterValueFromColumns(columns7) {
    if (!this._dataController.isFilterSyncActive()) {
      return null;
    }
    var filterValue = ["and"];
    columns7 && columns7.forEach((column) => {
      var headerFilter = getConditionFromHeaderFilter(column);
      var filterRow = getConditionFromFilterRow(column);
      headerFilter && addItem(headerFilter, filterValue);
      filterRow && addItem(filterRow, filterValue);
    });
    return getNormalizedFilter(filterValue);
  }
  syncFilterRow(column, filterValue) {
    this.option("filterValue", this._getSyncFilterRow(this.option("filterValue"), column));
  }
  syncHeaderFilter(column) {
    this.option("filterValue", this._getSyncHeaderFilter(this.option("filterValue"), column));
  }
  getCustomFilterOperations() {
    var _a;
    var filterBuilderCustomOperations = null !== (_a = this.option("filterBuilder.customOperations")) && void 0 !== _a ? _a : [];
    return [anyOf(this.component), noneOf(this.component)].concat(filterBuilderCustomOperations);
  }
};
var data10 = (Base) => class extends Base {
  optionChanged(args) {
    switch (args.name) {
      case "filterValue":
        this._applyFilter();
        this.isFilterSyncActive() && this._filterSyncController.syncFilterValue();
        args.handled = true;
        break;
      case "filterSyncEnabled":
        args.handled = true;
        break;
      case "columns":
        if (this.isFilterSyncActive()) {
          var column = this._columnsController.getColumnByPath(args.fullName);
          if (column && !this._filterSyncController._skipSyncColumnOptions) {
            var propertyName = this._parseColumnPropertyName(args.fullName);
            this._filterSyncController._skipSyncColumnOptions = true;
            if ("filterType" === propertyName) {
              if (FILTER_TYPES_EXCLUDE === args.value || FILTER_TYPES_EXCLUDE === args.previousValue) {
                this._filterSyncController.syncHeaderFilter(column);
              }
            } else if ("filterValues" === propertyName) {
              this._filterSyncController.syncHeaderFilter(column);
            } else if (["filterValue", "selectedFilterOperation"].includes(propertyName)) {
              this._filterSyncController.syncFilterRow(column, column.filterValue);
            }
            this._filterSyncController._skipSyncColumnOptions = false;
          }
        }
        super.optionChanged(args);
        break;
      default:
        super.optionChanged(args);
    }
  }
  isFilterSyncActive() {
    var filterSyncEnabledValue = this.option("filterSyncEnabled");
    return "auto" === filterSyncEnabledValue ? this.option("filterPanel.visible") : filterSyncEnabledValue;
  }
  skipCalculateColumnFilters() {
    return (isDefined(this.option("filterValue")) || this._filterSyncController._skipSyncColumnOptions) && this.isFilterSyncActive();
  }
  _calculateAdditionalFilter() {
    if (false === this.option("filterPanel.filterEnabled")) {
      return super._calculateAdditionalFilter();
    }
    var filters = [super._calculateAdditionalFilter()];
    var columns7 = this._columnsController.getFilteringColumns();
    var filterValue = this.option("filterValue");
    if (this.isFilterSyncActive()) {
      var currentColumnForHeaderFilter = this._headerFilterController.getCurrentColumn();
      var currentColumnForFilterRow = this._applyFilterController.getCurrentColumnForFiltering();
      var currentColumn = currentColumnForHeaderFilter || currentColumnForFilterRow;
      var needRemoveCurrentColumnFilter = currentColumnForHeaderFilter || isDefined(null === currentColumnForFilterRow || void 0 === currentColumnForFilterRow ? void 0 : currentColumnForFilterRow.filterValue);
      if (needRemoveCurrentColumnFilter && filterValue) {
        filterValue = removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(currentColumn));
      }
    }
    var customOperations = this._filterSyncController.getCustomFilterOperations();
    var calculatedFilterValue = getFilterExpression(filterValue, columns7, customOperations, "filterBuilder");
    if (calculatedFilterValue) {
      filters.push(calculatedFilterValue);
    }
    return m_utils_default.combineFilters(filters);
  }
  _parseColumnPropertyName(fullName) {
    var matched = fullName.match(/.*\.(.*)/);
    if (matched) {
      return matched[1];
    }
    return null;
  }
  clearFilter(filterName) {
    this.component.beginUpdate();
    if (arguments.length > 0) {
      if ("filterValue" === filterName) {
        this.option("filterValue", null);
      }
      super.clearFilter(filterName);
    } else {
      this.option("filterValue", null);
      super.clearFilter();
    }
    this.component.endUpdate();
  }
  _applyFilter() {
    if (this._filterSyncController._skipSyncColumnOptions) {
      return new Deferred().resolve();
    }
    return super._applyFilter.apply(this, arguments);
  }
};
var columnHeadersView5 = (Base) => class extends Base {
  optionChanged(args) {
    if ("filterValue" === args.name) {
      this._updateHeaderFilterIndicators();
    } else {
      super.optionChanged(args);
    }
  }
  _isHeaderFilterEmpty(column) {
    if (this._dataController.isFilterSyncActive()) {
      return !filterHasField(this.option("filterValue"), getColumnIdentifier(column));
    }
    return super._isHeaderFilterEmpty(column);
  }
  _needUpdateFilterIndicators() {
    return !this._dataController.isFilterSyncActive();
  }
};
var filterSyncModule = {
  defaultOptions: () => ({
    filterValue: null,
    filterSyncEnabled: "auto"
  }),
  controllers: {
    filterSync: FilterSyncController
  },
  extenders: {
    controllers: {
      data: data10
    },
    views: {
      columnHeadersView: columnHeadersView5
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/filter_sync.js
m_core_default.registerModule("filterSync", filterSyncModule);

// node_modules/devextreme/esm/__internal/filter_builder/m_filter_builder.js
var FILTER_BUILDER_CLASS2 = "dx-filterbuilder";
var FILTER_BUILDER_GROUP_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-group");
var FILTER_BUILDER_GROUP_ITEM_CLASS = "".concat(FILTER_BUILDER_GROUP_CLASS, "-item");
var FILTER_BUILDER_GROUP_CONTENT_CLASS = "".concat(FILTER_BUILDER_GROUP_CLASS, "-content");
var FILTER_BUILDER_GROUP_OPERATIONS_CLASS = "".concat(FILTER_BUILDER_GROUP_CLASS, "-operations");
var FILTER_BUILDER_GROUP_OPERATION_CLASS = "".concat(FILTER_BUILDER_GROUP_CLASS, "-operation");
var FILTER_BUILDER_ACTION_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-action");
var FILTER_BUILDER_IMAGE_CLASS = "".concat(FILTER_BUILDER_ACTION_CLASS, "-icon");
var FILTER_BUILDER_IMAGE_ADD_CLASS = "dx-icon-plus";
var FILTER_BUILDER_IMAGE_REMOVE_CLASS = "dx-icon-remove";
var FILTER_BUILDER_ITEM_TEXT_CLASS2 = "".concat(FILTER_BUILDER_CLASS2, "-text");
var FILTER_BUILDER_ITEM_FIELD_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-item-field");
var FILTER_BUILDER_ITEM_OPERATION_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-item-operation");
var FILTER_BUILDER_ITEM_VALUE_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-item-value");
var FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-item-value-text");
var FILTER_BUILDER_OVERLAY_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-overlay");
var FILTER_BUILDER_FILTER_OPERATIONS_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-operations");
var FILTER_BUILDER_FIELDS_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-fields");
var FILTER_BUILDER_ADD_CONDITION_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-add-condition");
var ACTIVE_CLASS = "dx-state-active";
var FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS = "".concat(FILTER_BUILDER_CLASS2, "-menu-custom-operation");
var SOURCE = "filterBuilder";
var DISABLED_STATE_CLASS5 = "dx-state-disabled";
var TAB_KEY = "tab";
var ENTER_KEY = "enter";
var ESCAPE_KEY = "escape";
var ACTIONS3 = [{
  name: "onEditorPreparing",
  config: {
    excludeValidators: ["disabled", "readOnly"],
    category: "rendering"
  }
}, {
  name: "onEditorPrepared",
  config: {
    excludeValidators: ["disabled", "readOnly"],
    category: "rendering"
  }
}, {
  name: "onValueChanged",
  config: {
    excludeValidators: ["disabled", "readOnly"]
  }
}];
var OPERATORS = {
  and: "and",
  or: "or",
  notAnd: "!and",
  notOr: "!or"
};
var EditorFactory2 = ui_editor_factory_mixin_default(class {
});
var FilterBuilder = class extends ui_widget_default {
  _getDefaultOptions() {
    return extend(super._getDefaultOptions(), {
      onEditorPreparing: null,
      onEditorPrepared: null,
      onValueChanged: null,
      fields: [],
      groupOperations: ["and", "or", "notAnd", "notOr"],
      maxGroupLevel: void 0,
      value: null,
      allowHierarchicalFields: false,
      groupOperationDescriptions: {
        and: message_default.format("dxFilterBuilder-and"),
        or: message_default.format("dxFilterBuilder-or"),
        notAnd: message_default.format("dxFilterBuilder-notAnd"),
        notOr: message_default.format("dxFilterBuilder-notOr")
      },
      customOperations: [],
      closePopupOnTargetScroll: true,
      filterOperationDescriptions: {
        between: message_default.format("dxFilterBuilder-filterOperationBetween"),
        equal: message_default.format("dxFilterBuilder-filterOperationEquals"),
        notEqual: message_default.format("dxFilterBuilder-filterOperationNotEquals"),
        lessThan: message_default.format("dxFilterBuilder-filterOperationLess"),
        lessThanOrEqual: message_default.format("dxFilterBuilder-filterOperationLessOrEquals"),
        greaterThan: message_default.format("dxFilterBuilder-filterOperationGreater"),
        greaterThanOrEqual: message_default.format("dxFilterBuilder-filterOperationGreaterOrEquals"),
        startsWith: message_default.format("dxFilterBuilder-filterOperationStartsWith"),
        contains: message_default.format("dxFilterBuilder-filterOperationContains"),
        notContains: message_default.format("dxFilterBuilder-filterOperationNotContains"),
        endsWith: message_default.format("dxFilterBuilder-filterOperationEndsWith"),
        isBlank: message_default.format("dxFilterBuilder-filterOperationIsBlank"),
        isNotBlank: message_default.format("dxFilterBuilder-filterOperationIsNotBlank")
      }
    });
  }
  _optionChanged(args) {
    switch (args.name) {
      case "closePopupOnTargetScroll":
        break;
      case "onEditorPreparing":
      case "onEditorPrepared":
      case "onValueChanged":
        this._initActions();
        break;
      case "customOperations":
        this._initCustomOperations();
        this._invalidate();
        break;
      case "fields":
      case "maxGroupLevel":
      case "groupOperations":
      case "allowHierarchicalFields":
      case "groupOperationDescriptions":
      case "filterOperationDescriptions":
        this._invalidate();
        break;
      case "value":
        if (args.value !== args.previousValue) {
          var disableInvalidateForValue = this._disableInvalidateForValue;
          if (!disableInvalidateForValue) {
            this._initModel();
            this._invalidate();
          }
          this._disableInvalidateForValue = false;
          this.executeAction("onValueChanged", {
            value: args.value,
            previousValue: args.previousValue
          });
          this._disableInvalidateForValue = disableInvalidateForValue;
        }
        break;
      default:
        super._optionChanged(args);
    }
  }
  getFilterExpression() {
    var fields = this._getNormalizedFields();
    var value2 = extend(true, [], this._model);
    return getFilterExpression(getNormalizedFilter(value2), fields, this._customOperations, SOURCE);
  }
  _getNormalizedFields() {
    return getNormalizedFields(this.option("fields"));
  }
  _updateFilter() {
    this._disableInvalidateForValue = true;
    var value2 = extend(true, [], this._model);
    var normalizedValue = getNormalizedFilter(value2);
    var oldValue = getNormalizedFilter(this._getModel(this.option("value")));
    if (JSON.stringify(oldValue) !== JSON.stringify(normalizedValue)) {
      this.option("value", normalizedValue);
    }
    this._disableInvalidateForValue = false;
    this._fireContentReadyAction();
  }
  _init() {
    this._initCustomOperations();
    this._initModel();
    this._initEditorFactory();
    this._initActions();
    super._init();
  }
  _initEditorFactory() {
    this._editorFactory = new EditorFactory2();
  }
  _initCustomOperations() {
    this._customOperations = getMergedOperations(this.option("customOperations"), this.option("filterOperationDescriptions.between"), this);
  }
  _getDefaultGroupOperation() {
    var _a, _b;
    return null !== (_b = null === (_a = this.option("groupOperations")) || void 0 === _a ? void 0 : _a[0]) && void 0 !== _b ? _b : OPERATORS.and;
  }
  _getModel(value2) {
    return convertToInnerStructure(value2, this._customOperations, this._getDefaultGroupOperation());
  }
  _initModel() {
    this._model = this._getModel(this.option("value"));
  }
  _initActions() {
    var that = this;
    that._actions = {};
    ACTIONS3.forEach((action) => {
      var actionConfig = extend({}, action.config);
      that._actions[action.name] = that._createActionByOption(action.name, actionConfig);
    });
  }
  executeAction(actionName, options2) {
    var action = this._actions[actionName];
    return action && action(options2);
  }
  _initMarkup() {
    this.$element().addClass(FILTER_BUILDER_CLASS2);
    super._initMarkup();
    this._createGroupElementByCriteria(this._model).appendTo(this.$element());
  }
  _createConditionElement(condition, parent) {
    return renderer_default("<div>").addClass(FILTER_BUILDER_GROUP_CLASS).append(this._createConditionItem(condition, parent));
  }
  _createGroupElementByCriteria(criteria, parent) {
    var groupLevel = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
    var $group = this._createGroupElement(criteria, parent, groupLevel);
    var $groupContent = $group.find(".".concat(FILTER_BUILDER_GROUP_CONTENT_CLASS));
    var groupCriteria = getGroupCriteria(criteria);
    for (var i = 0; i < groupCriteria.length; i++) {
      var innerCriteria = groupCriteria[i];
      if (isGroup(innerCriteria)) {
        this._createGroupElementByCriteria(innerCriteria, criteria, groupLevel + 1).appendTo($groupContent);
      } else if (isCondition(innerCriteria)) {
        this._createConditionElement(innerCriteria, criteria).appendTo($groupContent);
      }
    }
    return $group;
  }
  _createGroupElement(criteria, parent, groupLevel) {
    var $groupItem = renderer_default("<div>").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);
    var $groupContent = renderer_default("<div>").addClass(FILTER_BUILDER_GROUP_CONTENT_CLASS);
    var $group = renderer_default("<div>").addClass(FILTER_BUILDER_GROUP_CLASS).append($groupItem).append($groupContent);
    if (null != parent) {
      this._createRemoveButton(() => {
        removeItem(parent, criteria);
        $group.remove();
        this._updateFilter();
      }).appendTo($groupItem);
    }
    this._createGroupOperationButton(criteria).appendTo($groupItem);
    this._createAddButton(() => {
      var newGroup = createEmptyGroup(this._getDefaultGroupOperation());
      addItem(newGroup, criteria);
      this._createGroupElement(newGroup, criteria, groupLevel + 1).appendTo($groupContent);
      this._updateFilter();
    }, () => {
      var field = this.option("fields")[0];
      var newCondition = createCondition(field, this._customOperations);
      addItem(newCondition, criteria);
      this._createConditionElement(newCondition, criteria).appendTo($groupContent);
      this._updateFilter();
    }, groupLevel).appendTo($groupItem);
    return $group;
  }
  _createButton(caption) {
    return renderer_default("<div>").text(caption);
  }
  _createGroupOperationButton(criteria) {
    var groupOperations = this._getGroupOperations(criteria);
    var groupMenuItem = getGroupMenuItem(criteria, groupOperations);
    var caption = groupMenuItem.text;
    var $operationButton = groupOperations && groupOperations.length < 2 ? this._createButton(caption).addClass(DISABLED_STATE_CLASS5) : this._createButtonWithMenu({
      caption,
      menu: {
        items: groupOperations,
        displayExpr: "text",
        keyExpr: "value",
        onItemClick: (e) => {
          if (groupMenuItem !== e.itemData) {
            setGroupValue(criteria, e.itemData.value);
            $operationButton.text(e.itemData.text);
            groupMenuItem = e.itemData;
            this._updateFilter();
          }
        },
        onContentReady(e) {
          e.component.selectItem(groupMenuItem);
        },
        cssClass: FILTER_BUILDER_GROUP_OPERATIONS_CLASS
      }
    });
    return $operationButton.addClass(FILTER_BUILDER_ITEM_TEXT_CLASS2).addClass(FILTER_BUILDER_GROUP_OPERATION_CLASS).attr("tabindex", 0);
  }
  _createButtonWithMenu(options2) {
    var that = this;
    var removeMenu = function() {
      that.$element().find(".".concat(ACTIVE_CLASS)).removeClass(ACTIVE_CLASS);
      that.$element().find(".dx-overlay .dx-treeview").remove();
      that.$element().find(".dx-overlay").remove();
    };
    var rtlEnabled = this.option("rtlEnabled");
    var position2 = rtlEnabled ? "right" : "left";
    var $button = this._createButton(options2.caption);
    extend(options2.menu, {
      focusStateEnabled: true,
      selectionMode: "single",
      onItemClick: (handler = options2.menu.onItemClick, function(e) {
        handler(e);
        if ("dxclick" === e.event.type) {
          removeMenu();
        }
      }),
      onHiding() {
        $button.removeClass(ACTIVE_CLASS);
      },
      position: {
        my: "".concat(position2, " top"),
        at: "".concat(position2, " bottom"),
        offset: "0 1",
        of: $button,
        collision: "flip"
      },
      animation: null,
      onHidden() {
        removeMenu();
      },
      cssClass: "".concat(FILTER_BUILDER_OVERLAY_CLASS, " ").concat(options2.menu.cssClass),
      rtlEnabled
    });
    var handler;
    options2.popup = {
      onShown(info) {
        var treeViewElement = renderer_default(info.component.content()).find(".dx-treeview");
        var treeView = treeViewElement.dxTreeView("instance");
        events_engine_default.on(treeViewElement, "keyup keydown", (e) => {
          var keyName = normalizeKeyName(e);
          if ("keydown" === e.type && keyName === TAB_KEY || "keyup" === e.type && (keyName === ESCAPE_KEY || keyName === ENTER_KEY)) {
            info.component.hide();
            events_engine_default.trigger(options2.menu.position.of, "focus");
          }
        });
        treeView.focus();
        treeView.option("focusedElement", null);
      }
    };
    this._subscribeOnClickAndEnterKey($button, () => {
      removeMenu();
      that._createPopupWithTreeView(options2, that.$element());
      $button.addClass(ACTIVE_CLASS);
    });
    return $button;
  }
  _hasValueButton(condition) {
    var customOperation = getCustomOperation(this._customOperations, condition[1]);
    return customOperation ? false !== customOperation.hasValue : null !== condition[2];
  }
  _createOperationButtonWithMenu(condition, field) {
    var that = this;
    var availableOperations = getAvailableOperations(field, this.option("filterOperationDescriptions"), this._customOperations);
    var currentOperation = getOperationFromAvailable(getOperationValue(condition), availableOperations);
    var $operationButton = this._createButtonWithMenu({
      caption: currentOperation.text,
      menu: {
        items: availableOperations,
        displayExpr: "text",
        onItemRendered(e) {
          e.itemData.isCustom && renderer_default(e.itemElement).addClass(FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS);
        },
        onContentReady(e) {
          e.component.selectItem(currentOperation);
        },
        onItemClick: (e) => {
          if (currentOperation !== e.itemData) {
            currentOperation = e.itemData;
            updateConditionByOperation(condition, currentOperation.value, that._customOperations);
            var $valueButton = $operationButton.siblings().filter(".".concat(FILTER_BUILDER_ITEM_VALUE_CLASS));
            if (that._hasValueButton(condition)) {
              if (0 !== $valueButton.length) {
                $valueButton.remove();
              }
              that._createValueButton(condition, field).appendTo($operationButton.parent());
            } else {
              $valueButton.remove();
            }
            $operationButton.text(currentOperation.text);
            this._updateFilter();
          }
        },
        cssClass: FILTER_BUILDER_FILTER_OPERATIONS_CLASS
      }
    }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS2).addClass(FILTER_BUILDER_ITEM_OPERATION_CLASS).attr("tabindex", 0);
    return $operationButton;
  }
  _createOperationAndValueButtons(condition, field, $item) {
    this._createOperationButtonWithMenu(condition, field).appendTo($item);
    if (this._hasValueButton(condition)) {
      this._createValueButton(condition, field).appendTo($item);
    }
  }
  _createFieldButtonWithMenu(fields, condition, field) {
    var that = this;
    var allowHierarchicalFields = this.option("allowHierarchicalFields");
    var items = getItems(fields, allowHierarchicalFields);
    var item = getField(field.name || field.dataField, items);
    var getFullCaption = function(item2, items2) {
      return allowHierarchicalFields ? getCaptionWithParents(item2, items2) : item2.caption;
    };
    condition[0] = item.name || item.dataField;
    var $fieldButton = this._createButtonWithMenu({
      caption: getFullCaption(item, items),
      menu: {
        items,
        dataStructure: "plain",
        keyExpr: "id",
        parentId: "parentId",
        displayExpr: "caption",
        onItemClick: (e) => {
          if (item !== e.itemData) {
            item = e.itemData;
            condition[0] = item.name || item.dataField;
            condition[2] = "object" === item.dataType ? null : "";
            updateConditionByOperation(condition, getDefaultOperation(item), that._customOperations);
            $fieldButton.siblings().filter(".".concat(FILTER_BUILDER_ITEM_TEXT_CLASS2)).remove();
            that._createOperationAndValueButtons(condition, item, $fieldButton.parent());
            var caption = getFullCaption(item, e.component.option("items"));
            $fieldButton.text(caption);
            this._updateFilter();
          }
        },
        onContentReady(e) {
          e.component.selectItem(item);
        },
        cssClass: FILTER_BUILDER_FIELDS_CLASS
      }
    }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS2).addClass(FILTER_BUILDER_ITEM_FIELD_CLASS).attr("tabindex", 0);
    return $fieldButton;
  }
  _createConditionItem(condition, parent) {
    var $item = renderer_default("<div>").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);
    var fields = this._getNormalizedFields();
    var field = getField(condition[0], fields);
    this._createRemoveButton(() => {
      removeItem(parent, condition);
      var isSingleChild = 1 === $item.parent().children().length;
      if (isSingleChild) {
        $item.parent().remove();
      } else {
        $item.remove();
      }
      this._updateFilter();
    }).appendTo($item);
    this._createFieldButtonWithMenu(fields, condition, field).appendTo($item);
    this._createOperationAndValueButtons(condition, field, $item);
    return $item;
  }
  _getGroupOperations(criteria) {
    var groupOperations = this.option("groupOperations");
    var groupOperationDescriptions = this.option("groupOperationDescriptions");
    if (!groupOperations || !groupOperations.length) {
      groupOperations = [getGroupValue(criteria).replace("!", "not")];
    }
    return groupOperations.map((operation) => ({
      text: groupOperationDescriptions[operation],
      value: OPERATORS[operation]
    }));
  }
  _createRemoveButton(handler) {
    var $removeButton = renderer_default("<div>").addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_REMOVE_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr("tabindex", 0);
    this._subscribeOnClickAndEnterKey($removeButton, handler);
    return $removeButton;
  }
  _createAddButton(addGroupHandler, addConditionHandler, groupLevel) {
    var $button;
    var maxGroupLevel = this.option("maxGroupLevel");
    if (isDefined(maxGroupLevel) && groupLevel >= maxGroupLevel) {
      $button = this._createButton();
      this._subscribeOnClickAndEnterKey($button, addConditionHandler);
    } else {
      $button = this._createButtonWithMenu({
        menu: {
          items: [{
            caption: message_default.format("dxFilterBuilder-addCondition"),
            click: addConditionHandler
          }, {
            caption: message_default.format("dxFilterBuilder-addGroup"),
            click: addGroupHandler
          }],
          displayExpr: "caption",
          onItemClick(e) {
            e.itemData.click();
          },
          cssClass: FILTER_BUILDER_ADD_CONDITION_CLASS
        }
      });
    }
    return $button.addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_ADD_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr("tabindex", 0);
  }
  _createValueText(item, field, $container) {
    var that = this;
    var $text = renderer_default("<div>").html("&nbsp;").addClass(FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS).attr("tabindex", 0).appendTo($container);
    var value2 = item[2];
    var customOperation = getCustomOperation(that._customOperations, item[1]);
    if (!customOperation && field.lookup) {
      getCurrentLookupValueText(field, value2, (result2) => {
        renderValueText($text, result2);
      });
    } else {
      when(getCurrentValueText(field, value2, customOperation)).done((result2) => {
        renderValueText($text, result2, customOperation);
      });
    }
    that._subscribeOnClickAndEnterKey($text, (e) => {
      if ("keyup" === e.type) {
        e.stopPropagation();
      }
      that._createValueEditorWithEvents(item, field, $container);
    });
    return $text;
  }
  _updateConditionValue(item, value2, callback) {
    var areValuesDifferent = item[2] !== value2;
    if (areValuesDifferent) {
      item[2] = value2;
    }
    callback();
    this._updateFilter();
  }
  _addDocumentKeyUp($editor, handler) {
    var isComposing = false;
    var hasCompositionJustEnded = false;
    var document2 = dom_adapter_default.getDocument();
    var documentKeyUpHandler = (e) => {
      if (isComposing || hasCompositionJustEnded) {
        hasCompositionJustEnded = false;
        return;
      }
      handler(e);
    };
    events_engine_default.on(document2, "keyup", documentKeyUpHandler);
    var input = $editor.find("input");
    events_engine_default.on(input, "compositionstart", () => {
      isComposing = true;
    });
    events_engine_default.on(input, "compositionend", () => {
      isComposing = false;
      hasCompositionJustEnded = true;
    });
    events_engine_default.on(input, "keydown", (event) => {
      if (229 !== event.which) {
        hasCompositionJustEnded = false;
      }
    });
    this._documentKeyUpHandler = documentKeyUpHandler;
  }
  _addDocumentClick($editor, closeEditorFunc) {
    var document2 = dom_adapter_default.getDocument();
    var documentClickHandler = (e) => {
      if (!this._isFocusOnEditorParts($editor, e.target)) {
        events_engine_default.trigger($editor.find("input"), "change");
        closeEditorFunc();
      }
    };
    events_engine_default.on(document2, "dxpointerdown", documentClickHandler);
    this._documentClickHandler = documentClickHandler;
  }
  _isFocusOnEditorParts($editor, target) {
    var activeElement = target || dom_adapter_default.getActiveElement();
    return renderer_default(activeElement).closest($editor.children()).length || renderer_default(activeElement).closest(".dx-dropdowneditor-overlay").length;
  }
  _removeEvents() {
    var document2 = dom_adapter_default.getDocument();
    isDefined(this._documentKeyUpHandler) && events_engine_default.off(document2, "keyup", this._documentKeyUpHandler);
    isDefined(this._documentClickHandler) && events_engine_default.off(document2, "dxpointerdown", this._documentClickHandler);
  }
  _dispose() {
    this._removeEvents();
    super._dispose();
  }
  _createValueEditorWithEvents(item, field, $container) {
    var value2 = item[2];
    var createValueText = () => {
      $container.empty();
      this._removeEvents();
      return this._createValueText(item, field, $container);
    };
    var closeEditor = () => {
      this._updateConditionValue(item, value2, () => {
        createValueText();
      });
    };
    var options2 = {
      value: "" === value2 ? null : value2,
      filterOperation: getOperationValue(item),
      setValue(data17) {
        value2 = null === data17 ? "" : data17;
      },
      closeEditor,
      text: $container.text()
    };
    $container.empty();
    var $editor = this._createValueEditor($container, field, options2);
    events_engine_default.trigger($editor.find("input").not(":hidden").eq(0), "focus");
    this._removeEvents();
    this._addDocumentClick($editor, closeEditor);
    this._addDocumentKeyUp($editor, (e) => {
      var keyName = normalizeKeyName(e);
      if (keyName === TAB_KEY) {
        if (this._isFocusOnEditorParts($editor)) {
          return;
        }
        this._updateConditionValue(item, value2, () => {
          createValueText();
          if (e.shiftKey) {
            events_engine_default.trigger($container.prev(), "focus");
          }
        });
      }
      if (keyName === ESCAPE_KEY) {
        events_engine_default.trigger(createValueText(), "focus");
      }
      if (keyName === ENTER_KEY) {
        this._updateConditionValue(item, value2, () => {
          events_engine_default.trigger(createValueText(), "focus");
        });
      }
    });
    this._fireContentReadyAction();
  }
  _createValueButton(item, field) {
    var $valueButton = renderer_default("<div>").addClass(FILTER_BUILDER_ITEM_TEXT_CLASS2).addClass(FILTER_BUILDER_ITEM_VALUE_CLASS);
    this._createValueText(item, field, $valueButton);
    return $valueButton;
  }
  _createValueEditor($container, field, options2) {
    var $editor = renderer_default("<div>").attr("tabindex", 0).appendTo($container);
    var customOperation = getCustomOperation(this._customOperations, options2.filterOperation);
    var editorTemplate2 = customOperation && customOperation.editorTemplate ? customOperation.editorTemplate : field.editorTemplate;
    if (editorTemplate2) {
      var template = this._getTemplate(editorTemplate2);
      template.render({
        model: extend({
          field
        }, options2),
        container: $editor
      });
    } else {
      this._editorFactory.createEditor.call(this, $editor, extend({}, field, options2, {
        parentType: SOURCE
      }));
    }
    return $editor;
  }
  _createPopupWithTreeView(options2, $container) {
    var that = this;
    var $popup = renderer_default("<div>").addClass(options2.menu.cssClass).appendTo($container);
    this._createComponent($popup, ui_popup_default, {
      onHiding: options2.menu.onHiding,
      onHidden: options2.menu.onHidden,
      rtlEnabled: options2.menu.rtlEnabled,
      position: options2.menu.position,
      animation: options2.menu.animation,
      contentTemplate(contentElement) {
        var $menuContainer = renderer_default("<div>").appendTo(contentElement);
        that._createComponent($menuContainer, tree_view_default, options2.menu);
        this.repaint();
      },
      _ignoreFunctionValueDeprecation: true,
      maxHeight: () => getElementMaxHeightByWindow(options2.menu.position.of),
      visible: true,
      focusStateEnabled: false,
      preventScrollEvents: false,
      hideOnParentScroll: this.option("closePopupOnTargetScroll"),
      hideOnOutsideClick: true,
      onShown: options2.popup.onShown,
      shading: false,
      width: "auto",
      height: "auto",
      showTitle: false,
      _wrapperClassExternal: options2.menu.cssClass
    });
  }
  _subscribeOnClickAndEnterKey($button, handler) {
    events_engine_default.on($button, "dxclick", handler);
    events_engine_default.on($button, "keyup", (e) => {
      if (normalizeKeyName(e) === ENTER_KEY) {
        handler(e);
      }
    });
  }
};
component_registrator_default("dxFilterBuilder", FilterBuilder);
var m_filter_builder_default = FilterBuilder;

// node_modules/devextreme/esm/ui/filter_builder.js
var filter_builder_default = m_filter_builder_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/filter/m_filter_builder.js
var FilterBuilderView = class extends m_modules_default.View {
  init() {
    super.init();
    this._columnsController = this.getController("columns");
    this._filterSyncController = this.getController("filterSync");
  }
  optionChanged(args) {
    switch (args.name) {
      case "filterBuilder":
      case "filterBuilderPopup":
        this._invalidate();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _renderCore() {
    this._updatePopupOptions();
  }
  _updatePopupOptions() {
    if (this.option("filterBuilderPopup.visible")) {
      this._initPopup();
    } else if (this._filterBuilderPopup) {
      this._filterBuilderPopup.hide();
    }
  }
  _disposePopup() {
    if (this._filterBuilderPopup) {
      this._filterBuilderPopup.dispose();
      this._filterBuilderPopup = void 0;
    }
    if (this._filterBuilder) {
      this._filterBuilder.dispose();
      this._filterBuilder = void 0;
    }
  }
  _initPopup() {
    var that = this;
    that._disposePopup();
    that._filterBuilderPopup = that._createComponent(that.element(), ui_popup_default, extend({
      title: message_default.format("dxDataGrid-filterBuilderPopupTitle"),
      contentTemplate: ($contentElement) => that._getPopupContentTemplate($contentElement),
      onOptionChanged(args) {
        if ("visible" === args.name) {
          that.option("filterBuilderPopup.visible", args.value);
        }
      },
      toolbarItems: that._getPopupToolbarItems()
    }, that.option("filterBuilderPopup"), {
      onHidden() {
        restoreFocus(that);
        that._disposePopup();
      }
    }));
  }
  _getPopupContentTemplate(contentElement) {
    var $contentElement = renderer_default(contentElement);
    var $filterBuilderContainer = renderer_default("<div>").appendTo(renderer_default(contentElement));
    this._filterBuilder = this._createComponent($filterBuilderContainer, filter_builder_default, extend({
      value: this.option("filterValue"),
      fields: this._columnsController.getFilteringColumns()
    }, this.option("filterBuilder"), {
      customOperations: this._filterSyncController.getCustomFilterOperations()
    }));
    this._createComponent($contentElement, scroll_view_default, {
      direction: "both"
    });
  }
  _getPopupToolbarItems() {
    var that = this;
    return [{
      toolbar: "bottom",
      location: "after",
      widget: "dxButton",
      options: {
        text: message_default.format("OK"),
        onClick() {
          var filter = that._filterBuilder.option("value");
          that.option("filterValue", filter);
          that._filterBuilderPopup.hide();
        }
      }
    }, {
      toolbar: "bottom",
      location: "after",
      widget: "dxButton",
      options: {
        text: message_default.format("Cancel"),
        onClick() {
          that._filterBuilderPopup.hide();
        }
      }
    }];
  }
};
var filterBuilderModule = {
  defaultOptions: () => ({
    filterBuilder: {
      groupOperationDescriptions: {
        and: message_default.format("dxFilterBuilder-and"),
        or: message_default.format("dxFilterBuilder-or"),
        notAnd: message_default.format("dxFilterBuilder-notAnd"),
        notOr: message_default.format("dxFilterBuilder-notOr")
      },
      filterOperationDescriptions: {
        between: message_default.format("dxFilterBuilder-filterOperationBetween"),
        equal: message_default.format("dxFilterBuilder-filterOperationEquals"),
        notEqual: message_default.format("dxFilterBuilder-filterOperationNotEquals"),
        lessThan: message_default.format("dxFilterBuilder-filterOperationLess"),
        lessThanOrEqual: message_default.format("dxFilterBuilder-filterOperationLessOrEquals"),
        greaterThan: message_default.format("dxFilterBuilder-filterOperationGreater"),
        greaterThanOrEqual: message_default.format("dxFilterBuilder-filterOperationGreaterOrEquals"),
        startsWith: message_default.format("dxFilterBuilder-filterOperationStartsWith"),
        contains: message_default.format("dxFilterBuilder-filterOperationContains"),
        notContains: message_default.format("dxFilterBuilder-filterOperationNotContains"),
        endsWith: message_default.format("dxFilterBuilder-filterOperationEndsWith"),
        isBlank: message_default.format("dxFilterBuilder-filterOperationIsBlank"),
        isNotBlank: message_default.format("dxFilterBuilder-filterOperationIsNotBlank")
      }
    },
    filterBuilderPopup: {}
  }),
  views: {
    filterBuilderView: FilterBuilderView
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/filter_builder.js
m_core_default.registerModule("filterBuilder", filterBuilderModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/filter/m_filter_panel.js
var FILTER_PANEL_CLASS = "filter-panel";
var FILTER_PANEL_TEXT_CLASS = "".concat(FILTER_PANEL_CLASS, "-text");
var FILTER_PANEL_CHECKBOX_CLASS = "".concat(FILTER_PANEL_CLASS, "-checkbox");
var FILTER_PANEL_CLEAR_FILTER_CLASS = "".concat(FILTER_PANEL_CLASS, "-clear-filter");
var FILTER_PANEL_LEFT_CONTAINER = "".concat(FILTER_PANEL_CLASS, "-left");
var FILTER_PANEL_TARGET = "filterPanel";
var FilterPanelView = class extends m_modules_default.View {
  init() {
    this._dataController = this.getController("data");
    this._columnsController = this.getController("columns");
    this._filterSyncController = this.getController("filterSync");
    this._dataController.dataSourceChanged.add(() => this.render());
  }
  isVisible() {
    return this.option("filterPanel.visible") && this._dataController.dataSource();
  }
  _renderCore() {
    var $element = this.element();
    $element.empty();
    var isColumnsDefined = !!this._columnsController.getColumns().length;
    if (!isColumnsDefined) {
      return;
    }
    $element.addClass(this.addWidgetPrefix(FILTER_PANEL_CLASS));
    var $leftContainer = renderer_default("<div>").addClass(this.addWidgetPrefix(FILTER_PANEL_LEFT_CONTAINER)).appendTo($element);
    this._renderFilterBuilderText($element, $leftContainer);
  }
  _renderFilterBuilderText($element, $leftContainer) {
    var $filterElement = this._getFilterElement();
    var $textElement = this._getTextElement();
    if (this.option("filterValue") || this._filterValueBuffer) {
      var $checkElement = this._getCheckElement();
      var $removeButtonElement = this._getRemoveButtonElement();
      $leftContainer.append($checkElement).append($filterElement).append($textElement);
      $element.append($removeButtonElement);
      return;
    }
    $leftContainer.append($filterElement).append($textElement);
  }
  _getCheckElement() {
    var that = this;
    var $element = renderer_default("<div>").addClass(this.addWidgetPrefix(FILTER_PANEL_CHECKBOX_CLASS));
    that._createComponent($element, check_box_default, {
      value: that.option("filterPanel.filterEnabled"),
      onValueChanged(e) {
        that.option("filterPanel.filterEnabled", e.value);
      }
    });
    $element.attr("title", this.option("filterPanel.texts.filterEnabledHint"));
    return $element;
  }
  _getFilterElement() {
    var that = this;
    var $element = renderer_default("<div>").addClass("dx-icon-filter");
    events_engine_default.on($element, "click", () => that._showFilterBuilder());
    registerKeyboardAction2("filterPanel", that, $element, void 0, () => that._showFilterBuilder());
    that._addTabIndexToElement($element);
    return $element;
  }
  _getTextElement() {
    var that = this;
    var $textElement = renderer_default("<div>").addClass(that.addWidgetPrefix(FILTER_PANEL_TEXT_CLASS));
    var filterText;
    var filterValue = that.option("filterValue");
    if (filterValue) {
      when(that.getFilterText(filterValue, this._filterSyncController.getCustomFilterOperations())).done((filterText2) => {
        var customizeText = that.option("filterPanel.customizeText");
        if (customizeText) {
          var customText = customizeText({
            component: that.component,
            filterValue,
            text: filterText2
          });
          if ("string" === typeof customText) {
            filterText2 = customText;
          }
        }
        $textElement.text(filterText2);
      });
    } else {
      filterText = that.option("filterPanel.texts.createFilter");
      $textElement.text(filterText);
    }
    events_engine_default.on($textElement, "click", () => that._showFilterBuilder());
    registerKeyboardAction2("filterPanel", that, $textElement, void 0, () => that._showFilterBuilder());
    that._addTabIndexToElement($textElement);
    return $textElement;
  }
  _showFilterBuilder() {
    this.option("filterBuilderPopup.visible", true);
  }
  _getRemoveButtonElement() {
    var that = this;
    var clearFilterValue = () => that.option("filterValue", null);
    var $element = renderer_default("<div>").addClass(that.addWidgetPrefix(FILTER_PANEL_CLEAR_FILTER_CLASS)).text(that.option("filterPanel.texts.clearFilter"));
    events_engine_default.on($element, "click", clearFilterValue);
    registerKeyboardAction2("filterPanel", this, $element, void 0, clearFilterValue);
    that._addTabIndexToElement($element);
    return $element;
  }
  _addTabIndexToElement($element) {
    if (!this.option("useLegacyKeyboardNavigation")) {
      var tabindex = this.option("tabindex") || 0;
      $element.attr("tabindex", tabindex);
    }
  }
  optionChanged(args) {
    switch (args.name) {
      case "filterValue":
        this._invalidate();
        this.option("filterPanel.filterEnabled", true);
        args.handled = true;
        break;
      case "filterPanel":
        this._invalidate();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  _getConditionText(fieldText, operationText, valueText) {
    var result2 = "[".concat(fieldText, "] ").concat(operationText);
    if (isDefined(valueText)) {
      result2 += valueText;
    }
    return result2;
  }
  _getValueMaskedText(value2) {
    return Array.isArray(value2) ? "('".concat(value2.join("', '"), "')") : " '".concat(value2, "'");
  }
  _getValueText(field, customOperation, value2) {
    var deferred = new Deferred();
    var hasCustomOperation = customOperation && customOperation.customizeText;
    if (isDefined(value2) || hasCustomOperation) {
      if (!hasCustomOperation && field.lookup) {
        getCurrentLookupValueText(field, value2, (data17) => {
          deferred.resolve(this._getValueMaskedText(data17));
        });
      } else {
        var displayValue = Array.isArray(value2) ? value2 : m_utils_default.getDisplayValue(field, value2, null);
        when(getCurrentValueText(field, displayValue, customOperation, FILTER_PANEL_TARGET)).done((data17) => {
          deferred.resolve(this._getValueMaskedText(data17));
        });
      }
    } else {
      deferred.resolve("");
    }
    return deferred.promise();
  }
  getConditionText(filterValue, options2) {
    var that = this;
    var operation = filterValue[1];
    var deferred = new Deferred();
    var customOperation = getCustomOperation(options2.customOperations, operation);
    var operationText;
    var field = getField(filterValue[0], options2.columns);
    var fieldText = field.caption || "";
    var value2 = filterValue[2];
    if (customOperation) {
      operationText = customOperation.caption || captionize(customOperation.name);
    } else if (null === value2) {
      operationText = getCaptionByOperation("=" === operation ? "isblank" : "isnotblank", options2.filterOperationDescriptions);
    } else {
      operationText = getCaptionByOperation(operation, options2.filterOperationDescriptions);
    }
    this._getValueText(field, customOperation, value2).done((valueText) => {
      deferred.resolve(that._getConditionText(fieldText, operationText, valueText));
    });
    return deferred;
  }
  getGroupText(filterValue, options2, isInnerGroup) {
    var that = this;
    var result2 = new Deferred();
    var textParts = [];
    var groupValue = getGroupValue(filterValue);
    filterValue.forEach((item) => {
      if (isCondition(item)) {
        textParts.push(that.getConditionText(item, options2));
      } else if (isGroup(item)) {
        textParts.push(that.getGroupText(item, options2, true));
      }
    });
    when.apply(this, textParts).done(function() {
      var text;
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      if (groupValue.startsWith("!")) {
        var groupText = options2.groupOperationDescriptions["not".concat(groupValue.substring(1, 2).toUpperCase()).concat(groupValue.substring(2))].split(" ");
        text = "".concat(groupText[0], " ").concat(args[0]);
      } else {
        text = args.join(" ".concat(options2.groupOperationDescriptions[groupValue], " "));
      }
      if (isInnerGroup) {
        text = "(".concat(text, ")");
      }
      result2.resolve(text);
    });
    return result2;
  }
  getFilterText(filterValue, customOperations) {
    var options2 = {
      customOperations,
      columns: this._columnsController.getFilteringColumns(),
      filterOperationDescriptions: this.option("filterBuilder.filterOperationDescriptions"),
      groupOperationDescriptions: this.option("filterBuilder.groupOperationDescriptions")
    };
    return isCondition(filterValue) ? this.getConditionText(filterValue, options2) : this.getGroupText(filterValue, options2);
  }
};
var data11 = (Base) => class extends Base {
  optionChanged(args) {
    switch (args.name) {
      case "filterPanel":
        this._applyFilter();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
};
var filterPanelModule = {
  defaultOptions: () => ({
    filterPanel: {
      visible: false,
      filterEnabled: true,
      texts: {
        createFilter: message_default.format("dxDataGrid-filterPanelCreateFilter"),
        clearFilter: message_default.format("dxDataGrid-filterPanelClearFilter"),
        filterEnabledHint: message_default.format("dxDataGrid-filterPanelFilterEnabledHint")
      }
    }
  }),
  views: {
    filterPanelView: FilterPanelView
  },
  extenders: {
    controllers: {
      data: data11
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/filter_panel.js
m_core_default.registerModule("filterPanel", filterPanelModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/search/m_search.js
var SEARCH_PANEL_CLASS = "search-panel";
var SEARCH_TEXT_CLASS = "search-text";
var HEADER_PANEL_CLASS2 = "header-panel";
var FILTERING_TIMEOUT2 = 700;
function allowSearch(column) {
  var _a;
  return !!(null !== (_a = column.allowSearch) && void 0 !== _a ? _a : column.allowFiltering);
}
function parseValue(column, text) {
  var {
    lookup
  } = column;
  if (!column.parseValue) {
    return text;
  }
  if (lookup) {
    return column.parseValue.call(lookup, text);
  }
  return column.parseValue(text);
}
var dataController = (base) => class extends base {
  optionChanged(args) {
    switch (args.fullName) {
      case "searchPanel.text":
      case "searchPanel":
        this._applyFilter();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  publicMethods() {
    return super.publicMethods().concat(["searchByText"]);
  }
  _calculateAdditionalFilter() {
    var filter = super._calculateAdditionalFilter();
    var searchFilter = this.calculateSearchFilter(this.option("searchPanel.text"));
    return m_utils_default.combineFilters([filter, searchFilter]);
  }
  searchByText(text) {
    this.option("searchPanel.text", text);
  }
  calculateSearchFilter(text) {
    var i;
    var column;
    var columns7 = this._columnsController.getColumns();
    var searchVisibleColumnsOnly = this.option("searchPanel.searchVisibleColumnsOnly");
    var lookup;
    var filters = [];
    if (!text) {
      return null;
    }
    function onQueryDone(items) {
      var valueGetter = compileGetter(lookup.valueExpr);
      for (var _i = 0; _i < items.length; _i++) {
        var value2 = valueGetter(items[_i]);
        filters.push(column.createFilterExpression(value2, null, "search"));
      }
    }
    for (i = 0; i < columns7.length; i++) {
      column = columns7[i];
      if (searchVisibleColumnsOnly && !column.visible) {
        continue;
      }
      if (allowSearch(column) && column.calculateFilterExpression) {
        lookup = column.lookup;
        var filterValue = parseValue(column, text);
        if (lookup && lookup.items) {
          query_default(lookup.items).filter(column.createFilterExpression.call({
            dataField: lookup.displayExpr,
            dataType: lookup.dataType,
            calculateFilterExpression: column.calculateFilterExpression
          }, filterValue, null, "search")).enumerate().done(onQueryDone);
        } else if (void 0 !== filterValue) {
          filters.push(column.createFilterExpression(filterValue, null, "search"));
        }
      }
    }
    if (0 === filters.length) {
      return ["!"];
    }
    return m_utils_default.combineFilters(filters, "or");
  }
};
var headerPanel6 = (Base) => class extends Base {
  optionChanged(args) {
    if ("searchPanel" === args.name) {
      if ("searchPanel.text" === args.fullName) {
        var editor = this.getSearchTextEditor();
        if (editor) {
          editor.option("value", args.value);
        }
      } else {
        this._invalidate();
      }
      args.handled = true;
    } else {
      super.optionChanged(args);
    }
  }
  _getToolbarItems() {
    var items = super._getToolbarItems();
    return this._prepareSearchItem(items);
  }
  _prepareSearchItem(items) {
    var that = this;
    var dataController2 = this._dataController;
    var searchPanelOptions = this.option("searchPanel");
    if (searchPanelOptions && searchPanelOptions.visible) {
      var toolbarItem = {
        template(data17, index, container) {
          var $search = renderer_default("<div>").addClass(that.addWidgetPrefix(SEARCH_PANEL_CLASS)).appendTo(container);
          that._editorFactoryController.createEditor($search, {
            width: searchPanelOptions.width,
            placeholder: searchPanelOptions.placeholder,
            parentType: "searchPanel",
            value: that.option("searchPanel.text"),
            updateValueTimeout: FILTERING_TIMEOUT2,
            setValue(value2) {
              dataController2.searchByText(value2);
            },
            editorOptions: {
              inputAttr: {
                "aria-label": message_default.format("".concat(that.component.NAME, "-ariaSearchInGrid"))
              }
            }
          });
          that.resize();
        },
        name: "searchPanel",
        location: "after",
        locateInMenu: "never",
        sortIndex: 40
      };
      items.push(toolbarItem);
    }
    return items;
  }
  getSearchTextEditor() {
    var that = this;
    var $element = that.element();
    var $searchPanel = $element.find(".".concat(that.addWidgetPrefix(SEARCH_PANEL_CLASS))).filter(function() {
      return renderer_default(this).closest(".".concat(that.addWidgetPrefix(HEADER_PANEL_CLASS2))).is($element);
    });
    if ($searchPanel.length) {
      return $searchPanel.dxTextBox("instance");
    }
    return null;
  }
};
var rowsView8 = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    this._searchParams = [];
    this._dataController = this.getController("data");
  }
  dispose() {
    clearTimeout(this._highlightTimer);
    super.dispose();
  }
  _getFormattedSearchText(column, searchText) {
    var value2 = parseValue(column, searchText);
    var formatOptions = m_utils_default.getFormatOptionsByColumn(column, "search");
    return m_utils_default.formatValue(value2, formatOptions);
  }
  _getStringNormalizer() {
    var _a, _b, _c, _d;
    var isCaseSensitive = this.option("searchPanel.highlightCaseSensitive");
    var dataSource = null === (_b = null === (_a = this._dataController) || void 0 === _a ? void 0 : _a.getDataSource) || void 0 === _b ? void 0 : _b.call(_a);
    var langParams = null === (_d = null === (_c = null === dataSource || void 0 === dataSource ? void 0 : dataSource.loadOptions) || void 0 === _c ? void 0 : _c.call(dataSource)) || void 0 === _d ? void 0 : _d.langParams;
    return (str) => toComparable(str, isCaseSensitive, langParams);
  }
  _findHighlightingTextNodes(column, cellElement, searchText) {
    var $parent = cellElement.parent();
    var $items;
    var stringNormalizer = this._getStringNormalizer();
    var normalizedSearchText = stringNormalizer(searchText);
    var resultTextNodes = [];
    if (!$parent.length) {
      $parent = renderer_default("<div>").append(cellElement);
    } else if (column) {
      if (column.groupIndex >= 0 && !column.showWhenGrouped) {
        $items = cellElement;
      } else {
        var columnIndex = this._columnsController.getVisibleIndex(column.index);
        $items = $parent.children("td").eq(columnIndex).find("*");
      }
    }
    $items = (null === $items || void 0 === $items ? void 0 : $items.length) ? $items : $parent.find("*");
    $items.each((_, element) => {
      var _a, _b;
      var $contents = renderer_default(element).contents();
      for (var i = 0; i < $contents.length; i++) {
        var node = $contents.get(i);
        if (3 === node.nodeType) {
          var normalizedText = stringNormalizer(null !== (_b = null !== (_a = node.textContent) && void 0 !== _a ? _a : node.nodeValue) && void 0 !== _b ? _b : "");
          if (normalizedText.includes(normalizedSearchText)) {
            resultTextNodes.push(node);
          }
        }
      }
    });
    return resultTextNodes;
  }
  _highlightSearchTextCore($textNode, searchText) {
    var $searchTextSpan = renderer_default("<span>").addClass(this.addWidgetPrefix(SEARCH_TEXT_CLASS));
    var text = $textNode.text();
    var firstContentElement = $textNode[0];
    var stringNormalizer = this._getStringNormalizer();
    var index = stringNormalizer(text).indexOf(stringNormalizer(searchText));
    if (index >= 0) {
      if (firstContentElement.textContent) {
        firstContentElement.textContent = text.substr(0, index);
      } else {
        firstContentElement.nodeValue = text.substr(0, index);
      }
      $textNode.after($searchTextSpan.text(text.substr(index, searchText.length)));
      $textNode = renderer_default(dom_adapter_default.createTextNode(text.substr(index + searchText.length))).insertAfter($searchTextSpan);
      return this._highlightSearchTextCore($textNode, searchText);
    }
  }
  _highlightSearchText(cellElement, isEquals, column) {
    var that = this;
    var stringNormalizer = this._getStringNormalizer();
    var searchText = that.option("searchPanel.text");
    if (isEquals && column) {
      searchText = searchText && that._getFormattedSearchText(column, searchText);
    }
    if (searchText && that.option("searchPanel.highlightSearchText")) {
      var textNodes = that._findHighlightingTextNodes(column, cellElement, searchText);
      textNodes.forEach((textNode) => {
        if (isEquals) {
          if (stringNormalizer(renderer_default(textNode).text()) === stringNormalizer(null !== searchText && void 0 !== searchText ? searchText : "")) {
            renderer_default(textNode).replaceWith(renderer_default("<span>").addClass(that.addWidgetPrefix(SEARCH_TEXT_CLASS)).text(renderer_default(textNode).text()));
          }
        } else {
          that._highlightSearchTextCore(renderer_default(textNode), searchText);
        }
      });
    }
  }
  _renderCore() {
    var deferred = super._renderCore.apply(this, arguments);
    if (this.option().rowTemplate || this.option("dataRowTemplate")) {
      if (this.option("templatesRenderAsynchronously")) {
        clearTimeout(this._highlightTimer);
        this._highlightTimer = setTimeout(() => {
          this._highlightSearchText(this.getTableElement());
        });
      } else {
        this._highlightSearchText(this.getTableElement());
      }
    }
    return deferred;
  }
  _updateCell($cell, parameters) {
    var {
      column
    } = parameters;
    var dataType = column.lookup && column.lookup.dataType || column.dataType;
    var isEquals = "string" !== dataType;
    if (allowSearch(column) && !parameters.isOnForm) {
      if (this.option("templatesRenderAsynchronously")) {
        if (!this._searchParams.length) {
          clearTimeout(this._highlightTimer);
          this._highlightTimer = setTimeout(() => {
            this._searchParams.forEach((params) => {
              this._highlightSearchText.apply(this, params);
            });
            this._searchParams = [];
          });
        }
        this._searchParams.push([$cell, isEquals, column]);
      } else {
        this._highlightSearchText($cell, isEquals, column);
      }
    }
    super._updateCell($cell, parameters);
  }
};
var searchModule = {
  defaultOptions: () => ({
    searchPanel: {
      visible: false,
      width: 160,
      placeholder: message_default.format("dxDataGrid-searchPanelPlaceholder"),
      highlightSearchText: true,
      highlightCaseSensitive: false,
      text: "",
      searchVisibleColumnsOnly: false
    }
  }),
  extenders: {
    controllers: {
      data: dataController
    },
    views: {
      headerPanel: headerPanel6,
      rowsView: rowsView8
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/search.js
m_core_default.registerModule("search", searchModule);

// node_modules/devextreme/esm/renovation/component_wrapper/grid_pager.js
var GridPagerWrapper = class extends ComponentWrapper {
  _optionChanged(args) {
    switch (args.name) {
      case "pageIndex":
        var pageIndexChanged = this.option("pageIndexChanged");
        if (pageIndexChanged) {
          pageIndexChanged(args.value);
        }
        break;
      case "pageSize":
        var pageSizeChanged = this.option("pageSizeChanged");
        if (pageSizeChanged) {
          pageSizeChanged(args.value);
        }
    }
    super._optionChanged(args);
  }
};

// node_modules/devextreme/esm/renovation/ui/pager/utils/get_element_width.js
function getElementStyle2(name2, element) {
  var _getElementComputedSt;
  var computedStyle = null !== (_getElementComputedSt = getElementComputedStyle(element)) && void 0 !== _getElementComputedSt ? _getElementComputedSt : {};
  return toNumber(computedStyle[name2]);
}
function getElementContentWidth(element) {
  var padding = getElementStyle2("paddingLeft", element) + getElementStyle2("paddingRight", element);
  var width = getElementStyle2("width", element);
  return width - padding;
}
function getElementWidth2(element) {
  var margin = getElementStyle2("marginLeft", element) + getElementStyle2("marginRight", element);
  var width = getElementStyle2("width", element);
  return margin + width;
}
function getElementMinWidth(element) {
  return getElementStyle2("minWidth", element);
}

// node_modules/devextreme/esm/renovation/ui/pager/resizable_container.js
var _excluded12 = ["contentTemplate", "pagerProps"];
var viewFunction11 = (_ref) => {
  var {
    contentAttributes,
    infoTextRef,
    infoTextVisible,
    isLargeDisplayMode,
    pageSizesRef,
    pagesRef,
    parentRef,
    props: {
      contentTemplate: Content
    }
  } = _ref;
  return Content(_extends({
    rootElementRef: parentRef,
    pageSizesRef,
    infoTextRef,
    pagesRef,
    infoTextVisible,
    isLargeDisplayMode
  }, contentAttributes));
};
function calculateLargeDisplayMode(_ref2) {
  var {
    pageSizes: pageSizesWidth,
    pages: pagesWidth,
    parent: parentWidth
  } = _ref2;
  return parentWidth - (pageSizesWidth + pagesWidth) > 0;
}
function calculateInfoTextVisible(_ref3) {
  var {
    info: infoWidth,
    pageSizes: pageSizesWidth,
    pages: pagesWidth,
    parent: parentWidth
  } = _ref3;
  var minimalWidth = pageSizesWidth + pagesWidth + infoWidth;
  return parentWidth - minimalWidth > 0;
}
function getElementsWidth(_ref4) {
  var {
    info,
    pageSizes,
    pages,
    parent
  } = _ref4;
  var parentWidth = getElementContentWidth(parent);
  var pageSizesWidth = getElementWidth2(pageSizes);
  var infoWidth = getElementWidth2(info);
  var pagesHtmlWidth = getElementWidth2(pages);
  return {
    parent: parentWidth,
    pageSizes: pageSizesWidth,
    info: infoWidth + getElementStyle2("marginLeft", info) + getElementStyle2("marginRight", info),
    pages: pagesHtmlWidth
  };
}
var ResizableContainerProps = {};
var getTemplate3 = (TemplateProp) => TemplateProp && (TemplateProp.defaultProps ? (props) => normalizeProps(createComponentVNode(2, TemplateProp, _extends({}, props))) : TemplateProp);
var ResizableContainer = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.parentRef = createRef();
    this.pageSizesRef = createRef();
    this.infoTextRef = createRef();
    this.pagesRef = createRef();
    this.actualIsLargeDisplayMode = true;
    this.actualInfoTextVisible = true;
    this.state = {
      infoTextVisible: true,
      isLargeDisplayMode: true
    };
    this.subscribeToResize = this.subscribeToResize.bind(this);
    this.effectUpdateChildProps = this.effectUpdateChildProps.bind(this);
    this.updateAdaptivityProps = this.updateAdaptivityProps.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.subscribeToResize, [this.state.infoTextVisible, this.state.isLargeDisplayMode]), new InfernoEffect(this.effectUpdateChildProps, [this.props, this.state.infoTextVisible, this.state.isLargeDisplayMode, this.props.pagerProps, this.props.contentTemplate])];
  }
  updateEffects() {
    var _this$_effects$, _this$_effects$2;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.state.infoTextVisible, this.state.isLargeDisplayMode]);
    null === (_this$_effects$2 = this._effects[1]) || void 0 === _this$_effects$2 ? void 0 : _this$_effects$2.update([this.props, this.state.infoTextVisible, this.state.isLargeDisplayMode, this.props.pagerProps, this.props.contentTemplate]);
  }
  subscribeToResize() {
    var callback = () => {
      this.parentWidth > 0 && this.updateAdaptivityProps();
    };
    resize_callbacks_default.add(callback);
    return () => {
      resize_callbacks_default.remove(callback);
    };
  }
  effectUpdateChildProps() {
    if (this.parentWidth > 0) {
      this.updateAdaptivityProps();
    }
  }
  get contentAttributes() {
    var {
      className,
      displayMode,
      gridCompatibility,
      hasKnownLastPage,
      infoText,
      label,
      lightModeEnabled,
      maxPagesCount,
      onKeyDown,
      pageCount,
      pageIndex,
      pageIndexChange,
      pageSize,
      pageSizeChange,
      pageSizes,
      pagesCountText,
      pagesNavigatorVisible,
      rtlEnabled,
      showInfo,
      showNavigationButtons,
      showPageSizes,
      totalCount,
      visible
    } = this.props.pagerProps;
    return _extends({}, this.restAttributes, {
      pageSize,
      pageIndex,
      pageIndexChange,
      pageSizeChange,
      gridCompatibility,
      className,
      showInfo,
      infoText,
      lightModeEnabled,
      displayMode,
      maxPagesCount,
      pageCount,
      pagesCountText,
      visible,
      hasKnownLastPage,
      pagesNavigatorVisible,
      showPageSizes,
      pageSizes,
      rtlEnabled,
      showNavigationButtons,
      totalCount,
      onKeyDown,
      label
    });
  }
  get parentWidth() {
    return this.parentRef.current ? getElementWidth2(this.parentRef.current) : 0;
  }
  updateAdaptivityProps() {
    var currentElementsWidth = getElementsWidth({
      parent: this.parentRef.current,
      pageSizes: this.pageSizesRef.current,
      info: this.infoTextRef.current,
      pages: this.pagesRef.current
    });
    if (this.actualInfoTextVisible !== this.state.infoTextVisible || this.actualIsLargeDisplayMode !== this.state.isLargeDisplayMode) {
      return;
    }
    var isEmpty3 = !isDefined(this.elementsWidth);
    if (isEmpty3) {
      this.elementsWidth = {};
    }
    if (isEmpty3 || this.state.isLargeDisplayMode) {
      this.elementsWidth.pageSizes = currentElementsWidth.pageSizes;
      this.elementsWidth.pages = currentElementsWidth.pages;
    }
    if (isEmpty3 || this.state.infoTextVisible) {
      this.elementsWidth.info = currentElementsWidth.info;
    }
    this.actualIsLargeDisplayMode = calculateLargeDisplayMode(_extends({
      parent: currentElementsWidth.parent
    }, {
      pageSizes: this.elementsWidth.pageSizes,
      pages: this.elementsWidth.pages
    }));
    this.actualInfoTextVisible = calculateInfoTextVisible(_extends({}, currentElementsWidth, {
      info: this.elementsWidth.info
    }));
    this.setState((__state_argument) => ({
      infoTextVisible: this.actualInfoTextVisible
    }));
    this.setState((__state_argument) => ({
      isLargeDisplayMode: this.actualIsLargeDisplayMode
    }));
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded12);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction11({
      props: _extends({}, props, {
        contentTemplate: getTemplate3(props.contentTemplate)
      }),
      infoTextVisible: this.state.infoTextVisible,
      isLargeDisplayMode: this.state.isLargeDisplayMode,
      parentRef: this.parentRef,
      pageSizesRef: this.pageSizesRef,
      infoTextRef: this.infoTextRef,
      pagesRef: this.pagesRef,
      contentAttributes: this.contentAttributes,
      parentWidth: this.parentWidth,
      updateAdaptivityProps: this.updateAdaptivityProps,
      restAttributes: this.restAttributes
    });
  }
};
ResizableContainer.defaultProps = ResizableContainerProps;

// node_modules/devextreme/esm/renovation/ui/pager/common/base_pager_props.js
var BasePagerProps = {
  gridCompatibility: true,
  showInfo: false,
  displayMode: "adaptive",
  maxPagesCount: 10,
  pageCount: 10,
  visible: true,
  hasKnownLastPage: true,
  pagesNavigatorVisible: "auto",
  showPageSizes: true,
  pageSizes: Object.freeze([5, 10]),
  showNavigationButtons: false,
  totalCount: 0,
  get label() {
    return message_default.format("dxPager-ariaLabel");
  }
};

// node_modules/devextreme/esm/renovation/ui/pager/common/pager_props.js
var PagerProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BasePagerProps), Object.getOwnPropertyDescriptors({
  defaultPageSize: 5,
  pageSizeChange: () => {
  },
  defaultPageIndex: 1,
  pageIndexChange: () => {
  }
})));
var InternalPagerProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(BasePagerProps), Object.getOwnPropertyDescriptors({
  pageSize: 5,
  pageIndex: 1
})));

// node_modules/devextreme/esm/renovation/ui/pager/info.js
var _excluded13 = ["infoText", "pageCount", "pageIndex", "rootElementRef", "totalCount"];
var PAGER_INFO_CLASS = "dx-info";
var viewFunction12 = (_ref) => {
  var {
    props: {
      rootElementRef
    },
    text
  } = _ref;
  return createVNode(1, "div", PAGER_INFO_CLASS, text, 0, null, null, rootElementRef);
};
var InfoTextPropsType = {
  get pageIndex() {
    return InternalPagerProps.pageIndex;
  },
  get pageCount() {
    return InternalPagerProps.pageCount;
  },
  get totalCount() {
    return InternalPagerProps.totalCount;
  }
};
var InfoText = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
  }
  get infoText() {
    var _this$props$infoText;
    return (null !== (_this$props$infoText = this.props.infoText) && void 0 !== _this$props$infoText ? _this$props$infoText : "") || message_default.getFormatter("dxPager-infoText")();
  }
  get text() {
    var {
      pageCount,
      pageIndex,
      totalCount
    } = this.props;
    return format(this.infoText, (pageIndex + 1).toString(), pageCount.toString(), totalCount.toString());
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded13);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction12({
      props: _extends({}, props),
      infoText: this.infoText,
      text: this.text,
      restAttributes: this.restAttributes
    });
  }
};
InfoText.defaultProps = InfoTextPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/common/keyboard_action_context.js
var KeyboardActionContext = createContext(void 0);

// node_modules/devextreme/esm/renovation/ui/pager/common/light_button.js
var _excluded14 = ["children", "className", "label", "onClick", "selected", "tabIndex"];
var viewFunction13 = (_ref) => {
  var {
    props: {
      children,
      className,
      label,
      selected,
      tabIndex
    },
    widgetRef
  } = _ref;
  return createVNode(1, "div", className, children, 0, {
    tabIndex,
    role: "button",
    "aria-label": label,
    "aria-current": selected ? "page" : void 0
  }, null, widgetRef);
};
var LightButtonProps = {
  className: "",
  label: "",
  tabIndex: 0,
  selected: false
};
var LightButton = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.widgetRef = createRef();
    this.keyboardEffect = this.keyboardEffect.bind(this);
    this.subscribeToClick = this.subscribeToClick.bind(this);
  }
  get keyboardContext() {
    if (this.context[KeyboardActionContext.id]) {
      return this.context[KeyboardActionContext.id];
    }
    return KeyboardActionContext.defaultValue;
  }
  createEffects() {
    return [new InfernoEffect(this.keyboardEffect, [this.keyboardContext, this.props.onClick]), new InfernoEffect(this.subscribeToClick, [this.props.onClick])];
  }
  updateEffects() {
    var _this$_effects$, _this$_effects$2;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.keyboardContext, this.props.onClick]);
    null === (_this$_effects$2 = this._effects[1]) || void 0 === _this$_effects$2 ? void 0 : _this$_effects$2.update([this.props.onClick]);
  }
  keyboardEffect() {
    return this.keyboardContext.registerKeyboardAction(this.widgetRef.current, this.props.onClick);
  }
  subscribeToClick() {
    return subscribeToClickEvent(this.widgetRef.current, this.props.onClick);
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded14);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction13({
      props: _extends({}, props),
      widgetRef: this.widgetRef,
      keyboardContext: this.keyboardContext,
      restAttributes: this.restAttributes
    });
  }
};
LightButton.defaultProps = LightButtonProps;

// node_modules/devextreme/esm/renovation/ui/pager/common/consts.js
var PAGER_CLASS = "dx-pager";
var LIGHT_MODE_CLASS = "dx-light-mode";
var PAGER_PAGES_CLASS = "dx-pages";
var PAGER_PAGE_INDEXES_CLASS = "dx-page-indexes";
var PAGER_PAGE_CLASS = "dx-page";
var PAGER_SELECTION_CLASS = "dx-selection";
var PAGER_PAGE_SIZE_CLASS = "dx-page-size";
var PAGER_PAGE_SIZES_CLASS = "dx-page-sizes";
var PAGER_SELECTED_PAGE_SIZE_CLASS = "".concat(PAGER_PAGE_SIZE_CLASS, " ").concat(PAGER_SELECTION_CLASS);
var FIRST_CHILD_CLASS = "dx-first-child";

// node_modules/devextreme/esm/renovation/ui/pager/pages/page.js
var _excluded15 = ["className", "index", "onClick", "selected"];
var viewFunction14 = (_ref) => {
  var {
    className,
    label,
    props: {
      onClick,
      selected
    },
    value: value2
  } = _ref;
  return createComponentVNode(2, LightButton, {
    className,
    label,
    onClick,
    selected,
    children: value2
  });
};
var PageProps = {
  index: 0,
  selected: false,
  className: PAGER_PAGE_CLASS
};
var Page = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
  }
  get label() {
    return format(message_default.getFormatter("dxPager-page"), this.value);
  }
  get value() {
    return this.props.index + 1;
  }
  get className() {
    var {
      selected
    } = this.props;
    return combineClasses({
      ["".concat(this.props.className)]: !!this.props.className,
      [PAGER_SELECTION_CLASS]: !!selected
    });
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded15);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction14({
      props: _extends({}, props),
      label: this.label,
      value: this.value,
      className: this.className,
      restAttributes: this.restAttributes
    });
  }
};
Page.defaultProps = PageProps;

// node_modules/devextreme/esm/renovation/ui/pager/pages/large.js
var _excluded16 = ["pageIndexes"];
var _excluded23 = ["maxPagesCount", "pageCount", "pageIndex", "pageIndexChange"];
var PAGER_PAGE_SEPARATOR_CLASS = "dx-separator";
var viewFunction15 = (_ref) => {
  var {
    pages
  } = _ref;
  var PagesMarkup = pages.map((_ref2) => {
    var {
      key,
      pageProps
    } = _ref2;
    return pageProps ? createComponentVNode(2, Page, {
      index: pageProps.index,
      selected: pageProps.selected,
      onClick: pageProps.onClick
    }, key) : createVNode(1, "div", PAGER_PAGE_SEPARATOR_CLASS, ". . .", 16, null, key);
  });
  return createFragment(PagesMarkup, 0);
};
var PAGES_LIMITER = 4;
function getDelimiterType(startIndex, slidingWindowSize, pageCount) {
  if (1 === startIndex) {
    return "high";
  }
  if (startIndex + slidingWindowSize === pageCount - 1) {
    return "low";
  }
  return "both";
}
function createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes, pageCount, delimiter) {
  var pageIndexes = [];
  var indexesForReuse = [];
  switch (delimiter) {
    case "none":
      pageIndexes = [...slidingWindowIndexes];
      break;
    case "both":
      pageIndexes = [0, "low", ...slidingWindowIndexes, "high", pageCount - 1];
      indexesForReuse = slidingWindowIndexes.slice(1, -1);
      break;
    case "high":
      pageIndexes = [0, ...slidingWindowIndexes, "high", pageCount - 1];
      indexesForReuse = slidingWindowIndexes.slice(0, -1);
      break;
    case "low":
      pageIndexes = [0, "low", ...slidingWindowIndexes, pageCount - 1];
      indexesForReuse = slidingWindowIndexes.slice(1);
  }
  return {
    slidingWindowIndexes,
    indexesForReuse,
    pageIndexes
  };
}
function createPageIndexes(startIndex, slidingWindowSize, pageCount, delimiter) {
  var slidingWindowIndexes = [];
  for (var i = 0; i < slidingWindowSize; i += 1) {
    slidingWindowIndexes.push(i + startIndex);
  }
  return createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes, pageCount, delimiter);
}
var PagesLargePropsType = {
  get pageIndex() {
    return InternalPagerProps.pageIndex;
  },
  get maxPagesCount() {
    return InternalPagerProps.maxPagesCount;
  },
  get pageCount() {
    return InternalPagerProps.pageCount;
  }
};
var PagesLarge = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.canReuseSlidingWindow = this.canReuseSlidingWindow.bind(this);
    this.generatePageIndexes = this.generatePageIndexes.bind(this);
    this.isSlidingWindowMode = this.isSlidingWindowMode.bind(this);
    this.onPageClick = this.onPageClick.bind(this);
  }
  get config() {
    if (this.context[ConfigContext.id]) {
      return this.context[ConfigContext.id];
    }
    return ConfigContext.defaultValue;
  }
  get slidingWindowState() {
    var slidingWindowState = this.slidingWindowStateHolder;
    if (!slidingWindowState) {
      return {
        indexesForReuse: [],
        slidingWindowIndexes: []
      };
    }
    return slidingWindowState;
  }
  canReuseSlidingWindow(currentPageCount, pageIndex) {
    var {
      indexesForReuse
    } = this.slidingWindowState;
    var lastPageIsFartherThanWindow = indexesForReuse.slice(-1)[0] < currentPageCount - 1;
    var pageIndexExistInIndexes = indexesForReuse.includes(pageIndex);
    return lastPageIsFartherThanWindow && pageIndexExistInIndexes;
  }
  generatePageIndexes() {
    var {
      pageCount,
      pageIndex
    } = this.props;
    var startIndex = 0;
    var {
      slidingWindowIndexes
    } = this.slidingWindowState;
    if (pageIndex === slidingWindowIndexes[0]) {
      startIndex = pageIndex - 1;
    } else if (pageIndex === slidingWindowIndexes[slidingWindowIndexes.length - 1]) {
      startIndex = pageIndex + 2 - PAGES_LIMITER;
    } else if (pageIndex < PAGES_LIMITER) {
      startIndex = 1;
    } else if (pageIndex >= pageCount - PAGES_LIMITER) {
      startIndex = pageCount - PAGES_LIMITER - 1;
    } else {
      startIndex = pageIndex - 1;
    }
    var slidingWindowSize = PAGES_LIMITER;
    var delimiter = getDelimiterType(startIndex, slidingWindowSize, pageCount);
    var _createPageIndexes = createPageIndexes(startIndex, slidingWindowSize, pageCount, delimiter), {
      pageIndexes
    } = _createPageIndexes, slidingWindowState = _objectWithoutPropertiesLoose(_createPageIndexes, _excluded16);
    this.slidingWindowStateHolder = slidingWindowState;
    return pageIndexes;
  }
  isSlidingWindowMode() {
    var {
      maxPagesCount,
      pageCount
    } = this.props;
    return pageCount <= PAGES_LIMITER || pageCount <= maxPagesCount;
  }
  onPageClick(pageIndex) {
    this.props.pageIndexChange(pageIndex);
  }
  get pageIndexes() {
    var {
      pageCount
    } = this.props;
    if (this.isSlidingWindowMode()) {
      return createPageIndexes(0, pageCount, pageCount, "none").pageIndexes;
    }
    if (this.canReuseSlidingWindow(pageCount, this.props.pageIndex)) {
      var {
        slidingWindowIndexes
      } = this.slidingWindowState;
      var delimiter = getDelimiterType(slidingWindowIndexes[0], PAGES_LIMITER, pageCount);
      return createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes, pageCount, delimiter).pageIndexes;
    }
    return this.generatePageIndexes();
  }
  get pages() {
    var _this$config;
    var {
      pageIndex
    } = this.props;
    var createPage = (index) => {
      var pagerProps = "low" === index || "high" === index ? null : {
        index,
        onClick: () => this.onPageClick(index),
        selected: pageIndex === index
      };
      return {
        key: index.toString(),
        pageProps: pagerProps
      };
    };
    var rtlPageIndexes = null !== (_this$config = this.config) && void 0 !== _this$config && _this$config.rtlEnabled ? [...this.pageIndexes].reverse() : this.pageIndexes;
    return rtlPageIndexes.map((index) => createPage(index));
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded23);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction15({
      props: _extends({}, props),
      config: this.config,
      pageIndexes: this.pageIndexes,
      pages: this.pages,
      restAttributes: this.restAttributes
    });
  }
};
PagesLarge.defaultProps = PagesLargePropsType;

// node_modules/devextreme/esm/renovation/ui/editors/common/editor_state_props.js
var EditorStateProps = {
  hoverStateEnabled: true,
  activeStateEnabled: true,
  get focusStateEnabled() {
    return "desktop" === devices_default.real().deviceType && !devices_default.isSimulator();
  }
};

// node_modules/devextreme/esm/renovation/ui/editors/common/editor_label_props.js
var EditorLabelProps = {
  label: "",
  get labelMode() {
    return isMaterial(current()) ? "floating" : "static";
  }
};

// node_modules/devextreme/esm/renovation/ui/editors/number_box.js
var _excluded17 = ["accessKey", "activeStateEnabled", "className", "defaultValue", "disabled", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "inputAttr", "invalidValueMessage", "isDirty", "isValid", "label", "labelMode", "max", "min", "mode", "name", "onClick", "onFocusIn", "onKeyDown", "readOnly", "rtlEnabled", "showSpinButtons", "step", "tabIndex", "useLargeSpinButtons", "validationError", "validationErrors", "validationMessageMode", "validationMessagePosition", "validationStatus", "value", "valueChange", "visible", "width"];
var DEFAULT_VALUE = 0;
var viewFunction16 = (_ref) => {
  var {
    componentProps,
    restAttributes
  } = _ref;
  return normalizeProps(createComponentVNode(2, DomComponentWrapper, _extends({
    componentType: number_box_default,
    componentProps,
    templateNames: []
  }, restAttributes)));
};
var NumberBoxProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(EditorProps), Object.getOwnPropertyDescriptors({
  defaultValue: DEFAULT_VALUE,
  isReactComponentWrapper: true
})));
var NumberBoxPropsType = {
  get defaultValue() {
    return NumberBoxProps.defaultValue;
  },
  get readOnly() {
    return NumberBoxProps.readOnly;
  },
  get name() {
    return NumberBoxProps.name;
  },
  get validationError() {
    return NumberBoxProps.validationError;
  },
  get validationErrors() {
    return NumberBoxProps.validationErrors;
  },
  get validationMessageMode() {
    return NumberBoxProps.validationMessageMode;
  },
  get validationMessagePosition() {
    return NumberBoxProps.validationMessagePosition;
  },
  get validationStatus() {
    return NumberBoxProps.validationStatus;
  },
  get isValid() {
    return NumberBoxProps.isValid;
  },
  get isDirty() {
    return NumberBoxProps.isDirty;
  },
  get inputAttr() {
    return NumberBoxProps.inputAttr;
  },
  get className() {
    return NumberBoxProps.className;
  },
  get activeStateEnabled() {
    return EditorStateProps.activeStateEnabled;
  },
  get disabled() {
    return NumberBoxProps.disabled;
  },
  get focusStateEnabled() {
    return EditorStateProps.focusStateEnabled;
  },
  get hoverStateEnabled() {
    return EditorStateProps.hoverStateEnabled;
  },
  get tabIndex() {
    return NumberBoxProps.tabIndex;
  },
  get visible() {
    return NumberBoxProps.visible;
  },
  get label() {
    return EditorLabelProps.label;
  },
  get labelMode() {
    return EditorLabelProps.labelMode;
  },
  isReactComponentWrapper: true
};
var NumberBox = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {
      value: void 0 !== this.props.value ? this.props.value : this.props.defaultValue
    };
  }
  get componentProps() {
    return _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    });
  }
  get restAttributes() {
    var _this$props$value = _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    }), restProps = _objectWithoutPropertiesLoose(_this$props$value, _excluded17);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction16({
      props: _extends({}, props, {
        value: void 0 !== this.props.value ? this.props.value : this.state.value
      }),
      componentProps: this.componentProps,
      restAttributes: this.restAttributes
    });
  }
};
NumberBox.defaultProps = NumberBoxPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/utils/calculate_values_fitted_width.js
var oneDigitWidth = 10;
function calculateValuesFittedWidth(minWidth, values) {
  return minWidth + oneDigitWidth * Math.max(...values).toString().length;
}

// node_modules/devextreme/esm/renovation/ui/pager/pages/small.js
var _excluded18 = ["inputAttr", "pageCount", "pageIndex", "pageIndexChange", "pagesCountText"];
var PAGER_INFO_TEXT_CLASS = "".concat(PAGER_INFO_CLASS, "  dx-info-text");
var PAGER_PAGE_INDEX_CLASS = "dx-page-index";
var LIGHT_PAGES_CLASS = "dx-light-pages";
var PAGER_PAGES_COUNT_CLASS = "dx-pages-count";
var viewFunction17 = (_ref) => {
  var {
    pageIndexRef,
    pagesCountText,
    props: {
      inputAttr,
      pageCount
    },
    selectLastPageIndex,
    value: value2,
    valueChange,
    width
  } = _ref;
  return createVNode(1, "div", LIGHT_PAGES_CLASS, [createComponentVNode(2, NumberBox, {
    className: PAGER_PAGE_INDEX_CLASS,
    min: 1,
    max: Math.max(pageCount, value2),
    width,
    value: value2,
    valueChange,
    inputAttr
  }), createVNode(1, "span", PAGER_INFO_TEXT_CLASS, pagesCountText, 0), createComponentVNode(2, Page, {
    className: PAGER_PAGES_COUNT_CLASS,
    selected: false,
    index: pageCount - 1,
    onClick: selectLastPageIndex
  })], 4, null, null, pageIndexRef);
};
var PagerSmallProps = {
  inputAttr: Object.freeze({
    "aria-label": message_default.format("dxPager-ariaPageNumber")
  })
};
var PagerSmallPropsType = {
  get pageIndex() {
    return InternalPagerProps.pageIndex;
  },
  get pageCount() {
    return InternalPagerProps.pageCount;
  },
  get inputAttr() {
    return PagerSmallProps.inputAttr;
  }
};
var PagesSmall = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.pageIndexRef = createRef();
    this.state = {
      minWidth: 10
    };
    this.updateWidth = this.updateWidth.bind(this);
    this.selectLastPageIndex = this.selectLastPageIndex.bind(this);
    this.valueChange = this.valueChange.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.updateWidth, [this.state.minWidth])];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.state.minWidth]);
  }
  updateWidth() {
    var _this$pageIndexRef$cu;
    var el = null === (_this$pageIndexRef$cu = this.pageIndexRef.current) || void 0 === _this$pageIndexRef$cu ? void 0 : _this$pageIndexRef$cu.querySelector(".".concat(PAGER_PAGE_INDEX_CLASS));
    this.setState((__state_argument) => ({
      minWidth: el && getElementMinWidth(el) || __state_argument.minWidth
    }));
  }
  get value() {
    return this.props.pageIndex + 1;
  }
  get width() {
    var {
      pageCount
    } = this.props;
    return calculateValuesFittedWidth(this.state.minWidth, [pageCount]);
  }
  get pagesCountText() {
    var _this$props$pagesCoun;
    return (null !== (_this$props$pagesCoun = this.props.pagesCountText) && void 0 !== _this$props$pagesCoun ? _this$props$pagesCoun : "") || message_default.getFormatter("dxPager-pagesCountText")();
  }
  selectLastPageIndex() {
    this.props.pageIndexChange(this.props.pageCount - 1);
  }
  valueChange(value2) {
    this.props.pageIndexChange(value2 - 1);
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded18);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction17({
      props: _extends({}, props),
      pageIndexRef: this.pageIndexRef,
      value: this.value,
      width: this.width,
      pagesCountText: this.pagesCountText,
      selectLastPageIndex: this.selectLastPageIndex,
      valueChange: this.valueChange,
      restAttributes: this.restAttributes
    });
  }
};
PagesSmall.defaultProps = PagerSmallPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/pages/page_index_selector.js
var _excluded19 = ["hasKnownLastPage", "isLargeDisplayMode", "maxPagesCount", "pageCount", "pageIndex", "pageIndexChange", "pagesCountText", "showNavigationButtons", "totalCount"];
var PAGER_NAVIGATE_BUTTON = "dx-navigate-button";
var PAGER_PREV_BUTTON_CLASS = "dx-prev-button";
var PAGER_NEXT_BUTTON_CLASS = "dx-next-button";
var PAGER_BUTTON_DISABLE_CLASS = "dx-button-disable";
var getNextButtonLabel = () => message_default.getFormatter("dxPager-nextPage")();
var getPrevButtonLabel = () => message_default.getFormatter("dxPager-prevPage")();
var classNames = {
  nextEnabledClass: "".concat(PAGER_NAVIGATE_BUTTON, " ").concat(PAGER_NEXT_BUTTON_CLASS),
  prevEnabledClass: "".concat(PAGER_NAVIGATE_BUTTON, " ").concat(PAGER_PREV_BUTTON_CLASS),
  nextDisabledClass: "".concat(PAGER_BUTTON_DISABLE_CLASS, " ").concat(PAGER_NAVIGATE_BUTTON, " ").concat(PAGER_NEXT_BUTTON_CLASS),
  prevDisabledClass: "".concat(PAGER_BUTTON_DISABLE_CLASS, " ").concat(PAGER_NAVIGATE_BUTTON, " ").concat(PAGER_PREV_BUTTON_CLASS)
};
var reverseDirections = {
  next: "prev",
  prev: "next"
};
var viewFunction18 = (_ref) => {
  var {
    nextButtonProps,
    pageIndexChange,
    prevButtonProps,
    props: {
      isLargeDisplayMode,
      maxPagesCount,
      pageCount,
      pageIndex,
      pagesCountText
    },
    renderNextButton,
    renderPrevButton
  } = _ref;
  return createFragment([renderPrevButton && createComponentVNode(2, LightButton, {
    label: getPrevButtonLabel(),
    className: prevButtonProps.className,
    tabIndex: prevButtonProps.tabIndex,
    onClick: prevButtonProps.navigate
  }), isLargeDisplayMode && createComponentVNode(2, PagesLarge, {
    maxPagesCount,
    pageCount,
    pageIndex,
    pageIndexChange
  }), !isLargeDisplayMode && createComponentVNode(2, PagesSmall, {
    pageCount,
    pageIndex,
    pageIndexChange,
    pagesCountText
  }), renderNextButton && createComponentVNode(2, LightButton, {
    label: getNextButtonLabel(),
    className: nextButtonProps.className,
    tabIndex: nextButtonProps.tabIndex,
    onClick: nextButtonProps.navigate
  })], 0);
};
function getIncrement(direction) {
  return "next" === direction ? 1 : -1;
}
var PageIndexSelectorProps = {
  isLargeDisplayMode: true
};
var PageIndexSelectorPropsType = {
  get pageIndex() {
    return InternalPagerProps.pageIndex;
  },
  get maxPagesCount() {
    return InternalPagerProps.maxPagesCount;
  },
  get pageCount() {
    return InternalPagerProps.pageCount;
  },
  get hasKnownLastPage() {
    return InternalPagerProps.hasKnownLastPage;
  },
  get showNavigationButtons() {
    return InternalPagerProps.showNavigationButtons;
  },
  get totalCount() {
    return InternalPagerProps.totalCount;
  },
  get isLargeDisplayMode() {
    return PageIndexSelectorProps.isLargeDisplayMode;
  }
};
var PageIndexSelector = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.__getterCache = {};
    this.pageIndexChange = this.pageIndexChange.bind(this);
    this.getButtonProps = this.getButtonProps.bind(this);
    this.canNavigateToPage = this.canNavigateToPage.bind(this);
    this.getNextPageIndex = this.getNextPageIndex.bind(this);
    this.canNavigateTo = this.canNavigateTo.bind(this);
    this.navigateToPage = this.navigateToPage.bind(this);
  }
  get config() {
    if (this.context[ConfigContext.id]) {
      return this.context[ConfigContext.id];
    }
    return ConfigContext.defaultValue;
  }
  pageIndexChange(pageIndex) {
    if (this.canNavigateToPage(pageIndex)) {
      this.props.pageIndexChange(pageIndex);
    }
  }
  getButtonProps(direction) {
    var _this$config;
    var rtlAwareDirection = null !== (_this$config = this.config) && void 0 !== _this$config && _this$config.rtlEnabled ? reverseDirections[direction] : direction;
    var canNavigate = this.canNavigateTo(rtlAwareDirection);
    var className = classNames["".concat(direction).concat(canNavigate ? "Enabled" : "Disabled", "Class")];
    return {
      className,
      tabIndex: canNavigate ? 0 : -1,
      navigate: () => this.navigateToPage(rtlAwareDirection)
    };
  }
  canNavigateToPage(pageIndex) {
    if (!this.props.hasKnownLastPage) {
      return pageIndex >= 0;
    }
    return pageIndex >= 0 && pageIndex <= this.props.pageCount - 1;
  }
  getNextPageIndex(direction) {
    return this.props.pageIndex + getIncrement(direction);
  }
  canNavigateTo(direction) {
    return this.canNavigateToPage(this.getNextPageIndex(direction));
  }
  navigateToPage(direction) {
    this.pageIndexChange(this.getNextPageIndex(direction));
  }
  get renderPrevButton() {
    var {
      isLargeDisplayMode,
      showNavigationButtons
    } = this.props;
    return !isLargeDisplayMode || showNavigationButtons;
  }
  get renderNextButton() {
    return this.renderPrevButton || !this.props.hasKnownLastPage;
  }
  get prevButtonProps() {
    if (void 0 !== this.__getterCache.prevButtonProps) {
      return this.__getterCache.prevButtonProps;
    }
    return this.__getterCache.prevButtonProps = (() => this.getButtonProps("prev"))();
  }
  get nextButtonProps() {
    if (void 0 !== this.__getterCache.nextButtonProps) {
      return this.__getterCache.nextButtonProps;
    }
    return this.__getterCache.nextButtonProps = (() => this.getButtonProps("next"))();
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded19);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    if (this.context[ConfigContext.id] !== context[ConfigContext.id] || this.props.hasKnownLastPage !== nextProps.hasKnownLastPage || this.props.pageCount !== nextProps.pageCount || this.props.pageIndex !== nextProps.pageIndex || this.props.pageIndexChange !== nextProps.pageIndexChange) {
      this.__getterCache.prevButtonProps = void 0;
    }
    if (this.context[ConfigContext.id] !== context[ConfigContext.id] || this.props.hasKnownLastPage !== nextProps.hasKnownLastPage || this.props.pageCount !== nextProps.pageCount || this.props.pageIndex !== nextProps.pageIndex || this.props.pageIndexChange !== nextProps.pageIndexChange) {
      this.__getterCache.nextButtonProps = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction18({
      props: _extends({}, props),
      config: this.config,
      pageIndexChange: this.pageIndexChange,
      renderPrevButton: this.renderPrevButton,
      renderNextButton: this.renderNextButton,
      prevButtonProps: this.prevButtonProps,
      nextButtonProps: this.nextButtonProps,
      restAttributes: this.restAttributes
    });
  }
};
PageIndexSelector.defaultProps = PageIndexSelectorPropsType;

// node_modules/devextreme/esm/renovation/ui/editors/drop_down_editors/select_box.js
var _excluded20 = ["accessKey", "activeStateEnabled", "className", "dataSource", "defaultValue", "disabled", "displayExpr", "focusStateEnabled", "height", "hint", "hoverStateEnabled", "inputAttr", "isDirty", "isValid", "label", "labelMode", "name", "onClick", "onFocusIn", "onKeyDown", "placeholder", "readOnly", "rtlEnabled", "searchEnabled", "tabIndex", "validationError", "validationErrors", "validationMessageMode", "validationMessagePosition", "validationStatus", "value", "valueChange", "valueExpr", "visible", "width"];
var viewFunction19 = (_ref) => {
  var {
    componentProps,
    restAttributes
  } = _ref;
  return normalizeProps(createComponentVNode(2, DomComponentWrapper, _extends({
    componentType: select_box_default,
    componentProps,
    templateNames: ["dropDownButtonTemplate", "groupTemplate", "itemTemplate"]
  }, restAttributes)));
};
var SelectBoxProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(EditorProps), Object.getOwnPropertyDescriptors({
  placeholder: "",
  hoverStateEnabled: true,
  searchEnabled: false,
  defaultValue: null,
  isReactComponentWrapper: true
})));
var SelectBoxPropsType = {
  get placeholder() {
    return SelectBoxProps.placeholder;
  },
  get hoverStateEnabled() {
    return EditorStateProps.hoverStateEnabled;
  },
  get searchEnabled() {
    return SelectBoxProps.searchEnabled;
  },
  get defaultValue() {
    return SelectBoxProps.defaultValue;
  },
  get readOnly() {
    return SelectBoxProps.readOnly;
  },
  get name() {
    return SelectBoxProps.name;
  },
  get validationError() {
    return SelectBoxProps.validationError;
  },
  get validationErrors() {
    return SelectBoxProps.validationErrors;
  },
  get validationMessageMode() {
    return SelectBoxProps.validationMessageMode;
  },
  get validationMessagePosition() {
    return SelectBoxProps.validationMessagePosition;
  },
  get validationStatus() {
    return SelectBoxProps.validationStatus;
  },
  get isValid() {
    return SelectBoxProps.isValid;
  },
  get isDirty() {
    return SelectBoxProps.isDirty;
  },
  get inputAttr() {
    return SelectBoxProps.inputAttr;
  },
  get className() {
    return SelectBoxProps.className;
  },
  get activeStateEnabled() {
    return EditorStateProps.activeStateEnabled;
  },
  get disabled() {
    return SelectBoxProps.disabled;
  },
  get focusStateEnabled() {
    return EditorStateProps.focusStateEnabled;
  },
  get tabIndex() {
    return SelectBoxProps.tabIndex;
  },
  get visible() {
    return SelectBoxProps.visible;
  },
  get label() {
    return EditorLabelProps.label;
  },
  get labelMode() {
    return EditorLabelProps.labelMode;
  },
  isReactComponentWrapper: true
};
var SelectBox2 = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {
      value: void 0 !== this.props.value ? this.props.value : this.props.defaultValue
    };
  }
  get componentProps() {
    return _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    });
  }
  get restAttributes() {
    var _this$props$value = _extends({}, this.props, {
      value: void 0 !== this.props.value ? this.props.value : this.state.value
    }), restProps = _objectWithoutPropertiesLoose(_this$props$value, _excluded20);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction19({
      props: _extends({}, props, {
        value: void 0 !== this.props.value ? this.props.value : this.state.value
      }),
      componentProps: this.componentProps,
      restAttributes: this.restAttributes
    });
  }
};
SelectBox2.defaultProps = SelectBoxPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/page_size/small.js
var _excluded21 = ["inputAttr", "pageSize", "pageSizeChange", "pageSizes", "parentRef"];
var viewFunction20 = (_ref) => {
  var {
    props: {
      inputAttr,
      pageSize,
      pageSizeChange,
      pageSizes
    },
    width
  } = _ref;
  return createComponentVNode(2, SelectBox2, {
    displayExpr: "text",
    valueExpr: "value",
    dataSource: pageSizes,
    value: pageSize,
    valueChange: pageSizeChange,
    width,
    inputAttr
  });
};
var PageSizeSmallProps = {
  inputAttr: Object.freeze({
    "aria-label": message_default.format("dxPager-ariaPageSize")
  })
};
var PageSizeSmallPropsType = {
  get pageSize() {
    return InternalPagerProps.pageSize;
  },
  get inputAttr() {
    return PageSizeSmallProps.inputAttr;
  }
};
var PageSizeSmall = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {
      minWidth: 10
    };
    this.updateWidth = this.updateWidth.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.updateWidth, [this.props, this.state.minWidth, this.props.pageSize, this.props.pageSizeChange, this.props.pageSizes, this.props.inputAttr])];
  }
  updateEffects() {
    var _this$_effects$;
    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props, this.state.minWidth, this.props.pageSize, this.props.pageSizeChange, this.props.pageSizes, this.props.inputAttr]);
  }
  updateWidth() {
    this.setState((__state_argument) => ({
      minWidth: getElementMinWidth(this.props.parentRef.current) || __state_argument.minWidth
    }));
  }
  get width() {
    return calculateValuesFittedWidth(this.state.minWidth, this.props.pageSizes.map((p2) => p2.value));
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded21);
    return restProps;
  }
  render() {
    var props = this.props;
    return viewFunction20({
      props: _extends({}, props),
      width: this.width,
      restAttributes: this.restAttributes
    });
  }
};
PageSizeSmall.defaultProps = PageSizeSmallPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/page_size/large.js
var _excluded24 = ["pageSize", "pageSizeChange", "pageSizes"];
var viewFunction21 = (_ref) => {
  var {
    pageSizesText
  } = _ref;
  return createFragment(pageSizesText.map((_ref2) => {
    var {
      className,
      click: click2,
      label,
      text
    } = _ref2;
    return createComponentVNode(2, LightButton, {
      className,
      label,
      onClick: click2,
      children: text
    }, text);
  }), 0);
};
var PageSizeLargePropsType = {
  get pageSize() {
    return InternalPagerProps.pageSize;
  }
};
var PageSizeLarge = class extends BaseInfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.__getterCache = {};
    this.onPageSizeChange = this.onPageSizeChange.bind(this);
  }
  get pageSizesText() {
    if (void 0 !== this.__getterCache.pageSizesText) {
      return this.__getterCache.pageSizesText;
    }
    return this.__getterCache.pageSizesText = (() => {
      var {
        pageSize,
        pageSizes
      } = this.props;
      return pageSizes.map((_ref3, index) => {
        var {
          text,
          value: processedPageSize
        } = _ref3;
        var selected = processedPageSize === pageSize;
        var className = combineClasses({
          [selected ? PAGER_SELECTED_PAGE_SIZE_CLASS : PAGER_PAGE_SIZE_CLASS]: true,
          [FIRST_CHILD_CLASS]: 0 === index
        });
        return {
          className,
          click: this.onPageSizeChange(processedPageSize),
          label: format(message_default.getFormatter("dxPager-pageSize"), processedPageSize || message_default.getFormatter("dxPager-pageSizesAllText")),
          text
        };
      });
    })();
  }
  onPageSizeChange(processedPageSize) {
    return () => {
      this.props.pageSizeChange(processedPageSize);
      return this.props.pageSize;
    };
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded24);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    if (this.props.pageSize !== nextProps.pageSize || this.props.pageSizes !== nextProps.pageSizes || this.props.pageSizeChange !== nextProps.pageSizeChange) {
      this.__getterCache.pageSizesText = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction21({
      props: _extends({}, props),
      pageSizesText: this.pageSizesText,
      restAttributes: this.restAttributes
    });
  }
};
PageSizeLarge.defaultProps = PageSizeLargePropsType;

// node_modules/devextreme/esm/renovation/ui/pager/page_size/selector.js
var _excluded25 = ["isLargeDisplayMode", "pageSize", "pageSizeChange", "pageSizes", "rootElementRef"];
var viewFunction22 = (_ref) => {
  var {
    htmlRef,
    normalizedPageSizes,
    props: {
      isLargeDisplayMode,
      pageSize,
      pageSizeChange
    }
  } = _ref;
  return createVNode(1, "div", PAGER_PAGE_SIZES_CLASS, [isLargeDisplayMode && createComponentVNode(2, PageSizeLarge, {
    pageSizes: normalizedPageSizes,
    pageSize,
    pageSizeChange
  }), !isLargeDisplayMode && createComponentVNode(2, PageSizeSmall, {
    parentRef: htmlRef,
    pageSizes: normalizedPageSizes,
    pageSize,
    pageSizeChange
  })], 0, null, null, htmlRef);
};
function getAllText() {
  return message_default.getFormatter("dxPager-pageSizesAllText")();
}
var PageSizeSelectorProps = {
  isLargeDisplayMode: true
};
var PageSizeSelectorPropsType = {
  get pageSize() {
    return InternalPagerProps.pageSize;
  },
  get pageSizes() {
    return InternalPagerProps.pageSizes;
  },
  get isLargeDisplayMode() {
    return PageSizeSelectorProps.isLargeDisplayMode;
  }
};
var PageSizeSelector = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.htmlRef = createRef();
    this.__getterCache = {};
    this.setRootElementRef = this.setRootElementRef.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.setRootElementRef, [])];
  }
  setRootElementRef() {
    var {
      rootElementRef
    } = this.props;
    if (rootElementRef) {
      rootElementRef.current = this.htmlRef.current;
    }
  }
  get normalizedPageSizes() {
    if (void 0 !== this.__getterCache.normalizedPageSizes) {
      return this.__getterCache.normalizedPageSizes;
    }
    return this.__getterCache.normalizedPageSizes = (() => {
      var {
        pageSizes
      } = this.props;
      return pageSizes.map((p2) => "all" === p2 || 0 === p2 ? {
        text: getAllText(),
        value: 0
      } : {
        text: String(p2),
        value: p2
      });
    })();
  }
  get restAttributes() {
    var _this$props = this.props, restProps = _objectWithoutPropertiesLoose(_this$props, _excluded25);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props.pageSizes !== nextProps.pageSizes) {
      this.__getterCache.normalizedPageSizes = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction22({
      props: _extends({}, props),
      htmlRef: this.htmlRef,
      normalizedPageSizes: this.normalizedPageSizes,
      restAttributes: this.restAttributes
    });
  }
};
PageSizeSelector.defaultProps = PageSizeSelectorPropsType;

// node_modules/devextreme/esm/renovation/ui/pager/content.js
var _excluded26 = ["className", "displayMode", "gridCompatibility", "hasKnownLastPage", "infoText", "infoTextRef", "infoTextVisible", "isLargeDisplayMode", "label", "lightModeEnabled", "maxPagesCount", "onKeyDown", "pageCount", "pageIndex", "pageIndexChange", "pageSize", "pageSizeChange", "pageSizes", "pageSizesRef", "pagesCountText", "pagesNavigatorVisible", "pagesRef", "rootElementRef", "rtlEnabled", "showInfo", "showNavigationButtons", "showPageSizes", "totalCount", "visible"];
var viewFunction23 = (_ref) => {
  var {
    aria,
    classes,
    infoVisible,
    isLargeDisplayMode,
    pageIndexSelectorVisible,
    pagesContainerVisibility,
    pagesContainerVisible,
    props: {
      hasKnownLastPage,
      infoText,
      infoTextRef,
      maxPagesCount,
      pageCount,
      pageIndex,
      pageIndexChange,
      pageSize,
      pageSizeChange,
      pageSizes,
      pageSizesRef,
      pagesCountText,
      pagesRef,
      rtlEnabled,
      showNavigationButtons,
      showPageSizes,
      totalCount,
      visible
    },
    restAttributes,
    widgetRootElementRef
  } = _ref;
  return normalizeProps(createComponentVNode(2, Widget, _extends({
    rootElementRef: widgetRootElementRef,
    rtlEnabled,
    classes,
    visible,
    aria
  }, restAttributes, {
    children: [showPageSizes && createComponentVNode(2, PageSizeSelector, {
      rootElementRef: pageSizesRef,
      isLargeDisplayMode,
      pageSize,
      pageSizeChange,
      pageSizes
    }), pagesContainerVisible && createVNode(1, "div", PAGER_PAGES_CLASS, [infoVisible && createComponentVNode(2, InfoText, {
      rootElementRef: infoTextRef,
      infoText,
      pageCount,
      pageIndex,
      totalCount
    }), pageIndexSelectorVisible && createVNode(1, "div", PAGER_PAGE_INDEXES_CLASS, createComponentVNode(2, PageIndexSelector, {
      hasKnownLastPage,
      isLargeDisplayMode,
      maxPagesCount,
      pageCount,
      pageIndex,
      pageIndexChange,
      pagesCountText,
      showNavigationButtons,
      totalCount
    }), 2, null, null, pagesRef)], 0, {
      style: normalizeStyles({
        visibility: pagesContainerVisibility
      })
    })]
  })));
};
var PagerContentProps = Object.create(Object.prototype, _extends(Object.getOwnPropertyDescriptors(InternalPagerProps), Object.getOwnPropertyDescriptors({
  infoTextVisible: true,
  isLargeDisplayMode: true
})));
var PagerContent = class extends InfernoComponent {
  constructor(props) {
    super(props);
    this.state = {};
    this.widgetRootElementRef = createRef();
    this.__getterCache = {};
    this.setRootElementRef = this.setRootElementRef.bind(this);
    this.createFakeInstance = this.createFakeInstance.bind(this);
  }
  createEffects() {
    return [new InfernoEffect(this.setRootElementRef, [])];
  }
  getChildContext() {
    return _extends({}, this.context, {
      [KeyboardActionContext.id]: this.keyboardAction || KeyboardActionContext.defaultValue
    });
  }
  setRootElementRef() {
    var {
      rootElementRef
    } = this.props;
    if (rootElementRef) {
      rootElementRef.current = this.widgetRootElementRef.current;
    }
  }
  createFakeInstance() {
    return {
      option: () => false,
      element: () => this.widgetRootElementRef.current,
      _createActionByOption: () => (e) => {
        var _this$props$onKeyDown, _this$props;
        null === (_this$props$onKeyDown = (_this$props = this.props).onKeyDown) || void 0 === _this$props$onKeyDown ? void 0 : _this$props$onKeyDown.call(_this$props, e);
      }
    };
  }
  get keyboardAction() {
    if (void 0 !== this.__getterCache.keyboardAction) {
      return this.__getterCache.keyboardAction;
    }
    return this.__getterCache.keyboardAction = /* @__PURE__ */ (() => ({
      registerKeyboardAction: (element, action) => {
        var fakePagerInstance = this.createFakeInstance();
        return registerKeyboardAction("pager", fakePagerInstance, element, void 0, action);
      }
    }))();
  }
  get infoVisible() {
    var {
      infoTextVisible,
      showInfo
    } = this.props;
    return showInfo && infoTextVisible;
  }
  get pageIndexSelectorVisible() {
    return 0 !== this.props.pageSize;
  }
  get normalizedDisplayMode() {
    var {
      displayMode,
      lightModeEnabled
    } = this.props;
    if ("adaptive" === displayMode && void 0 !== lightModeEnabled) {
      return lightModeEnabled ? "compact" : "full";
    }
    return displayMode;
  }
  get pagesContainerVisible() {
    return !!this.props.pagesNavigatorVisible && this.props.pageCount > 0;
  }
  get pagesContainerVisibility() {
    if ("auto" === this.props.pagesNavigatorVisible && 1 === this.props.pageCount && this.props.hasKnownLastPage) {
      return "hidden";
    }
    return;
  }
  get isLargeDisplayMode() {
    var displayMode = this.normalizedDisplayMode;
    var result2 = false;
    if ("adaptive" === displayMode) {
      result2 = this.props.isLargeDisplayMode;
    } else {
      result2 = "full" === displayMode;
    }
    return result2;
  }
  get classes() {
    var classesMap = {
      ["".concat(this.props.className)]: !!this.props.className,
      [PAGER_CLASS]: true,
      [LIGHT_MODE_CLASS]: !this.isLargeDisplayMode
    };
    return combineClasses(classesMap);
  }
  get aria() {
    return {
      role: "navigation",
      label: this.props.label
    };
  }
  get restAttributes() {
    var _this$props2 = this.props, restProps = _objectWithoutPropertiesLoose(_this$props2, _excluded26);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props.onKeyDown !== nextProps.onKeyDown) {
      this.__getterCache.keyboardAction = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction23({
      props: _extends({}, props),
      widgetRootElementRef: this.widgetRootElementRef,
      keyboardAction: this.keyboardAction,
      infoVisible: this.infoVisible,
      pageIndexSelectorVisible: this.pageIndexSelectorVisible,
      pagesContainerVisible: this.pagesContainerVisible,
      pagesContainerVisibility: this.pagesContainerVisibility,
      isLargeDisplayMode: this.isLargeDisplayMode,
      classes: this.classes,
      aria: this.aria,
      restAttributes: this.restAttributes
    });
  }
};
PagerContent.defaultProps = PagerContentProps;

// node_modules/devextreme/esm/renovation/ui/pager/pager.js
var _excluded27 = ["className", "defaultPageIndex", "defaultPageSize", "displayMode", "gridCompatibility", "hasKnownLastPage", "infoText", "label", "lightModeEnabled", "maxPagesCount", "onKeyDown", "pageCount", "pageIndex", "pageIndexChange", "pageSize", "pageSizeChange", "pageSizes", "pagesCountText", "pagesNavigatorVisible", "rtlEnabled", "showInfo", "showNavigationButtons", "showPageSizes", "totalCount", "visible"];
var viewFunction24 = (_ref) => {
  var {
    pagerProps,
    restAttributes
  } = _ref;
  return normalizeProps(createComponentVNode(2, ResizableContainer, _extends({
    contentTemplate: PagerContent,
    pagerProps
  }, restAttributes)));
};
var Pager = class extends InfernoWrapperComponent {
  constructor(props) {
    super(props);
    this.__getterCache = {};
    this.state = {
      pageSize: void 0 !== this.props.pageSize ? this.props.pageSize : this.props.defaultPageSize,
      pageIndex: void 0 !== this.props.pageIndex ? this.props.pageIndex : this.props.defaultPageIndex
    };
    this.pageIndexChange = this.pageIndexChange.bind(this);
    this.pageSizeChange = this.pageSizeChange.bind(this);
  }
  createEffects() {
    return [createReRenderEffect()];
  }
  pageIndexChange(newPageIndex) {
    if (this.props.gridCompatibility) {
      var __newValue;
      this.setState((__state_argument) => {
        __newValue = newPageIndex + 1;
        return {
          pageIndex: __newValue
        };
      });
      this.props.pageIndexChange(__newValue);
    } else {
      var _newValue;
      this.setState((__state_argument) => {
        _newValue = newPageIndex;
        return {
          pageIndex: _newValue
        };
      });
      this.props.pageIndexChange(_newValue);
    }
  }
  get pageIndex() {
    if (this.props.gridCompatibility) {
      return (void 0 !== this.props.pageIndex ? this.props.pageIndex : this.state.pageIndex) - 1;
    }
    return void 0 !== this.props.pageIndex ? this.props.pageIndex : this.state.pageIndex;
  }
  pageSizeChange(newPageSize) {
    var __newValue;
    this.setState((__state_argument) => {
      __newValue = newPageSize;
      return {
        pageSize: __newValue
      };
    });
    this.props.pageSizeChange(__newValue);
  }
  get className() {
    if (this.props.gridCompatibility) {
      return combineClasses({
        "dx-datagrid-pager": true,
        ["".concat(this.props.className)]: !!this.props.className
      });
    }
    return this.props.className;
  }
  get pagerProps() {
    if (void 0 !== this.__getterCache.pagerProps) {
      return this.__getterCache.pagerProps;
    }
    return this.__getterCache.pagerProps = (() => _extends({}, _extends({}, this.props, {
      pageSize: void 0 !== this.props.pageSize ? this.props.pageSize : this.state.pageSize,
      pageIndex: void 0 !== this.props.pageIndex ? this.props.pageIndex : this.state.pageIndex
    }), {
      className: this.className,
      pageIndex: this.pageIndex,
      pageIndexChange: (pageIndex) => this.pageIndexChange(pageIndex),
      pageSizeChange: (pageSize) => this.pageSizeChange(pageSize)
    }))();
  }
  get restAttributes() {
    var _this$props$pageSize$ = _extends({}, this.props, {
      pageSize: void 0 !== this.props.pageSize ? this.props.pageSize : this.state.pageSize,
      pageIndex: void 0 !== this.props.pageIndex ? this.props.pageIndex : this.state.pageIndex
    }), restProps = _objectWithoutPropertiesLoose(_this$props$pageSize$, _excluded27);
    return restProps;
  }
  componentWillUpdate(nextProps, nextState, context) {
    super.componentWillUpdate();
    if (this.props !== nextProps || this.props.gridCompatibility !== nextProps.gridCompatibility || this.props.className !== nextProps.className || this.state.pageIndex !== nextState.pageIndex || this.props.pageIndex !== nextProps.pageIndex || this.props.pageIndexChange !== nextProps.pageIndexChange || this.props.pageSizeChange !== nextProps.pageSizeChange) {
      this.__getterCache.pagerProps = void 0;
    }
  }
  render() {
    var props = this.props;
    return viewFunction24({
      props: _extends({}, props, {
        pageSize: void 0 !== this.props.pageSize ? this.props.pageSize : this.state.pageSize,
        pageIndex: void 0 !== this.props.pageIndex ? this.props.pageIndex : this.state.pageIndex
      }),
      pageIndexChange: this.pageIndexChange,
      pageIndex: this.pageIndex,
      pageSizeChange: this.pageSizeChange,
      className: this.className,
      pagerProps: this.pagerProps,
      restAttributes: this.restAttributes
    });
  }
};
Pager.defaultProps = PagerProps;

// node_modules/devextreme/esm/renovation/ui/pager/pager.j.js
var Pager2 = class extends GridPagerWrapper {
  getProps() {
    var props = super.getProps();
    props.onKeyDown = this._wrapKeyDownHandler(props.onKeyDown);
    return props;
  }
  get _propsInfo() {
    return {
      twoWay: [
        ["pageSize", "defaultPageSize", "pageSizeChange"],
        ["pageIndex", "defaultPageIndex", "pageIndexChange"]
      ],
      allowNull: [],
      elements: [],
      templates: [],
      props: ["defaultPageSize", "pageSizeChange", "defaultPageIndex", "pageIndexChange", "gridCompatibility", "className", "showInfo", "infoText", "lightModeEnabled", "displayMode", "maxPagesCount", "pageCount", "pagesCountText", "visible", "hasKnownLastPage", "pagesNavigatorVisible", "showPageSizes", "pageSizes", "rtlEnabled", "showNavigationButtons", "totalCount", "label", "onKeyDown", "pageSize", "pageIndex"]
    };
  }
  get _viewComponent() {
    return Pager;
  }
};
component_registrator_default("dxPager", Pager2);

// node_modules/devextreme/esm/ui/pager.js
var pager_default = Pager2;

// node_modules/devextreme/esm/__internal/grids/grid_core/pager/m_pager.js
var PAGER_CLASS2 = "pager";
var MAX_PAGES_COUNT = 10;
var getPageIndex = function(dataController2) {
  return 1 + (parseInt(dataController2.pageIndex()) || 0);
};
var PagerView = class extends m_modules_default.View {
  init() {
    var dataController2 = this.getController("data");
    dataController2.changed.add((e) => {
      if (e && e.repaintChangesOnly) {
        var pager = this._pager;
        if (pager) {
          pager.option({
            pageIndex: getPageIndex(dataController2),
            pageSize: dataController2.pageSize(),
            pageCount: dataController2.pageCount(),
            totalCount: dataController2.totalCount(),
            hasKnownLastPage: dataController2.hasKnownLastPage()
          });
        } else {
          this.render();
        }
      } else if (!e || "update" !== e.changeType && "updateSelection" !== e.changeType && "updateFocusedRow" !== e.changeType) {
        this._pager = null;
        this.render();
      }
    });
  }
  dispose() {
    this._pager = null;
  }
  optionChanged(args) {
    var {
      name: name2
    } = args;
    var isPager = "pager" === name2;
    var isPaging = "paging" === name2;
    var isDataSource = "dataSource" === name2;
    var isScrolling = "scrolling" === name2;
    var dataController2 = this.getController("data");
    if (isPager || isPaging || isScrolling || isDataSource) {
      args.handled = true;
      if (dataController2.skipProcessingPagingChange(args.fullName)) {
        return;
      }
      if (isPager || isPaging) {
        this._pageSizes = null;
      }
      if (!isDataSource) {
        this._pager = null;
        this._invalidate();
        if (hasWindow() && isPager && this.component) {
          this.component.resize();
        }
      }
    }
  }
  _renderCore() {
    var _a;
    var $element = this.element().addClass(this.addWidgetPrefix(PAGER_CLASS2));
    var pagerOptions = null !== (_a = this.option("pager")) && void 0 !== _a ? _a : {};
    var dataController2 = this.getController("data");
    var keyboardController = this.getController("keyboardNavigation");
    var options2 = {
      maxPagesCount: MAX_PAGES_COUNT,
      pageIndex: getPageIndex(dataController2),
      pageCount: dataController2.pageCount(),
      pageSize: dataController2.pageSize(),
      showPageSizes: pagerOptions.showPageSizeSelector,
      showInfo: pagerOptions.showInfo,
      displayMode: pagerOptions.displayMode,
      pagesNavigatorVisible: pagerOptions.visible,
      showNavigationButtons: pagerOptions.showNavigationButtons,
      label: pagerOptions.label,
      pageSizes: this.getPageSizes(),
      totalCount: dataController2.totalCount(),
      hasKnownLastPage: dataController2.hasKnownLastPage(),
      pageIndexChanged(pageIndex) {
        if (dataController2.pageIndex() !== pageIndex - 1) {
          dataController2.pageIndex(pageIndex - 1);
        }
      },
      pageSizeChanged(pageSize) {
        dataController2.pageSize(pageSize);
      },
      onKeyDown: (e) => keyboardController && keyboardController.executeAction("onKeyDown", e),
      useLegacyKeyboardNavigation: this.option("useLegacyKeyboardNavigation"),
      useKeyboard: this.option("keyboardNavigation.enabled")
    };
    if (isDefined(pagerOptions.infoText)) {
      options2.infoText = pagerOptions.infoText;
    }
    if (this._pager) {
      this._pager.repaint();
      return;
    }
    if (hasWindow()) {
      this._pager = this._createComponent($element, pager_default, options2);
    } else {
      $element.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>');
    }
  }
  getPager() {
    return this._pager;
  }
  getPageSizes() {
    var dataController2 = this.getController("data");
    var pagerOptions = this.option("pager");
    var allowedPageSizes = pagerOptions && pagerOptions.allowedPageSizes;
    var pageSize = dataController2.pageSize();
    if (!isDefined(this._pageSizes) || !this._pageSizes.includes(pageSize)) {
      this._pageSizes = [];
      if (pagerOptions) {
        if (Array.isArray(allowedPageSizes)) {
          this._pageSizes = allowedPageSizes;
        } else if (allowedPageSizes && pageSize > 1) {
          this._pageSizes = [Math.floor(pageSize / 2), pageSize, 2 * pageSize];
        }
      }
    }
    return this._pageSizes;
  }
  isVisible() {
    var dataController2 = this.getController("data");
    var pagerOptions = this.option("pager");
    var pagerVisible = pagerOptions && pagerOptions.visible;
    var scrolling = this.option("scrolling");
    if ("auto" === pagerVisible) {
      if (scrolling && ("virtual" === scrolling.mode || "infinite" === scrolling.mode)) {
        pagerVisible = false;
      } else {
        pagerVisible = dataController2.pageCount() > 1 || dataController2.isLoaded() && !dataController2.hasKnownLastPage();
      }
    }
    return !!pagerVisible;
  }
  getHeight() {
    return this.getElementHeight();
  }
};
var pagerModule = {
  defaultOptions: () => ({
    pager: {
      visible: "auto",
      showPageSizeSelector: false,
      allowedPageSizes: "auto",
      label: message_default.format("dxPager-ariaLabel")
    }
  }),
  views: {
    pagerView: PagerView
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/pager.js
m_core_default.registerModule("pager", pagerModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/columns_resizing_reordering/m_columns_resizing_reordering.js
var COLUMNS_SEPARATOR_CLASS = "columns-separator";
var COLUMNS_SEPARATOR_TRANSPARENT = "columns-separator-transparent";
var DRAGGING_HEADER_CLASS = "drag-header";
var CELL_CONTENT_CLASS2 = "text-content";
var HEADERS_DRAG_ACTION_CLASS = "drag-action";
var TRACKER_CLASS = "tracker";
var HEADERS_DROP_HIGHLIGHT_CLASS = "drop-highlight";
var BLOCK_SEPARATOR_CLASS = "dx-block-separator";
var HEADER_ROW_CLASS2 = "dx-header-row";
var WIDGET_CLASS4 = "dx-widget";
var DRAGGING_COMMAND_CELL_CLASS = "dx-drag-command-cell";
var MODULE_NAMESPACE2 = "dxDataGridResizingReordering";
var COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH = 10;
var DRAGGING_DELTA = 5;
var COLUMN_OPACITY = 0.5;
var allowResizing = function(that) {
  return that.option("allowColumnResizing") || that.getController("columns").isColumnOptionUsed("allowResizing");
};
var allowReordering = function(that) {
  return that.option("allowColumnReordering") || that.getController("columns").isColumnOptionUsed("allowReordering");
};
var TrackerView = class extends m_modules_default.View {
  init() {
    super.init();
    this._tablePositionController = this.getController("tablePosition");
    this._subscribeToCallback();
  }
  dispose() {
    this._unsubscribeFromCallback();
    super.dispose();
  }
  optionChanged(args) {
    if ("allowColumnResizing" === args.name) {
      this._unsubscribeFromCallback();
      if (args.value) {
        this._subscribeToCallback();
        this._invalidate();
      }
    }
    super.optionChanged(args);
  }
  _renderCore() {
    var deferred = super._renderCore();
    this.element().addClass(this.addWidgetPrefix(TRACKER_CLASS));
    this.hide();
    return deferred;
  }
  _unsubscribeFromCallback() {
    if (this._positionChanged) {
      this._tablePositionController.positionChanged.remove(this._positionChanged);
    }
  }
  _subscribeToCallback() {
    var that = this;
    that._positionChanged = function(position2) {
      var $element = that.element();
      if ($element && $element.hasClass(that.addWidgetPrefix(TRACKER_CLASS))) {
        $element.css({
          top: position2.top
        });
        setHeight2($element, position2.height);
      }
    };
    this._tablePositionController.positionChanged.add(that._positionChanged);
  }
  isVisible() {
    return allowResizing(this);
  }
  show() {
    this.element().show();
  }
  hide() {
    this.element() && this.element().hide();
  }
  setHeight(value2) {
    setHeight2(this.element(), value2);
  }
};
var SeparatorView = class extends m_modules_default.View {
  _renderSeparator() {
  }
  _renderCore(options2) {
    var deferred = super._renderCore(options2);
    this._isShown = true;
    this._renderSeparator();
    this.hide();
    return deferred;
  }
  show() {
    this._isShown = true;
  }
  hide() {
    this._isShown = false;
  }
  height(value2) {
    var $element = this.element();
    if ($element) {
      if (isDefined(value2)) {
        setHeight2($element, value2);
      } else {
        return getHeight($element);
      }
    }
  }
  width(value2) {
    var $element = this.element();
    if ($element) {
      if (isDefined(value2)) {
        setWidth2($element, value2);
      } else {
        return getWidth($element);
      }
    }
  }
};
var ColumnsSeparatorView = class extends SeparatorView {
  init() {
    super.init();
    this._tablePositionController = this.getController("tablePosition");
    this._init();
  }
  dispose() {
    this._unsubscribeFromCallback();
    super.dispose();
  }
  optionChanged(args) {
    if ("allowColumnResizing" === args.name) {
      if (args.value) {
        this._init();
        this._invalidate();
        this.hide(true);
      } else {
        this._unsubscribeFromCallback();
        this._isTransparent = allowResizing(this);
        this.hide(true);
      }
    }
    super.optionChanged(args);
  }
  _renderSeparator() {
    super._renderSeparator();
    var $element = this.element();
    $element.addClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_CLASS));
  }
  _subscribeToCallback() {
    var that = this;
    var $element;
    that._positionChanged = function(position2) {
      $element = that.element();
      if ($element) {
        $element.css({
          top: position2.top
        });
        setHeight2($element, position2.height);
      }
    };
    that._tablePositionController.positionChanged.add(that._positionChanged);
  }
  _unsubscribeFromCallback() {
    this._positionChanged && this._tablePositionController.positionChanged.remove(this._positionChanged);
  }
  _init() {
    this._isTransparent = allowResizing(this);
    if (this.isVisible()) {
      this._subscribeToCallback();
    }
  }
  isVisible() {
    return this.option("showColumnHeaders") && (allowReordering(this) || allowResizing(this));
  }
  show() {
    var $element = this.element();
    if ($element && !this._isShown) {
      if (this._isTransparent) {
        $element.removeClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT));
      } else {
        $element.show();
      }
    }
    super.show();
  }
  hide(force) {
    var $element = this.element();
    var columnsSeparatorTransparent = this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT);
    if ($element && (this._isShown || force)) {
      if (this._isTransparent) {
        $element.addClass(columnsSeparatorTransparent);
        $element.css("left", "");
        $element.show();
      } else {
        if ($element.hasClass(columnsSeparatorTransparent)) {
          $element.removeClass(columnsSeparatorTransparent);
        }
        $element.hide();
      }
    }
    super.hide();
  }
  moveByX(outerX) {
    var $element = this.element();
    if ($element) {
      $element.css("left", null === outerX ? 0 : outerX - this._parentElement().offset().left);
    }
  }
  changeCursor(cursorName) {
    cursorName = isDefined(cursorName) ? cursorName : "";
    var $element = this.element();
    if ($element) {
      $element.css("cursor", cursorName);
    }
  }
};
var BlockSeparatorView = class extends SeparatorView {
  init() {
    super.init();
    var dataController2 = this.getController("data");
    dataController2.loadingChanged.add((isLoading) => {
      if (!isLoading) {
        this.hide();
      }
    });
  }
  _renderSeparator() {
    super._renderSeparator();
    this.element().addClass(BLOCK_SEPARATOR_CLASS).html("&nbsp;");
  }
  hide() {
    var $parent = this._parentElement();
    var $element = this.element();
    if ($element && this._isShown) {
      $element.css("display", "none");
    }
    if ($parent && !$parent.children(".".concat(BLOCK_SEPARATOR_CLASS)).length) {
      $parent.prepend(this.element());
    }
    super.hide();
  }
  isVisible() {
    var groupPanelOptions = this.option("groupPanel");
    var columnChooserOptions = this.option("columnChooser");
    return groupPanelOptions && groupPanelOptions.visible || columnChooserOptions && columnChooserOptions.enabled;
  }
  show(targetLocation) {
    var $element = this.element();
    if ($element && !this._isShown) {
      switch (targetLocation) {
        case "group":
          this.element().css("display", "block");
          break;
        case "columnChooser":
          !function(toOptions) {
            fx_default.stop($element, true);
            fx_default.animate($element, {
              type: "slide",
              from: {
                width: 0,
                display: toOptions.display
              },
              to: toOptions,
              duration: 300,
              easing: "swing"
            });
          }({
            width: "100%",
            display: "block"
          });
          break;
        default:
          $element.css("display", "");
      }
    }
    super.show();
  }
};
var DraggingHeaderView = class extends m_modules_default.View {
  init() {
    super.init();
    var dataController2 = this.getController("data");
    this._controller = this.getController("draggingHeader");
    this._columnsResizerViewController = this.getController("columnsResizer");
    this._columnsController = this.getController("columns");
    this._isDragging = false;
    dataController2.loadingChanged.add((isLoading) => {
      var element = this.element();
      if (!isLoading && element) {
        element.hide();
      }
    });
  }
  isDragging() {
    return this._isDragging;
  }
  _getDraggingPanelByPos(pos) {
    var result2;
    each(this._dragOptions.draggingPanels, (index, draggingPanel) => {
      if (draggingPanel) {
        var boundingRect = draggingPanel.getBoundingRect();
        if (boundingRect && (void 0 === boundingRect.bottom || pos.y < boundingRect.bottom) && (void 0 === boundingRect.top || pos.y > boundingRect.top) && (void 0 === boundingRect.left || pos.x > boundingRect.left) && (void 0 === boundingRect.right || pos.x < boundingRect.right)) {
          result2 = draggingPanel;
          return false;
        }
      }
      return;
    });
    return result2;
  }
  _renderCore() {
    this.element().addClass("".concat(this.addWidgetPrefix(DRAGGING_HEADER_CLASS), " ").concat(this.addWidgetPrefix(CELL_CONTENT_CLASS2), " ").concat(WIDGET_CLASS4)).hide();
  }
  _resetTargetColumnOptions() {
    var params = this._dropOptions;
    params.targetColumnIndex = -1;
    delete params.targetColumnElement;
    delete params.isLast;
    delete params.posX;
    delete params.posY;
  }
  _getVisibleIndexObject(rowIndex, visibleIndex) {
    if (isDefined(rowIndex)) {
      return {
        columnIndex: visibleIndex,
        rowIndex
      };
    }
    return visibleIndex;
  }
  dispose() {
    var element = this.element();
    this._dragOptions = null;
    element && element.parent().find(".".concat(this.addWidgetPrefix(DRAGGING_HEADER_CLASS))).remove();
  }
  isVisible() {
    var commonColumnSettings = this._columnsController.getCommonSettings();
    return this.option("showColumnHeaders") && (allowReordering(this) || commonColumnSettings.allowGrouping || commonColumnSettings.allowHiding);
  }
  dragHeader(options2) {
    var {
      columnElement
    } = options2;
    var isCommandColumn = !!options2.sourceColumn.type;
    this._isDragging = true;
    this._dragOptions = options2;
    this._dropOptions = {
      sourceIndex: options2.index,
      sourceColumnIndex: this._getVisibleIndexObject(options2.rowIndex, options2.columnIndex),
      sourceColumnElement: options2.columnElement,
      sourceLocation: options2.sourceLocation
    };
    var document2 = dom_adapter_default.getDocument();
    this._onSelectStart = document2.onselectstart;
    document2.onselectstart = function() {
      return false;
    };
    this._controller.drag(this._dropOptions);
    this.element().css({
      textAlign: columnElement && columnElement.css("textAlign"),
      height: columnElement && (isCommandColumn && columnElement.get(0).clientHeight || getHeight(columnElement)),
      width: columnElement && (isCommandColumn && columnElement.get(0).clientWidth || getWidth(columnElement)),
      whiteSpace: columnElement && columnElement.css("whiteSpace")
    }).addClass(this.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS)).toggleClass(DRAGGING_COMMAND_CELL_CLASS, isCommandColumn).text(isCommandColumn ? "" : options2.sourceColumn.caption);
    this.element().appendTo(swatch_container_default.getSwatchContainer(columnElement));
  }
  moveHeader(args) {
    var e = args.event;
    var {
      that
    } = e.data;
    var eventData2 = eventData(e);
    var isResizing = that._columnsResizerViewController ? that._columnsResizerViewController.isResizing() : false;
    var dragOptions = that._dragOptions;
    if (that._isDragging && !isResizing) {
      var $element = that.element();
      var moveDeltaX = Math.abs(eventData2.x - dragOptions.columnElement.offset().left - dragOptions.deltaX);
      var moveDeltaY = Math.abs(eventData2.y - dragOptions.columnElement.offset().top - dragOptions.deltaY);
      if ($element.is(":visible") || moveDeltaX > DRAGGING_DELTA || moveDeltaY > DRAGGING_DELTA) {
        $element.show();
        var newLeft = eventData2.x - dragOptions.deltaX;
        var newTop = eventData2.y - dragOptions.deltaY;
        $element.css({
          left: newLeft,
          top: newTop
        });
        that.dockHeader(eventData2);
      }
      e.preventDefault();
    }
  }
  dockHeader(eventData2) {
    var targetDraggingPanel = this._getDraggingPanelByPos(eventData2);
    var controller = this._controller;
    var params = this._dropOptions;
    var dragOptions = this._dragOptions;
    if (targetDraggingPanel) {
      var rtlEnabled = this.option("rtlEnabled");
      var isVerticalOrientation = "columnChooser" === targetDraggingPanel.getName();
      var axisName = isVerticalOrientation ? "y" : "x";
      var targetLocation = targetDraggingPanel.getName();
      var rowIndex = "headers" === targetLocation ? dragOptions.rowIndex : void 0;
      var {
        sourceColumn
      } = dragOptions;
      var columnElements = targetDraggingPanel.getColumnElements(rowIndex, null === sourceColumn || void 0 === sourceColumn ? void 0 : sourceColumn.ownerBand) || [];
      var pointsByTarget = dragOptions.pointsByTarget = dragOptions.pointsByTarget || {};
      var pointsByColumns = "columnChooser" === targetLocation ? [] : pointsByTarget[targetLocation] || controller._generatePointsByColumns(extend({}, dragOptions, {
        targetDraggingPanel,
        columns: targetDraggingPanel.getColumns(rowIndex),
        columnElements,
        isVerticalOrientation,
        startColumnIndex: "headers" === targetLocation && renderer_default(columnElements[0]).index()
      }));
      pointsByTarget[targetLocation] = pointsByColumns;
      params.targetLocation = targetLocation;
      if (pointsByColumns.length > 0) {
        for (var i = 0; i < pointsByColumns.length; i++) {
          var centerPosition = pointsByColumns[i + 1] && (pointsByColumns[i][axisName] + pointsByColumns[i + 1][axisName]) / 2;
          if (void 0 === centerPosition || (rtlEnabled && "x" === axisName ? eventData2[axisName] > centerPosition : eventData2[axisName] < centerPosition)) {
            params.targetColumnIndex = this._getVisibleIndexObject(rowIndex, pointsByColumns[i].columnIndex);
            if (columnElements[i]) {
              params.targetColumnElement = columnElements.eq(i);
              params.isLast = false;
            } else {
              params.targetColumnElement = columnElements.last();
              params.isLast = true;
            }
            params.posX = pointsByColumns[i].x;
            params.posY = pointsByColumns[i].y;
            controller.dock(params);
            break;
          }
        }
      } else {
        this._resetTargetColumnOptions();
        controller.dock(params);
      }
    }
  }
  dropHeader(args) {
    var e = args.event;
    var {
      that
    } = e.data;
    var controller = that._controller;
    that.element().hide();
    if (controller && that._isDragging) {
      controller.drop(that._dropOptions);
    }
    that.element().appendTo(that._parentElement());
    that._dragOptions = null;
    that._dropOptions = null;
    that._isDragging = false;
    dom_adapter_default.getDocument().onselectstart = that._onSelectStart || null;
  }
};
var isNextColumnResizingMode = function(that) {
  return "widget" !== that.option("columnResizingMode");
};
var ColumnsResizerViewController = class extends m_modules_default.ViewController {
  init() {
    this._subscribesToCallbacks = [];
    if (allowResizing(this)) {
      this._init();
    }
  }
  dispose() {
    this._unsubscribes();
    super.dispose();
  }
  optionChanged(args) {
    super.optionChanged(args);
    if ("allowColumnResizing" === args.name) {
      if (args.value) {
        this._init();
        this._subscribeToEvents();
      } else {
        this._unsubscribes();
      }
    }
  }
  _isHeadersRowArea(posY) {
    if (this._columnHeadersView) {
      var element = this._columnHeadersView.element();
      if (element) {
        var offsetTop = element.offset().top;
        var headersRowHeight = this._columnHeadersView.getHeadersRowHeight();
        return posY >= offsetTop && posY <= offsetTop + headersRowHeight;
      }
    }
    return false;
  }
  _isRtlParentStyle() {
    var _a;
    return this.option("rtlEnabled") && "rtl" === (null === (_a = this._$parentContainer) || void 0 === _a ? void 0 : _a.parent().css("direction"));
  }
  _pointCreated(point, cellsLength, columns7) {
    var isNextColumnMode = isNextColumnResizingMode(this);
    var rtlEnabled = this.option("rtlEnabled");
    var isRtlParentStyle = this._isRtlParentStyle();
    var firstPointColumnIndex = !isNextColumnMode && rtlEnabled && !isRtlParentStyle ? 0 : 1;
    if (point.index >= firstPointColumnIndex && point.index < cellsLength + (!isNextColumnMode && (!rtlEnabled || isRtlParentStyle) ? 1 : 0)) {
      point.columnIndex -= firstPointColumnIndex;
      var currentColumn = columns7[point.columnIndex] || {};
      var nextColumn = columns7[point.columnIndex + 1] || {};
      return !(isNextColumnMode ? currentColumn.allowResizing && nextColumn.allowResizing : currentColumn.allowResizing);
    }
    return true;
  }
  _getTargetPoint(pointsByColumns, currentX, deltaX) {
    if (pointsByColumns) {
      for (var i = 0; i < pointsByColumns.length; i++) {
        if (pointsByColumns[i].x === pointsByColumns[0].x && pointsByColumns[i + 1] && pointsByColumns[i].x === pointsByColumns[i + 1].x) {
          continue;
        }
        if (pointsByColumns[i].x - deltaX <= currentX && currentX <= pointsByColumns[i].x + deltaX) {
          return pointsByColumns[i];
        }
      }
    }
    return null;
  }
  _moveSeparator(args) {
    var _a;
    var e = args.event;
    var that = e.data;
    var columnsSeparatorWidth = that._columnsSeparatorView.width();
    var isNextColumnMode = isNextColumnResizingMode(that);
    var deltaX = columnsSeparatorWidth / 2;
    var parentOffset = that._$parentContainer.offset();
    var parentOffsetLeft = parentOffset.left;
    var eventData2 = eventData(e);
    var rtlEnabled = that.option("rtlEnabled");
    var isRtlParentStyle = this._isRtlParentStyle();
    var isDragging = null === (_a = that._draggingHeaderView) || void 0 === _a ? void 0 : _a.isDragging();
    if (that._isResizing && that._resizingInfo) {
      if ((parentOffsetLeft <= eventData2.x || !isNextColumnMode && isRtlParentStyle) && (!isNextColumnMode || eventData2.x <= parentOffsetLeft + getWidth(that._$parentContainer))) {
        if (that._updateColumnsWidthIfNeeded(eventData2.x)) {
          var $cell = that._columnHeadersView.getColumnElements().eq(that._resizingInfo.currentColumnIndex);
          var cell = $cell[0];
          if (cell) {
            var outerWidth = cell.getBoundingClientRect().width;
            that._columnsSeparatorView.moveByX($cell.offset().left + ((isNextColumnMode || isRtlParentStyle) && rtlEnabled ? 0 : outerWidth));
            that._tablePositionController.update(that._targetPoint.y);
            e.preventDefault();
          }
        }
      }
    } else if (!isDragging) {
      if (that._isHeadersRowArea(eventData2.y)) {
        if (that._previousParentOffset) {
          if (that._previousParentOffset.left !== parentOffset.left || that._previousParentOffset.top !== parentOffset.top) {
            that.pointsByColumns(null);
          }
        }
        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData2.x, columnsSeparatorWidth);
        that._previousParentOffset = parentOffset;
        that._isReadyResizing = false;
        if (that._targetPoint) {
          that._columnsSeparatorView.changeCursor("col-resize");
          that._columnsSeparatorView.moveByX(that._targetPoint.x - deltaX);
          that._tablePositionController.update(that._targetPoint.y);
          that._isReadyResizing = true;
          e.preventDefault();
        } else {
          that._columnsSeparatorView.changeCursor();
          that._columnsSeparatorView.moveByX(null);
        }
      } else {
        that.pointsByColumns(null);
        that._isReadyResizing = false;
        that._columnsSeparatorView.changeCursor();
        that._columnsSeparatorView.moveByX(null);
      }
    }
  }
  _endResizing(args) {
    var e = args.event;
    var that = e.data;
    if (that._isResizing) {
      that.pointsByColumns(null);
      that._resizingInfo = null;
      that._columnsSeparatorView.hide();
      that._columnsSeparatorView.changeCursor();
      that._trackerView.hide();
      that._isReadyResizing = false;
      that._isResizing = false;
    }
  }
  _getNextColumnIndex(currentColumnIndex) {
    return currentColumnIndex + 1;
  }
  _setupResizingInfo(posX) {
    var currentColumnIndex = this._targetPoint.columnIndex;
    var nextColumnIndex = this._getNextColumnIndex(currentColumnIndex);
    var currentHeader = this._columnHeadersView.getHeaderElement(currentColumnIndex);
    var nextHeader = this._columnHeadersView.getHeaderElement(nextColumnIndex);
    this._resizingInfo = {
      startPosX: posX,
      currentColumnIndex,
      currentColumnWidth: currentHeader && currentHeader.length > 0 ? getBoundingRect(currentHeader[0]).width : 0,
      nextColumnIndex,
      nextColumnWidth: nextHeader && nextHeader.length > 0 ? getBoundingRect(nextHeader[0]).width : 0
    };
  }
  _startResizing(args) {
    var e = args.event;
    var that = e.data;
    var eventData2 = eventData(e);
    if (isTouchEvent(e)) {
      if (that._isHeadersRowArea(eventData2.y)) {
        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData2.x, COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH);
        if (that._targetPoint) {
          that._columnsSeparatorView.moveByX(that._targetPoint.x - that._columnsSeparatorView.width() / 2);
          that._isReadyResizing = true;
        }
      } else {
        that._isReadyResizing = false;
      }
    }
    if (that._isReadyResizing) {
      that._setupResizingInfo(eventData2.x);
      that._isResizing = true;
      that._tablePositionController.update(that._targetPoint.y);
      that._columnsSeparatorView.show();
      that._trackerView.show();
      var scrollable = that.component.getScrollable();
      if (scrollable && that._isRtlParentStyle()) {
        that._scrollRight = getWidth(scrollable.$content()) - getWidth(scrollable.container()) - scrollable.scrollLeft();
      }
      e.preventDefault();
      e.stopPropagation();
    }
    if (this.isResizing()) {
      this._editorFactoryController.loseFocus();
    }
  }
  _generatePointsByColumns() {
    var that = this;
    var columns7 = that._columnsController ? that._columnsController.getVisibleColumns() : [];
    var cells = that._columnHeadersView.getColumnElements();
    var pointsByColumns = [];
    if (cells && cells.length > 0) {
      pointsByColumns = m_utils_default.getPointsByColumns(cells, (point) => that._pointCreated(point, cells.length, columns7));
    }
    that._pointsByColumns = pointsByColumns;
  }
  _unsubscribeFromEvents() {
    this._moveSeparatorHandler && events_engine_default.off(dom_adapter_default.getDocument(), addNamespace(pointer_default.move, MODULE_NAMESPACE2), this._moveSeparatorHandler);
    this._startResizingHandler && events_engine_default.off(this._$parentContainer, addNamespace(pointer_default.down, MODULE_NAMESPACE2), this._startResizingHandler);
    if (this._endResizingHandler) {
      events_engine_default.off(this._columnsSeparatorView.element(), addNamespace(pointer_default.up, MODULE_NAMESPACE2), this._endResizingHandler);
      events_engine_default.off(dom_adapter_default.getDocument(), addNamespace(pointer_default.up, MODULE_NAMESPACE2), this._endResizingHandler);
    }
  }
  _subscribeToEvents() {
    this._moveSeparatorHandler = this.createAction(this._moveSeparator);
    this._startResizingHandler = this.createAction(this._startResizing);
    this._endResizingHandler = this.createAction(this._endResizing);
    events_engine_default.on(dom_adapter_default.getDocument(), addNamespace(pointer_default.move, MODULE_NAMESPACE2), this, this._moveSeparatorHandler);
    events_engine_default.on(this._$parentContainer, addNamespace(pointer_default.down, MODULE_NAMESPACE2), this, this._startResizingHandler);
    events_engine_default.on(this._columnsSeparatorView.element(), addNamespace(pointer_default.up, MODULE_NAMESPACE2), this, this._endResizingHandler);
    events_engine_default.on(dom_adapter_default.getDocument(), addNamespace(pointer_default.up, MODULE_NAMESPACE2), this, this._endResizingHandler);
  }
  _updateColumnsWidthIfNeeded(posX) {
    var deltaX;
    var needUpdate;
    var contentWidth = this._rowsView.contentWidth();
    var resizingInfo = this._resizingInfo;
    var columnsController = this._columnsController;
    var visibleColumns = columnsController.getVisibleColumns();
    var columnsSeparatorWidth = this._columnsSeparatorView.width();
    var isNextColumnMode = isNextColumnResizingMode(this);
    var adaptColumnWidthByRatio = isNextColumnMode && this.option("adaptColumnWidthByRatio") && !this.option("columnAutoWidth");
    var rtlEnabled = this.option("rtlEnabled");
    var isRtlParentStyle = this._isRtlParentStyle();
    var column = visibleColumns[resizingInfo.currentColumnIndex];
    var nextColumn = visibleColumns[resizingInfo.nextColumnIndex];
    function isPercentWidth2(width) {
      return isString(width) && width.endsWith("%");
    }
    function setColumnWidth(column2, columnWidth, contentWidth2, adaptColumnWidthByRatio2) {
      if (column2) {
        var oldColumnWidth = column2.width;
        if (oldColumnWidth) {
          adaptColumnWidthByRatio2 = isPercentWidth2(oldColumnWidth);
        }
        if (adaptColumnWidthByRatio2) {
          columnsController.columnOption(column2.index, "visibleWidth", columnWidth);
          columnsController.columnOption(column2.index, "width", "".concat((columnWidth / contentWidth2 * 100).toFixed(3), "%"));
        } else {
          columnsController.columnOption(column2.index, "visibleWidth", null);
          columnsController.columnOption(column2.index, "width", columnWidth);
        }
      }
    }
    deltaX = posX - resizingInfo.startPosX;
    if ((isNextColumnMode || isRtlParentStyle) && rtlEnabled) {
      deltaX = -deltaX;
    }
    var {
      cellWidth,
      nextCellWidth
    } = function(delta) {
      var nextMinWidth;
      var nextCellWidth2;
      var needCorrectionNextCellWidth;
      var cellWidth2 = resizingInfo.currentColumnWidth + delta;
      var minWidth = column && column.minWidth || columnsSeparatorWidth;
      var result2 = {};
      if (cellWidth2 >= minWidth) {
        result2.cellWidth = cellWidth2;
      } else {
        result2.cellWidth = minWidth;
        needCorrectionNextCellWidth = true;
      }
      if (isNextColumnMode) {
        nextCellWidth2 = resizingInfo.nextColumnWidth - delta;
        nextMinWidth = nextColumn && nextColumn.minWidth || columnsSeparatorWidth;
        if (nextCellWidth2 >= nextMinWidth) {
          if (needCorrectionNextCellWidth) {
            result2.nextCellWidth = resizingInfo.nextColumnWidth - (delta + minWidth - cellWidth2);
          } else {
            result2.nextCellWidth = nextCellWidth2;
          }
        } else {
          result2.nextCellWidth = nextMinWidth;
          result2.cellWidth = resizingInfo.currentColumnWidth + (delta - nextMinWidth + nextCellWidth2);
        }
      }
      return result2;
    }(deltaX);
    needUpdate = column.width !== cellWidth;
    if (needUpdate) {
      columnsController.beginUpdate();
      cellWidth = Math.floor(cellWidth);
      contentWidth = function(contentWidth2, visibleColumns2) {
        var allColumnsHaveWidth = visibleColumns2.every((column2) => column2.width);
        if (allColumnsHaveWidth) {
          var totalPercent = visibleColumns2.reduce((sum, column2) => {
            if (isPercentWidth2(column2.width)) {
              sum += parseFloat(column2.width);
            }
            return sum;
          }, 0);
          if (totalPercent > 100) {
            contentWidth2 = contentWidth2 / totalPercent * 100;
          }
        }
        return contentWidth2;
      }(contentWidth, visibleColumns);
      setColumnWidth(column, cellWidth, contentWidth, adaptColumnWidthByRatio);
      if (isNextColumnMode) {
        nextCellWidth = Math.floor(nextCellWidth);
        setColumnWidth(nextColumn, nextCellWidth, contentWidth, adaptColumnWidthByRatio);
      } else {
        var columnWidths = this._columnHeadersView.getColumnWidths();
        columnWidths[resizingInfo.currentColumnIndex] = cellWidth;
        var hasScroll = columnWidths.reduce((totalWidth, width) => totalWidth + width, 0) > this._rowsView.contentWidth();
        if (!hasScroll) {
          var lastColumnIndex = m_utils_default.getLastResizableColumnIndex(visibleColumns);
          if (lastColumnIndex >= 0) {
            columnsController.columnOption(visibleColumns[lastColumnIndex].index, "visibleWidth", "auto");
          }
        }
        for (var i = 0; i < columnWidths.length; i++) {
          if (visibleColumns[i] && visibleColumns[i] !== column && void 0 === visibleColumns[i].width) {
            columnsController.columnOption(visibleColumns[i].index, "width", columnWidths[i]);
          }
        }
      }
      columnsController.endUpdate();
      if (!isNextColumnMode) {
        this.component.updateDimensions();
        var scrollable = this.component.getScrollable();
        if (scrollable && isRtlParentStyle) {
          var left = getWidth(scrollable.$content()) - getWidth(scrollable.container()) - this._scrollRight;
          scrollable.scrollTo({
            left
          });
        }
      }
    }
    return needUpdate;
  }
  _subscribeToCallback(callback, handler) {
    callback.add(handler);
    this._subscribesToCallbacks.push({
      callback,
      handler
    });
  }
  _unsubscribeFromCallbacks() {
    for (var i = 0; i < this._subscribesToCallbacks.length; i++) {
      var subscribe = this._subscribesToCallbacks[i];
      subscribe.callback.remove(subscribe.handler);
    }
    this._subscribesToCallbacks = [];
  }
  _unsubscribes() {
    this._unsubscribeFromEvents();
    this._unsubscribeFromCallbacks();
  }
  _init() {
    var generatePointsByColumnsHandler = () => {
      if (!this._isResizing) {
        this.pointsByColumns(null);
      }
    };
    var generatePointsByColumnsScrollHandler = (offset) => {
      if (this._scrollLeft !== offset.left) {
        this._scrollLeft = offset.left;
        this.pointsByColumns(null);
      }
    };
    this._columnsSeparatorView = this.getView("columnsSeparatorView");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._trackerView = this.getView("trackerView");
    this._rowsView = this.getView("rowsView");
    this._columnsController = this.getController("columns");
    this._tablePositionController = this.getController("tablePosition");
    this._editorFactoryController = this.getController("editorFactory");
    this._draggingHeaderView = this.component.getView("draggingHeaderView");
    this._$parentContainer = this.component.$element();
    this._subscribeToCallback(this._columnHeadersView.renderCompleted, generatePointsByColumnsHandler);
    this._subscribeToCallback(this._columnHeadersView.resizeCompleted, generatePointsByColumnsHandler);
    this._subscribeToCallback(this._columnsSeparatorView.renderCompleted, () => {
      this._unsubscribeFromEvents();
      this._subscribeToEvents();
    });
    this._subscribeToCallback(this._rowsView.renderCompleted, () => {
      this._rowsView.scrollChanged.remove(generatePointsByColumnsScrollHandler);
      this._rowsView.scrollChanged.add(generatePointsByColumnsScrollHandler);
    });
    var previousScrollbarVisibility = 0 !== this._rowsView.getScrollbarWidth();
    var previousTableHeight = 0;
    this._subscribeToCallback(this._tablePositionController.positionChanged, (e) => {
      if (this._isResizing && !this._rowsView.isResizing) {
        var scrollbarVisibility = 0 !== this._rowsView.getScrollbarWidth();
        if (previousScrollbarVisibility !== scrollbarVisibility || previousTableHeight && previousTableHeight !== e.height) {
          previousScrollbarVisibility = scrollbarVisibility;
          previousTableHeight = e.height;
          this.component.updateDimensions();
        } else {
          this._rowsView.updateFreeSpaceRowHeight();
        }
      }
      previousTableHeight = e.height;
    });
  }
  isResizing() {
    return this._isResizing;
  }
  pointsByColumns(value2) {
    if (void 0 !== value2) {
      this._pointsByColumns = value2;
    } else {
      if (!this._pointsByColumns) {
        this._generatePointsByColumns();
      }
      return this._pointsByColumns;
    }
  }
};
var TablePositionViewController = class extends m_modules_default.ViewController {
  constructor(component) {
    super(component);
    this.positionChanged = callbacks_default();
  }
  init() {
    super.init();
    this._columnsResizerController = this.getController("columnsResizer");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._rowsView = this.getView("rowsView");
    this._pagerView = this.getView("pagerView");
    this._rowsView.resizeCompleted.add(() => {
      if (this.option("allowColumnResizing")) {
        var targetPoint = this._columnsResizerController._targetPoint;
        this.update(targetPoint ? targetPoint.y : null);
      }
    });
  }
  update(top) {
    var params = {};
    var $element = this._columnHeadersView.element();
    var offset = $element && $element.offset();
    var offsetTop = offset && offset.top || 0;
    var diffOffsetTop = isDefined(top) ? Math.abs(top - offsetTop) : 0;
    var columnsHeadersHeight = this._columnHeadersView ? this._columnHeadersView.getHeight() : 0;
    var scrollBarWidth = this._rowsView.getScrollbarWidth(true);
    var rowsHeight = this._rowsView ? this._rowsView.height() - scrollBarWidth : 0;
    var draggingHeaderView = this.component.getView("draggingHeaderView");
    params.height = columnsHeadersHeight;
    var isDraggingOrResizing = this._columnsResizerController.isResizing() || draggingHeaderView.isDragging();
    if (isDraggingOrResizing) {
      params.height += rowsHeight - diffOffsetTop;
    }
    if (null !== top && $element && $element.length) {
      params.top = $element[0].offsetTop + diffOffsetTop;
    }
    this.positionChanged.fire(params);
  }
};
var DraggingHeaderViewController = class extends m_modules_default.ViewController {
  init() {
    super.init();
    this._columnsController = this.getController("columns");
    this._tablePositionController = this.getController("tablePosition");
    this._columnHeadersView = this.getView("columnHeadersView");
    this._columnsSeparatorView = this.getView("columnsSeparatorView");
    this._draggingHeaderView = this.getView("draggingHeaderView");
    this._rowsView = this.getView("rowsView");
    this._blockSeparatorView = this.getView("blockSeparatorView");
    this._headerPanelView = this.getView("headerPanel");
    this._columnChooserView = this.getView("columnChooserView");
    var subscribeToEvents = () => {
      if (this._draggingHeaderView) {
        var draggingPanels = [this._columnChooserView, this._columnHeadersView, this._headerPanelView];
        this._unsubscribeFromEvents(this._draggingHeaderView, draggingPanels);
        this._subscribeToEvents(this._draggingHeaderView, draggingPanels);
      }
    };
    this._columnHeadersView.renderCompleted.add(subscribeToEvents);
    this._headerPanelView && this._headerPanelView.renderCompleted.add(subscribeToEvents);
    this._columnChooserView && this._columnChooserView.renderCompleted.add(subscribeToEvents);
  }
  dispose() {
    if (this._draggingHeaderView) {
      this._unsubscribeFromEvents(this._draggingHeaderView, [this._columnChooserView, this._columnHeadersView, this._headerPanelView]);
    }
  }
  _generatePointsByColumns(options2) {
    var that = this;
    this.isCustomGroupColumnPosition = this.checkIsCustomGroupColumnPosition(options2);
    var points = m_utils_default.getPointsByColumns(options2.columnElements, (point) => that._pointCreated(point, options2.columns, options2.targetDraggingPanel.getName(), options2.sourceColumn), options2.isVerticalOrientation, options2.startColumnIndex);
    return points;
  }
  checkIsCustomGroupColumnPosition(options2) {
    var wasOnlyCommandColumns = true;
    for (var i = 0; i < options2.columns.length; i += 1) {
      var col = options2.columns[i];
      if ("expand" === col.command && !wasOnlyCommandColumns) {
        return true;
      }
      if (!col.command) {
        wasOnlyCommandColumns = false;
      }
    }
    return false;
  }
  _pointCreated(point, columns7, location, sourceColumn) {
    var _a;
    var targetColumn = columns7[point.columnIndex];
    var prevColumn = columns7[point.columnIndex - 1];
    var isColumnAfterExpandColumn = "expand" === (null === prevColumn || void 0 === prevColumn ? void 0 : prevColumn.command);
    var isFirstExpandColumn = "expand" === (null === targetColumn || void 0 === targetColumn ? void 0 : targetColumn.command) && "expand" !== (null === prevColumn || void 0 === prevColumn ? void 0 : prevColumn.command);
    var sourceColumnReorderingDisabled = sourceColumn && !sourceColumn.allowReordering;
    var otherColumnsReorderingDisabled = !(null === targetColumn || void 0 === targetColumn ? void 0 : targetColumn.allowReordering) && !(null === prevColumn || void 0 === prevColumn ? void 0 : prevColumn.allowReordering);
    switch (location) {
      case "columnChooser":
        return true;
      case "headers":
        if (sourceColumnReorderingDisabled) {
          return true;
        }
        if (!isFirstExpandColumn) {
          return isColumnAfterExpandColumn || otherColumnsReorderingDisabled;
        }
        if (this.isCustomGroupColumnPosition) {
          return false;
        }
        while ("expand" === (null === (_a = columns7[point.columnIndex]) || void 0 === _a ? void 0 : _a.command)) {
          point.columnIndex += 1;
        }
        return false;
      default:
        return 0 === columns7.length;
    }
  }
  _subscribeToEvents(draggingHeader3, draggingPanels) {
    var that = this;
    each(draggingPanels, (_, draggingPanel) => {
      if (draggingPanel) {
        var columns7;
        var rowCount = draggingPanel.getRowCount ? draggingPanel.getRowCount() : 1;
        var nameDraggingPanel = draggingPanel.getName();
        var subscribeToEvents = function(index, columnElement) {
          if (!columnElement) {
            return;
          }
          var $columnElement = renderer_default(columnElement);
          var column = columns7[index];
          if (column && draggingPanel.allowDragging(column)) {
            $columnElement.addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));
            events_engine_default.on($columnElement, addNamespace(DRAG_START_EVENT, MODULE_NAMESPACE2), that.createAction((args) => {
              var e = args.event;
              var eventData2 = eventData(e);
              draggingHeader3.dragHeader({
                deltaX: eventData2.x - renderer_default(e.currentTarget).offset().left,
                deltaY: eventData2.y - renderer_default(e.currentTarget).offset().top,
                sourceColumn: column,
                index: column.index,
                columnIndex: index,
                columnElement: $columnElement,
                sourceLocation: nameDraggingPanel,
                draggingPanels,
                rowIndex: that._columnsController.getRowIndex(column.index, true)
              });
            }));
            events_engine_default.on($columnElement, addNamespace(DRAG_EVENT, MODULE_NAMESPACE2), {
              that: draggingHeader3
            }, that.createAction(draggingHeader3.moveHeader));
            events_engine_default.on($columnElement, addNamespace(DRAG_END_EVENT, MODULE_NAMESPACE2), {
              that: draggingHeader3
            }, that.createAction(draggingHeader3.dropHeader));
          }
        };
        for (var i = 0; i < rowCount; i++) {
          var columnElements = draggingPanel.getColumnElements(i) || [];
          if (columnElements.length) {
            columns7 = draggingPanel.getColumns(i) || [];
            each(columnElements, subscribeToEvents);
          }
        }
      }
    });
  }
  _unsubscribeFromEvents(draggingHeader3, draggingPanels) {
    var that = this;
    each(draggingPanels, (_, draggingPanel) => {
      if (draggingPanel) {
        var columnElements = draggingPanel.getColumnElements() || [];
        each(columnElements, (index, columnElement) => {
          var $columnElement = renderer_default(columnElement);
          events_engine_default.off($columnElement, addNamespace(DRAG_START_EVENT, MODULE_NAMESPACE2));
          events_engine_default.off($columnElement, addNamespace(DRAG_EVENT, MODULE_NAMESPACE2));
          events_engine_default.off($columnElement, addNamespace(DRAG_END_EVENT, MODULE_NAMESPACE2));
          $columnElement.removeClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));
        });
      }
    });
  }
  _getSeparator(targetLocation) {
    return "headers" === targetLocation ? this._columnsSeparatorView : this._blockSeparatorView;
  }
  hideSeparators(type2) {
    var blockSeparator = this._blockSeparatorView;
    var columnsSeparator = this._columnsSeparatorView;
    this._animationColumnIndex = void 0;
    blockSeparator && blockSeparator.hide();
    "block" !== type2 && columnsSeparator && columnsSeparator.hide();
  }
  allowDrop(parameters) {
    return this._columnsController.allowMoveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);
  }
  drag(parameters) {
    var {
      sourceIndex
    } = parameters;
    var {
      sourceLocation
    } = parameters;
    var {
      sourceColumnElement
    } = parameters;
    var headersView = this._columnHeadersView;
    var rowsView17 = this._rowsView;
    if (sourceColumnElement) {
      sourceColumnElement.css({
        opacity: COLUMN_OPACITY
      });
      if ("headers" === sourceLocation) {
        headersView && headersView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);
        rowsView17 && rowsView17.setRowsOpacity(sourceIndex, COLUMN_OPACITY);
      }
    }
  }
  dock(parameters) {
    var that = this;
    var targetColumnIndex = isObject(parameters.targetColumnIndex) ? parameters.targetColumnIndex.columnIndex : parameters.targetColumnIndex;
    var {
      sourceLocation
    } = parameters;
    var {
      targetLocation
    } = parameters;
    var separator = that._getSeparator(targetLocation);
    var hasTargetVisibleIndex = targetColumnIndex >= 0;
    that._columnHeadersView.element().find(".".concat(HEADER_ROW_CLASS2)).toggleClass(that.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS), "headers" !== sourceLocation && "headers" === targetLocation && !hasTargetVisibleIndex);
    if (separator) {
      if (that.allowDrop(parameters) && hasTargetVisibleIndex) {
        if ("group" === targetLocation || "columnChooser" === targetLocation) {
          !function() {
            if (that._animationColumnIndex !== targetColumnIndex) {
              that.hideSeparators();
              separator.element()[parameters.isLast ? "insertAfter" : "insertBefore"](parameters.targetColumnElement);
              that._animationColumnIndex = targetColumnIndex;
              separator.show(targetLocation);
            }
          }();
        } else {
          that.hideSeparators("block");
          that._tablePositionController.update(parameters.posY);
          separator.moveByX(parameters.posX - separator.width());
          separator.show();
        }
      } else {
        that.hideSeparators();
      }
    }
  }
  drop(parameters) {
    var {
      sourceColumnElement
    } = parameters;
    if (sourceColumnElement) {
      sourceColumnElement.css({
        opacity: ""
      });
      this._columnHeadersView.setRowsOpacity(parameters.sourceIndex, "");
      this._rowsView.setRowsOpacity(parameters.sourceIndex, "");
      this._columnHeadersView.element().find(".".concat(HEADER_ROW_CLASS2)).removeClass(this.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS));
    }
    if (this.allowDrop(parameters)) {
      var separator = this._getSeparator(parameters.targetLocation);
      if (separator) {
        separator.hide();
      }
      this._columnsController.moveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);
    }
  }
};
var rowsView9 = (Base) => class extends Base {
  _needUpdateRowHeight(itemCount) {
    var wordWrapEnabled = this.option("wordWrapEnabled");
    var isResizing = this._columnsResizerController.isResizing();
    return super._needUpdateRowHeight.apply(this, arguments) || itemCount > 0 && wordWrapEnabled && isResizing;
  }
};
var editorFactory = (Base) => class extends Base {
  renderFocusOverlay() {
    if (this._columnsResizerController.isResizing()) {
      return;
    }
    return super.renderFocusOverlay.apply(this, arguments);
  }
};
var columnsResizingReorderingModule = {
  views: {
    columnsSeparatorView: ColumnsSeparatorView,
    blockSeparatorView: BlockSeparatorView,
    draggingHeaderView: DraggingHeaderView,
    trackerView: TrackerView
  },
  controllers: {
    draggingHeader: DraggingHeaderViewController,
    tablePosition: TablePositionViewController,
    columnsResizer: ColumnsResizerViewController
  },
  extenders: {
    views: {
      rowsView: rowsView9
    },
    controllers: {
      editorFactory
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/columns_resizing_reordering.js
var DraggingHeaderView2 = columnsResizingReorderingModule.views.draggingHeaderView;
var DraggingHeaderViewController2 = columnsResizingReorderingModule.controllers.draggingHeader;
var ColumnsSeparatorView2 = columnsResizingReorderingModule.views.columnsSeparatorView;
var TablePositionViewController2 = columnsResizingReorderingModule.controllers.tablePosition;
var ColumnsResizerViewController2 = columnsResizingReorderingModule.controllers.columnsResizer;
var TrackerView2 = columnsResizingReorderingModule.views.trackerView;
m_core_default.registerModule("columnsResizingReordering", columnsResizingReorderingModule);

// node_modules/devextreme/esm/__internal/utils/memoize.js
var compareByReference = (args, lastArgs) => args.length === lastArgs.length && !Object.keys(args).some((key) => args[key] !== lastArgs[key]);
var compareByValue = (args, lastArgs) => equalByValue(args, lastArgs, {
  maxDepth: 4
});
var createCacheFunc = (firstArgs, firstResult, originFunc, compareFunc) => {
  var lastArgs = firstArgs;
  var lastResult = firstResult;
  return function() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    var argsEquals = compareFunc(args, lastArgs);
    if (argsEquals) {
      return lastResult;
    }
    lastArgs = args;
    lastResult = originFunc(...lastArgs);
    return lastResult;
  };
};
var MEMOIZE_DEFAULT_OPTIONS = {
  compareType: "reference"
};
var memoize = function(func2) {
  var {
    compareType
  } = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : MEMOIZE_DEFAULT_OPTIONS;
  var cachedFunc = null;
  return function() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    if (!cachedFunc) {
      var firstResult = func2(...args);
      cachedFunc = createCacheFunc(args, firstResult, func2, "reference" === compareType ? compareByReference : compareByValue);
      return firstResult;
    }
    return cachedFunc(...args);
  };
};

// node_modules/devextreme/esm/__internal/grids/grid_core/keyboard_navigation/const.js
var ATTRIBUTES = {
  ariaColIndex: "aria-colindex",
  dragCell: "dx-drag-cell"
};
var ROWS_VIEW_CLASS2 = "rowsview";
var DATA_ROW_CLASS4 = "dx-data-row";
var GROUP_ROW_CLASS3 = "dx-group-row";
var HEADER_ROW_CLASS3 = "dx-header-row";
var EDIT_FORM_ITEM_CLASS2 = "edit-form-item";
var MASTER_DETAIL_ROW_CLASS2 = "dx-master-detail-row";
var FREESPACE_ROW_CLASS = "dx-freespace-row";
var VIRTUAL_ROW_CLASS2 = "dx-virtual-row";
var MASTER_DETAIL_CELL_CLASS2 = "dx-master-detail-cell";
var DROPDOWN_EDITOR_OVERLAY_CLASS2 = "dx-dropdowneditor-overlay";
var COMMAND_EXPAND_CLASS2 = "dx-command-expand";
var ADAPTIVE_COLUMN_NAME_CLASS = "dx-command-adaptive";
var COMMAND_SELECT_CLASS2 = "dx-command-select";
var COMMAND_EDIT_CLASS2 = "dx-command-edit";
var COMMAND_CELL_SELECTOR = "[class^=dx-command]";
var CELL_FOCUS_DISABLED_CLASS6 = "dx-cell-focus-disabled";
var DATEBOX_WIDGET_NAME = "dxDateBox";
var FOCUS_STATE_CLASS2 = "dx-state-focused";
var WIDGET_CLASS5 = "dx-widget";
var REVERT_BUTTON_CLASS2 = "dx-revert-button";
var FOCUSED_CLASS2 = "dx-focused";
var FAST_EDITING_DELETE_KEY = "delete";
var INTERACTIVE_ELEMENTS_SELECTOR = '\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled],.dx-state-readonly)\n';
var NON_FOCUSABLE_ELEMENTS_SELECTOR = "".concat(INTERACTIVE_ELEMENTS_SELECTOR, ", .dx-dropdowneditor-icon");
var FOCUS_TYPE_ROW = "row";
var FOCUS_TYPE_CELL = "cell";
var COLUMN_HEADERS_VIEW = "columnHeadersView";
var ROWS_VIEW = "rowsView";
var FUNCTIONAL_KEYS = ["shift", "control", "alt"];

// node_modules/devextreme/esm/__internal/grids/grid_core/keyboard_navigation/dom.js
var isDragCell = ($cell) => void 0 !== $cell.attr(ATTRIBUTES.dragCell);
var getFocusableCellSelector = (columnIndex) => ["[".concat(ATTRIBUTES.ariaColIndex, '="').concat(columnIndex + 1, '"]'), ":not([".concat(ATTRIBUTES.dragCell, "])"), ":not([aria-hidden=true])"].join("");
var getCellToFocus = ($cellElements, columnIndex) => $cellElements.filter(getFocusableCellSelector(columnIndex)).first();
var GridCoreKeyboardNavigationDom = {
  isDragCell,
  getCellToFocus
};

// node_modules/devextreme/esm/__internal/grids/grid_core/keyboard_navigation/m_keyboard_navigation_utils.js
var DATAGRID_GROUP_FOOTER_CLASS = "dx-datagrid-group-footer";
function isGroupRow2($row) {
  return $row && $row.hasClass(GROUP_ROW_CLASS3);
}
function isGroupFooterRow($row) {
  return $row && $row.hasClass(DATAGRID_GROUP_FOOTER_CLASS);
}
function isDetailRow($row) {
  return $row && $row.hasClass(MASTER_DETAIL_ROW_CLASS2);
}
function isDataRow($row) {
  return $row && $row.hasClass(DATA_ROW_CLASS4);
}
function isNotFocusedRow($row) {
  return !$row || $row.hasClass(FREESPACE_ROW_CLASS) || $row.hasClass(VIRTUAL_ROW_CLASS2);
}
function isEditorCell(that, $cell) {
  return !that._isRowEditMode() && $cell && !$cell.hasClass(COMMAND_SELECT_CLASS2) && $cell.hasClass(EDITOR_CELL_CLASS2);
}
function isElementDefined($element) {
  return isDefined($element) && $element.length > 0;
}
function isMobile() {
  return "desktop" !== devices_default.current().deviceType;
}
function isCellInHeaderRow($cell) {
  return !!$cell.parent(".".concat(HEADER_ROW_CLASS3)).length;
}
function isFixedColumnIndexOffsetRequired(that, column) {
  var rtlEnabled = that.option("rtlEnabled");
  if (rtlEnabled) {
    return !("right" === column.fixedPosition || isDefined(column.command) && !isDefined(column.fixedPosition));
  }
  return !(!isDefined(column.fixedPosition) || "left" === column.fixedPosition);
}
function shouldPreventScroll(that) {
  var keyboardController = that.getController("keyboardNavigation");
  return keyboardController._isVirtualScrolling() ? that.option("focusedRowIndex") === keyboardController.getRowIndex() : false;
}

// node_modules/devextreme/esm/__internal/grids/grid_core/keyboard_navigation/scrollable_a11y.js
var keyboardNavigationScrollableA11yExtender = (Base) => class extends Base {
  rowsViewFocusHandler(event) {
    var $target = renderer_default(event.target);
    this.translateFocusIfNeed(event, $target);
    super.rowsViewFocusHandler(event);
  }
  rowsViewFocusOutHandler() {
    super.rowsViewFocusOutHandler();
    this.makeScrollableFocusableIfNeed();
  }
  translateFocusIfNeed(event, $target) {
    var needTranslateFocus = this.isScrollableNeedFocusable();
    var isFirstCellFixed = this._isFixedColumn(0);
    if (!needTranslateFocus || !isFirstCellFixed) {
      return;
    }
    var $firstCell = this._rowsView.getCell({
      rowIndex: 0,
      columnIndex: 0
    });
    var firstCellHasTabIndex = !!$firstCell.attr("tabindex");
    var notFixedCellIsTarget = $target.is(this._$firstNotFixedCell);
    if (firstCellHasTabIndex && notFixedCellIsTarget) {
      event.preventDefault();
      this._focus($firstCell);
    }
  }
  renderCompleted(e) {
    this._$firstNotFixedCell = this.getFirstNotFixedCell();
    this.makeScrollableFocusableIfNeed();
    super.renderCompleted(e);
  }
  _focus($cell, disableFocus, skipFocusEvent) {
    super._focus($cell, disableFocus, skipFocusEvent);
    this.makeScrollableFocusableIfNeed();
  }
  _tabKeyHandler(eventArgs, isEditing) {
    var _a;
    var isCellPositionDefined = isDefined(this._focusedCellPosition) && !isEmptyObject(this._focusedCellPosition);
    var isOriginalHandlerRequired = !isCellPositionDefined || !eventArgs.shift && this._isLastValidCell(this._focusedCellPosition) || eventArgs.shift && this._isFirstValidCell(this._focusedCellPosition);
    var isNeedFocusable = this.isScrollableNeedFocusable();
    if (isOriginalHandlerRequired && isNeedFocusable) {
      null === (_a = this._$firstNotFixedCell) || void 0 === _a ? void 0 : _a.removeAttr("tabIndex");
    }
    super._tabKeyHandler(eventArgs, isEditing);
  }
  getFirstNotFixedCell() {
    var _a;
    var columns7 = this._columnsController.getVisibleColumns();
    var columnIndex = columns7.findIndex((_ref) => {
      var {
        fixed
      } = _ref;
      return !fixed;
    });
    var isEditing = null === (_a = this._editingController) || void 0 === _a ? void 0 : _a.isEditing();
    return -1 === columnIndex || isEditing ? void 0 : this._rowsView._getCellElement(0, columnIndex);
  }
  isScrollableNeedFocusable() {
    var _a, _b;
    var hasScrollable = !!this._rowsView.getScrollable();
    var hasFixedTable = !!(null === (_a = this._rowsView._fixedTableElement) || void 0 === _a ? void 0 : _a.length);
    var isCellsRendered = !!(null === (_b = this._rowsView.getCellElements(0)) || void 0 === _b ? void 0 : _b.length);
    return hasScrollable && hasFixedTable && isCellsRendered;
  }
  makeScrollableFocusableIfNeed() {
    var needFocusable = this.isScrollableNeedFocusable();
    if (!needFocusable || !this._$firstNotFixedCell) {
      return;
    }
    this._applyTabIndexToElement(this._$firstNotFixedCell);
  }
};

// node_modules/devextreme/esm/__internal/grids/grid_core/keyboard_navigation/m_keyboard_navigation.js
var KeyboardNavigationController = class extends m_modules_default.ViewController {
  init() {
    var _a, _b, _c;
    this._dataController = this.getController("data");
    this._selectionController = this.getController("selection");
    this._editingController = this.getController("editing");
    this._headerPanel = this.getView("headerPanel");
    this._rowsView = this.getView("rowsView");
    this._columnsController = this.getController("columns");
    this._editorFactory = this.getController("editorFactory");
    this._focusController = this.getController("focus");
    this._adaptiveColumnsController = this.getController("adaptiveColumns");
    this._columnResizerController = this.getController("columnsResizer");
    this._memoFireFocusedCellChanged = memoize(this._memoFireFocusedCellChanged.bind(this), {
      compareType: "value"
    });
    this._memoFireFocusedRowChanged = memoize(this._memoFireFocusedRowChanged.bind(this), {
      compareType: "value"
    });
    this.focusedHandlerWithContext = this.focusedHandlerWithContext || this.focusedHandler.bind(this);
    this.renderCompletedWithContext = this.renderCompletedWithContext || this.renderCompleted.bind(this);
    this.rowsViewFocusHandlerContext = this.rowsViewFocusHandlerContext || this.rowsViewFocusHandler.bind(this);
    this.rowsViewFocusOutHandlerContext = null !== (_a = this.rowsViewFocusOutHandlerContext) && void 0 !== _a ? _a : this.rowsViewFocusOutHandler.bind(this);
    this._updateFocusTimeout = null;
    this._fastEditingStarted = false;
    this._focusedCellPosition = {};
    this._canceledCellPosition = null;
    if (this.isKeyboardEnabled()) {
      subscribeVisibilityChange();
      null === (_b = this._editorFactory) || void 0 === _b ? void 0 : _b.focused.add(this.focusedHandlerWithContext);
      this.createAction("onKeyDown");
    } else {
      unsubscribeVisibilityChange();
      null === (_c = this._editorFactory) || void 0 === _c ? void 0 : _c.focused.remove(this.focusedHandlerWithContext);
    }
    this.initViewHandlers();
    this.initDocumentHandlers();
  }
  dispose() {
    super.dispose();
    this._resetFocusedView();
    keyboard.off(this._keyDownListener);
    events_engine_default.off(dom_adapter_default.getDocument(), addNamespace(pointer_default.down, "dxDataGridKeyboardNavigation"), this._documentClickHandler);
    clearTimeout(this._updateFocusTimeout);
    unsubscribeVisibilityChange();
  }
  focusedHandler($element) {
    this.setupFocusedView();
    if (this._isNeedScroll) {
      if ($element.is(":visible") && this._focusedView && this._focusedView.getScrollable()) {
        this._focusedView._scrollToElement($element);
        this._isNeedScroll = false;
      }
    }
  }
  rowsViewFocusHandler(event) {
    var _a;
    var $element = renderer_default(event.target);
    var isRelatedTargetInRowsView = renderer_default(event.relatedTarget).closest(this._rowsView.element()).length;
    var isLink = $element.is("a");
    if (event.relatedTarget && isLink && !isRelatedTargetInRowsView && this._isEventInCurrentGrid(event)) {
      var $focusedCell = this._getFocusedCell();
      $focusedCell = !isElementDefined($focusedCell) ? this._rowsView.getCellElements(0).filter("[tabindex]").eq(0) : $focusedCell;
      if (!$element.closest($focusedCell).length) {
        event.preventDefault();
        events_engine_default.trigger($focusedCell, "focus");
      }
    }
    var isCell = $element.is("td");
    var needSetFocusPosition = (null !== (_a = this.option("focusedRowIndex")) && void 0 !== _a ? _a : -1) < 0;
    if (isCell && needSetFocusPosition) {
      this._updateFocusedCellPosition($element);
    }
  }
  rowsViewFocusOutHandler() {
    this._toggleInertAttr(false);
  }
  subscribeToRowsViewFocusEvent() {
    var _a;
    var $rowsView = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.element();
    events_engine_default.on($rowsView, "focusin", this.rowsViewFocusHandlerContext);
    events_engine_default.on($rowsView, "focusout", this.rowsViewFocusOutHandlerContext);
  }
  unsubscribeFromRowsViewFocusEvent() {
    var _a;
    var $rowsView = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.element();
    events_engine_default.off($rowsView, "focusin", this.rowsViewFocusHandlerContext);
    events_engine_default.off($rowsView, "focusout", this.rowsViewFocusOutHandlerContext);
  }
  renderCompleted(e) {
    var $rowsView = this._rowsView.element();
    var isFullUpdate = !e || "refresh" === e.changeType;
    var isFocusedViewCorrect = this._focusedView && this._focusedView.name === this._rowsView.name;
    var needUpdateFocus = false;
    var isAppend = e && ("append" === e.changeType || "prepend" === e.changeType);
    var root = renderer_default(dom_adapter_default.getRootNode($rowsView.get && $rowsView.get(0)));
    var $focusedElement = root.find(":focus");
    var isFocusedElementCorrect = !$focusedElement.length || $focusedElement.closest($rowsView).length;
    this.unsubscribeFromRowsViewFocusEvent();
    this.subscribeToRowsViewFocusEvent();
    this.initPointerEventHandler();
    this.initKeyDownHandler();
    this._setRowsViewAttributes();
    if (isFocusedViewCorrect && isFocusedElementCorrect) {
      needUpdateFocus = this._isNeedFocus ? !isAppend : this._isHiddenFocus && isFullUpdate && !(null === e || void 0 === e ? void 0 : e.virtualColumnsScrolling);
      needUpdateFocus && this._updateFocus(true);
    }
  }
  initViewHandlers() {
    var _a, _b;
    this.unsubscribeFromRowsViewFocusEvent();
    this.unsubscribeFromPointerEvent();
    this.unsubscribeFromKeyDownEvent();
    null === (_b = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.renderCompleted) || void 0 === _b ? void 0 : _b.remove(this.renderCompletedWithContext);
    if (this.isKeyboardEnabled()) {
      this._rowsView.renderCompleted.add(this.renderCompletedWithContext);
    }
  }
  initDocumentHandlers() {
    var document2 = dom_adapter_default.getDocument();
    this._documentClickHandler = this._documentClickHandler || this.createAction((e) => {
      var $target = renderer_default(e.event.target);
      var isCurrentRowsViewClick = this._isEventInCurrentGrid(e.event) && $target.closest(".".concat(this.addWidgetPrefix(ROWS_VIEW_CLASS2))).length;
      var isEditorOverlay = $target.closest(".".concat(DROPDOWN_EDITOR_OVERLAY_CLASS2)).length;
      var isColumnResizing = !!this._columnResizerController && this._columnResizerController.isResizing();
      if (!isCurrentRowsViewClick && !isEditorOverlay && !isColumnResizing) {
        var targetInsideFocusedView = this._focusedView ? $target.parents().filter(this._focusedView.element()).length > 0 : false;
        !targetInsideFocusedView && this._resetFocusedCell(true);
        this._resetFocusedView();
      }
    });
    events_engine_default.off(document2, addNamespace(pointer_default.down, "dxDataGridKeyboardNavigation"), this._documentClickHandler);
    if (this.isKeyboardEnabled()) {
      events_engine_default.on(document2, addNamespace(pointer_default.down, "dxDataGridKeyboardNavigation"), this._documentClickHandler);
    }
  }
  _setRowsViewAttributes() {
    var $rowsView = this._getRowsViewElement();
    var isGridEmpty = !this._dataController.getVisibleRows().length;
    if (isGridEmpty) {
      this._applyTabIndexToElement($rowsView);
    }
  }
  unsubscribeFromPointerEvent() {
    var pointerEventName = !isMobile() ? pointer_default.down : CLICK_EVENT_NAME;
    var $rowsView = this._getRowsViewElement();
    this._pointerEventAction && events_engine_default.off($rowsView, addNamespace(pointerEventName, "dxDataGridKeyboardNavigation"), this._pointerEventAction);
  }
  subscribeToPointerEvent() {
    var pointerEventName = !isMobile() ? pointer_default.down : CLICK_EVENT_NAME;
    var $rowsView = this._getRowsViewElement();
    var clickSelector = ".".concat(ROW_CLASS4, " > td, .").concat(ROW_CLASS4);
    events_engine_default.on($rowsView, addNamespace(pointerEventName, "dxDataGridKeyboardNavigation"), clickSelector, this._pointerEventAction);
  }
  initPointerEventHandler() {
    this._pointerEventAction = this._pointerEventAction || this.createAction(this._pointerEventHandler);
    this.unsubscribeFromPointerEvent();
    this.subscribeToPointerEvent();
  }
  unsubscribeFromKeyDownEvent() {
    keyboard.off(this._keyDownListener);
  }
  subscribeToKeyDownEvent() {
    var $rowsView = this._getRowsViewElement();
    this._keyDownListener = keyboard.on($rowsView, null, (e) => this._keyDownHandler(e));
  }
  initKeyDownHandler() {
    this._keyDownListener && this.unsubscribeFromKeyDownEvent();
    this.subscribeToKeyDownEvent();
  }
  optionChanged(args) {
    switch (args.name) {
      case "keyboardNavigation":
        if ("keyboardNavigation.enabled" === args.fullName) {
          this.init();
        }
        args.handled = true;
        break;
      case "useLegacyKeyboardNavigation":
        this.init();
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  isRowFocusType() {
    return this.focusType === FOCUS_TYPE_ROW;
  }
  isCellFocusType() {
    return this.focusType === FOCUS_TYPE_CELL;
  }
  setRowFocusType() {
    if (this.option("focusedRowEnabled")) {
      this.focusType = FOCUS_TYPE_ROW;
    }
  }
  setCellFocusType() {
    this.focusType = FOCUS_TYPE_CELL;
  }
  _keyDownHandler(e) {
    var _a;
    var needStopPropagation = true;
    this._isNeedFocus = true;
    this._isNeedScroll = true;
    var isHandled = this._processOnKeyDown(e);
    var isEditing = null === (_a = this._editingController) || void 0 === _a ? void 0 : _a.isEditing();
    var {
      originalEvent
    } = e;
    if (originalEvent.isDefaultPrevented()) {
      this._isNeedFocus = false;
      this._isNeedScroll = false;
      return;
    }
    !FUNCTIONAL_KEYS.includes(e.keyName) && this._updateFocusedCellPositionByTarget(originalEvent.target);
    if (!isHandled) {
      switch (e.keyName) {
        case "leftArrow":
        case "rightArrow":
          this._leftRightKeysHandler(e, isEditing);
          isHandled = true;
          break;
        case "upArrow":
        case "downArrow":
          if (e.ctrl) {
            selectView("rowsView", this, originalEvent);
          } else {
            this._upDownKeysHandler(e, isEditing);
          }
          isHandled = true;
          break;
        case "pageUp":
        case "pageDown":
          this._pageUpDownKeyHandler(e);
          isHandled = true;
          break;
        case "space":
          isHandled = this._spaceKeyHandler(e, isEditing);
          break;
        case "A":
          if (isCommandKeyPressed(e.originalEvent)) {
            this._ctrlAKeyHandler(e, isEditing);
            isHandled = true;
          } else {
            isHandled = this._beginFastEditing(e.originalEvent);
          }
          break;
        case "tab":
          this._tabKeyHandler(e, isEditing);
          isHandled = true;
          break;
        case "enter":
          this._enterKeyHandler(e, isEditing);
          isHandled = true;
          break;
        case "escape":
          isHandled = this._escapeKeyHandler(e, isEditing);
          break;
        case "F":
          if (isCommandKeyPressed(e.originalEvent)) {
            this._ctrlFKeyHandler(e);
            isHandled = true;
          } else {
            isHandled = this._beginFastEditing(e.originalEvent);
          }
          break;
        case "F2":
          this._f2KeyHandler();
          isHandled = true;
          break;
        case "del":
        case "backspace":
          if (this._isFastEditingAllowed() && !this._isFastEditingStarted()) {
            isHandled = this._beginFastEditing(originalEvent, true);
          }
      }
      if (!isHandled && !this._beginFastEditing(originalEvent)) {
        this._isNeedFocus = false;
        this._isNeedScroll = false;
        needStopPropagation = false;
      }
      if (needStopPropagation) {
        originalEvent.stopPropagation();
      }
    }
  }
  _processOnKeyDown(eventArgs) {
    var {
      originalEvent
    } = eventArgs;
    var args = {
      handled: false,
      event: originalEvent
    };
    this.executeAction("onKeyDown", args);
    eventArgs.ctrl = originalEvent.ctrlKey;
    eventArgs.alt = originalEvent.altKey;
    eventArgs.shift = originalEvent.shiftKey;
    return !!args.handled;
  }
  _closeEditCell() {
    var d = Deferred();
    setTimeout(() => {
      this._editingController.closeEditCell().always(d.resolve);
    });
    return d;
  }
  _leftRightKeysHandler(eventArgs, isEditing) {
    var rowIndex = this.getVisibleRowIndex();
    var $event = eventArgs.originalEvent;
    var $row = this._focusedView && this._focusedView.getRow(rowIndex);
    var directionCode = this._getDirectionCodeByKey(eventArgs.keyName);
    var isEditingNavigationMode = this._isFastEditingStarted();
    var allowNavigate = (!isEditing || isEditingNavigationMode) && isDataRow($row);
    if (allowNavigate) {
      this.setCellFocusType();
      isEditingNavigationMode && this._closeEditCell();
      if (this._isVirtualColumnRender()) {
        this._processVirtualHorizontalPosition(directionCode);
      }
      var $cell = this._getNextCell(directionCode);
      if (isElementDefined($cell)) {
        this._arrowKeysHandlerFocusCell($event, $cell, directionCode);
      }
      $event && $event.preventDefault();
    }
  }
  _upDownKeysHandler(eventArgs, isEditing) {
    var _a, _b;
    var visibleRowIndex = this.getVisibleRowIndex();
    var $row = this._focusedView && this._focusedView.getRow(visibleRowIndex);
    var $event = eventArgs.originalEvent;
    var isUpArrow = "upArrow" === eventArgs.keyName;
    var dataSource = this._dataController.dataSource();
    var isRowEditingInCurrentRow = null === (_b = null === (_a = this._editingController) || void 0 === _a ? void 0 : _a.isEditRowByIndex) || void 0 === _b ? void 0 : _b.call(_a, visibleRowIndex);
    var isEditingNavigationMode = this._isFastEditingStarted();
    var allowNavigate = (!isRowEditingInCurrentRow || !isEditing || isEditingNavigationMode) && $row && !isDetailRow($row);
    if (allowNavigate) {
      isEditingNavigationMode && this._closeEditCell();
      if (!this._navigateNextCell($event, eventArgs.keyName)) {
        if (this._isVirtualRowRender() && isUpArrow && dataSource && !dataSource.isLoading()) {
          var rowHeight = getOuterHeight($row);
          var rowIndex = this._focusedCellPosition.rowIndex - 1;
          this._scrollBy(0, -rowHeight, rowIndex, $event);
        }
      }
      $event && $event.preventDefault();
    }
  }
  _pageUpDownKeyHandler(eventArgs) {
    var pageIndex = this._dataController.pageIndex();
    var pageCount = this._dataController.pageCount();
    var pagingEnabled = this.option("paging.enabled");
    var isPageUp = "pageUp" === eventArgs.keyName;
    var pageStep = isPageUp ? -1 : 1;
    var scrollable = this._rowsView.getScrollable();
    if (pagingEnabled && !this._isVirtualScrolling()) {
      if ((isPageUp ? pageIndex > 0 : pageIndex < pageCount - 1) && !this._isVirtualScrolling()) {
        this._dataController.pageIndex(pageIndex + pageStep);
        eventArgs.originalEvent.preventDefault();
      }
    } else if (scrollable && getHeight(scrollable.container()) < getHeight(scrollable.$content())) {
      this._scrollBy(0, getHeight(scrollable.container()) * pageStep);
      eventArgs.originalEvent.preventDefault();
    }
  }
  _spaceKeyHandler(eventArgs, isEditing) {
    var rowIndex = this.getVisibleRowIndex();
    var $target = renderer_default(eventArgs.originalEvent && eventArgs.originalEvent.target);
    if (this.option("selection") && "none" !== this.option("selection").mode && !isEditing) {
      var isFocusedRowElement = "row" === this._getElementType($target) && this.isRowFocusType() && isDataRow($target);
      var isFocusedSelectionCell = $target.hasClass(COMMAND_SELECT_CLASS2);
      if (isFocusedSelectionCell && "onClick" === this.option("selection.showCheckBoxesMode")) {
        this._selectionController.startSelectionWithCheckboxes();
      }
      if (isFocusedRowElement || $target.parent().hasClass(DATA_ROW_CLASS4) || $target.hasClass(this.addWidgetPrefix(ROWS_VIEW_CLASS2))) {
        this._selectionController.changeItemSelection(rowIndex, {
          shift: eventArgs.shift,
          control: eventArgs.ctrl
        });
        eventArgs.originalEvent.preventDefault();
        return true;
      }
      return false;
    }
    return this._beginFastEditing(eventArgs.originalEvent);
  }
  _ctrlAKeyHandler(eventArgs, isEditing) {
    if (!isEditing && !eventArgs.alt && "multiple" === this.option("selection.mode") && this.option("selection.allowSelectAll")) {
      this._selectionController.selectAll();
      eventArgs.originalEvent.preventDefault();
    }
  }
  _toggleInertAttr(value2) {
  }
  _tabKeyHandler(eventArgs, isEditing) {
    var editingOptions = this.option("editing");
    var direction = eventArgs.shift ? "previous" : "next";
    var isCellPositionDefined = isDefined(this._focusedCellPosition) && !isEmptyObject(this._focusedCellPosition);
    var isFirstValidCell = eventArgs.shift && this._isFirstValidCell(this._focusedCellPosition);
    var isLastValidCell = !eventArgs.shift && this._isLastValidCell(this._focusedCellPosition);
    var isOriginalHandlerRequired = !isCellPositionDefined || isFirstValidCell || isLastValidCell;
    var eventTarget = eventArgs.originalEvent.target;
    var focusedViewElement = this._focusedView && this._focusedView.element();
    if (this._handleTabKeyOnMasterDetailCell(eventTarget, direction)) {
      return;
    }
    renderer_default(focusedViewElement).addClass(FOCUS_STATE_CLASS2);
    if (editingOptions && eventTarget && !isOriginalHandlerRequired) {
      if (renderer_default(eventTarget).hasClass(this.addWidgetPrefix(ROWS_VIEW_CLASS2))) {
        this._resetFocusedCell();
      }
      if (this._isVirtualColumnRender()) {
        this._processVirtualHorizontalPosition(direction);
      }
      if (isEditing) {
        if (!this._editingCellTabHandler(eventArgs, direction)) {
          return;
        }
      } else if (this._targetCellTabHandler(eventArgs, direction)) {
        isOriginalHandlerRequired = true;
      }
    }
    if (isOriginalHandlerRequired) {
      var $cell = this._getFocusedCell();
      var isCommandCell = $cell.is(COMMAND_CELL_SELECTOR);
      if (isLastValidCell && !isCommandCell) {
        this._toggleInertAttr(true);
      }
      this._editorFactory.loseFocus();
      if (this._editingController.isEditing() && !this._isRowEditMode()) {
        this._resetFocusedCell(true);
        this._resetFocusedView();
        this._closeEditCell();
      }
    } else {
      eventArgs.originalEvent.preventDefault();
    }
  }
  _getMaxHorizontalOffset() {
    var scrollable = this.component.getScrollable();
    return scrollable ? scrollable.scrollWidth() - getWidth(this._rowsView.element()) : 0;
  }
  _isColumnRendered(columnIndex) {
    var allVisibleColumns = this._columnsController.getVisibleColumns(null, true);
    var renderedVisibleColumns = this._columnsController.getVisibleColumns();
    var column = allVisibleColumns[columnIndex];
    var result2 = false;
    if (column) {
      result2 = renderedVisibleColumns.indexOf(column) >= 0;
    }
    return result2;
  }
  _isFixedColumn(columnIndex) {
    var allVisibleColumns = this._columnsController.getVisibleColumns(null, true);
    var column = allVisibleColumns[columnIndex];
    return !!column && !!column.fixed;
  }
  _isColumnVirtual(columnIndex) {
    var localColumnIndex = columnIndex - this._columnsController.getColumnIndexOffset();
    var visibleColumns = this._columnsController.getVisibleColumns();
    var column = visibleColumns[localColumnIndex];
    return !!column && "virtual" === column.command;
  }
  _processVirtualHorizontalPosition(direction) {
    var scrollable = this.component.getScrollable();
    var columnIndex = this.getColumnIndex();
    var nextColumnIndex;
    var horizontalScrollPosition = 0;
    var needToScroll = false;
    switch (direction) {
      case "next":
      case "nextInRow":
        var columnsCount = this._getVisibleColumnCount();
        nextColumnIndex = columnIndex + 1;
        horizontalScrollPosition = this.option("rtlEnabled") ? this._getMaxHorizontalOffset() : 0;
        if ("next" === direction) {
          needToScroll = columnsCount === nextColumnIndex || this._isFixedColumn(columnIndex) && !this._isColumnRendered(nextColumnIndex);
        } else {
          needToScroll = columnsCount > nextColumnIndex && this._isFixedColumn(columnIndex) && !this._isColumnRendered(nextColumnIndex);
        }
        break;
      case "previous":
      case "previousInRow":
        nextColumnIndex = columnIndex - 1;
        horizontalScrollPosition = this.option("rtlEnabled") ? 0 : this._getMaxHorizontalOffset();
        if ("previous" === direction) {
          var columnIndexOffset = this._columnsController.getColumnIndexOffset();
          var leftEdgePosition = nextColumnIndex < 0 && 0 === columnIndexOffset;
          needToScroll = leftEdgePosition || this._isFixedColumn(columnIndex) && !this._isColumnRendered(nextColumnIndex);
        } else {
          needToScroll = nextColumnIndex >= 0 && this._isFixedColumn(columnIndex) && !this._isColumnRendered(nextColumnIndex);
        }
    }
    if (needToScroll) {
      scrollable.scrollTo({
        left: horizontalScrollPosition
      });
    } else if (isDefined(nextColumnIndex) && isDefined(direction) && this._isColumnVirtual(nextColumnIndex)) {
      horizontalScrollPosition = this._getHorizontalScrollPositionOffset(direction);
      0 !== horizontalScrollPosition && scrollable.scrollBy({
        left: horizontalScrollPosition,
        top: 0
      });
    }
  }
  _getHorizontalScrollPositionOffset(direction) {
    var positionOffset = 0;
    var $currentCell = this._getCell(this._focusedCellPosition);
    var currentCellWidth = $currentCell && getOuterWidth($currentCell);
    if (currentCellWidth > 0) {
      var rtlMultiplier = this.option("rtlEnabled") ? -1 : 1;
      positionOffset = "nextInRow" === direction || "next" === direction ? currentCellWidth * rtlMultiplier : currentCellWidth * rtlMultiplier * -1;
    }
    return positionOffset;
  }
  _editingCellTabHandler(eventArgs, direction) {
    var eventTarget = eventArgs.originalEvent.target;
    var $cell = this._getCellElementFromTarget(eventTarget);
    var isEditingAllowed;
    var $event = eventArgs.originalEvent;
    var elementType = this._getElementType(eventTarget);
    if ($cell.is(COMMAND_CELL_SELECTOR)) {
      return !this._targetCellTabHandler(eventArgs, direction);
    }
    this._updateFocusedCellPosition($cell);
    var nextCellInfo = this._getNextCellByTabKey($event, direction, elementType);
    $cell = nextCellInfo.$cell;
    if (!$cell || this._handleTabKeyOnMasterDetailCell($cell, direction)) {
      return false;
    }
    var column = this._getColumnByCellElement($cell);
    var $row = $cell.parent();
    var rowIndex = this._getRowIndex($row);
    var row = this._dataController.items()[rowIndex];
    var editingController = this._editingController;
    if (column && column.allowEditing) {
      var _isDataRow = !row || "data" === row.rowType;
      isEditingAllowed = editingController.allowUpdating({
        row
      }) ? _isDataRow : row && row.isNewRow;
    }
    if (!isEditingAllowed) {
      this._closeEditCell();
    }
    if (this._focusCell($cell, !nextCellInfo.isHighlighted)) {
      if (!this._isRowEditMode() && isEditingAllowed) {
        this._editFocusedCell();
      } else {
        this._focusInteractiveElement($cell, eventArgs.shift);
      }
    }
    return true;
  }
  _targetCellTabHandler(eventArgs, direction) {
    var $event = eventArgs.originalEvent;
    var eventTarget = $event.target;
    var elementType = this._getElementType(eventTarget);
    var $cell = this._getCellElementFromTarget(eventTarget);
    var $lastInteractiveElement = "cell" === elementType && this._getInteractiveElement($cell, !eventArgs.shift);
    var isOriginalHandlerRequired = false;
    if (!isEditorCell(this, $cell) && (null === $lastInteractiveElement || void 0 === $lastInteractiveElement ? void 0 : $lastInteractiveElement.length) && eventTarget !== $lastInteractiveElement.get(0)) {
      isOriginalHandlerRequired = true;
    } else {
      if (void 0 === this._focusedCellPosition.rowIndex && renderer_default(eventTarget).hasClass(ROW_CLASS4)) {
        this._updateFocusedCellPosition($cell);
      }
      elementType = this._getElementType(eventTarget);
      if (this.isRowFocusType()) {
        this.setCellFocusType();
        if ("row" === elementType && isDataRow(renderer_default(eventTarget))) {
          eventTarget = this.getFirstValidCellInRow(renderer_default(eventTarget));
          elementType = this._getElementType(eventTarget);
        }
      }
      var nextCellInfo = this._getNextCellByTabKey($event, direction, elementType);
      $cell = nextCellInfo.$cell;
      if (!$cell) {
        return false;
      }
      $cell = this._checkNewLineTransition($event, $cell);
      if (!$cell) {
        return false;
      }
      this._focusCell($cell, !nextCellInfo.isHighlighted);
      if (!isEditorCell(this, $cell)) {
        this._focusInteractiveElement($cell, eventArgs.shift);
      }
    }
    return isOriginalHandlerRequired;
  }
  _getNextCellByTabKey($event, direction, elementType) {
    var $cell = this._getNextCell(direction, elementType);
    var args = $cell && this._fireFocusedCellChanging($event, $cell, true);
    if (!args || args.cancel) {
      return {};
    }
    if (args.$newCellElement) {
      $cell = args.$newCellElement;
    }
    return {
      $cell,
      isHighlighted: args.isHighlighted
    };
  }
  _checkNewLineTransition($event, $cell) {
    var rowIndex = this.getVisibleRowIndex();
    var $row = $cell.parent();
    if (rowIndex !== this._getRowIndex($row)) {
      var cellPosition = this._getCellPosition($cell);
      var args = this._fireFocusedRowChanging($event, $row);
      if (args.cancel) {
        return;
      }
      if (args.rowIndexChanged && cellPosition) {
        this.setFocusedColumnIndex(cellPosition.columnIndex);
        $cell = this._getFocusedCell();
      }
    }
    return $cell;
  }
  _enterKeyHandler(eventArgs, isEditing) {
    var _a;
    var rowIndex = this.getVisibleRowIndex();
    var key = this._dataController.getKeyByRowIndex(rowIndex);
    var $row = null === (_a = this._focusedView) || void 0 === _a ? void 0 : _a.getRow(rowIndex);
    var $cell = this._getFocusedCell();
    var needExpandGroupRow = this.option("grouping.allowCollapsing") && isGroupRow2($row);
    var needExpandMasterDetailRow = this.option("masterDetail.enabled") && (null === $cell || void 0 === $cell ? void 0 : $cell.hasClass(COMMAND_EXPAND_CLASS2));
    var needExpandAdaptiveRow = null === $cell || void 0 === $cell ? void 0 : $cell.hasClass(ADAPTIVE_COLUMN_NAME_CLASS);
    if (needExpandGroupRow || needExpandMasterDetailRow) {
      var item = this._dataController.items()[rowIndex];
      var isNotContinuation = (null === item || void 0 === item ? void 0 : item.data) && !item.data.isContinuation;
      if (isDefined(key) && isNotContinuation) {
        this._dataController.changeRowExpand(key);
      }
    } else if (needExpandAdaptiveRow) {
      this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(key);
      this._updateFocusedCellPosition($cell);
    } else if (!(null === $cell || void 0 === $cell ? void 0 : $cell.hasClass(COMMAND_EDIT_CLASS2))) {
      this._processEnterKeyForDataCell(eventArgs, isEditing);
    }
  }
  _processEnterKeyForDataCell(eventArgs, isEditing) {
    var direction = this._getEnterKeyDirection(eventArgs);
    var allowEditingOnEnterKey = this._allowEditingOnEnterKey();
    if (isEditing || !allowEditingOnEnterKey && direction) {
      this._handleEnterKeyEditingCell(eventArgs.originalEvent).done(() => {
        if ("next" === direction || "previous" === direction) {
          this._targetCellTabHandler(eventArgs, direction);
        } else if ("upArrow" === direction || "downArrow" === direction) {
          this._navigateNextCell(eventArgs.originalEvent, direction);
        }
      });
    } else if (allowEditingOnEnterKey) {
      this._startEditing(eventArgs);
    }
  }
  _getEnterKeyDirection(eventArgs) {
    var enterKeyDirection = this.option("keyboardNavigation.enterKeyDirection");
    var isShift = eventArgs.shift;
    if ("column" === enterKeyDirection) {
      return isShift ? "upArrow" : "downArrow";
    }
    if ("row" === enterKeyDirection) {
      return isShift ? "previous" : "next";
    }
    return;
  }
  _handleEnterKeyEditingCell(event) {
    var d = Deferred();
    var {
      target
    } = event;
    var $cell = this._getCellElementFromTarget(target);
    var isRowEditMode = this._isRowEditMode();
    this._updateFocusedCellPosition($cell);
    if (isRowEditMode) {
      this._focusEditFormCell($cell);
      setTimeout(this._editingController.saveEditData.bind(this._editingController));
      d.resolve();
    } else {
      events_engine_default.trigger(renderer_default(target), "change");
      this._closeEditCell().always(d.resolve);
      event.preventDefault();
    }
    return d;
  }
  _escapeKeyHandler(eventArgs, isEditing) {
    var $cell = this._getCellElementFromTarget(eventArgs.originalEvent.target);
    if (isEditing) {
      this._updateFocusedCellPosition($cell);
      if (!this._isRowEditMode()) {
        if ("cell" === this._editingController.getEditMode()) {
          this._editingController.cancelEditData();
        } else {
          this._closeEditCell();
        }
      } else {
        this._focusEditFormCell($cell);
        this._editingController.cancelEditData();
        if (0 === this._dataController.items().length) {
          this._resetFocusedCell();
          this._editorFactory.loseFocus();
        }
      }
      eventArgs.originalEvent.preventDefault();
      return true;
    }
    return false;
  }
  _ctrlFKeyHandler(eventArgs) {
    if (this.option("searchPanel.visible")) {
      var searchTextEditor = this._headerPanel.getSearchTextEditor();
      if (searchTextEditor) {
        searchTextEditor.focus();
        eventArgs.originalEvent.preventDefault();
      }
    }
  }
  _f2KeyHandler() {
    var isEditing = this._editingController.isEditing();
    var rowIndex = this.getVisibleRowIndex();
    var $row = this._focusedView && this._focusedView.getRow(rowIndex);
    if (!isEditing && isDataRow($row)) {
      this._startEditing();
    }
  }
  _navigateNextCell($event, keyCode) {
    var $cell = this._getNextCell(keyCode);
    var directionCode = this._getDirectionCodeByKey(keyCode);
    var isCellValid = $cell && this._isCellValid($cell);
    var result2 = isCellValid ? this._arrowKeysHandlerFocusCell($event, $cell, directionCode) : false;
    return result2;
  }
  _arrowKeysHandlerFocusCell($event, $nextCell, direction) {
    var isVerticalDirection = "prevRow" === direction || "nextRow" === direction;
    var args = this._fireFocusChangingEvents($event, $nextCell, isVerticalDirection, true);
    $nextCell = args.$newCellElement;
    if (!args.cancel && this._isCellValid($nextCell)) {
      this._focus($nextCell, !args.isHighlighted);
      return true;
    }
    return false;
  }
  _beginFastEditing(originalEvent, isDeleting) {
    if (!this._isFastEditingAllowed() || originalEvent.altKey || originalEvent.ctrlKey || this._editingController.isEditing()) {
      return false;
    }
    if (isDeleting) {
      this._startEditing(originalEvent, FAST_EDITING_DELETE_KEY);
    } else {
      var {
        key
      } = originalEvent;
      var keyCode = originalEvent.keyCode || originalEvent.which;
      var fastEditingKey = key || keyCode && String.fromCharCode(keyCode);
      if (fastEditingKey && (1 === fastEditingKey.length || fastEditingKey === FAST_EDITING_DELETE_KEY)) {
        this._startEditing(originalEvent, fastEditingKey);
      }
    }
    return true;
  }
  _pointerEventHandler(e) {
    var _a;
    var event = e.event || e;
    var $target = renderer_default(event.currentTarget);
    var focusedViewElement = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.element();
    var $parent = $target.parent();
    var isInteractiveElement = renderer_default(event.target).is(INTERACTIVE_ELEMENTS_SELECTOR);
    var isRevertButton = !!renderer_default(event.target).closest(".".concat(REVERT_BUTTON_CLASS2)).length;
    var isExpandCommandCell = $target.hasClass(COMMAND_EXPAND_CLASS2);
    if (!this._isEventInCurrentGrid(event)) {
      return;
    }
    if (!isRevertButton && (this._isCellValid($target, !isInteractiveElement) || isExpandCommandCell)) {
      $target = this._isInsideEditForm($target) ? renderer_default(event.target) : $target;
      this._focusView();
      renderer_default(focusedViewElement).removeClass(FOCUS_STATE_CLASS2);
      if ($parent.hasClass(FREESPACE_ROW_CLASS)) {
        this._updateFocusedCellPosition($target);
        this._applyTabIndexToElement(this._focusedView.element());
        this._focusedView.focus(true);
      } else if (!this._isMasterDetailCell($target)) {
        this._clickTargetCellHandler(event, $target);
      } else {
        this._updateFocusedCellPosition($target);
      }
    } else if ($target.is("td")) {
      this._resetFocusedCell();
    }
  }
  _clickTargetCellHandler(event, $cell) {
    var column = this._getColumnByCellElement($cell);
    var isCellEditMode = this._isCellEditMode();
    this.setCellFocusType();
    var args = this._fireFocusChangingEvents(event, $cell, true);
    $cell = args.$newCellElement;
    if (!args.cancel) {
      if (args.resetFocusedRow) {
        this._focusController._resetFocusedRow();
        return;
      }
      if (args.rowIndexChanged) {
        $cell = this._getFocusedCell();
      }
      if (!args.isHighlighted && !isCellEditMode) {
        this.setRowFocusType();
      }
      this._updateFocusedCellPosition($cell);
      if (this._allowRowUpdating() && isCellEditMode && column && column.allowEditing) {
        this._isNeedFocus = false;
        this._isHiddenFocus = false;
      } else {
        $cell = this._getFocusedCell();
        var $target = event && renderer_default(event.target).closest("".concat(NON_FOCUSABLE_ELEMENTS_SELECTOR, ", td"));
        var skipFocusEvent = $target && $target.not($cell).is(NON_FOCUSABLE_ELEMENTS_SELECTOR);
        var isEditor = !!column && !column.command && $cell.hasClass(EDITOR_CELL_CLASS2);
        var isDisabled = !isEditor && (!args.isHighlighted || skipFocusEvent);
        this._focus($cell, isDisabled, skipFocusEvent);
      }
    } else {
      this.setRowFocusType();
      this.setFocusedRowIndex(args.prevRowIndex);
      if (this._editingController.isEditing() && isCellEditMode) {
        this._closeEditCell();
      }
    }
  }
  _allowRowUpdating() {
    var rowIndex = this.getVisibleRowIndex();
    var row = this._dataController.items()[rowIndex];
    return this._editingController.allowUpdating({
      row
    }, "click");
  }
  focus(element) {
    var activeElementSelector;
    var focusedRowEnabled = this.option("focusedRowEnabled");
    var isHighlighted = this._isCellElement(renderer_default(element));
    if (!element) {
      activeElementSelector = ".dx-datagrid-rowsview .dx-row[tabindex]";
      if (!focusedRowEnabled) {
        activeElementSelector += ", .dx-datagrid-rowsview .dx-row > td[tabindex]";
      }
      element = this.component.$element().find(activeElementSelector).first();
    }
    element && this._focusElement(renderer_default(element), isHighlighted);
  }
  getFocusedView() {
    return this._focusedView;
  }
  setupFocusedView() {
    if (this.isKeyboardEnabled() && !isDefined(this._focusedView)) {
      this._focusView();
    }
  }
  _focusElement($element, isHighlighted) {
    var rowsViewElement = renderer_default(this._getRowsViewElement());
    var $focusedView = $element.closest(rowsViewElement);
    var isRowFocusType = this.isRowFocusType();
    var args = {};
    if (!$focusedView.length || this._isCellElement($element) && !this._isCellValid($element)) {
      return;
    }
    this._focusView();
    this._isNeedFocus = true;
    this._isNeedScroll = true;
    if (this._isCellElement($element) || isGroupRow2($element)) {
      this.setCellFocusType();
      args = this._fireFocusChangingEvents(null, $element, true, isHighlighted);
      $element = args.$newCellElement;
      if (isRowFocusType && !args.isHighlighted) {
        this.setRowFocusType();
      }
    }
    if (!args.cancel) {
      this._focus($element, !args.isHighlighted);
      this._focusInteractiveElement($element);
    }
  }
  _getFocusedViewByElement($element) {
    var view = this.getFocusedView();
    var $view = view && renderer_default(view.element());
    return $element && 0 !== $element.closest($view).length;
  }
  _focusView() {
    this._focusedView = this._rowsView;
  }
  _resetFocusedView() {
    this.setRowFocusType();
    this._focusedView = null;
  }
  _focusInteractiveElement($cell, isLast) {
    if (!$cell) {
      return;
    }
    var $focusedElement = this._getInteractiveElement($cell, isLast);
    m_utils_default.focusAndSelectElement(this, $focusedElement);
  }
  _focus($cell, disableFocus, skipFocusEvent) {
    var $row = $cell && !$cell.hasClass(ROW_CLASS4) ? $cell.closest(".".concat(ROW_CLASS4)) : $cell;
    if ($row && isNotFocusedRow($row)) {
      return;
    }
    var focusedView = this._focusedView;
    var $focusViewElement = focusedView && focusedView.element();
    var $focusElement;
    this._isHiddenFocus = disableFocus;
    var isRowFocus = isGroupRow2($row) || isGroupFooterRow($row) || this.isRowFocusType();
    if (isRowFocus) {
      $focusElement = $row;
      if (focusedView) {
        this.setFocusedRowIndex(this._getRowIndex($row));
      }
    } else if (this._isCellElement($cell)) {
      $focusElement = $cell;
      this._updateFocusedCellPosition($cell);
    }
    if ($focusElement) {
      if ($focusViewElement) {
        $focusViewElement.find(".dx-row[tabindex], .dx-row > td[tabindex]").not($focusElement).removeClass(CELL_FOCUS_DISABLED_CLASS6).removeClass(FOCUSED_CLASS2).removeAttr("tabindex");
      }
      events_engine_default.one($focusElement, "blur", (e) => {
        if (e.relatedTarget) {
          $focusElement.removeClass(CELL_FOCUS_DISABLED_CLASS6).removeClass(FOCUSED_CLASS2);
        }
      });
      if (!skipFocusEvent) {
        this._applyTabIndexToElement($focusElement);
        events_engine_default.trigger($focusElement, "focus");
      }
      if (disableFocus) {
        $focusElement.addClass(CELL_FOCUS_DISABLED_CLASS6);
        if (isRowFocus) {
          $cell.addClass(CELL_FOCUS_DISABLED_CLASS6);
        }
      } else {
        this._editorFactory.focus($focusElement);
      }
    }
  }
  _updateFocus(isRenderView) {
    this._updateFocusTimeout = setTimeout(() => {
      if (this._needFocusEditingCell()) {
        this._editingController._focusEditingCell();
        return;
      }
      var $cell = this._getFocusedCell();
      var isEditing = this._editingController.isEditing();
      if (!this._isMasterDetailCell($cell) || this._isRowEditMode()) {
        if (this._hasSkipRow($cell.parent())) {
          var direction = this._focusedCellPosition && this._focusedCellPosition.rowIndex > 0 ? "upArrow" : "downArrow";
          $cell = this._getNextCell(direction);
        }
        if (isElementDefined($cell)) {
          if ($cell.is("td") || $cell.hasClass(this.addWidgetPrefix(EDIT_FORM_ITEM_CLASS2))) {
            var isCommandCell = $cell.is(COMMAND_CELL_SELECTOR);
            var $focusedElementInsideCell = $cell.find(":focus");
            var isFocusedElementDefined = isElementDefined($focusedElementInsideCell);
            var column = this._getColumnByCellElement($cell);
            if ((isRenderView || !isCommandCell) && this._editorFactory.focus()) {
              if (isCommandCell && isFocusedElementDefined) {
                m_utils_default.focusAndSelectElement(this, $focusedElementInsideCell);
                return;
              }
              !isFocusedElementDefined && this._focus($cell);
            } else if (!isFocusedElementDefined && (this._isNeedFocus || this._isHiddenFocus)) {
              this._focus($cell, this._isHiddenFocus);
            }
            if (isEditing && !(null === column || void 0 === column ? void 0 : column.showEditorAlways)) {
              this._focusInteractiveElement.bind(this)($cell);
            }
          } else {
            events_engine_default.trigger($cell, "focus");
          }
        }
      }
    });
  }
  _getColumnByCellElement($cell) {
    var cellIndex = this._rowsView.getCellIndex($cell);
    var columnIndex = cellIndex + this._columnsController.getColumnIndexOffset();
    return this._columnsController.getVisibleColumns(null, true)[columnIndex];
  }
  _needFocusEditingCell() {
    var isCellEditMode = this._editingController.getEditMode() === EDIT_MODE_CELL;
    var isBatchEditMode = this._editingController.getEditMode() === EDIT_MODE_BATCH;
    var cellEditModeHasChanges = isCellEditMode && this._editingController.hasChanges();
    var isNewRowBatchEditMode = isBatchEditMode && this._editingController.isNewRowInEditMode();
    var $cell = this._getFocusedCell();
    return (0 === $cell.children().length || $cell.find(FOCUSABLE_ELEMENT_SELECTOR).length > 0) && (cellEditModeHasChanges || isNewRowBatchEditMode);
  }
  _getFocusedCell() {
    return renderer_default(this._getCell(this._focusedCellPosition));
  }
  _updateFocusedCellPositionByTarget(target) {
    var _a;
    var elementType = this._getElementType(target);
    if ("row" === elementType && isDefined(null === (_a = this._focusedCellPosition) || void 0 === _a ? void 0 : _a.columnIndex)) {
      var $row = renderer_default(target);
      this._focusedView && isGroupRow2($row) && this.setFocusedRowIndex(this._getRowIndex($row));
    } else {
      this._updateFocusedCellPosition(this._getCellElementFromTarget(target));
    }
  }
  _updateFocusedCellPosition($cell, direction) {
    var position2 = this._getCellPosition($cell, direction);
    if (position2) {
      if (!$cell.length || position2.rowIndex >= 0 && position2.columnIndex >= 0) {
        this.setFocusedCellPosition(position2.rowIndex, position2.columnIndex);
      }
    }
    return position2;
  }
  _getFocusedColumnIndexOffset(columnIndex) {
    var offset = 0;
    var column = this._columnsController.getVisibleColumns()[columnIndex];
    if (column && column.fixed) {
      offset = this._getFixedColumnIndexOffset(column);
    } else if (columnIndex >= 0) {
      offset = this._columnsController.getColumnIndexOffset();
    }
    return offset;
  }
  _getFixedColumnIndexOffset(column) {
    var offset = isFixedColumnIndexOffsetRequired(this, column) ? this._getVisibleColumnCount() - this._columnsController.getVisibleColumns().length : 0;
    return offset;
  }
  _getCellPosition($cell, direction) {
    var columnIndex;
    var $row = isElementDefined($cell) && $cell.closest("tr");
    if (isElementDefined($row)) {
      var rowIndex = this._getRowIndex($row);
      columnIndex = this._rowsView.getCellIndex($cell, rowIndex);
      columnIndex += this._getFocusedColumnIndexOffset(columnIndex);
      if (direction) {
        columnIndex = "previous" === direction ? columnIndex - 1 : columnIndex + 1;
        columnIndex = this._applyColumnIndexBoundaries(columnIndex);
      }
      return {
        rowIndex,
        columnIndex
      };
    }
    return;
  }
  _focusCell($cell, isDisabled) {
    if (this._isCellValid($cell)) {
      this._focus($cell, isDisabled);
      return true;
    }
    return;
  }
  _focusEditFormCell($cell) {
    if ($cell.hasClass(MASTER_DETAIL_CELL_CLASS2)) {
      this._editorFactory.focus($cell, true);
    }
  }
  _resetFocusedCell(preventScroll) {
    var _a;
    var $cell = this._getFocusedCell();
    isElementDefined($cell) && $cell.removeAttr("tabindex");
    this._isNeedFocus = false;
    this._isNeedScroll = false;
    this._focusedCellPosition = {};
    clearTimeout(this._updateFocusTimeout);
    null === (_a = this._focusedView) || void 0 === _a ? void 0 : _a.renderFocusState({
      preventScroll
    });
  }
  restoreFocusableElement(rowIndex, $event) {
    var args;
    var $rowElement;
    var isUpArrow = isDefined(rowIndex);
    var $rowsViewElement = this._rowsView.element();
    var {
      columnIndex
    } = this._focusedCellPosition;
    var rowIndexOffset = this._dataController.getRowIndexOffset();
    rowIndex = isUpArrow ? rowIndex : this._rowsView.getTopVisibleItemIndex() + rowIndexOffset;
    if (!isUpArrow) {
      this._editorFactory.loseFocus();
      this._applyTabIndexToElement($rowsViewElement);
      events_engine_default.trigger($rowsViewElement, "focus");
    } else {
      $rowElement = this._rowsView.getRow(rowIndex - rowIndexOffset);
      args = this._fireFocusedRowChanging($event, $rowElement);
      if (!args.cancel && args.rowIndexChanged) {
        rowIndex = args.newRowIndex;
      }
    }
    if (!isUpArrow || !args.cancel) {
      this.setFocusedCellPosition(rowIndex, columnIndex);
    }
    isUpArrow && this._updateFocus();
  }
  _getNewPositionByCode(cellPosition, elementType, code) {
    var {
      columnIndex
    } = cellPosition;
    var {
      rowIndex
    } = cellPosition;
    var visibleColumnsCount;
    if (void 0 === cellPosition.rowIndex && "next" === code) {
      return {
        columnIndex: 0,
        rowIndex: 0
      };
    }
    switch (code) {
      case "nextInRow":
      case "next":
        visibleColumnsCount = this._getVisibleColumnCount();
        if (columnIndex < visibleColumnsCount - 1 && "row" !== elementType && this._hasValidCellAfterPosition({
          columnIndex,
          rowIndex
        })) {
          columnIndex++;
        } else if (!this._isLastRow(rowIndex) && "next" === code) {
          columnIndex = 0;
          rowIndex++;
        }
        break;
      case "previousInRow":
      case "previous":
        if (columnIndex > 0 && "row" !== elementType && this._hasValidCellBeforePosition({
          columnIndex,
          rowIndex
        })) {
          columnIndex--;
        } else if (rowIndex > 0 && "previous" === code) {
          rowIndex--;
          visibleColumnsCount = this._getVisibleColumnCount();
          columnIndex = visibleColumnsCount - 1;
        }
        break;
      case "upArrow":
        rowIndex = rowIndex > 0 ? rowIndex - 1 : rowIndex;
        break;
      case "downArrow":
        rowIndex = !this._isLastRow(rowIndex) ? rowIndex + 1 : rowIndex;
    }
    return {
      columnIndex,
      rowIndex
    };
  }
  setFocusedCellPosition(rowIndex, columnIndex) {
    this.setFocusedRowIndex(rowIndex);
    this.setFocusedColumnIndex(columnIndex);
  }
  setFocusedRowIndex(rowIndex) {
    if (!this._focusedCellPosition) {
      this._focusedCellPosition = {};
    }
    this._focusedCellPosition.rowIndex = rowIndex;
  }
  setFocusedColumnIndex(columnIndex) {
    if (!this._focusedCellPosition) {
      this._focusedCellPosition = {};
    }
    this._focusedCellPosition.columnIndex = columnIndex;
  }
  getRowIndex() {
    return this._focusedCellPosition ? this._focusedCellPosition.rowIndex : -1;
  }
  getColumnIndex() {
    return this._focusedCellPosition ? this._focusedCellPosition.columnIndex : -1;
  }
  getVisibleRowIndex() {
    var _a;
    var rowIndex = null === (_a = this._focusedCellPosition) || void 0 === _a ? void 0 : _a.rowIndex;
    return !isDefined(rowIndex) || rowIndex < 0 ? -1 : rowIndex - this._dataController.getRowIndexOffset();
  }
  getVisibleColumnIndex() {
    var _a;
    var columnIndex = null === (_a = this._focusedCellPosition) || void 0 === _a ? void 0 : _a.columnIndex;
    return !isDefined(columnIndex) ? -1 : columnIndex - this._columnsController.getColumnIndexOffset();
  }
  _applyColumnIndexBoundaries(columnIndex) {
    var visibleColumnsCount = this._getVisibleColumnCount();
    if (columnIndex < 0) {
      columnIndex = 0;
    } else if (columnIndex >= visibleColumnsCount) {
      columnIndex = visibleColumnsCount - 1;
    }
    return columnIndex;
  }
  _isCellByPositionValid(cellPosition) {
    var $cell = renderer_default(this._getCell(cellPosition));
    return this._isCellValid($cell);
  }
  _isLastRow(rowIndex) {
    var dataController2 = this._dataController;
    if (this._isVirtualRowRender()) {
      return rowIndex >= dataController2.getMaxRowIndex();
    }
    var lastVisibleIndex = Math.max(...dataController2.items().map((item, index) => false !== item.visible ? index : -1));
    return rowIndex === lastVisibleIndex;
  }
  _isFirstValidCell(cellPosition) {
    var isFirstValidCell = false;
    if (0 === cellPosition.rowIndex && cellPosition.columnIndex >= 0) {
      isFirstValidCell = isFirstValidCell || !this._hasValidCellBeforePosition(cellPosition);
    }
    return isFirstValidCell;
  }
  _hasValidCellBeforePosition(cellPosition) {
    var {
      columnIndex
    } = cellPosition;
    var hasValidCells = false;
    while (columnIndex > 0 && !hasValidCells) {
      var checkingPosition = {
        columnIndex: --columnIndex,
        rowIndex: cellPosition.rowIndex
      };
      hasValidCells = this._isCellByPositionValid(checkingPosition);
    }
    return hasValidCells;
  }
  _hasValidCellAfterPosition(cellPosition) {
    var {
      columnIndex
    } = cellPosition;
    var hasValidCells = false;
    var visibleColumnCount = this._getVisibleColumnCount();
    while (columnIndex < visibleColumnCount - 1 && !hasValidCells) {
      var checkingPosition = {
        columnIndex: ++columnIndex,
        rowIndex: cellPosition.rowIndex
      };
      hasValidCells = this._isCellByPositionValid(checkingPosition);
    }
    return hasValidCells;
  }
  _isLastValidCell(cellPosition) {
    var nextColumnIndex = cellPosition.columnIndex >= 0 ? cellPosition.columnIndex + 1 : 0;
    var {
      rowIndex
    } = cellPosition;
    var checkingPosition = {
      columnIndex: nextColumnIndex,
      rowIndex
    };
    var visibleRows = this._dataController.getVisibleRows();
    var row = visibleRows && visibleRows[rowIndex];
    var isLastRow = this._isLastRow(rowIndex);
    if (!isLastRow) {
      return false;
    }
    var isFullRowFocus = "group" === (null === row || void 0 === row ? void 0 : row.rowType) || "groupFooter" === (null === row || void 0 === row ? void 0 : row.rowType);
    if (isFullRowFocus && cellPosition.columnIndex > 0) {
      return true;
    }
    if (cellPosition.columnIndex === this._getVisibleColumnCount() - 1) {
      return true;
    }
    if (this._isCellByPositionValid(checkingPosition)) {
      return false;
    }
    return this._isLastValidCell(checkingPosition);
  }
  _isCellValid($cell, isClick) {
    if (isElementDefined($cell)) {
      var $row = $cell.parent();
      var columnIndex = this._rowsView.getCellIndex($cell) + this._columnsController.getColumnIndexOffset();
      var column = this._getColumnByCellElement($cell);
      var visibleColumnCount = this._getVisibleColumnCount();
      var editingController = this._editingController;
      var isMasterDetailRow = isDetailRow($row);
      var isShowWhenGrouped = column && column.showWhenGrouped;
      var isDataCell = column && !$cell.hasClass(COMMAND_EXPAND_CLASS2) && isDataRow($row);
      var isDragCell2 = GridCoreKeyboardNavigationDom.isDragCell($cell);
      if (isDragCell2) {
        return false;
      }
      if (this._isMasterDetailCell($cell)) {
        return true;
      }
      if (visibleColumnCount > columnIndex && (!isMasterDetailRow && column && (!isDefined(column.groupIndex) || isShowWhenGrouped && isDataCell) || parseInt($cell.attr("colspan"), 10) > 1)) {
        var rowItems = this._dataController.items();
        var visibleRowIndex = this._rowsView.getRowIndex($row);
        var row = rowItems[visibleRowIndex];
        var isCellEditing = editingController && this._isCellEditMode() && editingController.isEditing();
        var isRowEditingInCurrentRow = editingController && editingController.isEditRow(visibleRowIndex);
        var isEditing = isRowEditingInCurrentRow || isCellEditing;
        if (column.command) {
          if (this._isLegacyNavigation()) {
            return !isEditing && "expand" === column.command;
          }
          if (isCellEditing) {
            return false;
          }
          if (isRowEditingInCurrentRow) {
            return "select" !== column.command;
          }
          return !isEditing;
        }
        if (isCellEditing && row && "data" !== row.rowType) {
          return false;
        }
        return !isEditing || column.allowEditing || isClick;
      }
    }
  }
  getFirstValidCellInRow($row, columnIndex) {
    var $cells = $row.find("> td");
    var $cell;
    var $result;
    columnIndex = columnIndex || 0;
    for (var i = columnIndex; i < $cells.length; ++i) {
      $cell = $cells.eq(i);
      if (this._isCellValid($cell)) {
        $result = $cell;
        break;
      }
    }
    return $result;
  }
  _getNextCell(keyCode, elementType, cellPosition) {
    var focusedCellPosition = cellPosition || this._focusedCellPosition;
    var isRowFocusType = this.isRowFocusType();
    var includeCommandCells = isRowFocusType || ["next", "previous"].includes(keyCode);
    var $cell;
    var $row;
    if (this._focusedView && focusedCellPosition) {
      var newFocusedCellPosition = this._getNewPositionByCode(focusedCellPosition, elementType, keyCode);
      $cell = renderer_default(this._getCell(newFocusedCellPosition));
      var isLastCellOnDirection = "previous" === keyCode ? this._isFirstValidCell(newFocusedCellPosition) : this._isLastValidCell(newFocusedCellPosition);
      if (isElementDefined($cell) && !this._isCellValid($cell) && this._isCellInRow(newFocusedCellPosition, includeCommandCells) && !isLastCellOnDirection) {
        if (isRowFocusType) {
          $cell = this.getFirstValidCellInRow($cell.parent(), newFocusedCellPosition.columnIndex);
        } else {
          $cell = this._getNextCell(keyCode, "cell", newFocusedCellPosition);
        }
      }
      $row = isElementDefined($cell) && $cell.parent();
      if (this._hasSkipRow($row)) {
        var rowIndex = this._getRowIndex($row);
        if (!this._isLastRow(rowIndex)) {
          $cell = this._getNextCell(keyCode, "row", {
            columnIndex: focusedCellPosition.columnIndex,
            rowIndex
          });
        } else {
          return null;
        }
      }
      return isElementDefined($cell) ? $cell : null;
    }
    return null;
  }
  _startEditing(eventArgs, fastEditingKey) {
    var focusedCellPosition = this._focusedCellPosition;
    var visibleRowIndex = this.getVisibleRowIndex();
    var visibleColumnIndex = this.getVisibleColumnIndex();
    var row = this._dataController.items()[visibleRowIndex];
    var column = this._columnsController.getVisibleColumns()[visibleColumnIndex];
    if (this._isAllowEditing(row, column)) {
      if (this._isRowEditMode()) {
        this._editingController.editRow(visibleRowIndex);
      } else if (focusedCellPosition) {
        this._startEditCell(eventArgs, fastEditingKey);
      }
    }
  }
  _isAllowEditing(row, column) {
    return this._editingController.allowUpdating({
      row
    }) && column && column.allowEditing;
  }
  _editFocusedCell() {
    var rowIndex = this.getVisibleRowIndex();
    var colIndex = this.getVisibleColumnIndex();
    return this._editingController.editCell(rowIndex, colIndex);
  }
  _startEditCell(eventArgs, fastEditingKey) {
    this._fastEditingStarted = isDefined(fastEditingKey);
    var editResult = this._editFocusedCell();
    var isEditResultDeferred = isDeferred(editResult);
    var isFastEditingStarted = this._isFastEditingStarted();
    if (!isFastEditingStarted || !isEditResultDeferred && !editResult) {
      return;
    }
    var editorValue = isEditResultDeferred && fastEditingKey === FAST_EDITING_DELETE_KEY ? "" : fastEditingKey;
    var editResultDeferred = isEditResultDeferred ? editResult : Deferred().resolve();
    var waitTemplatesDeferred = this._rowsView.waitAsyncTemplates(true);
    when(editResultDeferred, waitTemplatesDeferred).done(() => {
      this._editingCellHandler(eventArgs, editorValue);
    });
  }
  _editingCellHandler(eventArgs, editorValue) {
    var _a, _b;
    var $input = this._getFocusedCell().find(INTERACTIVE_ELEMENTS_SELECTOR).eq(0);
    var $inputElement = $input.get(0);
    if (!$inputElement) {
      return;
    }
    var keyDownEvent = createEvent(eventArgs, {
      type: "keydown",
      target: $inputElement
    });
    var keyPressEvent = createEvent(eventArgs, {
      type: "keypress",
      target: $inputElement
    });
    var inputEvent = createEvent(eventArgs, {
      type: "input",
      target: $inputElement
    });
    if (inputEvent.originalEvent) {
      inputEvent.originalEvent = createEvent(inputEvent.originalEvent, {
        data: editorValue
      });
    }
    null === (_b = (_a = $inputElement).select) || void 0 === _b ? void 0 : _b.call(_a);
    events_engine_default.trigger($input, keyDownEvent);
    if (!keyDownEvent.isDefaultPrevented()) {
      events_engine_default.trigger($input, keyPressEvent);
      if (!keyPressEvent.isDefaultPrevented()) {
        var timeout = browser_default.mozilla ? 25 : 0;
        setTimeout(() => {
          var inputValue = this._getKeyPressInputValue($input, editorValue);
          $input.val(inputValue);
          var $widgetContainer = $input.closest(".".concat(WIDGET_CLASS5));
          events_engine_default.off($widgetContainer, "focusout");
          events_engine_default.one($widgetContainer, "focusout", () => {
            events_engine_default.trigger($input, "change");
          });
          events_engine_default.trigger($input, inputEvent);
        }, timeout);
      }
    }
  }
  _getKeyPressInputValue($input, editorValue) {
    var inputCurrentValue = $input.val();
    return "-" === editorValue && "-0" === inputCurrentValue ? "-0" : editorValue;
  }
  _fireFocusChangingEvents($event, $cell, fireRowEvent, isHighlighted) {
    var _a;
    var args = {};
    var cellPosition = null !== (_a = this._getCellPosition($cell)) && void 0 !== _a ? _a : {};
    if (this.isCellFocusType()) {
      args = this._fireFocusedCellChanging($event, $cell, isHighlighted);
      if (!args.cancel) {
        cellPosition.columnIndex = args.newColumnIndex;
        cellPosition.rowIndex = args.newRowIndex;
        isHighlighted = args.isHighlighted;
        $cell = renderer_default(this._getCell(cellPosition));
      }
    }
    if (!args.cancel && fireRowEvent && $cell) {
      args = this._fireFocusedRowChanging($event, $cell.parent());
      if (!args.cancel) {
        cellPosition.rowIndex = args.newRowIndex;
        args.isHighlighted = isHighlighted;
      }
    }
    args.$newCellElement = renderer_default(this._getCell(cellPosition));
    if (!args.$newCellElement.length) {
      args.$newCellElement = $cell;
    }
    return args;
  }
  _fireFocusedCellChanging($event, $cellElement, isHighlighted) {
    var prevColumnIndex = this.option("focusedColumnIndex");
    var prevRowIndex = this.option("focusedRowIndex");
    var cellPosition = this._getCellPosition($cellElement);
    var columnIndex = cellPosition ? cellPosition.columnIndex : -1;
    var rowIndex = cellPosition ? cellPosition.rowIndex : -1;
    var visibleRows = this._dataController.getVisibleRows();
    var visibleColumns = this._columnsController.getVisibleColumns();
    var args = {
      cellElement: $cellElement,
      prevColumnIndex,
      prevRowIndex,
      newColumnIndex: columnIndex,
      newRowIndex: rowIndex,
      rows: visibleRows,
      columns: visibleColumns,
      event: $event,
      isHighlighted: isHighlighted || false,
      cancel: false
    };
    this._canceledCellPosition = null;
    this.executeAction("onFocusedCellChanging", args);
    if (args.newColumnIndex !== columnIndex || args.newRowIndex !== rowIndex) {
      args.$newCellElement = renderer_default(this._getCell({
        columnIndex: args.newColumnIndex,
        rowIndex: args.newRowIndex
      }));
    }
    if (args.cancel) {
      this._canceledCellPosition = {
        rowIndex,
        columnIndex
      };
    }
    return args;
  }
  _fireFocusedCellChanged($cell) {
    var columnIndex = this._rowsView.getCellIndex($cell);
    var rowOptions = null === $cell || void 0 === $cell ? void 0 : $cell.parent().data("options");
    var focusedRowKey = null === rowOptions || void 0 === rowOptions ? void 0 : rowOptions.key;
    this._memoFireFocusedCellChanged(focusedRowKey, columnIndex);
  }
  _memoFireFocusedCellChanged(rowKey, columnIndex) {
    var $cell = this._getFocusedCell();
    var rowIndex = this._getRowIndex(null === $cell || void 0 === $cell ? void 0 : $cell.parent());
    var localRowIndex = Math.min(rowIndex - this._dataController.getRowIndexOffset(), this._dataController.items().length - 1);
    var isEditingCell2 = this._editingController.isEditCell(localRowIndex, columnIndex);
    if (isEditingCell2) {
      return;
    }
    var row = this._dataController.items()[localRowIndex];
    var column = this._columnsController.getVisibleColumns()[columnIndex];
    this.executeAction("onFocusedCellChanged", {
      cellElement: $cell ? getPublicElement($cell) : void 0,
      columnIndex,
      rowIndex,
      row,
      column
    });
  }
  _fireFocusedRowChanging(eventArgs, $newFocusedRow) {
    var newRowIndex = this._getRowIndex($newFocusedRow);
    var prevFocusedRowIndex = this.option("focusedRowIndex");
    var loadingOperationTypes = this._dataController.loadingOperationTypes();
    var args = {
      rowElement: $newFocusedRow,
      prevRowIndex: prevFocusedRowIndex,
      newRowIndex,
      event: eventArgs,
      rows: this._dataController.getVisibleRows(),
      cancel: false
    };
    var loadingOperations = loadingOperationTypes.sorting || loadingOperationTypes.grouping || loadingOperationTypes.filtering || loadingOperationTypes.paging;
    if (!this._dataController || this._dataController.isLoading() && loadingOperations) {
      args.cancel = true;
      return args;
    }
    if (this.option("focusedRowEnabled")) {
      this.executeAction("onFocusedRowChanging", args);
      if (!args.cancel && args.newRowIndex !== newRowIndex) {
        args.resetFocusedRow = args.newRowIndex < 0;
        if (!args.resetFocusedRow) {
          this.setFocusedRowIndex(args.newRowIndex);
        }
        args.rowIndexChanged = true;
      }
    }
    return args;
  }
  _fireFocusedRowChanged() {
    var _a;
    var focusedRowEnabled = this.option("focusedRowEnabled");
    var focusedRowKey = this.option("focusedRowKey");
    var focusedRowIndex = null === (_a = this._focusController) || void 0 === _a ? void 0 : _a.getFocusedRowIndexByKey(focusedRowKey);
    if (!focusedRowEnabled || isDefined(focusedRowKey) && focusedRowIndex < 0) {
      return;
    }
    this._memoFireFocusedRowChanged(focusedRowKey, focusedRowIndex);
  }
  _memoFireFocusedRowChanged(focusedRowKey, focusedRowIndex) {
    var localRowIndex = focusedRowIndex - this._dataController.getRowIndexOffset();
    this.executeAction("onFocusedRowChanged", {
      rowElement: focusedRowIndex < 0 ? void 0 : this._rowsView.getRowElement(localRowIndex),
      rowIndex: focusedRowIndex,
      row: focusedRowIndex < 0 ? void 0 : this._dataController.getVisibleRows()[localRowIndex]
    });
  }
  _isEventInCurrentGrid(event) {
    return m_utils_default.isElementInCurrentGrid(this, renderer_default(event.target));
  }
  _isRowEditMode() {
    var editMode = this._editingController.getEditMode();
    return editMode === EDIT_MODE_ROW || editMode === EDIT_MODE_FORM;
  }
  _isCellEditMode() {
    var editMode = this._editingController.getEditMode();
    return editMode === EDIT_MODE_CELL || editMode === EDIT_MODE_BATCH;
  }
  _isFastEditingAllowed() {
    return this._isCellEditMode() && this.option("keyboardNavigation.editOnKeyPress");
  }
  _getInteractiveElement($cell, isLast) {
    var $focusedElement = $cell.find(INTERACTIVE_ELEMENTS_SELECTOR).filter(":visible");
    return isLast ? $focusedElement.last() : $focusedElement.first();
  }
  _applyTabIndexToElement($element) {
    var _a;
    var tabIndex = null !== (_a = this.option("tabIndex")) && void 0 !== _a ? _a : 0;
    $element.attr("tabindex", tabIndex);
  }
  _getCell(cellPosition) {
    if (this._focusedView && cellPosition) {
      var rowIndexOffset = this._dataController.getRowIndexOffset();
      var column = this._columnsController.getVisibleColumns(null, true)[cellPosition.columnIndex];
      var columnIndexOffset = column && column.fixed ? this._getFixedColumnIndexOffset(column) : this._columnsController.getColumnIndexOffset();
      var rowIndex = cellPosition.rowIndex >= 0 ? cellPosition.rowIndex - rowIndexOffset : -1;
      var columnIndex = cellPosition.columnIndex >= 0 ? cellPosition.columnIndex - columnIndexOffset : -1;
      return this._focusedView.getCell({
        rowIndex,
        columnIndex
      });
    }
  }
  _getRowIndex($row) {
    var rowIndex = this._rowsView.getRowIndex($row);
    if (rowIndex >= 0) {
      rowIndex += this._dataController.getRowIndexOffset();
    }
    return rowIndex;
  }
  _hasSkipRow($row) {
    var row = $row && $row.get(0);
    return row && ("none" === row.style.display || isDetailRow($row) && !$row.hasClass(this.addWidgetPrefix(EDIT_FORM_CLASS)));
  }
  _allowEditingOnEnterKey() {
    return "startEdit" === this.option("keyboardNavigation.enterKeyAction");
  }
  _isLegacyNavigation() {
    return this.option("useLegacyKeyboardNavigation");
  }
  _getDirectionCodeByKey(key) {
    var directionCode;
    switch (key) {
      case "upArrow":
        directionCode = "prevRow";
        break;
      case "downArrow":
        directionCode = "nextRow";
        break;
      case "leftArrow":
        directionCode = this.option("rtlEnabled") ? "nextInRow" : "previousInRow";
        break;
      case "rightArrow":
        directionCode = this.option("rtlEnabled") ? "previousInRow" : "nextInRow";
    }
    return directionCode;
  }
  _isVirtualScrolling() {
    var scrollingMode = this.option("scrolling.mode");
    return "virtual" === scrollingMode || "infinite" === scrollingMode;
  }
  _isVirtualRowRender() {
    return this._isVirtualScrolling() || m_utils_default.isVirtualRowRendering(this);
  }
  _isVirtualColumnRender() {
    return "virtual" === this.option("scrolling.columnRenderingMode");
  }
  _scrollBy(left, top, rowIndex, $event) {
    var that = this;
    var scrollable = this._rowsView.getScrollable();
    if (that._focusedCellPosition) {
      scrollable.on("scroll", function scrollHandler() {
        scrollable.off("scroll", scrollHandler);
        setTimeout(that.restoreFocusableElement.bind(that, rowIndex, $event));
      });
    }
    return scrollable.scrollBy({
      left,
      top
    });
  }
  _isInsideEditForm(element) {
    var $editForm = renderer_default(element).closest(".".concat(this.addWidgetPrefix(EDIT_FORM_CLASS)));
    return $editForm.length && this.elementIsInsideGrid($editForm);
  }
  _isMasterDetailCell(element) {
    var $masterDetailCell = renderer_default(element).closest(".".concat(MASTER_DETAIL_CELL_CLASS2));
    return $masterDetailCell.length && this.elementIsInsideGrid($masterDetailCell);
  }
  _processNextCellInMasterDetail($nextCell, _$cell) {
    if (!this._isInsideEditForm($nextCell) && $nextCell) {
      this._applyTabIndexToElement($nextCell);
    }
  }
  _handleTabKeyOnMasterDetailCell(target, direction) {
    if (this._isMasterDetailCell(target)) {
      this._updateFocusedCellPosition(renderer_default(target), direction);
      var $nextCell = this._getNextCell(direction, "row");
      this._processNextCellInMasterDetail($nextCell, renderer_default(target));
      return true;
    }
    return false;
  }
  _getElementType(target) {
    return renderer_default(target).is("tr") ? "row" : "cell";
  }
  _isFastEditingStarted() {
    return this._isFastEditingAllowed() && this._fastEditingStarted;
  }
  _getVisibleColumnCount() {
    return this._columnsController.getVisibleColumns(null, true).length;
  }
  _isCellInRow(cellPosition, includeCommandCells) {
    var {
      columnIndex
    } = cellPosition;
    var visibleColumnsCount = this._getVisibleColumnCount();
    return includeCommandCells ? columnIndex >= 0 && columnIndex <= visibleColumnsCount - 1 : columnIndex > 0 && columnIndex < visibleColumnsCount - 1;
  }
  _isCellElement($element) {
    return $element.length && "TD" === $element[0].tagName;
  }
  _getCellElementFromTarget(target) {
    var elementType = this._getElementType(target);
    var $targetElement = renderer_default(target);
    var $cell;
    if ("cell" === elementType) {
      $cell = $targetElement.closest(".".concat(ROW_CLASS4, " > td"));
    } else {
      $cell = $targetElement.children().not(".".concat(COMMAND_EXPAND_CLASS2)).first();
    }
    return $cell;
  }
  _getRowsViewElement() {
    var _a;
    return null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.element();
  }
  isKeyboardEnabled() {
    return this.option("keyboardNavigation.enabled");
  }
  _processCanceledEditCellPosition(rowIndex, columnIndex) {
    if (this._canceledCellPosition) {
      var isCanceled = this._canceledCellPosition.rowIndex === rowIndex && this._canceledCellPosition.columnIndex === columnIndex;
      this._canceledCellPosition = null;
      return isCanceled;
    }
    return;
  }
  updateFocusedRowIndex() {
    var dataController2 = this._dataController;
    var visibleRowIndex = this.getVisibleRowIndex();
    var visibleItems = dataController2.items();
    var lastVisibleIndex = visibleItems.length ? visibleItems.length - 1 : -1;
    var rowIndexOffset = dataController2.getRowIndexOffset();
    if (lastVisibleIndex >= 0 && visibleRowIndex > lastVisibleIndex) {
      this.setFocusedRowIndex(lastVisibleIndex + rowIndexOffset);
    }
  }
};
var rowsView10 = (Base) => class extends Base {
  _rowClick(e) {
    var editRowIndex = this._editingController.getEditRowIndex();
    var isKeyboardEnabled = this._keyboardNavigationController.isKeyboardEnabled();
    if (editRowIndex === e.rowIndex) {
      this._keyboardNavigationController.setCellFocusType();
    }
    var needTriggerPointerEventHandler = (isMobile() || !isKeyboardEnabled) && this.option("focusedRowEnabled");
    if (needTriggerPointerEventHandler) {
      this._triggerPointerDownEventHandler(e, !isKeyboardEnabled);
    }
    super._rowClick.apply(this, arguments);
  }
  _triggerPointerDownEventHandler(e, force) {
    var {
      originalEvent
    } = e.event;
    if (originalEvent) {
      var $cell = renderer_default(originalEvent.target);
      var columnIndex = this.getCellIndex($cell);
      var column = this._columnsController.getVisibleColumns()[columnIndex];
      var row = this._dataController.items()[e.rowIndex];
      if (this._keyboardNavigationController._isAllowEditing(row, column) || force) {
        var eventArgs = createEvent(originalEvent, {
          currentTarget: originalEvent.target
        });
        this._keyboardNavigationController._pointerEventHandler(eventArgs);
      }
    }
  }
  renderFocusState(params) {
    super.renderFocusState(params);
    var {
      preventScroll,
      pageSizeChanged
    } = null !== params && void 0 !== params ? params : {};
    var $rowsViewElement = this.element();
    if ($rowsViewElement && !focused($rowsViewElement)) {
      $rowsViewElement.attr("tabindex", null);
    }
    pageSizeChanged && this._keyboardNavigationController.updateFocusedRowIndex();
    var rowIndex = this._keyboardNavigationController.getVisibleRowIndex();
    if (!isDefined(rowIndex) || rowIndex < 0) {
      rowIndex = 0;
    }
    var cellElements = this.getCellElements(rowIndex);
    if (this._keyboardNavigationController.isKeyboardEnabled() && (null === cellElements || void 0 === cellElements ? void 0 : cellElements.length)) {
      this.updateFocusElementTabIndex(cellElements, preventScroll);
    }
  }
  updateFocusElementTabIndex(cellElements, preventScroll) {
    var $row = cellElements.eq(0).parent();
    if (isGroupRow2($row)) {
      this._keyboardNavigationController._applyTabIndexToElement($row);
    } else {
      var columnIndex = this._keyboardNavigationController.getColumnIndex();
      if (!isDefined(columnIndex) || columnIndex < 0) {
        columnIndex = 0;
      }
      this._updateFocusedCellTabIndex(cellElements, columnIndex);
    }
  }
  _updateFocusedCellTabIndex(cellElements, columnIndex) {
    var keyboardController = this._keyboardNavigationController;
    var cellElementsLength = cellElements ? cellElements.length : -1;
    var updateCellTabIndex = function($cell2) {
      var isMasterDetailCell = keyboardController._isMasterDetailCell($cell2);
      var isValidCell = keyboardController._isCellValid($cell2);
      if (!isMasterDetailCell && isValidCell && keyboardController._isCellElement($cell2)) {
        keyboardController._applyTabIndexToElement($cell2);
        keyboardController.setCellFocusType();
        return true;
      }
      return;
    };
    var $cell = GridCoreKeyboardNavigationDom.getCellToFocus(cellElements, columnIndex);
    if ($cell.length) {
      updateCellTabIndex($cell);
    } else {
      if (cellElementsLength <= columnIndex) {
        columnIndex = cellElementsLength - 1;
      }
      for (var i = columnIndex; i < cellElementsLength; ++i) {
        if (updateCellTabIndex(renderer_default(cellElements[i]))) {
          break;
        }
      }
    }
  }
  renderDelayedTemplates(change) {
    super.renderDelayedTemplates.apply(this, arguments);
    this.waitAsyncTemplates().done(() => {
      this._renderFocusByChange(change);
    });
  }
  _renderFocusByChange(change) {
    var _a;
    var {
      operationTypes,
      repaintChangesOnly
    } = null !== change && void 0 !== change ? change : {};
    var {
      fullReload,
      pageSize
    } = null !== operationTypes && void 0 !== operationTypes ? operationTypes : {};
    var hasInsertsOrRemoves = !!(null === (_a = null === change || void 0 === change ? void 0 : change.changeTypes) || void 0 === _a ? void 0 : _a.find((changeType) => "insert" === changeType || "remove" === changeType));
    if (!change || !repaintChangesOnly || fullReload || pageSize || hasInsertsOrRemoves) {
      var preventScroll = shouldPreventScroll(this);
      this.renderFocusState({
        preventScroll,
        pageSizeChanged: pageSize
      });
    }
  }
  _renderCore(change) {
    var deferred = super._renderCore.apply(this, arguments);
    this._renderFocusByChange(change);
    return deferred;
  }
  _editCellPrepared($cell) {
    var _a;
    var editorInstance = this._getEditorInstance($cell);
    var isEditingNavigationMode = null === (_a = this._keyboardNavigationController) || void 0 === _a ? void 0 : _a._isFastEditingStarted();
    if (editorInstance && isEditingNavigationMode) {
      this._handleEditingNavigationMode(editorInstance);
    }
    super._editCellPrepared.apply(this, arguments);
  }
  _handleEditingNavigationMode(editorInstance) {
    ["downArrow", "upArrow"].forEach((keyName) => {
      var originalKeyHandler = editorInstance._supportedKeys()[keyName];
      editorInstance.registerKeyHandler(keyName, (e) => {
        var isDropDownOpened = "true" === editorInstance._input().attr("aria-expanded");
        if (isDropDownOpened) {
          return originalKeyHandler && originalKeyHandler.call(editorInstance, e);
        }
      });
    });
    editorInstance.registerKeyHandler("leftArrow", noop);
    editorInstance.registerKeyHandler("rightArrow", noop);
    var isDateBoxWithMask = editorInstance.NAME === DATEBOX_WIDGET_NAME && editorInstance.option("useMaskBehavior");
    if (isDateBoxWithMask) {
      editorInstance.registerKeyHandler("enter", noop);
    }
  }
  _getEditorInstance($cell) {
    var $editor = $cell.find(".dx-texteditor").eq(0);
    return m_utils_default.getWidgetInstance($editor);
  }
};
var editing2 = (Base) => class extends Base {
  editCell(rowIndex, columnIndex) {
    if (this._keyboardNavigationController._processCanceledEditCellPosition(rowIndex, columnIndex)) {
      return false;
    }
    var isCellEditing = super.editCell(rowIndex, columnIndex);
    if (isCellEditing) {
      this._keyboardNavigationController.setupFocusedView();
    }
    return isCellEditing;
  }
  editRow(rowIndex) {
    var visibleColumnIndex = this._keyboardNavigationController.getVisibleColumnIndex();
    var column = this._columnsController.getVisibleColumns()[visibleColumnIndex];
    if (column && column.type || this.option("editing.mode") === EDIT_MODE_FORM) {
      this._keyboardNavigationController._resetFocusedCell();
    }
    super.editRow(rowIndex);
    return;
  }
  addRow(parentKey) {
    this._keyboardNavigationController.setupFocusedView();
    this._keyboardNavigationController.setCellFocusType();
    return super.addRow.apply(this, arguments);
  }
  getFocusedCellInRow(rowIndex) {
    var $cell = super.getFocusedCellInRow(rowIndex);
    var rowIndexOffset = this._dataController.getRowIndexOffset();
    var focusedRowIndex = this._keyboardNavigationController._focusedCellPosition.rowIndex - rowIndexOffset;
    if (this._keyboardNavigationController.isKeyboardEnabled() && focusedRowIndex === rowIndex) {
      var $focusedCell = this._keyboardNavigationController._getFocusedCell();
      if (isElementDefined($focusedCell) && !$focusedCell.hasClass(COMMAND_EDIT_CLASS2)) {
        $cell = $focusedCell;
      }
    }
    return $cell;
  }
  _processCanceledEditingCell() {
    this.closeEditCell().done(() => {
      this._keyboardNavigationController._updateFocus();
    });
  }
  closeEditCell() {
    var keyboardNavigation4 = this._keyboardNavigationController;
    keyboardNavigation4._fastEditingStarted = false;
    var result2 = super.closeEditCell.apply(this, arguments);
    var $focusedElement = this._getFocusedElement();
    var isFilterCell = !!$focusedElement.closest(".".concat(this.addWidgetPrefix(FILTER_ROW_CLASS2))).length;
    if (!isFilterCell) {
      keyboardNavigation4._updateFocus();
    }
    return result2;
  }
  _getFocusedElement() {
    var _a, _b;
    var $element = renderer_default(null === (_b = (_a = this.component).element) || void 0 === _b ? void 0 : _b.call(_a));
    var $focusedElement = $element.find(":focus");
    return $focusedElement;
  }
  _delayedInputFocus() {
    this._keyboardNavigationController._isNeedScroll = true;
    super._delayedInputFocus.apply(this, arguments);
  }
  _isEditingStart() {
    var cancel = super._isEditingStart.apply(this, arguments);
    if (cancel && !this._keyboardNavigationController._isNeedFocus) {
      var $cell = this._keyboardNavigationController._getFocusedCell();
      this._keyboardNavigationController._focus($cell, true);
    }
    return cancel;
  }
};
var data12 = (Base) => class extends Base {
  _correctRowIndices(getRowIndexCorrection) {
    var focusedCellPosition = this._keyboardNavigationController._focusedCellPosition;
    super._correctRowIndices.apply(this, arguments);
    if (focusedCellPosition && focusedCellPosition.rowIndex >= 0) {
      var focusedRowIndexCorrection = getRowIndexCorrection(focusedCellPosition.rowIndex);
      if (focusedRowIndexCorrection) {
        focusedCellPosition.rowIndex += focusedRowIndexCorrection;
        this._editorFactoryController.refocus();
      }
    }
  }
  getMaxRowIndex() {
    var result2 = this.items().length - 1;
    var virtualItemsCount = this.virtualItemsCount();
    if (virtualItemsCount) {
      var rowIndexOffset = this.getRowIndexOffset();
      result2 += rowIndexOffset + virtualItemsCount.end;
    }
    return result2;
  }
};
var adaptiveColumns = (Base) => class extends Base {
  _showHiddenCellsInView(_ref) {
    var {
      viewName: viewName2,
      $cells,
      isCommandColumn
    } = _ref;
    super._showHiddenCellsInView.apply(this, arguments);
    viewName2 === COLUMN_HEADERS_VIEW && !isCommandColumn && $cells.each((_, cellElement) => {
      var $cell = renderer_default(cellElement);
      isCellInHeaderRow($cell) && $cell.attr("tabindex", 0);
    });
  }
  _hideVisibleCellInView(_ref2) {
    var {
      viewName: viewName2,
      $cell,
      isCommandColumn
    } = _ref2;
    super._hideVisibleCellInView.apply(this, arguments);
    if (viewName2 === COLUMN_HEADERS_VIEW && !isCommandColumn && isCellInHeaderRow($cell)) {
      $cell.removeAttr("tabindex");
    }
  }
  _hideVisibleColumnInView(_ref3) {
    var {
      view,
      isCommandColumn,
      visibleIndex
    } = _ref3;
    super._hideVisibleColumnInView({
      view,
      isCommandColumn,
      visibleIndex
    });
    if (view.name === ROWS_VIEW) {
      this._rowsView.renderFocusState(null);
    }
  }
};
var keyboardNavigationModule = {
  defaultOptions: () => ({
    useLegacyKeyboardNavigation: false,
    keyboardNavigation: {
      enabled: true,
      enterKeyAction: "startEdit",
      enterKeyDirection: "none",
      editOnKeyPress: false
    }
  }),
  controllers: {
    keyboardNavigation: KeyboardNavigationController
  },
  extenders: {
    views: {
      rowsView: rowsView10
    },
    controllers: {
      editing: editing2,
      data: data12,
      adaptiveColumns,
      keyboardNavigation: keyboardNavigationScrollableA11yExtender
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/keyboard_navigation.js
m_core_default.registerModule("keyboardNavigation", keyboardNavigationModule);

// node_modules/devextreme/esm/__internal/grids/data_grid/m_aggregate_calculator.js
function depthFirstSearch(i, depth, root, callback) {
  var j = 0;
  if (i < depth) {
    for (; j < root.items.length; j++) {
      depthFirstSearch(i + 1, depth, root.items[j], callback);
    }
  }
  if (i === depth) {
    callback(root);
  }
}
function map2(array2, callback) {
  var i;
  if ("map" in array2) {
    return array2.map(callback);
  }
  var result2 = new Array(array2.length);
  for (i in array2) {
    result2[i] = callback(array2[i], i);
  }
  return result2;
}
function isEmpty2(x) {
  return x !== x || "" === x || null === x || void 0 === x;
}
function isCount(aggregator) {
  return aggregator === aggregators.count;
}
function normalizeAggregate(aggregate) {
  var selector = compileGetter(aggregate.selector);
  var skipEmptyValues = "skipEmptyValues" in aggregate ? aggregate.skipEmptyValues : true;
  var {
    aggregator
  } = aggregate;
  if ("string" === typeof aggregator) {
    aggregator = aggregators[aggregator];
    if (!aggregator) {
      throw errors.Error("E4001", aggregate.aggregator);
    }
  }
  return {
    selector,
    aggregator,
    skipEmptyValues
  };
}
var AggregateCalculator = class {
  constructor(options2) {
    this._data = options2.data;
    this._groupLevel = options2.groupLevel || 0;
    this._totalAggregates = map2(options2.totalAggregates || [], normalizeAggregate);
    this._groupAggregates = map2(options2.groupAggregates || [], normalizeAggregate);
    this._totals = [];
  }
  calculate() {
    if (this._totalAggregates.length) {
      this._calculateTotals(0, {
        items: this._data
      });
    }
    if (this._groupAggregates.length && this._groupLevel > 0) {
      this._calculateGroups({
        items: this._data
      });
    }
  }
  totalAggregates() {
    return this._totals;
  }
  _aggregate(aggregates, data17, container) {
    var length = data17.items ? data17.items.length : 0;
    for (var i = 0; i < aggregates.length; i++) {
      if (isCount(aggregates[i].aggregator)) {
        container[i] = (container[i] || 0) + length;
        continue;
      }
      for (var j = 0; j < length; j++) {
        this._accumulate(i, aggregates[i], container, data17.items[j]);
      }
    }
  }
  _calculateTotals(level, data17) {
    if (0 === level) {
      this._totals = this._seed(this._totalAggregates);
    }
    if (level === this._groupLevel) {
      this._aggregate(this._totalAggregates, data17, this._totals);
    } else {
      for (var i = 0; i < data17.items.length; i++) {
        this._calculateTotals(level + 1, data17.items[i]);
      }
    }
    if (0 === level) {
      this._totals = this._finalize(this._totalAggregates, this._totals);
    }
  }
  _calculateGroups(root) {
    var maxLevel = this._groupLevel;
    var currentLevel = maxLevel + 1;
    var seedFn = this._seed.bind(this, this._groupAggregates);
    var stepFn = this._aggregate.bind(this, this._groupAggregates);
    var finalizeFn = this._finalize.bind(this, this._groupAggregates);
    function aggregator(node) {
      node.aggregates = seedFn(currentLevel - 1);
      if (currentLevel === maxLevel) {
        stepFn(node, node.aggregates);
      } else {
        depthFirstSearch(currentLevel, maxLevel, node, (innerNode) => {
          stepFn(innerNode, node.aggregates);
        });
      }
      node.aggregates = finalizeFn(node.aggregates);
    }
    while (--currentLevel > 0) {
      depthFirstSearch(0, currentLevel, root, aggregator);
    }
  }
  _seed(aggregates, groupIndex) {
    return map2(aggregates, (aggregate) => {
      var {
        aggregator
      } = aggregate;
      var seed = "seed" in aggregator ? isFunction(aggregator.seed) ? aggregator.seed(groupIndex) : aggregator.seed : NaN;
      return seed;
    });
  }
  _accumulate(aggregateIndex, aggregate, results, item) {
    var value2 = aggregate.selector(item);
    var {
      aggregator
    } = aggregate;
    var {
      skipEmptyValues
    } = aggregate;
    if (skipEmptyValues && isEmpty2(value2)) {
      return;
    }
    if (results[aggregateIndex] !== results[aggregateIndex]) {
      results[aggregateIndex] = value2;
    } else {
      results[aggregateIndex] = aggregator.step(results[aggregateIndex], value2);
    }
  }
  _finalize(aggregates, results) {
    return map2(aggregates, (aggregate, index) => {
      var fin = aggregate.aggregator.finalize;
      return fin ? fin(results[index]) : results[index];
    });
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/summary/m_summary.js
var DATAGRID_TOTAL_FOOTER_CLASS = "dx-datagrid-total-footer";
var DATAGRID_SUMMARY_ITEM_CLASS = "dx-datagrid-summary-item";
var DATAGRID_TEXT_CONTENT_CLASS = "dx-datagrid-text-content";
var DATAGRID_GROUP_FOOTER_CLASS2 = "dx-datagrid-group-footer";
var DATAGRID_GROUP_TEXT_CONTENT_CLASS = "dx-datagrid-group-text-content";
var DATAGRID_NOWRAP_CLASS = "dx-datagrid-nowrap";
var DATAGRID_FOOTER_ROW_CLASS = "dx-footer-row";
var DATAGRID_CELL_DISABLED = "dx-cell-focus-disabled";
var DATAGRID_GROUP_FOOTER_ROW_TYPE = "groupFooter";
var DATAGRID_TOTAL_FOOTER_ROW_TYPE = "totalFooter";
var renderSummaryCell = function(cell, options2) {
  var $cell = renderer_default(cell);
  var {
    column
  } = options2;
  var {
    summaryItems
  } = options2;
  var $summaryItems = [];
  if (!column.command && summaryItems) {
    for (var i = 0; i < summaryItems.length; i++) {
      var summaryItem = summaryItems[i];
      var text = m_core_default.getSummaryText(summaryItem, options2.summaryTexts);
      $summaryItems.push(renderer_default("<div>").css("textAlign", summaryItem.alignment || column.alignment).addClass(DATAGRID_SUMMARY_ITEM_CLASS).addClass(DATAGRID_TEXT_CONTENT_CLASS).addClass(summaryItem.cssClass).toggleClass(DATAGRID_GROUP_TEXT_CONTENT_CLASS, "group" === options2.rowType).text(text).attr("aria-label", "".concat(column.caption, " ").concat(text)));
    }
    $cell.append($summaryItems);
  }
};
var getSummaryCellOptions = function(that, options2) {
  var summaryTexts = that.option("summary.texts") || {};
  return {
    totalItem: options2.row,
    summaryItems: options2.row.summaryCells[options2.columnIndex],
    summaryTexts
  };
};
var getGroupAggregates = function(data17) {
  return data17.summary || data17.aggregates || [];
};
var recalculateWhileEditing = function(that) {
  return that.option("summary.recalculateWhileEditing");
};
var forEachGroup = function forEachGroup2(groups, groupCount, callback, path) {
  path = path || [];
  for (var i = 0; i < groups.length; i++) {
    path.push(groups[i].key);
    if (1 === groupCount) {
      callback(path, groups[i].items);
    } else {
      forEachGroup2(groups[i].items, groupCount - 1, callback, path);
    }
    path.pop();
  }
};
var applyAddedData = function applyAddedData2(data17, insertedData, groupLevel) {
  if (groupLevel) {
    return applyAddedData2(data17, insertedData.map((item) => ({
      items: [item]
    }), groupLevel - 1));
  }
  return data17.concat(insertedData);
};
var applyRemovedData = function applyRemovedData2(data17, removedData, groupLevel) {
  if (groupLevel) {
    return data17.map((data18) => {
      var updatedData = {};
      var updatedItems = applyRemovedData2(data18.items || [], removedData, groupLevel - 1);
      Object.defineProperty(updatedData, "aggregates", {
        get: () => data18.aggregates,
        set: (value2) => {
          data18.aggregates = value2;
        }
      });
      return extend(updatedData, data18, {
        items: updatedItems
      });
    });
  }
  return data17.filter((data18) => removedData.indexOf(data18) < 0);
};
var sortGroupsBySummaryCore = function sortGroupsBySummaryCore2(items, groups, sortByGroups) {
  if (!items || !groups.length) {
    return items;
  }
  var group = groups[0];
  var sorts = sortByGroups[0];
  var query;
  if (group && sorts && sorts.length) {
    query = query_default(items);
    each(sorts, function(index) {
      if (0 === index) {
        query = query.sortBy(this.selector, this.desc);
      } else {
        query = query.thenBy(this.selector, this.desc);
      }
    });
    query.enumerate().done((sortedItems) => {
      items = sortedItems;
    });
  }
  groups = groups.slice(1);
  sortByGroups = sortByGroups.slice(1);
  if (groups.length && sortByGroups.length) {
    each(items, function() {
      this.items = sortGroupsBySummaryCore2(this.items, groups, sortByGroups);
    });
  }
  return items;
};
var sortGroupsBySummary = function(data17, group, summary) {
  var sortByGroups = summary && summary.sortByGroups && summary.sortByGroups();
  if (sortByGroups && sortByGroups.length) {
    return sortGroupsBySummaryCore(data17, group, sortByGroups);
  }
  return data17;
};
var calculateAggregates = function(that, summary, data17, groupLevel) {
  var calculator;
  if (recalculateWhileEditing(that)) {
    var editingController = that._editingController;
    if (editingController) {
      var insertedData = editingController.getInsertedData();
      if (insertedData.length) {
        data17 = applyAddedData(data17, insertedData, groupLevel);
      }
      var removedData = editingController.getRemovedData();
      if (removedData.length) {
        data17 = applyRemovedData(data17, removedData, groupLevel);
      }
    }
  }
  if (summary) {
    calculator = new AggregateCalculator({
      totalAggregates: summary.totalAggregates,
      groupAggregates: summary.groupAggregates,
      data: data17,
      groupLevel
    });
    calculator.calculate();
  }
  return calculator ? calculator.totalAggregates() : [];
};
var FooterView = class extends ColumnsView {
  _getRows() {
    return this._dataController.footerItems();
  }
  _getCellOptions(options2) {
    return extend(super._getCellOptions(options2), getSummaryCellOptions(this, options2));
  }
  _renderCellContent($cell, options2) {
    renderSummaryCell($cell, options2);
    super._renderCellContent.apply(this, arguments);
  }
  _renderCore(change) {
    var needUpdateScrollLeft = false;
    var totalItem = this._dataController.footerItems()[0];
    if (!change || !change.columnIndices) {
      this.element().empty().addClass(DATAGRID_TOTAL_FOOTER_CLASS).toggleClass(DATAGRID_NOWRAP_CLASS, !this.option("wordWrapEnabled"));
      needUpdateScrollLeft = true;
    }
    if (totalItem && totalItem.summaryCells && totalItem.summaryCells.length) {
      this._updateContent(this._renderTable({
        change
      }), change);
      needUpdateScrollLeft && this._updateScrollLeftPosition();
    }
  }
  _updateContent($newTable, change) {
    if (change && "update" === change.changeType && change.columnIndices) {
      return this.waitAsyncTemplates().done(() => {
        var $row = this.getTableElement().find(".dx-row");
        var $newRow = $newTable.find(".dx-row");
        this._updateCells($row, $newRow, change.columnIndices[0]);
      });
    }
    return super._updateContent.apply(this, arguments);
  }
  _rowClick(e) {
    var item = this._dataController.footerItems()[e.rowIndex] || {};
    this.executeAction("onRowClick", extend({}, e, item));
  }
  _columnOptionChanged(e) {
    var {
      optionNames
    } = e;
    if (e.changeTypes.grouping) {
      return;
    }
    if (optionNames.width || optionNames.visibleWidth) {
      super._columnOptionChanged(e);
    }
  }
  _handleDataChanged(e) {
    var {
      changeType
    } = e;
    if ("update" === e.changeType && e.repaintChangesOnly) {
      if (!e.totalColumnIndices) {
        this.render();
      } else if (e.totalColumnIndices.length) {
        this.render(null, {
          changeType: "update",
          columnIndices: [e.totalColumnIndices]
        });
      }
    } else if ("refresh" === changeType || "append" === changeType || "prepend" === changeType) {
      this.render();
    }
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row.rowType === DATAGRID_TOTAL_FOOTER_ROW_TYPE) {
      $row.addClass(DATAGRID_FOOTER_ROW_CLASS);
      $row.addClass(DATAGRID_CELL_DISABLED);
      $row.attr("tabindex", 0);
    }
    return $row;
  }
  getHeight() {
    return this.getElementHeight();
  }
  isVisible() {
    return !!this._dataController.footerItems().length;
  }
};
var dataSourceAdapterExtender3 = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    this._editingController = this.getController("editing");
    this._totalAggregates = [];
    this._summaryGetter = noop;
  }
  summaryGetter(summaryGetter) {
    if (!arguments.length) {
      return this._summaryGetter;
    }
    if (isFunction(summaryGetter)) {
      this._summaryGetter = summaryGetter;
    }
  }
  summary(summary) {
    if (!arguments.length) {
      return this._summaryGetter();
    }
    this._summaryGetter = function() {
      return summary;
    };
  }
  totalAggregates() {
    return this._totalAggregates;
  }
  isLastLevelGroupItemsPagingLocal() {
    var summary = this.summary();
    var sortByGroupsInfo = null === summary || void 0 === summary ? void 0 : summary.sortByGroups();
    return null === sortByGroupsInfo || void 0 === sortByGroupsInfo ? void 0 : sortByGroupsInfo.length;
  }
  sortLastLevelGroupItems(items, groups, paths) {
    var groupedItems = store_helper_default.multiLevelGroup(query_default(items), groups).toArray();
    var result2 = [];
    paths.forEach((path) => {
      forEachGroup(groupedItems, groups.length, (itemsPath, items2) => {
        if (path.toString() === itemsPath.toString()) {
          result2 = result2.concat(items2);
        }
      });
    });
    return result2;
  }
  _customizeRemoteOperations(options2) {
    var summary = this.summary();
    if (summary) {
      if (options2.remoteOperations.summary) {
        if (!options2.isCustomLoading || options2.storeLoadOptions.isLoadingAll) {
          if (options2.storeLoadOptions.group) {
            if (options2.remoteOperations.grouping) {
              options2.storeLoadOptions.groupSummary = summary.groupAggregates;
            } else if (summary.groupAggregates.length) {
              options2.remoteOperations.paging = false;
            }
          }
          options2.storeLoadOptions.totalSummary = summary.totalAggregates;
        }
      } else if (summary.totalAggregates.length || summary.groupAggregates.length && options2.storeLoadOptions.group) {
        options2.remoteOperations.paging = false;
      }
    }
    super._customizeRemoteOperations.apply(this, arguments);
    var cachedExtra = options2.cachedData.extra;
    if ((null === cachedExtra || void 0 === cachedExtra ? void 0 : cachedExtra.summary) && !options2.isCustomLoading) {
      options2.storeLoadOptions.totalSummary = void 0;
    }
  }
  _handleDataLoadedCore(options2) {
    var _a, _b;
    var groups = normalizeSortingInfo(options2.storeLoadOptions.group || options2.loadOptions.group || []);
    var remoteOperations = options2.remoteOperations || {};
    var summary = this.summaryGetter()(remoteOperations);
    if (!options2.isCustomLoading || options2.storeLoadOptions.isLoadingAll) {
      if (remoteOperations.summary) {
        if (!remoteOperations.paging && groups.length && summary) {
          if (!remoteOperations.grouping) {
            calculateAggregates(this, {
              groupAggregates: summary.groupAggregates
            }, options2.data, groups.length);
          }
          options2.data = sortGroupsBySummary(options2.data, groups, summary);
        }
      } else if (!remoteOperations.paging && summary) {
        var operationTypes = options2.operationTypes || {};
        var hasOperations = Object.keys(operationTypes).some((type2) => operationTypes[type2]);
        if (!hasOperations || !(null === (_b = null === (_a = options2.cachedData) || void 0 === _a ? void 0 : _a.extra) || void 0 === _b ? void 0 : _b.summary) || groups.length && summary.groupAggregates.length) {
          var totalAggregates = calculateAggregates(this, summary, options2.data, groups.length);
          options2.extra = isPlainObject(options2.extra) ? options2.extra : {};
          options2.extra.summary = totalAggregates;
          if (options2.cachedData) {
            options2.cachedData.extra = options2.extra;
          }
        }
        options2.data = sortGroupsBySummary(options2.data, groups, summary);
      }
    }
    if (!options2.isCustomLoading) {
      this._totalAggregates = options2.extra && options2.extra.summary || this._totalAggregates;
    }
    super._handleDataLoadedCore(options2);
  }
};
m_data_source_adapter_default.extend(dataSourceAdapterExtender3);
var data13 = (Base) => class extends Base {
  _isDataColumn(column) {
    return column && (!isDefined(column.groupIndex) || column.showWhenGrouped);
  }
  _isGroupFooterVisible() {
    var groupItems = this.option("summary.groupItems") || [];
    for (var i = 0; i < groupItems.length; i++) {
      var groupItem = groupItems[i];
      var column = this._columnsController.columnOption(groupItem.showInColumn || groupItem.column);
      if (groupItem.showInGroupFooter && this._isDataColumn(column)) {
        return true;
      }
    }
    return false;
  }
  _processGroupItems(items, groupCount, options2) {
    var data17 = options2 && options2.data;
    var result2 = super._processGroupItems.apply(this, arguments);
    if (options2) {
      if (void 0 === options2.isGroupFooterVisible) {
        options2.isGroupFooterVisible = this._isGroupFooterVisible();
      }
      if (data17 && data17.items && options2.isGroupFooterVisible && (options2.collectContinuationItems || !data17.isContinuationOnNextPage)) {
        result2.push({
          rowType: DATAGRID_GROUP_FOOTER_ROW_TYPE,
          key: options2.path.slice(),
          data: data17,
          groupIndex: options2.path.length - 1,
          values: []
        });
      }
    }
    return result2;
  }
  _processGroupItem(groupItem, options2) {
    var that = this;
    if (!options2.summaryGroupItems) {
      options2.summaryGroupItems = that.option("summary.groupItems") || [];
    }
    if ("group" === groupItem.rowType) {
      var groupColumnIndex = -1;
      var afterGroupColumnIndex = -1;
      each(options2.visibleColumns, function(visibleIndex) {
        var prevColumn = options2.visibleColumns[visibleIndex - 1];
        if (groupItem.groupIndex === this.groupIndex) {
          groupColumnIndex = this.index;
        }
        if (visibleIndex > 0 && "expand" === prevColumn.command && "expand" !== this.command) {
          afterGroupColumnIndex = this.index;
        }
      });
      groupItem.summaryCells = this._calculateSummaryCells(options2.summaryGroupItems, getGroupAggregates(groupItem.data), options2.visibleColumns, (summaryItem, column) => {
        if (summaryItem.showInGroupFooter) {
          return -1;
        }
        if (summaryItem.alignByColumn && column && !isDefined(column.groupIndex) && column.index !== afterGroupColumnIndex) {
          return column.index;
        }
        return groupColumnIndex;
      }, true);
    }
    if (groupItem.rowType === DATAGRID_GROUP_FOOTER_ROW_TYPE) {
      groupItem.summaryCells = this._calculateSummaryCells(options2.summaryGroupItems, getGroupAggregates(groupItem.data), options2.visibleColumns, (summaryItem, column) => summaryItem.showInGroupFooter && that._isDataColumn(column) ? column.index : -1);
    }
    return groupItem;
  }
  _calculateSummaryCells(summaryItems, aggregates, visibleColumns, calculateTargetColumnIndex, isGroupRow3) {
    var that = this;
    var summaryCells = [];
    var summaryCellsByColumns = {};
    each(summaryItems, (summaryIndex, summaryItem) => {
      var column = that._columnsController.columnOption(summaryItem.column);
      var showInColumn = summaryItem.showInColumn && that._columnsController.columnOption(summaryItem.showInColumn) || column;
      var columnIndex = calculateTargetColumnIndex(summaryItem, showInColumn);
      if (columnIndex >= 0) {
        if (!summaryCellsByColumns[columnIndex]) {
          summaryCellsByColumns[columnIndex] = [];
        }
        var aggregate = aggregates[summaryIndex];
        if (aggregate === aggregate) {
          var valueFormat;
          if (isDefined(summaryItem.valueFormat)) {
            valueFormat = summaryItem.valueFormat;
          } else if ("count" !== summaryItem.summaryType) {
            valueFormat = m_core_default.getFormatByDataType(column && column.dataType);
          }
          summaryCellsByColumns[columnIndex].push(extend({}, summaryItem, {
            value: isString(aggregate) && column && column.deserializeValue ? column.deserializeValue(aggregate) : aggregate,
            valueFormat,
            columnCaption: column && column.index !== columnIndex ? column.caption : void 0
          }));
        }
      }
    });
    if (!isEmptyObject(summaryCellsByColumns)) {
      visibleColumns.forEach((column, visibleIndex) => {
        var prevColumn = visibleColumns[visibleIndex - 1];
        var columnIndex = isGroupRow3 && ("expand" === (null === prevColumn || void 0 === prevColumn ? void 0 : prevColumn.command) || "expand" === column.command) ? null === prevColumn || void 0 === prevColumn ? void 0 : prevColumn.index : column.index;
        summaryCells.push(summaryCellsByColumns[columnIndex] || []);
      });
    }
    return summaryCells;
  }
  _getSummaryCells(summaryTotalItems, totalAggregates) {
    var that = this;
    var columnsController = that._columnsController;
    return that._calculateSummaryCells(summaryTotalItems, totalAggregates, columnsController.getVisibleColumns(), (summaryItem, column) => that._isDataColumn(column) ? column.index : -1);
  }
  _updateItemsCore(change) {
    var summaryCells;
    var dataSource = this._dataSource;
    var footerItems = this._footerItems;
    var oldSummaryCells = footerItems && footerItems[0] && footerItems[0].summaryCells;
    var summaryTotalItems = this.option("summary.totalItems");
    this._footerItems = [];
    if (dataSource && summaryTotalItems && summaryTotalItems.length) {
      var totalAggregates = dataSource.totalAggregates();
      summaryCells = this._getSummaryCells(summaryTotalItems, totalAggregates);
      if (change && change.repaintChangesOnly && oldSummaryCells) {
        change.totalColumnIndices = summaryCells.map((summaryCell, index) => {
          if (JSON.stringify(summaryCell) !== JSON.stringify(oldSummaryCells[index])) {
            return index;
          }
          return -1;
        }).filter((index) => index >= 0);
      }
      if (summaryCells.length) {
        this._footerItems.push({
          rowType: DATAGRID_TOTAL_FOOTER_ROW_TYPE,
          summaryCells
        });
      }
    }
    super._updateItemsCore(change);
  }
  _prepareUnsavedDataSelector(selector) {
    if (recalculateWhileEditing(this)) {
      var editingController = this._editingController;
      if (editingController) {
        return function(data17) {
          data17 = editingController.getUpdatedData(data17);
          return selector(data17);
        };
      }
    }
    return selector;
  }
  _prepareAggregateSelector(selector, aggregator) {
    selector = this._prepareUnsavedDataSelector(selector);
    if ("avg" === aggregator || "sum" === aggregator) {
      return function(data17) {
        var value2 = selector(data17);
        return isDefined(value2) ? Number(value2) : value2;
      };
    }
    return selector;
  }
  _getAggregates(summaryItems, remoteOperations) {
    var that = this;
    var calculateCustomSummary = that.option("summary.calculateCustomSummary");
    var commonSkipEmptyValues = that.option("summary.skipEmptyValues");
    return map(summaryItems || [], (summaryItem) => {
      var column = this._columnsController.columnOption(summaryItem.column);
      var calculateCellValue = column && column.calculateCellValue ? column.calculateCellValue.bind(column) : compileGetter(column ? column.dataField : summaryItem.column);
      var aggregator = summaryItem.summaryType || "count";
      var skipEmptyValues = isDefined(summaryItem.skipEmptyValues) ? summaryItem.skipEmptyValues : commonSkipEmptyValues;
      if (remoteOperations) {
        return {
          selector: summaryItem.column,
          summaryType: aggregator
        };
      }
      var selector = that._prepareAggregateSelector(calculateCellValue, aggregator);
      if ("custom" === aggregator) {
        if (!calculateCustomSummary) {
          ui_errors_default.log("E1026");
          calculateCustomSummary = function() {
          };
        }
        var options2 = {
          component: that.component,
          name: summaryItem.name
        };
        calculateCustomSummary(options2);
        options2.summaryProcess = "calculate";
        aggregator = {
          seed(groupIndex) {
            options2.summaryProcess = "start";
            options2.totalValue = void 0;
            options2.groupIndex = groupIndex;
            delete options2.value;
            calculateCustomSummary(options2);
            return options2.totalValue;
          },
          step(totalValue, value2) {
            options2.summaryProcess = "calculate";
            options2.totalValue = totalValue;
            options2.value = value2;
            calculateCustomSummary(options2);
            return options2.totalValue;
          },
          finalize(totalValue) {
            options2.summaryProcess = "finalize";
            options2.totalValue = totalValue;
            delete options2.value;
            calculateCustomSummary(options2);
            return options2.totalValue;
          }
        };
      }
      return {
        selector,
        aggregator,
        skipEmptyValues
      };
    });
  }
  _addSortInfo(sortByGroups, groupColumn, selector, sortOrder) {
    if (groupColumn) {
      var {
        groupIndex
      } = groupColumn;
      sortOrder = sortOrder || groupColumn.sortOrder;
      if (isDefined(groupIndex)) {
        sortByGroups[groupIndex] = sortByGroups[groupIndex] || [];
        sortByGroups[groupIndex].push({
          selector,
          desc: "desc" === sortOrder
        });
      }
    }
  }
  _findSummaryItem(summaryItems, name2) {
    var summaryItemIndex = -1;
    if (isDefined(name2)) {
      each(summaryItems || [], function(index) {
        if (this.name === name2 || index === name2 || this.summaryType === name2 || this.column === name2 || function(summaryItem) {
          var {
            summaryType
          } = summaryItem;
          var {
            column
          } = summaryItem;
          return summaryType && column && "".concat(summaryType, "_").concat(column);
        }(this) === name2) {
          summaryItemIndex = index;
          return false;
        }
      });
    }
    return summaryItemIndex;
  }
  _getSummarySortByGroups(sortByGroupSummaryInfo, groupSummaryItems) {
    var that = this;
    var columnsController = that._columnsController;
    var groupColumns = columnsController.getGroupColumns();
    var sortByGroups = [];
    if (!groupSummaryItems || !groupSummaryItems.length) {
      return;
    }
    each(sortByGroupSummaryInfo || [], function() {
      var {
        sortOrder
      } = this;
      var {
        groupColumn
      } = this;
      var summaryItemIndex = that._findSummaryItem(groupSummaryItems, this.summaryItem);
      if (summaryItemIndex < 0) {
        return;
      }
      var selector = function(data17) {
        return getGroupAggregates(data17)[summaryItemIndex];
      };
      if (isDefined(groupColumn)) {
        groupColumn = columnsController.columnOption(groupColumn);
        that._addSortInfo(sortByGroups, groupColumn, selector, sortOrder);
      } else {
        each(groupColumns, (groupIndex, groupColumn2) => {
          that._addSortInfo(sortByGroups, groupColumn2, selector, sortOrder);
        });
      }
    });
    return sortByGroups;
  }
  _createDataSourceAdapterCore(dataSource, remoteOperations) {
    var that = this;
    var dataSourceAdapter = super._createDataSourceAdapterCore(dataSource, remoteOperations);
    dataSourceAdapter.summaryGetter((currentRemoteOperations) => that._getSummaryOptions(currentRemoteOperations || remoteOperations));
    return dataSourceAdapter;
  }
  _getSummaryOptions(remoteOperations) {
    var that = this;
    var groupSummaryItems = that.option("summary.groupItems");
    var totalSummaryItems = that.option("summary.totalItems");
    var sortByGroupSummaryInfo = that.option("sortByGroupSummaryInfo");
    var groupAggregates = that._getAggregates(groupSummaryItems, remoteOperations && remoteOperations.grouping && remoteOperations.summary);
    var totalAggregates = that._getAggregates(totalSummaryItems, remoteOperations && remoteOperations.summary);
    if (groupAggregates.length || totalAggregates.length) {
      return {
        groupAggregates,
        totalAggregates,
        sortByGroups: function() {
          return that._getSummarySortByGroups(sortByGroupSummaryInfo, groupSummaryItems);
        }
      };
    }
    return;
  }
  publicMethods() {
    var methods = super.publicMethods();
    methods.push("getTotalSummaryValue");
    return methods;
  }
  getTotalSummaryValue(summaryItemName) {
    var summaryItemIndex = this._findSummaryItem(this.option("summary.totalItems"), summaryItemName);
    var aggregates = this._dataSource.totalAggregates();
    if (aggregates.length && summaryItemIndex > -1) {
      return aggregates[summaryItemIndex];
    }
  }
  optionChanged(args) {
    if ("summary" === args.name || "sortByGroupSummaryInfo" === args.name) {
      args.name = "dataSource";
    }
    super.optionChanged(args);
  }
  init() {
    this._footerItems = [];
    super.init();
  }
  footerItems() {
    return this._footerItems;
  }
};
var editing3 = (Base) => class extends Base {
  _refreshSummary() {
    if (recalculateWhileEditing(this) && !this.isSaving()) {
      this._dataController.refresh({
        load: true,
        changesOnly: true
      });
    }
  }
  _addChange(params) {
    var result2 = super._addChange.apply(this, arguments);
    if (params.type) {
      this._refreshSummary();
    }
    return result2;
  }
  _removeChange() {
    var result2 = super._removeChange.apply(this, arguments);
    this._refreshSummary();
    return result2;
  }
  cancelEditData() {
    var result2 = super.cancelEditData.apply(this, arguments);
    this._refreshSummary();
    return result2;
  }
};
var rowsView11 = (Base) => class extends Base {
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    row && $row.addClass(row.rowType === DATAGRID_GROUP_FOOTER_ROW_TYPE ? DATAGRID_GROUP_FOOTER_CLASS2 : "");
    return $row;
  }
  _renderCells($row, options2) {
    super._renderCells.apply(this, arguments);
    if ("group" === options2.row.rowType && options2.row.summaryCells && options2.row.summaryCells.length) {
      this._renderGroupSummaryCells($row, options2);
    }
  }
  _hasAlignByColumnSummaryItems(columnIndex, options2) {
    return !isDefined(options2.columns[columnIndex].groupIndex) && options2.row.summaryCells[columnIndex].length;
  }
  _getAlignByColumnCellCount(groupCellColSpan, options2) {
    var alignByColumnCellCount = 0;
    for (var i = 1; i < groupCellColSpan; i++) {
      var columnIndex = options2.row.summaryCells.length - i;
      alignByColumnCellCount = this._hasAlignByColumnSummaryItems(columnIndex, options2) ? i : alignByColumnCellCount;
    }
    return alignByColumnCellCount;
  }
  _renderGroupSummaryCells($row, options2) {
    var $groupCell = $row.children().last();
    var groupCellColSpan = Number($groupCell.attr("colSpan")) || 1;
    var alignByColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options2);
    this._renderGroupSummaryCellsCore($groupCell, options2, groupCellColSpan, alignByColumnCellCount);
  }
  _renderGroupSummaryCellsCore($groupCell, options2, groupCellColSpan, alignByColumnCellCount) {
    if (alignByColumnCellCount > 0) {
      $groupCell.attr("colSpan", groupCellColSpan - alignByColumnCellCount);
      for (var i = 0; i < alignByColumnCellCount; i++) {
        var columnIndex = options2.columns.length - alignByColumnCellCount + i;
        this._renderCell($groupCell.parent(), extend({
          column: options2.columns[columnIndex],
          columnIndex: this._getSummaryCellIndex(columnIndex, options2.columns)
        }, options2));
      }
    }
  }
  _getSummaryCellIndex(columnIndex, columns7) {
    return columnIndex;
  }
  _getCellTemplate(options2) {
    if (!options2.column.command && !isDefined(options2.column.groupIndex) && options2.summaryItems && options2.summaryItems.length) {
      return renderSummaryCell;
    }
    return super._getCellTemplate(options2);
  }
  _getCellOptions(options2) {
    var parameters = super._getCellOptions(options2);
    if (options2.row.summaryCells) {
      return extend(parameters, getSummaryCellOptions(this, options2));
    }
    return parameters;
  }
};
m_core_default.registerModule("summary", {
  defaultOptions: () => ({
    summary: {
      groupItems: void 0,
      totalItems: void 0,
      calculateCustomSummary: void 0,
      skipEmptyValues: true,
      recalculateWhileEditing: false,
      texts: {
        sum: message_default.format("dxDataGrid-summarySum"),
        sumOtherColumn: message_default.format("dxDataGrid-summarySumOtherColumn"),
        min: message_default.format("dxDataGrid-summaryMin"),
        minOtherColumn: message_default.format("dxDataGrid-summaryMinOtherColumn"),
        max: message_default.format("dxDataGrid-summaryMax"),
        maxOtherColumn: message_default.format("dxDataGrid-summaryMaxOtherColumn"),
        avg: message_default.format("dxDataGrid-summaryAvg"),
        avgOtherColumn: message_default.format("dxDataGrid-summaryAvgOtherColumn"),
        count: message_default.format("dxDataGrid-summaryCount")
      }
    },
    sortByGroupSummaryInfo: void 0
  }),
  views: {
    footerView: FooterView
  },
  extenders: {
    controllers: {
      data: data13,
      editing: editing3
    },
    views: {
      rowsView: rowsView11
    }
  }
});

// node_modules/devextreme/esm/__internal/grids/grid_core/column_fixing/m_column_fixing.js
var CONTENT_CLASS5 = "content";
var CONTENT_FIXED_CLASS3 = "content-fixed";
var MASTER_DETAIL_CELL_CLASS3 = "dx-master-detail-cell";
var FIRST_CELL_CLASS = "dx-first-cell";
var LAST_CELL_CLASS = "dx-last-cell";
var HOVER_STATE_CLASS = "dx-state-hover";
var FIXED_COL_CLASS = "dx-col-fixed";
var FIXED_COLUMNS_CLASS = "dx-fixed-columns";
var POINTER_EVENTS_NONE_CLASS = "dx-pointer-events-none";
var COMMAND_TRANSPARENT2 = "transparent";
var GROUP_ROW_CLASS4 = "dx-group-row";
var DETAIL_ROW_CLASS2 = "dx-master-detail-row";
var getTransparentColumnIndex = function(fixedColumns) {
  var transparentColumnIndex = -1;
  each(fixedColumns, (index, column) => {
    if (column.command === COMMAND_TRANSPARENT2) {
      transparentColumnIndex = index;
      return false;
    }
    return;
  });
  return transparentColumnIndex;
};
var normalizeColumnWidths = function(fixedColumns, widths, fixedWidths) {
  var fixedColumnIndex = 0;
  if (fixedColumns && widths && fixedWidths) {
    for (var i = 0; i < fixedColumns.length; i++) {
      if (fixedColumns[i].command === COMMAND_TRANSPARENT2) {
        fixedColumnIndex += fixedColumns[i].colspan;
      } else {
        if (widths[fixedColumnIndex] < fixedWidths[i]) {
          widths[fixedColumnIndex] = fixedWidths[i];
        }
        fixedColumnIndex++;
      }
    }
  }
  return widths;
};
var baseFixedColumns = (Base) => class extends Base {
  init() {
    super.init();
    this._isFixedTableRendering = false;
    this._isFixedColumns = false;
  }
  _createCol(column) {
    return super._createCol(column).toggleClass(FIXED_COL_CLASS, !!(this._isFixedTableRendering && (column.fixed || column.command && column.command !== COMMAND_TRANSPARENT2)));
  }
  isIndicesArray(arr) {
    return Array.isArray(arr) && arr.length > 0;
  }
  _correctColumnIndicesForFixedColumns(fixedColumns, change) {
    var _a;
    var columnIndicesArray = null === change || void 0 === change ? void 0 : change.columnIndices;
    if (!this.isIndicesArray(columnIndicesArray)) {
      return;
    }
    var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);
    var transparentColspan = fixedColumns[transparentColumnIndex].colspan;
    var transparentOffset = transparentColumnIndex + transparentColspan;
    var rowTypes = null === (_a = null === change || void 0 === change ? void 0 : change.items) || void 0 === _a ? void 0 : _a.map((_ref) => {
      var {
        rowType
      } = _ref;
      return rowType;
    });
    change.columnIndices = columnIndicesArray.map((columnIndices, idx) => {
      if (!this.isIndicesArray(columnIndices)) {
        return columnIndices;
      }
      var isGroupRow3 = rowTypes && "group" === rowTypes[idx];
      if (isGroupRow3) {
        return [...columnIndices];
      }
      return columnIndices.reduce((result2, colIdx) => {
        switch (true) {
          case colIdx < transparentColumnIndex:
            result2.push(colIdx);
            break;
          case colIdx >= transparentOffset:
            result2.push(colIdx - transparentColspan + 1);
        }
        return result2;
      }, []);
    });
  }
  _partialUpdateFixedTable(fixedColumns, rows) {
    var fixedTableElement = this._fixedTableElement;
    var $rows = this._getRowElementsCore(fixedTableElement);
    var $colgroup = fixedTableElement.children("colgroup");
    $colgroup.replaceWith(this._createColGroup(fixedColumns));
    for (var i = 0; i < rows.length; i++) {
      this._partialUpdateFixedRow(renderer_default($rows[i]), fixedColumns, rows[i]);
    }
  }
  _partialUpdateFixedRow($row, fixedColumns, row) {
    var _a;
    var cellElements = $row.get(0).childNodes;
    var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);
    var transparentColumn = fixedColumns[transparentColumnIndex];
    var columnIndexOffset = this._columnsController.getColumnIndexOffset();
    var groupCellOptions;
    var colIndex = columnIndexOffset + 1;
    var {
      colspan
    } = transparentColumn;
    if ($row.hasClass(DETAIL_ROW_CLASS2)) {
      cellElements[0].setAttribute("colspan", null === (_a = this._columnsController.getVisibleColumns()) || void 0 === _a ? void 0 : _a.length);
      return;
    }
    if ($row.hasClass(GROUP_ROW_CLASS4)) {
      groupCellOptions = this._getGroupCellOptions({
        row,
        columns: this._columnsController.getVisibleColumns()
      });
      var hasSummary = row.summaryCells.length > 0;
      if (hasSummary) {
        var alignByColumnCellCount = this._getAlignByColumnCellCount(groupCellOptions.colspan, {
          columns: this._columnsController.getVisibleColumns(),
          row,
          isFixed: true
        });
        colspan = groupCellOptions.colspan - alignByColumnCellCount;
      } else {
        colspan = groupCellOptions.colspan - Math.max(0, cellElements.length - (groupCellOptions.columnIndex + 2));
      }
    }
    for (var j = 0; j < cellElements.length; j++) {
      var needUpdateColspan = groupCellOptions ? j === groupCellOptions.columnIndex + 1 : j === transparentColumnIndex;
      cellElements[j].setAttribute("aria-colindex", colIndex);
      if (needUpdateColspan) {
        cellElements[j].setAttribute("colspan", colspan);
        colIndex += colspan;
      } else {
        colIndex++;
      }
    }
  }
  _renderTable(options2) {
    var _a, _b;
    var $fixedTable;
    var fixedColumns = this.getFixedColumns();
    this._isFixedColumns = !!fixedColumns.length;
    var $table = super._renderTable(options2);
    if (this._isFixedColumns) {
      var change = null === options2 || void 0 === options2 ? void 0 : options2.change;
      var $fixedDataRows = this._getRowElements(this._fixedTableElement);
      var needPartialUpdate = (null === change || void 0 === change ? void 0 : change.virtualColumnsScrolling) && $fixedDataRows.length === (null === (_a = null === change || void 0 === change ? void 0 : change.items) || void 0 === _a ? void 0 : _a.length);
      this._isFixedTableRendering = true;
      if (needPartialUpdate && true !== this.option("scrolling.legacyMode")) {
        this._partialUpdateFixedTable(fixedColumns, null === (_b = null === options2 || void 0 === options2 ? void 0 : options2.change) || void 0 === _b ? void 0 : _b.items);
        this._isFixedTableRendering = false;
      } else {
        var columnIndices = null === change || void 0 === change ? void 0 : change.columnIndices;
        this._correctColumnIndicesForFixedColumns(fixedColumns, change);
        $fixedTable = this._createTable(fixedColumns);
        this._renderRows($fixedTable, extend({}, options2, {
          columns: fixedColumns
        }));
        this._updateContent($fixedTable, change, true);
        if (columnIndices) {
          change.columnIndices = columnIndices;
        }
        this._isFixedTableRendering = false;
      }
    } else {
      this._fixedTableElement && this._fixedTableElement.parent().remove();
      this._fixedTableElement = null;
    }
    return $table;
  }
  _renderRow($table, options2) {
    var fixedCorrection;
    var {
      cells
    } = options2.row;
    super._renderRow.apply(this, arguments);
    if (this._isFixedTableRendering && cells && cells.length) {
      fixedCorrection = 0;
      var fixedCells = options2.row.cells || [];
      cells = cells.slice();
      options2.row.cells = cells;
      for (var i = 0; i < fixedCells.length; i++) {
        if (fixedCells[i].column && fixedCells[i].column.command === COMMAND_TRANSPARENT2) {
          fixedCorrection = (fixedCells[i].column.colspan || 1) - 1;
          continue;
        }
        cells[i + fixedCorrection] = fixedCells[i];
      }
    }
  }
  _createCell(options2) {
    var {
      column
    } = options2;
    var columnCommand = column && column.command;
    var {
      rowType
    } = options2;
    var $cell = super._createCell.apply(this, arguments);
    var fixedColumns;
    var prevFixedColumn;
    var transparentColumnIndex;
    if (this._isFixedTableRendering || "filter" === rowType) {
      fixedColumns = this.getFixedColumns();
      transparentColumnIndex = getTransparentColumnIndex(fixedColumns);
      prevFixedColumn = fixedColumns[transparentColumnIndex - 1];
    }
    if (this._isFixedTableRendering) {
      if (columnCommand === COMMAND_TRANSPARENT2) {
        $cell.addClass(POINTER_EVENTS_NONE_CLASS).toggleClass(FIRST_CELL_CLASS, 0 === transparentColumnIndex || prevFixedColumn && "expand" === prevFixedColumn.command).toggleClass(LAST_CELL_CLASS, fixedColumns.length && transparentColumnIndex === fixedColumns.length - 1);
        if ("freeSpace" !== rowType) {
          m_utils_default.setEmptyText($cell);
        }
      }
    } else if ("filter" === rowType) {
      $cell.toggleClass(FIRST_CELL_CLASS, options2.columnIndex === transparentColumnIndex);
    }
    var isRowAltStyle = this.option("rowAlternationEnabled") && options2.isAltRow;
    var isSelectAllCell = "multiple" === this.option("selection.mode") && 0 === options2.columnIndex && "header" === options2.rowType;
    if (browser_default.mozilla && options2.column.fixed && "group" !== options2.rowType && !isRowAltStyle && !isSelectAllCell) {
      $cell.addClass(FIXED_COL_CLASS);
    }
    return $cell;
  }
  _getContent(isFixedTableRendering) {
    var _a;
    return isFixedTableRendering ? null === (_a = this._fixedTableElement) || void 0 === _a ? void 0 : _a.parent() : super._getContent.apply(this, arguments);
  }
  _wrapTableInScrollContainer($table, isFixedTableRendering) {
    var $scrollContainer = super._wrapTableInScrollContainer.apply(this, arguments);
    if (this._isFixedTableRendering || isFixedTableRendering) {
      $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_FIXED_CLASS3));
    }
    return $scrollContainer;
  }
  _renderCellContent($cell, options2) {
    var _a, _b;
    var isEmptyCell;
    var {
      column
    } = options2;
    var isFixedTableRendering = this._isFixedTableRendering;
    var isGroupCell = "group" === options2.rowType && isDefined(column.groupIndex);
    if (isFixedTableRendering && isGroupCell && !column.command && !column.groupCellTemplate) {
      $cell.css("pointerEvents", "none");
    }
    if (!isFixedTableRendering && this._isFixedColumns) {
      isEmptyCell = column.fixed || column.command && false !== column.fixed;
      if (isGroupCell) {
        isEmptyCell = false;
        if (options2.row.summaryCells && options2.row.summaryCells.length) {
          var columns7 = this._columnsController.getVisibleColumns();
          var alignByFixedColumnCellCount = null !== (_b = null === (_a = this._getAlignByColumnCellCount) || void 0 === _a ? void 0 : _a.call(this, column.colspan, {
            columns: columns7,
            row: options2.row,
            isFixed: true
          })) && void 0 !== _b ? _b : 0;
          if (alignByFixedColumnCellCount > 0) {
            var transparentColumnIndex = getTransparentColumnIndex(this._columnsController.getFixedColumns());
            isEmptyCell = columns7.length - alignByFixedColumnCellCount < transparentColumnIndex;
          }
        }
      }
      if (isEmptyCell) {
        if (column.command && "buttons" !== column.type || "group" === options2.rowType) {
          $cell.html("&nbsp;").addClass(column.cssClass);
          return;
        }
        $cell.addClass("dx-hidden-cell");
      }
    }
    if (column.command !== COMMAND_TRANSPARENT2) {
      super._renderCellContent.apply(this, arguments);
    }
  }
  _getCellElementsCore(rowIndex) {
    var cellElements = super._getCellElementsCore.apply(this, arguments);
    var isGroupRow3 = null === cellElements || void 0 === cellElements ? void 0 : cellElements.parent().hasClass(GROUP_ROW_CLASS4);
    var headerRowIndex = "columnHeadersView" === this.name ? rowIndex : void 0;
    if (this._fixedTableElement && cellElements) {
      var fixedColumns = this.getFixedColumns(headerRowIndex);
      var fixedCellElements = this._getRowElements(this._fixedTableElement).eq(rowIndex).children("td");
      each(fixedCellElements, (columnIndex, cell) => {
        if (isGroupRow3) {
          if (cellElements[columnIndex] && "hidden" !== cell.style.visibility) {
            cellElements[columnIndex] = cell;
          }
        } else {
          var fixedColumn = fixedColumns[columnIndex];
          if (fixedColumn) {
            if (fixedColumn.command === COMMAND_TRANSPARENT2) {
              if (fixedCellElements.eq(columnIndex).hasClass(MASTER_DETAIL_CELL_CLASS3)) {
                cellElements[columnIndex] = cell || cellElements[columnIndex];
              }
            } else {
              var fixedColumnIndex = this._columnsController.getVisibleIndexByColumn(fixedColumn, headerRowIndex);
              cellElements[fixedColumnIndex] = cell || cellElements[fixedColumnIndex];
            }
          }
        }
      });
    }
    return cellElements;
  }
  getColumnWidths(fixedTableElement) {
    var result2 = super.getColumnWidths();
    var fixedColumns = this.getFixedColumns();
    var fixedWidths = this._fixedTableElement && result2.length ? super.getColumnWidths(this._fixedTableElement) : void 0;
    return normalizeColumnWidths(fixedColumns, result2, fixedWidths);
  }
  getTableElement(isFixedTableRendering) {
    isFixedTableRendering = this._isFixedTableRendering || isFixedTableRendering;
    var tableElement = isFixedTableRendering ? this._fixedTableElement : super.getTableElement();
    return tableElement;
  }
  setTableElement(tableElement, isFixedTableRendering) {
    if (this._isFixedTableRendering || isFixedTableRendering) {
      this._fixedTableElement = tableElement.addClass(POINTER_EVENTS_NONE_CLASS);
    } else {
      super.setTableElement(tableElement);
    }
  }
  getColumns(rowIndex) {
    var $tableElement = this.getTableElement();
    if (this._isFixedTableRendering) {
      return this.getFixedColumns(rowIndex);
    }
    return super.getColumns(rowIndex, $tableElement);
  }
  getRowIndex($row) {
    var $fixedTable = this._fixedTableElement;
    if ($fixedTable && $fixedTable.find($row).length) {
      return this._getRowElements($fixedTable).index($row);
    }
    return super.getRowIndex($row);
  }
  getTableElements() {
    var result2 = super.getTableElements.apply(this, arguments);
    if (this._fixedTableElement) {
      result2 = renderer_default([result2.get(0), this._fixedTableElement.get(0)]);
    }
    return result2;
  }
  getFixedColumns(rowIndex) {
    return this._columnsController.getFixedColumns(rowIndex);
  }
  getFixedColumnsOffset() {
    var offset = {
      left: 0,
      right: 0
    };
    var $transparentColumn;
    if (this._fixedTableElement) {
      $transparentColumn = this.getTransparentColumnElement();
      var positionTransparentColumn = $transparentColumn.position();
      offset = {
        left: positionTransparentColumn.left,
        right: getOuterWidth(this.element(), true) - (getOuterWidth($transparentColumn, true) + positionTransparentColumn.left)
      };
    }
    return offset;
  }
  getTransparentColumnElement() {
    return this._fixedTableElement && this._fixedTableElement.find(".".concat(POINTER_EVENTS_NONE_CLASS)).first();
  }
  getFixedTableElement() {
    return this._fixedTableElement;
  }
  isFixedColumns() {
    return this._isFixedColumns;
  }
  _resizeCore() {
    super._resizeCore();
    this.synchronizeRows();
  }
  setColumnWidths(options2) {
    var _a;
    var {
      widths
    } = options2;
    var visibleColumns = this._columnsController.getVisibleColumns();
    var isColumnWidthsSynced = (null === widths || void 0 === widths ? void 0 : widths.length) && visibleColumns.some((column) => isDefined(column.visibleWidth));
    var isColumnWidthChanged = null === (_a = options2.optionNames) || void 0 === _a ? void 0 : _a.width;
    super.setColumnWidths(options2);
    if (this._fixedTableElement) {
      var hasAutoWidth = null === widths || void 0 === widths ? void 0 : widths.some((width) => "auto" === width || !isDefined(width));
      var needVisibleColumns = hasAutoWidth && (!isColumnWidthsSynced || !this.isScrollbarVisible(true));
      var columns7 = needVisibleColumns ? visibleColumns : this.getFixedColumns();
      this.setFixedTableColumnWidths(columns7, widths);
    }
    var wordWrapEnabled = this.option("wordWrapEnabled");
    var needSynchronizeRows = isColumnWidthsSynced || isColumnWidthChanged && wordWrapEnabled;
    if (needSynchronizeRows) {
      this.synchronizeRows();
    }
  }
  setFixedTableColumnWidths(columns7, widths) {
    if (!this._fixedTableElement || !widths) {
      return;
    }
    var $cols = this._fixedTableElement.children("colgroup").children("col");
    $cols.toArray().forEach((col) => col.removeAttribute("style"));
    var columnIndex = 0;
    columns7.forEach((column) => {
      if (column.colspan) {
        columnIndex += column.colspan;
        return;
      }
      var colWidth = normalizeWidth(widths[columnIndex]);
      if (isDefined(colWidth)) {
        setWidth($cols.eq(columnIndex), colWidth);
      }
      columnIndex += 1;
    });
  }
  _getClientHeight(element) {
    var boundingClientRectElement = element.getBoundingClientRect && getBoundingRect(element);
    return boundingClientRectElement && boundingClientRectElement.height ? boundingClientRectElement.height : element.clientHeight;
  }
  synchronizeRows() {
    var rowHeights = [];
    var fixedRowHeights = [];
    var rowIndex;
    var $rowElements;
    var $fixedRowElements;
    var $contentElement;
    this.waitAsyncTemplates(true).done(() => {
      if (this._isFixedColumns && this._tableElement && this._fixedTableElement) {
        var heightTable = this._getClientHeight(this._tableElement.get(0));
        var heightFixedTable = this._getClientHeight(this._fixedTableElement.get(0));
        $rowElements = this._getRowElements(this._tableElement);
        $fixedRowElements = this._getRowElements(this._fixedTableElement);
        $contentElement = this._findContentElement();
        if (heightTable !== heightFixedTable) {
          $contentElement && $contentElement.css("height", heightTable);
          $rowElements.css("height", "");
          $fixedRowElements.css("height", "");
          for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {
            rowHeights.push(this._getClientHeight($rowElements.get(rowIndex)));
            fixedRowHeights.push(this._getClientHeight($fixedRowElements.get(rowIndex)));
          }
          for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {
            var rowHeight = rowHeights[rowIndex];
            var fixedRowHeight = fixedRowHeights[rowIndex];
            if (rowHeight > fixedRowHeight) {
              $fixedRowElements.eq(rowIndex).css("height", rowHeight);
            } else if (rowHeight < fixedRowHeight) {
              $rowElements.eq(rowIndex).css("height", fixedRowHeight);
            }
          }
          $contentElement && $contentElement.css("height", "");
        }
      }
    });
  }
  setScrollerSpacing(width, hWidth) {
    var rtlEnabled = this.option("rtlEnabled");
    super.setScrollerSpacing(width);
    this.element().children(".".concat(this.addWidgetPrefix(CONTENT_FIXED_CLASS3))).css({
      paddingLeft: rtlEnabled ? width : "",
      paddingRight: !rtlEnabled ? width : ""
    });
  }
};
var columnHeadersView6 = (Base) => class extends baseFixedColumns(Base) {
  _getRowVisibleColumns(rowIndex) {
    if (this._isFixedTableRendering) {
      return this.getFixedColumns(rowIndex);
    }
    return super._getRowVisibleColumns(rowIndex);
  }
  getContextMenuItems(options2) {
    var {
      column
    } = options2;
    var columnFixingOptions = this.option("columnFixing");
    var items = super.getContextMenuItems(options2);
    if (options2.row && "header" === options2.row.rowType) {
      if (true === columnFixingOptions.enabled && column && column.allowFixing) {
        var onItemClick = (params) => {
          switch (params.itemData.value) {
            case "none":
              this._columnsController.columnOption(column.index, "fixed", false);
              break;
            case "left":
              this._columnsController.columnOption(column.index, {
                fixed: true,
                fixedPosition: "left"
              });
              break;
            case "right":
              this._columnsController.columnOption(column.index, {
                fixed: true,
                fixedPosition: "right"
              });
          }
        };
        items = items || [];
        items.push({
          text: columnFixingOptions.texts.fix,
          beginGroup: true,
          items: [{
            text: columnFixingOptions.texts.leftPosition,
            value: "left",
            disabled: column.fixed && (!column.fixedPosition || "left" === column.fixedPosition),
            onItemClick
          }, {
            text: columnFixingOptions.texts.rightPosition,
            value: "right",
            disabled: column.fixed && "right" === column.fixedPosition,
            onItemClick
          }]
        }, {
          text: columnFixingOptions.texts.unfix,
          value: "none",
          disabled: !column.fixed,
          onItemClick
        });
      }
    }
    return items;
  }
  getFixedColumnElements(rowIndex) {
    if (isDefined(rowIndex)) {
      return this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).children();
    }
    var columnElements = this.getColumnElements();
    var $transparentColumnElement = this.getTransparentColumnElement();
    if (columnElements && $transparentColumnElement && $transparentColumnElement.length) {
      var transparentColumnIndex = getTransparentColumnIndex(this.getFixedColumns());
      columnElements.splice(transparentColumnIndex, $transparentColumnElement.get(0).colSpan, $transparentColumnElement.get(0));
    }
    return columnElements;
  }
  getColumnWidths() {
    var fixedWidths;
    var result2 = super.getColumnWidths();
    var $fixedColumnElements = this.getFixedColumnElements();
    var fixedColumns = this.getFixedColumns();
    if (this._fixedTableElement) {
      if ($fixedColumnElements && $fixedColumnElements.length) {
        fixedWidths = this._getWidths($fixedColumnElements);
      } else {
        fixedWidths = super.getColumnWidths(this._fixedTableElement);
      }
    }
    return normalizeColumnWidths(fixedColumns, result2, fixedWidths);
  }
};
var rowsView12 = (Base) => class extends baseFixedColumns(Base) {
  dispose() {
    super.dispose.apply(this, arguments);
    clearTimeout(this._fixedScrollTimeout);
  }
  optionChanged(args) {
    super.optionChanged(args);
    if ("hoverStateEnabled" === args.name && this._isFixedColumns) {
      args.value ? this._attachHoverEvents() : this._detachHoverEvents();
    }
  }
  _detachHoverEvents() {
    var element = this.element();
    if (this._fixedTableElement && this._tableElement) {
      events_engine_default.off(element, "mouseover mouseout", ".dx-data-row");
    }
  }
  _attachHoverEvents() {
    if (this._fixedTableElement && this._tableElement) {
      events_engine_default.on(this.element(), "mouseover mouseout", ".dx-data-row", this.createAction((args) => {
        var {
          event
        } = args;
        var rowIndex = this.getRowIndex(renderer_default(event.target).closest(".dx-row"));
        var isHover = "mouseover" === event.type;
        if (rowIndex >= 0) {
          this._tableElement && this._getRowElements(this._tableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);
          this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);
        }
      }));
    }
  }
  _getScrollDelay() {
    var _a;
    var hasResizeTimeout = null === (_a = this._resizingController) || void 0 === _a ? void 0 : _a.hasResizeTimeout();
    if (hasResizeTimeout) {
      return this.option("scrolling.updateTimeout");
    }
    return browser_default.mozilla ? 60 : 0;
  }
  _findContentElement(isFixedTableRendering) {
    var $content;
    var scrollTop;
    var contentClass = this.addWidgetPrefix(CONTENT_CLASS5);
    var element = this.element();
    isFixedTableRendering = this._isFixedTableRendering || isFixedTableRendering;
    if (element && isFixedTableRendering) {
      $content = element.children(".".concat(contentClass));
      var scrollable = this.getScrollable();
      if (!$content.length && scrollable) {
        $content = renderer_default("<div>").addClass(contentClass);
        events_engine_default.on($content, "scroll", (e) => {
          var {
            target
          } = e;
          var scrollDelay = this._getScrollDelay();
          clearTimeout(this._fixedScrollTimeout);
          this._fixedScrollTimeout = setTimeout(() => {
            scrollTop = renderer_default(target).scrollTop();
            scrollable.scrollTo({
              y: scrollTop
            });
          }, scrollDelay);
        });
        events_engine_default.on($content, EVENT_NAME, (e) => {
          var $nearestScrollable = renderer_default(e.target).closest(".dx-scrollable");
          var shouldScroll = false;
          if (scrollable && scrollable.$element().is($nearestScrollable)) {
            shouldScroll = true;
          } else {
            var nearestScrollableInstance = $nearestScrollable.length && ui_scrollable_default.getInstance($nearestScrollable.get(0));
            var nearestScrollableHasVerticalScrollbar = nearestScrollableInstance && nearestScrollableInstance.scrollHeight() - nearestScrollableInstance.clientHeight() > 0;
            shouldScroll = nearestScrollableInstance && !nearestScrollableHasVerticalScrollbar;
          }
          if (shouldScroll) {
            scrollTop = scrollable.scrollTop();
            scrollable.scrollTo({
              y: scrollTop - e.delta
            });
            var scrollableTop = scrollable.scrollTop() + scrollable.clientHeight();
            var scrollableHeight = scrollable.scrollHeight() + this.getScrollbarWidth();
            var isPreventDefault = scrollable.scrollTop() > 0 && scrollableTop < scrollableHeight;
            if (isPreventDefault) {
              return false;
            }
          }
          return;
        });
        $content.appendTo(element);
      }
      return $content;
    }
    return super._findContentElement();
  }
  _updateScrollable() {
    super._updateScrollable();
    var scrollable = this.getScrollable();
    if (null === scrollable || void 0 === scrollable ? void 0 : scrollable._disposed) {
      return;
    }
    var scrollTop = scrollable && scrollable.scrollOffset().top;
    this._updateFixedTablePosition(scrollTop);
  }
  _renderContent(contentElement, tableElement, isFixedTableRendering) {
    if (this._isFixedTableRendering || isFixedTableRendering) {
      return contentElement.empty().addClass("".concat(this.addWidgetPrefix(CONTENT_CLASS5), " ").concat(this.addWidgetPrefix(CONTENT_FIXED_CLASS3))).append(tableElement);
    }
    return super._renderContent(contentElement, tableElement);
  }
  _getGroupCellOptions(options2) {
    if (this._isFixedTableRendering) {
      return super._getGroupCellOptions(extend({}, options2, {
        columns: this._columnsController.getVisibleColumns()
      }));
    }
    return super._getGroupCellOptions(options2);
  }
  _renderGroupedCells($row, options2) {
    return super._renderGroupedCells($row, extend({}, options2, {
      columns: this._columnsController.getVisibleColumns()
    }));
  }
  _renderGroupSummaryCells($row, options2) {
    if (this._isFixedTableRendering) {
      super._renderGroupSummaryCells($row, extend({}, options2, {
        columns: this._columnsController.getVisibleColumns()
      }));
    } else {
      super._renderGroupSummaryCells($row, options2);
    }
  }
  _hasAlignByColumnSummaryItems(columnIndex, options2) {
    var result2 = super._hasAlignByColumnSummaryItems.apply(this, arguments);
    var column = options2.columns[columnIndex];
    if (options2.isFixed) {
      return column.fixed && (result2 || "right" === column.fixedPosition);
    }
    return result2 && (!this._isFixedColumns || !column.fixed);
  }
  _renderGroupSummaryCellsCore($groupCell, options2, groupCellColSpan, alignByColumnCellCount) {
    var alignByFixedColumnCellCount;
    if (this._isFixedTableRendering) {
      options2.isFixed = true;
      alignByFixedColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options2);
      options2.isFixed = false;
      var startColumnIndex = options2.columns.length - alignByFixedColumnCellCount;
      options2 = extend({}, options2, {
        columns: this.getFixedColumns()
      });
      var transparentColumnIndex = getTransparentColumnIndex(options2.columns);
      if (startColumnIndex < transparentColumnIndex) {
        alignByFixedColumnCellCount -= options2.columns[transparentColumnIndex].colspan - 1 || 0;
        groupCellColSpan -= options2.columns[transparentColumnIndex].colspan - 1 || 0;
      } else if (alignByColumnCellCount > 0) {
        $groupCell.css("visibility", "hidden");
      }
      alignByColumnCellCount = alignByFixedColumnCellCount;
    }
    super._renderGroupSummaryCellsCore($groupCell, options2, groupCellColSpan, alignByColumnCellCount);
  }
  _getSummaryCellIndex(columnIndex, columns7) {
    if (this._isFixedTableRendering) {
      var transparentColumnIndex = getTransparentColumnIndex(columns7);
      if (columnIndex > transparentColumnIndex) {
        columnIndex += columns7[transparentColumnIndex].colspan - 1;
      }
      return columnIndex;
    }
    return super._getSummaryCellIndex.apply(this, arguments);
  }
  _renderCore(change) {
    this._detachHoverEvents();
    var deferred = super._renderCore(change);
    var isFixedColumns = this._isFixedColumns;
    this.element().toggleClass(FIXED_COLUMNS_CLASS, isFixedColumns);
    if (this.option("hoverStateEnabled") && isFixedColumns) {
      this._attachHoverEvents();
    }
    return deferred;
  }
  setAriaOwns(headerTableId, footerTableId, isFixed) {
    var _a, _b;
    if (isFixed) {
      var contentFixedClass = this.addWidgetPrefix(CONTENT_FIXED_CLASS3);
      var $contentFixedElement = null === (_a = this.element()) || void 0 === _a ? void 0 : _a.children(".".concat(contentFixedClass));
      var $fixedTableElement = this.getFixedTableElement();
      if ($contentFixedElement.length && (null === $fixedTableElement || void 0 === $fixedTableElement ? void 0 : $fixedTableElement.length)) {
        this.setAria("owns", "".concat(null !== headerTableId && void 0 !== headerTableId ? headerTableId : "", " ").concat(null !== (_b = $fixedTableElement.attr("id")) && void 0 !== _b ? _b : "", " ").concat(null !== footerTableId && void 0 !== footerTableId ? footerTableId : "").trim(), $contentFixedElement);
      }
    } else {
      super.setAriaOwns.apply(this, arguments);
    }
  }
  setRowsOpacity(columnIndex, value2) {
    super.setRowsOpacity(columnIndex, value2);
    var $rows = this._getRowElements(this._fixedTableElement);
    this._setRowsOpacityCore($rows, this.getFixedColumns(), columnIndex, value2);
  }
  getCellIndex($cell) {
    var $fixedTable = this._fixedTableElement;
    var cellIndex = 0;
    if ($fixedTable && $cell.is("td") && $cell.closest($fixedTable).length) {
      var columns7 = this.getFixedColumns();
      each(columns7, (index, column) => {
        if (index === $cell[0].cellIndex) {
          return false;
        }
        if (column.colspan) {
          cellIndex += column.colspan;
          return;
        }
        cellIndex++;
        return;
      });
      return cellIndex;
    }
    return super.getCellIndex.apply(this, arguments);
  }
  _updateFixedTablePosition(scrollTop, needFocus) {
    if (this._fixedTableElement && this._tableElement) {
      var $focusedElement;
      this._fixedTableElement.parent().scrollTop(scrollTop);
      if (needFocus && this._editorFactoryController) {
        $focusedElement = this._editorFactoryController.focus();
        $focusedElement && this._editorFactoryController.focus($focusedElement);
      }
    }
  }
  setScrollerSpacing(vWidth, hWidth) {
    var styles = {
      marginBottom: 0
    };
    var $fixedContent = this.element().children(".".concat(this.addWidgetPrefix(CONTENT_FIXED_CLASS3)));
    if ($fixedContent.length && this._fixedTableElement) {
      $fixedContent.css(styles);
      this._fixedTableElement.css(styles);
      styles[this.option("rtlEnabled") ? "marginLeft" : "marginRight"] = vWidth;
      styles.marginBottom = hWidth;
      var useNativeScrolling = this._scrollable && this._scrollable.option("useNative");
      (useNativeScrolling ? $fixedContent : this._fixedTableElement).css(styles);
    }
  }
  _getElasticScrollTop(e) {
    var elasticScrollTop = 0;
    if (e.scrollOffset.top < 0) {
      elasticScrollTop = -e.scrollOffset.top;
    } else if (e.reachedBottom) {
      var $scrollableContent = renderer_default(e.component.content());
      var $scrollableContainer = renderer_default(e.component.container());
      var maxScrollTop = Math.max($scrollableContent.get(0).clientHeight - $scrollableContainer.get(0).clientHeight, 0);
      elasticScrollTop = Math.min(maxScrollTop - e.scrollOffset.top, 0);
    }
    return Math.floor(elasticScrollTop);
  }
  _applyElasticScrolling(e) {
    if (this._fixedTableElement) {
      var elasticScrollTop = this._getElasticScrollTop(e);
      if (0 !== Math.ceil(elasticScrollTop)) {
        move(this._fixedTableElement, {
          top: elasticScrollTop
        });
      } else {
        this._fixedTableElement.css("transform", "");
      }
    }
  }
  _handleScroll(e) {
    this._updateFixedTablePosition(e.scrollOffset.top, true);
    this._applyElasticScrolling(e);
    super._handleScroll(e);
  }
  _updateContentPosition(isRender) {
    super._updateContentPosition.apply(this, arguments);
    if (!isRender) {
      this._updateFixedTablePosition(this._scrollTop);
    }
  }
  _afterRowPrepared(e) {
    if (this._isFixedTableRendering) {
      return;
    }
    super._afterRowPrepared(e);
  }
  _scrollToElement($element) {
    super._scrollToElement($element, this.getFixedColumnsOffset());
  }
};
var footerView = (Base) => class extends baseFixedColumns(Base) {
};
var normalizeColumnIndicesByPoints = function(columns7, fixedColumns, pointsByColumns) {
  var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);
  var correctIndex = columns7.length - fixedColumns.length;
  each(pointsByColumns, (_, point) => {
    if (point.index > transparentColumnIndex) {
      point.columnIndex += correctIndex;
      point.index += correctIndex;
    }
  });
  return pointsByColumns;
};
var draggingHeader = (Base) => class extends Base {
  _generatePointsByColumns(options2) {
    var visibleColumns = options2.columns;
    var {
      targetDraggingPanel
    } = options2;
    if (targetDraggingPanel && "headers" === targetDraggingPanel.getName() && targetDraggingPanel.isFixedColumns()) {
      if (options2.sourceColumn.fixed) {
        if (!options2.rowIndex) {
          options2.columnElements = targetDraggingPanel.getFixedColumnElements(0);
        }
        options2.columns = targetDraggingPanel.getFixedColumns(options2.rowIndex);
        var pointsByColumns = super._generatePointsByColumns(options2);
        normalizeColumnIndicesByPoints(visibleColumns, options2.columns, pointsByColumns);
        return pointsByColumns;
      }
    }
    return super._generatePointsByColumns(options2);
  }
  _pointCreated(point, columns7, location, sourceColumn) {
    var result2 = super._pointCreated.apply(this, arguments);
    var targetColumn = columns7[point.columnIndex];
    var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();
    if (!result2 && "headers" === location && $transparentColumn && $transparentColumn.length) {
      var boundingRect = getBoundingRect($transparentColumn.get(0));
      if (sourceColumn && sourceColumn.fixed) {
        return "right" === sourceColumn.fixedPosition ? point.x < boundingRect.right : point.x > boundingRect.left;
      }
      if (targetColumn && targetColumn.fixed && "right" !== targetColumn.fixedPosition) {
        return true;
      }
      return point.x < boundingRect.left || point.x > boundingRect.right;
    }
    return result2;
  }
};
var columnsResizer2 = (Base) => class extends Base {
  _generatePointsByColumns() {
    var that = this;
    var columnsController = that._columnsController;
    var columns7 = columnsController && that._columnsController.getVisibleColumns();
    var fixedColumns = columnsController && that._columnsController.getFixedColumns();
    var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);
    var correctIndex = columns7.length - fixedColumns.length;
    var cells = that._columnHeadersView.getFixedColumnElements();
    super._generatePointsByColumns();
    if (cells && cells.length > 0) {
      that._pointsByFixedColumns = m_utils_default.getPointsByColumns(cells, (point) => {
        if (point.index > transparentColumnIndex) {
          point.columnIndex += correctIndex;
          point.index += correctIndex;
        }
        return that._pointCreated(point, columns7.length, columns7);
      });
    }
  }
  _getTargetPoint(pointsByColumns, currentX, deltaX) {
    var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();
    if ($transparentColumn && $transparentColumn.length) {
      var boundingRect = getBoundingRect($transparentColumn.get(0));
      if (currentX <= boundingRect.left || currentX >= boundingRect.right) {
        return super._getTargetPoint(this._pointsByFixedColumns, currentX, deltaX);
      }
    }
    return super._getTargetPoint(pointsByColumns, currentX, deltaX);
  }
};
var resizing4 = (Base) => class extends Base {
  _setAriaOwns() {
    var _a, _b, _c;
    super._setAriaOwns.apply(this, arguments);
    var headerFixedTable = null === (_a = this._columnHeadersView) || void 0 === _a ? void 0 : _a.getFixedTableElement();
    var footerFixedTable = null === (_b = this._footerView) || void 0 === _b ? void 0 : _b.getFixedTableElement();
    null === (_c = this._rowsView) || void 0 === _c ? void 0 : _c.setAriaOwns(null === headerFixedTable || void 0 === headerFixedTable ? void 0 : headerFixedTable.attr("id"), null === footerFixedTable || void 0 === footerFixedTable ? void 0 : footerFixedTable.attr("id"), true);
  }
};
var keyboardNavigation = (Base) => class extends Base {
  _toggleInertAttr(value2) {
    var _a;
    var $fixedContent = null === (_a = this._rowsView) || void 0 === _a ? void 0 : _a.getFixedContentElement();
    if (value2) {
      null === $fixedContent || void 0 === $fixedContent ? void 0 : $fixedContent.attr("inert", true);
    } else {
      null === $fixedContent || void 0 === $fixedContent ? void 0 : $fixedContent.removeAttr("inert");
    }
  }
};
var columnFixingModule = {
  defaultOptions: () => ({
    columnFixing: {
      enabled: false,
      texts: {
        fix: message_default.format("dxDataGrid-columnFixingFix"),
        unfix: message_default.format("dxDataGrid-columnFixingUnfix"),
        leftPosition: message_default.format("dxDataGrid-columnFixingLeftPosition"),
        rightPosition: message_default.format("dxDataGrid-columnFixingRightPosition")
      }
    }
  }),
  extenders: {
    views: {
      columnHeadersView: columnHeadersView6,
      rowsView: rowsView12,
      footerView
    },
    controllers: {
      draggingHeader,
      columnsResizer: columnsResizer2,
      resizing: resizing4,
      keyboardNavigation
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/column_fixing.js
m_core_default.registerModule("columnFixing", columnFixingModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/adaptivity/m_adaptivity.js
var COLUMN_HEADERS_VIEW2 = "columnHeadersView";
var ROWS_VIEW2 = "rowsView";
var FOOTER_VIEW = "footerView";
var COLUMN_VIEWS = [COLUMN_HEADERS_VIEW2, ROWS_VIEW2, FOOTER_VIEW];
var ADAPTIVE_NAMESPACE = "dxDataGridAdaptivity";
var HIDDEN_COLUMNS_WIDTH3 = "adaptiveHidden";
var ADAPTIVE_ROW_TYPE = "detailAdaptive";
var FORM_ITEM_CONTENT_CLASS = "dx-field-item-content";
var FORM_ITEM_MODIFIED = "dx-item-modified";
var HIDDEN_COLUMN_CLASS = "hidden-column";
var ADAPTIVE_COLUMN_BUTTON_CLASS = "adaptive-more";
var ADAPTIVE_COLUMN_NAME_CLASS2 = "dx-command-adaptive";
var COMMAND_ADAPTIVE_HIDDEN_CLASS = "dx-command-adaptive-hidden";
var ADAPTIVE_DETAIL_ROW_CLASS = "dx-adaptive-detail-row";
var ADAPTIVE_ITEM_TEXT_CLASS = "dx-adaptive-item-text";
var MASTER_DETAIL_CELL_CLASS4 = "dx-master-detail-cell";
var LAST_DATA_CELL_CLASS = "dx-last-data-cell";
var ADAPTIVE_COLUMN_NAME = "adaptive";
var EDIT_MODE_BATCH3 = "batch";
var EDIT_MODE_ROW3 = "row";
var EDIT_MODE_FORM3 = "form";
var EDIT_MODE_POPUP3 = "popup";
var REVERT_TOOLTIP_CLASS2 = "revert-tooltip";
var GROUP_CELL_CLASS4 = "dx-group-cell";
var GROUP_ROW_CLASS5 = "dx-group-row";
var EXPAND_ARIA_NAME = "dxDataGrid-ariaAdaptiveExpand";
var COLLAPSE_ARIA_NAME = "dxDataGrid-ariaAdaptiveCollapse";
var LEGACY_SCROLLING_MODE4 = "scrolling.legacyMode";
function getColumnId(that, column) {
  return that._columnsController.getColumnId(column);
}
function getDataCellElements($row) {
  return $row.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])");
}
function adaptiveCellTemplate(container, options2) {
  var $adaptiveColumnButton;
  var $container = renderer_default(container);
  var adaptiveColumnsController = options2.component.getController("adaptiveColumns");
  if ("data" === options2.rowType) {
    $adaptiveColumnButton = renderer_default("<span>").addClass(adaptiveColumnsController.addWidgetPrefix(ADAPTIVE_COLUMN_BUTTON_CLASS));
    events_engine_default.on($adaptiveColumnButton, addNamespace(CLICK_EVENT_NAME, ADAPTIVE_NAMESPACE), adaptiveColumnsController.createAction(() => {
      adaptiveColumnsController.toggleExpandAdaptiveDetailRow(options2.key);
    }));
    $adaptiveColumnButton.appendTo($container);
  } else {
    m_utils_default.setEmptyText($container);
  }
}
function focusCellHandler(e) {
  var _a;
  var $nextCell = null === (_a = e.data) || void 0 === _a ? void 0 : _a.$nextCell;
  events_engine_default.off($nextCell, "focus", focusCellHandler);
  events_engine_default.trigger($nextCell, "dxclick");
}
var AdaptiveColumnsController = class extends m_modules_default.ViewController {
  init() {
    this._columnsController = this.getController("columns");
    this._dataController = this.getController("data");
    this._editingController = this.getController("editing");
    this._keyboardNavigationController = this.getController("keyboardNavigation");
    this._rowsView = this.getView("rowsView");
    this._columnsController.addCommandColumn({
      type: ADAPTIVE_COLUMN_NAME,
      command: ADAPTIVE_COLUMN_NAME,
      visible: true,
      adaptiveHidden: true,
      cssClass: ADAPTIVE_COLUMN_NAME_CLASS2,
      alignment: "center",
      width: "auto",
      cellTemplate: adaptiveCellTemplate,
      fixedPosition: "right"
    });
    this._columnsController.columnsChanged.add(() => {
      var isAdaptiveVisible = !!this.updateHidingQueue(this._columnsController.getColumns()).length;
      this._columnsController.columnOption("command:adaptive", "adaptiveHidden", !isAdaptiveVisible, true);
    });
    this._hidingColumnsQueue = [];
    this._hiddenColumns = [];
    this.createAction("onAdaptiveDetailRowPreparing");
    super.init();
  }
  optionChanged(args) {
    if ("columnHidingEnabled" === args.name) {
      this._columnsController.columnOption("command:adaptive", "adaptiveHidden", !args.value);
    }
    super.optionChanged(args);
  }
  publicMethods() {
    return ["isAdaptiveDetailRowExpanded", "expandAdaptiveDetailRow", "collapseAdaptiveDetailRow"];
  }
  _isRowEditMode() {
    var editMode = this._getEditMode();
    return editMode === EDIT_MODE_ROW3;
  }
  _isItemModified(item, cellOptions) {
    var columnIndex = this._columnsController.getVisibleIndex(item.column.index);
    var rowIndex = this._dataController.getRowIndexByKey(cellOptions.key);
    var row = this._dataController.items()[rowIndex + 1];
    return row && row.modifiedValues && isDefined(row.modifiedValues[columnIndex]);
  }
  _renderFormViewTemplate(item, cellOptions, $container) {
    var that = this;
    var {
      column
    } = item;
    var focusAction = that.createAction(() => {
      if (that._editingController.isEditing()) {
        events_engine_default.trigger($container, CLICK_EVENT_NAME);
      }
    });
    var rowData = cellOptions.row.data;
    var value2 = column.calculateCellValue(rowData);
    var displayValue = m_utils_default.getDisplayValue(column, value2, rowData, cellOptions.rowType);
    var text = m_utils_default.formatValue(displayValue, column);
    var isCellOrBatchEditMode = this._editingController.isCellOrBatchEditMode();
    var rowsView17 = that._rowsView;
    if (column.allowEditing && this._keyboardNavigationController.isKeyboardEnabled()) {
      $container.attr("tabIndex", that.option("tabIndex"));
      if (isCellOrBatchEditMode) {
        events_engine_default.off($container, "focus", focusAction);
        events_engine_default.on($container, "focus", focusAction);
      }
    }
    if (column.cellTemplate) {
      var templateOptions = extend({}, cellOptions, {
        value: value2,
        displayValue,
        text,
        column
      });
      rowsView17.renderTemplate($container, column.cellTemplate, templateOptions, isElementInDom($container)).done(() => {
        rowsView17._cellPrepared($container, cellOptions);
      });
    } else {
      var container = $container.get(0);
      if (column.encodeHtml) {
        container.textContent = text;
      } else {
        container.innerHTML = text;
      }
      $container.addClass(ADAPTIVE_ITEM_TEXT_CLASS);
      if (!isDefined(text) || "" === text) {
        $container.html("&nbsp;");
      }
      if (!that._isRowEditMode()) {
        if (that._isItemModified(item, cellOptions)) {
          $container.addClass(FORM_ITEM_MODIFIED);
        }
      }
      rowsView17._cellPrepared($container, cellOptions);
    }
  }
  _getTemplate(item, cellOptions, updateForm) {
    var that = this;
    var {
      column
    } = item;
    var editingController = this._editingController;
    return function(options2, container) {
      var $container = renderer_default(container);
      var columnIndex = that._columnsController.getVisibleIndex(column.index);
      var templateOptions = extend({}, cellOptions);
      var renderFormTemplate = function() {
        var isItemEdited = that._isItemEdited(item);
        templateOptions.value = cellOptions.row.values[columnIndex];
        if (isItemEdited || column.showEditorAlways) {
          editingController.renderFormEditorTemplate(templateOptions, item, options2, $container, !isItemEdited);
        } else {
          templateOptions.column = column;
          templateOptions.columnIndex = columnIndex;
          that._renderFormViewTemplate(item, templateOptions, $container);
        }
      };
      renderFormTemplate();
      if (templateOptions.watch) {
        var dispose = templateOptions.watch(() => ({
          isItemEdited: that._isItemEdited(item),
          value: cellOptions.row.values[columnIndex]
        }), () => {
          $container.contents().remove();
          $container.removeClass(ADAPTIVE_ITEM_TEXT_CLASS);
          renderFormTemplate();
        });
        events_engine_default.on($container, removeEvent, dispose);
      }
    };
  }
  _isVisibleColumnsValid(visibleColumns) {
    if (visibleColumns < 2) {
      return false;
    }
    if (visibleColumns.length - function() {
      var result2 = 0;
      for (var j = 0; j < visibleColumns.length; j++) {
        var visibleColumn = visibleColumns[j];
        if (visibleColumn.command) {
          result2++;
        }
      }
      return result2;
    }() <= 1) {
      return false;
    }
    return true;
  }
  _calculatePercentWidths(widths, visibleColumns) {
    var that = this;
    var percentWidths = 0;
    visibleColumns.forEach((item, index) => {
      if (widths[index] !== HIDDEN_COLUMNS_WIDTH3) {
        percentWidths += that._getItemPercentWidth(item);
      }
    });
    return percentWidths;
  }
  _isPercentWidth(width) {
    return isString(width) && width.endsWith("%");
  }
  _isColumnHidden(column) {
    return this._hiddenColumns.filter((hiddenColumn) => hiddenColumn.index === column.index).length > 0;
  }
  _getAverageColumnsWidth(containerWidth, columns7, columnsCanFit) {
    var that = this;
    var fixedColumnsWidth = 0;
    var columnsWithoutFixedWidthCount = 0;
    columns7.forEach((column) => {
      if (!that._isColumnHidden(column)) {
        var {
          width
        } = column;
        if (isDefined(width) && !isNaN(parseFloat(width))) {
          fixedColumnsWidth += that._isPercentWidth(width) ? that._calculatePercentWidth({
            visibleIndex: column.visibleIndex,
            columnsCount: columns7.length,
            columnsCanFit,
            bestFitWidth: column.bestFitWidth,
            columnWidth: width,
            containerWidth
          }) : parseFloat(width);
        } else {
          columnsWithoutFixedWidthCount++;
        }
      }
    });
    return (containerWidth - fixedColumnsWidth) / columnsWithoutFixedWidthCount;
  }
  _calculateColumnWidth(column, containerWidth, contentColumns, columnsCanFit) {
    var columnId = getColumnId(this, column);
    var widthOption = this._columnsController.columnOption(columnId, "width");
    var bestFitWidth = this._columnsController.columnOption(columnId, "bestFitWidth");
    var columnsCount = contentColumns.length;
    var colWidth;
    if (widthOption && "auto" !== widthOption) {
      if (this._isPercentWidth(widthOption)) {
        colWidth = this._calculatePercentWidth({
          visibleIndex: column.visibleIndex,
          columnsCount,
          columnsCanFit,
          bestFitWidth,
          columnWidth: widthOption,
          containerWidth
        });
      } else {
        return parseFloat(widthOption);
      }
    } else {
      var columnAutoWidth = this.option("columnAutoWidth");
      colWidth = columnAutoWidth || !!column.command ? bestFitWidth : this._getAverageColumnsWidth(containerWidth, contentColumns, columnsCanFit);
    }
    return colWidth;
  }
  _calculatePercentWidth(options2) {
    var columnFitted = options2.visibleIndex < options2.columnsCount - 1 && options2.columnsCanFit;
    var partialWidth = options2.containerWidth * parseFloat(options2.columnWidth) / 100;
    var resultWidth = options2.columnsCanFit && partialWidth < options2.bestFitWidth ? options2.bestFitWidth : partialWidth;
    return columnFitted ? options2.containerWidth * parseFloat(options2.columnWidth) / 100 : resultWidth;
  }
  _getNotTruncatedColumnWidth(column, containerWidth, contentColumns, columnsCanFit) {
    var columnId = getColumnId(this, column);
    var widthOption = this._columnsController.columnOption(columnId, "width");
    var bestFitWidth = this._columnsController.columnOption(columnId, "bestFitWidth");
    if (widthOption && "auto" !== widthOption && !this._isPercentWidth(widthOption)) {
      return parseFloat(widthOption);
    }
    var colWidth = this._calculateColumnWidth(column, containerWidth, contentColumns, columnsCanFit);
    return colWidth < bestFitWidth ? null : colWidth;
  }
  _getItemPercentWidth(item) {
    var result2 = 0;
    if (item.width && this._isPercentWidth(item.width)) {
      result2 = parseFloat(item.width);
    }
    return result2;
  }
  _getCommandColumnsWidth() {
    var that = this;
    var columns7 = that._columnsController.getVisibleColumns();
    var colWidth = 0;
    each(columns7, (index, column) => {
      if (column.index < 0 || column.command) {
        colWidth += that._columnsController.columnOption(getColumnId(that, column), "bestFitWidth") || 0;
      }
    });
    return colWidth;
  }
  _isItemEdited(item) {
    if (this.isFormOrPopupEditMode()) {
      return false;
    }
    if (this._isRowEditMode()) {
      var editRowKey = this.option("editing.editRowKey");
      if (equalByValue(editRowKey, this._dataController.adaptiveExpandedKey())) {
        return true;
      }
    } else {
      var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;
      var columnIndex = this._columnsController.getVisibleIndex(item.column.index);
      return this._editingController.isEditCell(rowIndex, columnIndex);
    }
    return;
  }
  _getFormItemsByHiddenColumns(hiddenColumns) {
    var items = [];
    each(hiddenColumns, (_, column) => {
      items.push({
        column,
        name: column.name,
        dataField: column.dataField,
        visibleIndex: column.visibleIndex
      });
    });
    return items;
  }
  _getAdaptiveColumnVisibleIndex(visibleColumns) {
    for (var i = 0; i < visibleColumns.length; i++) {
      var column = visibleColumns[i];
      if (column.command === ADAPTIVE_COLUMN_NAME) {
        return i;
      }
    }
    return;
  }
  _hideAdaptiveColumn(resultWidths, visibleColumns) {
    var visibleIndex = this._getAdaptiveColumnVisibleIndex(visibleColumns);
    if (isDefined(visibleIndex)) {
      resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH3;
      this._hideVisibleColumn({
        isCommandColumn: true,
        visibleIndex
      });
    }
  }
  _showHiddenCellsInView(_ref) {
    var {
      $cells,
      isCommandColumn
    } = _ref;
    var cssClassNameToRemove = this.addWidgetPrefix(HIDDEN_COLUMN_CLASS);
    if (isCommandColumn) {
      cssClassNameToRemove = COMMAND_ADAPTIVE_HIDDEN_CLASS;
      $cells.attr({
        tabIndex: 0,
        "aria-hidden": null
      }).removeClass(cssClassNameToRemove);
    } else {
      $cells.removeClass(cssClassNameToRemove);
    }
  }
  _showHiddenColumns() {
    for (var i = 0; i < COLUMN_VIEWS.length; i++) {
      var view = this.getView(COLUMN_VIEWS[i]);
      if (view && view.isVisible() && view.element()) {
        var viewName2 = view.name;
        var $hiddenCommandCells = view.element().find(".".concat(COMMAND_ADAPTIVE_HIDDEN_CLASS));
        this._showHiddenCellsInView({
          viewName: viewName2,
          $cells: $hiddenCommandCells,
          isCommandColumn: true
        });
        var $hiddenCells = view.element().find(".".concat(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS)));
        this._showHiddenCellsInView({
          viewName: viewName2,
          $cells: $hiddenCells
        });
      }
    }
  }
  _isCellValid($cell) {
    return $cell && $cell.length && !$cell.hasClass(MASTER_DETAIL_CELL_CLASS4) && !$cell.hasClass(GROUP_CELL_CLASS4);
  }
  _hideVisibleColumn(_ref2) {
    var {
      isCommandColumn,
      visibleIndex
    } = _ref2;
    var that = this;
    COLUMN_VIEWS.forEach((viewName2) => {
      var view = that.getView(viewName2);
      view && that._hideVisibleColumnInView({
        view,
        isCommandColumn,
        visibleIndex
      });
    });
  }
  _hideVisibleColumnInView(_ref3) {
    var {
      view,
      isCommandColumn,
      visibleIndex
    } = _ref3;
    var viewName2 = view.name;
    var $cellElement;
    var column = this._columnsController.getVisibleColumns()[visibleIndex];
    var editFormRowIndex = this._editingController && this._editingController.getEditFormRowIndex();
    if (view && view.isVisible() && column) {
      var rowsCount = view.getRowsCount();
      var $rowElements = view._getRowElements();
      for (var rowIndex = 0; rowIndex < rowsCount; rowIndex++) {
        var cancelClassAdding = rowIndex === editFormRowIndex && viewName2 === ROWS_VIEW2 && "popup" !== this.option("editing.mode");
        if (!cancelClassAdding) {
          var currentVisibleIndex = viewName2 === COLUMN_HEADERS_VIEW2 ? this._columnsController.getVisibleIndex(column.index, rowIndex) : visibleIndex;
          if (currentVisibleIndex >= 0) {
            var $rowElement = $rowElements.eq(rowIndex);
            $cellElement = this._findCellElementInRow($rowElement, currentVisibleIndex);
            this._isCellValid($cellElement) && this._hideVisibleCellInView({
              viewName: viewName2,
              isCommandColumn,
              $cell: $cellElement
            });
          }
        }
      }
    }
  }
  _findCellElementInRow($rowElement, visibleColumnIndex) {
    var $rowCells = $rowElement.children();
    var visibleIndex = visibleColumnIndex;
    var cellIsInsideGroup = false;
    if ($rowElement.hasClass(GROUP_ROW_CLASS5)) {
      var $groupCell = $rowElement.find(".".concat(GROUP_CELL_CLASS4));
      var colSpan = $groupCell.attr("colspan");
      if ($groupCell.length && isDefined(colSpan)) {
        var groupCellLength = parseInt(colSpan);
        var endGroupIndex = $groupCell.index() + groupCellLength - 1;
        if (visibleColumnIndex > endGroupIndex) {
          visibleIndex = visibleColumnIndex - groupCellLength + 1;
        } else {
          cellIsInsideGroup = true;
        }
      }
    }
    var $cellElement = !cellIsInsideGroup ? $rowCells.eq(visibleIndex) : void 0;
    return $cellElement;
  }
  _hideVisibleCellInView(_ref4) {
    var {
      $cell,
      isCommandColumn
    } = _ref4;
    var cssClassNameToAdd = isCommandColumn ? COMMAND_ADAPTIVE_HIDDEN_CLASS : this.addWidgetPrefix(HIDDEN_COLUMN_CLASS);
    $cell.attr({
      tabIndex: -1,
      "aria-hidden": true
    }).addClass(cssClassNameToAdd);
  }
  _getEditMode() {
    return this._editingController.getEditMode();
  }
  isFormOrPopupEditMode() {
    var editMode = this._getEditMode();
    return editMode === EDIT_MODE_FORM3 || editMode === EDIT_MODE_POPUP3;
  }
  hideRedundantColumns(resultWidths, visibleColumns, hiddenQueue) {
    this._hiddenColumns = [];
    if (this._isVisibleColumnsValid(visibleColumns) && hiddenQueue.length) {
      var totalWidth = 0;
      var $rootElement = this.component.$element();
      var rootElementWidth = getWidth($rootElement) - this._getCommandColumnsWidth();
      var getVisibleContentColumns = (function() {
        return visibleColumns.filter((item) => !item.command && 0 === this._hiddenColumns.filter((i2) => i2.index === item.index).length);
      }).bind(this);
      var visibleContentColumns = getVisibleContentColumns();
      var contentColumnsCount = visibleContentColumns.length;
      var i;
      var hasHiddenColumns;
      var needHideColumn;
      do {
        needHideColumn = false;
        totalWidth = 0;
        var percentWidths = this._calculatePercentWidths(resultWidths, visibleColumns);
        var columnsCanFit = percentWidths < 100 && 0 !== percentWidths;
        for (i = 0; i < visibleColumns.length; i++) {
          var visibleColumn = visibleColumns[i];
          var columnWidth = this._getNotTruncatedColumnWidth(visibleColumn, rootElementWidth, visibleContentColumns, columnsCanFit);
          var columnId = getColumnId(this, visibleColumn);
          var widthOption = this._columnsController.columnOption(columnId, "width");
          var minWidth = this._columnsController.columnOption(columnId, "minWidth");
          var columnBestFitWidth = this._columnsController.columnOption(columnId, "bestFitWidth");
          if (resultWidths[i] === HIDDEN_COLUMNS_WIDTH3) {
            hasHiddenColumns = true;
            continue;
          }
          if (!columnWidth && !visibleColumn.command && !visibleColumn.fixed) {
            needHideColumn = true;
            break;
          }
          if (!widthOption || "auto" === widthOption) {
            columnWidth = Math.max(columnBestFitWidth || 0, minWidth || 0);
          }
          if (visibleColumn.command !== ADAPTIVE_COLUMN_NAME || hasHiddenColumns) {
            totalWidth += columnWidth;
          }
        }
        needHideColumn = needHideColumn || totalWidth > getWidth($rootElement);
        if (needHideColumn) {
          var column = hiddenQueue.pop();
          var visibleIndex = this._columnsController.getVisibleIndex(column.index);
          rootElementWidth += this._calculateColumnWidth(column, rootElementWidth, visibleContentColumns, columnsCanFit);
          this._hideVisibleColumn({
            visibleIndex
          });
          resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH3;
          this._hiddenColumns.push(column);
          visibleContentColumns = getVisibleContentColumns();
        }
      } while (needHideColumn && visibleContentColumns.length > 1 && hiddenQueue.length);
      if (contentColumnsCount === visibleContentColumns.length) {
        this._hideAdaptiveColumn(resultWidths, visibleColumns);
      }
    } else {
      this._hideAdaptiveColumn(resultWidths, visibleColumns);
    }
  }
  getAdaptiveDetailItems() {
    return this._$itemContents;
  }
  getItemContentByColumnIndex(visibleColumnIndex) {
    var $itemContent;
    for (var i = 0; i < this._$itemContents.length; i++) {
      $itemContent = this._$itemContents.eq(i);
      var item = $itemContent.data("dx-form-item");
      if (item && item.column && this._columnsController.getVisibleIndex(item.column.index) === visibleColumnIndex) {
        return $itemContent;
      }
    }
  }
  toggleExpandAdaptiveDetailRow(key, alwaysExpanded) {
    if (!(this.isFormOrPopupEditMode() && this._editingController.isEditing())) {
      this._dataController.toggleExpandAdaptiveDetailRow(key, alwaysExpanded);
    }
  }
  createFormByHiddenColumns(container, options2) {
    var that = this;
    var $container = renderer_default(container);
    var userFormOptions = {
      items: that._getFormItemsByHiddenColumns(that._hiddenColumns),
      formID: "dx-".concat(new guid_default())
    };
    var defaultFormOptions = isMaterial() ? {
      colCount: 2
    } : {};
    this.executeAction("onAdaptiveDetailRowPreparing", {
      formOptions: userFormOptions
    });
    that._$itemContents = null;
    that._form = that._createComponent(renderer_default("<div>").appendTo($container), form_default, extend(defaultFormOptions, userFormOptions, {
      customizeItem(item) {
        var column = item.column || that._columnsController.columnOption(item.name || item.dataField);
        if (column) {
          item.label = item.label || {};
          item.label.text = item.label.text || column.caption;
          item.column = column;
          item.template = that._getTemplate(item, options2, that.updateForm.bind(that));
        }
        userFormOptions.customizeItem && userFormOptions.customizeItem.call(this, item);
      },
      onContentReady(e) {
        userFormOptions.onContentReady && userFormOptions.onContentReady.call(this, e);
        that._$itemContents = $container.find(".".concat(FORM_ITEM_CONTENT_CLASS));
      }
    }));
  }
  hasAdaptiveDetailRowExpanded() {
    return isDefined(this._dataController.adaptiveExpandedKey());
  }
  updateForm(hiddenColumns) {
    if (this.hasAdaptiveDetailRowExpanded()) {
      if (this._form && isDefined(this._form._contentReadyAction)) {
        if (hiddenColumns && hiddenColumns.length) {
          this._form.option("items", this._getFormItemsByHiddenColumns(hiddenColumns));
        } else {
          this._form.repaint();
        }
      }
    }
  }
  updateHidingQueue(columns7) {
    var hideableColumns = columns7.filter((column) => column.visible && !column.type && !column.fixed && !(isDefined(column.groupIndex) && column.groupIndex >= 0));
    var columnsHasHidingPriority;
    var i;
    this._hidingColumnsQueue = [];
    if (this.option("allowColumnResizing") && "widget" === this.option("columnResizingMode")) {
      return this._hidingColumnsQueue;
    }
    for (i = 0; i < hideableColumns.length; i++) {
      if (isDefined(hideableColumns[i].hidingPriority) && hideableColumns[i].hidingPriority >= 0) {
        columnsHasHidingPriority = true;
        this._hidingColumnsQueue[hideableColumns[i].hidingPriority] = hideableColumns[i];
      }
    }
    if (columnsHasHidingPriority) {
      this._hidingColumnsQueue.reverse();
    } else if (this.option("columnHidingEnabled")) {
      for (i = 0; i < hideableColumns.length; i++) {
        var visibleIndex = this._columnsController.getVisibleIndex(hideableColumns[i].index);
        this._hidingColumnsQueue[visibleIndex] = hideableColumns[i];
      }
    }
    this._hidingColumnsQueue = this._hidingColumnsQueue.filter(Object);
    return this._hidingColumnsQueue;
  }
  getHiddenColumns() {
    return this._hiddenColumns;
  }
  hasHiddenColumns() {
    return this._hiddenColumns.length > 0;
  }
  getHidingColumnsQueue() {
    return this._hidingColumnsQueue;
  }
  isAdaptiveDetailRowExpanded(key) {
    var dataController2 = this._dataController;
    return dataController2.adaptiveExpandedKey() && equalByValue(dataController2.adaptiveExpandedKey(), key);
  }
  expandAdaptiveDetailRow(key) {
    if (!this.hasAdaptiveDetailRowExpanded()) {
      this.toggleExpandAdaptiveDetailRow(key);
    }
  }
  collapseAdaptiveDetailRow() {
    if (this.hasAdaptiveDetailRowExpanded()) {
      this.toggleExpandAdaptiveDetailRow();
    }
  }
  updateCommandAdaptiveAriaLabel(key, label) {
    var rowIndex = this._dataController.getRowIndexByKey(key);
    if (-1 === rowIndex) {
      return;
    }
    var $row = renderer_default(this.component.getRowElement(rowIndex));
    this.setCommandAdaptiveAriaLabel($row, label);
  }
  setCommandAdaptiveAriaLabel($row, labelName) {
    var $adaptiveCommand = $row.find(".dx-command-adaptive");
    $adaptiveCommand.attr("aria-label", message_default.format(labelName));
  }
};
var keyboardNavigation2 = (Base) => class extends Base {
  _isCellValid($cell, isClick) {
    return super._isCellValid($cell, isClick) && !$cell.hasClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS)) && !$cell.hasClass(COMMAND_ADAPTIVE_HIDDEN_CLASS);
  }
  _processNextCellInMasterDetail($nextCell, $cell) {
    super._processNextCellInMasterDetail($nextCell, $cell);
    var isCellOrBatchMode = this._editingController.isCellOrBatchEditMode();
    var isEditing = this._editingController.isEditing();
    if (isEditing && $nextCell && isCellOrBatchMode && !this._isInsideEditForm($nextCell)) {
      events_engine_default.off($nextCell, "focus", focusCellHandler);
      events_engine_default.on($nextCell, "focus", {
        $nextCell
      }, focusCellHandler);
      events_engine_default.trigger($cell, "focus");
    }
  }
  _isCellElement($cell) {
    return super._isCellElement($cell) || $cell.hasClass(ADAPTIVE_ITEM_TEXT_CLASS);
  }
};
var rowsView13 = (Base) => class extends Base {
  _getCellTemplate(options2) {
    var that = this;
    var {
      column
    } = options2;
    if (options2.rowType === ADAPTIVE_ROW_TYPE && "detail" === column.command) {
      return function(container, options3) {
        that._adaptiveColumnsController.createFormByHiddenColumns(renderer_default(container), options3);
      };
    }
    return super._getCellTemplate(options2);
  }
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (row && row.rowType === ADAPTIVE_ROW_TYPE && row.key === this._dataController.adaptiveExpandedKey()) {
      $row.addClass(ADAPTIVE_DETAIL_ROW_CLASS);
    }
    return $row;
  }
  _renderCells($row, options2) {
    super._renderCells($row, options2);
    var adaptiveColumnsController = this._adaptiveColumnsController;
    var hidingColumnsQueueLength = adaptiveColumnsController.getHidingColumnsQueue().length;
    var hiddenColumnsLength = adaptiveColumnsController.getHiddenColumns().length;
    if (hidingColumnsQueueLength && !hiddenColumnsLength) {
      getDataCellElements($row).last().addClass(LAST_DATA_CELL_CLASS);
    }
    if ("data" === options2.row.rowType) {
      adaptiveColumnsController.setCommandAdaptiveAriaLabel($row, EXPAND_ARIA_NAME);
    }
  }
  _getColumnIndexByElementCore($element) {
    var $itemContent = $element.closest(".".concat(FORM_ITEM_CONTENT_CLASS));
    if ($itemContent.length && $itemContent.closest(this.component.$element()).length) {
      var formItem = $itemContent.length ? $itemContent.first().data("dx-form-item") : null;
      return formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index);
    }
    return super._getColumnIndexByElementCore($element);
  }
  _cellPrepared($cell, options2) {
    super._cellPrepared.apply(this, arguments);
    if (options2.row.rowType !== ADAPTIVE_ROW_TYPE && options2.column.visibleWidth === HIDDEN_COLUMNS_WIDTH3) {
      $cell.addClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS));
    }
  }
  getCell(cellPosition, rows) {
    var item = this._dataController.items()[null === cellPosition || void 0 === cellPosition ? void 0 : cellPosition.rowIndex];
    if ((null === item || void 0 === item ? void 0 : item.rowType) === ADAPTIVE_ROW_TYPE) {
      var $adaptiveDetailItems = this._adaptiveColumnsController.getAdaptiveDetailItems();
      return super.getCell(cellPosition, rows, $adaptiveDetailItems);
    }
    return super.getCell.apply(this, arguments);
  }
  _getCellElement(rowIndex, columnIdentifier) {
    var item = this._dataController.items()[rowIndex];
    if (item && item.rowType === ADAPTIVE_ROW_TYPE) {
      return this._adaptiveColumnsController.getItemContentByColumnIndex(columnIdentifier);
    }
    return super._getCellElement.apply(this, arguments);
  }
  getContextMenuItems(options2) {
    var _a;
    if (options2.row && "detailAdaptive" === options2.row.rowType) {
      var view = this._columnHeadersView;
      var formItem = renderer_default(options2.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");
      options2.column = formItem ? formItem.column : options2.column;
      return view.getContextMenuItems && view.getContextMenuItems(options2);
    }
    return null === (_a = super.getContextMenuItems) || void 0 === _a ? void 0 : _a.call(this, options2);
  }
  isClickableElement($target) {
    var _a, _b;
    var isClickable = null !== (_b = null === (_a = super.isClickableElement) || void 0 === _a ? void 0 : _a.call(this, $target)) && void 0 !== _b ? _b : false;
    return isClickable || !!$target.closest(".".concat(ADAPTIVE_COLUMN_NAME_CLASS2)).length;
  }
};
var exportExtender = (Base) => class extends Base {
  _updateColumnWidth(column, width) {
    super._updateColumnWidth(column, column.visibleWidth === HIDDEN_COLUMNS_WIDTH3 ? column.bestFitWidth : width);
  }
};
var columnsResizer3 = (Base) => class extends Base {
  _pointCreated(point, cellsLength, columns7) {
    var result2 = super._pointCreated(point, cellsLength, columns7);
    var currentColumn = columns7[point.columnIndex] || {};
    var nextColumnIndex = this._getNextColumnIndex(point.columnIndex);
    var nextColumn = columns7[nextColumnIndex] || {};
    var hasHiddenColumnsOnly = nextColumnIndex !== point.columnIndex + 1 && nextColumn.command;
    var hasAdaptiveHiddenWidth = currentColumn.visibleWidth === HIDDEN_COLUMNS_WIDTH3 || hasHiddenColumnsOnly;
    return result2 || hasAdaptiveHiddenWidth;
  }
  _getNextColumnIndex(currentColumnIndex) {
    var visibleColumns = this._columnsController.getVisibleColumns();
    var index = super._getNextColumnIndex(currentColumnIndex);
    while (visibleColumns[index] && visibleColumns[index].visibleWidth === HIDDEN_COLUMNS_WIDTH3) {
      index++;
    }
    return index;
  }
};
var draggingHeader2 = (Base) => class extends Base {
  _pointCreated(point, columns7, location, sourceColumn) {
    var result2 = super._pointCreated(point, columns7, location, sourceColumn);
    var column = columns7[point.columnIndex - 1] || {};
    var hasAdaptiveHiddenWidth = column.visibleWidth === HIDDEN_COLUMNS_WIDTH3;
    return result2 || hasAdaptiveHiddenWidth;
  }
};
var editing4 = (Base) => class extends Base {
  _isRowEditMode() {
    return this.getEditMode() === EDIT_MODE_ROW3;
  }
  _getFormEditItemTemplate(cellOptions, column) {
    if (this.getEditMode() !== EDIT_MODE_ROW3 && "detailAdaptive" === cellOptions.rowType) {
      cellOptions.columnIndex = this._columnsController.getVisibleIndex(column.index);
      return this.getColumnTemplate(cellOptions);
    }
    return super._getFormEditItemTemplate(cellOptions, column);
  }
  _closeEditItem($targetElement) {
    var $itemContents = $targetElement.closest(".".concat(FORM_ITEM_CONTENT_CLASS));
    var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;
    var formItem = $itemContents.length ? $itemContents.first().data("dx-form-item") : null;
    var columnIndex = formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index);
    if (!this.isEditCell(rowIndex, columnIndex)) {
      super._closeEditItem($targetElement);
    }
  }
  _beforeUpdateItems(rowIndices, rowIndex) {
    if (!this._adaptiveColumnsController.isFormOrPopupEditMode() && this._adaptiveColumnsController.hasHiddenColumns()) {
      var items = this._dataController.items();
      var item = items[rowIndex];
      var oldExpandRowIndex = m_utils_default.getIndexByKey(this._dataController.adaptiveExpandedKey(), items);
      this._isForceRowAdaptiveExpand = !this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded();
      if (oldExpandRowIndex >= 0) {
        rowIndices.push(oldExpandRowIndex + 1);
      }
      rowIndices.push(rowIndex + 1);
      this._dataController.adaptiveExpandedKey(item.key);
    }
  }
  _afterInsertRow(key) {
    super._afterInsertRow.apply(this, arguments);
    if (this._adaptiveColumnsController.hasHiddenColumns()) {
      this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(key, this.isRowEditMode());
      this._isForceRowAdaptiveExpand = true;
    }
  }
  _collapseAdaptiveDetailRow() {
    if (this._isRowEditMode() && this._isForceRowAdaptiveExpand) {
      this._adaptiveColumnsController.collapseAdaptiveDetailRow();
      this._isForceRowAdaptiveExpand = false;
    }
  }
  _cancelEditAdaptiveDetailRow() {
    if (this._adaptiveColumnsController.hasHiddenColumns()) {
      this._collapseAdaptiveDetailRow();
    }
  }
  _afterSaveEditData() {
    super._afterSaveEditData.apply(this, arguments);
    var deferred = new Deferred();
    if (this._isRowEditMode() && this._adaptiveColumnsController.hasHiddenColumns()) {
      when(this._validatingController.validate(true)).done((isValid) => {
        if (isValid) {
          this._cancelEditAdaptiveDetailRow();
        }
        deferred.resolve();
      });
    } else {
      deferred.resolve();
    }
    return deferred.promise();
  }
  _beforeCancelEditData() {
    super._beforeCancelEditData();
    this._cancelEditAdaptiveDetailRow();
  }
  _getRowIndicesForCascadeUpdating(row) {
    var rowIndices = super._getRowIndicesForCascadeUpdating.apply(this, arguments);
    if (this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(row.key)) {
      rowIndices.push(row.rowType === ADAPTIVE_ROW_TYPE ? row.rowIndex - 1 : row.rowIndex + 1);
    }
    return rowIndices;
  }
  _beforeCloseEditCellInBatchMode(rowIndices) {
    var expandedKey = this._dataController._adaptiveExpandedKey;
    if (expandedKey) {
      var rowIndex = m_utils_default.getIndexByKey(expandedKey, this._dataController.items());
      if (rowIndex > -1) {
        rowIndices.unshift(rowIndex);
      }
    }
  }
  editRow(rowIndex) {
    if (this._adaptiveColumnsController.isFormOrPopupEditMode()) {
      this._adaptiveColumnsController.collapseAdaptiveDetailRow();
    }
    return super.editRow(rowIndex);
  }
  deleteRow(rowIndex) {
    var rowKey = this._dataController.getKeyByRowIndex(rowIndex);
    if (this.getEditMode() === EDIT_MODE_BATCH3 && this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(rowKey)) {
      this._adaptiveColumnsController.collapseAdaptiveDetailRow();
    }
    super.deleteRow(rowIndex);
  }
};
var data14 = (Base) => class extends Base {
  _processItems(items, change) {
    var {
      changeType
    } = change;
    items = super._processItems.apply(this, arguments);
    if ("loadingAll" === changeType || !isDefined(this._adaptiveExpandedKey)) {
      return items;
    }
    var expandRowIndex = m_utils_default.getIndexByKey(this._adaptiveExpandedKey, items);
    var newMode = false === this.option(LEGACY_SCROLLING_MODE4);
    if (expandRowIndex >= 0) {
      var item = items[expandRowIndex];
      items.splice(expandRowIndex + 1, 0, {
        visible: true,
        rowType: ADAPTIVE_ROW_TYPE,
        key: item.key,
        data: item.data,
        node: item.node,
        modifiedValues: item.modifiedValues,
        isNewRow: item.isNewRow,
        values: item.values
      });
    } else if ("refresh" === changeType && !(newMode && change.repaintChangesOnly)) {
      this._adaptiveExpandedKey = void 0;
    }
    return items;
  }
  _getRowIndicesForExpand(key) {
    var rowIndices = super._getRowIndicesForExpand.apply(this, arguments);
    if (this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(key)) {
      var lastRowIndex = rowIndices[rowIndices.length - 1];
      rowIndices.push(lastRowIndex + 1);
    }
    return rowIndices;
  }
  adaptiveExpandedKey(value2) {
    if (isDefined(value2)) {
      this._adaptiveExpandedKey = value2;
    } else {
      return this._adaptiveExpandedKey;
    }
  }
  toggleExpandAdaptiveDetailRow(key, alwaysExpanded) {
    var oldExpandLoadedRowIndex = m_utils_default.getIndexByKey(this._adaptiveExpandedKey, this._items);
    var newExpandLoadedRowIndex = m_utils_default.getIndexByKey(key, this._items);
    if (oldExpandLoadedRowIndex >= 0 && oldExpandLoadedRowIndex === newExpandLoadedRowIndex && !alwaysExpanded) {
      key = void 0;
      newExpandLoadedRowIndex = -1;
    }
    var oldKey = this._adaptiveExpandedKey;
    this._adaptiveExpandedKey = key;
    if (oldExpandLoadedRowIndex >= 0) {
      oldExpandLoadedRowIndex++;
    }
    if (newExpandLoadedRowIndex >= 0) {
      newExpandLoadedRowIndex++;
    }
    var rowIndexDelta = this.getRowIndexDelta();
    this.updateItems({
      allowInvisibleRowIndices: true,
      changeType: "update",
      rowIndices: [oldExpandLoadedRowIndex - rowIndexDelta, newExpandLoadedRowIndex - rowIndexDelta]
    });
    this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(key, COLLAPSE_ARIA_NAME);
    this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(oldKey, EXPAND_ARIA_NAME);
  }
};
var editorFactory2 = (Base) => class extends Base {
  _needHideBorder($element) {
    return super._needHideBorder($element) || (null === $element || void 0 === $element ? void 0 : $element.hasClass("dx-field-item-content")) && (null === $element || void 0 === $element ? void 0 : $element.find(".dx-checkbox").length);
  }
  _getFocusCellSelector() {
    return "".concat(super._getFocusCellSelector(), ", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content");
  }
  _getRevertTooltipsSelector() {
    return "".concat(super._getRevertTooltipsSelector(), ", .dx-field-item-content .").concat(this.addWidgetPrefix(REVERT_TOOLTIP_CLASS2));
  }
};
var columns4 = (Base) => class extends Base {
  _isColumnVisible(column) {
    return super._isColumnVisible(column) && !column.adaptiveHidden;
  }
};
var resizing5 = (Base) => class extends Base {
  dispose() {
    super.dispose.apply(this, arguments);
    clearTimeout(this._updateScrollableTimeoutID);
  }
  _needBestFit() {
    return super._needBestFit() || !!this._adaptiveColumnsController.getHidingColumnsQueue().length;
  }
  _correctColumnWidths(resultWidths, visibleColumns) {
    var adaptiveController = this._adaptiveColumnsController;
    var oldHiddenColumns = adaptiveController.getHiddenColumns();
    var hidingColumnsQueue = adaptiveController.updateHidingQueue(this._columnsController.getColumns());
    adaptiveController.hideRedundantColumns(resultWidths, visibleColumns, hidingColumnsQueue);
    var hiddenColumns = adaptiveController.getHiddenColumns();
    if (adaptiveController.hasAdaptiveDetailRowExpanded()) {
      if (oldHiddenColumns.length !== hiddenColumns.length) {
        adaptiveController.updateForm(hiddenColumns);
      }
    }
    !hiddenColumns.length && adaptiveController.collapseAdaptiveDetailRow();
    return super._correctColumnWidths.apply(this, arguments);
  }
  _toggleBestFitMode(isBestFit) {
    isBestFit && this._adaptiveColumnsController._showHiddenColumns();
    super._toggleBestFitMode(isBestFit);
  }
  _needStretch() {
    var adaptiveColumnsController = this._adaptiveColumnsController;
    return super._needStretch.apply(this, arguments) || adaptiveColumnsController.getHidingColumnsQueue().length || adaptiveColumnsController.hasHiddenColumns();
  }
};
var adaptivityModule = {
  defaultOptions: () => ({
    columnHidingEnabled: false,
    onAdaptiveDetailRowPreparing: null
  }),
  controllers: {
    adaptiveColumns: AdaptiveColumnsController
  },
  extenders: {
    views: {
      rowsView: rowsView13
    },
    controllers: {
      export: exportExtender,
      columnsResizer: columnsResizer3,
      draggingHeader: draggingHeader2,
      editing: editing4,
      resizing: resizing5,
      data: data14,
      editorFactory: editorFactory2,
      columns: columns4,
      keyboardNavigation: keyboardNavigation2
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/adaptivity.js
m_core_default.registerModule("adaptivity", adaptivityModule);

// node_modules/devextreme/esm/__internal/grids/grid_core/virtual_columns/m_virtual_columns_core.js
function foreachColumnInfo(info, callback, rowIndex, offsets, columnCount, lastProcessedIndexes) {
  rowIndex = rowIndex || 0;
  offsets = offsets || [];
  lastProcessedIndexes = lastProcessedIndexes || [];
  offsets[rowIndex] = offsets[rowIndex] || 0;
  var row = info[rowIndex];
  var startIndex = lastProcessedIndexes[rowIndex] + 1 || 0;
  var processedColumnCount = 0;
  var colIndex;
  if (!row) {
    return;
  }
  for (colIndex = startIndex; colIndex < row.length; colIndex++) {
    var cell = row[colIndex];
    var visibleIndex = colIndex + offsets[rowIndex];
    var colspan = cell.colspan || 1;
    foreachColumnInfo(info, callback, rowIndex + (cell.rowspan || 1), offsets, colspan, lastProcessedIndexes);
    offsets[rowIndex] += colspan - 1;
    processedColumnCount += colspan;
    if (cell.rowspan) {
      for (var i = rowIndex + 1; i < rowIndex + cell.rowspan; i++) {
        offsets[i] = offsets[i] || 0;
        offsets[i] += cell.colspan || 1;
      }
    }
    if (false === callback(cell, visibleIndex, rowIndex, colIndex)) {
      break;
    }
    if (void 0 !== columnCount && processedColumnCount >= columnCount) {
      break;
    }
  }
  lastProcessedIndexes[rowIndex] = colIndex;
}
function createColumnsInfo(info, startIndex, endIndex) {
  var newInfo = [];
  foreachColumnInfo(info, (columnInfo, visibleIndex, rowIndex) => {
    var cell = columnInfo;
    var colspan;
    var cellColspan = cell.colspan || 1;
    var isVisible = visibleIndex + cellColspan - 1 >= startIndex && visibleIndex < endIndex;
    newInfo[rowIndex] = newInfo[rowIndex] || [];
    if (isVisible) {
      if (visibleIndex < startIndex) {
        colspan = cellColspan - (startIndex - visibleIndex);
        visibleIndex = startIndex;
      } else {
        colspan = cellColspan;
      }
      if (visibleIndex + colspan > endIndex) {
        colspan = endIndex - visibleIndex;
      }
      if (colspan !== cellColspan) {
        cell = extend({}, cell, {
          colspan
        });
      }
      newInfo[rowIndex].push(cell);
    } else if (visibleIndex > endIndex) {
      return false;
    }
    return;
  });
  for (var i = 0; i < newInfo.length; i++) {
    newInfo[i] = newInfo[i] || [];
  }
  return newInfo;
}

// node_modules/devextreme/esm/__internal/grids/grid_core/virtual_columns/m_virtual_columns.js
var DEFAULT_COLUMN_WIDTH = 50;
var baseView = (Base) => class extends Base {
  _needToSetCellWidths() {
    var result2 = super._needToSetCellWidths();
    if (!result2 && this._columnsController.isVirtualMode()) {
      var _columns = this._columnsController.getColumns();
      result2 = _columns.some((column) => "auto" === column.width);
    }
    return result2;
  }
};
var rowsView14 = (Base) => class extends baseView(Base) {
  _resizeCore() {
    super._resizeCore.apply(this, arguments);
    this._columnsController.resize();
  }
  _handleScroll(e) {
    var scrollable = this.getScrollable();
    var {
      left
    } = e.scrollOffset;
    super._handleScroll.apply(this, arguments);
    if (this.option("rtlEnabled") && scrollable) {
      left = getWidth(scrollable.$content()) - getWidth(scrollable.$element()) - left;
    }
    this._columnsController.setScrollPosition(left);
  }
  _renderCore(e) {
    var _a, _b;
    if (null === e || void 0 === e ? void 0 : e.virtualColumnsScrolling) {
      var $contentElement = this._findContentElement();
      var fixedColumns = null === (_a = this._columnsController) || void 0 === _a ? void 0 : _a.getFixedColumns();
      var useNativeScrolling = null === (_b = this._scrollable) || void 0 === _b ? void 0 : _b.option("useNative");
      if (null === fixedColumns || void 0 === fixedColumns ? void 0 : fixedColumns.length) {
        $contentElement.css({
          minHeight: useNativeScrolling ? getHeight($contentElement) : m_utils_default.getContentHeightLimit(browser_default)
        });
        var resizeCompletedHandler = () => {
          this.resizeCompleted.remove(resizeCompletedHandler);
          $contentElement.css({
            minHeight: ""
          });
        };
        this.resizeCompleted.add(resizeCompletedHandler);
      }
    }
    return super._renderCore.apply(this, arguments);
  }
};
var columnHeadersView7 = (Base) => class extends baseView(Base) {
  _renderCore() {
    var deferred = super._renderCore.apply(this, arguments);
    if (this._columnsController.isVirtualMode()) {
      this._updateScrollLeftPosition();
    }
    return deferred;
  }
};
var getWidths = function(columns7) {
  return columns7.map((column) => column.visibleWidth || parseFloat(column.width) || DEFAULT_COLUMN_WIDTH);
};
var columns5 = (Base) => class extends Base {
  init() {
    var _a;
    super.init.apply(this, arguments);
    this._resizingController = this.getController("resizing");
    this._beginPageIndex = null;
    this._endPageIndex = null;
    null !== (_a = this._position) && void 0 !== _a ? _a : this._position = 0;
    this._virtualVisibleColumns = {};
  }
  dispose() {
    clearTimeout(this._changedTimeout);
    super.dispose.apply(this, arguments);
  }
  resetColumnsCache() {
    super.resetColumnsCache();
    this._virtualVisibleColumns = {};
  }
  getBeginPageIndex(position2) {
    var visibleColumns = this.getVisibleColumns(void 0, true);
    var widths = getWidths(visibleColumns);
    var currentPosition = 0;
    for (var index = 0; index < widths.length; index++) {
      if (currentPosition >= position2) {
        return Math.floor(index / this.getColumnPageSize());
      }
      currentPosition += widths[index];
    }
    return 0;
  }
  getTotalWidth() {
    var width = this.option("width");
    if ("number" === typeof width) {
      return width;
    }
    return this._resizingController._lastWidth || getOuterWidth(this.component.$element());
  }
  getEndPageIndex(position2) {
    var visibleColumns = this.getVisibleColumns(void 0, true);
    var widths = getWidths(visibleColumns);
    var currentPosition = 0;
    position2 += this.getTotalWidth();
    for (var index = 0; index < widths.length; index++) {
      if (currentPosition >= position2) {
        return Math.ceil(index / this.getColumnPageSize());
      }
      currentPosition += widths[index];
    }
    return Math.ceil(widths.length / this.getColumnPageSize());
  }
  getColumnPageSize() {
    return this.option("scrolling.columnPageSize");
  }
  _fireColumnsChanged() {
    var date = /* @__PURE__ */ new Date();
    this.columnsChanged.fire({
      optionNames: {
        all: true,
        length: 1
      },
      changeTypes: {
        columns: true,
        virtualColumnsScrolling: true,
        length: 2
      }
    });
    this._renderTime = /* @__PURE__ */ new Date() - date;
  }
  getScrollingTimeout() {
    var renderingThreshold = this.option("scrolling.columnRenderingThreshold");
    var renderAsync = this.option("scrolling.renderAsync");
    var scrollingTimeout = 0;
    if (!isDefined(renderAsync) && this._renderTime > renderingThreshold || renderAsync) {
      scrollingTimeout = this.option("scrolling.timeout");
    }
    return scrollingTimeout;
  }
  setScrollPosition(position2) {
    var scrollingTimeout = this.getScrollingTimeout();
    if (scrollingTimeout > 0) {
      clearTimeout(this._changedTimeout);
      this._changedTimeout = setTimeout(() => {
        this._setScrollPositionCore(position2);
      }, scrollingTimeout);
    } else {
      this._setScrollPositionCore(position2);
    }
  }
  isVirtualMode() {
    return hasWindow() && "virtual" === this.option("scrolling.columnRenderingMode");
  }
  resize() {
    this._setScrollPositionCore(this._position);
  }
  _setScrollPositionCore(position2) {
    if (this.isVirtualMode()) {
      var beginPageIndex = this.getBeginPageIndex(position2);
      var endPageIndex = this.getEndPageIndex(position2);
      var needColumnsChanged = position2 < this._position ? this._beginPageIndex > beginPageIndex : this._endPageIndex < endPageIndex;
      this._position = position2;
      if (needColumnsChanged) {
        this._beginPageIndex = beginPageIndex;
        this._endPageIndex = endPageIndex;
        this._fireColumnsChanged();
      }
    }
  }
  getFixedColumns(rowIndex, isBase) {
    var fixedColumns = super.getFixedColumns(rowIndex);
    if (this.isVirtualMode() && !isBase && fixedColumns.length) {
      var transparentColumnIndex = fixedColumns.map((c) => c.command).indexOf("transparent");
      fixedColumns[transparentColumnIndex].colspan = this.getVisibleColumns().length - super.getFixedColumns().length + 1;
      return fixedColumns;
    }
    return fixedColumns;
  }
  _compileVisibleColumns(rowIndex, isBase) {
    var _a;
    if (isBase || !this.isVirtualMode() || !this._shouldReturnVisibleColumns()) {
      return super._compileVisibleColumns(rowIndex);
    }
    if ((null === (_a = this._columns) || void 0 === _a ? void 0 : _a.length) && !isDefined(this._beginPageIndex) && !isDefined(this._endPageIndex)) {
      this._beginPageIndex = this.getBeginPageIndex(this._position);
      this._endPageIndex = this.getEndPageIndex(this._position);
    }
    var beginPageIndex = this._beginPageIndex;
    var endPageIndex = this._endPageIndex;
    var visibleColumnsHash = "".concat(rowIndex, "-").concat(beginPageIndex, "-").concat(endPageIndex);
    if (this._virtualVisibleColumns[visibleColumnsHash]) {
      return this._virtualVisibleColumns[visibleColumnsHash];
    }
    var visibleColumns = super._compileVisibleColumns();
    var rowCount = this.getRowCount();
    var pageSize = this.getColumnPageSize();
    var startIndex = beginPageIndex * pageSize;
    var endIndex = endPageIndex * pageSize;
    var fixedColumns = this.getFixedColumns(void 0, true);
    var transparentColumnIndex = fixedColumns.map((c) => c.command).indexOf("transparent");
    var beginFixedColumnCount = fixedColumns.length ? transparentColumnIndex : 0;
    var beginFixedColumns = visibleColumns.slice(0, beginFixedColumnCount);
    var beginColumns = visibleColumns.slice(beginFixedColumnCount, startIndex);
    var beginWidth = getWidths(beginColumns).reduce((a, b) => a + b, 0);
    if (!beginWidth) {
      startIndex = 0;
    }
    var endFixedColumnCount = fixedColumns.length ? fixedColumns.length - transparentColumnIndex - 1 : 0;
    var endFixedColumns = visibleColumns.slice(visibleColumns.length - endFixedColumnCount);
    var endColumns = visibleColumns.slice(endIndex, visibleColumns.length - endFixedColumnCount);
    var endWidth = getWidths(endColumns).reduce((a, b) => a + b, 0);
    if (!endWidth) {
      endIndex = visibleColumns.length;
    }
    if (rowCount > 1 && "number" === typeof rowIndex) {
      var columnsInfo = [];
      for (var i = 0; i <= rowCount; i++) {
        columnsInfo.push(super._compileVisibleColumns(i));
      }
      beginFixedColumns = createColumnsInfo(columnsInfo, 0, beginFixedColumns.length)[rowIndex] || [];
      endFixedColumns = createColumnsInfo(columnsInfo, visibleColumns.length - endFixedColumns.length, visibleColumns.length)[rowIndex] || [];
      visibleColumns = createColumnsInfo(columnsInfo, startIndex, endIndex)[rowIndex] || [];
    } else {
      visibleColumns = visibleColumns.slice(startIndex, endIndex);
    }
    if (beginWidth) {
      visibleColumns.unshift({
        command: "virtual",
        width: beginWidth
      });
      visibleColumns = beginFixedColumns.concat(visibleColumns);
    }
    if (endWidth) {
      visibleColumns.push({
        command: "virtual",
        width: endWidth
      });
      visibleColumns = visibleColumns.concat(endFixedColumns);
    }
    this._virtualVisibleColumns[visibleColumnsHash] = visibleColumns;
    return visibleColumns;
  }
  getColumnIndexOffset() {
    var offset = 0;
    if (this._beginPageIndex > 0) {
      var fixedColumns = this.getFixedColumns();
      var transparentColumnIndex = fixedColumns.map((c) => c.command).indexOf("transparent");
      var leftFixedColumnCount = transparentColumnIndex >= 0 ? transparentColumnIndex : 0;
      offset = this._beginPageIndex * this.getColumnPageSize() - leftFixedColumnCount - 1;
    }
    return offset > 0 ? offset : 0;
  }
};
var virtualColumnsModule = {
  defaultOptions: () => ({
    scrolling: {
      columnRenderingMode: "standard",
      columnPageSize: 5,
      columnRenderingThreshold: 300
    }
  }),
  extenders: {
    controllers: {
      columns: columns5
    },
    views: {
      columnHeadersView: columnHeadersView7,
      rowsView: rowsView14
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/virtual_columns.js
m_core_default.registerModule("virtualColumns", virtualColumnsModule);

// node_modules/devextreme/esm/__internal/ui/m_button_group.js
var BUTTON_GROUP_CLASS2 = "dx-buttongroup";
var BUTTON_GROUP_WRAPPER_CLASS = "".concat(BUTTON_GROUP_CLASS2, "-wrapper");
var BUTTON_GROUP_ITEM_CLASS = "".concat(BUTTON_GROUP_CLASS2, "-item");
var BUTTON_GROUP_FIRST_ITEM_CLASS = "".concat(BUTTON_GROUP_CLASS2, "-first-item");
var BUTTON_GROUP_LAST_ITEM_CLASS = "".concat(BUTTON_GROUP_CLASS2, "-last-item");
var BUTTON_GROUP_ITEM_HAS_WIDTH = "".concat(BUTTON_GROUP_ITEM_CLASS, "-has-width");
var SHAPE_STANDARD_CLASS = "dx-shape-standard";
var BUTTON_GROUP_STYLING_MODE_CLASS = {
  contained: "dx-buttongroup-mode-contained",
  outlined: "dx-buttongroup-mode-outlined",
  text: "dx-buttongroup-mode-text"
};
var ButtonCollection = ui_collection_widget_edit_default.inherit({
  _initTemplates() {
    this.callBase();
    this._templateManager.addDefaultTemplates({
      item: new BindableTemplate(($container, data17, model) => {
        this._prepareItemStyles($container);
        var template = this.option("buttonTemplate");
        this._createComponent($container, button_default, extend({}, model, data17, this._getBasicButtonOptions(), {
          _templateData: this._hasCustomTemplate(template) ? model : {},
          template: model.template || template
        }));
      }, ["text", "type", "icon", "disabled", "visible", "hint"], this.option("integrationOptions.watchMethod"))
    });
  },
  _getBasicButtonOptions() {
    return {
      focusStateEnabled: false,
      onClick: null,
      hoverStateEnabled: this.option("hoverStateEnabled"),
      activeStateEnabled: this.option("activeStateEnabled"),
      stylingMode: this.option("stylingMode")
    };
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      itemTemplateProperty: null
    });
  },
  _hasCustomTemplate(template) {
    return isFunction(template) || this.option("integrationOptions.templates")[template];
  },
  _selectedItemClass: () => "dx-item-selected dx-state-selected",
  _prepareItemStyles($item) {
    var itemIndex = $item.data("dxItemIndex");
    0 === itemIndex && $item.addClass(BUTTON_GROUP_FIRST_ITEM_CLASS);
    var items = this.option("items");
    items && itemIndex === items.length - 1 && $item.addClass(BUTTON_GROUP_LAST_ITEM_CLASS);
    $item.addClass(SHAPE_STANDARD_CLASS);
  },
  _renderItemContent(args) {
    args.container = renderer_default(args.container).parent();
    return this.callBase(args);
  },
  _setAriaSelectionAttribute($target, value2) {
    this.setAria("pressed", value2, $target);
  },
  _renderItemContentByNode(args, $node) {
    args.container = renderer_default(args.container.children().first());
    return this.callBase(args, $node);
  },
  _focusTarget() {
    return this.$element().parent();
  },
  _keyboardEventBindingTarget() {
    return this._focusTarget();
  },
  _refreshContent() {
    this._prepareContent();
    this._renderContent();
  },
  _itemClass: () => BUTTON_GROUP_ITEM_CLASS,
  _itemSelectHandler(e) {
    if ("single" === this.option("selectionMode") && this.isItemSelected(e.currentTarget)) {
      return;
    }
    this.callBase(e);
  }
});
var ButtonGroup = ui_widget_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      hoverStateEnabled: true,
      focusStateEnabled: true,
      selectionMode: "single",
      selectedItems: [],
      selectedItemKeys: [],
      stylingMode: "contained",
      keyExpr: "text",
      items: [],
      buttonTemplate: "content",
      onSelectionChanged: null,
      onItemClick: null
    });
  },
  _init() {
    this.callBase();
    this._createItemClickAction();
  },
  _createItemClickAction() {
    this._itemClickAction = this._createActionByOption("onItemClick");
  },
  _initMarkup() {
    this.setAria("role", "group");
    this.$element().addClass(BUTTON_GROUP_CLASS2);
    this._renderStylingMode();
    this._renderButtons();
    this._syncSelectionOptions();
    this.callBase();
  },
  _renderStylingMode() {
    var _a;
    var {
      stylingMode
    } = this.option();
    for (var key in BUTTON_GROUP_STYLING_MODE_CLASS) {
      this.$element().removeClass(BUTTON_GROUP_STYLING_MODE_CLASS[key]);
    }
    this.$element().addClass(null !== (_a = BUTTON_GROUP_STYLING_MODE_CLASS[stylingMode]) && void 0 !== _a ? _a : BUTTON_GROUP_STYLING_MODE_CLASS.contained);
  },
  _fireSelectionChangeEvent(addedItems, removedItems) {
    this._createActionByOption("onSelectionChanged", {
      excludeValidators: ["disabled", "readOnly"]
    })({
      addedItems,
      removedItems
    });
  },
  _renderButtons() {
    var $buttons = renderer_default("<div>").addClass(BUTTON_GROUP_WRAPPER_CLASS).appendTo(this.$element());
    var selectedItems = this.option("selectedItems");
    var options2 = {
      selectionMode: this.option("selectionMode"),
      items: this.option("items"),
      keyExpr: this.option("keyExpr"),
      buttonTemplate: this.option("buttonTemplate"),
      scrollingEnabled: false,
      selectedItemKeys: this.option("selectedItemKeys"),
      focusStateEnabled: this.option("focusStateEnabled"),
      hoverStateEnabled: this.option("hoverStateEnabled"),
      activeStateEnabled: this.option("activeStateEnabled"),
      stylingMode: this.option("stylingMode"),
      accessKey: this.option("accessKey"),
      tabIndex: this.option("tabIndex"),
      noDataText: "",
      selectionRequired: false,
      onItemRendered: (e) => {
        var width = this.option("width");
        isDefined(width) && renderer_default(e.itemElement).addClass(BUTTON_GROUP_ITEM_HAS_WIDTH);
      },
      onSelectionChanged: (e) => {
        this._syncSelectionOptions();
        this._fireSelectionChangeEvent(e.addedItems, e.removedItems);
      },
      onItemClick: (e) => {
        this._itemClickAction(e);
      }
    };
    if (isDefined(selectedItems) && selectedItems.length) {
      options2.selectedItems = selectedItems;
    }
    this._buttonsCollection = this._createComponent($buttons, ButtonCollection, options2);
  },
  _syncSelectionOptions() {
    this._setOptionWithoutOptionChange("selectedItems", this._buttonsCollection.option("selectedItems"));
    this._setOptionWithoutOptionChange("selectedItemKeys", this._buttonsCollection.option("selectedItemKeys"));
  },
  _optionChanged(args) {
    switch (args.name) {
      case "stylingMode":
      case "selectionMode":
      case "keyExpr":
      case "buttonTemplate":
      case "items":
      case "activeStateEnabled":
      case "focusStateEnabled":
      case "hoverStateEnabled":
      case "tabIndex":
        this._invalidate();
        break;
      case "selectedItemKeys":
      case "selectedItems":
        this._buttonsCollection.option(args.name, args.value);
        break;
      case "onItemClick":
        this._createItemClickAction();
        break;
      case "onSelectionChanged":
        break;
      case "width":
        this.callBase(args);
        this._buttonsCollection.itemElements().toggleClass(BUTTON_GROUP_ITEM_HAS_WIDTH, !!args.value);
        break;
      default:
        this.callBase(args);
    }
  }
});
component_registrator_default("dxButtonGroup", ButtonGroup);
var m_button_group_default = ButtonGroup;

// node_modules/devextreme/esm/ui/button_group.js
var button_group_default = m_button_group_default;

// node_modules/devextreme/esm/__internal/ui/m_drop_down_button.js
var DROP_DOWN_BUTTON_CLASS = "dx-dropdownbutton";
var DROP_DOWN_BUTTON_CONTENT = "dx-dropdownbutton-content";
var DROP_DOWN_BUTTON_ACTION_CLASS = "dx-dropdownbutton-action";
var DROP_DOWN_BUTTON_TOGGLE_CLASS = "dx-dropdownbutton-toggle";
var DROP_DOWN_BUTTON_HAS_ARROW_CLASS = "dx-dropdownbutton-has-arrow";
var DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS = "dx-dropdownbutton-popup-wrapper";
var DROP_DOWN_EDITOR_OVERLAY_CLASS = "dx-dropdowneditor-overlay";
var DX_BUTTON_CLASS = "dx-button";
var DX_BUTTON_TEXT_CLASS = "dx-button-text";
var DX_ICON_RIGHT_CLASS = "dx-icon-right";
var DropDownButton2 = ui_widget_default.inherit({
  _getDefaultOptions() {
    return extend(this.callBase(), {
      itemTemplate: "item",
      keyExpr: "this",
      displayExpr: void 0,
      selectedItem: null,
      selectedItemKey: null,
      stylingMode: "outlined",
      deferRendering: true,
      noDataText: message_default.format("dxCollectionWidget-noDataText"),
      useSelectMode: false,
      splitButton: false,
      showArrowIcon: true,
      text: "",
      type: "normal",
      icon: void 0,
      onButtonClick: null,
      onSelectionChanged: null,
      onItemClick: null,
      opened: false,
      items: null,
      dataSource: null,
      focusStateEnabled: true,
      hoverStateEnabled: true,
      dropDownOptions: {},
      dropDownContentTemplate: "content",
      wrapItemText: false,
      useItemTextAsTitle: true,
      grouped: false,
      groupTemplate: "group",
      buttonGroupOptions: {}
    });
  },
  _setOptionsByReference() {
    this.callBase();
    extend(this._optionsByReference, {
      selectedItem: true
    });
  },
  _init() {
    this.callBase();
    this._createItemClickAction();
    this._createActionClickAction();
    this._createSelectionChangedAction();
    this._initDataSource();
    this._compileKeyGetter();
    this._compileDisplayGetter();
    this._itemsToDataSource(this.option("items"));
    this._options.cache("buttonGroupOptions", this.option("buttonGroupOptions"));
    this._options.cache("dropDownOptions", this.option("dropDownOptions"));
  },
  _initTemplates() {
    this._templateManager.addDefaultTemplates({
      content: new FunctionTemplate((options2) => {
        var $popupContent = renderer_default(options2.container);
        var $listContainer = renderer_default("<div>").appendTo($popupContent);
        this._list = this._createComponent($listContainer, list_light_default, this._listOptions());
        this._list.registerKeyHandler("escape", this._escHandler.bind(this));
        this._list.registerKeyHandler("tab", this._escHandler.bind(this));
        this._list.registerKeyHandler("leftArrow", this._escHandler.bind(this));
        this._list.registerKeyHandler("rightArrow", this._escHandler.bind(this));
      })
    });
    this.callBase();
  },
  _itemsToDataSource(value2) {
    if (!this._dataSource) {
      this._dataSource = new DataSource({
        store: new array_store_default({
          key: this._getKey(),
          data: value2
        }),
        pageSize: 0
      });
    }
  },
  _getKey() {
    var _a;
    var keyExpr = this.option("keyExpr");
    var storeKey = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.key();
    return isDefined(storeKey) && (!isDefined(keyExpr) || "this" === keyExpr) ? storeKey : keyExpr;
  },
  _compileKeyGetter() {
    this._keyGetter = compileGetter(this._getKey());
  },
  _compileDisplayGetter() {
    this._displayGetter = compileGetter(this.option("displayExpr"));
  },
  _initMarkup() {
    this.callBase();
    this.$element().addClass(DROP_DOWN_BUTTON_CLASS);
    this._renderButtonGroup();
    this._updateArrowClass();
    if (isDefined(this.option("selectedItemKey"))) {
      this._loadSelectedItem().done(this._updateActionButton.bind(this));
    }
  },
  _renderFocusTarget: noop,
  _render() {
    if (!this.option("deferRendering") || this.option("opened")) {
      this._renderPopup();
    }
    this.callBase();
  },
  _renderContentImpl() {
    if (this._popup) {
      this._renderPopupContent();
    }
    return this.callBase();
  },
  _loadSelectedItem() {
    var _a;
    null === (_a = this._loadSingleDeferred) || void 0 === _a ? void 0 : _a.reject();
    var d = Deferred();
    if (this._list && void 0 !== this._lastSelectedItemData) {
      var cachedResult = this.option("useSelectMode") ? this._list.option("selectedItem") : this._lastSelectedItemData;
      return d.resolve(cachedResult);
    }
    this._lastSelectedItemData = void 0;
    var selectedItemKey = this.option("selectedItemKey");
    this._loadSingle(this._getKey(), selectedItemKey).done(d.resolve).fail(() => {
      d.resolve(null);
    });
    this._loadSingleDeferred = d;
    return d.promise();
  },
  _createActionClickAction() {
    this._actionClickAction = this._createActionByOption("onButtonClick");
  },
  _createSelectionChangedAction() {
    this._selectionChangedAction = this._createActionByOption("onSelectionChanged");
  },
  _createItemClickAction() {
    this._itemClickAction = this._createActionByOption("onItemClick");
  },
  _fireSelectionChangedAction(_ref) {
    var {
      previousValue,
      value: value2
    } = _ref;
    this._selectionChangedAction({
      item: value2,
      previousItem: previousValue
    });
  },
  _fireItemClickAction(_ref2) {
    var {
      event,
      itemElement,
      itemData
    } = _ref2;
    return this._itemClickAction({
      event,
      itemElement,
      itemData: this._actionItem || itemData
    });
  },
  _actionButtonConfig() {
    var {
      icon,
      text,
      type: type2
    } = this.option();
    return {
      text,
      icon,
      type: type2,
      elementAttr: {
        class: DROP_DOWN_BUTTON_ACTION_CLASS
      }
    };
  },
  _getButtonGroupItems() {
    var {
      splitButton,
      type: type2
    } = this.option();
    var items = [];
    items.push(this._actionButtonConfig());
    if (splitButton) {
      items.push({
        icon: "spindown",
        type: type2,
        elementAttr: {
          class: DROP_DOWN_BUTTON_TOGGLE_CLASS
        }
      });
    }
    return items;
  },
  _buttonGroupItemClick(_ref3) {
    var {
      event,
      itemData
    } = _ref3;
    var isActionButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_ACTION_CLASS;
    var isToggleButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_TOGGLE_CLASS;
    if (isToggleButton) {
      this.toggle();
    } else if (isActionButton) {
      this._actionClickAction({
        event,
        selectedItem: this.option("selectedItem")
      });
      if (!this.option("splitButton")) {
        this.toggle();
      }
    }
  },
  _buttonGroupOptions() {
    var {
      splitButton,
      showArrowIcon,
      focusStateEnabled,
      hoverStateEnabled,
      stylingMode,
      accessKey,
      tabIndex
    } = this.option();
    var buttonTemplate = splitButton || !showArrowIcon ? "content" : (_ref4, buttonContent) => {
      var {
        text,
        icon
      } = _ref4;
      var $firstIcon = getImageContainer(icon);
      var $textContainer = text ? renderer_default("<span>").text(text).addClass(DX_BUTTON_TEXT_CLASS) : void 0;
      var $secondIcon = getImageContainer("spindown").addClass(DX_ICON_RIGHT_CLASS);
      renderer_default(buttonContent).append($firstIcon, $textContainer, $secondIcon);
    };
    return extend({
      items: this._getButtonGroupItems(),
      onItemClick: this._buttonGroupItemClick.bind(this),
      width: "100%",
      height: "100%",
      selectionMode: "none",
      onKeyboardHandled: (e) => this._keyboardHandler(e),
      buttonTemplate,
      focusStateEnabled,
      hoverStateEnabled,
      stylingMode,
      accessKey,
      tabIndex
    }, this._options.cache("buttonGroupOptions"));
  },
  _renderPopupContent() {
    var $content = this._popup.$content();
    var template = this._getTemplateByOption("dropDownContentTemplate");
    $content.empty();
    this._popupContentId = "dx-".concat(new guid_default());
    this.setAria("id", this._popupContentId, $content);
    return template.render({
      container: getPublicElement($content),
      model: this.option("items") || this._dataSource
    });
  },
  _popupOptions() {
    var horizontalAlignment = this.option("rtlEnabled") ? "right" : "left";
    return extend({
      dragEnabled: false,
      focusStateEnabled: false,
      deferRendering: this.option("deferRendering"),
      hideOnOutsideClick: (e) => {
        var $element = this.$element();
        var $buttonClicked = renderer_default(e.target).closest(".".concat(DROP_DOWN_BUTTON_CLASS));
        return !$buttonClicked.is($element);
      },
      showTitle: false,
      animation: {
        show: {
          type: "fade",
          duration: 0,
          from: 0,
          to: 1
        },
        hide: {
          type: "fade",
          duration: 400,
          from: 1,
          to: 0
        }
      },
      _ignoreFunctionValueDeprecation: true,
      width: () => getElementWidth(this.$element()),
      height: "auto",
      shading: false,
      position: {
        of: this.$element(),
        collision: "flipfit",
        my: "".concat(horizontalAlignment, " top"),
        at: "".concat(horizontalAlignment, " bottom")
      },
      _wrapperClassExternal: DROP_DOWN_EDITOR_OVERLAY_CLASS
    }, this._options.cache("dropDownOptions"), {
      visible: this.option("opened")
    });
  },
  _listOptions() {
    var selectedItemKey = this.option("selectedItemKey");
    var useSelectMode = this.option("useSelectMode");
    return {
      selectionMode: useSelectMode ? "single" : "none",
      wrapItemText: this.option("wrapItemText"),
      focusStateEnabled: this.option("focusStateEnabled"),
      hoverStateEnabled: this.option("hoverStateEnabled"),
      useItemTextAsTitle: this.option("useItemTextAsTitle"),
      onContentReady: () => this._fireContentReadyAction(),
      selectedItemKeys: isDefined(selectedItemKey) && useSelectMode ? [selectedItemKey] : [],
      grouped: this.option("grouped"),
      groupTemplate: this.option("groupTemplate"),
      keyExpr: this._getKey(),
      noDataText: this.option("noDataText"),
      displayExpr: this.option("displayExpr"),
      itemTemplate: this.option("itemTemplate"),
      items: this.option("items"),
      dataSource: this._dataSource,
      onItemClick: (e) => {
        if (!this.option("useSelectMode")) {
          this._lastSelectedItemData = e.itemData;
        }
        this.option("selectedItemKey", this._keyGetter(e.itemData));
        var actionResult = this._fireItemClickAction(e);
        if (false !== actionResult) {
          this.toggle(false);
          this._buttonGroup.focus();
        }
      }
    };
  },
  _upDownKeyHandler() {
    if (this._popup && this._popup.option("visible") && this._list) {
      this._list.focus();
    } else {
      this.open();
    }
    return true;
  },
  _escHandler() {
    this.close();
    this._buttonGroup.focus();
    return true;
  },
  _tabHandler() {
    this.close();
    return true;
  },
  _renderPopup() {
    var $popup = renderer_default("<div>");
    this.$element().append($popup);
    this._popup = this._createComponent($popup, ui_popup_default, this._popupOptions());
    this._popup.$content().addClass(DROP_DOWN_BUTTON_CONTENT);
    this._popup.$wrapper().addClass(DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS);
    this._popup.on("hiding", this._popupHidingHandler.bind(this));
    this._popup.on("showing", this._popupShowingHandler.bind(this));
    this._bindInnerWidgetOptions(this._popup, "dropDownOptions");
  },
  _popupHidingHandler() {
    this.option("opened", false);
    this._updateAriaAttributes(false);
  },
  _popupOptionChanged(args) {
    var options2 = ui_widget_default.getOptionsFromContainer(args);
    this._setPopupOption(options2);
    var optionsKeys = Object.keys(options2);
    if (optionsKeys.includes("width") || optionsKeys.includes("height")) {
      this._dimensionChanged();
    }
  },
  _dimensionChanged() {
    var popupWidth = getSizeValue(this.option("dropDownOptions.width"));
    if (void 0 === popupWidth) {
      this._setPopupOption("width", () => getElementWidth(this.$element()));
    }
  },
  _setPopupOption(optionName, value2) {
    this._setWidgetOption("_popup", arguments);
  },
  _popupShowingHandler() {
    this.option("opened", true);
    this._updateAriaAttributes(true);
  },
  _setElementAria(value2) {
    var elementAria = {
      owns: value2 ? this._popupContentId : void 0
    };
    this.setAria(elementAria, this.$element());
  },
  _setButtonsAria(value2) {
    var commonButtonAria = {
      expanded: value2,
      haspopup: "listbox"
    };
    var firstButtonAria = {};
    if (!this.option("text")) {
      firstButtonAria.label = "dropdownbutton";
    }
    this._getButtons().each((index, $button) => {
      if (0 === index) {
        this.setAria(_extends(_extends({}, firstButtonAria), commonButtonAria), renderer_default($button));
      } else {
        this.setAria(commonButtonAria, renderer_default($button));
      }
    });
  },
  _updateAriaAttributes(value2) {
    this._setElementAria(value2);
    this._setButtonsAria(value2);
  },
  _getButtons() {
    return this._buttonGroup.$element().find(".".concat(DX_BUTTON_CLASS));
  },
  _renderButtonGroup() {
    var $buttonGroup = this._buttonGroup && this._buttonGroup.$element() || renderer_default("<div>");
    if (!this._buttonGroup) {
      this.$element().append($buttonGroup);
    }
    this._buttonGroup = this._createComponent($buttonGroup, button_group_default, this._buttonGroupOptions());
    this._buttonGroup.registerKeyHandler("downArrow", this._upDownKeyHandler.bind(this));
    this._buttonGroup.registerKeyHandler("tab", this._tabHandler.bind(this));
    this._buttonGroup.registerKeyHandler("upArrow", this._upDownKeyHandler.bind(this));
    this._buttonGroup.registerKeyHandler("escape", this._escHandler.bind(this));
    this._bindInnerWidgetOptions(this._buttonGroup, "buttonGroupOptions");
    this._updateAriaAttributes(this.option("opened"));
  },
  _updateArrowClass() {
    var hasArrow = this.option("splitButton") || this.option("showArrowIcon");
    this.$element().toggleClass(DROP_DOWN_BUTTON_HAS_ARROW_CLASS, hasArrow);
  },
  toggle(visible) {
    if (!this._popup) {
      this._renderPopup();
      this._renderContent();
    }
    return this._popup.toggle(visible);
  },
  open() {
    return this.toggle(true);
  },
  close() {
    return this.toggle(false);
  },
  _setListOption(name2, value2) {
    this._list && this._list.option(name2, value2);
  },
  _getDisplayValue(item) {
    var isPrimitiveItem = !isObject(item);
    var displayValue = isPrimitiveItem ? item : this._displayGetter(item);
    return !isObject(displayValue) ? String(ensureDefined(displayValue, "")) : "";
  },
  _updateActionButton(selectedItem) {
    if (this.option("useSelectMode")) {
      this.option({
        text: this._getDisplayValue(selectedItem),
        icon: isPlainObject(selectedItem) ? selectedItem.icon : void 0
      });
    }
    this._setOptionWithoutOptionChange("selectedItem", selectedItem);
    this._setOptionWithoutOptionChange("selectedItemKey", this._keyGetter(selectedItem));
  },
  _clean() {
    this._list && this._list.$element().remove();
    this._popup && this._popup.$element().remove();
  },
  _selectedItemKeyChanged(value2) {
    this._setListOption("selectedItemKeys", this.option("useSelectMode") && isDefined(value2) ? [value2] : []);
    var previousItem = this.option("selectedItem");
    this._loadSelectedItem().done((selectedItem) => {
      this._updateActionButton(selectedItem);
      if (this._displayGetter(previousItem) !== this._displayGetter(selectedItem)) {
        this._fireSelectionChangedAction({
          previousValue: previousItem,
          value: selectedItem
        });
      }
    });
  },
  _updateButtonGroup(name2, value2) {
    this._buttonGroup.option(name2, value2);
    this._updateAriaAttributes(this.option("opened"));
  },
  _actionButtonOptionChanged(_ref5) {
    var {
      name: name2,
      value: value2
    } = _ref5;
    var newConfig = {};
    newConfig[name2] = value2;
    this._updateButtonGroup("items[0]", extend({}, this._actionButtonConfig(), newConfig));
    this._popup && this._popup.repaint();
  },
  _selectModeChanged(value2) {
    if (value2) {
      this._setListOption("selectionMode", "single");
      var selectedItemKey = this.option("selectedItemKey");
      this._setListOption("selectedItemKeys", isDefined(selectedItemKey) ? [selectedItemKey] : []);
      this._selectedItemKeyChanged(this.option("selectedItemKey"));
    } else {
      this._setListOption("selectionMode", "none");
      this.option({
        selectedItemKey: void 0,
        selectedItem: void 0
      });
      this._actionButtonOptionChanged({
        text: this.option("text")
      });
    }
  },
  _updateItemCollection(optionName) {
    var selectedItemKey = this.option("selectedItemKey");
    this._setListOption("selectedItem", null);
    this._setWidgetOption("_list", [optionName]);
    if (isDefined(selectedItemKey)) {
      this._loadSelectedItem().done((selectedItem) => {
        this._setListOption("selectedItemKeys", [selectedItemKey]);
        this._setListOption("selectedItem", selectedItem);
      }).fail((error) => {
        this._setListOption("selectedItemKeys", []);
      }).always(this._updateActionButton.bind(this));
    }
  },
  _updateDataSource() {
    var items = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._dataSource.items();
    this._dataSource = void 0;
    this._itemsToDataSource(items);
    this._updateKeyExpr();
  },
  _updateKeyExpr() {
    this._compileKeyGetter();
    this._setListOption("keyExpr", this._getKey());
  },
  focus() {
    this._buttonGroup.focus();
  },
  _optionChanged(args) {
    var _a;
    var {
      name: name2,
      value: value2
    } = args;
    switch (name2) {
      case "useSelectMode":
        this._selectModeChanged(value2);
        break;
      case "splitButton":
        this._updateArrowClass();
        this._renderButtonGroup();
        break;
      case "displayExpr":
        this._compileDisplayGetter();
        this._setListOption(name2, value2);
        this._updateActionButton(this.option("selectedItem"));
        break;
      case "keyExpr":
        this._updateDataSource();
        break;
      case "buttonGroupOptions":
        this._innerWidgetOptionChanged(this._buttonGroup, args);
        break;
      case "dropDownOptions":
        if ("dropDownOptions.visible" === args.fullName) {
          break;
        }
        if (void 0 !== args.value.visible) {
          delete args.value.visible;
        }
        this._popupOptionChanged(args);
        this._innerWidgetOptionChanged(this._popup, args);
        break;
      case "opened":
        this.toggle(value2);
        break;
      case "focusStateEnabled":
      case "hoverStateEnabled":
        this._setListOption(name2, value2);
        this._updateButtonGroup(name2, value2);
        this.callBase(args);
        break;
      case "items":
        this._updateDataSource(this.option("items"));
        this._updateItemCollection(name2);
        break;
      case "dataSource":
        if (Array.isArray(value2)) {
          this._updateDataSource(this.option("dataSource"));
        } else {
          this._initDataSource();
          this._updateKeyExpr();
        }
        this._updateItemCollection(name2);
        break;
      case "icon":
      case "text":
        this._actionButtonOptionChanged(args);
        break;
      case "showArrowIcon":
        this._updateArrowClass();
        this._renderButtonGroup();
        this._popup && this._popup.repaint();
        break;
      case "width":
      case "height":
        this.callBase(args);
        null === (_a = this._popup) || void 0 === _a ? void 0 : _a.repaint();
        break;
      case "stylingMode":
        this._updateButtonGroup(name2, value2);
        break;
      case "type":
        this._updateButtonGroup("items", this._getButtonGroupItems());
        break;
      case "itemTemplate":
      case "grouped":
      case "noDataText":
      case "groupTemplate":
      case "wrapItemText":
      case "useItemTextAsTitle":
        this._setListOption(name2, value2);
        break;
      case "dropDownContentTemplate":
        this._renderContent();
        break;
      case "selectedItemKey":
        this._selectedItemKeyChanged(value2);
        break;
      case "selectedItem":
        break;
      case "onItemClick":
        this._createItemClickAction();
        break;
      case "onButtonClick":
        this._createActionClickAction();
        break;
      case "onSelectionChanged":
        this._createSelectionChangedAction();
        break;
      case "deferRendering":
        this.toggle(this.option("opened"));
        break;
      case "tabIndex":
        this._updateButtonGroup(name2, value2);
        break;
      case "template":
        this._renderButtonGroup();
        break;
      default:
        this.callBase(args);
    }
  }
}).include(data_helper_default);
component_registrator_default("dxDropDownButton", DropDownButton2);

// node_modules/devextreme/esm/__internal/grids/grid_core/m_export.js
function prepareItems(items, emptyCell) {
  var defaultSetter = (value2) => !value2 ? 1 : value2;
  var resultItems = [];
  var cols = (items[0] || []).reduce((sum, item2) => sum + defaultSetter(item2.colspan), 0);
  var getItem = /* @__PURE__ */ ((items2) => {
    var rowIndex2 = 0;
    var cellIndex2 = 0;
    return () => {
      var row = items2[rowIndex2] || [];
      var item2 = row[cellIndex2++];
      if (cellIndex2 >= row.length) {
        rowIndex2++;
        cellIndex2 = 0;
      }
      if (item2) {
        item2.colspan = defaultSetter(item2.colspan);
        item2.rowspan = defaultSetter(item2.rowspan);
      }
      return item2;
    };
  })(items);
  var addItem2 = (rowIndex2, cellIndex2, item2) => {
    var row = resultItems[rowIndex2] = resultItems[rowIndex2] || [];
    row[cellIndex2] = item2;
    if (item2.colspan > 1 || item2.rowspan > 1) {
      var clone = ((item3) => extend({}, item3, emptyCell))(item2);
      for (var c = 1; c < item2.colspan; c++) {
        addItem2(rowIndex2, cellIndex2 + c, clone);
      }
      for (var r = 1; r < item2.rowspan; r++) {
        for (var _c = 0; _c < item2.colspan; _c++) {
          addItem2(rowIndex2 + r, cellIndex2 + _c, clone);
        }
      }
    }
  };
  var item = getItem();
  var rowIndex = 0;
  while (item) {
    for (var cellIndex = 0; cellIndex < cols; cellIndex++) {
      if (!item) {
        break;
      }
      if (resultItems[rowIndex] && resultItems[rowIndex][cellIndex]) {
        continue;
      }
      addItem2(rowIndex, cellIndex, item);
      cellIndex += item.colspan - 1;
      item = getItem();
    }
    rowIndex++;
  }
  return resultItems;
}

// node_modules/devextreme/esm/__internal/grids/data_grid/export/m_export.js
var DATAGRID_EXPORT_MENU_CLASS = "dx-datagrid-export-menu";
var DATAGRID_EXPORT_BUTTON_CLASS = "dx-datagrid-export-button";
var DATAGRID_EXPORT_TOOLBAR_BUTTON_NAME = "exportButton";
var DATAGRID_EXPORT_ICON = "export";
var DATAGRID_EXPORT_EXCEL_ICON = "xlsxfile";
var DATAGRID_EXPORT_SELECTED_ICON = "exportselected";
var DATAGRID_PDF_EXPORT_ICON = "pdffile";
var DataProvider = class {
  constructor(exportController, initialColumnWidthsByColumnIndex, selectedRowsOnly) {
    this._exportController = exportController;
    this._initialColumnWidthsByColumnIndex = initialColumnWidthsByColumnIndex;
    this._selectedRowsOnly = selectedRowsOnly;
  }
  _getGroupValue(item) {
    var {
      key,
      data: data17,
      rowType,
      groupIndex,
      summaryCells
    } = item;
    var groupColumn = this._options.groupColumns[groupIndex];
    var value2 = m_core_default.getDisplayValue(groupColumn, groupColumn.deserializeValue ? groupColumn.deserializeValue(key[groupIndex]) : key[groupIndex], data17, rowType);
    var result2 = "".concat(groupColumn.caption, ": ").concat(m_core_default.formatValue(value2, groupColumn));
    if (summaryCells && summaryCells[0] && summaryCells[0].length) {
      result2 += " ".concat(m_core_default.getGroupRowSummaryText(summaryCells[0], this._options.summaryTexts));
    }
    return result2;
  }
  _correctCellIndex(cellIndex) {
    return cellIndex;
  }
  _initOptions() {
    var exportController = this._exportController;
    var groupColumns = exportController._columnsController.getGroupColumns();
    this._options = {
      columns: exportController._getColumns(this._initialColumnWidthsByColumnIndex),
      groupColumns,
      items: this._selectedRowsOnly || exportController._selectionOnly ? exportController._getSelectedItems() : exportController._getAllItems(),
      isHeadersVisible: exportController.option("showColumnHeaders"),
      summaryTexts: exportController.option("summary.texts"),
      rtlEnabled: exportController.option("rtlEnabled")
    };
  }
  getHeaderStyles() {
    return [{
      bold: true,
      alignment: "center"
    }, {
      bold: true,
      alignment: "left"
    }, {
      bold: true,
      alignment: "right"
    }];
  }
  getGroupRowStyle() {
    return {
      bold: true,
      alignment: getDefaultAlignment(this._options.rtlEnabled)
    };
  }
  getColumnStyles() {
    var columnStyles = [];
    this.getColumns().forEach((column) => {
      columnStyles.push({
        alignment: column.alignment || "left",
        format: column.format,
        dataType: column.dataType
      });
    });
    return columnStyles;
  }
  getStyles() {
    return [...this.getHeaderStyles(), ...this.getColumnStyles(), this.getGroupRowStyle()];
  }
  _getTotalCellStyleId(cellIndex) {
    var _a;
    var alignment = (null === (_a = this.getColumns()[cellIndex]) || void 0 === _a ? void 0 : _a.alignment) || "right";
    return this.getHeaderStyles().map((style) => style.alignment).indexOf(alignment);
  }
  getStyleId(rowIndex, cellIndex) {
    if (rowIndex < this.getHeaderRowCount()) {
      return 0;
    }
    if (this.isTotalCell(rowIndex - this.getHeaderRowCount(), cellIndex)) {
      return this._getTotalCellStyleId(cellIndex);
    }
    if (this.isGroupRow(rowIndex - this.getHeaderRowCount())) {
      return this.getHeaderStyles().length + this.getColumns().length;
    }
    return cellIndex + this.getHeaderStyles().length;
  }
  getColumns(getColumnsByAllRows) {
    var {
      columns: columns7
    } = this._options;
    return getColumnsByAllRows ? columns7 : columns7[columns7.length - 1];
  }
  getColumnsWidths() {
    var columns7 = this.getColumns();
    return isDefined(columns7) ? columns7.map((c) => c.width) : void 0;
  }
  getRowsCount() {
    return this._options.items.length + this.getHeaderRowCount();
  }
  getHeaderRowCount() {
    if (this.isHeadersVisible()) {
      return this._options.columns.length - 1;
    }
    return 0;
  }
  isGroupRow(rowIndex) {
    return rowIndex < this._options.items.length && "group" === this._options.items[rowIndex].rowType;
  }
  getGroupLevel(rowIndex) {
    var item = this._options.items[rowIndex - this.getHeaderRowCount()];
    var groupIndex = item && item.groupIndex;
    if (item && "totalFooter" === item.rowType) {
      return 0;
    }
    return isDefined(groupIndex) ? groupIndex : this._options.groupColumns.length;
  }
  getCellType(rowIndex, cellIndex) {
    var columns7 = this.getColumns();
    if (rowIndex < this.getHeaderRowCount()) {
      return "string";
    }
    rowIndex -= this.getHeaderRowCount();
    if (cellIndex < columns7.length) {
      var item = this._options.items.length && this._options.items[rowIndex];
      var column = columns7[cellIndex];
      if (item && "data" === item.rowType) {
        if (isFinite(item.values[this._correctCellIndex(cellIndex)]) && !isDefined(column.customizeText)) {
          return isDefined(column.lookup) ? column.lookup.dataType : column.dataType;
        }
      }
      return "string";
    }
  }
  ready() {
    this._initOptions();
    var options2 = this._options;
    return when(options2.items).done((items) => {
      options2.items = items;
    }).fail(() => {
      options2.items = [];
    });
  }
  _convertFromGridGroupSummaryItems(gridGroupSummaryItems) {
    if (isDefined(gridGroupSummaryItems) && gridGroupSummaryItems.length > 0) {
      return gridGroupSummaryItems.map((item) => ({
        value: item.value,
        name: item.name
      }));
    }
  }
  getCellData(rowIndex, cellIndex, isExcelJS) {
    var value2;
    var column;
    var result2 = {
      cellSourceData: {},
      value: value2
    };
    var columns7 = this.getColumns();
    var correctedCellIndex = this._correctCellIndex(cellIndex);
    if (rowIndex < this.getHeaderRowCount()) {
      var columnsRow = this.getColumns(true)[rowIndex];
      column = columnsRow[cellIndex];
      result2.cellSourceData.rowType = "header";
      result2.cellSourceData.column = column && column.gridColumn;
      result2.value = column && column.caption;
    } else {
      rowIndex -= this.getHeaderRowCount();
      var item = this._options.items.length && this._options.items[rowIndex];
      if (item) {
        var itemValues = item.values;
        result2.cellSourceData.rowType = item.rowType;
        result2.cellSourceData.column = columns7[cellIndex] && columns7[cellIndex].gridColumn;
        switch (item.rowType) {
          case "groupFooter":
          case "totalFooter":
            if (correctedCellIndex < itemValues.length) {
              value2 = itemValues[correctedCellIndex];
              if (isDefined(value2)) {
                result2.cellSourceData.value = value2.value;
                result2.cellSourceData.totalSummaryItemName = value2.name;
                result2.value = m_core_default.getSummaryText(value2, this._options.summaryTexts);
              } else {
                result2.cellSourceData.value = void 0;
              }
            }
            break;
          case "group":
            result2.cellSourceData.groupIndex = item.groupIndex;
            if (cellIndex < 1) {
              result2.cellSourceData.column = this._options.groupColumns[item.groupIndex];
              result2.cellSourceData.value = item.key[item.groupIndex];
              result2.cellSourceData.groupSummaryItems = this._convertFromGridGroupSummaryItems(item.summaryCells[0]);
              result2.value = this._getGroupValue(item);
            } else {
              var summaryItems = item.values[correctedCellIndex];
              if (Array.isArray(summaryItems)) {
                result2.cellSourceData.groupSummaryItems = this._convertFromGridGroupSummaryItems(summaryItems);
                value2 = "";
                for (var i = 0; i < summaryItems.length; i++) {
                  value2 += (i > 0 ? isExcelJS ? "\n" : " \n " : "") + m_core_default.getSummaryText(summaryItems[i], this._options.summaryTexts);
                }
                result2.value = value2;
              } else {
                result2.cellSourceData.value = void 0;
              }
            }
            break;
          default:
            column = columns7[cellIndex];
            if (column) {
              var _value = itemValues[correctedCellIndex];
              var displayValue = m_core_default.getDisplayValue(column, _value, item.data, item.rowType);
              if (!isFinite(displayValue) || isDefined(column.customizeText)) {
                if (isExcelJS && isDefined(column.customizeText) && column.customizeText === this._exportController._columnsController.getCustomizeTextByDataType("boolean")) {
                  result2.value = displayValue;
                } else {
                  result2.value = m_core_default.formatValue(displayValue, column);
                }
              } else {
                result2.value = displayValue;
              }
              result2.cellSourceData.value = _value;
            }
            result2.cellSourceData.data = item.data;
        }
      }
    }
    return result2;
  }
  isHeadersVisible() {
    return this._options.isHeadersVisible;
  }
  isTotalCell(rowIndex, cellIndex) {
    var {
      items
    } = this._options;
    var item = items[rowIndex];
    var correctCellIndex = this._correctCellIndex(cellIndex);
    var isSummaryAlignByColumn = item.summaryCells && item.summaryCells[correctCellIndex] && item.summaryCells[correctCellIndex].length > 0 && item.summaryCells[correctCellIndex][0].alignByColumn;
    return item && "groupFooter" === item.rowType || "totalFooter" === item.rowType || isSummaryAlignByColumn;
  }
  getCellMerging(rowIndex, cellIndex) {
    var {
      columns: columns7
    } = this._options;
    var column = columns7[rowIndex] && columns7[rowIndex][cellIndex];
    return column ? {
      colspan: (column.exportColspan || 1) - 1,
      rowspan: (column.rowspan || 1) - 1
    } : {
      colspan: 0,
      rowspan: 0
    };
  }
  getFrozenArea() {
    return {
      x: 0,
      y: this.getHeaderRowCount()
    };
  }
};
var ExportController = class extends m_core_default.ViewController {
  init() {
    this.throwWarningIfNoOnExportingEvent();
    this._columnsController = this.getController("columns");
    this._dataController = this.getController("data");
    this._selectionController = this.getController("selection");
    this._rowsView = this.getView("rowsView");
    this._headersView = this.getView("columnHeadersView");
    this.createAction("onExporting", {
      excludeValidators: ["disabled", "readOnly"]
    });
  }
  _getEmptyCell() {
    return {
      caption: "",
      colspan: 1,
      rowspan: 1
    };
  }
  _updateColumnWidth(column, width) {
    column.width = width;
  }
  _getColumns(initialColumnWidthsByColumnIndex) {
    var result2 = [];
    var i;
    var columns7;
    var columnsController = this._columnsController;
    var rowCount = columnsController.getRowCount();
    for (i = 0; i <= rowCount; i++) {
      var currentHeaderRow = [];
      columns7 = columnsController.getVisibleColumns(i, true);
      var columnWidthsByColumnIndex = void 0;
      if (i === rowCount) {
        if (this._updateLockCount) {
          columnWidthsByColumnIndex = initialColumnWidthsByColumnIndex;
        } else {
          var columnWidths = this._getColumnWidths(this._headersView, this._rowsView);
          if (columnWidths && columnWidths.length) {
            columnWidthsByColumnIndex = {};
            for (var _i = 0; _i < columns7.length; _i++) {
              columnWidthsByColumnIndex[columns7[_i].index] = columnWidths[_i];
            }
          }
        }
      }
      for (var j = 0; j < columns7.length; j++) {
        var column = extend({}, columns7[j], {
          dataType: "datetime" === columns7[j].dataType ? "date" : columns7[j].dataType,
          gridColumn: columns7[j]
        });
        if (this._needColumnExporting(column)) {
          var currentColspan = this._calculateExportColspan(column);
          if (isDefined(currentColspan)) {
            column.exportColspan = currentColspan;
          }
          if (columnWidthsByColumnIndex) {
            this._updateColumnWidth(column, columnWidthsByColumnIndex[column.index]);
          }
          currentHeaderRow.push(column);
        }
      }
      result2.push(currentHeaderRow);
    }
    columns7 = result2[rowCount];
    result2 = prepareItems(result2.slice(0, -1), this._getEmptyCell());
    result2.push(columns7);
    return result2;
  }
  _calculateExportColspan(column) {
    if (!column.isBand) {
      return;
    }
    var childColumns = this._columnsController.getChildrenByBandColumn(column.index, true);
    if (!isDefined(childColumns)) {
      return;
    }
    return childColumns.reduce((result2, childColumn) => {
      if (this._needColumnExporting(childColumn)) {
        return result2 + (this._calculateExportColspan(childColumn) || 1);
      }
      return result2;
    }, 0);
  }
  _needColumnExporting(column) {
    return !column.command && (column.allowExporting || void 0 === column.allowExporting);
  }
  _getFooterSummaryItems(summaryCells, isTotal) {
    var result2 = [];
    var estimatedItemsCount = 1;
    var i = 0;
    do {
      var values = [];
      for (var j = 0; j < summaryCells.length; j++) {
        var summaryCell = summaryCells[j];
        var itemsLength = summaryCell.length;
        if (estimatedItemsCount < itemsLength) {
          estimatedItemsCount = itemsLength;
        }
        values.push(summaryCell[i]);
      }
      result2.push({
        values,
        rowType: isTotal ? "totalFooter" : "groupFooter"
      });
    } while (i++ < estimatedItemsCount - 1);
    return result2;
  }
  _hasSummaryGroupFooters() {
    var groupItems = this.option("summary.groupItems");
    if (isDefined(groupItems)) {
      for (var i = 0; i < groupItems.length; i++) {
        if (groupItems[i].showInGroupFooter) {
          return true;
        }
      }
    }
    return false;
  }
  _getItemsWithSummaryGroupFooters(sourceItems) {
    var result2 = [];
    var beforeGroupFooterItems = [];
    var groupFooterItems = [];
    for (var i = 0; i < sourceItems.length; i++) {
      var item = sourceItems[i];
      if ("groupFooter" === item.rowType) {
        groupFooterItems = this._getFooterSummaryItems(item.summaryCells);
        result2 = result2.concat(beforeGroupFooterItems, groupFooterItems);
        beforeGroupFooterItems = [];
      } else {
        beforeGroupFooterItems.push(item);
      }
    }
    return result2.length ? result2 : beforeGroupFooterItems;
  }
  _updateGroupValuesWithSummaryByColumn(sourceItems) {
    var summaryValues = [];
    for (var i = 0; i < sourceItems.length; i++) {
      var item = sourceItems[i];
      var {
        summaryCells
      } = item;
      if ("group" === item.rowType && summaryCells && summaryCells.length > 1) {
        var groupColumnCount = item.values.length;
        for (var j = 1; j < summaryCells.length; j++) {
          for (var k = 0; k < summaryCells[j].length; k++) {
            var summaryItem = summaryCells[j][k];
            if (summaryItem && summaryItem.alignByColumn) {
              if (!Array.isArray(summaryValues[j - groupColumnCount])) {
                summaryValues[j - groupColumnCount] = [];
              }
              summaryValues[j - groupColumnCount].push(summaryItem);
            }
          }
        }
        if (summaryValues.length > 0) {
          item.values.push(...summaryValues);
          summaryValues = [];
        }
      }
    }
  }
  _processUnExportedItems(items) {
    var columns7 = this._columnsController.getVisibleColumns(null, true);
    var groupColumns = this._columnsController.getGroupColumns();
    var values;
    var summaryCells;
    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      var isCommand = false;
      values = [];
      summaryCells = [];
      for (var j = 0; j < columns7.length; j++) {
        var column = columns7[j];
        isCommand || (isCommand = ["detailExpand", "buttons"].includes(column.type));
        if (this._needColumnExporting(column)) {
          if (item.values) {
            if ("group" === item.rowType && !values.length) {
              values.push(item.key[item.groupIndex]);
            } else {
              values.push(item.values[j]);
            }
          }
          if (item.summaryCells) {
            if ("group" === item.rowType && !summaryCells.length) {
              var index = j - groupColumns.length + item.groupIndex;
              summaryCells.push(item.summaryCells[isCommand ? index : index + 1]);
            } else {
              summaryCells.push(item.summaryCells[j]);
            }
          }
        }
      }
      if (values.length) {
        item.values = values;
      }
      if (summaryCells.length) {
        item.summaryCells = summaryCells;
      }
    }
  }
  _getAllItems(data17) {
    var skipFilter = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false;
    var that = this;
    var d = new Deferred();
    var footerItems = this._dataController.footerItems();
    var totalItem = footerItems.length && footerItems[0];
    var summaryTotalItems = that.option("summary.totalItems");
    var summaryCells;
    when(data17).done((data18) => {
      this._dataController.loadAll(data18, skipFilter).done((sourceItems, totalAggregates) => {
        that._updateGroupValuesWithSummaryByColumn(sourceItems);
        if (that._hasSummaryGroupFooters()) {
          sourceItems = that._getItemsWithSummaryGroupFooters(sourceItems);
        }
        summaryCells = totalItem && totalItem.summaryCells;
        if (isDefined(totalAggregates) && summaryTotalItems) {
          summaryCells = that._getSummaryCells(summaryTotalItems, totalAggregates);
        }
        var summaryItems = totalItem && that._getFooterSummaryItems(summaryCells, true);
        if (summaryItems) {
          sourceItems = sourceItems.concat(summaryItems);
        }
        that._processUnExportedItems(sourceItems);
        d.resolve(sourceItems);
      }).fail(d.reject);
    }).fail(d.reject);
    return d;
  }
  _getSummaryCells(summaryTotalItems, totalAggregates) {
    return this._dataController._calculateSummaryCells(summaryTotalItems, totalAggregates, this._columnsController.getVisibleColumns(null, true), (summaryItem, column) => this._dataController._isDataColumn(column) ? column.index : -1);
  }
  _getSelectedItems() {
    if (this.needLoadItemsOnExportingSelectedItems()) {
      return this._getAllItems(this._selectionController.loadSelectedItemsWithFilter(), true);
    }
    return this._getAllItems(this._selectionController.getSelectedRowsData());
  }
  _getColumnWidths(headersView, rowsView17) {
    return headersView && headersView.isVisible() ? headersView.getColumnWidths() : rowsView17.getColumnWidths();
  }
  throwWarningIfNoOnExportingEvent() {
    var _a, _b;
    var hasOnExporting = null === (_b = (_a = this.component).hasActionSubscription) || void 0 === _b ? void 0 : _b.call(_a, "onExporting");
    if (this.option("export.enabled") && !hasOnExporting) {
      ui_errors_default.log("W1024");
    }
  }
  callbackNames() {
    return ["selectionOnlyChanged"];
  }
  getDataProvider(selectedRowsOnly) {
    var columnWidths = this._getColumnWidths(this._headersView, this._rowsView);
    var initialColumnWidthsByColumnIndex;
    if (columnWidths && columnWidths.length) {
      initialColumnWidthsByColumnIndex = {};
      var columnsLastRowVisibleColumns = this._columnsController.getVisibleColumns(this._columnsController.getRowCount(), true);
      for (var i = 0; i < columnsLastRowVisibleColumns.length; i++) {
        initialColumnWidthsByColumnIndex[columnsLastRowVisibleColumns[i].index] = columnWidths[i];
      }
    }
    return new DataProvider(this, initialColumnWidthsByColumnIndex, selectedRowsOnly);
  }
  exportTo(selectedRowsOnly, format2) {
    this._selectionOnly = selectedRowsOnly;
    var onExporting = this.getAction("onExporting");
    var eventArgs = {
      rtlEnabled: this.option("rtlEnabled"),
      selectedRowsOnly: !!selectedRowsOnly,
      format: format2,
      fileName: "DataGrid",
      cancel: false
    };
    isFunction(onExporting) && onExporting(eventArgs);
  }
  publicMethods() {
    return ["getDataProvider"];
  }
  selectionOnly(value2) {
    if (isDefined(value2)) {
      this._isSelectedRows = value2;
      this.selectionOnlyChanged.fire();
    } else {
      return this._isSelectedRows;
    }
  }
  optionChanged(args) {
    super.optionChanged(args);
    if ("export" === args.name) {
      this.throwWarningIfNoOnExportingEvent();
    }
  }
  needLoadItemsOnExportingSelectedItems() {
    var _a;
    return null !== (_a = this.option("loadItemsOnExportingSelectedItems")) && void 0 !== _a ? _a : this._dataController._dataSource.remoteOperations().filtering;
  }
};
var editing5 = (Base) => class extends Base {
  callbackNames() {
    var callbackList = super.callbackNames();
    return isDefined(callbackList) ? callbackList.push("editingButtonsUpdated") : ["editingButtonsUpdated"];
  }
  _updateEditButtons() {
    super._updateEditButtons();
    this.editingButtonsUpdated.fire();
  }
};
var headerPanel7 = (Base) => class extends Base {
  _getToolbarItems() {
    var items = super._getToolbarItems();
    var exportButton = this._getExportToolbarButton();
    if (exportButton) {
      items.push(exportButton);
      this._correctItemsPosition(items);
    }
    return items;
  }
  _getExportToolbarButton() {
    var items = this._getExportToolbarItems();
    if (0 === items.length) {
      return null;
    }
    var disabled = this._needDisableExportButton();
    var toolbarButtonOptions = {
      name: DATAGRID_EXPORT_TOOLBAR_BUTTON_NAME,
      location: "after",
      locateInMenu: "auto",
      sortIndex: 30,
      options: {
        items
      },
      disabled
    };
    if (1 === items.length) {
      var widgetOptions = _extends(_extends({}, items[0]), {
        hint: items[0].text,
        elementAttr: {
          class: DATAGRID_EXPORT_BUTTON_CLASS
        }
      });
      toolbarButtonOptions.widget = "dxButton";
      toolbarButtonOptions.showText = "inMenu";
      toolbarButtonOptions.options = widgetOptions;
    } else {
      var _widgetOptions = {
        icon: DATAGRID_EXPORT_ICON,
        displayExpr: "text",
        items,
        hint: this.option("export.texts.exportTo"),
        elementAttr: {
          class: DATAGRID_EXPORT_BUTTON_CLASS
        },
        dropDownOptions: {
          width: "auto",
          _wrapperClassExternal: DATAGRID_EXPORT_MENU_CLASS
        }
      };
      toolbarButtonOptions.options = _widgetOptions;
      toolbarButtonOptions.widget = "dxDropDownButton";
      toolbarButtonOptions.menuItemTemplate = (_data, _index, container) => {
        this._createComponent(renderer_default(container), list_light_default, {
          items
        });
      };
    }
    return toolbarButtonOptions;
  }
  _getExportToolbarItems() {
    var _a;
    var exportOptions = this.option("export");
    var texts = this.option("export.texts");
    var formats = null !== (_a = this.option("export.formats")) && void 0 !== _a ? _a : [];
    if (!exportOptions.enabled) {
      return [];
    }
    var items = [];
    formats.forEach((formatType) => {
      var formatName = formatType.toUpperCase();
      var exportAllIcon = DATAGRID_EXPORT_ICON;
      var exportSelectedIcon = DATAGRID_EXPORT_SELECTED_ICON;
      if ("xlsx" === formatType) {
        formatName = "Excel";
        exportAllIcon = DATAGRID_EXPORT_EXCEL_ICON;
      }
      if ("pdf" === formatType) {
        exportAllIcon = DATAGRID_PDF_EXPORT_ICON;
      }
      items.push({
        text: format(texts.exportAll, formatName),
        icon: exportAllIcon,
        onClick: () => {
          this._exportController.exportTo(false, formatType);
        }
      });
      if (exportOptions.allowExportSelectedData) {
        items.push({
          text: format(texts.exportSelectedRows, formatName),
          icon: exportSelectedIcon,
          onClick: () => {
            this._exportController.exportTo(true, formatType);
          }
        });
      }
    });
    return items;
  }
  _correctItemsPosition(items) {
    items.sort((itemA, itemB) => itemA.sortIndex - itemB.sortIndex);
  }
  _isExportButtonVisible() {
    return this.option("export.enabled");
  }
  optionChanged(args) {
    super.optionChanged(args);
    if ("export" === args.name) {
      args.handled = true;
      this._invalidate();
    }
  }
  _needDisableExportButton() {
    var isDataColumnsInvisible = !this._columnsController.hasVisibleDataColumns();
    var hasUnsavedChanges = this._editingController.hasChanges();
    return isDataColumnsInvisible || hasUnsavedChanges;
  }
  _columnOptionChanged(e) {
    super._columnOptionChanged(e);
    var isColumnLocationChanged = m_core_default.checkChanges(e.optionNames, ["groupIndex", "visible", "all"]);
    if (isColumnLocationChanged) {
      var disabled = this._needDisableExportButton();
      this.setToolbarItemDisabled("exportButton", disabled);
    }
  }
  init() {
    super.init();
    this._exportController = this.getController("export");
    this._editingController.editingButtonsUpdated.add(() => {
      var disabled = this._needDisableExportButton();
      this.setToolbarItemDisabled("exportButton", disabled);
    });
  }
};
m_core_default.registerModule("export", {
  defaultOptions: () => ({
    export: {
      enabled: false,
      fileName: "DataGrid",
      formats: ["xlsx"],
      allowExportSelectedData: false,
      texts: {
        exportTo: message_default.format("dxDataGrid-exportTo"),
        exportAll: message_default.format("dxDataGrid-exportAll"),
        exportSelectedRows: message_default.format("dxDataGrid-exportSelectedRows")
      }
    }
  }),
  controllers: {
    export: ExportController
  },
  extenders: {
    controllers: {
      editing: editing5
    },
    views: {
      headerPanel: headerPanel7
    }
  }
});

// node_modules/devextreme/esm/__internal/grids/grid_core/focus/m_focus_utils.js
var getSortFilterValue = (sortInfo, rowData, _ref) => {
  var {
    isRemoteFiltering,
    dateSerializationFormat,
    getSelector
  } = _ref;
  var {
    selector
  } = sortInfo;
  var getter = isFunction(selector) ? selector : getSelector(selector);
  var rawValue = getter ? getter(rowData) : rowData[selector];
  var safeValue = isRemoteFiltering && isDate(rawValue) ? date_serialization_default.serializeDate(rawValue, dateSerializationFormat) : rawValue;
  return {
    getter,
    rawValue,
    safeValue
  };
};
var UiGridCoreFocusUtils = {
  getSortFilterValue
};

// node_modules/devextreme/esm/__internal/grids/grid_core/focus/m_focus.js
var ROW_FOCUSED_CLASS = "dx-row-focused";
var FOCUSED_ROW_SELECTOR2 = ".dx-row.".concat(ROW_FOCUSED_CLASS);
var TABLE_POSTFIX_CLASS = "table";
var CELL_FOCUS_DISABLED_CLASS7 = "dx-cell-focus-disabled";
var FocusController = class extends m_modules_default.ViewController {
  getKeyboardController() {
    return this.getController("keyboardNavigation");
  }
  getDataController() {
    return this.getController("data");
  }
  init() {
    this.component._optionsByReference.focusedRowKey = true;
  }
  optionChanged(args) {
    var {
      name: name2,
      value: value2,
      previousValue
    } = args;
    switch (name2) {
      case "focusedRowIndex":
        this._focusRowByIndex(value2);
        this.getKeyboardController()._fireFocusedRowChanged();
        args.handled = true;
        break;
      case "focusedRowKey":
        if (Array.isArray(value2) && JSON.stringify(value2) === JSON.stringify(previousValue)) {
          return;
        }
        this._focusRowByKey(value2);
        this.getKeyboardController()._fireFocusedRowChanged();
        args.handled = true;
        break;
      case "focusedColumnIndex":
      case "focusedRowEnabled":
      case "autoNavigateToFocusedRow":
        args.handled = true;
        break;
      default:
        super.optionChanged(args);
    }
  }
  publicMethods() {
    return ["navigateToRow", "isRowFocused"];
  }
  isAutoNavigateToFocusedRow() {
    return "infinite" !== this.option("scrolling.mode") && this.option("autoNavigateToFocusedRow");
  }
  _focusRowByIndex(index, operationTypes) {
    if (!this.option("focusedRowEnabled")) {
      return;
    }
    index = void 0 !== index ? index : this.option("focusedRowIndex");
    if (index < 0) {
      if (this.isAutoNavigateToFocusedRow()) {
        this._resetFocusedRow();
      }
    } else {
      this._focusRowByIndexCore(index, operationTypes);
    }
  }
  _focusRowByIndexCore(index, operationTypes) {
    var pageSize = this.getDataController().pageSize();
    var setKeyByIndex = () => {
      if (this._isValidFocusedRowIndex(index)) {
        var rowIndex = index - this.getDataController().getRowIndexOffset(true);
        if (!operationTypes || operationTypes.paging && !operationTypes.filtering) {
          var lastItemIndex = this.getDataController()._getLastItemIndex();
          rowIndex = Math.min(rowIndex, lastItemIndex);
        }
        var focusedRowKey = this.getDataController().getKeyByRowIndex(rowIndex, true);
        if (isDefined(focusedRowKey) && !this.isRowFocused(focusedRowKey)) {
          this.option("focusedRowKey", focusedRowKey);
        }
      }
    };
    if (pageSize >= 0) {
      if (!this._isLocalRowIndex(index)) {
        var pageIndex = Math.floor(index / this.getDataController().pageSize());
        when(this.getDataController().pageIndex(pageIndex), this.getDataController().waitReady()).done(() => {
          setKeyByIndex();
        });
      } else {
        setKeyByIndex();
      }
    }
  }
  _isLocalRowIndex(index) {
    var isVirtualScrolling = this.getKeyboardController()._isVirtualScrolling();
    if (isVirtualScrolling) {
      var pageIndex = Math.floor(index / this.getDataController().pageSize());
      var virtualItems = this.getDataController().virtualItemsCount();
      var virtualItemsBegin = virtualItems ? virtualItems.begin : -1;
      var visibleRowsCount = this.getDataController().getVisibleRows().length + this.getDataController().getRowIndexOffset();
      var visiblePagesCount = Math.ceil(visibleRowsCount / this.getDataController().pageSize());
      return virtualItemsBegin <= index && visiblePagesCount > pageIndex;
    }
    return true;
  }
  _setFocusedRowKeyByIndex(index) {
    if (this._isValidFocusedRowIndex(index)) {
      var rowIndex = Math.min(index - this.getDataController().getRowIndexOffset(), this.getDataController().items().length - 1);
      var focusedRowKey = this.getDataController().getKeyByRowIndex(rowIndex);
      if (isDefined(focusedRowKey) && !this.isRowFocused(focusedRowKey)) {
        this.option("focusedRowKey", focusedRowKey);
      }
    }
  }
  _focusRowByKey(key) {
    if (!isDefined(key)) {
      this._resetFocusedRow();
    } else {
      this._navigateToRow(key, true);
    }
  }
  _resetFocusedRow() {
    var focusedRowKey = this.option("focusedRowKey");
    var isFocusedRowKeyDefined = isDefined(focusedRowKey);
    if (!isFocusedRowKeyDefined && this.option("focusedRowIndex") < 0) {
      return;
    }
    if (isFocusedRowKeyDefined) {
      this.option("focusedRowKey", null);
    }
    this.getKeyboardController().setFocusedRowIndex(-1);
    this.option("focusedRowIndex", -1);
    this.getDataController().updateItems({
      changeType: "updateFocusedRow",
      focusedRowKey: null
    });
    this.getKeyboardController()._fireFocusedRowChanged();
  }
  _isValidFocusedRowIndex(rowIndex) {
    var row = this.getDataController().getVisibleRows()[rowIndex];
    return !row || "data" === row.rowType || "group" === row.rowType;
  }
  navigateToRow(key) {
    if (!this.isAutoNavigateToFocusedRow()) {
      this.option("focusedRowIndex", -1);
    }
    return this._navigateToRow(key);
  }
  _navigateToRow(key, needFocusRow) {
    var that = this;
    var isAutoNavigate = that.isAutoNavigateToFocusedRow();
    var d = new Deferred();
    if (void 0 === key || !this.getDataController().dataSource()) {
      return d.reject().promise();
    }
    var rowIndexByKey = that.getFocusedRowIndexByKey(key);
    if (!isAutoNavigate && needFocusRow || rowIndexByKey >= 0) {
      that._navigateTo(key, d, needFocusRow);
    } else {
      this.getDataController().getPageIndexByKey(key).done((pageIndex) => {
        if (pageIndex < 0) {
          d.resolve(-1);
          return;
        }
        if (pageIndex === this.getDataController().pageIndex()) {
          this.getDataController().reload().done(() => {
            if (that.isRowFocused(key) && this.getDataController().getRowIndexByKey(key) >= 0) {
              d.resolve(that.getFocusedRowIndexByKey(key));
            } else {
              that._navigateTo(key, d, needFocusRow);
            }
          }).fail(d.reject);
        } else {
          this.getDataController().pageIndex(pageIndex).done(() => {
            that._navigateTo(key, d, needFocusRow);
          }).fail(d.reject);
        }
      }).fail(d.reject);
    }
    return d.promise();
  }
  _navigateTo(key, deferred, needFocusRow) {
    var visibleRowIndex = this.getDataController().getRowIndexByKey(key);
    var isVirtualRowRenderingMode = m_utils_default.isVirtualRowRendering(this);
    var isAutoNavigate = this.isAutoNavigateToFocusedRow();
    if (isAutoNavigate && isVirtualRowRenderingMode && visibleRowIndex < 0) {
      this._navigateToVirtualRow(key, deferred, needFocusRow);
    } else {
      this._navigateToVisibleRow(key, deferred, needFocusRow);
    }
  }
  _navigateToVisibleRow(key, deferred, needFocusRow) {
    if (needFocusRow) {
      this._triggerUpdateFocusedRow(key, deferred);
    } else {
      var focusedRowIndex = this.getFocusedRowIndexByKey(key);
      this.getView("rowsView").scrollToRowElement(key, deferred).done(() => {
        deferred.resolve(focusedRowIndex);
      });
    }
  }
  _navigateToVirtualRow(key, deferred, needFocusRow) {
    var rowsScrollController = this.getDataController()._rowsScrollController;
    var rowIndex = m_utils_default.getIndexByKey(key, this.getDataController().items(true));
    var scrollable = this.getView("rowsView").getScrollable();
    if (rowsScrollController && scrollable && rowIndex >= 0) {
      var focusedRowIndex = rowIndex + this.getDataController().getRowIndexOffset(true);
      var offset = rowsScrollController.getItemOffset(focusedRowIndex);
      var triggerUpdateFocusedRow = () => {
        if (this.getDataController().totalCount() && !this.getDataController().items().length) {
          return;
        }
        this.component.off("contentReady", triggerUpdateFocusedRow);
        if (needFocusRow) {
          this._triggerUpdateFocusedRow(key, deferred);
        } else {
          deferred.resolve(focusedRowIndex);
        }
      };
      this.component.on("contentReady", triggerUpdateFocusedRow);
      this.getView("rowsView").scrollTopPosition(offset);
    } else {
      deferred.resolve(-1);
    }
  }
  _triggerUpdateFocusedRow(key, deferred) {
    var focusedRowIndex = this.getFocusedRowIndexByKey(key);
    if (this._isValidFocusedRowIndex(focusedRowIndex)) {
      var d;
      if (this.option("focusedRowEnabled")) {
        this.getDataController().updateItems({
          changeType: "updateFocusedRow",
          focusedRowKey: key
        });
      } else {
        d = this.getView("rowsView").scrollToRowElement(key);
      }
      when(d).done(() => {
        this.getKeyboardController().setFocusedRowIndex(focusedRowIndex);
        deferred && deferred.resolve(focusedRowIndex);
      });
    } else {
      deferred && deferred.resolve(-1);
    }
  }
  getFocusedRowIndexByKey(key) {
    var loadedRowIndex = this.getDataController().getRowIndexByKey(key, true);
    return loadedRowIndex >= 0 ? loadedRowIndex + this.getDataController().getRowIndexOffset(true) : -1;
  }
  _focusRowByKeyOrIndex() {
    var focusedRowKey = this.option("focusedRowKey");
    var currentFocusedRowIndex = this.option("focusedRowIndex");
    if (isDefined(focusedRowKey)) {
      var visibleRowIndex = this.getDataController().getRowIndexByKey(focusedRowKey);
      if (visibleRowIndex >= 0) {
        if (this.getKeyboardController()._isVirtualScrolling()) {
          currentFocusedRowIndex = visibleRowIndex + this.getDataController().getRowIndexOffset();
        }
        this.getKeyboardController().setFocusedRowIndex(currentFocusedRowIndex);
        this._triggerUpdateFocusedRow(focusedRowKey);
      } else {
        this._navigateToRow(focusedRowKey, true).done((focusedRowIndex) => {
          if (currentFocusedRowIndex >= 0 && focusedRowIndex < 0) {
            this._focusRowByIndex();
          } else if (currentFocusedRowIndex < 0 && focusedRowIndex >= 0) {
            this.getKeyboardController().setFocusedRowIndex(focusedRowIndex);
          }
        });
      }
    } else if (currentFocusedRowIndex >= 0) {
      this._focusRowByIndex(currentFocusedRowIndex);
    }
  }
  isRowFocused(key) {
    var focusedRowKey = this.option("focusedRowKey");
    if (isDefined(focusedRowKey)) {
      return equalByValue(key, this.option("focusedRowKey"));
    }
    return;
  }
  updateFocusedRow(e) {
    var that = this;
    var focusedRowIndex = that.getDataController().getRowIndexByKey(e.focusedRowKey);
    var rowsView17 = that.getView("rowsView");
    var $tableElement;
    var $mainRow;
    each(rowsView17.getTableElements(), (index, element) => {
      var isMainTable = 0 === index;
      $tableElement = renderer_default(element);
      that._clearPreviousFocusedRow($tableElement, focusedRowIndex);
      var $row = that._prepareFocusedRow({
        changedItem: that.getDataController().getVisibleRows()[focusedRowIndex],
        $tableElement,
        focusedRowIndex
      });
      if (isMainTable) {
        $mainRow = $row;
      }
    });
    if (!e.preventScroll && $mainRow) {
      rowsView17.scrollToElementVertically($mainRow);
    }
  }
  _clearPreviousFocusedRow($tableElement, focusedRowIndex) {
    var $prevRowFocusedElement = $tableElement.find(FOCUSED_ROW_SELECTOR2).filter((_, focusedRow) => {
      var $focusedRowTable = renderer_default(focusedRow).closest(".".concat(this.addWidgetPrefix(TABLE_POSTFIX_CLASS)));
      return $tableElement.is($focusedRowTable);
    });
    $prevRowFocusedElement.removeClass(ROW_FOCUSED_CLASS).removeClass(CELL_FOCUS_DISABLED_CLASS7).removeAttr("tabindex");
    $prevRowFocusedElement.children("td").removeAttr("tabindex");
    if (0 !== focusedRowIndex) {
      var $firstRow = renderer_default(this.getView("rowsView").getRowElement(0));
      $firstRow.removeClass(CELL_FOCUS_DISABLED_CLASS7).removeAttr("tabIndex");
    }
  }
  _prepareFocusedRow(options2) {
    var $row;
    var {
      changedItem
    } = options2;
    if (changedItem && ("data" === changedItem.rowType || "group" === changedItem.rowType)) {
      var {
        focusedRowIndex
      } = options2;
      var {
        $tableElement
      } = options2;
      var tabIndex = this.option("tabindex") || 0;
      var _rowsView = this.getView("rowsView");
      $row = renderer_default(_rowsView._getRowElements($tableElement).eq(focusedRowIndex));
      $row.addClass(ROW_FOCUSED_CLASS).attr("tabindex", tabIndex);
    }
    return $row;
  }
};
var keyboardNavigation3 = (Base) => class extends Base {
  init() {
    var rowIndex = this.option("focusedRowIndex");
    var columnIndex = this.option("focusedColumnIndex");
    this.createAction("onFocusedRowChanging", {
      excludeValidators: ["disabled", "readOnly"]
    });
    this.createAction("onFocusedRowChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
    this.createAction("onFocusedCellChanging", {
      excludeValidators: ["disabled", "readOnly"]
    });
    this.createAction("onFocusedCellChanged", {
      excludeValidators: ["disabled", "readOnly"]
    });
    super.init();
    this.setRowFocusType();
    this._focusedCellPosition = {};
    if (isDefined(rowIndex) && rowIndex >= 0) {
      this._focusedCellPosition.rowIndex = rowIndex;
    }
    if (isDefined(columnIndex) && columnIndex >= 0) {
      this._focusedCellPosition.columnIndex = columnIndex;
    }
  }
  setFocusedRowIndex(rowIndex) {
    super.setFocusedRowIndex(rowIndex);
    this.option("focusedRowIndex", rowIndex);
  }
  setFocusedColumnIndex(columnIndex) {
    super.setFocusedColumnIndex(columnIndex);
    this.option("focusedColumnIndex", columnIndex);
  }
  _escapeKeyHandler(eventArgs, isEditing) {
    if (isEditing || !this.option("focusedRowEnabled")) {
      return super._escapeKeyHandler(eventArgs, isEditing);
    }
    if (this.isCellFocusType()) {
      this.setRowFocusType();
      this._focus(this._getCellElementFromTarget(eventArgs.originalEvent.target), true);
      return true;
    }
    return false;
  }
  _updateFocusedCellPosition($cell, direction) {
    var position2 = super._updateFocusedCellPosition($cell, direction);
    if (position2 && position2.columnIndex >= 0) {
      this._fireFocusedCellChanged($cell);
    }
    return position2;
  }
};
var editorFactory3 = (Base) => class extends Base {
  renderFocusOverlay($element, isHideBorder) {
    var _a;
    var focusedRowEnabled = this.option("focusedRowEnabled");
    var $cell;
    if (!focusedRowEnabled || !(null === (_a = this._keyboardNavigationController) || void 0 === _a ? void 0 : _a.isRowFocusType()) || this._editingController.isEditing()) {
      super.renderFocusOverlay($element, isHideBorder);
    } else if (focusedRowEnabled) {
      var isRowElement = "row" === this._keyboardNavigationController._getElementType($element);
      if (isRowElement && !$element.hasClass(ROW_FOCUSED_CLASS)) {
        $cell = this._keyboardNavigationController.getFirstValidCellInRow($element);
        this._keyboardNavigationController.focus($cell);
      }
    }
  }
};
var columns6 = (Base) => class extends Base {
  getSortDataSourceParameters(_, sortByKey) {
    var result2 = super.getSortDataSourceParameters.apply(this, arguments);
    var dataSource = this._dataController._dataSource;
    var store = this._dataController.store();
    var key = store && store.key();
    var remoteOperations = dataSource && dataSource.remoteOperations() || {};
    var isLocalOperations = Object.keys(remoteOperations).every((operationName) => !remoteOperations[operationName]);
    if (key && (this.option("focusedRowEnabled") && false !== this._focusController.isAutoNavigateToFocusedRow() || sortByKey)) {
      key = Array.isArray(key) ? key : [key];
      var notSortedKeys = key.filter((key2) => !this.columnOption(key2, "sortOrder"));
      if (notSortedKeys.length) {
        result2 = result2 || [];
        if (isLocalOperations) {
          result2.push({
            selector: dataSource.getDataIndexGetter(),
            desc: false
          });
        } else {
          notSortedKeys.forEach((notSortedKey) => result2.push({
            selector: notSortedKey,
            desc: false
          }));
        }
      }
    }
    return result2;
  }
};
var data15 = (Base) => class extends Base {
  constructor() {
    super(...arguments);
    this._needToUpdateFocusedRowByIndex = false;
  }
  _applyChange(change) {
    if (change && "updateFocusedRow" === change.changeType) {
      return;
    }
    return super._applyChange.apply(this, arguments);
  }
  _fireChanged(e) {
    super._fireChanged(e);
    if (this.option("focusedRowEnabled") && this._dataSource) {
      var isPartialUpdate = "update" === e.changeType && e.repaintChangesOnly;
      var isPartialUpdateWithDeleting = isPartialUpdate && e.changeTypes && e.changeTypes.indexOf("remove") >= 0;
      if (this._needToUpdateFocusedRowByIndex) {
        this._needToUpdateFocusedRowByIndex = false;
        this._focusController._focusRowByIndex();
      } else if ("refresh" === e.changeType && e.items.length || isPartialUpdateWithDeleting) {
        this._updatePageIndexes();
        this._updateFocusedRow(e);
      } else if ("append" === e.changeType || "prepend" === e.changeType) {
        this._updatePageIndexes();
      } else if ("update" === e.changeType && e.repaintChangesOnly) {
        this._updateFocusedRow(e);
      }
    }
  }
  _handleDataPushed(changes) {
    super._handleDataPushed(changes);
    var focusedRowKey = this.option("focusedRowKey");
    this._needToUpdateFocusedRowByIndex = null === changes || void 0 === changes ? void 0 : changes.some((change) => "remove" === change.type && equalByValue(change.key, focusedRowKey));
  }
  _updatePageIndexes() {
    var prevRenderingPageIndex = this._lastRenderingPageIndex || 0;
    var renderingPageIndex = this._rowsScrollController ? this._rowsScrollController.pageIndex() : 0;
    this._lastRenderingPageIndex = renderingPageIndex;
    this._isPagingByRendering = renderingPageIndex !== prevRenderingPageIndex;
  }
  isPagingByRendering() {
    return this._isPagingByRendering;
  }
  _updateFocusedRow(e) {
    var operationTypes = e.operationTypes || {};
    var {
      reload,
      fullReload,
      pageIndex,
      paging
    } = operationTypes;
    var isVirtualScrolling = this._keyboardNavigationController._isVirtualScrolling();
    var pagingWithoutVirtualScrolling = paging && !isVirtualScrolling;
    var focusedRowKey = this.option("focusedRowKey");
    var isAutoNavigate = this._focusController.isAutoNavigateToFocusedRow();
    var isReload = reload && false === pageIndex;
    if (isReload && !fullReload && isDefined(focusedRowKey)) {
      this._focusController._navigateToRow(focusedRowKey, true).done((focusedRowIndex2) => {
        if (focusedRowIndex2 < 0) {
          this._focusController._focusRowByIndex(void 0, operationTypes);
        }
      });
    } else if (pagingWithoutVirtualScrolling && isAutoNavigate) {
      var rowIndexByKey = this.getRowIndexByKey(focusedRowKey);
      var focusedRowIndex = this.option("focusedRowIndex");
      var isValidRowIndexByKey = rowIndexByKey >= 0;
      var isValidFocusedRowIndex = focusedRowIndex >= 0;
      var isSameRowIndex = focusedRowIndex === rowIndexByKey;
      if (isValidFocusedRowIndex && (isSameRowIndex || !isValidRowIndexByKey)) {
        this._focusController._focusRowByIndex(focusedRowIndex, operationTypes);
      }
    } else if (pagingWithoutVirtualScrolling && !isAutoNavigate && this.getRowIndexByKey(focusedRowKey) < 0) {
      this.option("focusedRowIndex", -1);
    } else if (operationTypes.fullReload) {
      this._focusController._focusRowByKeyOrIndex();
    }
  }
  getPageIndexByKey(key) {
    var that = this;
    var d = new Deferred();
    that.getGlobalRowIndexByKey(key).done((globalIndex) => {
      d.resolve(globalIndex >= 0 ? Math.floor(globalIndex / that.pageSize()) : -1);
    }).fail(d.reject);
    return d.promise();
  }
  getGlobalRowIndexByKey(key) {
    if (this._dataSource.group()) {
      return this._calculateGlobalRowIndexByGroupedData(key);
    }
    return this._calculateGlobalRowIndexByFlatData(key);
  }
  _calculateGlobalRowIndexByFlatData(key, groupFilter, useGroup) {
    var that = this;
    var deferred = new Deferred();
    var dataSource = that._dataSource;
    if (Array.isArray(key) || isNewRowTempKey(key)) {
      return deferred.resolve(-1).promise();
    }
    var filter = that._generateFilterByKey(key);
    dataSource.load({
      filter: that._concatWithCombinedFilter(filter),
      skip: 0,
      take: 1
    }).done((data17) => {
      if (data17.length > 0) {
        filter = that._generateOperationFilterByKey(key, data17[0], useGroup);
        dataSource.load({
          filter: that._concatWithCombinedFilter(filter, groupFilter),
          skip: 0,
          take: 1,
          requireTotalCount: true
        }).done((_, extra) => {
          deferred.resolve(extra.totalCount);
        });
      } else {
        deferred.resolve(-1);
      }
    });
    return deferred.promise();
  }
  _concatWithCombinedFilter(filter, groupFilter) {
    var combinedFilter = this.getCombinedFilter();
    return m_utils_default.combineFilters([filter, combinedFilter, groupFilter]);
  }
  _generateBooleanFilter(selector, value2, sortInfo) {
    var {
      desc
    } = sortInfo;
    switch (true) {
      case (false === value2 && desc):
        return [selector, "=", true];
      case (false === value2 && !desc):
        return [selector, "=", null];
      case (true === value2 && !desc):
      case (!isBoolean(value2) && desc):
        return [selector, "<>", value2];
      default:
        return;
    }
  }
  _generateOperationFilterByKey(key, rowData, useGroup) {
    var that = this;
    var dateSerializationFormat = that.option("dateSerializationFormat");
    var isRemoteFiltering = that._dataSource.remoteOperations().filtering;
    var isRemoteSorting = that._dataSource.remoteOperations().sorting;
    var filter = that._generateFilterByKey(key, "<");
    var sort = that._columnsController.getSortDataSourceParameters(!isRemoteFiltering, true);
    if (useGroup) {
      var group = that._columnsController.getGroupDataSourceParameters(!isRemoteFiltering);
      if (group) {
        sort = sort ? group.concat(sort) : group;
      }
    }
    if (sort) {
      sort.slice().reverse().forEach((sortInfo) => {
        var {
          selector,
          desc,
          compare: compare4
        } = sortInfo;
        var {
          getter,
          rawValue,
          safeValue
        } = UiGridCoreFocusUtils.getSortFilterValue(sortInfo, rowData, {
          isRemoteFiltering,
          dateSerializationFormat,
          getSelector: (selector2) => that._columnsController.columnOption(selector2, "selector")
        });
        filter = [
          [selector, "=", safeValue],
          "and",
          filter
        ];
        if (null === rawValue || isBoolean(rawValue)) {
          var booleanFilter = that._generateBooleanFilter(selector, safeValue, desc);
          if (booleanFilter) {
            filter = [booleanFilter, "or", filter];
          }
        } else {
          var filterOperation = desc ? ">" : "<";
          var sortFilter;
          if (compare4 && !isRemoteSorting) {
            sortFilter = (data17) => {
              if ("<" === filterOperation) {
                return compare4(rawValue, getter(data17)) >= 1;
              }
              return compare4(rawValue, getter(data17)) <= -1;
            };
          } else {
            sortFilter = [selector, filterOperation, safeValue];
            if (!desc) {
              sortFilter = [sortFilter, "or", [selector, "=", null]];
            }
          }
          filter = [sortFilter, "or", filter];
        }
      });
    }
    return filter;
  }
  _generateFilterByKey(key, operation) {
    var dataSourceKey = this._dataSource.key();
    var filter = [];
    if (!operation) {
      operation = "=";
    }
    if (Array.isArray(dataSourceKey)) {
      for (var i = 0; i < dataSourceKey.length; ++i) {
        var keyPart = key[dataSourceKey[i]];
        if (keyPart) {
          if (filter.length > 0) {
            filter.push("and");
          }
          filter.push([dataSourceKey[i], operation, keyPart]);
        }
      }
    } else {
      filter = [dataSourceKey, operation, key];
    }
    return filter;
  }
  _getLastItemIndex() {
    return this.items(true).length - 1;
  }
};
var editing6 = (Base) => class extends Base {
  _deleteRowCore(rowIndex) {
    var deferred = super._deleteRowCore.apply(this, arguments);
    var rowKey = this._dataController.getKeyByRowIndex(rowIndex);
    deferred.done(() => {
      var rowIndex2 = this._dataController.getRowIndexByKey(rowKey);
      var visibleRows = this._dataController.getVisibleRows();
      if (-1 === rowIndex2 && !visibleRows.length) {
        this._focusController._resetFocusedRow();
      }
    });
  }
};
var rowsView15 = (Base) => class extends Base {
  _createRow(row) {
    var $row = super._createRow.apply(this, arguments);
    if (this.option("focusedRowEnabled") && row) {
      if (this._focusController.isRowFocused(row.key)) {
        $row.addClass(ROW_FOCUSED_CLASS);
      }
    }
    return $row;
  }
  _checkRowKeys(options2) {
    super._checkRowKeys.apply(this, arguments);
    if (this.option("focusedRowEnabled") && this.option("dataSource")) {
      var store = this._dataController.store();
      if (store && !store.key()) {
        this._dataController.fireError("E1042", "Row focusing");
      }
    }
  }
  _update(change) {
    if ("updateFocusedRow" === change.changeType) {
      if (this.option("focusedRowEnabled")) {
        this._focusController.updateFocusedRow(change);
      }
    } else {
      super._update(change);
    }
  }
  updateFocusElementTabIndex($cellElements, preventScroll) {
    if (this.option("focusedRowEnabled")) {
      this._setFocusedRowElementTabIndex(preventScroll);
    } else {
      super.updateFocusElementTabIndex($cellElements);
    }
  }
  _setFocusedRowElementTabIndex(preventScroll) {
    var _a;
    var focusedRowKey = this.option("focusedRowKey");
    var tabIndex = null !== (_a = this.option("tabIndex")) && void 0 !== _a ? _a : 0;
    var columnsController = this._columnsController;
    var rowIndex = this._dataController.getRowIndexByKey(focusedRowKey);
    var columnIndex = this.option("focusedColumnIndex");
    var $row = this._findRowElementForTabIndex();
    var dataSource = this._dataController.dataSource();
    var operationTypes = null === dataSource || void 0 === dataSource ? void 0 : dataSource.operationTypes();
    var isPaging = !operationTypes || operationTypes.paging;
    if (!isDefined(this._scrollToFocusOnResize)) {
      this._scrollToFocusOnResize = () => {
        this.scrollToElementVertically(this._findRowElementForTabIndex());
        this.resizeCompleted.remove(this._scrollToFocusOnResize);
      };
    }
    $row.attr("tabIndex", tabIndex);
    var rowIndexFromOption = this.option("focusedRowIndex") - this._dataController.getRowIndexOffset(true);
    if (!isPaging && rowIndex < 0 && rowIndexFromOption >= 0) {
      this._focusController.updateFocusedRow({
        focusedRowKey,
        preventScroll
      });
    }
    if (rowIndex >= 0 && !preventScroll) {
      if (columnIndex < 0) {
        columnIndex = 0;
      }
      rowIndex += this._dataController.getRowIndexOffset();
      columnIndex += columnsController.getColumnIndexOffset();
      this._keyboardNavigationController.setFocusedCellPosition(rowIndex, columnIndex);
      if (this._focusController.isAutoNavigateToFocusedRow()) {
        if (!isPaging && !this._dataController.isPagingByRendering()) {
          this.resizeCompleted.remove(this._scrollToFocusOnResize);
          this.resizeCompleted.add(this._scrollToFocusOnResize);
        }
      }
    }
  }
  _findRowElementForTabIndex() {
    var focusedRowKey = this.option("focusedRowKey");
    var rowIndex = this._dataController.getRowIndexByKey(focusedRowKey);
    return renderer_default(this.getRowElement(rowIndex >= 0 ? rowIndex : 0));
  }
  scrollToRowElement(key) {
    var rowIndex = this._dataController.getRowIndexByKey(key);
    var $row = renderer_default(this.getRow(rowIndex));
    return this.scrollToElementVertically($row);
  }
  scrollToElementVertically($row) {
    var scrollable = this.getScrollable();
    if (scrollable && $row.length) {
      var position2 = scrollable.getScrollElementPosition($row, "vertical");
      return this.scrollTopPosition(position2);
    }
    return new Deferred().resolve();
  }
  scrollTopPosition(scrollTop) {
    var d = new Deferred();
    var scrollable = this.getScrollable();
    if (scrollable) {
      var currentScrollTop = scrollable.scrollTop();
      var scrollHandler = () => {
        scrollable.off("scroll", scrollHandler);
        d.resolve();
      };
      if (scrollTop !== currentScrollTop) {
        scrollable.on("scroll", scrollHandler);
        this._dataController.resetFilterApplying();
        scrollable.scrollTo({
          top: scrollTop
        });
        return d.promise();
      }
    }
    return d.resolve();
  }
};
var focusModule = {
  defaultOptions: () => ({
    focusedRowEnabled: false,
    autoNavigateToFocusedRow: true,
    focusedRowKey: null,
    focusedRowIndex: -1,
    focusedColumnIndex: -1
  }),
  controllers: {
    focus: FocusController
  },
  extenders: {
    controllers: {
      keyboardNavigation: keyboardNavigation3,
      editorFactory: editorFactory3,
      columns: columns6,
      data: data15,
      editing: editing6
    },
    views: {
      rowsView: rowsView15
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/focus/m_focus.js
var MAX_SAFE_INTEGER2 = Number.MAX_SAFE_INTEGER || 9007199254740991;
var data16 = (Base) => class extends focusModule.extenders.controllers.data(Base) {
  changeRowExpand(path, isRowClick) {
    if (this.option("focusedRowEnabled") && Array.isArray(path) && this.isRowExpanded(path)) {
      if ((!isRowClick || !this._keyboardNavigationController.isKeyboardEnabled()) && this._isFocusedRowInsideGroup(path)) {
        this.option("focusedRowKey", path);
      }
    }
    return super.changeRowExpand(path, isRowClick);
  }
  _isFocusedRowInsideGroup(path) {
    var focusedRowKey = this.option("focusedRowKey");
    var rowIndex = this.getRowIndexByKey(focusedRowKey);
    var focusedRow = rowIndex >= 0 && this.getVisibleRows()[rowIndex];
    var groups = this._columnsController.getGroupDataSourceParameters(true);
    if (focusedRow) {
      for (var i = 0; i < path.length; ++i) {
        var getter = compileGetter(groups[i] && groups[i].selector);
        if (getter(focusedRow.data) !== path[i]) {
          return false;
        }
      }
    }
    return true;
  }
  _getGroupPath(groupItem, groupCount) {
    var groupPath = [];
    var items = [groupItem];
    while (items && items[0] && groupCount) {
      var item = items[0];
      if (void 0 !== item.key) {
        groupPath.push(item.key);
      }
      items = item.items;
      groupCount--;
    }
    return groupPath;
  }
  _expandGroupByPath(that, groupPath, level) {
    var d = new Deferred();
    level++;
    that.expandRow(groupPath.slice(0, level)).done(() => {
      if (level === groupPath.length) {
        d.resolve();
      } else {
        that._expandGroupByPath(that, groupPath, level).done(d.resolve).fail(d.reject);
      }
    }).fail(d.reject);
    return d.promise();
  }
  _calculateGlobalRowIndexByGroupedData(key) {
    var that = this;
    var dataSource = that._dataSource;
    var filter = that._generateFilterByKey(key);
    var deferred = new Deferred();
    var isGroupKey = Array.isArray(key);
    var group = dataSource.group();
    if (isGroupKey) {
      return deferred.resolve(-1).promise();
    }
    if (!dataSource._grouping._updatePagingOptions) {
      that._calculateGlobalRowIndexByFlatData(key, null, true).done(deferred.resolve).fail(deferred.reject);
      return deferred;
    }
    dataSource.load({
      filter: that._concatWithCombinedFilter(filter),
      group
    }).done((data17) => {
      if (!data17 || 0 === data17.length || !isDefined(data17[0].key) || -1 === data17[0].key) {
        return deferred.resolve(-1).promise();
      }
      var groupPath = that._getGroupPath(data17[0], group.length);
      that._expandGroupByPath(that, groupPath, 0).done(() => {
        that._calculateExpandedRowGlobalIndex(deferred, key, groupPath, group);
      }).fail(deferred.reject);
    }).fail(deferred.reject);
    return deferred.promise();
  }
  _calculateExpandedRowGlobalIndex(deferred, key, groupPath, group) {
    var groupFilter = createGroupFilter(groupPath, {
      group
    });
    var dataSource = this._dataSource;
    var scrollingMode = this.option("scrolling.mode");
    var isVirtualScrolling = "virtual" === scrollingMode || "infinite" === scrollingMode;
    var pageSize = dataSource.pageSize();
    var groupOffset;
    dataSource._grouping._updatePagingOptions({
      skip: 0,
      take: MAX_SAFE_INTEGER2
    }, (groupInfo, totalOffset) => {
      if (equalByValue(groupInfo.path, groupPath)) {
        groupOffset = totalOffset;
      }
    });
    this._calculateGlobalRowIndexByFlatData(key, groupFilter).done((dataOffset) => {
      var count;
      var groupContinuationCount;
      if (dataOffset < 0) {
        deferred.resolve(-1);
        return;
      }
      var currentPageOffset = groupOffset % pageSize || pageSize;
      count = currentPageOffset + dataOffset - groupPath.length;
      if (isVirtualScrolling) {
        groupContinuationCount = 0;
      } else {
        groupContinuationCount = Math.floor(count / (pageSize - groupPath.length)) * groupPath.length;
      }
      count = groupOffset + dataOffset + groupContinuationCount;
      deferred.resolve(count);
    }).fail(deferred.reject);
  }
};
m_core_default.registerModule("focus", _extends(_extends({}, focusModule), {
  extenders: _extends(_extends({}, focusModule.extenders), {
    controllers: _extends(_extends({}, focusModule.extenders.controllers), {
      data: data16
    })
  })
}));

// node_modules/devextreme/esm/__internal/m_draggable.js
var window13 = getWindow();
var KEYDOWN_EVENT = "keydown";
var DRAGGABLE = "dxDraggable";
var DRAGSTART_EVENT_NAME2 = addNamespace(DRAG_START_EVENT, DRAGGABLE);
var DRAG_EVENT_NAME = addNamespace(DRAG_EVENT, DRAGGABLE);
var DRAGEND_EVENT_NAME = addNamespace(DRAG_END_EVENT, DRAGGABLE);
var DRAG_ENTER_EVENT_NAME = addNamespace(DRAG_ENTER_EVENT, DRAGGABLE);
var DRAGEND_LEAVE_EVENT_NAME = addNamespace(DRAG_LEAVE_EVENT, DRAGGABLE);
var POINTERDOWN_EVENT_NAME = addNamespace(pointer_default.down, DRAGGABLE);
var KEYDOWN_EVENT_NAME = addNamespace(KEYDOWN_EVENT, DRAGGABLE);
var CLONE_CLASS = "clone";
var targetDraggable;
var sourceDraggable;
var ANONYMOUS_TEMPLATE_NAME2 = "content";
var getMousePosition = (event) => ({
  x: event.pageX - renderer_default(window13).scrollLeft(),
  y: event.pageY - renderer_default(window13).scrollTop()
});
var GESTURE_COVER_CLASS2 = "dx-gesture-cover";
var OVERLAY_WRAPPER_CLASS = "dx-overlay-wrapper";
var OVERLAY_CONTENT_CLASS2 = "dx-overlay-content";
var ScrollHelper = class {
  constructor(orientation, component) {
    this._$scrollableAtPointer = null;
    this._preventScroll = true;
    this._component = component;
    if ("vertical" === orientation) {
      this._scrollValue = "scrollTop";
      this._overFlowAttr = "overflowY";
      this._sizeAttr = "height";
      this._scrollSizeProp = "scrollHeight";
      this._clientSizeProp = "clientHeight";
      this._limitProps = {
        start: "top",
        end: "bottom"
      };
    } else {
      this._scrollValue = "scrollLeft";
      this._overFlowAttr = "overflowX";
      this._sizeAttr = "width";
      this._scrollSizeProp = "scrollWidth";
      this._clientSizeProp = "clientWidth";
      this._limitProps = {
        start: "left",
        end: "right"
      };
    }
  }
  updateScrollable(elements, mousePosition) {
    var isScrollableFound = false;
    elements.some((element) => {
      var $element = renderer_default(element);
      var isTargetOverOverlayWrapper = $element.hasClass(OVERLAY_WRAPPER_CLASS);
      var isTargetOverOverlayContent = $element.hasClass(OVERLAY_CONTENT_CLASS2);
      if (isTargetOverOverlayWrapper || isTargetOverOverlayContent) {
        return true;
      }
      isScrollableFound = this._trySetScrollable(element, mousePosition);
      return isScrollableFound;
    });
    if (!isScrollableFound) {
      this._$scrollableAtPointer = null;
      this._scrollSpeed = 0;
    }
  }
  isScrolling() {
    return !!this._scrollSpeed;
  }
  isScrollable($element) {
    return ("auto" === $element.css(this._overFlowAttr) || $element.hasClass("dx-scrollable-container")) && $element.prop(this._scrollSizeProp) > Math.ceil("width" === this._sizeAttr ? getWidth($element) : getHeight($element));
  }
  _trySetScrollable(element, mousePosition) {
    var $element = renderer_default(element);
    var distanceToBorders;
    var sensitivity = this._component.option("scrollSensitivity");
    var isScrollable = this.isScrollable($element);
    if (isScrollable) {
      distanceToBorders = this._calculateDistanceToBorders($element, mousePosition);
      if (sensitivity > distanceToBorders[this._limitProps.start]) {
        if (!this._preventScroll) {
          this._scrollSpeed = -this._calculateScrollSpeed(distanceToBorders[this._limitProps.start]);
          this._$scrollableAtPointer = $element;
        }
      } else if (sensitivity > distanceToBorders[this._limitProps.end]) {
        if (!this._preventScroll) {
          this._scrollSpeed = this._calculateScrollSpeed(distanceToBorders[this._limitProps.end]);
          this._$scrollableAtPointer = $element;
        }
      } else {
        isScrollable = false;
        this._preventScroll = false;
      }
    }
    return isScrollable;
  }
  _calculateDistanceToBorders($area, mousePosition) {
    var area = $area.get(0);
    var areaBoundingRect;
    if (area) {
      areaBoundingRect = getBoundingRect(area);
      return {
        left: mousePosition.x - areaBoundingRect.left,
        top: mousePosition.y - areaBoundingRect.top,
        right: areaBoundingRect.right - mousePosition.x,
        bottom: areaBoundingRect.bottom - mousePosition.y
      };
    }
    return {};
  }
  _calculateScrollSpeed(distance) {
    var component = this._component;
    var sensitivity = component.option("scrollSensitivity");
    var maxSpeed = component.option("scrollSpeed");
    return Math.ceil(((sensitivity - distance) / sensitivity) ** 2 * maxSpeed);
  }
  scrollByStep() {
    if (this._$scrollableAtPointer && this._scrollSpeed) {
      if (this._$scrollableAtPointer.hasClass("dx-scrollable-container")) {
        var $scrollable = this._$scrollableAtPointer.closest(".dx-scrollable");
        var scrollableInstance = $scrollable.data("dxScrollable") || $scrollable.data("dxScrollView");
        if (scrollableInstance) {
          var nextScrollPosition = scrollableInstance.scrollOffset()[this._limitProps.start] + this._scrollSpeed;
          scrollableInstance.scrollTo({
            [this._limitProps.start]: nextScrollPosition
          });
        }
      } else {
        var _nextScrollPosition = this._$scrollableAtPointer[this._scrollValue]() + this._scrollSpeed;
        this._$scrollableAtPointer[this._scrollValue](_nextScrollPosition);
      }
      var dragMoveArgs = this._component._dragMoveArgs;
      if (dragMoveArgs) {
        this._component._dragMoveHandler(dragMoveArgs);
      }
    }
  }
  reset() {
    this._$scrollableAtPointer = null;
    this._scrollSpeed = 0;
    this._preventScroll = true;
  }
  isOutsideScrollable($scrollable, event) {
    if (!$scrollable) {
      return false;
    }
    var scrollableSize = getBoundingRect($scrollable.get(0));
    var start = scrollableSize[this._limitProps.start];
    var size = scrollableSize[this._sizeAttr];
    var mousePosition = getMousePosition(event);
    var location = "width" === this._sizeAttr ? mousePosition.x : mousePosition.y;
    return location < start || location > start + size;
  }
};
var ScrollAnimator = m_animator_default.inherit({
  ctor(strategy) {
    this.callBase();
    this._strategy = strategy;
  },
  _step() {
    var horizontalScrollHelper = this._strategy._horizontalScrollHelper;
    var verticalScrollHelper = this._strategy._verticalScrollHelper;
    horizontalScrollHelper && horizontalScrollHelper.scrollByStep();
    verticalScrollHelper && verticalScrollHelper.scrollByStep();
  }
});
var Draggable = dom_component_default.inherit({
  reset: noop,
  dragMove: noop,
  dragEnter: noop,
  dragLeave: noop,
  dragEnd(sourceEvent) {
    var sourceDraggable2 = this._getSourceDraggable();
    sourceDraggable2._fireRemoveEvent(sourceEvent);
    return Deferred().resolve();
  },
  _fireRemoveEvent: noop,
  _getDefaultOptions() {
    return extend(this.callBase(), {
      onDragStart: null,
      onDragMove: null,
      onDragEnd: null,
      onDragEnter: null,
      onDragLeave: null,
      onDragCancel: null,
      onCancelByEsc: false,
      onDrop: null,
      immediate: true,
      dragDirection: "both",
      boundary: void 0,
      boundOffset: 0,
      allowMoveByClick: false,
      itemData: null,
      container: void 0,
      dragTemplate: void 0,
      contentTemplate: "content",
      handle: "",
      filter: "",
      clone: false,
      autoScroll: true,
      scrollSpeed: 30,
      scrollSensitivity: 60,
      group: void 0,
      data: void 0
    });
  },
  _setOptionsByReference() {
    this.callBase.apply(this, arguments);
    extend(this._optionsByReference, {
      component: true,
      group: true,
      itemData: true,
      data: true
    });
  },
  _init() {
    this.callBase();
    this._attachEventHandlers();
    this._scrollAnimator = new ScrollAnimator(this);
    this._horizontalScrollHelper = new ScrollHelper("horizontal", this);
    this._verticalScrollHelper = new ScrollHelper("vertical", this);
    this._initScrollTop = 0;
    this._initScrollLeft = 0;
  },
  _normalizeCursorOffset(offset) {
    if (isObject(offset)) {
      offset = {
        h: offset.x,
        v: offset.y
      };
    }
    offset = splitPair(offset).map((value2) => parseFloat(value2));
    return {
      left: offset[0],
      top: 1 === offset.length ? offset[0] : offset[1]
    };
  },
  _getNormalizedCursorOffset(offset, options2) {
    if (isFunction(offset)) {
      offset = offset.call(this, options2);
    }
    return this._normalizeCursorOffset(offset);
  },
  _calculateElementOffset(options2) {
    var elementOffset;
    var dragElementOffset;
    var {
      event
    } = options2;
    var $element = renderer_default(options2.itemElement);
    var $dragElement = renderer_default(options2.dragElement);
    var isCloned = this._dragElementIsCloned();
    var cursorOffset = this.option("cursorOffset");
    var normalizedCursorOffset = {
      left: 0,
      top: 0
    };
    var currentLocate = this._initialLocate = locate($dragElement);
    if (isCloned || options2.initialOffset || cursorOffset) {
      elementOffset = options2.initialOffset || $element.offset();
      if (cursorOffset) {
        normalizedCursorOffset = this._getNormalizedCursorOffset(cursorOffset, options2);
        if (isFinite(normalizedCursorOffset.left)) {
          elementOffset.left = event.pageX;
        }
        if (isFinite(normalizedCursorOffset.top)) {
          elementOffset.top = event.pageY;
        }
      }
      dragElementOffset = $dragElement.offset();
      elementOffset.top -= dragElementOffset.top + (normalizedCursorOffset.top || 0) - currentLocate.top;
      elementOffset.left -= dragElementOffset.left + (normalizedCursorOffset.left || 0) - currentLocate.left;
    }
    return elementOffset;
  },
  _initPosition(options2) {
    var $dragElement = renderer_default(options2.dragElement);
    var elementOffset = this._calculateElementOffset(options2);
    if (elementOffset) {
      this._move(elementOffset, $dragElement);
    }
    this._startPosition = locate($dragElement);
  },
  _startAnimator() {
    if (!this._scrollAnimator.inProgress()) {
      this._scrollAnimator.start();
    }
  },
  _stopAnimator() {
    this._scrollAnimator.stop();
  },
  _addWidgetPrefix(className) {
    var componentName = this.NAME;
    return dasherize(componentName) + (className ? "-".concat(className) : "");
  },
  _getItemsSelector() {
    return this.option("filter") || "";
  },
  _$content() {
    var $element = this.$element();
    var $wrapper = $element.children(".dx-template-wrapper");
    return $wrapper.length ? $wrapper : $element;
  },
  _attachEventHandlers() {
    if (this.option("disabled")) {
      return;
    }
    var $element = this._$content();
    var itemsSelector = this._getItemsSelector();
    var allowMoveByClick = this.option("allowMoveByClick");
    var data17 = {
      direction: this.option("dragDirection"),
      immediate: this.option("immediate"),
      checkDropTarget: ($target, event) => {
        var targetGroup = this.option("group");
        var sourceGroup = this._getSourceDraggable().option("group");
        var $scrollable = this._getScrollable($target);
        if (this._verticalScrollHelper.isOutsideScrollable($scrollable, event) || this._horizontalScrollHelper.isOutsideScrollable($scrollable, event)) {
          return false;
        }
        return sourceGroup && sourceGroup === targetGroup;
      }
    };
    if (allowMoveByClick) {
      $element = this._getArea();
      events_engine_default.on($element, POINTERDOWN_EVENT_NAME, data17, this._pointerDownHandler.bind(this));
    }
    if (">" === itemsSelector[0]) {
      itemsSelector = itemsSelector.slice(1);
    }
    events_engine_default.on($element, DRAGSTART_EVENT_NAME2, itemsSelector, data17, this._dragStartHandler.bind(this));
    events_engine_default.on($element, DRAG_EVENT_NAME, data17, this._dragMoveHandler.bind(this));
    events_engine_default.on($element, DRAGEND_EVENT_NAME, data17, this._dragEndHandler.bind(this));
    events_engine_default.on($element, DRAG_ENTER_EVENT_NAME, data17, this._dragEnterHandler.bind(this));
    events_engine_default.on($element, DRAGEND_LEAVE_EVENT_NAME, data17, this._dragLeaveHandler.bind(this));
    if (this.option("onCancelByEsc")) {
      events_engine_default.on($element, KEYDOWN_EVENT_NAME, this._keydownHandler.bind(this));
    }
  },
  _dragElementIsCloned() {
    return this._$dragElement && this._$dragElement.hasClass(this._addWidgetPrefix(CLONE_CLASS));
  },
  _getDragTemplateArgs($element, $container) {
    return {
      container: getPublicElement($container),
      model: {
        itemData: this.option("itemData"),
        itemElement: getPublicElement($element)
      }
    };
  },
  _createDragElement($element) {
    var result2 = $element;
    var clone = this.option("clone");
    var $container = this._getContainer();
    var template = this.option("dragTemplate");
    if (template) {
      template = this._getTemplate(template);
      result2 = renderer_default("<div>").appendTo($container);
      template.render(this._getDragTemplateArgs($element, result2));
    } else if (clone) {
      result2 = renderer_default("<div>").appendTo($container);
      $element.clone().css({
        width: $element.css("width"),
        height: $element.css("height")
      }).appendTo(result2);
    }
    return result2.toggleClass(this._addWidgetPrefix(CLONE_CLASS), result2.get(0) !== $element.get(0)).toggleClass("dx-rtl", this.option("rtlEnabled"));
  },
  _resetDragElement() {
    if (this._dragElementIsCloned()) {
      this._$dragElement.remove();
    } else {
      this._toggleDraggingClass(false);
    }
    this._$dragElement = null;
  },
  _resetSourceElement() {
    this._toggleDragSourceClass(false);
    this._$sourceElement = null;
  },
  _detachEventHandlers() {
    events_engine_default.off(this._$content(), ".".concat(DRAGGABLE));
    events_engine_default.off(this._getArea(), ".".concat(DRAGGABLE));
  },
  _move(position2, $element) {
    move($element || this._$dragElement, position2);
  },
  _getDraggableElement(e) {
    var $sourceElement = this._getSourceElement();
    if ($sourceElement) {
      return $sourceElement;
    }
    var allowMoveByClick = this.option("allowMoveByClick");
    if (allowMoveByClick) {
      return this.$element();
    }
    var $target = renderer_default(e && e.target);
    var itemsSelector = this._getItemsSelector();
    if (">" === itemsSelector[0]) {
      var $items = this._$content().find(itemsSelector);
      if (!$items.is($target)) {
        $target = $target.closest($items);
      }
    }
    return $target;
  },
  _getSourceElement() {
    var draggable = this._getSourceDraggable();
    return draggable._$sourceElement;
  },
  _pointerDownHandler(e) {
    if (needSkipEvent(e)) {
      return;
    }
    var position2 = {};
    var $element = this.$element();
    var dragDirection = this.option("dragDirection");
    if ("horizontal" === dragDirection || "both" === dragDirection) {
      position2.left = e.pageX - $element.offset().left + locate($element).left - getWidth($element) / 2;
    }
    if ("vertical" === dragDirection || "both" === dragDirection) {
      position2.top = e.pageY - $element.offset().top + locate($element).top - getHeight($element) / 2;
    }
    this._move(position2, $element);
    this._getAction("onDragMove")(this._getEventArgs(e));
  },
  _isValidElement(event, $element) {
    var handle = this.option("handle");
    var $target = renderer_default(event.originalEvent && event.originalEvent.target);
    if (handle && !$target.closest(handle).length) {
      return false;
    }
    if (!$element.length) {
      return false;
    }
    return !$element.is(".dx-state-disabled, .dx-state-disabled *");
  },
  _dragStartHandler(e) {
    var $element = this._getDraggableElement(e);
    this.dragInProgress = true;
    if (!this._isValidElement(e, $element)) {
      e.cancel = true;
      return;
    }
    if (this._$sourceElement) {
      return;
    }
    var dragStartArgs = this._getDragStartArgs(e, $element);
    this._getAction("onDragStart")(dragStartArgs);
    if (dragStartArgs.cancel) {
      e.cancel = true;
      return;
    }
    this.option("itemData", dragStartArgs.itemData);
    this._setSourceDraggable();
    this._$sourceElement = $element;
    var initialOffset = $element.offset();
    if (!this._hasClonedDraggable() && this.option("autoScroll")) {
      this._initScrollTop = this._getScrollableScrollTop();
      this._initScrollLeft = this._getScrollableScrollLeft();
      initialOffset = this._getDraggableElementOffset(initialOffset.left, initialOffset.top);
    }
    var $dragElement = this._$dragElement = this._createDragElement($element);
    this._toggleDraggingClass(true);
    this._toggleDragSourceClass(true);
    this._setGestureCoverCursor($dragElement.children());
    var isFixedPosition = "fixed" === $dragElement.css("position");
    this._initPosition(extend({}, dragStartArgs, {
      dragElement: $dragElement.get(0),
      initialOffset: isFixedPosition && initialOffset
    }));
    this._getAction("onDraggableElementShown")(_extends(_extends({}, dragStartArgs), {
      dragElement: $dragElement
    }));
    var $area = this._getArea();
    var areaOffset = this._getAreaOffset($area);
    var boundOffset = this._getBoundOffset();
    var areaWidth = getOuterWidth($area);
    var areaHeight = getOuterHeight($area);
    var elementWidth = getWidth($dragElement);
    var elementHeight = getHeight($dragElement);
    var startOffset_left = $dragElement.offset().left - areaOffset.left, startOffset_top = $dragElement.offset().top - areaOffset.top;
    if ($area.length) {
      e.maxLeftOffset = startOffset_left - boundOffset.left;
      e.maxRightOffset = areaWidth - startOffset_left - elementWidth - boundOffset.right;
      e.maxTopOffset = startOffset_top - boundOffset.top;
      e.maxBottomOffset = areaHeight - startOffset_top - elementHeight - boundOffset.bottom;
    }
    if (this.option("autoScroll")) {
      this._startAnimator();
    }
  },
  _getAreaOffset($area) {
    var offset = $area && position_default.offset($area);
    return offset || {
      left: 0,
      top: 0
    };
  },
  _toggleDraggingClass(value2) {
    this._$dragElement && this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"), value2);
  },
  _toggleDragSourceClass(value2, $element) {
    var $sourceElement = $element || this._$sourceElement;
    $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix("source"), value2);
  },
  _setGestureCoverCursor($element) {
    renderer_default(".".concat(GESTURE_COVER_CLASS2)).css("cursor", $element.css("cursor"));
  },
  _getBoundOffset() {
    var boundOffset = this.option("boundOffset");
    if (isFunction(boundOffset)) {
      boundOffset = boundOffset.call(this);
    }
    return quadToObject(boundOffset);
  },
  _getArea() {
    var area = this.option("boundary");
    if (isFunction(area)) {
      area = area.call(this);
    }
    return renderer_default(area);
  },
  _getContainer() {
    var container = this.option("container");
    if (void 0 === container) {
      container = value();
    }
    return renderer_default(container);
  },
  _getDraggableElementOffset(initialOffsetX, initialOffsetY) {
    var _a, _b, _c, _d;
    var initScrollTop = this._initScrollTop;
    var initScrollLeft = this._initScrollLeft;
    var scrollTop = this._getScrollableScrollTop();
    var scrollLeft = this._getScrollableScrollLeft();
    var elementPosition = renderer_default(this.element()).css("position");
    var isFixedPosition = "fixed" === elementPosition;
    var result2 = {
      left: (null !== (_b = null === (_a = this._startPosition) || void 0 === _a ? void 0 : _a.left) && void 0 !== _b ? _b : 0) + initialOffsetX,
      top: (null !== (_d = null === (_c = this._startPosition) || void 0 === _c ? void 0 : _c.top) && void 0 !== _d ? _d : 0) + initialOffsetY
    };
    if (isFixedPosition || this._hasClonedDraggable()) {
      return result2;
    }
    return {
      left: isNumeric(scrollLeft) ? result2.left + scrollLeft - initScrollLeft : result2.left,
      top: isNumeric(scrollTop) ? result2.top + scrollTop - initScrollTop : result2.top
    };
  },
  _hasClonedDraggable() {
    return this.option("clone") || this.option("dragTemplate");
  },
  _dragMoveHandler(e) {
    this._dragMoveArgs = e;
    if (!this._$dragElement) {
      e.cancel = true;
      return;
    }
    var offset = this._getDraggableElementOffset(e.offset.x, e.offset.y);
    this._move(offset);
    this._updateScrollable(e);
    var eventArgs = this._getEventArgs(e);
    this._getAction("onDragMove")(eventArgs);
    if (true === eventArgs.cancel) {
      return;
    }
    var targetDraggable2 = this._getTargetDraggable();
    targetDraggable2.dragMove(e, scrollBy);
  },
  _updateScrollable(e) {
    if (this.option("autoScroll")) {
      var mousePosition = getMousePosition(e);
      var allObjects = dom_adapter_default.elementsFromPoint(mousePosition.x, mousePosition.y, this.$element().get(0));
      this._verticalScrollHelper.updateScrollable(allObjects, mousePosition);
      this._horizontalScrollHelper.updateScrollable(allObjects, mousePosition);
    }
  },
  _getScrollable($element) {
    var $scrollable;
    $element.parents().toArray().some((parent) => {
      var $parent = renderer_default(parent);
      if (this._horizontalScrollHelper.isScrollable($parent) || this._verticalScrollHelper.isScrollable($parent)) {
        $scrollable = $parent;
        return true;
      }
      return false;
    });
    return $scrollable;
  },
  _getScrollableScrollTop() {
    var _a, _b;
    return null !== (_b = null === (_a = this._getScrollable(renderer_default(this.element()))) || void 0 === _a ? void 0 : _a.scrollTop()) && void 0 !== _b ? _b : 0;
  },
  _getScrollableScrollLeft() {
    var _a, _b;
    return null !== (_b = null === (_a = this._getScrollable(renderer_default(this.element()))) || void 0 === _a ? void 0 : _a.scrollLeft()) && void 0 !== _b ? _b : 0;
  },
  _defaultActionArgs() {
    var args = this.callBase.apply(this, arguments);
    var component = this.option("component");
    if (component) {
      args.component = component;
      args.element = component.element();
    }
    return args;
  },
  _getEventArgs(e) {
    var sourceDraggable2 = this._getSourceDraggable();
    var targetDraggable2 = this._getTargetDraggable();
    return {
      event: e,
      itemData: sourceDraggable2.option("itemData"),
      itemElement: getPublicElement(sourceDraggable2._$sourceElement),
      fromComponent: sourceDraggable2.option("component") || sourceDraggable2,
      toComponent: targetDraggable2.option("component") || targetDraggable2,
      fromData: sourceDraggable2.option("data"),
      toData: targetDraggable2.option("data")
    };
  },
  _getDragStartArgs(e, $itemElement) {
    var args = this._getEventArgs(e);
    return {
      event: args.event,
      itemData: args.itemData,
      itemElement: $itemElement,
      fromData: args.fromData
    };
  },
  _revertItemToInitialPosition() {
    !this._dragElementIsCloned() && this._move(this._initialLocate, this._$sourceElement);
  },
  _dragEndHandler(e) {
    var d = Deferred();
    var dragEndEventArgs = this._getEventArgs(e);
    var dropEventArgs = this._getEventArgs(e);
    var targetDraggable2 = this._getTargetDraggable();
    var needRevertPosition = true;
    this.dragInProgress = false;
    try {
      this._getAction("onDragEnd")(dragEndEventArgs);
    } finally {
      when(fromPromise(dragEndEventArgs.cancel)).done((cancel) => {
        if (!cancel) {
          if (targetDraggable2 !== this) {
            targetDraggable2._getAction("onDrop")(dropEventArgs);
          }
          if (!dropEventArgs.cancel) {
            needRevertPosition = false;
            when(fromPromise(targetDraggable2.dragEnd(dragEndEventArgs))).always(d.resolve);
            return;
          }
        }
        d.resolve();
      }).fail(d.resolve);
      d.done(() => {
        if (needRevertPosition) {
          this._revertItemToInitialPosition();
        }
        this._resetDragOptions(targetDraggable2);
      });
    }
  },
  _isTargetOverAnotherDraggable(e) {
    var sourceDraggable2 = this._getSourceDraggable();
    if (this === sourceDraggable2) {
      return false;
    }
    var $dragElement = sourceDraggable2._$dragElement;
    var $sourceDraggableElement = sourceDraggable2.$element();
    var $targetDraggableElement = this.$element();
    var mousePosition = getMousePosition(e);
    var elements = dom_adapter_default.elementsFromPoint(mousePosition.x, mousePosition.y, this.element());
    var firstWidgetElement = elements.filter((element) => {
      var $element = renderer_default(element);
      if ($element.hasClass(this._addWidgetPrefix())) {
        return !$element.closest($dragElement).length;
      }
      return false;
    })[0];
    var $sourceElement = this._getSourceElement();
    var isTargetOverItself = firstWidgetElement === $sourceDraggableElement.get(0);
    var isTargetOverNestedDraggable = renderer_default(firstWidgetElement).closest($sourceElement).length;
    return !firstWidgetElement || firstWidgetElement === $targetDraggableElement.get(0) && !isTargetOverItself && !isTargetOverNestedDraggable;
  },
  _dragEnterHandler(e) {
    this._fireDragEnterEvent(e);
    if (this._isTargetOverAnotherDraggable(e)) {
      this._setTargetDraggable();
    }
    var sourceDraggable2 = this._getSourceDraggable();
    sourceDraggable2.dragEnter(e);
  },
  _dragLeaveHandler(e) {
    this._fireDragLeaveEvent(e);
    this._resetTargetDraggable();
    if (this !== this._getSourceDraggable()) {
      this.reset();
    }
    var sourceDraggable2 = this._getSourceDraggable();
    sourceDraggable2.dragLeave(e);
  },
  _keydownHandler(e) {
    if (this.dragInProgress && "Escape" === e.key) {
      this._keydownEscapeHandler(e);
    }
  },
  _keydownEscapeHandler(e) {
    var $sourceElement = this._getSourceElement();
    if (!$sourceElement) {
      return;
    }
    var dragCancelEventArgs = this._getEventArgs(e);
    this._getAction("onDragCancel")(dragCancelEventArgs);
    if (dragCancelEventArgs.cancel) {
      return;
    }
    this.dragInProgress = false;
    null === sourceDraggable || void 0 === sourceDraggable ? void 0 : sourceDraggable._toggleDraggingClass(false);
    this._detachEventHandlers();
    this._revertItemToInitialPosition();
    var targetDraggable2 = this._getTargetDraggable();
    this._resetDragOptions(targetDraggable2);
    this._attachEventHandlers();
  },
  _getAction(name2) {
    return this["_".concat(name2, "Action")] || this._createActionByOption(name2);
  },
  _getAnonymousTemplateName: () => ANONYMOUS_TEMPLATE_NAME2,
  _initTemplates() {
    if (!this.option("contentTemplate")) {
      return;
    }
    this._templateManager.addDefaultTemplates({
      content: new EmptyTemplate()
    });
    this.callBase.apply(this, arguments);
  },
  _render() {
    this.callBase();
    this.$element().addClass(this._addWidgetPrefix());
    var transclude = this._templateManager.anonymousTemplateName === this.option("contentTemplate");
    var template = this._getTemplateByOption("contentTemplate");
    if (template) {
      renderer_default(template.render({
        container: this.element(),
        transclude
      }));
    }
  },
  _optionChanged(args) {
    var {
      name: name2
    } = args;
    switch (name2) {
      case "onDragStart":
      case "onDragMove":
      case "onDragEnd":
      case "onDrop":
      case "onDragEnter":
      case "onDragLeave":
      case "onDragCancel":
      case "onDraggableElementShown":
        this["_".concat(name2, "Action")] = this._createActionByOption(name2);
        break;
      case "dragTemplate":
      case "contentTemplate":
      case "container":
      case "clone":
        break;
      case "allowMoveByClick":
      case "dragDirection":
      case "disabled":
      case "boundary":
      case "filter":
      case "immediate":
        this._resetDragElement();
        this._detachEventHandlers();
        this._attachEventHandlers();
        break;
      case "onCancelByEsc":
        this._keydownHandler();
        break;
      case "autoScroll":
        this._verticalScrollHelper.reset();
        this._horizontalScrollHelper.reset();
        break;
      case "scrollSensitivity":
      case "scrollSpeed":
      case "boundOffset":
      case "handle":
      case "group":
      case "data":
      case "itemData":
        break;
      default:
        this.callBase(args);
    }
  },
  _getTargetDraggable() {
    return targetDraggable || this;
  },
  _getSourceDraggable() {
    return sourceDraggable || this;
  },
  _setTargetDraggable() {
    var currentGroup = this.option("group");
    var sourceDraggable2 = this._getSourceDraggable();
    if (currentGroup && currentGroup === sourceDraggable2.option("group")) {
      targetDraggable = this;
    }
  },
  _setSourceDraggable() {
    sourceDraggable = this;
  },
  _resetSourceDraggable() {
    sourceDraggable = null;
  },
  _resetTargetDraggable() {
    targetDraggable = null;
  },
  _resetDragOptions(targetDraggable2) {
    this.reset();
    targetDraggable2.reset();
    this._stopAnimator();
    this._horizontalScrollHelper.reset();
    this._verticalScrollHelper.reset();
    this._resetDragElement();
    this._resetSourceElement();
    this._resetTargetDraggable();
    this._resetSourceDraggable();
  },
  _dispose() {
    this.callBase();
    this._detachEventHandlers();
    this._resetDragElement();
    this._resetTargetDraggable();
    this._resetSourceDraggable();
    this._$sourceElement = null;
    this._stopAnimator();
  },
  _fireDragEnterEvent(sourceEvent) {
    var args = this._getEventArgs(sourceEvent);
    this._getAction("onDragEnter")(args);
  },
  _fireDragLeaveEvent(sourceEvent) {
    var args = this._getEventArgs(sourceEvent);
    this._getAction("onDragLeave")(args);
  }
});
component_registrator_default(DRAGGABLE, Draggable);
var m_draggable_default = Draggable;

// node_modules/devextreme/esm/__internal/m_sortable.js
var window14 = getWindow();
var SORTABLE = "dxSortable";
var PLACEHOLDER_CLASS = "placeholder";
var CLONE_CLASS2 = "clone";
var isElementVisible = (itemElement) => renderer_default(itemElement).is(":visible");
var animate = (element, config2) => {
  var _a, _b;
  if (!element) {
    return;
  }
  var left = (null === (_a = config2.to) || void 0 === _a ? void 0 : _a.left) || 0;
  var top = (null === (_b = config2.to) || void 0 === _b ? void 0 : _b.top) || 0;
  element.style.transform = "translate(".concat(left, "px,").concat(top, "px)");
  element.style.transition = fx_default.off ? "" : "transform ".concat(config2.duration, "ms ").concat(config2.easing);
};
var stopAnimation = (element) => {
  if (!element) {
    return;
  }
  element.style.transform = "";
  element.style.transition = "";
};
function getScrollableBoundary($scrollable) {
  var offset = $scrollable.offset();
  var {
    style
  } = $scrollable[0];
  var paddingLeft = parseFloat(style.paddingLeft) || 0;
  var paddingRight = parseFloat(style.paddingRight) || 0;
  var paddingTop = parseFloat(style.paddingTop) || 0;
  var width = $scrollable[0].clientWidth - (paddingLeft + paddingRight);
  var height = getHeight($scrollable);
  var left = offset.left + paddingLeft;
  var top = offset.top + paddingTop;
  return {
    left,
    right: left + width,
    top,
    bottom: top + height
  };
}
var Sortable = m_draggable_default.inherit({
  _init() {
    this.callBase();
    this._sourceScrollHandler = this._handleSourceScroll.bind(this);
    this._sourceScrollableInfo = null;
  },
  _getDefaultOptions() {
    return extend(this.callBase(), {
      clone: true,
      filter: "> *",
      itemOrientation: "vertical",
      dropFeedbackMode: "push",
      allowDropInsideItem: false,
      allowReordering: true,
      moveItemOnDrop: false,
      onDragChange: null,
      onAdd: null,
      onRemove: null,
      onReorder: null,
      onPlaceholderPrepared: null,
      animation: {
        type: "slide",
        duration: 300,
        easing: "ease"
      },
      fromIndex: null,
      toIndex: null,
      dropInsideItem: false,
      itemPoints: null,
      fromIndexOffset: 0,
      offset: 0,
      autoUpdate: false,
      draggableElementSize: 0
    });
  },
  reset() {
    this.option({
      dropInsideItem: false,
      toIndex: null,
      fromIndex: null,
      itemPoints: null,
      fromIndexOffset: 0,
      draggableElementSize: 0
    });
    if (this._$placeholderElement) {
      this._$placeholderElement.remove();
    }
    this._$placeholderElement = null;
    if (!this._isIndicateMode() && this._$modifiedItem) {
      this._$modifiedItem.css("marginBottom", this._modifiedItemMargin);
      this._$modifiedItem = null;
    }
  },
  _getPrevVisibleItem: (items, index) => items.slice(0, index).reverse().filter(isElementVisible)[0],
  _dragStartHandler(e) {
    this.callBase.apply(this, arguments);
    if (true === e.cancel) {
      return;
    }
    var $sourceElement = this._getSourceElement();
    this._updateItemPoints();
    this._subscribeToSourceScroll(e);
    this.option("fromIndex", this._getElementIndex($sourceElement));
    this.option("fromIndexOffset", this.option("offset"));
  },
  _subscribeToSourceScroll(e) {
    var $scrollable = this._getScrollable(renderer_default(e.target));
    if ($scrollable) {
      this._sourceScrollableInfo = {
        element: $scrollable,
        scrollLeft: $scrollable.scrollLeft(),
        scrollTop: $scrollable.scrollTop()
      };
      events_engine_default.off($scrollable, "scroll", this._sourceScrollHandler);
      events_engine_default.on($scrollable, "scroll", this._sourceScrollHandler);
    }
  },
  _unsubscribeFromSourceScroll() {
    if (this._sourceScrollableInfo) {
      events_engine_default.off(this._sourceScrollableInfo.element, "scroll", this._sourceScrollHandler);
      this._sourceScrollableInfo = null;
    }
  },
  _handleSourceScroll(e) {
    var sourceScrollableInfo = this._sourceScrollableInfo;
    if (sourceScrollableInfo) {
      ["scrollLeft", "scrollTop"].forEach((scrollProp) => {
        if (e.target[scrollProp] !== sourceScrollableInfo[scrollProp]) {
          var scrollBy2 = e.target[scrollProp] - sourceScrollableInfo[scrollProp];
          this._correctItemPoints(scrollBy2);
          this._movePlaceholder();
          sourceScrollableInfo[scrollProp] = e.target[scrollProp];
        }
      });
    }
  },
  _dragEnterHandler(e) {
    this.callBase.apply(this, arguments);
    if (this === this._getSourceDraggable()) {
      return;
    }
    this._subscribeToSourceScroll(e);
    this._updateItemPoints();
    this.option("fromIndex", -1);
    if (!this._isIndicateMode()) {
      var itemPoints = this.option("itemPoints");
      var lastItemPoint = itemPoints[itemPoints.length - 1];
      if (lastItemPoint) {
        var $element = this.$element();
        var $sourceElement = this._getSourceElement();
        var isVertical = this._isVerticalOrientation();
        var sourceElementSize = isVertical ? getOuterHeight($sourceElement, true) : getOuterWidth($sourceElement, true);
        var scrollSize = $element.get(0)[isVertical ? "scrollHeight" : "scrollWidth"];
        var scrollPosition = $element.get(0)[isVertical ? "scrollTop" : "scrollLeft"];
        var positionProp = isVertical ? "top" : "left";
        var lastPointPosition = lastItemPoint[positionProp];
        var elementPosition = $element.offset()[positionProp];
        var freeSize = elementPosition + scrollSize - scrollPosition - lastPointPosition;
        if (freeSize < sourceElementSize) {
          if (isVertical) {
            var items = this._getItems();
            var $lastItem = renderer_default(this._getPrevVisibleItem(items));
            this._$modifiedItem = $lastItem;
            this._modifiedItemMargin = $lastItem.get(0).style.marginBottom;
            $lastItem.css("marginBottom", sourceElementSize - freeSize);
            var $sortable = $lastItem.closest(".dx-sortable");
            var sortable = $sortable.data("dxScrollable") || $sortable.data("dxScrollView");
            sortable && sortable.update();
          }
        }
      }
    }
  },
  _dragLeaveHandler() {
    this.callBase.apply(this, arguments);
    if (this !== this._getSourceDraggable()) {
      this._unsubscribeFromSourceScroll();
    }
  },
  dragEnter() {
    if (this !== this._getTargetDraggable()) {
      this.option("toIndex", -1);
    }
  },
  dragLeave() {
    if (this !== this._getTargetDraggable()) {
      this.option("toIndex", this.option("fromIndex"));
    }
  },
  _allowDrop(event) {
    var targetDraggable2 = this._getTargetDraggable();
    var $targetDraggable = targetDraggable2.$element();
    var $scrollable = this._getScrollable($targetDraggable);
    if ($scrollable) {
      var {
        left,
        right,
        top,
        bottom
      } = getScrollableBoundary($scrollable);
      var toIndex = this.option("toIndex");
      var itemPoints = this.option("itemPoints");
      var itemPoint = null === itemPoints || void 0 === itemPoints ? void 0 : itemPoints.filter((item) => item.index === toIndex)[0];
      if (itemPoint && void 0 !== itemPoint.top) {
        var isVertical = this._isVerticalOrientation();
        if (isVertical) {
          return top <= Math.ceil(itemPoint.top) && Math.floor(itemPoint.top) <= bottom;
        }
        return left <= Math.ceil(itemPoint.left) && Math.floor(itemPoint.left) <= right;
      }
    }
    return true;
  },
  dragEnd(sourceEvent) {
    this._unsubscribeFromSourceScroll();
    var $sourceElement = this._getSourceElement();
    var sourceDraggable2 = this._getSourceDraggable();
    var isSourceDraggable = sourceDraggable2.NAME !== this.NAME;
    var toIndex = this.option("toIndex");
    var {
      event
    } = sourceEvent;
    var allowDrop = this._allowDrop(event);
    if (null !== toIndex && toIndex >= 0 && allowDrop) {
      var cancelAdd;
      var cancelRemove;
      if (sourceDraggable2 !== this) {
        cancelAdd = this._fireAddEvent(event);
        if (!cancelAdd) {
          cancelRemove = this._fireRemoveEvent(event);
        }
      }
      if (isSourceDraggable) {
        resetPosition($sourceElement);
      }
      if (this.option("moveItemOnDrop")) {
        !cancelAdd && this._moveItem($sourceElement, toIndex, cancelRemove);
      }
      if (sourceDraggable2 === this) {
        return this._fireReorderEvent(event);
      }
    }
    return Deferred().resolve();
  },
  dragMove(e) {
    var itemPoints = this.option("itemPoints");
    if (!itemPoints) {
      return;
    }
    var isVertical = this._isVerticalOrientation();
    var axisName = isVertical ? "top" : "left";
    var cursorPosition = isVertical ? e.pageY : e.pageX;
    var rtlEnabled = this.option("rtlEnabled");
    var itemPoint;
    for (var i = itemPoints.length - 1; i >= 0; i--) {
      var centerPosition = itemPoints[i + 1] && (itemPoints[i][axisName] + itemPoints[i + 1][axisName]) / 2;
      if ((!isVertical && rtlEnabled ? cursorPosition > centerPosition : centerPosition > cursorPosition) || void 0 === centerPosition) {
        itemPoint = itemPoints[i];
      } else {
        break;
      }
    }
    if (itemPoint) {
      this._updatePlaceholderPosition(e, itemPoint);
      if (this._verticalScrollHelper.isScrolling() && this._isIndicateMode()) {
        this._movePlaceholder();
      }
    }
  },
  _isIndicateMode() {
    return "indicate" === this.option("dropFeedbackMode") || this.option("allowDropInsideItem");
  },
  _createPlaceholder() {
    var $placeholderContainer;
    if (this._isIndicateMode()) {
      $placeholderContainer = renderer_default("<div>").addClass(this._addWidgetPrefix(PLACEHOLDER_CLASS)).insertBefore(this._getSourceDraggable()._$dragElement);
    }
    this._$placeholderElement = $placeholderContainer;
    return $placeholderContainer;
  },
  _getItems() {
    var itemsSelector = this._getItemsSelector();
    return this._$content().find(itemsSelector).not(".".concat(this._addWidgetPrefix(PLACEHOLDER_CLASS))).not(".".concat(this._addWidgetPrefix(CLONE_CLASS2))).toArray();
  },
  _allowReordering() {
    var sourceDraggable2 = this._getSourceDraggable();
    var targetDraggable2 = this._getTargetDraggable();
    return sourceDraggable2 !== targetDraggable2 || this.option("allowReordering");
  },
  _isValidPoint(visibleIndex, draggableVisibleIndex, dropInsideItem) {
    var allowDropInsideItem = this.option("allowDropInsideItem");
    var allowReordering2 = dropInsideItem || this._allowReordering();
    if (!allowReordering2 && (0 !== visibleIndex || !allowDropInsideItem)) {
      return false;
    }
    if (!this._isIndicateMode()) {
      return true;
    }
    return -1 === draggableVisibleIndex || visibleIndex !== draggableVisibleIndex && (dropInsideItem || visibleIndex !== draggableVisibleIndex + 1);
  },
  _getItemPoints() {
    var result2 = [];
    var $item;
    var offset;
    var itemWidth;
    var rtlEnabled = this.option("rtlEnabled");
    var isVertical = this._isVerticalOrientation();
    var itemElements = this._getItems();
    var visibleItemElements = itemElements.filter(isElementVisible);
    var visibleItemCount = visibleItemElements.length;
    var $draggableItem = this._getDraggableElement();
    var draggableVisibleIndex = visibleItemElements.indexOf($draggableItem.get(0));
    if (visibleItemCount) {
      for (var i = 0; i <= visibleItemCount; i++) {
        var needCorrectLeftPosition = !isVertical && rtlEnabled ^ i === visibleItemCount;
        var needCorrectTopPosition = isVertical && i === visibleItemCount;
        if (i < visibleItemCount) {
          $item = renderer_default(visibleItemElements[i]);
          offset = $item.offset();
          itemWidth = getOuterWidth($item);
        }
        result2.push({
          dropInsideItem: false,
          left: offset.left + (needCorrectLeftPosition ? itemWidth : 0),
          top: offset.top + (needCorrectTopPosition ? result2[i - 1].height : 0),
          index: i === visibleItemCount ? itemElements.length : itemElements.indexOf($item.get(0)),
          $item,
          width: getOuterWidth($item),
          height: getOuterHeight($item),
          isValid: this._isValidPoint(i, draggableVisibleIndex)
        });
      }
      if (this.option("allowDropInsideItem")) {
        var points = result2;
        result2 = [];
        for (var _i = 0; _i < points.length; _i++) {
          result2.push(points[_i]);
          if (points[_i + 1]) {
            result2.push(extend({}, points[_i], {
              dropInsideItem: true,
              top: Math.floor((points[_i].top + points[_i + 1].top) / 2),
              left: Math.floor((points[_i].left + points[_i + 1].left) / 2),
              isValid: this._isValidPoint(_i, draggableVisibleIndex, true)
            }));
          }
        }
      }
    } else {
      result2.push({
        dropInsideItem: false,
        index: 0,
        isValid: true
      });
    }
    return result2;
  },
  _updateItemPoints(forceUpdate2) {
    if (forceUpdate2 || this.option("autoUpdate") || !this.option("itemPoints")) {
      this.option("itemPoints", this._getItemPoints());
    }
  },
  _correctItemPoints(scrollBy2) {
    var itemPoints = this.option("itemPoints");
    if (scrollBy2 && itemPoints && !this.option("autoUpdate")) {
      var isVertical = this._isVerticalOrientation();
      var positionPropName = isVertical ? "top" : "left";
      itemPoints.forEach((itemPoint) => {
        itemPoint[positionPropName] -= scrollBy2;
      });
    }
  },
  _getElementIndex($itemElement) {
    return this._getItems().indexOf($itemElement.get(0));
  },
  _getDragTemplateArgs($element) {
    var args = this.callBase.apply(this, arguments);
    args.model.fromIndex = this._getElementIndex($element);
    return args;
  },
  _togglePlaceholder(value2) {
    this._$placeholderElement && this._$placeholderElement.toggle(value2);
  },
  _isVerticalOrientation() {
    return "vertical" === this.option("itemOrientation");
  },
  _normalizeToIndex(toIndex, skipOffsetting) {
    var isAnotherDraggable = this._getSourceDraggable() !== this._getTargetDraggable();
    var fromIndex = this._getActualFromIndex();
    if (null === toIndex) {
      return fromIndex;
    }
    return Math.max(isAnotherDraggable || fromIndex >= toIndex || skipOffsetting ? toIndex : toIndex - 1, 0);
  },
  _updatePlaceholderPosition(e, itemPoint) {
    var sourceDraggable2 = this._getSourceDraggable();
    var toIndex = this._normalizeToIndex(itemPoint.index, itemPoint.dropInsideItem);
    var eventArgs = extend(this._getEventArgs(e), {
      toIndex,
      dropInsideItem: itemPoint.dropInsideItem
    });
    itemPoint.isValid && this._getAction("onDragChange")(eventArgs);
    if (eventArgs.cancel || !itemPoint.isValid) {
      if (!itemPoint.isValid) {
        this.option({
          dropInsideItem: false,
          toIndex: null
        });
      }
      return;
    }
    this.option({
      dropInsideItem: itemPoint.dropInsideItem,
      toIndex: itemPoint.index
    });
    this._getAction("onPlaceholderPrepared")(extend(this._getEventArgs(e), {
      placeholderElement: getPublicElement(this._$placeholderElement),
      dragElement: getPublicElement(sourceDraggable2._$dragElement)
    }));
    this._updateItemPoints();
  },
  _makeWidthCorrection($item, width) {
    this._$scrollable = this._getScrollable($item);
    if (this._$scrollable) {
      var scrollableWidth = getWidth(this._$scrollable);
      var overflowLeft = this._$scrollable.offset().left - $item.offset().left;
      var overflowRight = getOuterWidth($item) - overflowLeft - scrollableWidth;
      if (overflowLeft > 0) {
        width -= overflowLeft;
      }
      if (overflowRight > 0) {
        width -= overflowRight;
      }
    }
    return width;
  },
  _updatePlaceholderSizes($placeholderElement, itemElement) {
    var dropInsideItem = this.option("dropInsideItem");
    var $item = renderer_default(itemElement);
    var isVertical = this._isVerticalOrientation();
    var width = "";
    var height = "";
    $placeholderElement.toggleClass(this._addWidgetPrefix("placeholder-inside"), dropInsideItem);
    if (isVertical || dropInsideItem) {
      width = getOuterWidth($item);
    }
    if (!isVertical || dropInsideItem) {
      height = getOuterHeight($item);
    }
    width = this._makeWidthCorrection($item, width);
    $placeholderElement.css({
      width,
      height
    });
  },
  _moveItem($itemElement, index, cancelRemove) {
    var $prevTargetItemElement;
    var $itemElements = this._getItems();
    var $targetItemElement = $itemElements[index];
    var sourceDraggable2 = this._getSourceDraggable();
    if (cancelRemove) {
      $itemElement = $itemElement.clone();
      sourceDraggable2._toggleDragSourceClass(false, $itemElement);
    }
    if (!$targetItemElement) {
      $prevTargetItemElement = $itemElements[index - 1];
    }
    this._moveItemCore($itemElement, $targetItemElement, $prevTargetItemElement);
  },
  _moveItemCore($targetItem, item, prevItem) {
    if (!item && !prevItem) {
      $targetItem.appendTo(this.$element());
    } else if (prevItem) {
      $targetItem.insertAfter(renderer_default(prevItem));
    } else {
      $targetItem.insertBefore(renderer_default(item));
    }
  },
  _getDragStartArgs(e, $itemElement) {
    return extend(this.callBase.apply(this, arguments), {
      fromIndex: this._getElementIndex($itemElement)
    });
  },
  _getEventArgs(e) {
    var sourceDraggable2 = this._getSourceDraggable();
    var targetDraggable2 = this._getTargetDraggable();
    var dropInsideItem = targetDraggable2.option("dropInsideItem");
    return extend(this.callBase.apply(this, arguments), {
      fromIndex: sourceDraggable2.option("fromIndex"),
      toIndex: this._normalizeToIndex(targetDraggable2.option("toIndex"), dropInsideItem),
      dropInsideItem
    });
  },
  _optionChanged(args) {
    var {
      name: name2
    } = args;
    switch (name2) {
      case "onDragChange":
      case "onPlaceholderPrepared":
      case "onAdd":
      case "onRemove":
      case "onReorder":
        this["_".concat(name2, "Action")] = this._createActionByOption(name2);
        break;
      case "itemOrientation":
      case "allowDropInsideItem":
      case "moveItemOnDrop":
      case "dropFeedbackMode":
      case "itemPoints":
      case "animation":
      case "allowReordering":
      case "fromIndexOffset":
      case "offset":
      case "draggableElementSize":
      case "autoUpdate":
        break;
      case "fromIndex":
        [false, true].forEach((isDragSource) => {
          var fromIndex = isDragSource ? args.value : args.previousValue;
          if (null !== fromIndex) {
            var $fromElement = renderer_default(this._getItems()[fromIndex]);
            this._toggleDragSourceClass(isDragSource, $fromElement);
          }
        });
        break;
      case "dropInsideItem":
        this._optionChangedDropInsideItem(args);
        break;
      case "toIndex":
        this._optionChangedToIndex(args);
        break;
      default:
        this.callBase(args);
    }
  },
  _optionChangedDropInsideItem() {
    if (this._isIndicateMode() && this._$placeholderElement) {
      this._movePlaceholder();
    }
  },
  _isPositionVisible(position2) {
    var $element = this.$element();
    var scrollContainer;
    if ("hidden" !== $element.css("overflow")) {
      scrollContainer = $element.get(0);
    } else {
      $element.parents().each(function() {
        if ("visible" !== renderer_default(this).css("overflow")) {
          scrollContainer = this;
          return false;
        }
        return;
      });
    }
    if (scrollContainer) {
      var clientRect = getBoundingRect(scrollContainer);
      var isVerticalOrientation = this._isVerticalOrientation();
      var start = isVerticalOrientation ? "top" : "left";
      var end = isVerticalOrientation ? "bottom" : "right";
      var pageOffset = isVerticalOrientation ? window14.pageYOffset : window14.pageXOffset;
      if (position2[start] < clientRect[start] + pageOffset || position2[start] > clientRect[end] + pageOffset) {
        return false;
      }
    }
    return true;
  },
  _optionChangedToIndex(args) {
    var toIndex = args.value;
    if (this._isIndicateMode()) {
      var showPlaceholder = null !== toIndex && toIndex >= 0;
      this._togglePlaceholder(showPlaceholder);
      if (showPlaceholder) {
        this._movePlaceholder();
      }
    } else {
      this._moveItems(args.previousValue, args.value, args.fullUpdate);
    }
  },
  update() {
    if (null === this.option("fromIndex") && null === this.option("toIndex")) {
      return;
    }
    this._updateItemPoints(true);
    this._updateDragSourceClass();
    var toIndex = this.option("toIndex");
    this._optionChangedToIndex({
      value: toIndex,
      fullUpdate: true
    });
  },
  _updateDragSourceClass() {
    var fromIndex = this._getActualFromIndex();
    var $fromElement = renderer_default(this._getItems()[fromIndex]);
    if ($fromElement.length) {
      this._$sourceElement = $fromElement;
      this._toggleDragSourceClass(true, $fromElement);
    }
  },
  _makeLeftCorrection(left) {
    var $scrollable = this._$scrollable;
    if ($scrollable && this._isVerticalOrientation()) {
      var overflowLeft = $scrollable.offset().left - left;
      if (overflowLeft > 0) {
        left += overflowLeft;
      }
    }
    return left;
  },
  _movePlaceholder() {
    var $placeholderElement = this._$placeholderElement || this._createPlaceholder();
    if (!$placeholderElement) {
      return;
    }
    var items = this._getItems();
    var toIndex = this.option("toIndex");
    var isVerticalOrientation = this._isVerticalOrientation();
    var rtlEnabled = this.option("rtlEnabled");
    var dropInsideItem = this.option("dropInsideItem");
    var position2 = null;
    var itemElement = items[toIndex];
    if (itemElement) {
      var $itemElement = renderer_default(itemElement);
      position2 = $itemElement.offset();
      if (!isVerticalOrientation && rtlEnabled && !dropInsideItem) {
        position2.left += getOuterWidth($itemElement, true);
      }
    } else {
      var prevVisibleItemElement = itemElement = this._getPrevVisibleItem(items, toIndex);
      if (prevVisibleItemElement) {
        position2 = renderer_default(prevVisibleItemElement).offset();
        if (isVerticalOrientation) {
          position2.top += getOuterHeight(prevVisibleItemElement, true);
        } else if (!rtlEnabled) {
          position2.left += getOuterWidth(prevVisibleItemElement, true);
        }
      }
    }
    this._updatePlaceholderSizes($placeholderElement, itemElement);
    if (position2 && !this._isPositionVisible(position2)) {
      position2 = null;
    }
    if (position2) {
      var isLastVerticalPosition = isVerticalOrientation && toIndex === items.length;
      var outerPlaceholderHeight = getOuterHeight($placeholderElement);
      position2.left = this._makeLeftCorrection(position2.left);
      position2.top = isLastVerticalPosition && position2.top >= outerPlaceholderHeight ? position2.top - outerPlaceholderHeight : position2.top;
      this._move(position2, $placeholderElement);
    }
    $placeholderElement.toggle(!!position2);
  },
  _getPositions(items, elementSize, fromIndex, toIndex) {
    var positions = [];
    for (var i = 0; i < items.length; i++) {
      var position2 = 0;
      if (null === toIndex || null === fromIndex) {
        positions.push(position2);
        continue;
      }
      if (-1 === fromIndex) {
        if (i >= toIndex) {
          position2 = elementSize;
        }
      } else if (-1 === toIndex) {
        if (i > fromIndex) {
          position2 = -elementSize;
        }
      } else if (fromIndex < toIndex) {
        if (i > fromIndex && i < toIndex) {
          position2 = -elementSize;
        }
      } else if (fromIndex > toIndex) {
        if (i >= toIndex && i < fromIndex) {
          position2 = elementSize;
        }
      }
      positions.push(position2);
    }
    return positions;
  },
  _getDraggableElementSize(isVerticalOrientation) {
    var $draggableItem = this._getDraggableElement();
    var size = this.option("draggableElementSize");
    if (!size) {
      size = isVerticalOrientation ? (getOuterHeight($draggableItem) + getOuterHeight($draggableItem, true)) / 2 : (getOuterWidth($draggableItem) + getOuterWidth($draggableItem, true)) / 2;
      if (!this.option("autoUpdate")) {
        this.option("draggableElementSize", size);
      }
    }
    return size;
  },
  _getActualFromIndex() {
    var {
      fromIndex,
      fromIndexOffset,
      offset
    } = this.option();
    return null == fromIndex ? null : fromIndex + fromIndexOffset - offset;
  },
  _moveItems(prevToIndex, toIndex, fullUpdate) {
    var fromIndex = this._getActualFromIndex();
    var isVerticalOrientation = this._isVerticalOrientation();
    var positionPropName = isVerticalOrientation ? "top" : "left";
    var elementSize = this._getDraggableElementSize(isVerticalOrientation);
    var items = this._getItems();
    var prevPositions = this._getPositions(items, elementSize, fromIndex, prevToIndex);
    var positions = this._getPositions(items, elementSize, fromIndex, toIndex);
    var animationConfig = this.option("animation");
    var rtlEnabled = this.option("rtlEnabled");
    for (var i = 0; i < items.length; i++) {
      var itemElement = items[i];
      var prevPosition = prevPositions[i];
      var position2 = positions[i];
      if (null === toIndex || null === fromIndex) {
        stopAnimation(itemElement);
      } else if (prevPosition !== position2 || fullUpdate && isDefined(position2)) {
        animate(itemElement, extend({}, animationConfig, {
          to: {
            [positionPropName]: !isVerticalOrientation && rtlEnabled ? -position2 : position2
          }
        }));
      }
    }
  },
  _toggleDragSourceClass(value2, $element) {
    var $sourceElement = $element || this._$sourceElement;
    this.callBase.apply(this, arguments);
    if (!this._isIndicateMode()) {
      $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix("source-hidden"), value2);
    }
  },
  _dispose() {
    this.reset();
    this.callBase();
  },
  _fireAddEvent(sourceEvent) {
    var args = this._getEventArgs(sourceEvent);
    this._getAction("onAdd")(args);
    return args.cancel;
  },
  _fireRemoveEvent(sourceEvent) {
    var sourceDraggable2 = this._getSourceDraggable();
    var args = this._getEventArgs(sourceEvent);
    sourceDraggable2._getAction("onRemove")(args);
    return args.cancel;
  },
  _fireReorderEvent(sourceEvent) {
    var args = this._getEventArgs(sourceEvent);
    this._getAction("onReorder")(args);
    return args.promise || Deferred().resolve();
  }
});
component_registrator_default(SORTABLE, Sortable);
var m_sortable_default = Sortable;

// node_modules/devextreme/esm/ui/sortable.js
var sortable_default = m_sortable_default;

// node_modules/devextreme/esm/__internal/grids/grid_core/row_dragging/const.js
var ATTRIBUTES2 = {
  dragCell: "dx-drag-cell"
};
var CLASSES2 = {
  cellFocusDisabled: "dx-cell-focus-disabled",
  handleIcon: "drag-icon",
  commandDrag: "dx-command-drag",
  sortableWithoutHandle: "dx-sortable-without-handle",
  rowsView: "rowsview",
  dragView: "dragview"
};

// node_modules/devextreme/esm/__internal/grids/grid_core/row_dragging/dom.js
var createHandleTemplateFunc = (addWidgetPrefix) => (container, options2) => {
  var $container = renderer_default(container);
  if ("data" === options2.rowType) {
    $container.addClass(CLASSES2.cellFocusDisabled);
    return renderer_default("<span>").addClass(addWidgetPrefix(CLASSES2.handleIcon));
  }
  m_utils_default.setEmptyText($container);
  return;
};
var GridCoreRowDraggingDom = {
  createHandleTemplateFunc
};

// node_modules/devextreme/esm/__internal/grids/grid_core/row_dragging/m_row_dragging.js
var rowsView16 = (Base) => class extends Base {
  init() {
    super.init.apply(this, arguments);
    this._updateHandleColumn();
  }
  optionChanged(args) {
    if ("rowDragging" === args.name) {
      this._updateHandleColumn();
      this._invalidate(true, true);
      args.handled = true;
    }
    super.optionChanged.apply(this, arguments);
  }
  _allowReordering() {
    var rowDragging = this.option("rowDragging");
    return !!(rowDragging && (rowDragging.allowReordering || rowDragging.allowDropInsideItem || rowDragging.group));
  }
  _updateHandleColumn() {
    var rowDragging = this.option("rowDragging");
    var allowReordering2 = this._allowReordering();
    var columnsController = this._columnsController;
    var isHandleColumnVisible = allowReordering2 && rowDragging.showDragIcons;
    null === columnsController || void 0 === columnsController ? void 0 : columnsController.addCommandColumn({
      type: "drag",
      command: "drag",
      visibleIndex: -2,
      alignment: "center",
      elementAttr: [{
        name: ATTRIBUTES2.dragCell,
        value: ""
      }],
      cssClass: CLASSES2.commandDrag,
      width: "auto",
      cellTemplate: this._getHandleTemplate(),
      visible: isHandleColumnVisible
    });
    null === columnsController || void 0 === columnsController ? void 0 : columnsController.columnOption("type:drag", "visible", isHandleColumnVisible);
  }
  _renderContent() {
    var rowDragging = this.option("rowDragging");
    var allowReordering2 = this._allowReordering();
    var $content = super._renderContent.apply(this, arguments);
    var isFixedTableRendering = this._isFixedTableRendering;
    var currentSortableName = isFixedTableRendering ? "_sortableFixed" : "_sortable";
    var anotherSortableName = isFixedTableRendering ? "_sortable" : "_sortableFixed";
    var togglePointerEventsStyle = (toggle) => {
      var _a;
      null === (_a = this._sortableFixed) || void 0 === _a ? void 0 : _a.$element().css("pointerEvents", toggle ? "auto" : "");
    };
    var rowSelector = ".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)";
    var filter = this.option("dataRowTemplate") ? "> table > tbody".concat(rowSelector) : "> table > tbody > ".concat(rowSelector);
    if ((allowReordering2 || this[currentSortableName]) && $content.length) {
      this[currentSortableName] = this._createComponent($content, sortable_default, extend({
        component: this.component,
        contentTemplate: null,
        filter,
        cursorOffset: (options2) => {
          var {
            event
          } = options2;
          var rowsViewOffset = renderer_default(this.element()).offset();
          return {
            x: event.pageX - rowsViewOffset.left
          };
        },
        onDraggableElementShown: (e) => {
          if (rowDragging.dragTemplate) {
            return;
          }
          var $dragElement = renderer_default(e.dragElement);
          var gridInstance = $dragElement.children(".dx-widget").data(this.component.NAME);
          this._synchronizeScrollLeftPosition(gridInstance);
        },
        dragTemplate: this._getDraggableRowTemplate(),
        handle: rowDragging.showDragIcons && ".".concat(CLASSES2.commandDrag),
        dropFeedbackMode: "indicate"
      }, rowDragging, {
        onDragStart: (e) => {
          var _a, _b;
          null === (_a = this.getController("keyboardNavigation")) || void 0 === _a ? void 0 : _a._resetFocusedCell();
          var row = e.component.getVisibleRows()[e.fromIndex];
          e.itemData = row && row.data;
          var isDataRow2 = row && "data" === row.rowType;
          e.cancel = !allowReordering2 || !isDataRow2;
          null === (_b = rowDragging.onDragStart) || void 0 === _b ? void 0 : _b.call(rowDragging, e);
        },
        onDragEnter: (e) => {
          if (e.fromComponent !== e.toComponent) {
            togglePointerEventsStyle(true);
          }
        },
        onDragLeave: () => {
          togglePointerEventsStyle(false);
        },
        onDragEnd: (e) => {
          var _a;
          togglePointerEventsStyle(false);
          null === (_a = rowDragging.onDragEnd) || void 0 === _a ? void 0 : _a.call(rowDragging, e);
        },
        onAdd: (e) => {
          var _a;
          togglePointerEventsStyle(false);
          null === (_a = rowDragging.onAdd) || void 0 === _a ? void 0 : _a.call(rowDragging, e);
        },
        dropFeedbackMode: rowDragging.dropFeedbackMode,
        onOptionChanged: (e) => {
          var hasFixedSortable = this._sortableFixed;
          if (hasFixedSortable) {
            if ("fromIndex" === e.name || "toIndex" === e.name) {
              this[anotherSortableName].option(e.name, e.value);
            }
          }
        }
      }));
      $content.toggleClass("dx-scrollable-container", isFixedTableRendering);
      $content.toggleClass(CLASSES2.sortableWithoutHandle, allowReordering2 && !rowDragging.showDragIcons);
    }
    return $content;
  }
  _renderCore(e) {
    super._renderCore.apply(this, arguments);
    if (e && "update" === e.changeType && e.repaintChangesOnly && m_utils_default.isVirtualRowRendering(this)) {
      deferUpdate(() => {
        this._updateSortable();
      });
    }
  }
  _updateSortable() {
    var offset = this._dataController.getRowIndexOffset();
    var offsetDiff = offset - this._previousOffset;
    [this._sortable, this._sortableFixed].forEach((sortable) => {
      var toIndex = null === sortable || void 0 === sortable ? void 0 : sortable.option("toIndex");
      if (isDefined(toIndex) && isDefined(this._previousOffset)) {
        null === sortable || void 0 === sortable ? void 0 : sortable.option("toIndex", toIndex - offsetDiff);
      }
      null === sortable || void 0 === sortable ? void 0 : sortable.option("offset", offset);
      null === sortable || void 0 === sortable ? void 0 : sortable.update();
    });
    this._previousOffset = offset;
  }
  _resizeCore() {
    super._resizeCore.apply(this, arguments);
    this._updateSortable();
  }
  _getDraggableGridOptions(options2) {
    var gridOptions = this.option();
    var columns7 = this.getColumns();
    var $rowElement = renderer_default(this.getRowElement(options2.rowIndex));
    return {
      dataSource: [{
        id: 1,
        parentId: 0
      }],
      showBorders: true,
      showColumnHeaders: false,
      scrolling: {
        useNative: false,
        showScrollbar: "never"
      },
      pager: {
        visible: false
      },
      loadingTimeout: null,
      columnFixing: gridOptions.columnFixing,
      columnAutoWidth: gridOptions.columnAutoWidth,
      showColumnLines: gridOptions.showColumnLines,
      columns: columns7.map((column) => ({
        width: column.width || column.visibleWidth,
        fixed: column.fixed,
        fixedPosition: column.fixedPosition
      })),
      onRowPrepared: (e) => {
        var rowsView17 = e.component.getView("rowsView");
        renderer_default(e.rowElement).replaceWith($rowElement.eq(rowsView17._isFixedTableRendering ? 1 : 0).clone());
      }
    };
  }
  _synchronizeScrollLeftPosition(gridInstance) {
    var scrollable = null === gridInstance || void 0 === gridInstance ? void 0 : gridInstance.getScrollable();
    null === scrollable || void 0 === scrollable ? void 0 : scrollable.scrollTo({
      x: this._scrollLeft
    });
  }
  _getDraggableRowTemplate() {
    return (options2) => {
      var $rootElement = this.component.$element();
      var $dataGridContainer = renderer_default("<div>");
      setWidth2($dataGridContainer, getWidth($rootElement));
      var items = this._dataController.items();
      var row = items && items[options2.fromIndex];
      var gridOptions = this._getDraggableGridOptions(row);
      this._createComponent($dataGridContainer, this.component.NAME, gridOptions);
      $dataGridContainer.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix(CLASSES2.rowsView), ")")).hide();
      $dataGridContainer.addClass(this.addWidgetPrefix(CLASSES2.dragView));
      return $dataGridContainer;
    };
  }
  _getHandleTemplate() {
    return GridCoreRowDraggingDom.createHandleTemplateFunc((string3) => this.addWidgetPrefix(string3));
  }
};
var rowDraggingModule = {
  defaultOptions: () => ({
    rowDragging: {
      showDragIcons: true,
      dropFeedbackMode: "indicate",
      allowReordering: false,
      allowDropInsideItem: false
    }
  }),
  extenders: {
    views: {
      rowsView: rowsView16
    }
  }
};

// node_modules/devextreme/esm/__internal/grids/data_grid/module_not_extended/row_dragging.js
m_core_default.registerModule("rowDragging", rowDraggingModule);

// node_modules/devextreme/esm/__internal/grids/data_grid/m_widget.js
var m_widget_default = m_widget_base_default;

// node_modules/devextreme/esm/ui/data_grid.js
var data_grid_default = m_widget_default;

// node_modules/devextreme-react/esm/data-grid.js
var PropTypes2 = __toESM(require_prop_types());

// node_modules/devextreme-react/esm/core/component.js
var React6 = __toESM(require_react());

// node_modules/devextreme/esm/events/index.js
var on = events_engine_default.on;
var one = events_engine_default.one;
var off = events_engine_default.off;
var trigger = events_engine_default.trigger;
var triggerHandler = events_engine_default.triggerHandler;
var Event = events_engine_default.Event;

// node_modules/devextreme-react/esm/core/component-base.js
var React5 = __toESM(require_react());
var import_react_dom2 = __toESM(require_react_dom());

// node_modules/devextreme-react/esm/core/template-manager.js
var React2 = __toESM(require_react());
var import_react3 = __toESM(require_react());

// node_modules/devextreme-react/esm/core/template-wrapper.js
var React = __toESM(require_react());
var import_react2 = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());

// node_modules/devextreme-react/esm/core/helpers.js
var import_react = __toESM(require_react());
var __extends = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __generator = function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1) throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");
    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];
      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;
        case 4:
          _.label++;
          return { value: op[1], done: false };
        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;
        case 7:
          op = _.ops.pop();
          _.trys.pop();
          continue;
        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }
          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }
          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }
          if (t && _.label < t[2]) {
            _.label = t[2];
            _.ops.push(op);
            break;
          }
          if (t[2]) _.ops.pop();
          _.trys.pop();
          continue;
      }
      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }
    if (op[0] & 5) throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var __values = function(o) {
  var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
  if (m) return m.call(o);
  if (o && typeof o.length === "number") return {
    next: function() {
      if (o && i >= o.length) o = void 0;
      return { value: o && o[i++], done: !o };
    }
  };
  throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = function(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"])) m.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return ar;
};
var RemovalLockerContext = (0, import_react.createContext)({
  lock: function() {
    return void 0;
  },
  unlock: function() {
    return void 0;
  }
});
function generateID() {
  return Math.random().toString(36).substring(2);
}
var DoubleKeyMap = (
  /** @class */
  function() {
    function DoubleKeyMap2() {
      this._map = /* @__PURE__ */ new Map();
    }
    DoubleKeyMap2.prototype.set = function(_a, value2) {
      var key1 = _a.key1, key2 = _a.key2;
      var innerMap = this._map.get(key1);
      if (!innerMap) {
        innerMap = /* @__PURE__ */ new Map();
        this._map.set(key1, innerMap);
      }
      innerMap.set(key2, value2);
    };
    DoubleKeyMap2.prototype.get = function(_a) {
      var key1 = _a.key1, key2 = _a.key2;
      var innerMap = this._map.get(key1);
      return innerMap ? innerMap.get(key2) : void 0;
    };
    DoubleKeyMap2.prototype.delete = function(_a) {
      var key1 = _a.key1, key2 = _a.key2;
      var innerMap = this._map.get(key1);
      if (!innerMap) {
        return;
      }
      innerMap.delete(key2);
      if (innerMap.size === 0) {
        this._map.delete(key1);
      }
    };
    DoubleKeyMap2.prototype.clear = function() {
      this._map.clear();
    };
    Object.defineProperty(DoubleKeyMap2.prototype, "empty", {
      get: function() {
        return this._map.size === 0;
      },
      enumerable: false,
      configurable: true
    });
    DoubleKeyMap2.prototype[Symbol.iterator] = function() {
      var _a, _b, _c, key1, innerMap, innerMap_1, innerMap_1_1, _d, key2, value2, e_1_1, e_2_1;
      var e_2, _e, e_1, _f;
      return __generator(this, function(_g) {
        switch (_g.label) {
          case 0:
            _g.trys.push([0, 11, 12, 13]);
            _a = __values(this._map), _b = _a.next();
            _g.label = 1;
          case 1:
            if (!!_b.done) return [3, 10];
            _c = __read(_b.value, 2), key1 = _c[0], innerMap = _c[1];
            _g.label = 2;
          case 2:
            _g.trys.push([2, 7, 8, 9]);
            innerMap_1 = (e_1 = void 0, __values(innerMap)), innerMap_1_1 = innerMap_1.next();
            _g.label = 3;
          case 3:
            if (!!innerMap_1_1.done) return [3, 6];
            _d = __read(innerMap_1_1.value, 2), key2 = _d[0], value2 = _d[1];
            return [4, [{ key1, key2 }, value2]];
          case 4:
            _g.sent();
            _g.label = 5;
          case 5:
            innerMap_1_1 = innerMap_1.next();
            return [3, 3];
          case 6:
            return [3, 9];
          case 7:
            e_1_1 = _g.sent();
            e_1 = { error: e_1_1 };
            return [3, 9];
          case 8:
            try {
              if (innerMap_1_1 && !innerMap_1_1.done && (_f = innerMap_1.return)) _f.call(innerMap_1);
            } finally {
              if (e_1) throw e_1.error;
            }
            return [
              7
              /*endfinally*/
            ];
          case 9:
            _b = _a.next();
            return [3, 1];
          case 10:
            return [3, 13];
          case 11:
            e_2_1 = _g.sent();
            e_2 = { error: e_2_1 };
            return [3, 13];
          case 12:
            try {
              if (_b && !_b.done && (_e = _a.return)) _e.call(_a);
            } finally {
              if (e_2) throw e_2.error;
            }
            return [
              7
              /*endfinally*/
            ];
          case 13:
            return [
              2
              /*return*/
            ];
        }
      });
    };
    return DoubleKeyMap2;
  }()
);
var TemplateInstantiationModels = (
  /** @class */
  function(_super) {
    __extends(TemplateInstantiationModels2, _super);
    function TemplateInstantiationModels2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    return TemplateInstantiationModels2;
  }(DoubleKeyMap)
);
function capitalizeFirstLetter(text) {
  if (text.length) {
    return "" + text[0].toUpperCase() + text.substr(1);
  }
  return "";
}

// node_modules/devextreme-react/esm/core/template-wrapper.js
var __read2 = function(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"])) m.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return ar;
};
var createHiddenNode = function(containerNodeName, ref, defaultElement) {
  var style = { display: "none" };
  switch (containerNodeName) {
    case "TABLE":
      return React.createElement("tbody", { style, ref });
    case "TBODY":
      return React.createElement("tr", { style, ref });
    default:
      return React.createElement(defaultElement, { style, ref });
  }
};
var TemplateWrapperComponent = function(_a) {
  var templateFactory = _a.templateFactory, data17 = _a.data, index = _a.index, container = _a.container, onRemoved = _a.onRemoved, onRendered = _a.onRendered;
  var _b = __read2((0, import_react2.useState)(false), 2), removalListenerRequired = _b[0], setRemovalListenerRequired = _b[1];
  var isRemovalLocked = (0, import_react2.useRef)(false);
  var removalLocker = (0, import_react2.useMemo)(function() {
    return {
      lock: function() {
        isRemovalLocked.current = true;
      },
      unlock: function() {
        isRemovalLocked.current = false;
      }
    };
  }, []);
  var element = (0, import_react2.useRef)();
  var hiddenNodeElement = (0, import_react2.useRef)();
  var removalListenerElement = (0, import_react2.useRef)();
  var onTemplateRemoved = (0, import_react2.useCallback)(function(_, args) {
    if ((args === null || args === void 0 ? void 0 : args.isUnmounting) || isRemovalLocked.current) {
      return;
    }
    if (element.current) {
      off(element.current, DX_REMOVE_EVENT, onTemplateRemoved);
    }
    if (removalListenerElement.current) {
      off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);
    }
    onRemoved();
  }, [onRemoved]);
  (0, import_react2.useLayoutEffect)(function() {
    var el = element.current;
    if (el && el.nodeType === Node.ELEMENT_NODE) {
      off(el, DX_REMOVE_EVENT, onTemplateRemoved);
      on(el, DX_REMOVE_EVENT, onTemplateRemoved);
    } else if (!removalListenerRequired) {
      setRemovalListenerRequired(true);
    } else if (removalListenerElement.current) {
      off(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);
      on(removalListenerElement.current, DX_REMOVE_EVENT, onTemplateRemoved);
    }
    return function() {
      if (element.current) {
        container.appendChild(element.current);
      }
      if (hiddenNodeElement.current) {
        container.appendChild(hiddenNodeElement.current);
      }
      if (removalListenerElement.current) {
        container.appendChild(removalListenerElement.current);
      }
      if (el) {
        off(el, DX_REMOVE_EVENT, onTemplateRemoved);
      }
    };
  }, [onTemplateRemoved, removalListenerRequired, container]);
  (0, import_react2.useEffect)(function() {
    onRendered();
  }, [onRendered]);
  var hiddenNode = createHiddenNode(container === null || container === void 0 ? void 0 : container.nodeName, function(node) {
    hiddenNodeElement.current = node;
    element.current = node === null || node === void 0 ? void 0 : node.previousSibling;
  }, "div");
  var removalListener = removalListenerRequired ? createHiddenNode(container === null || container === void 0 ? void 0 : container.nodeName, function(node) {
    removalListenerElement.current = node;
  }, "span") : void 0;
  return (0, import_react_dom.createPortal)(React.createElement(
    React.Fragment,
    null,
    React.createElement(
      RemovalLockerContext.Provider,
      { value: removalLocker },
      templateFactory({ data: data17, index, onRendered }),
      hiddenNode,
      removalListener
    )
  ), container);
};
var TemplateWrapper2 = (0, import_react2.memo)(TemplateWrapperComponent);

// node_modules/devextreme-react/esm/core/config.js
var config = {
  useLegacyTemplateEngine: false
};
function getOption(optionName) {
  return config[optionName];
}

// node_modules/devextreme-react/esm/core/template-manager.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p2 in s) if (Object.prototype.hasOwnProperty.call(s, p2))
        t[p2] = s[p2];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __read3 = function(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"])) m.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return ar;
};
function normalizeProps3(props) {
  if (getOption("useLegacyTemplateEngine")) {
    var model = props.data;
    if (model && Object.prototype.hasOwnProperty.call(model, "key")) {
      model.dxkey = model.key;
    }
    return model;
  }
  return props;
}
var TemplateManager = function(_a) {
  var init = _a.init, onTemplatesRendered = _a.onTemplatesRendered;
  var _b = __read3((0, import_react3.useState)({
    collection: new TemplateInstantiationModels()
  }), 2), instantiationModels = _b[0], setInstantiationModels = _b[1];
  var _c = __read3((0, import_react3.useState)(), 2), updateContext = _c[0], setUpdateContext = _c[1];
  var widgetId = (0, import_react3.useRef)("");
  var templateFactories = (0, import_react3.useRef)({});
  var subscribeOnRemoval = (0, import_react3.useCallback)(function(container, onRemoved) {
    if (container.nodeType === Node.ELEMENT_NODE) {
      on(container, DX_REMOVE_EVENT, onRemoved);
    }
  }, []);
  var unsubscribeOnRemoval = (0, import_react3.useCallback)(function(container, onRemoved) {
    if (container.nodeType === Node.ELEMENT_NODE) {
      off(container, DX_REMOVE_EVENT, onRemoved);
    }
  }, []);
  var unwrapElement = (0, import_react3.useCallback)(function(element) {
    return element.get ? element.get(0) : element;
  }, []);
  var createMapKey = (0, import_react3.useCallback)(function(key1, key2) {
    return { key1, key2 };
  }, []);
  var getRandomId = (0, import_react3.useCallback)(function() {
    return "" + generateID() + generateID() + generateID();
  }, []);
  var collection = instantiationModels.collection;
  var getRenderFunc = (0, import_react3.useCallback)(function(templateKey) {
    return function(_a2) {
      var data17 = _a2.model, index = _a2.index, container = _a2.container, onRendered = _a2.onRendered;
      var containerElement = unwrapElement(container);
      var key = createMapKey(data17, containerElement);
      var onRemoved = function() {
        if (collection.get(key)) {
          collection.delete(key);
          setInstantiationModels({ collection });
        }
      };
      var hostWidgetId = widgetId.current;
      collection.set(key, {
        templateKey,
        index,
        componentKey: getRandomId(),
        onRendered: function() {
          unsubscribeOnRemoval(containerElement, onRemoved);
          if (hostWidgetId === widgetId.current) {
            onRendered === null || onRendered === void 0 ? void 0 : onRendered();
          }
        },
        onRemoved
      });
      setInstantiationModels({ collection });
      return containerElement;
    };
  }, [unsubscribeOnRemoval, createMapKey, collection]);
  (0, import_react3.useMemo)(function() {
    function getTemplateFunction(template) {
      switch (template.type) {
        case "children":
          return function() {
            return template.content;
          };
        case "render":
          return function(props) {
            normalizeProps3(props);
            return template.content(props.data, props.index);
          };
        case "component":
          return function(props) {
            props = normalizeProps3(props);
            return React2.createElement.bind(null, template.content)(props);
          };
        default:
          return function() {
            return React2.createElement(React2.Fragment);
          };
      }
    }
    function createDXTemplates(templateOptions) {
      var factories = Object.entries(templateOptions).reduce(function(res, _a2) {
        var _b2;
        var _c2 = __read3(_a2, 2), key = _c2[0], template = _c2[1];
        return __assign(__assign({}, res), (_b2 = {}, _b2[key] = getTemplateFunction(template), _b2));
      }, {});
      templateFactories.current = factories;
      var dxTemplates = Object.keys(factories).reduce(function(templates, templateKey) {
        templates[templateKey] = { render: getRenderFunc(templateKey) };
        return templates;
      }, {});
      return dxTemplates;
    }
    function clearInstantiationModels() {
      widgetId.current = getRandomId();
      instantiationModels.collection.clear();
      setInstantiationModels(__assign({}, instantiationModels));
    }
    function updateTemplates(onUpdated) {
      setUpdateContext({ onUpdated });
    }
    init({ createDXTemplates, clearInstantiationModels, updateTemplates });
  }, [init, getRenderFunc]);
  (0, import_react3.useEffect)(function() {
    if (updateContext) {
      updateContext.onUpdated();
    }
    onTemplatesRendered();
  }, [updateContext, onTemplatesRendered]);
  if (instantiationModels.collection.empty) {
    return null;
  }
  return React2.createElement(React2.Fragment, null, Array.from(instantiationModels.collection).map(function(_a2) {
    var _b2 = __read3(_a2, 2), _c2 = _b2[0], data17 = _c2.key1, container = _c2.key2, _d = _b2[1], index = _d.index, templateKey = _d.templateKey, componentKey = _d.componentKey, onRendered = _d.onRendered, onRemoved = _d.onRemoved;
    subscribeOnRemoval(container, onRemoved);
    var factory = templateFactories.current[templateKey];
    if (factory) {
      return React2.createElement(TemplateWrapper2, { key: componentKey, templateFactory: factory, data: data17, index, container, onRemoved, onRendered });
    }
    return null;
  }));
};

// node_modules/devextreme-react/esm/core/configuration/utils.js
function mergeNameParts() {
  var args = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  return args.filter(function(value2) {
    return value2;
  }).join(".");
}
function parseOptionName(name2) {
  var parts = name2.split("[");
  if (parts.length === 1) {
    return {
      isCollectionItem: false,
      name: name2
    };
  }
  return {
    isCollectionItem: true,
    name: parts[0],
    index: Number(parts[1].slice(0, -1))
  };
}
var isIE = function() {
  var _a, _b;
  var ua = (_b = (_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent) !== null && _b !== void 0 ? _b : "";
  var msie = ua.indexOf("MSIE");
  var trident = ua.indexOf("Trident/");
  return msie > 0 || trident > 0;
};
var shallowEquals2 = function(first, second) {
  if (Object.keys(first).length !== Object.keys(second).length) {
    return false;
  }
  return Object.keys(first).every(function(key) {
    return first[key] === second[key];
  });
};

// node_modules/devextreme-react/esm/core/configuration/tree.js
function buildTemplates(node, optionsAccum, templatesAccum) {
  node.templates.forEach(function(template) {
    if (template.isAnonymous) {
      var templateName = mergeNameParts(node.fullName, template.optionName);
      optionsAccum[template.optionName] = templateName;
      templatesAccum[templateName] = template;
    } else {
      templatesAccum[template.optionName] = template;
    }
  });
}
function buildNode(node, templatesAccum, ignoreInitialValues) {
  var result2 = {};
  Object.keys(node.predefinedOptions).forEach(function(key) {
    result2[key] = node.predefinedOptions[key];
  });
  Object.keys(node.configs).forEach(function(key) {
    result2[key] = buildNode(node.configs[key], templatesAccum, ignoreInitialValues);
  });
  Object.keys(node.configCollections).forEach(function(key) {
    result2[key] = node.configCollections[key].map(function(item) {
      return buildNode(item, templatesAccum, ignoreInitialValues);
    });
  });
  if (!ignoreInitialValues) {
    Object.keys(node.initialOptions).forEach(function(key) {
      result2[key] = node.initialOptions[key];
    });
  }
  Object.keys(node.options).forEach(function(key) {
    result2[key] = node.options[key];
  });
  buildTemplates(node, result2, templatesAccum);
  return result2;
}
function buildConfig(root, ignoreInitialValues) {
  var templatesAccum = {};
  var options2 = buildNode(root, templatesAccum, ignoreInitialValues);
  return {
    templates: templatesAccum,
    options: options2
  };
}
var ValueType;
(function(ValueType2) {
  ValueType2[ValueType2["Simple"] = 0] = "Simple";
  ValueType2[ValueType2["Complex"] = 1] = "Complex";
  ValueType2[ValueType2["Array"] = 2] = "Array";
})(ValueType || (ValueType = {}));
function findValueInObject(obj, path) {
  var key = path.shift();
  if (!key) {
    return {
      value: obj,
      type: ValueType.Simple
    };
  }
  if (obj instanceof Object && Object.keys(obj).includes(key)) {
    return findValueInObject(obj[key], path);
  }
  return void 0;
}
function findValue(node, path) {
  var name2 = path.shift();
  if (!name2) {
    return {
      value: buildConfig(node, true).options,
      type: ValueType.Complex
    };
  }
  var optionInfo = parseOptionName(name2);
  if (optionInfo.name in node.options) {
    var options2 = optionInfo.isCollectionItem ? node.options[optionInfo.name][optionInfo.index] : node.options[optionInfo.name];
    return findValueInObject(options2, path);
  }
  if (optionInfo.isCollectionItem) {
    var collection = node.configCollections[optionInfo.name];
    if (!collection) {
      return void 0;
    }
    var item = collection[optionInfo.index];
    if (!item) {
      return void 0;
    }
    return findValue(item, path);
  }
  var child = node.configs[optionInfo.name];
  if (child) {
    return findValue(child, path);
  }
  var childCollection = node.configCollections[optionInfo.name];
  if (childCollection) {
    if (path.length !== 0) {
      return void 0;
    }
    return {
      value: childCollection.map(function(item2) {
        return buildNode(item2, {}, true);
      }),
      type: ValueType.Array
    };
  }
  return void 0;
}

// node_modules/devextreme-react/esm/core/configuration/comparer.js
function compareTemplates(current2, prev, changesAccum) {
  var currentTemplatesOptions = {};
  var currentTemplates = {};
  var prevTemplatesOptions = {};
  var prevTemplates = {};
  buildTemplates(current2, currentTemplatesOptions, currentTemplates);
  buildTemplates(prev, prevTemplatesOptions, prevTemplates);
  changesAccum.addRemovedValues(currentTemplatesOptions, prevTemplatesOptions, current2.fullName);
  Object.keys(currentTemplatesOptions).forEach(function(key) {
    if (currentTemplatesOptions[key] === prevTemplatesOptions[key]) {
      return;
    }
    changesAccum.options[mergeNameParts(current2.fullName, key)] = currentTemplatesOptions[key];
  });
  Object.keys(currentTemplates).forEach(function(key) {
    var currentTemplate = currentTemplates[key];
    var prevTemplate = prevTemplates[key];
    if (prevTemplate && currentTemplate.content === prevTemplate.content) {
      return;
    }
    changesAccum.templates[key] = currentTemplate;
  });
}
function compare3(current2, prev, changesAccum) {
  if (!prev) {
    changesAccum.options[current2.fullName] = buildNode(current2, changesAccum.templates, true);
    return;
  }
  changesAccum.addRemovedValues(current2.options, prev.options, current2.fullName);
  changesAccum.addRemovedValues(current2.configCollections, prev.configCollections, current2.fullName);
  changesAccum.addRemovedValues(current2.configs, prev.configs, current2.fullName);
  compareCollections(current2, prev, changesAccum);
  Object.keys(current2.configs).forEach(function(key) {
    compare3(current2.configs[key], prev.configs[key], changesAccum);
  });
  Object.keys(current2.options).forEach(function(key) {
    if (current2.options[key] === prev.options[key]) {
      return;
    }
    changesAccum.options[mergeNameParts(current2.fullName, key)] = current2.options[key];
  });
  compareTemplates(current2, prev, changesAccum);
}
function appendRemovedValues(current2, prev, path, changesAccum) {
  var removedKeys = Object.keys(prev).filter(function(key) {
    return !Object.keys(current2).includes(key);
  });
  removedKeys.forEach(function(key) {
    changesAccum.push(mergeNameParts(path, key));
  });
}
function getChanges(current2, prev) {
  var changesAccum = {
    options: {},
    removedOptions: [],
    templates: {},
    addRemovedValues: function(currentOptions, prevOptions, path) {
      appendRemovedValues(currentOptions, prevOptions, path, this.removedOptions);
    }
  };
  compare3(current2, prev, changesAccum);
  return changesAccum;
}
function compareCollections(current2, prev, changesAccum) {
  Object.keys(current2.configCollections).forEach(function(key) {
    var currentCollection = current2.configCollections[key];
    var prevCollection = prev.configCollections[key] || [];
    if (!currentCollection || currentCollection.length !== prevCollection.length) {
      var updatedCollection_1 = [];
      currentCollection.forEach(function(item) {
        var config2 = buildNode(item, changesAccum.templates, true);
        updatedCollection_1.push(config2);
      });
      changesAccum.options[mergeNameParts(current2.fullName, key)] = updatedCollection_1;
      return;
    }
    for (var i = 0; i < currentCollection.length; i += 1) {
      compare3(currentCollection[i], prevCollection[i], changesAccum);
    }
  });
}

// node_modules/devextreme-react/esm/core/options-manager.js
var __read4 = function(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"])) m.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return ar;
};
var __spreadArray = function(to, from) {
  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
    to[j] = from[i];
  return to;
};
var optionsManagers = /* @__PURE__ */ new Set();
var guardTimeoutHandler = -1;
var innerGuardTimeoutHandler = -1;
function unscheduleGuards() {
  clearTimeout(guardTimeoutHandler);
  clearTimeout(innerGuardTimeoutHandler);
}
function scheduleGuards() {
  unscheduleGuards();
  guardTimeoutHandler = window.setTimeout(function() {
    innerGuardTimeoutHandler = window.setTimeout(function() {
      optionsManagers.forEach(function(optionManager) {
        return optionManager.execGuards();
      });
    });
  });
}
var OptionsManager = (
  /** @class */
  function() {
    function OptionsManager2() {
      this.guards = {};
      this.isUpdating = false;
      this.onOptionChanged = this.onOptionChanged.bind(this);
      this.wrapOptionValue = this.wrapOptionValue.bind(this);
    }
    OptionsManager2.prototype.setInstance = function(instance, config2, subscribableOptions, independentEvents) {
      this.instance = instance;
      this.currentConfig = config2;
      this.subscribableOptions = new Set(subscribableOptions);
      this.independentEvents = new Set(independentEvents);
      optionsManagers.add(this);
    };
    OptionsManager2.prototype.getInitialOptions = function(rootNode) {
      var _this = this;
      var config2 = buildConfig(rootNode, false);
      var options2 = {};
      Object.keys(config2.options).forEach(function(key) {
        options2[key] = _this.wrapOptionValue(key, config2.options[key]);
      });
      return options2;
    };
    OptionsManager2.prototype.getTemplateOptions = function(rootNode) {
      var config2 = buildConfig(rootNode, false);
      return config2.templates;
    };
    OptionsManager2.prototype.update = function(config2, dxtemplates) {
      var _this = this;
      var changedOptions = [];
      var optionChangedHandler = function(_a) {
        var value2 = _a.value, fullName = _a.fullName;
        changedOptions.push([fullName, value2]);
      };
      this.instance.on("optionChanged", optionChangedHandler);
      var changes = getChanges(config2, this.currentConfig);
      if (!changes.options && !changes.templates && !changes.removedOptions.length) {
        return;
      }
      this.instance.beginUpdate();
      this.isUpdating = true;
      changes.removedOptions.forEach(function(optionName) {
        _this.resetOption(optionName);
      });
      if (Object.keys(dxtemplates).length > 0) {
        this.setValue("integrationOptions", {
          templates: dxtemplates
        });
      }
      Object.keys(changes.options).forEach(function(key) {
        _this.setValue(key, changes.options[key]);
      });
      this.isUpdating = false;
      this.instance.off("optionChanged", optionChangedHandler);
      this.currentConfig = config2;
      changedOptions.forEach(function(_a) {
        var _b = __read4(_a, 2), name2 = _b[0], value2 = _b[1];
        var currentPropValue = config2.options[name2];
        if (Object.prototype.hasOwnProperty.call(config2.options, name2) && currentPropValue !== value2) {
          _this.setValue(name2, currentPropValue);
        }
      });
      this.instance.endUpdate();
    };
    OptionsManager2.prototype.onOptionChanged = function(e) {
      var _this = this;
      var _a;
      if (this.isUpdating) {
        return;
      }
      var valueDescriptor = findValue(this.currentConfig, e.fullName.split("."));
      if (!valueDescriptor || valueDescriptor.value !== e.value) {
        this.callOptionChangeHandler(e.fullName, e.value);
      }
      valueDescriptor = findValue(this.currentConfig, e.fullName.split("."));
      if (!valueDescriptor) {
        return;
      }
      var value2 = valueDescriptor.value, type2 = valueDescriptor.type;
      if (value2 instanceof Array && type2 === ValueType.Array) {
        for (var i = 0; i < value2.length; i += 1) {
          if (value2[i] !== ((_a = e.value) === null || _a === void 0 ? void 0 : _a[i])) {
            this.addGuard(e.fullName, value2);
            return;
          }
        }
      } else if (type2 === ValueType.Complex && value2 instanceof Object) {
        Object.keys(value2).forEach(function(key) {
          var _a2;
          if (value2[key] === ((_a2 = e.value) === null || _a2 === void 0 ? void 0 : _a2[key])) {
            return;
          }
          _this.addGuard(mergeNameParts(e.fullName, key), value2[key]);
        });
      } else {
        var valuesAreEqual = value2 === e.value;
        var valuesAreEqualObjects = !valuesAreEqual && value2 instanceof Object && e.value instanceof Object && shallowEquals2(value2, e.value);
        if (valuesAreEqual || valuesAreEqualObjects || this.instance.skipOptionsRollBack) {
          return;
        }
        this.addGuard(e.fullName, value2);
      }
    };
    OptionsManager2.prototype.dispose = function() {
      var _this = this;
      optionsManagers.delete(this);
      Object.keys(this.guards).forEach(function(optionName) {
        delete _this.guards[optionName];
      });
    };
    OptionsManager2.prototype.isOptionSubscribable = function(optionName) {
      return this.subscribableOptions.has(optionName);
    };
    OptionsManager2.prototype.isIndependentEvent = function(optionName) {
      return this.independentEvents.has(optionName);
    };
    OptionsManager2.prototype.callOptionChangeHandler = function(optionName, optionValue) {
      if (!this.isOptionSubscribable(optionName)) {
        return;
      }
      var parts = optionName.split(".");
      var propName = parts[parts.length - 1];
      if (propName.startsWith("on")) {
        return;
      }
      var eventName = "on" + capitalizeFirstLetter(propName) + "Change";
      parts[parts.length - 1] = eventName;
      var changeEvent = findValue(this.currentConfig, parts);
      if (!changeEvent) {
        return;
      }
      if (typeof changeEvent.value !== "function") {
        throw new Error("Invalid value for the " + eventName + " property.\n                " + eventName + " must be a function.");
      }
      changeEvent.value(optionValue);
    };
    OptionsManager2.prototype.wrapOptionValue = function(name2, value2) {
      var _this = this;
      if (name2.substr(0, 2) === "on" && typeof value2 === "function") {
        return function() {
          var args = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
          }
          if (!_this.isUpdating || _this.isIndependentEvent(name2)) {
            value2.apply(void 0, __spreadArray([], __read4(args)));
          }
        };
      }
      return value2;
    };
    OptionsManager2.prototype.addGuard = function(optionName, optionValue) {
      var _this = this;
      if (this.guards[optionName] !== void 0) {
        return;
      }
      var handler = function() {
        _this.setValue(optionName, optionValue);
        delete _this.guards[optionName];
      };
      this.guards[optionName] = handler;
      scheduleGuards();
    };
    OptionsManager2.prototype.execGuards = function() {
      Object.values(this.guards).forEach(function(handler) {
        return handler();
      });
    };
    OptionsManager2.prototype.resetOption = function(name2) {
      this.instance.resetOption(name2);
    };
    OptionsManager2.prototype.setValue = function(name2, value2) {
      if (this.guards[name2]) {
        delete this.guards[name2];
      }
      this.instance.option(name2, this.wrapOptionValue(name2, value2));
    };
    return OptionsManager2;
  }()
);

// node_modules/devextreme-react/esm/core/widget-config.js
var elementPropNames = ["style", "id"];
var classNamePropName = "className";
var refPropName = ["dropZone", "dialogTrigger"];
function isIgnoredProp(name2) {
  return name2 === "children" || name2 === classNamePropName || elementPropNames.includes(name2);
}
function getRefElement(value2) {
  var _a;
  if (value2 === null || value2 === void 0 ? void 0 : value2.current) {
    if ((_a = value2.current.instance) === null || _a === void 0 ? void 0 : _a.element()) {
      return value2.current.instance.element();
    }
    return value2.current;
  }
  return value2;
}
function separateProps(props, defaultsProps, templateProps) {
  templateProps = templateProps || [];
  var defaults = {};
  var options2 = {};
  var templates = {};
  var knownTemplates = {};
  templateProps.forEach(function(value2) {
    knownTemplates[value2.component] = true;
    knownTemplates[value2.render] = true;
  });
  Object.keys(props).forEach(function(key) {
    var defaultOptionName = defaultsProps ? defaultsProps[key] : null;
    var value2 = props[key];
    if (isIgnoredProp(key)) {
      return;
    }
    if (defaultOptionName) {
      defaults[defaultOptionName] = value2;
      return;
    }
    if (knownTemplates[key]) {
      templates[key] = value2;
      return;
    }
    if (refPropName.includes(key)) {
      options2[key] = getRefElement(value2);
      return;
    }
    options2[key] = props[key];
  });
  return { options: options2, defaults, templates };
}
function getClassName(props) {
  return props[classNamePropName];
}

// node_modules/devextreme-react/esm/core/configuration/react/tree.js
var React4 = __toESM(require_react());

// node_modules/devextreme-react/esm/core/template.js
var PropTypes = __toESM(require_prop_types());
var React3 = __toESM(require_react());
var __extends2 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Template = (
  /** @class */
  function(_super) {
    __extends2(Template2, _super);
    function Template2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Template2.prototype.render = function() {
      return null;
    };
    return Template2;
  }(React3.PureComponent)
);
var requiredPropsCheck = function(props) {
  if (!props.component && !props.render && !props.children) {
    return new Error("The Template component requires 'component' or 'render' property");
  }
  return null;
};
Template.propTypes = {
  name: PropTypes.string.isRequired,
  component: requiredPropsCheck,
  render: requiredPropsCheck,
  children: requiredPropsCheck
};

// node_modules/devextreme-react/esm/core/configuration/react/element.js
var ElementType;
(function(ElementType2) {
  ElementType2[ElementType2["Option"] = 0] = "Option";
  ElementType2[ElementType2["Template"] = 1] = "Template";
  ElementType2[ElementType2["Unknown"] = 2] = "Unknown";
})(ElementType || (ElementType = {}));
function getElementInfo(element, parentExpectedChildren) {
  var reactElement = element;
  if (!reactElement || !reactElement.type) {
    return {
      type: ElementType.Unknown
    };
  }
  if (reactElement.type === Template) {
    return {
      type: ElementType.Template,
      props: reactElement.props
    };
  }
  var elementDescriptor = reactElement.type;
  if (elementDescriptor.OptionName) {
    var name_1 = elementDescriptor.OptionName;
    var isCollectionItem = elementDescriptor.IsCollectionItem;
    var expectation = parentExpectedChildren && parentExpectedChildren[name_1];
    if (expectation) {
      isCollectionItem = expectation.isCollectionItem;
      if (expectation.optionName) {
        name_1 = expectation.optionName;
      }
    }
    return {
      type: ElementType.Option,
      descriptor: {
        name: name_1,
        isCollection: isCollectionItem,
        templates: elementDescriptor.TemplateProps || [],
        initialValuesProps: elementDescriptor.DefaultsProps || {},
        predefinedValuesProps: elementDescriptor.PredefinedProps || {},
        expectedChildren: elementDescriptor.ExpectedChildren || {}
      },
      props: reactElement.props
    };
  }
  return {
    type: ElementType.Unknown
  };
}

// node_modules/devextreme-react/esm/core/configuration/react/templates.js
function getAnonymousTemplate(props, templateMeta, hasTranscludedContent) {
  if (templateMeta.tmplOption === "template" && hasTranscludedContent) {
    return {
      optionName: templateMeta.tmplOption,
      isAnonymous: true,
      type: "children",
      content: props.children,
      keyFn: props[templateMeta.keyFn]
    };
  }
  if (props[templateMeta.render]) {
    return {
      optionName: templateMeta.tmplOption,
      isAnonymous: true,
      type: "render",
      content: props[templateMeta.render],
      keyFn: props[templateMeta.keyFn]
    };
  }
  if (props[templateMeta.component]) {
    return {
      optionName: templateMeta.tmplOption,
      isAnonymous: true,
      type: "component",
      content: props[templateMeta.component],
      keyFn: props[templateMeta.keyFn]
    };
  }
  return null;
}
function getNamedTemplate(props) {
  if (!props.name) {
    return null;
  }
  if (props.component) {
    return {
      optionName: props.name,
      isAnonymous: false,
      type: "component",
      content: props.component,
      keyFn: props.keyFn
    };
  }
  if (props.render) {
    return {
      optionName: props.name,
      isAnonymous: false,
      type: "render",
      content: props.render,
      keyFn: props.keyFn
    };
  }
  return {
    optionName: props.name,
    isAnonymous: false,
    type: "children",
    content: props.children,
    keyFn: props.keyFn
  };
}

// node_modules/devextreme-react/esm/core/configuration/react/tree.js
var __assign2 = function() {
  __assign2 = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p2 in s) if (Object.prototype.hasOwnProperty.call(s, p2))
        t[p2] = s[p2];
    }
    return t;
  };
  return __assign2.apply(this, arguments);
};
function processChildren(parentElement, parentFullName) {
  var templates = [];
  var configCollections = {};
  var configs = {};
  var hasTranscludedContent = false;
  React4.Children.map(parentElement.props.children, function(child) {
    var element = getElementInfo(child, parentElement.descriptor.expectedChildren);
    if (element.type === ElementType.Unknown) {
      if (child !== null && child !== void 0 && child !== false) {
        hasTranscludedContent = true;
      }
      return;
    }
    if (element.type === ElementType.Template) {
      var template = getNamedTemplate(element.props);
      if (template) {
        templates.push(template);
      }
      return;
    }
    if (element.descriptor.isCollection) {
      var collection = configCollections[element.descriptor.name];
      if (!collection) {
        collection = [];
        configCollections[element.descriptor.name] = collection;
      }
      var collectionItem = createConfigNode(element, mergeNameParts(parentFullName, element.descriptor.name) + "[" + collection.length + "]");
      collection.push(collectionItem);
      return;
    }
    var configNode = createConfigNode(element, parentFullName);
    configs[element.descriptor.name] = configNode;
  });
  return {
    configs,
    configCollections,
    templates,
    hasTranscludedContent
  };
}
function createConfigNode(element, path) {
  var fullName = element.descriptor.isCollection ? path : mergeNameParts(path, element.descriptor.name);
  var separatedValues = separateProps(element.props, element.descriptor.initialValuesProps, element.descriptor.templates);
  var childrenData = processChildren(element, fullName);
  element.descriptor.templates.forEach(function(templateMeta) {
    var template = getAnonymousTemplate(element.props, templateMeta, path.length > 0 ? childrenData.hasTranscludedContent : false);
    if (template) {
      childrenData.templates.push(template);
    }
  });
  return {
    fullName,
    predefinedOptions: element.descriptor.predefinedValuesProps,
    initialOptions: separatedValues.defaults,
    options: separatedValues.options,
    templates: childrenData.templates,
    configCollections: childrenData.configCollections,
    configs: childrenData.configs
  };
}
function buildConfigTree(widgetDescriptor, props) {
  return createConfigNode({
    type: ElementType.Option,
    descriptor: __assign2({ name: "", isCollection: false }, widgetDescriptor),
    props
  }, "");
}

// node_modules/devextreme-react/esm/core/component-base.js
var __extends3 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __assign3 = function() {
  __assign3 = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p2 in s) if (Object.prototype.hasOwnProperty.call(s, p2))
        t[p2] = s[p2];
    }
    return t;
  };
  return __assign3.apply(this, arguments);
};
var __read5 = function(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"])) m.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return ar;
};
var __spreadArray2 = function(to, from) {
  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
    to[j] = from[i];
  return to;
};
var DX_REMOVE_EVENT = "dxremove";
var ComponentBase = (
  /** @class */
  function(_super) {
    __extends3(ComponentBase2, _super);
    function ComponentBase2(props) {
      var _this = _super.call(this, props) || this;
      _this.isPortalComponent = false;
      _this._templateProps = [];
      _this._childNodes = [];
      _this.shouldRestoreFocus = false;
      _this.useRequestAnimationFrameFlag = false;
      _this.useDeferUpdateForTemplates = false;
      _this.guardsUpdateScheduled = false;
      _this._createWidget = _this._createWidget.bind(_this);
      _this._setTemplateManagerHooks = _this._setTemplateManagerHooks.bind(_this);
      _this.onTemplatesRendered = _this.onTemplatesRendered.bind(_this);
      _this._optionsManager = new OptionsManager();
      return _this;
    }
    ComponentBase2.displayContentsStyle = function() {
      return isIE() ? {
        width: "100%",
        height: "100%",
        padding: 0,
        margin: 0
      } : { display: "contents" };
    };
    ComponentBase2.prototype.componentDidMount = function() {
      var _a;
      var _b;
      var style = this.props.style;
      if ((_b = this._childNodes) === null || _b === void 0 ? void 0 : _b.length) {
        (_a = this._element).append.apply(_a, __spreadArray2([], __read5(this._childNodes)));
      } else if (this._element.childNodes.length) {
        this._childNodes = Array.from(this._element.childNodes);
      }
      this._updateCssClasses(null, this.props);
      if (style) {
        this._setInlineStyles(style);
      }
    };
    ComponentBase2.prototype.componentDidUpdate = function(prevProps) {
      var _a;
      this._updateCssClasses(prevProps, this.props);
      var config2 = this._getConfig();
      var templateOptions = this._optionsManager.getTemplateOptions(config2);
      var dxTemplates = ((_a = this._createDXTemplates) === null || _a === void 0 ? void 0 : _a.call(this, templateOptions)) || {};
      this._optionsManager.update(config2, dxTemplates);
      this._scheduleTemplatesUpdate();
    };
    ComponentBase2.prototype.componentWillUnmount = function() {
      var _a;
      this._lockParentOnRemoved();
      if (this._instance) {
        var dxRemoveArgs = { isUnmounting: true };
        this.shouldRestoreFocus = !!this._element.contains(document.activeElement);
        (_a = this._childNodes) === null || _a === void 0 ? void 0 : _a.forEach(function(child) {
          var _a2;
          return (_a2 = child.parentNode) === null || _a2 === void 0 ? void 0 : _a2.removeChild(child);
        });
        if (this._element) {
          var preventFocusOut = function(e) {
            return e.stopPropagation();
          };
          on(this._element, "focusout", preventFocusOut);
          triggerHandler(this._element, DX_REMOVE_EVENT, dxRemoveArgs);
          off(this._element, "focusout", preventFocusOut);
        }
        this._instance.dispose();
        this._instance = null;
      }
      this._optionsManager.dispose();
      this._unlockParentOnRemoved();
    };
    ComponentBase2.prototype._createWidget = function(element) {
      var _a, _b;
      element = element || this._element;
      var config2 = this._getConfig();
      var options2 = __assign3({ templatesRenderAsynchronously: true }, this._optionsManager.getInitialOptions(config2));
      var templateOptions = this._optionsManager.getTemplateOptions(config2);
      var dxTemplates = (_a = this._createDXTemplates) === null || _a === void 0 ? void 0 : _a.call(this, templateOptions);
      if (dxTemplates && Object.keys(dxTemplates).length) {
        options2 = __assign3(__assign3({}, options2), { integrationOptions: {
          templates: dxTemplates
        } });
      }
      (_b = this._clearInstantiationModels) === null || _b === void 0 ? void 0 : _b.call(this);
      this._instance = new this._WidgetClass(element, options2);
      if (!this.useRequestAnimationFrameFlag) {
        this.useDeferUpdateForTemplates = this._instance.option("integrationOptions.useDeferUpdateForTemplates");
      }
      this._optionsManager.setInstance(this._instance, config2, this.subscribableOptions, this.independentEvents);
      this._instance.on("optionChanged", this._optionsManager.onOptionChanged);
    };
    ComponentBase2.prototype.onTemplatesRendered = function() {
      var _a;
      if (this.shouldRestoreFocus && ((_a = this._instance) === null || _a === void 0 ? void 0 : _a.focus)) {
        this._instance.focus();
        this.shouldRestoreFocus = false;
      }
    };
    ComponentBase2.prototype._scheduleTemplatesUpdate = function() {
      var _this = this;
      if (this.guardsUpdateScheduled) {
        return;
      }
      this.guardsUpdateScheduled = true;
      var updateFunc = this.useDeferUpdateForTemplates ? deferUpdate : requestAnimationFrame;
      updateFunc(function() {
        var _a;
        _this.guardsUpdateScheduled = false;
        (_a = _this._updateTemplates) === null || _a === void 0 ? void 0 : _a.call(_this, function() {
          return scheduleGuards();
        });
      });
      unscheduleGuards();
    };
    ComponentBase2.prototype._getConfig = function() {
      return buildConfigTree({
        templates: this._templateProps,
        initialValuesProps: this._defaults,
        predefinedValuesProps: {},
        expectedChildren: this._expectedChildren
      }, this.props);
    };
    ComponentBase2.prototype._getElementProps = function() {
      var _this = this;
      var elementProps = {
        ref: function(element) {
          _this._element = element;
        }
      };
      elementPropNames.forEach(function(name2) {
        var props = _this.props;
        if (name2 in props) {
          elementProps[name2] = props[name2];
        }
      });
      return elementProps;
    };
    ComponentBase2.prototype._setInlineStyles = function(styles) {
      var _this = this;
      Object.entries(styles).forEach(function(_a) {
        var _b = __read5(_a, 2), name2 = _b[0], value2 = _b[1];
        _this._element.style[name2] = value2;
      });
    };
    ComponentBase2.prototype._updateCssClasses = function(prevProps, newProps) {
      var _a, _b;
      var prevClassName = prevProps ? getClassName(prevProps) : void 0;
      var newClassName = getClassName(newProps);
      if (prevClassName === newClassName) {
        return;
      }
      if (prevClassName) {
        var classNames2 = prevClassName.split(" ").filter(function(c) {
          return c;
        });
        if (classNames2.length) {
          (_a = this._element.classList).remove.apply(_a, __spreadArray2([], __read5(classNames2)));
        }
      }
      if (newClassName) {
        var classNames2 = newClassName.split(" ").filter(function(c) {
          return c;
        });
        if (classNames2.length) {
          (_b = this._element.classList).add.apply(_b, __spreadArray2([], __read5(classNames2)));
        }
      }
    };
    ComponentBase2.prototype._lockParentOnRemoved = function() {
      var _a;
      (_a = this.context) === null || _a === void 0 ? void 0 : _a.lock();
    };
    ComponentBase2.prototype._unlockParentOnRemoved = function() {
      var _a;
      (_a = this.context) === null || _a === void 0 ? void 0 : _a.unlock();
    };
    ComponentBase2.prototype._setTemplateManagerHooks = function(_a) {
      var createDXTemplates = _a.createDXTemplates, clearInstantiationModels = _a.clearInstantiationModels, updateTemplates = _a.updateTemplates;
      this._createDXTemplates = createDXTemplates;
      this._clearInstantiationModels = clearInstantiationModels;
      this._updateTemplates = updateTemplates;
    };
    ComponentBase2.prototype.renderChildren = function() {
      var children = this.props.children;
      return children;
    };
    ComponentBase2.prototype.renderContent = function() {
      var _this = this;
      var children = this.props.children;
      return this.isPortalComponent && children ? React5.createElement("div", {
        ref: function(node) {
          if (node && _this.portalContainer !== node) {
            _this.portalContainer = node;
            _this.forceUpdate();
          }
        },
        style: ComponentBase2.displayContentsStyle()
      }) : this.renderChildren();
    };
    ComponentBase2.prototype.renderPortal = function() {
      return this.portalContainer && (0, import_react_dom2.createPortal)(this.renderChildren(), this.portalContainer);
    };
    ComponentBase2.prototype.render = function() {
      return React5.createElement(React5.Fragment, {}, React5.createElement("div", this._getElementProps(), this.renderContent(), React5.createElement(TemplateManager, {
        init: this._setTemplateManagerHooks,
        onTemplatesRendered: this.onTemplatesRendered
      })), this.isPortalComponent && this.renderPortal());
    };
    ComponentBase2.contextType = RemovalLockerContext;
    return ComponentBase2;
  }(React5.PureComponent)
);

// node_modules/devextreme-react/esm/core/extension-component.js
var __extends4 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ExtensionComponent = (
  /** @class */
  function(_super) {
    __extends4(ExtensionComponent2, _super);
    function ExtensionComponent2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ExtensionComponent2.prototype.componentDidMount = function() {
      var onMounted = this.props.onMounted;
      if (onMounted) {
        onMounted(this._createWidget);
      } else {
        this._createWidget();
      }
    };
    return ExtensionComponent2;
  }(ComponentBase)
);

// node_modules/devextreme-react/esm/core/component.js
var __extends5 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Component3 = (
  /** @class */
  function(_super) {
    __extends5(Component4, _super);
    function Component4(props) {
      var _this = _super.call(this, props) || this;
      _this._extensionCreators = [];
      _this._registerExtension = _this._registerExtension.bind(_this);
      return _this;
    }
    Component4.prototype.componentDidMount = function() {
      _super.prototype.componentDidMount.call(this);
      this._createWidget();
      this._createExtensions();
    };
    Component4.prototype.componentWillUnmount = function() {
      _super.prototype.componentWillUnmount.call(this);
      this.clearExtensions();
    };
    Component4.prototype.clearExtensions = function() {
      this._extensionCreators = [];
    };
    Component4.prototype.renderChildren = function() {
      var _this = this;
      return React6.Children.map(
        // @ts-expect-error TS2339
        this.props.children,
        function(child) {
          if (child && Object.prototype.isPrototypeOf.call(ExtensionComponent, child.type)) {
            return React6.cloneElement(child, { onMounted: _this._registerExtension });
          }
          return child;
        }
      );
    };
    Component4.prototype._registerExtension = function(creator) {
      this._extensionCreators.push(creator);
    };
    Component4.prototype._createExtensions = function() {
      var _this = this;
      this._extensionCreators.forEach(function(creator) {
        return creator(_this._element);
      });
    };
    return Component4;
  }(ComponentBase)
);

// node_modules/devextreme-react/esm/core/nested-option.js
var React7 = __toESM(require_react());
var __extends6 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var NestedOption = (
  /** @class */
  function(_super) {
    __extends6(NestedOption2, _super);
    function NestedOption2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    NestedOption2.prototype.render = function() {
      var stateChildren = this.props.children;
      var children = React7.Children.map(stateChildren, function(child) {
        var childElementInfo = getElementInfo(child);
        return childElementInfo.type === ElementType.Option ? child : null;
      });
      return React7.createElement(React7.Fragment, {}, children);
    };
    return NestedOption2;
  }(React7.PureComponent)
);
var nested_option_default = NestedOption;

// node_modules/devextreme-react/esm/data-grid.js
var __extends7 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var DataGrid2 = (
  /** @class */
  function(_super) {
    __extends7(DataGrid3, _super);
    function DataGrid3() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this._WidgetClass = data_grid_default;
      _this.useRequestAnimationFrameFlag = true;
      _this.subscribableOptions = ["columns", "editing", "editing.changes", "editing.editColumnName", "editing.editRowKey", "filterPanel", "filterPanel.filterEnabled", "filterValue", "focusedColumnIndex", "focusedRowIndex", "focusedRowKey", "groupPanel", "groupPanel.visible", "paging", "paging.pageIndex", "paging.pageSize", "searchPanel", "searchPanel.text", "selectedRowKeys", "selectionFilter"];
      _this.independentEvents = ["onAdaptiveDetailRowPreparing", "onCellClick", "onCellDblClick", "onCellPrepared", "onContentReady", "onContextMenuPreparing", "onDataErrorOccurred", "onDisposing", "onEditCanceled", "onEditCanceling", "onEditingStart", "onEditorPrepared", "onEditorPreparing", "onExporting", "onFocusedCellChanging", "onFocusedRowChanging", "onInitialized", "onInitNewRow", "onKeyDown", "onRowClick", "onRowCollapsed", "onRowCollapsing", "onRowDblClick", "onRowExpanded", "onRowExpanding", "onRowInserted", "onRowInserting", "onRowPrepared", "onRowRemoved", "onRowRemoving", "onRowUpdated", "onRowUpdating", "onRowValidating", "onSaved", "onSaving", "onToolbarPreparing"];
      _this._defaults = {
        defaultColumns: "columns",
        defaultEditing: "editing",
        defaultFilterPanel: "filterPanel",
        defaultFilterValue: "filterValue",
        defaultFocusedColumnIndex: "focusedColumnIndex",
        defaultFocusedRowIndex: "focusedRowIndex",
        defaultFocusedRowKey: "focusedRowKey",
        defaultGroupPanel: "groupPanel",
        defaultPaging: "paging",
        defaultSearchPanel: "searchPanel",
        defaultSelectedRowKeys: "selectedRowKeys",
        defaultSelectionFilter: "selectionFilter"
      };
      _this._expectedChildren = {
        column: { optionName: "columns", isCollectionItem: true },
        columnChooser: { optionName: "columnChooser", isCollectionItem: false },
        columnFixing: { optionName: "columnFixing", isCollectionItem: false },
        dataGridHeaderFilter: { optionName: "headerFilter", isCollectionItem: false },
        dataGridSelection: { optionName: "selection", isCollectionItem: false },
        editing: { optionName: "editing", isCollectionItem: false },
        export: { optionName: "export", isCollectionItem: false },
        filterBuilder: { optionName: "filterBuilder", isCollectionItem: false },
        filterBuilderPopup: { optionName: "filterBuilderPopup", isCollectionItem: false },
        filterPanel: { optionName: "filterPanel", isCollectionItem: false },
        filterRow: { optionName: "filterRow", isCollectionItem: false },
        grouping: { optionName: "grouping", isCollectionItem: false },
        groupPanel: { optionName: "groupPanel", isCollectionItem: false },
        headerFilter: { optionName: "headerFilter", isCollectionItem: false },
        keyboardNavigation: { optionName: "keyboardNavigation", isCollectionItem: false },
        loadPanel: { optionName: "loadPanel", isCollectionItem: false },
        masterDetail: { optionName: "masterDetail", isCollectionItem: false },
        pager: { optionName: "pager", isCollectionItem: false },
        paging: { optionName: "paging", isCollectionItem: false },
        remoteOperations: { optionName: "remoteOperations", isCollectionItem: false },
        rowDragging: { optionName: "rowDragging", isCollectionItem: false },
        scrolling: { optionName: "scrolling", isCollectionItem: false },
        searchPanel: { optionName: "searchPanel", isCollectionItem: false },
        selection: { optionName: "selection", isCollectionItem: false },
        sortByGroupSummaryInfo: { optionName: "sortByGroupSummaryInfo", isCollectionItem: true },
        sorting: { optionName: "sorting", isCollectionItem: false },
        stateStoring: { optionName: "stateStoring", isCollectionItem: false },
        summary: { optionName: "summary", isCollectionItem: false },
        toolbar: { optionName: "toolbar", isCollectionItem: false }
      };
      _this._templateProps = [{
        tmplOption: "dataRowTemplate",
        render: "dataRowRender",
        component: "dataRowComponent",
        keyFn: "dataRowKeyFn"
      }, {
        tmplOption: "rowTemplate",
        render: "rowRender",
        component: "rowComponent",
        keyFn: "rowKeyFn"
      }];
      return _this;
    }
    Object.defineProperty(DataGrid3.prototype, "instance", {
      get: function() {
        return this._instance;
      },
      enumerable: false,
      configurable: true
    });
    return DataGrid3;
  }(Component3)
);
DataGrid2.propTypes = {
  accessKey: PropTypes2.string,
  activeStateEnabled: PropTypes2.bool,
  allowColumnReordering: PropTypes2.bool,
  allowColumnResizing: PropTypes2.bool,
  autoNavigateToFocusedRow: PropTypes2.bool,
  cacheEnabled: PropTypes2.bool,
  cellHintEnabled: PropTypes2.bool,
  columnAutoWidth: PropTypes2.bool,
  columnChooser: PropTypes2.object,
  columnFixing: PropTypes2.object,
  columnHidingEnabled: PropTypes2.bool,
  columnMinWidth: PropTypes2.number,
  columnResizingMode: PropTypes2.oneOfType([
    PropTypes2.string,
    PropTypes2.oneOf([
      "nextColumn",
      "widget"
    ])
  ]),
  columns: PropTypes2.array,
  columnWidth: PropTypes2.oneOfType([
    PropTypes2.number,
    PropTypes2.oneOfType([
      PropTypes2.string,
      PropTypes2.oneOf([
        "auto"
      ])
    ])
  ]),
  customizeColumns: PropTypes2.func,
  dateSerializationFormat: PropTypes2.string,
  disabled: PropTypes2.bool,
  editing: PropTypes2.object,
  elementAttr: PropTypes2.object,
  errorRowEnabled: PropTypes2.bool,
  export: PropTypes2.object,
  filterBuilder: PropTypes2.object,
  filterBuilderPopup: PropTypes2.object,
  filterPanel: PropTypes2.object,
  filterRow: PropTypes2.object,
  filterSyncEnabled: PropTypes2.oneOfType([
    PropTypes2.bool,
    PropTypes2.oneOfType([
      PropTypes2.string,
      PropTypes2.oneOf([
        "auto"
      ])
    ])
  ]),
  filterValue: PropTypes2.oneOfType([
    PropTypes2.array,
    PropTypes2.func,
    PropTypes2.string
  ]),
  focusedColumnIndex: PropTypes2.number,
  focusedRowEnabled: PropTypes2.bool,
  focusedRowIndex: PropTypes2.number,
  grouping: PropTypes2.object,
  groupPanel: PropTypes2.object,
  headerFilter: PropTypes2.object,
  height: PropTypes2.oneOfType([
    PropTypes2.func,
    PropTypes2.number,
    PropTypes2.string
  ]),
  highlightChanges: PropTypes2.bool,
  hint: PropTypes2.string,
  hoverStateEnabled: PropTypes2.bool,
  keyboardNavigation: PropTypes2.object,
  keyExpr: PropTypes2.oneOfType([
    PropTypes2.array,
    PropTypes2.string
  ]),
  loadPanel: PropTypes2.object,
  masterDetail: PropTypes2.object,
  noDataText: PropTypes2.string,
  onAdaptiveDetailRowPreparing: PropTypes2.func,
  onCellClick: PropTypes2.func,
  onCellDblClick: PropTypes2.func,
  onCellHoverChanged: PropTypes2.func,
  onCellPrepared: PropTypes2.func,
  onContentReady: PropTypes2.func,
  onContextMenuPreparing: PropTypes2.func,
  onDataErrorOccurred: PropTypes2.func,
  onDisposing: PropTypes2.func,
  onEditCanceled: PropTypes2.func,
  onEditCanceling: PropTypes2.func,
  onEditingStart: PropTypes2.func,
  onEditorPrepared: PropTypes2.func,
  onEditorPreparing: PropTypes2.func,
  onExporting: PropTypes2.func,
  onFocusedCellChanged: PropTypes2.func,
  onFocusedCellChanging: PropTypes2.func,
  onFocusedRowChanged: PropTypes2.func,
  onFocusedRowChanging: PropTypes2.func,
  onInitialized: PropTypes2.func,
  onInitNewRow: PropTypes2.func,
  onKeyDown: PropTypes2.func,
  onOptionChanged: PropTypes2.func,
  onRowClick: PropTypes2.func,
  onRowCollapsed: PropTypes2.func,
  onRowCollapsing: PropTypes2.func,
  onRowDblClick: PropTypes2.func,
  onRowExpanded: PropTypes2.func,
  onRowExpanding: PropTypes2.func,
  onRowInserted: PropTypes2.func,
  onRowInserting: PropTypes2.func,
  onRowPrepared: PropTypes2.func,
  onRowRemoved: PropTypes2.func,
  onRowRemoving: PropTypes2.func,
  onRowUpdated: PropTypes2.func,
  onRowUpdating: PropTypes2.func,
  onRowValidating: PropTypes2.func,
  onSaved: PropTypes2.func,
  onSaving: PropTypes2.func,
  onSelectionChanged: PropTypes2.func,
  onToolbarPreparing: PropTypes2.func,
  pager: PropTypes2.object,
  paging: PropTypes2.object,
  remoteOperations: PropTypes2.oneOfType([
    PropTypes2.bool,
    PropTypes2.object,
    PropTypes2.oneOfType([
      PropTypes2.string,
      PropTypes2.oneOf([
        "auto"
      ])
    ])
  ]),
  renderAsync: PropTypes2.bool,
  repaintChangesOnly: PropTypes2.bool,
  rowAlternationEnabled: PropTypes2.bool,
  rowDragging: PropTypes2.object,
  rtlEnabled: PropTypes2.bool,
  scrolling: PropTypes2.object,
  searchPanel: PropTypes2.object,
  selectedRowKeys: PropTypes2.array,
  selection: PropTypes2.object,
  selectionFilter: PropTypes2.oneOfType([
    PropTypes2.array,
    PropTypes2.func,
    PropTypes2.string
  ]),
  showBorders: PropTypes2.bool,
  showColumnHeaders: PropTypes2.bool,
  showColumnLines: PropTypes2.bool,
  showRowLines: PropTypes2.bool,
  sortByGroupSummaryInfo: PropTypes2.array,
  sorting: PropTypes2.object,
  stateStoring: PropTypes2.object,
  summary: PropTypes2.object,
  syncLookupFilterValues: PropTypes2.bool,
  tabIndex: PropTypes2.number,
  toolbar: PropTypes2.object,
  twoWayBindingEnabled: PropTypes2.bool,
  visible: PropTypes2.bool,
  width: PropTypes2.oneOfType([
    PropTypes2.func,
    PropTypes2.number,
    PropTypes2.string
  ]),
  wordWrapEnabled: PropTypes2.bool
};
var Animation = (
  /** @class */
  function(_super) {
    __extends7(Animation2, _super);
    function Animation2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Animation2.OptionName = "animation";
    Animation2.ExpectedChildren = {
      hide: { optionName: "hide", isCollectionItem: false },
      show: { optionName: "show", isCollectionItem: false }
    };
    return Animation2;
  }(nested_option_default)
);
var AsyncRule = (
  /** @class */
  function(_super) {
    __extends7(AsyncRule2, _super);
    function AsyncRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    AsyncRule2.OptionName = "validationRules";
    AsyncRule2.IsCollectionItem = true;
    AsyncRule2.PredefinedProps = {
      type: "async"
    };
    return AsyncRule2;
  }(nested_option_default)
);
var At = (
  /** @class */
  function(_super) {
    __extends7(At2, _super);
    function At2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    At2.OptionName = "at";
    return At2;
  }(nested_option_default)
);
var BoundaryOffset = (
  /** @class */
  function(_super) {
    __extends7(BoundaryOffset2, _super);
    function BoundaryOffset2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    BoundaryOffset2.OptionName = "boundaryOffset";
    return BoundaryOffset2;
  }(nested_option_default)
);
var Button3 = (
  /** @class */
  function(_super) {
    __extends7(Button4, _super);
    function Button4() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Button4.OptionName = "buttons";
    Button4.IsCollectionItem = true;
    Button4.TemplateProps = [{
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return Button4;
  }(nested_option_default)
);
var Change = (
  /** @class */
  function(_super) {
    __extends7(Change2, _super);
    function Change2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Change2.OptionName = "changes";
    Change2.IsCollectionItem = true;
    return Change2;
  }(nested_option_default)
);
var ColCountByScreen = (
  /** @class */
  function(_super) {
    __extends7(ColCountByScreen2, _super);
    function ColCountByScreen2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColCountByScreen2.OptionName = "colCountByScreen";
    return ColCountByScreen2;
  }(nested_option_default)
);
var Collision = (
  /** @class */
  function(_super) {
    __extends7(Collision2, _super);
    function Collision2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Collision2.OptionName = "collision";
    return Collision2;
  }(nested_option_default)
);
var Column = (
  /** @class */
  function(_super) {
    __extends7(Column2, _super);
    function Column2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Column2.OptionName = "columns";
    Column2.IsCollectionItem = true;
    Column2.DefaultsProps = {
      defaultFilterValue: "filterValue",
      defaultFilterValues: "filterValues",
      defaultGroupIndex: "groupIndex",
      defaultSelectedFilterOperation: "selectedFilterOperation",
      defaultSortIndex: "sortIndex",
      defaultSortOrder: "sortOrder",
      defaultVisible: "visible",
      defaultVisibleIndex: "visibleIndex"
    };
    Column2.ExpectedChildren = {
      AsyncRule: { optionName: "validationRules", isCollectionItem: true },
      button: { optionName: "buttons", isCollectionItem: true },
      columnHeaderFilter: { optionName: "headerFilter", isCollectionItem: false },
      columnLookup: { optionName: "lookup", isCollectionItem: false },
      CompareRule: { optionName: "validationRules", isCollectionItem: true },
      CustomRule: { optionName: "validationRules", isCollectionItem: true },
      EmailRule: { optionName: "validationRules", isCollectionItem: true },
      format: { optionName: "format", isCollectionItem: false },
      formItem: { optionName: "formItem", isCollectionItem: false },
      headerFilter: { optionName: "headerFilter", isCollectionItem: false },
      lookup: { optionName: "lookup", isCollectionItem: false },
      NumericRule: { optionName: "validationRules", isCollectionItem: true },
      PatternRule: { optionName: "validationRules", isCollectionItem: true },
      RangeRule: { optionName: "validationRules", isCollectionItem: true },
      RequiredRule: { optionName: "validationRules", isCollectionItem: true },
      StringLengthRule: { optionName: "validationRules", isCollectionItem: true },
      validationRule: { optionName: "validationRules", isCollectionItem: true }
    };
    Column2.TemplateProps = [{
      tmplOption: "cellTemplate",
      render: "cellRender",
      component: "cellComponent",
      keyFn: "cellKeyFn"
    }, {
      tmplOption: "editCellTemplate",
      render: "editCellRender",
      component: "editCellComponent",
      keyFn: "editCellKeyFn"
    }, {
      tmplOption: "groupCellTemplate",
      render: "groupCellRender",
      component: "groupCellComponent",
      keyFn: "groupCellKeyFn"
    }, {
      tmplOption: "headerCellTemplate",
      render: "headerCellRender",
      component: "headerCellComponent",
      keyFn: "headerCellKeyFn"
    }];
    return Column2;
  }(nested_option_default)
);
var ColumnChooser = (
  /** @class */
  function(_super) {
    __extends7(ColumnChooser2, _super);
    function ColumnChooser2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnChooser2.OptionName = "columnChooser";
    ColumnChooser2.ExpectedChildren = {
      columnChooserSearch: { optionName: "search", isCollectionItem: false },
      columnChooserSelection: { optionName: "selection", isCollectionItem: false },
      position: { optionName: "position", isCollectionItem: false },
      search: { optionName: "search", isCollectionItem: false },
      selection: { optionName: "selection", isCollectionItem: false }
    };
    return ColumnChooser2;
  }(nested_option_default)
);
var ColumnChooserSearch = (
  /** @class */
  function(_super) {
    __extends7(ColumnChooserSearch2, _super);
    function ColumnChooserSearch2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnChooserSearch2.OptionName = "search";
    return ColumnChooserSearch2;
  }(nested_option_default)
);
var ColumnChooserSelection = (
  /** @class */
  function(_super) {
    __extends7(ColumnChooserSelection2, _super);
    function ColumnChooserSelection2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnChooserSelection2.OptionName = "selection";
    return ColumnChooserSelection2;
  }(nested_option_default)
);
var ColumnFixing = (
  /** @class */
  function(_super) {
    __extends7(ColumnFixing2, _super);
    function ColumnFixing2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnFixing2.OptionName = "columnFixing";
    ColumnFixing2.ExpectedChildren = {
      columnFixingTexts: { optionName: "texts", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return ColumnFixing2;
  }(nested_option_default)
);
var ColumnFixingTexts = (
  /** @class */
  function(_super) {
    __extends7(ColumnFixingTexts2, _super);
    function ColumnFixingTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnFixingTexts2.OptionName = "texts";
    return ColumnFixingTexts2;
  }(nested_option_default)
);
var ColumnHeaderFilter = (
  /** @class */
  function(_super) {
    __extends7(ColumnHeaderFilter2, _super);
    function ColumnHeaderFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnHeaderFilter2.OptionName = "headerFilter";
    ColumnHeaderFilter2.ExpectedChildren = {
      columnHeaderFilterSearch: { optionName: "search", isCollectionItem: false },
      search: { optionName: "search", isCollectionItem: false }
    };
    return ColumnHeaderFilter2;
  }(nested_option_default)
);
var ColumnHeaderFilterSearch = (
  /** @class */
  function(_super) {
    __extends7(ColumnHeaderFilterSearch2, _super);
    function ColumnHeaderFilterSearch2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnHeaderFilterSearch2.OptionName = "search";
    return ColumnHeaderFilterSearch2;
  }(nested_option_default)
);
var ColumnLookup = (
  /** @class */
  function(_super) {
    __extends7(ColumnLookup2, _super);
    function ColumnLookup2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnLookup2.OptionName = "lookup";
    return ColumnLookup2;
  }(nested_option_default)
);
var CompareRule = (
  /** @class */
  function(_super) {
    __extends7(CompareRule2, _super);
    function CompareRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CompareRule2.OptionName = "validationRules";
    CompareRule2.IsCollectionItem = true;
    CompareRule2.PredefinedProps = {
      type: "compare"
    };
    return CompareRule2;
  }(nested_option_default)
);
var CursorOffset = (
  /** @class */
  function(_super) {
    __extends7(CursorOffset2, _super);
    function CursorOffset2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CursorOffset2.OptionName = "cursorOffset";
    return CursorOffset2;
  }(nested_option_default)
);
var CustomOperation = (
  /** @class */
  function(_super) {
    __extends7(CustomOperation2, _super);
    function CustomOperation2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CustomOperation2.OptionName = "customOperations";
    CustomOperation2.IsCollectionItem = true;
    CustomOperation2.TemplateProps = [{
      tmplOption: "editorTemplate",
      render: "editorRender",
      component: "editorComponent",
      keyFn: "editorKeyFn"
    }];
    return CustomOperation2;
  }(nested_option_default)
);
var CustomRule = (
  /** @class */
  function(_super) {
    __extends7(CustomRule2, _super);
    function CustomRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CustomRule2.OptionName = "validationRules";
    CustomRule2.IsCollectionItem = true;
    CustomRule2.PredefinedProps = {
      type: "custom"
    };
    return CustomRule2;
  }(nested_option_default)
);
var DataGridHeaderFilter = (
  /** @class */
  function(_super) {
    __extends7(DataGridHeaderFilter2, _super);
    function DataGridHeaderFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DataGridHeaderFilter2.OptionName = "headerFilter";
    DataGridHeaderFilter2.ExpectedChildren = {
      dataGridHeaderFilterSearch: { optionName: "search", isCollectionItem: false },
      dataGridHeaderFilterTexts: { optionName: "texts", isCollectionItem: false },
      search: { optionName: "search", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return DataGridHeaderFilter2;
  }(nested_option_default)
);
var DataGridHeaderFilterSearch = (
  /** @class */
  function(_super) {
    __extends7(DataGridHeaderFilterSearch2, _super);
    function DataGridHeaderFilterSearch2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DataGridHeaderFilterSearch2.OptionName = "search";
    return DataGridHeaderFilterSearch2;
  }(nested_option_default)
);
var DataGridHeaderFilterTexts = (
  /** @class */
  function(_super) {
    __extends7(DataGridHeaderFilterTexts2, _super);
    function DataGridHeaderFilterTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DataGridHeaderFilterTexts2.OptionName = "texts";
    return DataGridHeaderFilterTexts2;
  }(nested_option_default)
);
var DataGridSelection = (
  /** @class */
  function(_super) {
    __extends7(DataGridSelection2, _super);
    function DataGridSelection2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DataGridSelection2.OptionName = "selection";
    return DataGridSelection2;
  }(nested_option_default)
);
var Editing = (
  /** @class */
  function(_super) {
    __extends7(Editing2, _super);
    function Editing2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Editing2.OptionName = "editing";
    Editing2.DefaultsProps = {
      defaultChanges: "changes",
      defaultEditColumnName: "editColumnName",
      defaultEditRowKey: "editRowKey"
    };
    Editing2.ExpectedChildren = {
      change: { optionName: "changes", isCollectionItem: true },
      editingTexts: { optionName: "texts", isCollectionItem: false },
      form: { optionName: "form", isCollectionItem: false },
      popup: { optionName: "popup", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return Editing2;
  }(nested_option_default)
);
var EditingTexts = (
  /** @class */
  function(_super) {
    __extends7(EditingTexts2, _super);
    function EditingTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    EditingTexts2.OptionName = "texts";
    return EditingTexts2;
  }(nested_option_default)
);
var EmailRule = (
  /** @class */
  function(_super) {
    __extends7(EmailRule2, _super);
    function EmailRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    EmailRule2.OptionName = "validationRules";
    EmailRule2.IsCollectionItem = true;
    EmailRule2.PredefinedProps = {
      type: "email"
    };
    return EmailRule2;
  }(nested_option_default)
);
var Export = (
  /** @class */
  function(_super) {
    __extends7(Export2, _super);
    function Export2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Export2.OptionName = "export";
    Export2.ExpectedChildren = {
      exportTexts: { optionName: "texts", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return Export2;
  }(nested_option_default)
);
var ExportTexts = (
  /** @class */
  function(_super) {
    __extends7(ExportTexts2, _super);
    function ExportTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ExportTexts2.OptionName = "texts";
    return ExportTexts2;
  }(nested_option_default)
);
var Field = (
  /** @class */
  function(_super) {
    __extends7(Field2, _super);
    function Field2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Field2.OptionName = "fields";
    Field2.IsCollectionItem = true;
    Field2.ExpectedChildren = {
      fieldLookup: { optionName: "lookup", isCollectionItem: false },
      format: { optionName: "format", isCollectionItem: false },
      lookup: { optionName: "lookup", isCollectionItem: false }
    };
    Field2.TemplateProps = [{
      tmplOption: "editorTemplate",
      render: "editorRender",
      component: "editorComponent",
      keyFn: "editorKeyFn"
    }];
    return Field2;
  }(nested_option_default)
);
var FieldLookup = (
  /** @class */
  function(_super) {
    __extends7(FieldLookup2, _super);
    function FieldLookup2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FieldLookup2.OptionName = "lookup";
    return FieldLookup2;
  }(nested_option_default)
);
var FilterBuilder2 = (
  /** @class */
  function(_super) {
    __extends7(FilterBuilder3, _super);
    function FilterBuilder3() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterBuilder3.OptionName = "filterBuilder";
    FilterBuilder3.DefaultsProps = {
      defaultValue: "value"
    };
    FilterBuilder3.ExpectedChildren = {
      customOperation: { optionName: "customOperations", isCollectionItem: true },
      field: { optionName: "fields", isCollectionItem: true },
      filterOperationDescriptions: { optionName: "filterOperationDescriptions", isCollectionItem: false },
      groupOperationDescriptions: { optionName: "groupOperationDescriptions", isCollectionItem: false }
    };
    return FilterBuilder3;
  }(nested_option_default)
);
var FilterBuilderPopup = (
  /** @class */
  function(_super) {
    __extends7(FilterBuilderPopup2, _super);
    function FilterBuilderPopup2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterBuilderPopup2.OptionName = "filterBuilderPopup";
    FilterBuilderPopup2.DefaultsProps = {
      defaultHeight: "height",
      defaultPosition: "position",
      defaultVisible: "visible",
      defaultWidth: "width"
    };
    FilterBuilderPopup2.TemplateProps = [{
      tmplOption: "contentTemplate",
      render: "contentRender",
      component: "contentComponent",
      keyFn: "contentKeyFn"
    }, {
      tmplOption: "titleTemplate",
      render: "titleRender",
      component: "titleComponent",
      keyFn: "titleKeyFn"
    }];
    return FilterBuilderPopup2;
  }(nested_option_default)
);
var FilterOperationDescriptions = (
  /** @class */
  function(_super) {
    __extends7(FilterOperationDescriptions2, _super);
    function FilterOperationDescriptions2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterOperationDescriptions2.OptionName = "filterOperationDescriptions";
    return FilterOperationDescriptions2;
  }(nested_option_default)
);
var FilterPanel = (
  /** @class */
  function(_super) {
    __extends7(FilterPanel2, _super);
    function FilterPanel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterPanel2.OptionName = "filterPanel";
    FilterPanel2.DefaultsProps = {
      defaultFilterEnabled: "filterEnabled"
    };
    FilterPanel2.ExpectedChildren = {
      filterPanelTexts: { optionName: "texts", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return FilterPanel2;
  }(nested_option_default)
);
var FilterPanelTexts = (
  /** @class */
  function(_super) {
    __extends7(FilterPanelTexts2, _super);
    function FilterPanelTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterPanelTexts2.OptionName = "texts";
    return FilterPanelTexts2;
  }(nested_option_default)
);
var FilterRow = (
  /** @class */
  function(_super) {
    __extends7(FilterRow2, _super);
    function FilterRow2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterRow2.OptionName = "filterRow";
    FilterRow2.ExpectedChildren = {
      operationDescriptions: { optionName: "operationDescriptions", isCollectionItem: false }
    };
    return FilterRow2;
  }(nested_option_default)
);
var Form2 = (
  /** @class */
  function(_super) {
    __extends7(Form3, _super);
    function Form3() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Form3.OptionName = "form";
    Form3.DefaultsProps = {
      defaultFormData: "formData"
    };
    Form3.ExpectedChildren = {
      colCountByScreen: { optionName: "colCountByScreen", isCollectionItem: false }
    };
    return Form3;
  }(nested_option_default)
);
var Format = (
  /** @class */
  function(_super) {
    __extends7(Format2, _super);
    function Format2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Format2.OptionName = "format";
    return Format2;
  }(nested_option_default)
);
var FormItem = (
  /** @class */
  function(_super) {
    __extends7(FormItem2, _super);
    function FormItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FormItem2.OptionName = "formItem";
    FormItem2.ExpectedChildren = {
      AsyncRule: { optionName: "validationRules", isCollectionItem: true },
      CompareRule: { optionName: "validationRules", isCollectionItem: true },
      CustomRule: { optionName: "validationRules", isCollectionItem: true },
      EmailRule: { optionName: "validationRules", isCollectionItem: true },
      label: { optionName: "label", isCollectionItem: false },
      NumericRule: { optionName: "validationRules", isCollectionItem: true },
      PatternRule: { optionName: "validationRules", isCollectionItem: true },
      RangeRule: { optionName: "validationRules", isCollectionItem: true },
      RequiredRule: { optionName: "validationRules", isCollectionItem: true },
      StringLengthRule: { optionName: "validationRules", isCollectionItem: true },
      validationRule: { optionName: "validationRules", isCollectionItem: true }
    };
    FormItem2.TemplateProps = [{
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return FormItem2;
  }(nested_option_default)
);
var From = (
  /** @class */
  function(_super) {
    __extends7(From2, _super);
    function From2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    From2.OptionName = "from";
    From2.ExpectedChildren = {
      position: { optionName: "position", isCollectionItem: false }
    };
    return From2;
  }(nested_option_default)
);
var Grouping = (
  /** @class */
  function(_super) {
    __extends7(Grouping2, _super);
    function Grouping2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Grouping2.OptionName = "grouping";
    Grouping2.ExpectedChildren = {
      groupingTexts: { optionName: "texts", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false }
    };
    return Grouping2;
  }(nested_option_default)
);
var GroupingTexts = (
  /** @class */
  function(_super) {
    __extends7(GroupingTexts2, _super);
    function GroupingTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupingTexts2.OptionName = "texts";
    return GroupingTexts2;
  }(nested_option_default)
);
var GroupItem = (
  /** @class */
  function(_super) {
    __extends7(GroupItem2, _super);
    function GroupItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupItem2.OptionName = "groupItems";
    GroupItem2.IsCollectionItem = true;
    GroupItem2.ExpectedChildren = {
      valueFormat: { optionName: "valueFormat", isCollectionItem: false }
    };
    return GroupItem2;
  }(nested_option_default)
);
var GroupOperationDescriptions = (
  /** @class */
  function(_super) {
    __extends7(GroupOperationDescriptions2, _super);
    function GroupOperationDescriptions2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupOperationDescriptions2.OptionName = "groupOperationDescriptions";
    return GroupOperationDescriptions2;
  }(nested_option_default)
);
var GroupPanel = (
  /** @class */
  function(_super) {
    __extends7(GroupPanel2, _super);
    function GroupPanel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupPanel2.OptionName = "groupPanel";
    GroupPanel2.DefaultsProps = {
      defaultVisible: "visible"
    };
    return GroupPanel2;
  }(nested_option_default)
);
var HeaderFilter = (
  /** @class */
  function(_super) {
    __extends7(HeaderFilter2, _super);
    function HeaderFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    HeaderFilter2.OptionName = "headerFilter";
    return HeaderFilter2;
  }(nested_option_default)
);
var Hide = (
  /** @class */
  function(_super) {
    __extends7(Hide2, _super);
    function Hide2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Hide2.OptionName = "hide";
    Hide2.ExpectedChildren = {
      from: { optionName: "from", isCollectionItem: false },
      to: { optionName: "to", isCollectionItem: false }
    };
    return Hide2;
  }(nested_option_default)
);
var Item = (
  /** @class */
  function(_super) {
    __extends7(Item2, _super);
    function Item2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Item2.OptionName = "items";
    Item2.IsCollectionItem = true;
    Item2.TemplateProps = [{
      tmplOption: "menuItemTemplate",
      render: "menuItemRender",
      component: "menuItemComponent",
      keyFn: "menuItemKeyFn"
    }, {
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return Item2;
  }(nested_option_default)
);
var KeyboardNavigation = (
  /** @class */
  function(_super) {
    __extends7(KeyboardNavigation2, _super);
    function KeyboardNavigation2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    KeyboardNavigation2.OptionName = "keyboardNavigation";
    return KeyboardNavigation2;
  }(nested_option_default)
);
var Label = (
  /** @class */
  function(_super) {
    __extends7(Label2, _super);
    function Label2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Label2.OptionName = "label";
    Label2.TemplateProps = [{
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return Label2;
  }(nested_option_default)
);
var LoadPanel = (
  /** @class */
  function(_super) {
    __extends7(LoadPanel2, _super);
    function LoadPanel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    LoadPanel2.OptionName = "loadPanel";
    return LoadPanel2;
  }(nested_option_default)
);
var Lookup = (
  /** @class */
  function(_super) {
    __extends7(Lookup2, _super);
    function Lookup2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Lookup2.OptionName = "lookup";
    return Lookup2;
  }(nested_option_default)
);
var MasterDetail = (
  /** @class */
  function(_super) {
    __extends7(MasterDetail2, _super);
    function MasterDetail2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    MasterDetail2.OptionName = "masterDetail";
    MasterDetail2.TemplateProps = [{
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return MasterDetail2;
  }(nested_option_default)
);
var My = (
  /** @class */
  function(_super) {
    __extends7(My2, _super);
    function My2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    My2.OptionName = "my";
    return My2;
  }(nested_option_default)
);
var NumericRule = (
  /** @class */
  function(_super) {
    __extends7(NumericRule2, _super);
    function NumericRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    NumericRule2.OptionName = "validationRules";
    NumericRule2.IsCollectionItem = true;
    NumericRule2.PredefinedProps = {
      type: "numeric"
    };
    return NumericRule2;
  }(nested_option_default)
);
var Offset = (
  /** @class */
  function(_super) {
    __extends7(Offset2, _super);
    function Offset2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Offset2.OptionName = "offset";
    return Offset2;
  }(nested_option_default)
);
var OperationDescriptions = (
  /** @class */
  function(_super) {
    __extends7(OperationDescriptions2, _super);
    function OperationDescriptions2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    OperationDescriptions2.OptionName = "operationDescriptions";
    return OperationDescriptions2;
  }(nested_option_default)
);
var Pager3 = (
  /** @class */
  function(_super) {
    __extends7(Pager4, _super);
    function Pager4() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Pager4.OptionName = "pager";
    return Pager4;
  }(nested_option_default)
);
var Paging = (
  /** @class */
  function(_super) {
    __extends7(Paging2, _super);
    function Paging2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Paging2.OptionName = "paging";
    Paging2.DefaultsProps = {
      defaultPageIndex: "pageIndex",
      defaultPageSize: "pageSize"
    };
    return Paging2;
  }(nested_option_default)
);
var PatternRule = (
  /** @class */
  function(_super) {
    __extends7(PatternRule2, _super);
    function PatternRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PatternRule2.OptionName = "validationRules";
    PatternRule2.IsCollectionItem = true;
    PatternRule2.PredefinedProps = {
      type: "pattern"
    };
    return PatternRule2;
  }(nested_option_default)
);
var Popup2 = (
  /** @class */
  function(_super) {
    __extends7(Popup3, _super);
    function Popup3() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Popup3.OptionName = "popup";
    Popup3.DefaultsProps = {
      defaultHeight: "height",
      defaultPosition: "position",
      defaultVisible: "visible",
      defaultWidth: "width"
    };
    Popup3.ExpectedChildren = {
      animation: { optionName: "animation", isCollectionItem: false },
      position: { optionName: "position", isCollectionItem: false },
      toolbarItem: { optionName: "toolbarItems", isCollectionItem: true }
    };
    Popup3.TemplateProps = [{
      tmplOption: "contentTemplate",
      render: "contentRender",
      component: "contentComponent",
      keyFn: "contentKeyFn"
    }, {
      tmplOption: "titleTemplate",
      render: "titleRender",
      component: "titleComponent",
      keyFn: "titleKeyFn"
    }];
    return Popup3;
  }(nested_option_default)
);
var Position = (
  /** @class */
  function(_super) {
    __extends7(Position2, _super);
    function Position2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Position2.OptionName = "position";
    return Position2;
  }(nested_option_default)
);
var RangeRule = (
  /** @class */
  function(_super) {
    __extends7(RangeRule2, _super);
    function RangeRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    RangeRule2.OptionName = "validationRules";
    RangeRule2.IsCollectionItem = true;
    RangeRule2.PredefinedProps = {
      type: "range"
    };
    return RangeRule2;
  }(nested_option_default)
);
var RemoteOperations = (
  /** @class */
  function(_super) {
    __extends7(RemoteOperations2, _super);
    function RemoteOperations2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    RemoteOperations2.OptionName = "remoteOperations";
    return RemoteOperations2;
  }(nested_option_default)
);
var RequiredRule = (
  /** @class */
  function(_super) {
    __extends7(RequiredRule2, _super);
    function RequiredRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    RequiredRule2.OptionName = "validationRules";
    RequiredRule2.IsCollectionItem = true;
    RequiredRule2.PredefinedProps = {
      type: "required"
    };
    return RequiredRule2;
  }(nested_option_default)
);
var RowDragging = (
  /** @class */
  function(_super) {
    __extends7(RowDragging2, _super);
    function RowDragging2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    RowDragging2.OptionName = "rowDragging";
    RowDragging2.ExpectedChildren = {
      cursorOffset: { optionName: "cursorOffset", isCollectionItem: false }
    };
    RowDragging2.TemplateProps = [{
      tmplOption: "dragTemplate",
      render: "dragRender",
      component: "dragComponent",
      keyFn: "dragKeyFn"
    }];
    return RowDragging2;
  }(nested_option_default)
);
var Scrolling = (
  /** @class */
  function(_super) {
    __extends7(Scrolling2, _super);
    function Scrolling2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Scrolling2.OptionName = "scrolling";
    return Scrolling2;
  }(nested_option_default)
);
var Search = (
  /** @class */
  function(_super) {
    __extends7(Search2, _super);
    function Search2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Search2.OptionName = "search";
    return Search2;
  }(nested_option_default)
);
var SearchPanel = (
  /** @class */
  function(_super) {
    __extends7(SearchPanel2, _super);
    function SearchPanel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SearchPanel2.OptionName = "searchPanel";
    SearchPanel2.DefaultsProps = {
      defaultText: "text"
    };
    return SearchPanel2;
  }(nested_option_default)
);
var Selection2 = (
  /** @class */
  function(_super) {
    __extends7(Selection3, _super);
    function Selection3() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Selection3.OptionName = "selection";
    return Selection3;
  }(nested_option_default)
);
var Show = (
  /** @class */
  function(_super) {
    __extends7(Show2, _super);
    function Show2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Show2.OptionName = "show";
    return Show2;
  }(nested_option_default)
);
var SortByGroupSummaryInfo = (
  /** @class */
  function(_super) {
    __extends7(SortByGroupSummaryInfo2, _super);
    function SortByGroupSummaryInfo2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SortByGroupSummaryInfo2.OptionName = "sortByGroupSummaryInfo";
    SortByGroupSummaryInfo2.IsCollectionItem = true;
    return SortByGroupSummaryInfo2;
  }(nested_option_default)
);
var Sorting = (
  /** @class */
  function(_super) {
    __extends7(Sorting2, _super);
    function Sorting2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Sorting2.OptionName = "sorting";
    return Sorting2;
  }(nested_option_default)
);
var StateStoring = (
  /** @class */
  function(_super) {
    __extends7(StateStoring2, _super);
    function StateStoring2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    StateStoring2.OptionName = "stateStoring";
    return StateStoring2;
  }(nested_option_default)
);
var StringLengthRule = (
  /** @class */
  function(_super) {
    __extends7(StringLengthRule2, _super);
    function StringLengthRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    StringLengthRule2.OptionName = "validationRules";
    StringLengthRule2.IsCollectionItem = true;
    StringLengthRule2.PredefinedProps = {
      type: "stringLength"
    };
    return StringLengthRule2;
  }(nested_option_default)
);
var Summary = (
  /** @class */
  function(_super) {
    __extends7(Summary2, _super);
    function Summary2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Summary2.OptionName = "summary";
    Summary2.ExpectedChildren = {
      groupItem: { optionName: "groupItems", isCollectionItem: true },
      summaryTexts: { optionName: "texts", isCollectionItem: false },
      texts: { optionName: "texts", isCollectionItem: false },
      totalItem: { optionName: "totalItems", isCollectionItem: true }
    };
    return Summary2;
  }(nested_option_default)
);
var SummaryTexts = (
  /** @class */
  function(_super) {
    __extends7(SummaryTexts2, _super);
    function SummaryTexts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SummaryTexts2.OptionName = "texts";
    return SummaryTexts2;
  }(nested_option_default)
);
var Texts = (
  /** @class */
  function(_super) {
    __extends7(Texts2, _super);
    function Texts2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Texts2.OptionName = "texts";
    return Texts2;
  }(nested_option_default)
);
var To = (
  /** @class */
  function(_super) {
    __extends7(To2, _super);
    function To2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    To2.OptionName = "to";
    return To2;
  }(nested_option_default)
);
var Toolbar2 = (
  /** @class */
  function(_super) {
    __extends7(Toolbar3, _super);
    function Toolbar3() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Toolbar3.OptionName = "toolbar";
    Toolbar3.ExpectedChildren = {
      item: { optionName: "items", isCollectionItem: true }
    };
    return Toolbar3;
  }(nested_option_default)
);
var ToolbarItem = (
  /** @class */
  function(_super) {
    __extends7(ToolbarItem2, _super);
    function ToolbarItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ToolbarItem2.OptionName = "toolbarItems";
    ToolbarItem2.IsCollectionItem = true;
    ToolbarItem2.TemplateProps = [{
      tmplOption: "menuItemTemplate",
      render: "menuItemRender",
      component: "menuItemComponent",
      keyFn: "menuItemKeyFn"
    }, {
      tmplOption: "template",
      render: "render",
      component: "component",
      keyFn: "keyFn"
    }];
    return ToolbarItem2;
  }(nested_option_default)
);
var TotalItem = (
  /** @class */
  function(_super) {
    __extends7(TotalItem2, _super);
    function TotalItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    TotalItem2.OptionName = "totalItems";
    TotalItem2.IsCollectionItem = true;
    TotalItem2.ExpectedChildren = {
      valueFormat: { optionName: "valueFormat", isCollectionItem: false }
    };
    return TotalItem2;
  }(nested_option_default)
);
var ValidationRule = (
  /** @class */
  function(_super) {
    __extends7(ValidationRule2, _super);
    function ValidationRule2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ValidationRule2.OptionName = "validationRules";
    ValidationRule2.IsCollectionItem = true;
    ValidationRule2.PredefinedProps = {
      type: "required"
    };
    return ValidationRule2;
  }(nested_option_default)
);
var ValueFormat = (
  /** @class */
  function(_super) {
    __extends7(ValueFormat2, _super);
    function ValueFormat2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ValueFormat2.OptionName = "valueFormat";
    return ValueFormat2;
  }(nested_option_default)
);
var data_grid_default2 = DataGrid2;
export {
  Animation,
  AsyncRule,
  At,
  BoundaryOffset,
  Button3 as Button,
  Change,
  ColCountByScreen,
  Collision,
  Column,
  ColumnChooser,
  ColumnChooserSearch,
  ColumnChooserSelection,
  ColumnFixing,
  ColumnFixingTexts,
  ColumnHeaderFilter,
  ColumnHeaderFilterSearch,
  ColumnLookup,
  CompareRule,
  CursorOffset,
  CustomOperation,
  CustomRule,
  DataGrid2 as DataGrid,
  DataGridHeaderFilter,
  DataGridHeaderFilterSearch,
  DataGridHeaderFilterTexts,
  DataGridSelection,
  Editing,
  EditingTexts,
  EmailRule,
  Export,
  ExportTexts,
  Field,
  FieldLookup,
  FilterBuilder2 as FilterBuilder,
  FilterBuilderPopup,
  FilterOperationDescriptions,
  FilterPanel,
  FilterPanelTexts,
  FilterRow,
  Form2 as Form,
  FormItem,
  Format,
  From,
  GroupItem,
  GroupOperationDescriptions,
  GroupPanel,
  Grouping,
  GroupingTexts,
  HeaderFilter,
  Hide,
  Item,
  KeyboardNavigation,
  Label,
  LoadPanel,
  Lookup,
  MasterDetail,
  My,
  NumericRule,
  Offset,
  OperationDescriptions,
  Pager3 as Pager,
  Paging,
  PatternRule,
  Popup2 as Popup,
  Position,
  RangeRule,
  RemoteOperations,
  RequiredRule,
  RowDragging,
  Scrolling,
  Search,
  SearchPanel,
  Selection2 as Selection,
  Show,
  SortByGroupSummaryInfo,
  Sorting,
  StateStoring,
  StringLengthRule,
  Summary,
  SummaryTexts,
  Texts,
  To,
  Toolbar2 as Toolbar,
  ToolbarItem,
  TotalItem,
  ValidationRule,
  ValueFormat,
  data_grid_default2 as default
};
/*! Bundled license information:

devextreme-react/esm/core/helpers.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/template-wrapper.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/config.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/template-manager.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/utils.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/tree.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/comparer.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/options-manager.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/widget-config.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/template.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/react/element.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/react/templates.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/configuration/react/tree.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/component-base.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/extension-component.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/component.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/core/nested-option.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)

devextreme-react/esm/data-grid.js:
  (*!
   * devextreme-react
   * Version: 23.2.14
   * Build date: Wed Sep 10 2025
   *
   * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
   *
   * This software may be modified and distributed under the terms
   * of the MIT license. See the LICENSE file in the root of the project for details.
   *
   * https://github.com/DevExpress/devextreme-react
   *)
*/
//# sourceMappingURL=devextreme-react_data-grid.js.map
